(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();function bR(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var rv={exports:{}},Ld={};var Z2;function SR(){if(Z2)return Ld;Z2=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function r(n,a,o){var c=null;if(o!==void 0&&(c=""+o),a.key!==void 0&&(c=""+a.key),"key"in a){o={};for(var d in a)d!=="key"&&(o[d]=a[d])}else o=a;return a=o.ref,{$$typeof:t,type:n,key:c,ref:a!==void 0?a:null,props:o}}return Ld.Fragment=e,Ld.jsx=r,Ld.jsxs=r,Ld}var eE;function jR(){return eE||(eE=1,rv.exports=SR()),rv.exports}var s=jR(),nv={exports:{}},ht={};var tE;function CR(){if(tE)return ht;tE=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),v=Symbol.iterator;function y(ee){return ee===null||typeof ee!="object"?null:(ee=v&&ee[v]||ee["@@iterator"],typeof ee=="function"?ee:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,E={};function T(ee,_e,Y){this.props=ee,this.context=_e,this.refs=E,this.updater=Y||w}T.prototype.isReactComponent={},T.prototype.setState=function(ee,_e){if(typeof ee!="object"&&typeof ee!="function"&&ee!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ee,_e,"setState")},T.prototype.forceUpdate=function(ee){this.updater.enqueueForceUpdate(this,ee,"forceUpdate")};function j(){}j.prototype=T.prototype;function O(ee,_e,Y){this.props=ee,this.context=_e,this.refs=E,this.updater=Y||w}var P=O.prototype=new j;P.constructor=O,N(P,T.prototype),P.isPureReactComponent=!0;var z=Array.isArray,Q={H:null,A:null,T:null,S:null,V:null},U=Object.prototype.hasOwnProperty;function C(ee,_e,Y,te,Z,re){return Y=re.ref,{$$typeof:t,type:ee,key:_e,ref:Y!==void 0?Y:null,props:re}}function k(ee,_e){return C(ee.type,_e,void 0,void 0,void 0,ee.props)}function S(ee){return typeof ee=="object"&&ee!==null&&ee.$$typeof===t}function F(ee){var _e={"=":"=0",":":"=2"};return"$"+ee.replace(/[=:]/g,function(Y){return _e[Y]})}var M=/\/+/g;function A(ee,_e){return typeof ee=="object"&&ee!==null&&ee.key!=null?F(""+ee.key):_e.toString(36)}function D(){}function we(ee){switch(ee.status){case"fulfilled":return ee.value;case"rejected":throw ee.reason;default:switch(typeof ee.status=="string"?ee.then(D,D):(ee.status="pending",ee.then(function(_e){ee.status==="pending"&&(ee.status="fulfilled",ee.value=_e)},function(_e){ee.status==="pending"&&(ee.status="rejected",ee.reason=_e)})),ee.status){case"fulfilled":return ee.value;case"rejected":throw ee.reason}}throw ee}function Me(ee,_e,Y,te,Z){var re=typeof ee;(re==="undefined"||re==="boolean")&&(ee=null);var de=!1;if(ee===null)de=!0;else switch(re){case"bigint":case"string":case"number":de=!0;break;case"object":switch(ee.$$typeof){case t:case e:de=!0;break;case p:return de=ee._init,Me(de(ee._payload),_e,Y,te,Z)}}if(de)return Z=Z(ee),de=te===""?"."+A(ee,0):te,z(Z)?(Y="",de!=null&&(Y=de.replace(M,"$&/")+"/"),Me(Z,_e,Y,"",function(He){return He})):Z!=null&&(S(Z)&&(Z=k(Z,Y+(Z.key==null||ee&&ee.key===Z.key?"":(""+Z.key).replace(M,"$&/")+"/")+de)),_e.push(Z)),1;de=0;var Ve=te===""?".":te+":";if(z(ee))for(var ke=0;ke<ee.length;ke++)te=ee[ke],re=Ve+A(te,ke),de+=Me(te,_e,Y,re,Z);else if(ke=y(ee),typeof ke=="function")for(ee=ke.call(ee),ke=0;!(te=ee.next()).done;)te=te.value,re=Ve+A(te,ke++),de+=Me(te,_e,Y,re,Z);else if(re==="object"){if(typeof ee.then=="function")return Me(we(ee),_e,Y,te,Z);throw _e=String(ee),Error("Objects are not valid as a React child (found: "+(_e==="[object Object]"?"object with keys {"+Object.keys(ee).join(", ")+"}":_e)+"). If you meant to render a collection of children, use an array instead.")}return de}function ge(ee,_e,Y){if(ee==null)return ee;var te=[],Z=0;return Me(ee,te,"","",function(re){return _e.call(Y,re,Z++)}),te}function De(ee){if(ee._status===-1){var _e=ee._result;_e=_e(),_e.then(function(Y){(ee._status===0||ee._status===-1)&&(ee._status=1,ee._result=Y)},function(Y){(ee._status===0||ee._status===-1)&&(ee._status=2,ee._result=Y)}),ee._status===-1&&(ee._status=0,ee._result=_e)}if(ee._status===1)return ee._result.default;throw ee._result}var Le=typeof reportError=="function"?reportError:function(ee){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var _e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof ee=="object"&&ee!==null&&typeof ee.message=="string"?String(ee.message):String(ee),error:ee});if(!window.dispatchEvent(_e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",ee);return}console.error(ee)};function Je(){}return ht.Children={map:ge,forEach:function(ee,_e,Y){ge(ee,function(){_e.apply(this,arguments)},Y)},count:function(ee){var _e=0;return ge(ee,function(){_e++}),_e},toArray:function(ee){return ge(ee,function(_e){return _e})||[]},only:function(ee){if(!S(ee))throw Error("React.Children.only expected to receive a single React element child.");return ee}},ht.Component=T,ht.Fragment=r,ht.Profiler=a,ht.PureComponent=O,ht.StrictMode=n,ht.Suspense=m,ht.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Q,ht.__COMPILER_RUNTIME={__proto__:null,c:function(ee){return Q.H.useMemoCache(ee)}},ht.cache=function(ee){return function(){return ee.apply(null,arguments)}},ht.cloneElement=function(ee,_e,Y){if(ee==null)throw Error("The argument must be a React element, but you passed "+ee+".");var te=N({},ee.props),Z=ee.key,re=void 0;if(_e!=null)for(de in _e.ref!==void 0&&(re=void 0),_e.key!==void 0&&(Z=""+_e.key),_e)!U.call(_e,de)||de==="key"||de==="__self"||de==="__source"||de==="ref"&&_e.ref===void 0||(te[de]=_e[de]);var de=arguments.length-2;if(de===1)te.children=Y;else if(1<de){for(var Ve=Array(de),ke=0;ke<de;ke++)Ve[ke]=arguments[ke+2];te.children=Ve}return C(ee.type,Z,void 0,void 0,re,te)},ht.createContext=function(ee){return ee={$$typeof:c,_currentValue:ee,_currentValue2:ee,_threadCount:0,Provider:null,Consumer:null},ee.Provider=ee,ee.Consumer={$$typeof:o,_context:ee},ee},ht.createElement=function(ee,_e,Y){var te,Z={},re=null;if(_e!=null)for(te in _e.key!==void 0&&(re=""+_e.key),_e)U.call(_e,te)&&te!=="key"&&te!=="__self"&&te!=="__source"&&(Z[te]=_e[te]);var de=arguments.length-2;if(de===1)Z.children=Y;else if(1<de){for(var Ve=Array(de),ke=0;ke<de;ke++)Ve[ke]=arguments[ke+2];Z.children=Ve}if(ee&&ee.defaultProps)for(te in de=ee.defaultProps,de)Z[te]===void 0&&(Z[te]=de[te]);return C(ee,re,void 0,void 0,null,Z)},ht.createRef=function(){return{current:null}},ht.forwardRef=function(ee){return{$$typeof:d,render:ee}},ht.isValidElement=S,ht.lazy=function(ee){return{$$typeof:p,_payload:{_status:-1,_result:ee},_init:De}},ht.memo=function(ee,_e){return{$$typeof:h,type:ee,compare:_e===void 0?null:_e}},ht.startTransition=function(ee){var _e=Q.T,Y={};Q.T=Y;try{var te=ee(),Z=Q.S;Z!==null&&Z(Y,te),typeof te=="object"&&te!==null&&typeof te.then=="function"&&te.then(Je,Le)}catch(re){Le(re)}finally{Q.T=_e}},ht.unstable_useCacheRefresh=function(){return Q.H.useCacheRefresh()},ht.use=function(ee){return Q.H.use(ee)},ht.useActionState=function(ee,_e,Y){return Q.H.useActionState(ee,_e,Y)},ht.useCallback=function(ee,_e){return Q.H.useCallback(ee,_e)},ht.useContext=function(ee){return Q.H.useContext(ee)},ht.useDebugValue=function(){},ht.useDeferredValue=function(ee,_e){return Q.H.useDeferredValue(ee,_e)},ht.useEffect=function(ee,_e,Y){var te=Q.H;if(typeof Y=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return te.useEffect(ee,_e)},ht.useId=function(){return Q.H.useId()},ht.useImperativeHandle=function(ee,_e,Y){return Q.H.useImperativeHandle(ee,_e,Y)},ht.useInsertionEffect=function(ee,_e){return Q.H.useInsertionEffect(ee,_e)},ht.useLayoutEffect=function(ee,_e){return Q.H.useLayoutEffect(ee,_e)},ht.useMemo=function(ee,_e){return Q.H.useMemo(ee,_e)},ht.useOptimistic=function(ee,_e){return Q.H.useOptimistic(ee,_e)},ht.useReducer=function(ee,_e,Y){return Q.H.useReducer(ee,_e,Y)},ht.useRef=function(ee){return Q.H.useRef(ee)},ht.useState=function(ee){return Q.H.useState(ee)},ht.useSyncExternalStore=function(ee,_e,Y){return Q.H.useSyncExternalStore(ee,_e,Y)},ht.useTransition=function(){return Q.H.useTransition()},ht.version="19.1.1",ht}var rE;function gx(){return rE||(rE=1,nv.exports=CR()),nv.exports}var B=gx();const So=bR(B);var av={exports:{}},Vd={},sv={exports:{}},iv={};var nE;function AR(){return nE||(nE=1,(function(t){function e(ge,De){var Le=ge.length;ge.push(De);e:for(;0<Le;){var Je=Le-1>>>1,ee=ge[Je];if(0<a(ee,De))ge[Je]=De,ge[Le]=ee,Le=Je;else break e}}function r(ge){return ge.length===0?null:ge[0]}function n(ge){if(ge.length===0)return null;var De=ge[0],Le=ge.pop();if(Le!==De){ge[0]=Le;e:for(var Je=0,ee=ge.length,_e=ee>>>1;Je<_e;){var Y=2*(Je+1)-1,te=ge[Y],Z=Y+1,re=ge[Z];if(0>a(te,Le))Z<ee&&0>a(re,te)?(ge[Je]=re,ge[Z]=Le,Je=Z):(ge[Je]=te,ge[Y]=Le,Je=Y);else if(Z<ee&&0>a(re,Le))ge[Je]=re,ge[Z]=Le,Je=Z;else break e}}return De}function a(ge,De){var Le=ge.sortIndex-De.sortIndex;return Le!==0?Le:ge.id-De.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var c=Date,d=c.now();t.unstable_now=function(){return c.now()-d}}var m=[],h=[],p=1,v=null,y=3,w=!1,N=!1,E=!1,T=!1,j=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;function z(ge){for(var De=r(h);De!==null;){if(De.callback===null)n(h);else if(De.startTime<=ge)n(h),De.sortIndex=De.expirationTime,e(m,De);else break;De=r(h)}}function Q(ge){if(E=!1,z(ge),!N)if(r(m)!==null)N=!0,U||(U=!0,A());else{var De=r(h);De!==null&&Me(Q,De.startTime-ge)}}var U=!1,C=-1,k=5,S=-1;function F(){return T?!0:!(t.unstable_now()-S<k)}function M(){if(T=!1,U){var ge=t.unstable_now();S=ge;var De=!0;try{e:{N=!1,E&&(E=!1,O(C),C=-1),w=!0;var Le=y;try{t:{for(z(ge),v=r(m);v!==null&&!(v.expirationTime>ge&&F());){var Je=v.callback;if(typeof Je=="function"){v.callback=null,y=v.priorityLevel;var ee=Je(v.expirationTime<=ge);if(ge=t.unstable_now(),typeof ee=="function"){v.callback=ee,z(ge),De=!0;break t}v===r(m)&&n(m),z(ge)}else n(m);v=r(m)}if(v!==null)De=!0;else{var _e=r(h);_e!==null&&Me(Q,_e.startTime-ge),De=!1}}break e}finally{v=null,y=Le,w=!1}De=void 0}}finally{De?A():U=!1}}}var A;if(typeof P=="function")A=function(){P(M)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,we=D.port2;D.port1.onmessage=M,A=function(){we.postMessage(null)}}else A=function(){j(M,0)};function Me(ge,De){C=j(function(){ge(t.unstable_now())},De)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ge){ge.callback=null},t.unstable_forceFrameRate=function(ge){0>ge||125<ge?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<ge?Math.floor(1e3/ge):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_next=function(ge){switch(y){case 1:case 2:case 3:var De=3;break;default:De=y}var Le=y;y=De;try{return ge()}finally{y=Le}},t.unstable_requestPaint=function(){T=!0},t.unstable_runWithPriority=function(ge,De){switch(ge){case 1:case 2:case 3:case 4:case 5:break;default:ge=3}var Le=y;y=ge;try{return De()}finally{y=Le}},t.unstable_scheduleCallback=function(ge,De,Le){var Je=t.unstable_now();switch(typeof Le=="object"&&Le!==null?(Le=Le.delay,Le=typeof Le=="number"&&0<Le?Je+Le:Je):Le=Je,ge){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=Le+ee,ge={id:p++,callback:De,priorityLevel:ge,startTime:Le,expirationTime:ee,sortIndex:-1},Le>Je?(ge.sortIndex=Le,e(h,ge),r(m)===null&&ge===r(h)&&(E?(O(C),C=-1):E=!0,Me(Q,Le-Je))):(ge.sortIndex=ee,e(m,ge),N||w||(N=!0,U||(U=!0,A()))),ge},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(ge){var De=y;return function(){var Le=y;y=De;try{return ge.apply(this,arguments)}finally{y=Le}}}})(iv)),iv}var aE;function RR(){return aE||(aE=1,sv.exports=AR()),sv.exports}var ov={exports:{}},Nn={};var sE;function DR(){if(sE)return Nn;sE=1;var t=gx();function e(m){var h="https://react.dev/errors/"+m;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+m+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(e(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(m,h,p){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:v==null?null:""+v,children:m,containerInfo:h,implementation:p}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,h){if(m==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Nn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Nn.createPortal=function(m,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return o(m,h,null,p)},Nn.flushSync=function(m){var h=c.T,p=n.p;try{if(c.T=null,n.p=2,m)return m()}finally{c.T=h,n.p=p,n.d.f()}},Nn.preconnect=function(m,h){typeof m=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,n.d.C(m,h))},Nn.prefetchDNS=function(m){typeof m=="string"&&n.d.D(m)},Nn.preinit=function(m,h){if(typeof m=="string"&&h&&typeof h.as=="string"){var p=h.as,v=d(p,h.crossOrigin),y=typeof h.integrity=="string"?h.integrity:void 0,w=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?n.d.S(m,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:v,integrity:y,fetchPriority:w}):p==="script"&&n.d.X(m,{crossOrigin:v,integrity:y,fetchPriority:w,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Nn.preinitModule=function(m,h){if(typeof m=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=d(h.as,h.crossOrigin);n.d.M(m,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&n.d.M(m)},Nn.preload=function(m,h){if(typeof m=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,v=d(p,h.crossOrigin);n.d.L(m,p,{crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Nn.preloadModule=function(m,h){if(typeof m=="string")if(h){var p=d(h.as,h.crossOrigin);n.d.m(m,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else n.d.m(m)},Nn.requestFormReset=function(m){n.d.r(m)},Nn.unstable_batchedUpdates=function(m,h){return m(h)},Nn.useFormState=function(m,h,p){return c.H.useFormState(m,h,p)},Nn.useFormStatus=function(){return c.H.useHostTransitionStatus()},Nn.version="19.1.1",Nn}var iE;function IR(){if(iE)return ov.exports;iE=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),ov.exports=DR(),ov.exports}var oE;function kR(){if(oE)return Vd;oE=1;var t=RR(),e=gx(),r=IR();function n(i){var l="https://react.dev/errors/"+i;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)l+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+i+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var l=i,u=i;if(i.alternate)for(;l.return;)l=l.return;else{i=l;do l=i,(l.flags&4098)!==0&&(u=l.return),i=l.return;while(i)}return l.tag===3?u:null}function c(i){if(i.tag===13){var l=i.memoizedState;if(l===null&&(i=i.alternate,i!==null&&(l=i.memoizedState)),l!==null)return l.dehydrated}return null}function d(i){if(o(i)!==i)throw Error(n(188))}function m(i){var l=i.alternate;if(!l){if(l=o(i),l===null)throw Error(n(188));return l!==i?null:i}for(var u=i,f=l;;){var x=u.return;if(x===null)break;var _=x.alternate;if(_===null){if(f=x.return,f!==null){u=f;continue}break}if(x.child===_.child){for(_=x.child;_;){if(_===u)return d(x),i;if(_===f)return d(x),l;_=_.sibling}throw Error(n(188))}if(u.return!==f.return)u=x,f=_;else{for(var I=!1,V=x.child;V;){if(V===u){I=!0,u=x,f=_;break}if(V===f){I=!0,f=x,u=_;break}V=V.sibling}if(!I){for(V=_.child;V;){if(V===u){I=!0,u=_,f=x;break}if(V===f){I=!0,f=_,u=x;break}V=V.sibling}if(!I)throw Error(n(189))}}if(u.alternate!==f)throw Error(n(190))}if(u.tag!==3)throw Error(n(188));return u.stateNode.current===u?i:l}function h(i){var l=i.tag;if(l===5||l===26||l===27||l===6)return i;for(i=i.child;i!==null;){if(l=h(i),l!==null)return l;i=i.sibling}return null}var p=Object.assign,v=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),j=Symbol.for("react.provider"),O=Symbol.for("react.consumer"),P=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),Q=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),F=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function A(i){return i===null||typeof i!="object"?null:(i=M&&i[M]||i["@@iterator"],typeof i=="function"?i:null)}var D=Symbol.for("react.client.reference");function we(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===D?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case N:return"Fragment";case T:return"Profiler";case E:return"StrictMode";case Q:return"Suspense";case U:return"SuspenseList";case S:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case w:return"Portal";case P:return(i.displayName||"Context")+".Provider";case O:return(i._context.displayName||"Context")+".Consumer";case z:var l=i.render;return i=i.displayName,i||(i=l.displayName||l.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case C:return l=i.displayName||null,l!==null?l:we(i.type)||"Memo";case k:l=i._payload,i=i._init;try{return we(i(l))}catch{}}return null}var Me=Array.isArray,ge=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,De=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Le={pending:!1,data:null,method:null,action:null},Je=[],ee=-1;function _e(i){return{current:i}}function Y(i){0>ee||(i.current=Je[ee],Je[ee]=null,ee--)}function te(i,l){ee++,Je[ee]=i.current,i.current=l}var Z=_e(null),re=_e(null),de=_e(null),Ve=_e(null);function ke(i,l){switch(te(de,l),te(re,i),te(Z,null),l.nodeType){case 9:case 11:i=(i=l.documentElement)&&(i=i.namespaceURI)?j2(i):0;break;default:if(i=l.tagName,l=l.namespaceURI)l=j2(l),i=C2(l,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}Y(Z),te(Z,i)}function He(){Y(Z),Y(re),Y(de)}function ae(i){i.memoizedState!==null&&te(Ve,i);var l=Z.current,u=C2(l,i.type);l!==u&&(te(re,i),te(Z,u))}function Be(i){re.current===i&&(Y(Z),Y(re)),Ve.current===i&&(Y(Ve),kd._currentValue=Le)}var tt=Object.prototype.hasOwnProperty,qt=t.unstable_scheduleCallback,xt=t.unstable_cancelCallback,na=t.unstable_shouldYield,Gt=t.unstable_requestPaint,Ue=t.unstable_now,nn=t.unstable_getCurrentPriorityLevel,Mt=t.unstable_ImmediatePriority,er=t.unstable_UserBlockingPriority,_n=t.unstable_NormalPriority,ac=t.unstable_LowPriority,$s=t.unstable_IdlePriority,Hn=t.log,wa=t.unstable_setDisableYieldValue,Na=null,Sr=null;function jr(i){if(typeof Hn=="function"&&wa(i),Sr&&typeof Sr.setStrictMode=="function")try{Sr.setStrictMode(Na,i)}catch{}}var an=Math.clz32?Math.clz32:Xo,sc=Math.log,Ko=Math.LN2;function Xo(i){return i>>>=0,i===0?32:31-(sc(i)/Ko|0)|0}var aa=256,za=4194304;function qn(i){var l=i&42;if(l!==0)return l;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Gn(i,l,u){var f=i.pendingLanes;if(f===0)return 0;var x=0,_=i.suspendedLanes,I=i.pingedLanes;i=i.warmLanes;var V=f&134217727;return V!==0?(f=V&~_,f!==0?x=qn(f):(I&=V,I!==0?x=qn(I):u||(u=V&~i,u!==0&&(x=qn(u))))):(V=f&~_,V!==0?x=qn(V):I!==0?x=qn(I):u||(u=f&~i,u!==0&&(x=qn(u)))),x===0?0:l!==0&&l!==x&&(l&_)===0&&(_=x&-x,u=l&-l,_>=u||_===32&&(u&4194048)!==0)?l:x}function gs(i,l){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&l)===0}function Ws(i,l){switch(i){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Mi(){var i=aa;return aa<<=1,(aa&4194048)===0&&(aa=256),i}function Ha(){var i=za;return za<<=1,(za&62914560)===0&&(za=4194304),i}function Fi(i){for(var l=[],u=0;31>u;u++)l.push(i);return l}function cr(i,l){i.pendingLanes|=l,l!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Ys(i,l,u,f,x,_){var I=i.pendingLanes;i.pendingLanes=u,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=u,i.entangledLanes&=u,i.errorRecoveryDisabledLanes&=u,i.shellSuspendCounter=0;var V=i.entanglements,J=i.expirationTimes,ue=i.hiddenUpdates;for(u=I&~u;0<u;){var Ee=31-an(u),be=1<<Ee;V[Ee]=0,J[Ee]=-1;var me=ue[Ee];if(me!==null)for(ue[Ee]=null,Ee=0;Ee<me.length;Ee++){var pe=me[Ee];pe!==null&&(pe.lane&=-536870913)}u&=~be}f!==0&&vs(i,f,0),_!==0&&x===0&&i.tag!==0&&(i.suspendedLanes|=_&~(I&~l))}function vs(i,l,u){i.pendingLanes|=l,i.suspendedLanes&=~l;var f=31-an(l);i.entangledLanes|=l,i.entanglements[f]=i.entanglements[f]|1073741824|u&4194090}function xs(i,l){var u=i.entangledLanes|=l;for(i=i.entanglements;u;){var f=31-an(u),x=1<<f;x&l|i[f]&l&&(i[f]|=l),u&=~x}}function Qo(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Jo(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function qa(){var i=De.p;return i!==0?i:(i=window.event,i===void 0?32:W2(i.type))}function Pu(i,l){var u=De.p;try{return De.p=i,l()}finally{De.p=u}}var Ta=Math.random().toString(36).slice(2),ur="__reactFiber$"+Ta,_r="__reactProps$"+Ta,Ga="__reactContainer$"+Ta,Ks="__reactEvents$"+Ta,Xs="__reactListeners$"+Ta,L="__reactHandles$"+Ta,W="__reactResources$"+Ta,q="__reactMarker$"+Ta;function G(i){delete i[ur],delete i[_r],delete i[Ks],delete i[Xs],delete i[L]}function K(i){var l=i[ur];if(l)return l;for(var u=i.parentNode;u;){if(l=u[Ga]||u[ur]){if(u=l.alternate,l.child!==null||u!==null&&u.child!==null)for(i=I2(i);i!==null;){if(u=i[ur])return u;i=I2(i)}return l}i=u,u=i.parentNode}return null}function X(i){if(i=i[ur]||i[Ga]){var l=i.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return i}return null}function ce(i){var l=i.tag;if(l===5||l===26||l===27||l===6)return i.stateNode;throw Error(n(33))}function xe(i){var l=i[W];return l||(l=i[W]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function ie(i){i[q]=!0}var he=new Set,fe={};function Ce(i,l){Ie(i,l),Ie(i+"Capture",l)}function Ie(i,l){for(fe[i]=l,i=0;i<l.length;i++)he.add(l[i])}var qe=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Re={},ze={};function lt(i){return tt.call(ze,i)?!0:tt.call(Re,i)?!1:qe.test(i)?ze[i]=!0:(Re[i]=!0,!1)}function At(i,l,u){if(lt(l))if(u===null)i.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":i.removeAttribute(l);return;case"boolean":var f=l.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){i.removeAttribute(l);return}}i.setAttribute(l,""+u)}}function Rt(i,l,u){if(u===null)i.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttribute(l,""+u)}}function Ft(i,l,u,f){if(f===null)i.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(u);return}i.setAttributeNS(l,u,""+f)}}var sa,ba;function In(i){if(sa===void 0)try{throw Error()}catch(u){var l=u.stack.trim().match(/\n( *(at )?)/);sa=l&&l[1]||"",ba=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+sa+i+ba}var $n=!1;function ys(i,l){if(!i||$n)return"";$n=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(l){var be=function(){throw Error()};if(Object.defineProperty(be.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(be,[])}catch(pe){var me=pe}Reflect.construct(i,[],be)}else{try{be.call()}catch(pe){me=pe}i.call(be.prototype)}}else{try{throw Error()}catch(pe){me=pe}(be=i())&&typeof be.catch=="function"&&be.catch(function(){})}}catch(pe){if(pe&&me&&typeof pe.stack=="string")return[pe.stack,me.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=f.DetermineComponentFrameRoot(),I=_[0],V=_[1];if(I&&V){var J=I.split(`
`),ue=V.split(`
`);for(x=f=0;f<J.length&&!J[f].includes("DetermineComponentFrameRoot");)f++;for(;x<ue.length&&!ue[x].includes("DetermineComponentFrameRoot");)x++;if(f===J.length||x===ue.length)for(f=J.length-1,x=ue.length-1;1<=f&&0<=x&&J[f]!==ue[x];)x--;for(;1<=f&&0<=x;f--,x--)if(J[f]!==ue[x]){if(f!==1||x!==1)do if(f--,x--,0>x||J[f]!==ue[x]){var Ee=`
`+J[f].replace(" at new "," at ");return i.displayName&&Ee.includes("<anonymous>")&&(Ee=Ee.replace("<anonymous>",i.displayName)),Ee}while(1<=f&&0<=x);break}}}finally{$n=!1,Error.prepareStackTrace=u}return(u=i?i.displayName||i.name:"")?In(u):""}function ia(i){switch(i.tag){case 26:case 27:case 5:return In(i.type);case 16:return In("Lazy");case 13:return In("Suspense");case 19:return In("SuspenseList");case 0:case 15:return ys(i.type,!1);case 11:return ys(i.type.render,!1);case 1:return ys(i.type,!0);case 31:return In("Activity");default:return""}}function $a(i){try{var l="";do l+=ia(i),i=i.return;while(i);return l}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}function dr(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Pi(i){var l=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Zo(i){var l=Pi(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,l),f=""+i[l];if(!i.hasOwnProperty(l)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var x=u.get,_=u.set;return Object.defineProperty(i,l,{configurable:!0,get:function(){return x.call(this)},set:function(I){f=""+I,_.call(this,I)}}),Object.defineProperty(i,l,{enumerable:u.enumerable}),{getValue:function(){return f},setValue:function(I){f=""+I},stopTracking:function(){i._valueTracker=null,delete i[l]}}}}function Li(i){i._valueTracker||(i._valueTracker=Zo(i))}function $t(i){if(!i)return!1;var l=i._valueTracker;if(!l)return!0;var u=l.getValue(),f="";return i&&(f=Pi(i)?i.checked?"true":"false":i.value),i=f,i!==u?(l.setValue(i),!0):!1}function Qs(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var el=/[\n"\\]/g;function Wr(i){return i.replace(el,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Lu(i,l,u,f,x,_,I,V){i.name="",I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?i.type=I:i.removeAttribute("type"),l!=null?I==="number"?(l===0&&i.value===""||i.value!=l)&&(i.value=""+dr(l)):i.value!==""+dr(l)&&(i.value=""+dr(l)):I!=="submit"&&I!=="reset"||i.removeAttribute("value"),l!=null?Bu(i,I,dr(l)):u!=null?Bu(i,I,dr(u)):f!=null&&i.removeAttribute("value"),x==null&&_!=null&&(i.defaultChecked=!!_),x!=null&&(i.checked=x&&typeof x!="function"&&typeof x!="symbol"),V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"?i.name=""+dr(V):i.removeAttribute("name")}function Vu(i,l,u,f,x,_,I,V){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.type=_),l!=null||u!=null){if(!(_!=="submit"&&_!=="reset"||l!=null))return;u=u!=null?""+dr(u):"",l=l!=null?""+dr(l):u,V||l===i.value||(i.value=l),i.defaultValue=l}f=f??x,f=typeof f!="function"&&typeof f!="symbol"&&!!f,i.checked=V?i.checked:!!f,i.defaultChecked=!!f,I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"&&(i.name=I)}function Bu(i,l,u){l==="number"&&Qs(i.ownerDocument)===i||i.defaultValue===""+u||(i.defaultValue=""+u)}function Vi(i,l,u,f){if(i=i.options,l){l={};for(var x=0;x<u.length;x++)l["$"+u[x]]=!0;for(u=0;u<i.length;u++)x=l.hasOwnProperty("$"+i[u].value),i[u].selected!==x&&(i[u].selected=x),x&&f&&(i[u].defaultSelected=!0)}else{for(u=""+dr(u),l=null,x=0;x<i.length;x++){if(i[x].value===u){i[x].selected=!0,f&&(i[x].defaultSelected=!0);return}l!==null||i[x].disabled||(l=i[x])}l!==null&&(l.selected=!0)}}function tf(i,l,u){if(l!=null&&(l=""+dr(l),l!==i.value&&(i.value=l),u==null)){i.defaultValue!==l&&(i.defaultValue=l);return}i.defaultValue=u!=null?""+dr(u):""}function rf(i,l,u,f){if(l==null){if(f!=null){if(u!=null)throw Error(n(92));if(Me(f)){if(1<f.length)throw Error(n(93));f=f[0]}u=f}u==null&&(u=""),l=u}u=dr(l),i.defaultValue=u,f=i.textContent,f===u&&f!==""&&f!==null&&(i.value=f)}function Sa(i,l){if(l){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=l;return}}i.textContent=l}var Js=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Uu(i,l,u){var f=l.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?f?i.setProperty(l,""):l==="float"?i.cssFloat="":i[l]="":f?i.setProperty(l,u):typeof u!="number"||u===0||Js.has(l)?l==="float"?i.cssFloat=u:i[l]=(""+u).trim():i[l]=u+"px"}function zu(i,l,u){if(l!=null&&typeof l!="object")throw Error(n(62));if(i=i.style,u!=null){for(var f in u)!u.hasOwnProperty(f)||l!=null&&l.hasOwnProperty(f)||(f.indexOf("--")===0?i.setProperty(f,""):f==="float"?i.cssFloat="":i[f]="");for(var x in l)f=l[x],l.hasOwnProperty(x)&&u[x]!==f&&Uu(i,x,f)}else for(var _ in l)l.hasOwnProperty(_)&&Uu(i,_,l[_])}function ic(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),af=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wa(i){return af.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var Hu=null;function qu(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Bi=null,kn=null;function sf(i){var l=X(i);if(l&&(i=l.stateNode)){var u=i[_r]||null;e:switch(i=l.stateNode,l.type){case"input":if(Lu(i,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),l=u.name,u.type==="radio"&&l!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Wr(""+l)+'"][type="radio"]'),l=0;l<u.length;l++){var f=u[l];if(f!==i&&f.form===i.form){var x=f[_r]||null;if(!x)throw Error(n(90));Lu(f,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(l=0;l<u.length;l++)f=u[l],f.form===i.form&&$t(f)}break e;case"textarea":tf(i,u.value,u.defaultValue);break e;case"select":l=u.value,l!=null&&Vi(i,!!u.multiple,l,!1)}}}var tl=!1;function rl(i,l,u){if(tl)return i(l,u);tl=!0;try{var f=i(l);return f}finally{if(tl=!1,(Bi!==null||kn!==null)&&(Kf(),Bi&&(l=Bi,i=kn,kn=Bi=null,sf(l),i)))for(l=0;l<i.length;l++)sf(i[l])}}function Ui(i,l){var u=i.stateNode;if(u===null)return null;var f=u[_r]||null;if(f===null)return null;u=f[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(n(231,l,typeof u));return u}var On=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zs=!1;if(On)try{var zi={};Object.defineProperty(zi,"passive",{get:function(){Zs=!0}}),window.addEventListener("test",zi,zi),window.removeEventListener("test",zi,zi)}catch{Zs=!1}var ja=null,tr=null,oc=null;function of(){if(oc)return oc;var i,l=tr,u=l.length,f,x="value"in ja?ja.value:ja.textContent,_=x.length;for(i=0;i<u&&l[i]===x[i];i++);var I=u-i;for(f=1;f<=I&&l[u-f]===x[_-f];f++);return oc=x.slice(i,1<f?1-f:void 0)}function nl(i){var l=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&l===13&&(i=13)):i=l,i===10&&(i=13),32<=i||i===13?i:0}function al(){return!0}function Gu(){return!1}function Fr(i){function l(u,f,x,_,I){this._reactName=u,this._targetInst=x,this.type=f,this.nativeEvent=_,this.target=I,this.currentTarget=null;for(var V in i)i.hasOwnProperty(V)&&(u=i[V],this[V]=u?u(_):_[V]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?al:Gu,this.isPropagationStopped=Gu,this}return p(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=al)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=al)},persist:function(){},isPersistent:al}),l}var En={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sl=Fr(En),il=p({},En,{view:0,detail:0}),ol=Fr(il),lc,ll,_s,cl=p({},il,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dc,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==_s&&(_s&&i.type==="mousemove"?(lc=i.screenX-_s.screenX,ll=i.screenY-_s.screenY):ll=lc=0,_s=i),lc)},movementY:function(i){return"movementY"in i?i.movementY:ll}}),ul=Fr(cl),dp=p({},cl,{dataTransfer:0}),lf=Fr(dp),dl=p({},il,{relatedTarget:0}),cc=Fr(dl),cf=p({},En,{animationName:0,elapsedTime:0,pseudoElement:0}),$u=Fr(cf),Wu=p({},En,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),uf=Fr(Wu),uc=p({},En,{data:0}),Yu=Fr(uc),df={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ei={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ff(i){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(i):(i=hf[i])?!!l[i]:!1}function dc(){return ff}var mf=p({},il,{key:function(i){if(i.key){var l=df[i.key]||i.key;if(l!=="Unidentified")return l}return i.type==="keypress"?(i=nl(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?ei[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dc,charCode:function(i){return i.type==="keypress"?nl(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?nl(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),hc=Fr(mf),Mn=p({},cl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ku=Fr(Mn),pf=p({},il,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dc}),Hi=Fr(pf),g=p({},En,{propertyName:0,elapsedTime:0,pseudoElement:0}),b=Fr(g),R=p({},cl,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),H=Fr(R),le=p({},En,{newState:0,oldState:0}),ve=Fr(le),Pe=[9,13,27,32],ut=On&&"CompositionEvent"in window,sr=null;On&&"documentMode"in document&&(sr=document.documentMode);var Pt=On&&"TextEvent"in window&&!sr,Er=On&&(!ut||sr&&8<sr&&11>=sr),oa=" ",Es=!1;function Ya(i,l){switch(i){case"keyup":return Pe.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ka(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Xa=!1;function Xu(i,l){switch(i){case"compositionend":return Ka(l);case"keypress":return l.which!==32?null:(Es=!0,oa);case"textInput":return i=l.data,i===oa&&Es?null:i;default:return null}}function JC(i,l){if(Xa)return i==="compositionend"||!ut&&Ya(i,l)?(i=of(),oc=tr=ja=null,Xa=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Er&&l.locale!=="ko"?null:l.data;default:return null}}var ZC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function U1(i){var l=i&&i.nodeName&&i.nodeName.toLowerCase();return l==="input"?!!ZC[i.type]:l==="textarea"}function z1(i,l,u,f){Bi?kn?kn.push(f):kn=[f]:Bi=f,l=tm(l,"onChange"),0<l.length&&(u=new sl("onChange","change",null,u,f),i.push({event:u,listeners:l}))}var Qu=null,Ju=null;function eA(i){w2(i,0)}function gf(i){var l=ce(i);if($t(l))return i}function H1(i,l){if(i==="change")return l}var q1=!1;if(On){var hp;if(On){var fp="oninput"in document;if(!fp){var G1=document.createElement("div");G1.setAttribute("oninput","return;"),fp=typeof G1.oninput=="function"}hp=fp}else hp=!1;q1=hp&&(!document.documentMode||9<document.documentMode)}function $1(){Qu&&(Qu.detachEvent("onpropertychange",W1),Ju=Qu=null)}function W1(i){if(i.propertyName==="value"&&gf(Ju)){var l=[];z1(l,Ju,i,qu(i)),rl(eA,l)}}function tA(i,l,u){i==="focusin"?($1(),Qu=l,Ju=u,Qu.attachEvent("onpropertychange",W1)):i==="focusout"&&$1()}function rA(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return gf(Ju)}function nA(i,l){if(i==="click")return gf(l)}function aA(i,l){if(i==="input"||i==="change")return gf(l)}function sA(i,l){return i===l&&(i!==0||1/i===1/l)||i!==i&&l!==l}var la=typeof Object.is=="function"?Object.is:sA;function Zu(i,l){if(la(i,l))return!0;if(typeof i!="object"||i===null||typeof l!="object"||l===null)return!1;var u=Object.keys(i),f=Object.keys(l);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var x=u[f];if(!tt.call(l,x)||!la(i[x],l[x]))return!1}return!0}function Y1(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function K1(i,l){var u=Y1(i);i=0;for(var f;u;){if(u.nodeType===3){if(f=i+u.textContent.length,i<=l&&f>=l)return{node:u,offset:l-i};i=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Y1(u)}}function X1(i,l){return i&&l?i===l?!0:i&&i.nodeType===3?!1:l&&l.nodeType===3?X1(i,l.parentNode):"contains"in i?i.contains(l):i.compareDocumentPosition?!!(i.compareDocumentPosition(l)&16):!1:!1}function Q1(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var l=Qs(i.document);l instanceof i.HTMLIFrameElement;){try{var u=typeof l.contentWindow.location.href=="string"}catch{u=!1}if(u)i=l.contentWindow;else break;l=Qs(i.document)}return l}function mp(i){var l=i&&i.nodeName&&i.nodeName.toLowerCase();return l&&(l==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||l==="textarea"||i.contentEditable==="true")}var iA=On&&"documentMode"in document&&11>=document.documentMode,fc=null,pp=null,ed=null,gp=!1;function J1(i,l,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;gp||fc==null||fc!==Qs(f)||(f=fc,"selectionStart"in f&&mp(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),ed&&Zu(ed,f)||(ed=f,f=tm(pp,"onSelect"),0<f.length&&(l=new sl("onSelect","select",null,l,u),i.push({event:l,listeners:f}),l.target=fc)))}function hl(i,l){var u={};return u[i.toLowerCase()]=l.toLowerCase(),u["Webkit"+i]="webkit"+l,u["Moz"+i]="moz"+l,u}var mc={animationend:hl("Animation","AnimationEnd"),animationiteration:hl("Animation","AnimationIteration"),animationstart:hl("Animation","AnimationStart"),transitionrun:hl("Transition","TransitionRun"),transitionstart:hl("Transition","TransitionStart"),transitioncancel:hl("Transition","TransitionCancel"),transitionend:hl("Transition","TransitionEnd")},vp={},Z1={};On&&(Z1=document.createElement("div").style,"AnimationEvent"in window||(delete mc.animationend.animation,delete mc.animationiteration.animation,delete mc.animationstart.animation),"TransitionEvent"in window||delete mc.transitionend.transition);function fl(i){if(vp[i])return vp[i];if(!mc[i])return i;var l=mc[i],u;for(u in l)if(l.hasOwnProperty(u)&&u in Z1)return vp[i]=l[u];return i}var ey=fl("animationend"),ty=fl("animationiteration"),ry=fl("animationstart"),oA=fl("transitionrun"),lA=fl("transitionstart"),cA=fl("transitioncancel"),ny=fl("transitionend"),ay=new Map,xp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");xp.push("scrollEnd");function Qa(i,l){ay.set(i,l),Ce(l,[i])}var sy=new WeakMap;function Ca(i,l){if(typeof i=="object"&&i!==null){var u=sy.get(i);return u!==void 0?u:(l={value:i,source:l,stack:$a(l)},sy.set(i,l),l)}return{value:i,source:l,stack:$a(l)}}var Aa=[],pc=0,yp=0;function vf(){for(var i=pc,l=yp=pc=0;l<i;){var u=Aa[l];Aa[l++]=null;var f=Aa[l];Aa[l++]=null;var x=Aa[l];Aa[l++]=null;var _=Aa[l];if(Aa[l++]=null,f!==null&&x!==null){var I=f.pending;I===null?x.next=x:(x.next=I.next,I.next=x),f.pending=x}_!==0&&iy(u,x,_)}}function xf(i,l,u,f){Aa[pc++]=i,Aa[pc++]=l,Aa[pc++]=u,Aa[pc++]=f,yp|=f,i.lanes|=f,i=i.alternate,i!==null&&(i.lanes|=f)}function _p(i,l,u,f){return xf(i,l,u,f),yf(i)}function gc(i,l){return xf(i,null,null,l),yf(i)}function iy(i,l,u){i.lanes|=u;var f=i.alternate;f!==null&&(f.lanes|=u);for(var x=!1,_=i.return;_!==null;)_.childLanes|=u,f=_.alternate,f!==null&&(f.childLanes|=u),_.tag===22&&(i=_.stateNode,i===null||i._visibility&1||(x=!0)),i=_,_=_.return;return i.tag===3?(_=i.stateNode,x&&l!==null&&(x=31-an(u),i=_.hiddenUpdates,f=i[x],f===null?i[x]=[l]:f.push(l),l.lane=u|536870912),_):null}function yf(i){if(50<bd)throw bd=0,Sg=null,Error(n(185));for(var l=i.return;l!==null;)i=l,l=i.return;return i.tag===3?i.stateNode:null}var vc={};function uA(i,l,u,f){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ca(i,l,u,f){return new uA(i,l,u,f)}function Ep(i){return i=i.prototype,!(!i||!i.isReactComponent)}function ti(i,l){var u=i.alternate;return u===null?(u=ca(i.tag,l,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=l,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&65011712,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,l=i.dependencies,u.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u.refCleanup=i.refCleanup,u}function oy(i,l){i.flags&=65011714;var u=i.alternate;return u===null?(i.childLanes=0,i.lanes=l,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=u.childLanes,i.lanes=u.lanes,i.child=u.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=u.memoizedProps,i.memoizedState=u.memoizedState,i.updateQueue=u.updateQueue,i.type=u.type,l=u.dependencies,i.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),i}function _f(i,l,u,f,x,_){var I=0;if(f=i,typeof i=="function")Ep(i)&&(I=1);else if(typeof i=="string")I=hR(i,u,Z.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case S:return i=ca(31,u,l,x),i.elementType=S,i.lanes=_,i;case N:return ml(u.children,x,_,l);case E:I=8,x|=24;break;case T:return i=ca(12,u,l,x|2),i.elementType=T,i.lanes=_,i;case Q:return i=ca(13,u,l,x),i.elementType=Q,i.lanes=_,i;case U:return i=ca(19,u,l,x),i.elementType=U,i.lanes=_,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case j:case P:I=10;break e;case O:I=9;break e;case z:I=11;break e;case C:I=14;break e;case k:I=16,f=null;break e}I=29,u=Error(n(130,i===null?"null":typeof i,"")),f=null}return l=ca(I,u,l,x),l.elementType=i,l.type=f,l.lanes=_,l}function ml(i,l,u,f){return i=ca(7,i,f,l),i.lanes=u,i}function wp(i,l,u){return i=ca(6,i,null,l),i.lanes=u,i}function Np(i,l,u){return l=ca(4,i.children!==null?i.children:[],i.key,l),l.lanes=u,l.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},l}var xc=[],yc=0,Ef=null,wf=0,Ra=[],Da=0,pl=null,ri=1,ni="";function gl(i,l){xc[yc++]=wf,xc[yc++]=Ef,Ef=i,wf=l}function ly(i,l,u){Ra[Da++]=ri,Ra[Da++]=ni,Ra[Da++]=pl,pl=i;var f=ri;i=ni;var x=32-an(f)-1;f&=~(1<<x),u+=1;var _=32-an(l)+x;if(30<_){var I=x-x%5;_=(f&(1<<I)-1).toString(32),f>>=I,x-=I,ri=1<<32-an(l)+x|u<<x|f,ni=_+i}else ri=1<<_|u<<x|f,ni=i}function Tp(i){i.return!==null&&(gl(i,1),ly(i,1,0))}function bp(i){for(;i===Ef;)Ef=xc[--yc],xc[yc]=null,wf=xc[--yc],xc[yc]=null;for(;i===pl;)pl=Ra[--Da],Ra[Da]=null,ni=Ra[--Da],Ra[Da]=null,ri=Ra[--Da],Ra[Da]=null}var Fn=null,mr=null,Dt=!1,vl=null,ws=!1,Sp=Error(n(519));function xl(i){var l=Error(n(418,""));throw nd(Ca(l,i)),Sp}function cy(i){var l=i.stateNode,u=i.type,f=i.memoizedProps;switch(l[ur]=i,l[_r]=f,u){case"dialog":_t("cancel",l),_t("close",l);break;case"iframe":case"object":case"embed":_t("load",l);break;case"video":case"audio":for(u=0;u<jd.length;u++)_t(jd[u],l);break;case"source":_t("error",l);break;case"img":case"image":case"link":_t("error",l),_t("load",l);break;case"details":_t("toggle",l);break;case"input":_t("invalid",l),Vu(l,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0),Li(l);break;case"select":_t("invalid",l);break;case"textarea":_t("invalid",l),rf(l,f.value,f.defaultValue,f.children),Li(l)}u=f.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||l.textContent===""+u||f.suppressHydrationWarning===!0||S2(l.textContent,u)?(f.popover!=null&&(_t("beforetoggle",l),_t("toggle",l)),f.onScroll!=null&&_t("scroll",l),f.onScrollEnd!=null&&_t("scrollend",l),f.onClick!=null&&(l.onclick=rm),l=!0):l=!1,l||xl(i)}function uy(i){for(Fn=i.return;Fn;)switch(Fn.tag){case 5:case 13:ws=!1;return;case 27:case 3:ws=!0;return;default:Fn=Fn.return}}function td(i){if(i!==Fn)return!1;if(!Dt)return uy(i),Dt=!0,!1;var l=i.tag,u;if((u=l!==3&&l!==27)&&((u=l===5)&&(u=i.type,u=!(u!=="form"&&u!=="button")||zg(i.type,i.memoizedProps)),u=!u),u&&mr&&xl(i),uy(i),l===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));e:{for(i=i.nextSibling,l=0;i;){if(i.nodeType===8)if(u=i.data,u==="/$"){if(l===0){mr=Za(i.nextSibling);break e}l--}else u!=="$"&&u!=="$!"&&u!=="$?"||l++;i=i.nextSibling}mr=null}}else l===27?(l=mr,so(i.type)?(i=$g,$g=null,mr=i):mr=l):mr=Fn?Za(i.stateNode.nextSibling):null;return!0}function rd(){mr=Fn=null,Dt=!1}function dy(){var i=vl;return i!==null&&(Kn===null?Kn=i:Kn.push.apply(Kn,i),vl=null),i}function nd(i){vl===null?vl=[i]:vl.push(i)}var jp=_e(null),yl=null,ai=null;function qi(i,l,u){te(jp,l._currentValue),l._currentValue=u}function si(i){i._currentValue=jp.current,Y(jp)}function Cp(i,l,u){for(;i!==null;){var f=i.alternate;if((i.childLanes&l)!==l?(i.childLanes|=l,f!==null&&(f.childLanes|=l)):f!==null&&(f.childLanes&l)!==l&&(f.childLanes|=l),i===u)break;i=i.return}}function Ap(i,l,u,f){var x=i.child;for(x!==null&&(x.return=i);x!==null;){var _=x.dependencies;if(_!==null){var I=x.child;_=_.firstContext;e:for(;_!==null;){var V=_;_=x;for(var J=0;J<l.length;J++)if(V.context===l[J]){_.lanes|=u,V=_.alternate,V!==null&&(V.lanes|=u),Cp(_.return,u,i),f||(I=null);break e}_=V.next}}else if(x.tag===18){if(I=x.return,I===null)throw Error(n(341));I.lanes|=u,_=I.alternate,_!==null&&(_.lanes|=u),Cp(I,u,i),I=null}else I=x.child;if(I!==null)I.return=x;else for(I=x;I!==null;){if(I===i){I=null;break}if(x=I.sibling,x!==null){x.return=I.return,I=x;break}I=I.return}x=I}}function ad(i,l,u,f){i=null;for(var x=l,_=!1;x!==null;){if(!_){if((x.flags&524288)!==0)_=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var I=x.alternate;if(I===null)throw Error(n(387));if(I=I.memoizedProps,I!==null){var V=x.type;la(x.pendingProps.value,I.value)||(i!==null?i.push(V):i=[V])}}else if(x===Ve.current){if(I=x.alternate,I===null)throw Error(n(387));I.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(i!==null?i.push(kd):i=[kd])}x=x.return}i!==null&&Ap(l,i,u,f),l.flags|=262144}function Nf(i){for(i=i.firstContext;i!==null;){if(!la(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function _l(i){yl=i,ai=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function wn(i){return hy(yl,i)}function Tf(i,l){return yl===null&&_l(i),hy(i,l)}function hy(i,l){var u=l._currentValue;if(l={context:l,memoizedValue:u,next:null},ai===null){if(i===null)throw Error(n(308));ai=l,i.dependencies={lanes:0,firstContext:l},i.flags|=524288}else ai=ai.next=l;return u}var dA=typeof AbortController<"u"?AbortController:function(){var i=[],l=this.signal={aborted:!1,addEventListener:function(u,f){i.push(f)}};this.abort=function(){l.aborted=!0,i.forEach(function(u){return u()})}},hA=t.unstable_scheduleCallback,fA=t.unstable_NormalPriority,Pr={$$typeof:P,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Rp(){return{controller:new dA,data:new Map,refCount:0}}function sd(i){i.refCount--,i.refCount===0&&hA(fA,function(){i.controller.abort()})}var id=null,Dp=0,_c=0,Ec=null;function mA(i,l){if(id===null){var u=id=[];Dp=0,_c=kg(),Ec={status:"pending",value:void 0,then:function(f){u.push(f)}}}return Dp++,l.then(fy,fy),l}function fy(){if(--Dp===0&&id!==null){Ec!==null&&(Ec.status="fulfilled");var i=id;id=null,_c=0,Ec=null;for(var l=0;l<i.length;l++)(0,i[l])()}}function pA(i,l){var u=[],f={status:"pending",value:null,reason:null,then:function(x){u.push(x)}};return i.then(function(){f.status="fulfilled",f.value=l;for(var x=0;x<u.length;x++)(0,u[x])(l)},function(x){for(f.status="rejected",f.reason=x,x=0;x<u.length;x++)(0,u[x])(void 0)}),f}var my=ge.S;ge.S=function(i,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&mA(i,l),my!==null&&my(i,l)};var El=_e(null);function Ip(){var i=El.current;return i!==null?i:rr.pooledCache}function bf(i,l){l===null?te(El,El.current):te(El,l.pool)}function py(){var i=Ip();return i===null?null:{parent:Pr._currentValue,pool:i}}var od=Error(n(460)),gy=Error(n(474)),Sf=Error(n(542)),kp={then:function(){}};function vy(i){return i=i.status,i==="fulfilled"||i==="rejected"}function jf(){}function xy(i,l,u){switch(u=i[u],u===void 0?i.push(l):u!==l&&(l.then(jf,jf),l=u),l.status){case"fulfilled":return l.value;case"rejected":throw i=l.reason,_y(i),i;default:if(typeof l.status=="string")l.then(jf,jf);else{if(i=rr,i!==null&&100<i.shellSuspendCounter)throw Error(n(482));i=l,i.status="pending",i.then(function(f){if(l.status==="pending"){var x=l;x.status="fulfilled",x.value=f}},function(f){if(l.status==="pending"){var x=l;x.status="rejected",x.reason=f}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw i=l.reason,_y(i),i}throw ld=l,od}}var ld=null;function yy(){if(ld===null)throw Error(n(459));var i=ld;return ld=null,i}function _y(i){if(i===od||i===Sf)throw Error(n(483))}var Gi=!1;function Op(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Mp(i,l){i=i.updateQueue,l.updateQueue===i&&(l.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function $i(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Wi(i,l,u){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,(Lt&2)!==0){var x=f.pending;return x===null?l.next=l:(l.next=x.next,x.next=l),f.pending=l,l=yf(i),iy(i,null,u),l}return xf(i,f,l,u),yf(i)}function cd(i,l,u){if(l=l.updateQueue,l!==null&&(l=l.shared,(u&4194048)!==0)){var f=l.lanes;f&=i.pendingLanes,u|=f,l.lanes=u,xs(i,u)}}function Fp(i,l){var u=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var x=null,_=null;if(u=u.firstBaseUpdate,u!==null){do{var I={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};_===null?x=_=I:_=_.next=I,u=u.next}while(u!==null);_===null?x=_=l:_=_.next=l}else x=_=l;u={baseState:f.baseState,firstBaseUpdate:x,lastBaseUpdate:_,shared:f.shared,callbacks:f.callbacks},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=l:i.next=l,u.lastBaseUpdate=l}var Pp=!1;function ud(){if(Pp){var i=Ec;if(i!==null)throw i}}function dd(i,l,u,f){Pp=!1;var x=i.updateQueue;Gi=!1;var _=x.firstBaseUpdate,I=x.lastBaseUpdate,V=x.shared.pending;if(V!==null){x.shared.pending=null;var J=V,ue=J.next;J.next=null,I===null?_=ue:I.next=ue,I=J;var Ee=i.alternate;Ee!==null&&(Ee=Ee.updateQueue,V=Ee.lastBaseUpdate,V!==I&&(V===null?Ee.firstBaseUpdate=ue:V.next=ue,Ee.lastBaseUpdate=J))}if(_!==null){var be=x.baseState;I=0,Ee=ue=J=null,V=_;do{var me=V.lane&-536870913,pe=me!==V.lane;if(pe?(Tt&me)===me:(f&me)===me){me!==0&&me===_c&&(Pp=!0),Ee!==null&&(Ee=Ee.next={lane:0,tag:V.tag,payload:V.payload,callback:null,next:null});e:{var ot=i,nt=V;me=l;var Kt=u;switch(nt.tag){case 1:if(ot=nt.payload,typeof ot=="function"){be=ot.call(Kt,be,me);break e}be=ot;break e;case 3:ot.flags=ot.flags&-65537|128;case 0:if(ot=nt.payload,me=typeof ot=="function"?ot.call(Kt,be,me):ot,me==null)break e;be=p({},be,me);break e;case 2:Gi=!0}}me=V.callback,me!==null&&(i.flags|=64,pe&&(i.flags|=8192),pe=x.callbacks,pe===null?x.callbacks=[me]:pe.push(me))}else pe={lane:me,tag:V.tag,payload:V.payload,callback:V.callback,next:null},Ee===null?(ue=Ee=pe,J=be):Ee=Ee.next=pe,I|=me;if(V=V.next,V===null){if(V=x.shared.pending,V===null)break;pe=V,V=pe.next,pe.next=null,x.lastBaseUpdate=pe,x.shared.pending=null}}while(!0);Ee===null&&(J=be),x.baseState=J,x.firstBaseUpdate=ue,x.lastBaseUpdate=Ee,_===null&&(x.shared.lanes=0),to|=I,i.lanes=I,i.memoizedState=be}}function Ey(i,l){if(typeof i!="function")throw Error(n(191,i));i.call(l)}function wy(i,l){var u=i.callbacks;if(u!==null)for(i.callbacks=null,i=0;i<u.length;i++)Ey(u[i],l)}var wc=_e(null),Cf=_e(0);function Ny(i,l){i=hi,te(Cf,i),te(wc,l),hi=i|l.baseLanes}function Lp(){te(Cf,hi),te(wc,wc.current)}function Vp(){hi=Cf.current,Y(wc),Y(Cf)}var Yi=0,gt=null,Wt=null,Cr=null,Af=!1,Nc=!1,wl=!1,Rf=0,hd=0,Tc=null,gA=0;function wr(){throw Error(n(321))}function Bp(i,l){if(l===null)return!1;for(var u=0;u<l.length&&u<i.length;u++)if(!la(i[u],l[u]))return!1;return!0}function Up(i,l,u,f,x,_){return Yi=_,gt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,ge.H=i===null||i.memoizedState===null?i_:o_,wl=!1,_=u(f,x),wl=!1,Nc&&(_=by(l,u,f,x)),Ty(i),_}function Ty(i){ge.H=Ff;var l=Wt!==null&&Wt.next!==null;if(Yi=0,Cr=Wt=gt=null,Af=!1,hd=0,Tc=null,l)throw Error(n(300));i===null||Yr||(i=i.dependencies,i!==null&&Nf(i)&&(Yr=!0))}function by(i,l,u,f){gt=i;var x=0;do{if(Nc&&(Tc=null),hd=0,Nc=!1,25<=x)throw Error(n(301));if(x+=1,Cr=Wt=null,i.updateQueue!=null){var _=i.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}ge.H=NA,_=l(u,f)}while(Nc);return _}function vA(){var i=ge.H,l=i.useState()[0];return l=typeof l.then=="function"?fd(l):l,i=i.useState()[0],(Wt!==null?Wt.memoizedState:null)!==i&&(gt.flags|=1024),l}function zp(){var i=Rf!==0;return Rf=0,i}function Hp(i,l,u){l.updateQueue=i.updateQueue,l.flags&=-2053,i.lanes&=~u}function qp(i){if(Af){for(i=i.memoizedState;i!==null;){var l=i.queue;l!==null&&(l.pending=null),i=i.next}Af=!1}Yi=0,Cr=Wt=gt=null,Nc=!1,hd=Rf=0,Tc=null}function Wn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Cr===null?gt.memoizedState=Cr=i:Cr=Cr.next=i,Cr}function Ar(){if(Wt===null){var i=gt.alternate;i=i!==null?i.memoizedState:null}else i=Wt.next;var l=Cr===null?gt.memoizedState:Cr.next;if(l!==null)Cr=l,Wt=i;else{if(i===null)throw gt.alternate===null?Error(n(467)):Error(n(310));Wt=i,i={memoizedState:Wt.memoizedState,baseState:Wt.baseState,baseQueue:Wt.baseQueue,queue:Wt.queue,next:null},Cr===null?gt.memoizedState=Cr=i:Cr=Cr.next=i}return Cr}function Gp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function fd(i){var l=hd;return hd+=1,Tc===null&&(Tc=[]),i=xy(Tc,i,l),l=gt,(Cr===null?l.memoizedState:Cr.next)===null&&(l=l.alternate,ge.H=l===null||l.memoizedState===null?i_:o_),i}function Df(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return fd(i);if(i.$$typeof===P)return wn(i)}throw Error(n(438,String(i)))}function $p(i){var l=null,u=gt.updateQueue;if(u!==null&&(l=u.memoCache),l==null){var f=gt.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(l={data:f.data.map(function(x){return x.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),u===null&&(u=Gp(),gt.updateQueue=u),u.memoCache=l,u=l.data[l.index],u===void 0)for(u=l.data[l.index]=Array(i),f=0;f<i;f++)u[f]=F;return l.index++,u}function ii(i,l){return typeof l=="function"?l(i):l}function If(i){var l=Ar();return Wp(l,Wt,i)}function Wp(i,l,u){var f=i.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=u;var x=i.baseQueue,_=f.pending;if(_!==null){if(x!==null){var I=x.next;x.next=_.next,_.next=I}l.baseQueue=x=_,f.pending=null}if(_=i.baseState,x===null)i.memoizedState=_;else{l=x.next;var V=I=null,J=null,ue=l,Ee=!1;do{var be=ue.lane&-536870913;if(be!==ue.lane?(Tt&be)===be:(Yi&be)===be){var me=ue.revertLane;if(me===0)J!==null&&(J=J.next={lane:0,revertLane:0,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null}),be===_c&&(Ee=!0);else if((Yi&me)===me){ue=ue.next,me===_c&&(Ee=!0);continue}else be={lane:0,revertLane:ue.revertLane,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null},J===null?(V=J=be,I=_):J=J.next=be,gt.lanes|=me,to|=me;be=ue.action,wl&&u(_,be),_=ue.hasEagerState?ue.eagerState:u(_,be)}else me={lane:be,revertLane:ue.revertLane,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null},J===null?(V=J=me,I=_):J=J.next=me,gt.lanes|=be,to|=be;ue=ue.next}while(ue!==null&&ue!==l);if(J===null?I=_:J.next=V,!la(_,i.memoizedState)&&(Yr=!0,Ee&&(u=Ec,u!==null)))throw u;i.memoizedState=_,i.baseState=I,i.baseQueue=J,f.lastRenderedState=_}return x===null&&(f.lanes=0),[i.memoizedState,f.dispatch]}function Yp(i){var l=Ar(),u=l.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=i;var f=u.dispatch,x=u.pending,_=l.memoizedState;if(x!==null){u.pending=null;var I=x=x.next;do _=i(_,I.action),I=I.next;while(I!==x);la(_,l.memoizedState)||(Yr=!0),l.memoizedState=_,l.baseQueue===null&&(l.baseState=_),u.lastRenderedState=_}return[_,f]}function Sy(i,l,u){var f=gt,x=Ar(),_=Dt;if(_){if(u===void 0)throw Error(n(407));u=u()}else u=l();var I=!la((Wt||x).memoizedState,u);I&&(x.memoizedState=u,Yr=!0),x=x.queue;var V=Ay.bind(null,f,x,i);if(md(2048,8,V,[i]),x.getSnapshot!==l||I||Cr!==null&&Cr.memoizedState.tag&1){if(f.flags|=2048,bc(9,kf(),Cy.bind(null,f,x,u,l),null),rr===null)throw Error(n(349));_||(Yi&124)!==0||jy(f,l,u)}return u}function jy(i,l,u){i.flags|=16384,i={getSnapshot:l,value:u},l=gt.updateQueue,l===null?(l=Gp(),gt.updateQueue=l,l.stores=[i]):(u=l.stores,u===null?l.stores=[i]:u.push(i))}function Cy(i,l,u,f){l.value=u,l.getSnapshot=f,Ry(l)&&Dy(i)}function Ay(i,l,u){return u(function(){Ry(l)&&Dy(i)})}function Ry(i){var l=i.getSnapshot;i=i.value;try{var u=l();return!la(i,u)}catch{return!0}}function Dy(i){var l=gc(i,2);l!==null&&ma(l,i,2)}function Kp(i){var l=Wn();if(typeof i=="function"){var u=i;if(i=u(),wl){jr(!0);try{u()}finally{jr(!1)}}}return l.memoizedState=l.baseState=i,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ii,lastRenderedState:i},l}function Iy(i,l,u,f){return i.baseState=u,Wp(i,Wt,typeof f=="function"?f:ii)}function xA(i,l,u,f,x){if(Mf(i))throw Error(n(485));if(i=l.action,i!==null){var _={payload:x,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(I){_.listeners.push(I)}};ge.T!==null?u(!0):_.isTransition=!1,f(_),u=l.pending,u===null?(_.next=l.pending=_,ky(l,_)):(_.next=u.next,l.pending=u.next=_)}}function ky(i,l){var u=l.action,f=l.payload,x=i.state;if(l.isTransition){var _=ge.T,I={};ge.T=I;try{var V=u(x,f),J=ge.S;J!==null&&J(I,V),Oy(i,l,V)}catch(ue){Xp(i,l,ue)}finally{ge.T=_}}else try{_=u(x,f),Oy(i,l,_)}catch(ue){Xp(i,l,ue)}}function Oy(i,l,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(f){My(i,l,f)},function(f){return Xp(i,l,f)}):My(i,l,u)}function My(i,l,u){l.status="fulfilled",l.value=u,Fy(l),i.state=u,l=i.pending,l!==null&&(u=l.next,u===l?i.pending=null:(u=u.next,l.next=u,ky(i,u)))}function Xp(i,l,u){var f=i.pending;if(i.pending=null,f!==null){f=f.next;do l.status="rejected",l.reason=u,Fy(l),l=l.next;while(l!==f)}i.action=null}function Fy(i){i=i.listeners;for(var l=0;l<i.length;l++)(0,i[l])()}function Py(i,l){return l}function Ly(i,l){if(Dt){var u=rr.formState;if(u!==null){e:{var f=gt;if(Dt){if(mr){t:{for(var x=mr,_=ws;x.nodeType!==8;){if(!_){x=null;break t}if(x=Za(x.nextSibling),x===null){x=null;break t}}_=x.data,x=_==="F!"||_==="F"?x:null}if(x){mr=Za(x.nextSibling),f=x.data==="F!";break e}}xl(f)}f=!1}f&&(l=u[0])}}return u=Wn(),u.memoizedState=u.baseState=l,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Py,lastRenderedState:l},u.queue=f,u=n_.bind(null,gt,f),f.dispatch=u,f=Kp(!1),_=tg.bind(null,gt,!1,f.queue),f=Wn(),x={state:l,dispatch:null,action:i,pending:null},f.queue=x,u=xA.bind(null,gt,x,_,u),x.dispatch=u,f.memoizedState=i,[l,u,!1]}function Vy(i){var l=Ar();return By(l,Wt,i)}function By(i,l,u){if(l=Wp(i,l,Py)[0],i=If(ii)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var f=fd(l)}catch(I){throw I===od?Sf:I}else f=l;l=Ar();var x=l.queue,_=x.dispatch;return u!==l.memoizedState&&(gt.flags|=2048,bc(9,kf(),yA.bind(null,x,u),null)),[f,_,i]}function yA(i,l){i.action=l}function Uy(i){var l=Ar(),u=Wt;if(u!==null)return By(l,u,i);Ar(),l=l.memoizedState,u=Ar();var f=u.queue.dispatch;return u.memoizedState=i,[l,f,!1]}function bc(i,l,u,f){return i={tag:i,create:u,deps:f,inst:l,next:null},l=gt.updateQueue,l===null&&(l=Gp(),gt.updateQueue=l),u=l.lastEffect,u===null?l.lastEffect=i.next=i:(f=u.next,u.next=i,i.next=f,l.lastEffect=i),i}function kf(){return{destroy:void 0,resource:void 0}}function zy(){return Ar().memoizedState}function Of(i,l,u,f){var x=Wn();f=f===void 0?null:f,gt.flags|=i,x.memoizedState=bc(1|l,kf(),u,f)}function md(i,l,u,f){var x=Ar();f=f===void 0?null:f;var _=x.memoizedState.inst;Wt!==null&&f!==null&&Bp(f,Wt.memoizedState.deps)?x.memoizedState=bc(l,_,u,f):(gt.flags|=i,x.memoizedState=bc(1|l,_,u,f))}function Hy(i,l){Of(8390656,8,i,l)}function qy(i,l){md(2048,8,i,l)}function Gy(i,l){return md(4,2,i,l)}function $y(i,l){return md(4,4,i,l)}function Wy(i,l){if(typeof l=="function"){i=i();var u=l(i);return function(){typeof u=="function"?u():l(null)}}if(l!=null)return i=i(),l.current=i,function(){l.current=null}}function Yy(i,l,u){u=u!=null?u.concat([i]):null,md(4,4,Wy.bind(null,l,i),u)}function Qp(){}function Ky(i,l){var u=Ar();l=l===void 0?null:l;var f=u.memoizedState;return l!==null&&Bp(l,f[1])?f[0]:(u.memoizedState=[i,l],i)}function Xy(i,l){var u=Ar();l=l===void 0?null:l;var f=u.memoizedState;if(l!==null&&Bp(l,f[1]))return f[0];if(f=i(),wl){jr(!0);try{i()}finally{jr(!1)}}return u.memoizedState=[f,l],f}function Jp(i,l,u){return u===void 0||(Yi&1073741824)!==0?i.memoizedState=l:(i.memoizedState=u,i=Z_(),gt.lanes|=i,to|=i,u)}function Qy(i,l,u,f){return la(u,l)?u:wc.current!==null?(i=Jp(i,u,f),la(i,l)||(Yr=!0),i):(Yi&42)===0?(Yr=!0,i.memoizedState=u):(i=Z_(),gt.lanes|=i,to|=i,l)}function Jy(i,l,u,f,x){var _=De.p;De.p=_!==0&&8>_?_:8;var I=ge.T,V={};ge.T=V,tg(i,!1,l,u);try{var J=x(),ue=ge.S;if(ue!==null&&ue(V,J),J!==null&&typeof J=="object"&&typeof J.then=="function"){var Ee=pA(J,f);pd(i,l,Ee,fa(i))}else pd(i,l,f,fa(i))}catch(be){pd(i,l,{then:function(){},status:"rejected",reason:be},fa())}finally{De.p=_,ge.T=I}}function _A(){}function Zp(i,l,u,f){if(i.tag!==5)throw Error(n(476));var x=Zy(i).queue;Jy(i,x,l,Le,u===null?_A:function(){return e_(i),u(f)})}function Zy(i){var l=i.memoizedState;if(l!==null)return l;l={memoizedState:Le,baseState:Le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ii,lastRenderedState:Le},next:null};var u={};return l.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ii,lastRenderedState:u},next:null},i.memoizedState=l,i=i.alternate,i!==null&&(i.memoizedState=l),l}function e_(i){var l=Zy(i).next.queue;pd(i,l,{},fa())}function eg(){return wn(kd)}function t_(){return Ar().memoizedState}function r_(){return Ar().memoizedState}function EA(i){for(var l=i.return;l!==null;){switch(l.tag){case 24:case 3:var u=fa();i=$i(u);var f=Wi(l,i,u);f!==null&&(ma(f,l,u),cd(f,l,u)),l={cache:Rp()},i.payload=l;return}l=l.return}}function wA(i,l,u){var f=fa();u={lane:f,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null},Mf(i)?a_(l,u):(u=_p(i,l,u,f),u!==null&&(ma(u,i,f),s_(u,l,f)))}function n_(i,l,u){var f=fa();pd(i,l,u,f)}function pd(i,l,u,f){var x={lane:f,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null};if(Mf(i))a_(l,x);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=l.lastRenderedReducer,_!==null))try{var I=l.lastRenderedState,V=_(I,u);if(x.hasEagerState=!0,x.eagerState=V,la(V,I))return xf(i,l,x,0),rr===null&&vf(),!1}catch{}if(u=_p(i,l,x,f),u!==null)return ma(u,i,f),s_(u,l,f),!0}return!1}function tg(i,l,u,f){if(f={lane:2,revertLane:kg(),action:f,hasEagerState:!1,eagerState:null,next:null},Mf(i)){if(l)throw Error(n(479))}else l=_p(i,u,f,2),l!==null&&ma(l,i,2)}function Mf(i){var l=i.alternate;return i===gt||l!==null&&l===gt}function a_(i,l){Nc=Af=!0;var u=i.pending;u===null?l.next=l:(l.next=u.next,u.next=l),i.pending=l}function s_(i,l,u){if((u&4194048)!==0){var f=l.lanes;f&=i.pendingLanes,u|=f,l.lanes=u,xs(i,u)}}var Ff={readContext:wn,use:Df,useCallback:wr,useContext:wr,useEffect:wr,useImperativeHandle:wr,useLayoutEffect:wr,useInsertionEffect:wr,useMemo:wr,useReducer:wr,useRef:wr,useState:wr,useDebugValue:wr,useDeferredValue:wr,useTransition:wr,useSyncExternalStore:wr,useId:wr,useHostTransitionStatus:wr,useFormState:wr,useActionState:wr,useOptimistic:wr,useMemoCache:wr,useCacheRefresh:wr},i_={readContext:wn,use:Df,useCallback:function(i,l){return Wn().memoizedState=[i,l===void 0?null:l],i},useContext:wn,useEffect:Hy,useImperativeHandle:function(i,l,u){u=u!=null?u.concat([i]):null,Of(4194308,4,Wy.bind(null,l,i),u)},useLayoutEffect:function(i,l){return Of(4194308,4,i,l)},useInsertionEffect:function(i,l){Of(4,2,i,l)},useMemo:function(i,l){var u=Wn();l=l===void 0?null:l;var f=i();if(wl){jr(!0);try{i()}finally{jr(!1)}}return u.memoizedState=[f,l],f},useReducer:function(i,l,u){var f=Wn();if(u!==void 0){var x=u(l);if(wl){jr(!0);try{u(l)}finally{jr(!1)}}}else x=l;return f.memoizedState=f.baseState=x,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:x},f.queue=i,i=i.dispatch=wA.bind(null,gt,i),[f.memoizedState,i]},useRef:function(i){var l=Wn();return i={current:i},l.memoizedState=i},useState:function(i){i=Kp(i);var l=i.queue,u=n_.bind(null,gt,l);return l.dispatch=u,[i.memoizedState,u]},useDebugValue:Qp,useDeferredValue:function(i,l){var u=Wn();return Jp(u,i,l)},useTransition:function(){var i=Kp(!1);return i=Jy.bind(null,gt,i.queue,!0,!1),Wn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,l,u){var f=gt,x=Wn();if(Dt){if(u===void 0)throw Error(n(407));u=u()}else{if(u=l(),rr===null)throw Error(n(349));(Tt&124)!==0||jy(f,l,u)}x.memoizedState=u;var _={value:u,getSnapshot:l};return x.queue=_,Hy(Ay.bind(null,f,_,i),[i]),f.flags|=2048,bc(9,kf(),Cy.bind(null,f,_,u,l),null),u},useId:function(){var i=Wn(),l=rr.identifierPrefix;if(Dt){var u=ni,f=ri;u=(f&~(1<<32-an(f)-1)).toString(32)+u,l=""+l+"R"+u,u=Rf++,0<u&&(l+="H"+u.toString(32)),l+=""}else u=gA++,l=""+l+"r"+u.toString(32)+"";return i.memoizedState=l},useHostTransitionStatus:eg,useFormState:Ly,useActionState:Ly,useOptimistic:function(i){var l=Wn();l.memoizedState=l.baseState=i;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=u,l=tg.bind(null,gt,!0,u),u.dispatch=l,[i,l]},useMemoCache:$p,useCacheRefresh:function(){return Wn().memoizedState=EA.bind(null,gt)}},o_={readContext:wn,use:Df,useCallback:Ky,useContext:wn,useEffect:qy,useImperativeHandle:Yy,useInsertionEffect:Gy,useLayoutEffect:$y,useMemo:Xy,useReducer:If,useRef:zy,useState:function(){return If(ii)},useDebugValue:Qp,useDeferredValue:function(i,l){var u=Ar();return Qy(u,Wt.memoizedState,i,l)},useTransition:function(){var i=If(ii)[0],l=Ar().memoizedState;return[typeof i=="boolean"?i:fd(i),l]},useSyncExternalStore:Sy,useId:t_,useHostTransitionStatus:eg,useFormState:Vy,useActionState:Vy,useOptimistic:function(i,l){var u=Ar();return Iy(u,Wt,i,l)},useMemoCache:$p,useCacheRefresh:r_},NA={readContext:wn,use:Df,useCallback:Ky,useContext:wn,useEffect:qy,useImperativeHandle:Yy,useInsertionEffect:Gy,useLayoutEffect:$y,useMemo:Xy,useReducer:Yp,useRef:zy,useState:function(){return Yp(ii)},useDebugValue:Qp,useDeferredValue:function(i,l){var u=Ar();return Wt===null?Jp(u,i,l):Qy(u,Wt.memoizedState,i,l)},useTransition:function(){var i=Yp(ii)[0],l=Ar().memoizedState;return[typeof i=="boolean"?i:fd(i),l]},useSyncExternalStore:Sy,useId:t_,useHostTransitionStatus:eg,useFormState:Uy,useActionState:Uy,useOptimistic:function(i,l){var u=Ar();return Wt!==null?Iy(u,Wt,i,l):(u.baseState=i,[i,u.queue.dispatch])},useMemoCache:$p,useCacheRefresh:r_},Sc=null,gd=0;function Pf(i){var l=gd;return gd+=1,Sc===null&&(Sc=[]),xy(Sc,i,l)}function vd(i,l){l=l.props.ref,i.ref=l!==void 0?l:null}function Lf(i,l){throw l.$$typeof===v?Error(n(525)):(i=Object.prototype.toString.call(l),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":i)))}function l_(i){var l=i._init;return l(i._payload)}function c_(i){function l(se,ne){if(i){var oe=se.deletions;oe===null?(se.deletions=[ne],se.flags|=16):oe.push(ne)}}function u(se,ne){if(!i)return null;for(;ne!==null;)l(se,ne),ne=ne.sibling;return null}function f(se){for(var ne=new Map;se!==null;)se.key!==null?ne.set(se.key,se):ne.set(se.index,se),se=se.sibling;return ne}function x(se,ne){return se=ti(se,ne),se.index=0,se.sibling=null,se}function _(se,ne,oe){return se.index=oe,i?(oe=se.alternate,oe!==null?(oe=oe.index,oe<ne?(se.flags|=67108866,ne):oe):(se.flags|=67108866,ne)):(se.flags|=1048576,ne)}function I(se){return i&&se.alternate===null&&(se.flags|=67108866),se}function V(se,ne,oe,Ne){return ne===null||ne.tag!==6?(ne=wp(oe,se.mode,Ne),ne.return=se,ne):(ne=x(ne,oe),ne.return=se,ne)}function J(se,ne,oe,Ne){var Xe=oe.type;return Xe===N?Ee(se,ne,oe.props.children,Ne,oe.key):ne!==null&&(ne.elementType===Xe||typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===k&&l_(Xe)===ne.type)?(ne=x(ne,oe.props),vd(ne,oe),ne.return=se,ne):(ne=_f(oe.type,oe.key,oe.props,null,se.mode,Ne),vd(ne,oe),ne.return=se,ne)}function ue(se,ne,oe,Ne){return ne===null||ne.tag!==4||ne.stateNode.containerInfo!==oe.containerInfo||ne.stateNode.implementation!==oe.implementation?(ne=Np(oe,se.mode,Ne),ne.return=se,ne):(ne=x(ne,oe.children||[]),ne.return=se,ne)}function Ee(se,ne,oe,Ne,Xe){return ne===null||ne.tag!==7?(ne=ml(oe,se.mode,Ne,Xe),ne.return=se,ne):(ne=x(ne,oe),ne.return=se,ne)}function be(se,ne,oe){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return ne=wp(""+ne,se.mode,oe),ne.return=se,ne;if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case y:return oe=_f(ne.type,ne.key,ne.props,null,se.mode,oe),vd(oe,ne),oe.return=se,oe;case w:return ne=Np(ne,se.mode,oe),ne.return=se,ne;case k:var Ne=ne._init;return ne=Ne(ne._payload),be(se,ne,oe)}if(Me(ne)||A(ne))return ne=ml(ne,se.mode,oe,null),ne.return=se,ne;if(typeof ne.then=="function")return be(se,Pf(ne),oe);if(ne.$$typeof===P)return be(se,Tf(se,ne),oe);Lf(se,ne)}return null}function me(se,ne,oe,Ne){var Xe=ne!==null?ne.key:null;if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return Xe!==null?null:V(se,ne,""+oe,Ne);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case y:return oe.key===Xe?J(se,ne,oe,Ne):null;case w:return oe.key===Xe?ue(se,ne,oe,Ne):null;case k:return Xe=oe._init,oe=Xe(oe._payload),me(se,ne,oe,Ne)}if(Me(oe)||A(oe))return Xe!==null?null:Ee(se,ne,oe,Ne,null);if(typeof oe.then=="function")return me(se,ne,Pf(oe),Ne);if(oe.$$typeof===P)return me(se,ne,Tf(se,oe),Ne);Lf(se,oe)}return null}function pe(se,ne,oe,Ne,Xe){if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number"||typeof Ne=="bigint")return se=se.get(oe)||null,V(ne,se,""+Ne,Xe);if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case y:return se=se.get(Ne.key===null?oe:Ne.key)||null,J(ne,se,Ne,Xe);case w:return se=se.get(Ne.key===null?oe:Ne.key)||null,ue(ne,se,Ne,Xe);case k:var vt=Ne._init;return Ne=vt(Ne._payload),pe(se,ne,oe,Ne,Xe)}if(Me(Ne)||A(Ne))return se=se.get(oe)||null,Ee(ne,se,Ne,Xe,null);if(typeof Ne.then=="function")return pe(se,ne,oe,Pf(Ne),Xe);if(Ne.$$typeof===P)return pe(se,ne,oe,Tf(ne,Ne),Xe);Lf(ne,Ne)}return null}function ot(se,ne,oe,Ne){for(var Xe=null,vt=null,Ze=ne,at=ne=0,Xr=null;Ze!==null&&at<oe.length;at++){Ze.index>at?(Xr=Ze,Ze=null):Xr=Ze.sibling;var St=me(se,Ze,oe[at],Ne);if(St===null){Ze===null&&(Ze=Xr);break}i&&Ze&&St.alternate===null&&l(se,Ze),ne=_(St,ne,at),vt===null?Xe=St:vt.sibling=St,vt=St,Ze=Xr}if(at===oe.length)return u(se,Ze),Dt&&gl(se,at),Xe;if(Ze===null){for(;at<oe.length;at++)Ze=be(se,oe[at],Ne),Ze!==null&&(ne=_(Ze,ne,at),vt===null?Xe=Ze:vt.sibling=Ze,vt=Ze);return Dt&&gl(se,at),Xe}for(Ze=f(Ze);at<oe.length;at++)Xr=pe(Ze,se,at,oe[at],Ne),Xr!==null&&(i&&Xr.alternate!==null&&Ze.delete(Xr.key===null?at:Xr.key),ne=_(Xr,ne,at),vt===null?Xe=Xr:vt.sibling=Xr,vt=Xr);return i&&Ze.forEach(function(uo){return l(se,uo)}),Dt&&gl(se,at),Xe}function nt(se,ne,oe,Ne){if(oe==null)throw Error(n(151));for(var Xe=null,vt=null,Ze=ne,at=ne=0,Xr=null,St=oe.next();Ze!==null&&!St.done;at++,St=oe.next()){Ze.index>at?(Xr=Ze,Ze=null):Xr=Ze.sibling;var uo=me(se,Ze,St.value,Ne);if(uo===null){Ze===null&&(Ze=Xr);break}i&&Ze&&uo.alternate===null&&l(se,Ze),ne=_(uo,ne,at),vt===null?Xe=uo:vt.sibling=uo,vt=uo,Ze=Xr}if(St.done)return u(se,Ze),Dt&&gl(se,at),Xe;if(Ze===null){for(;!St.done;at++,St=oe.next())St=be(se,St.value,Ne),St!==null&&(ne=_(St,ne,at),vt===null?Xe=St:vt.sibling=St,vt=St);return Dt&&gl(se,at),Xe}for(Ze=f(Ze);!St.done;at++,St=oe.next())St=pe(Ze,se,at,St.value,Ne),St!==null&&(i&&St.alternate!==null&&Ze.delete(St.key===null?at:St.key),ne=_(St,ne,at),vt===null?Xe=St:vt.sibling=St,vt=St);return i&&Ze.forEach(function(TR){return l(se,TR)}),Dt&&gl(se,at),Xe}function Kt(se,ne,oe,Ne){if(typeof oe=="object"&&oe!==null&&oe.type===N&&oe.key===null&&(oe=oe.props.children),typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case y:e:{for(var Xe=oe.key;ne!==null;){if(ne.key===Xe){if(Xe=oe.type,Xe===N){if(ne.tag===7){u(se,ne.sibling),Ne=x(ne,oe.props.children),Ne.return=se,se=Ne;break e}}else if(ne.elementType===Xe||typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===k&&l_(Xe)===ne.type){u(se,ne.sibling),Ne=x(ne,oe.props),vd(Ne,oe),Ne.return=se,se=Ne;break e}u(se,ne);break}else l(se,ne);ne=ne.sibling}oe.type===N?(Ne=ml(oe.props.children,se.mode,Ne,oe.key),Ne.return=se,se=Ne):(Ne=_f(oe.type,oe.key,oe.props,null,se.mode,Ne),vd(Ne,oe),Ne.return=se,se=Ne)}return I(se);case w:e:{for(Xe=oe.key;ne!==null;){if(ne.key===Xe)if(ne.tag===4&&ne.stateNode.containerInfo===oe.containerInfo&&ne.stateNode.implementation===oe.implementation){u(se,ne.sibling),Ne=x(ne,oe.children||[]),Ne.return=se,se=Ne;break e}else{u(se,ne);break}else l(se,ne);ne=ne.sibling}Ne=Np(oe,se.mode,Ne),Ne.return=se,se=Ne}return I(se);case k:return Xe=oe._init,oe=Xe(oe._payload),Kt(se,ne,oe,Ne)}if(Me(oe))return ot(se,ne,oe,Ne);if(A(oe)){if(Xe=A(oe),typeof Xe!="function")throw Error(n(150));return oe=Xe.call(oe),nt(se,ne,oe,Ne)}if(typeof oe.then=="function")return Kt(se,ne,Pf(oe),Ne);if(oe.$$typeof===P)return Kt(se,ne,Tf(se,oe),Ne);Lf(se,oe)}return typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint"?(oe=""+oe,ne!==null&&ne.tag===6?(u(se,ne.sibling),Ne=x(ne,oe),Ne.return=se,se=Ne):(u(se,ne),Ne=wp(oe,se.mode,Ne),Ne.return=se,se=Ne),I(se)):u(se,ne)}return function(se,ne,oe,Ne){try{gd=0;var Xe=Kt(se,ne,oe,Ne);return Sc=null,Xe}catch(Ze){if(Ze===od||Ze===Sf)throw Ze;var vt=ca(29,Ze,null,se.mode);return vt.lanes=Ne,vt.return=se,vt}}}var jc=c_(!0),u_=c_(!1),Ia=_e(null),Ns=null;function Ki(i){var l=i.alternate;te(Lr,Lr.current&1),te(Ia,i),Ns===null&&(l===null||wc.current!==null||l.memoizedState!==null)&&(Ns=i)}function d_(i){if(i.tag===22){if(te(Lr,Lr.current),te(Ia,i),Ns===null){var l=i.alternate;l!==null&&l.memoizedState!==null&&(Ns=i)}}else Xi()}function Xi(){te(Lr,Lr.current),te(Ia,Ia.current)}function oi(i){Y(Ia),Ns===i&&(Ns=null),Y(Lr)}var Lr=_e(0);function Vf(i){for(var l=i;l!==null;){if(l.tag===13){var u=l.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||Gg(u)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function rg(i,l,u,f){l=i.memoizedState,u=u(f,l),u=u==null?l:p({},l,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var ng={enqueueSetState:function(i,l,u){i=i._reactInternals;var f=fa(),x=$i(f);x.payload=l,u!=null&&(x.callback=u),l=Wi(i,x,f),l!==null&&(ma(l,i,f),cd(l,i,f))},enqueueReplaceState:function(i,l,u){i=i._reactInternals;var f=fa(),x=$i(f);x.tag=1,x.payload=l,u!=null&&(x.callback=u),l=Wi(i,x,f),l!==null&&(ma(l,i,f),cd(l,i,f))},enqueueForceUpdate:function(i,l){i=i._reactInternals;var u=fa(),f=$i(u);f.tag=2,l!=null&&(f.callback=l),l=Wi(i,f,u),l!==null&&(ma(l,i,u),cd(l,i,u))}};function h_(i,l,u,f,x,_,I){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,_,I):l.prototype&&l.prototype.isPureReactComponent?!Zu(u,f)||!Zu(x,_):!0}function f_(i,l,u,f){i=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(u,f),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(u,f),l.state!==i&&ng.enqueueReplaceState(l,l.state,null)}function Nl(i,l){var u=l;if("ref"in l){u={};for(var f in l)f!=="ref"&&(u[f]=l[f])}if(i=i.defaultProps){u===l&&(u=p({},u));for(var x in i)u[x]===void 0&&(u[x]=i[x])}return u}var Bf=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function m_(i){Bf(i)}function p_(i){console.error(i)}function g_(i){Bf(i)}function Uf(i,l){try{var u=i.onUncaughtError;u(l.value,{componentStack:l.stack})}catch(f){setTimeout(function(){throw f})}}function v_(i,l,u){try{var f=i.onCaughtError;f(u.value,{componentStack:u.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function ag(i,l,u){return u=$i(u),u.tag=3,u.payload={element:null},u.callback=function(){Uf(i,l)},u}function x_(i){return i=$i(i),i.tag=3,i}function y_(i,l,u,f){var x=u.type.getDerivedStateFromError;if(typeof x=="function"){var _=f.value;i.payload=function(){return x(_)},i.callback=function(){v_(l,u,f)}}var I=u.stateNode;I!==null&&typeof I.componentDidCatch=="function"&&(i.callback=function(){v_(l,u,f),typeof x!="function"&&(ro===null?ro=new Set([this]):ro.add(this));var V=f.stack;this.componentDidCatch(f.value,{componentStack:V!==null?V:""})})}function TA(i,l,u,f,x){if(u.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(l=u.alternate,l!==null&&ad(l,u,x,!0),u=Ia.current,u!==null){switch(u.tag){case 13:return Ns===null?Cg():u.alternate===null&&pr===0&&(pr=3),u.flags&=-257,u.flags|=65536,u.lanes=x,f===kp?u.flags|=16384:(l=u.updateQueue,l===null?u.updateQueue=new Set([f]):l.add(f),Rg(i,f,x)),!1;case 22:return u.flags|=65536,f===kp?u.flags|=16384:(l=u.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([f])},u.updateQueue=l):(u=l.retryQueue,u===null?l.retryQueue=new Set([f]):u.add(f)),Rg(i,f,x)),!1}throw Error(n(435,u.tag))}return Rg(i,f,x),Cg(),!1}if(Dt)return l=Ia.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=x,f!==Sp&&(i=Error(n(422),{cause:f}),nd(Ca(i,u)))):(f!==Sp&&(l=Error(n(423),{cause:f}),nd(Ca(l,u))),i=i.current.alternate,i.flags|=65536,x&=-x,i.lanes|=x,f=Ca(f,u),x=ag(i.stateNode,f,x),Fp(i,x),pr!==4&&(pr=2)),!1;var _=Error(n(520),{cause:f});if(_=Ca(_,u),Td===null?Td=[_]:Td.push(_),pr!==4&&(pr=2),l===null)return!0;f=Ca(f,u),u=l;do{switch(u.tag){case 3:return u.flags|=65536,i=x&-x,u.lanes|=i,i=ag(u.stateNode,f,i),Fp(u,i),!1;case 1:if(l=u.type,_=u.stateNode,(u.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(ro===null||!ro.has(_))))return u.flags|=65536,x&=-x,u.lanes|=x,x=x_(x),y_(x,i,u,f),Fp(u,x),!1}u=u.return}while(u!==null);return!1}var __=Error(n(461)),Yr=!1;function sn(i,l,u,f){l.child=i===null?u_(l,null,u,f):jc(l,i.child,u,f)}function E_(i,l,u,f,x){u=u.render;var _=l.ref;if("ref"in f){var I={};for(var V in f)V!=="ref"&&(I[V]=f[V])}else I=f;return _l(l),f=Up(i,l,u,I,_,x),V=zp(),i!==null&&!Yr?(Hp(i,l,x),li(i,l,x)):(Dt&&V&&Tp(l),l.flags|=1,sn(i,l,f,x),l.child)}function w_(i,l,u,f,x){if(i===null){var _=u.type;return typeof _=="function"&&!Ep(_)&&_.defaultProps===void 0&&u.compare===null?(l.tag=15,l.type=_,N_(i,l,_,f,x)):(i=_f(u.type,null,f,l,l.mode,x),i.ref=l.ref,i.return=l,l.child=i)}if(_=i.child,!hg(i,x)){var I=_.memoizedProps;if(u=u.compare,u=u!==null?u:Zu,u(I,f)&&i.ref===l.ref)return li(i,l,x)}return l.flags|=1,i=ti(_,f),i.ref=l.ref,i.return=l,l.child=i}function N_(i,l,u,f,x){if(i!==null){var _=i.memoizedProps;if(Zu(_,f)&&i.ref===l.ref)if(Yr=!1,l.pendingProps=f=_,hg(i,x))(i.flags&131072)!==0&&(Yr=!0);else return l.lanes=i.lanes,li(i,l,x)}return sg(i,l,u,f,x)}function T_(i,l,u){var f=l.pendingProps,x=f.children,_=i!==null?i.memoizedState:null;if(f.mode==="hidden"){if((l.flags&128)!==0){if(f=_!==null?_.baseLanes|u:u,i!==null){for(x=l.child=i.child,_=0;x!==null;)_=_|x.lanes|x.childLanes,x=x.sibling;l.childLanes=_&~f}else l.childLanes=0,l.child=null;return b_(i,l,f,u)}if((u&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},i!==null&&bf(l,_!==null?_.cachePool:null),_!==null?Ny(l,_):Lp(),d_(l);else return l.lanes=l.childLanes=536870912,b_(i,l,_!==null?_.baseLanes|u:u,u)}else _!==null?(bf(l,_.cachePool),Ny(l,_),Xi(),l.memoizedState=null):(i!==null&&bf(l,null),Lp(),Xi());return sn(i,l,x,u),l.child}function b_(i,l,u,f){var x=Ip();return x=x===null?null:{parent:Pr._currentValue,pool:x},l.memoizedState={baseLanes:u,cachePool:x},i!==null&&bf(l,null),Lp(),d_(l),i!==null&&ad(i,l,f,!0),null}function zf(i,l){var u=l.ref;if(u===null)i!==null&&i.ref!==null&&(l.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(n(284));(i===null||i.ref!==u)&&(l.flags|=4194816)}}function sg(i,l,u,f,x){return _l(l),u=Up(i,l,u,f,void 0,x),f=zp(),i!==null&&!Yr?(Hp(i,l,x),li(i,l,x)):(Dt&&f&&Tp(l),l.flags|=1,sn(i,l,u,x),l.child)}function S_(i,l,u,f,x,_){return _l(l),l.updateQueue=null,u=by(l,f,u,x),Ty(i),f=zp(),i!==null&&!Yr?(Hp(i,l,_),li(i,l,_)):(Dt&&f&&Tp(l),l.flags|=1,sn(i,l,u,_),l.child)}function j_(i,l,u,f,x){if(_l(l),l.stateNode===null){var _=vc,I=u.contextType;typeof I=="object"&&I!==null&&(_=wn(I)),_=new u(f,_),l.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=ng,l.stateNode=_,_._reactInternals=l,_=l.stateNode,_.props=f,_.state=l.memoizedState,_.refs={},Op(l),I=u.contextType,_.context=typeof I=="object"&&I!==null?wn(I):vc,_.state=l.memoizedState,I=u.getDerivedStateFromProps,typeof I=="function"&&(rg(l,u,I,f),_.state=l.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(I=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),I!==_.state&&ng.enqueueReplaceState(_,_.state,null),dd(l,f,_,x),ud(),_.state=l.memoizedState),typeof _.componentDidMount=="function"&&(l.flags|=4194308),f=!0}else if(i===null){_=l.stateNode;var V=l.memoizedProps,J=Nl(u,V);_.props=J;var ue=_.context,Ee=u.contextType;I=vc,typeof Ee=="object"&&Ee!==null&&(I=wn(Ee));var be=u.getDerivedStateFromProps;Ee=typeof be=="function"||typeof _.getSnapshotBeforeUpdate=="function",V=l.pendingProps!==V,Ee||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(V||ue!==I)&&f_(l,_,f,I),Gi=!1;var me=l.memoizedState;_.state=me,dd(l,f,_,x),ud(),ue=l.memoizedState,V||me!==ue||Gi?(typeof be=="function"&&(rg(l,u,be,f),ue=l.memoizedState),(J=Gi||h_(l,u,J,f,me,ue,I))?(Ee||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(l.flags|=4194308)):(typeof _.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=f,l.memoizedState=ue),_.props=f,_.state=ue,_.context=I,f=J):(typeof _.componentDidMount=="function"&&(l.flags|=4194308),f=!1)}else{_=l.stateNode,Mp(i,l),I=l.memoizedProps,Ee=Nl(u,I),_.props=Ee,be=l.pendingProps,me=_.context,ue=u.contextType,J=vc,typeof ue=="object"&&ue!==null&&(J=wn(ue)),V=u.getDerivedStateFromProps,(ue=typeof V=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(I!==be||me!==J)&&f_(l,_,f,J),Gi=!1,me=l.memoizedState,_.state=me,dd(l,f,_,x),ud();var pe=l.memoizedState;I!==be||me!==pe||Gi||i!==null&&i.dependencies!==null&&Nf(i.dependencies)?(typeof V=="function"&&(rg(l,u,V,f),pe=l.memoizedState),(Ee=Gi||h_(l,u,Ee,f,me,pe,J)||i!==null&&i.dependencies!==null&&Nf(i.dependencies))?(ue||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(f,pe,J),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(f,pe,J)),typeof _.componentDidUpdate=="function"&&(l.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof _.componentDidUpdate!="function"||I===i.memoizedProps&&me===i.memoizedState||(l.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||I===i.memoizedProps&&me===i.memoizedState||(l.flags|=1024),l.memoizedProps=f,l.memoizedState=pe),_.props=f,_.state=pe,_.context=J,f=Ee):(typeof _.componentDidUpdate!="function"||I===i.memoizedProps&&me===i.memoizedState||(l.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||I===i.memoizedProps&&me===i.memoizedState||(l.flags|=1024),f=!1)}return _=f,zf(i,l),f=(l.flags&128)!==0,_||f?(_=l.stateNode,u=f&&typeof u.getDerivedStateFromError!="function"?null:_.render(),l.flags|=1,i!==null&&f?(l.child=jc(l,i.child,null,x),l.child=jc(l,null,u,x)):sn(i,l,u,x),l.memoizedState=_.state,i=l.child):i=li(i,l,x),i}function C_(i,l,u,f){return rd(),l.flags|=256,sn(i,l,u,f),l.child}var ig={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function og(i){return{baseLanes:i,cachePool:py()}}function lg(i,l,u){return i=i!==null?i.childLanes&~u:0,l&&(i|=ka),i}function A_(i,l,u){var f=l.pendingProps,x=!1,_=(l.flags&128)!==0,I;if((I=_)||(I=i!==null&&i.memoizedState===null?!1:(Lr.current&2)!==0),I&&(x=!0,l.flags&=-129),I=(l.flags&32)!==0,l.flags&=-33,i===null){if(Dt){if(x?Ki(l):Xi(),Dt){var V=mr,J;if(J=V){e:{for(J=V,V=ws;J.nodeType!==8;){if(!V){V=null;break e}if(J=Za(J.nextSibling),J===null){V=null;break e}}V=J}V!==null?(l.memoizedState={dehydrated:V,treeContext:pl!==null?{id:ri,overflow:ni}:null,retryLane:536870912,hydrationErrors:null},J=ca(18,null,null,0),J.stateNode=V,J.return=l,l.child=J,Fn=l,mr=null,J=!0):J=!1}J||xl(l)}if(V=l.memoizedState,V!==null&&(V=V.dehydrated,V!==null))return Gg(V)?l.lanes=32:l.lanes=536870912,null;oi(l)}return V=f.children,f=f.fallback,x?(Xi(),x=l.mode,V=Hf({mode:"hidden",children:V},x),f=ml(f,x,u,null),V.return=l,f.return=l,V.sibling=f,l.child=V,x=l.child,x.memoizedState=og(u),x.childLanes=lg(i,I,u),l.memoizedState=ig,f):(Ki(l),cg(l,V))}if(J=i.memoizedState,J!==null&&(V=J.dehydrated,V!==null)){if(_)l.flags&256?(Ki(l),l.flags&=-257,l=ug(i,l,u)):l.memoizedState!==null?(Xi(),l.child=i.child,l.flags|=128,l=null):(Xi(),x=f.fallback,V=l.mode,f=Hf({mode:"visible",children:f.children},V),x=ml(x,V,u,null),x.flags|=2,f.return=l,x.return=l,f.sibling=x,l.child=f,jc(l,i.child,null,u),f=l.child,f.memoizedState=og(u),f.childLanes=lg(i,I,u),l.memoizedState=ig,l=x);else if(Ki(l),Gg(V)){if(I=V.nextSibling&&V.nextSibling.dataset,I)var ue=I.dgst;I=ue,f=Error(n(419)),f.stack="",f.digest=I,nd({value:f,source:null,stack:null}),l=ug(i,l,u)}else if(Yr||ad(i,l,u,!1),I=(u&i.childLanes)!==0,Yr||I){if(I=rr,I!==null&&(f=u&-u,f=(f&42)!==0?1:Qo(f),f=(f&(I.suspendedLanes|u))!==0?0:f,f!==0&&f!==J.retryLane))throw J.retryLane=f,gc(i,f),ma(I,i,f),__;V.data==="$?"||Cg(),l=ug(i,l,u)}else V.data==="$?"?(l.flags|=192,l.child=i.child,l=null):(i=J.treeContext,mr=Za(V.nextSibling),Fn=l,Dt=!0,vl=null,ws=!1,i!==null&&(Ra[Da++]=ri,Ra[Da++]=ni,Ra[Da++]=pl,ri=i.id,ni=i.overflow,pl=l),l=cg(l,f.children),l.flags|=4096);return l}return x?(Xi(),x=f.fallback,V=l.mode,J=i.child,ue=J.sibling,f=ti(J,{mode:"hidden",children:f.children}),f.subtreeFlags=J.subtreeFlags&65011712,ue!==null?x=ti(ue,x):(x=ml(x,V,u,null),x.flags|=2),x.return=l,f.return=l,f.sibling=x,l.child=f,f=x,x=l.child,V=i.child.memoizedState,V===null?V=og(u):(J=V.cachePool,J!==null?(ue=Pr._currentValue,J=J.parent!==ue?{parent:ue,pool:ue}:J):J=py(),V={baseLanes:V.baseLanes|u,cachePool:J}),x.memoizedState=V,x.childLanes=lg(i,I,u),l.memoizedState=ig,f):(Ki(l),u=i.child,i=u.sibling,u=ti(u,{mode:"visible",children:f.children}),u.return=l,u.sibling=null,i!==null&&(I=l.deletions,I===null?(l.deletions=[i],l.flags|=16):I.push(i)),l.child=u,l.memoizedState=null,u)}function cg(i,l){return l=Hf({mode:"visible",children:l},i.mode),l.return=i,i.child=l}function Hf(i,l){return i=ca(22,i,null,l),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function ug(i,l,u){return jc(l,i.child,null,u),i=cg(l,l.pendingProps.children),i.flags|=2,l.memoizedState=null,i}function R_(i,l,u){i.lanes|=l;var f=i.alternate;f!==null&&(f.lanes|=l),Cp(i.return,l,u)}function dg(i,l,u,f,x){var _=i.memoizedState;_===null?i.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:x}:(_.isBackwards=l,_.rendering=null,_.renderingStartTime=0,_.last=f,_.tail=u,_.tailMode=x)}function D_(i,l,u){var f=l.pendingProps,x=f.revealOrder,_=f.tail;if(sn(i,l,f.children,u),f=Lr.current,(f&2)!==0)f=f&1|2,l.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=l.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&R_(i,u,l);else if(i.tag===19)R_(i,u,l);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===l)break e;for(;i.sibling===null;){if(i.return===null||i.return===l)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}f&=1}switch(te(Lr,f),x){case"forwards":for(u=l.child,x=null;u!==null;)i=u.alternate,i!==null&&Vf(i)===null&&(x=u),u=u.sibling;u=x,u===null?(x=l.child,l.child=null):(x=u.sibling,u.sibling=null),dg(l,!1,x,u,_);break;case"backwards":for(u=null,x=l.child,l.child=null;x!==null;){if(i=x.alternate,i!==null&&Vf(i)===null){l.child=x;break}i=x.sibling,x.sibling=u,u=x,x=i}dg(l,!0,u,null,_);break;case"together":dg(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function li(i,l,u){if(i!==null&&(l.dependencies=i.dependencies),to|=l.lanes,(u&l.childLanes)===0)if(i!==null){if(ad(i,l,u,!1),(u&l.childLanes)===0)return null}else return null;if(i!==null&&l.child!==i.child)throw Error(n(153));if(l.child!==null){for(i=l.child,u=ti(i,i.pendingProps),l.child=u,u.return=l;i.sibling!==null;)i=i.sibling,u=u.sibling=ti(i,i.pendingProps),u.return=l;u.sibling=null}return l.child}function hg(i,l){return(i.lanes&l)!==0?!0:(i=i.dependencies,!!(i!==null&&Nf(i)))}function bA(i,l,u){switch(l.tag){case 3:ke(l,l.stateNode.containerInfo),qi(l,Pr,i.memoizedState.cache),rd();break;case 27:case 5:ae(l);break;case 4:ke(l,l.stateNode.containerInfo);break;case 10:qi(l,l.type,l.memoizedProps.value);break;case 13:var f=l.memoizedState;if(f!==null)return f.dehydrated!==null?(Ki(l),l.flags|=128,null):(u&l.child.childLanes)!==0?A_(i,l,u):(Ki(l),i=li(i,l,u),i!==null?i.sibling:null);Ki(l);break;case 19:var x=(i.flags&128)!==0;if(f=(u&l.childLanes)!==0,f||(ad(i,l,u,!1),f=(u&l.childLanes)!==0),x){if(f)return D_(i,l,u);l.flags|=128}if(x=l.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),te(Lr,Lr.current),f)break;return null;case 22:case 23:return l.lanes=0,T_(i,l,u);case 24:qi(l,Pr,i.memoizedState.cache)}return li(i,l,u)}function I_(i,l,u){if(i!==null)if(i.memoizedProps!==l.pendingProps)Yr=!0;else{if(!hg(i,u)&&(l.flags&128)===0)return Yr=!1,bA(i,l,u);Yr=(i.flags&131072)!==0}else Yr=!1,Dt&&(l.flags&1048576)!==0&&ly(l,wf,l.index);switch(l.lanes=0,l.tag){case 16:e:{i=l.pendingProps;var f=l.elementType,x=f._init;if(f=x(f._payload),l.type=f,typeof f=="function")Ep(f)?(i=Nl(f,i),l.tag=1,l=j_(null,l,f,i,u)):(l.tag=0,l=sg(null,l,f,i,u));else{if(f!=null){if(x=f.$$typeof,x===z){l.tag=11,l=E_(null,l,f,i,u);break e}else if(x===C){l.tag=14,l=w_(null,l,f,i,u);break e}}throw l=we(f)||f,Error(n(306,l,""))}}return l;case 0:return sg(i,l,l.type,l.pendingProps,u);case 1:return f=l.type,x=Nl(f,l.pendingProps),j_(i,l,f,x,u);case 3:e:{if(ke(l,l.stateNode.containerInfo),i===null)throw Error(n(387));f=l.pendingProps;var _=l.memoizedState;x=_.element,Mp(i,l),dd(l,f,null,u);var I=l.memoizedState;if(f=I.cache,qi(l,Pr,f),f!==_.cache&&Ap(l,[Pr],u,!0),ud(),f=I.element,_.isDehydrated)if(_={element:f,isDehydrated:!1,cache:I.cache},l.updateQueue.baseState=_,l.memoizedState=_,l.flags&256){l=C_(i,l,f,u);break e}else if(f!==x){x=Ca(Error(n(424)),l),nd(x),l=C_(i,l,f,u);break e}else for(i=l.stateNode.containerInfo,i.nodeType===9?i=i.body:i=i.nodeName==="HTML"?i.ownerDocument.body:i,mr=Za(i.firstChild),Fn=l,Dt=!0,vl=null,ws=!0,u=u_(l,null,f,u),l.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(rd(),f===x){l=li(i,l,u);break e}sn(i,l,f,u)}l=l.child}return l;case 26:return zf(i,l),i===null?(u=F2(l.type,null,l.pendingProps,null))?l.memoizedState=u:Dt||(u=l.type,i=l.pendingProps,f=nm(de.current).createElement(u),f[ur]=l,f[_r]=i,ln(f,u,i),ie(f),l.stateNode=f):l.memoizedState=F2(l.type,i.memoizedProps,l.pendingProps,i.memoizedState),null;case 27:return ae(l),i===null&&Dt&&(f=l.stateNode=k2(l.type,l.pendingProps,de.current),Fn=l,ws=!0,x=mr,so(l.type)?($g=x,mr=Za(f.firstChild)):mr=x),sn(i,l,l.pendingProps.children,u),zf(i,l),i===null&&(l.flags|=4194304),l.child;case 5:return i===null&&Dt&&((x=f=mr)&&(f=ZA(f,l.type,l.pendingProps,ws),f!==null?(l.stateNode=f,Fn=l,mr=Za(f.firstChild),ws=!1,x=!0):x=!1),x||xl(l)),ae(l),x=l.type,_=l.pendingProps,I=i!==null?i.memoizedProps:null,f=_.children,zg(x,_)?f=null:I!==null&&zg(x,I)&&(l.flags|=32),l.memoizedState!==null&&(x=Up(i,l,vA,null,null,u),kd._currentValue=x),zf(i,l),sn(i,l,f,u),l.child;case 6:return i===null&&Dt&&((i=u=mr)&&(u=eR(u,l.pendingProps,ws),u!==null?(l.stateNode=u,Fn=l,mr=null,i=!0):i=!1),i||xl(l)),null;case 13:return A_(i,l,u);case 4:return ke(l,l.stateNode.containerInfo),f=l.pendingProps,i===null?l.child=jc(l,null,f,u):sn(i,l,f,u),l.child;case 11:return E_(i,l,l.type,l.pendingProps,u);case 7:return sn(i,l,l.pendingProps,u),l.child;case 8:return sn(i,l,l.pendingProps.children,u),l.child;case 12:return sn(i,l,l.pendingProps.children,u),l.child;case 10:return f=l.pendingProps,qi(l,l.type,f.value),sn(i,l,f.children,u),l.child;case 9:return x=l.type._context,f=l.pendingProps.children,_l(l),x=wn(x),f=f(x),l.flags|=1,sn(i,l,f,u),l.child;case 14:return w_(i,l,l.type,l.pendingProps,u);case 15:return N_(i,l,l.type,l.pendingProps,u);case 19:return D_(i,l,u);case 31:return f=l.pendingProps,u=l.mode,f={mode:f.mode,children:f.children},i===null?(u=Hf(f,u),u.ref=l.ref,l.child=u,u.return=l,l=u):(u=ti(i.child,f),u.ref=l.ref,l.child=u,u.return=l,l=u),l;case 22:return T_(i,l,u);case 24:return _l(l),f=wn(Pr),i===null?(x=Ip(),x===null&&(x=rr,_=Rp(),x.pooledCache=_,_.refCount++,_!==null&&(x.pooledCacheLanes|=u),x=_),l.memoizedState={parent:f,cache:x},Op(l),qi(l,Pr,x)):((i.lanes&u)!==0&&(Mp(i,l),dd(l,null,null,u),ud()),x=i.memoizedState,_=l.memoizedState,x.parent!==f?(x={parent:f,cache:f},l.memoizedState=x,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=x),qi(l,Pr,f)):(f=_.cache,qi(l,Pr,f),f!==x.cache&&Ap(l,[Pr],u,!0))),sn(i,l,l.pendingProps.children,u),l.child;case 29:throw l.pendingProps}throw Error(n(156,l.tag))}function ci(i){i.flags|=4}function k_(i,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!U2(l)){if(l=Ia.current,l!==null&&((Tt&4194048)===Tt?Ns!==null:(Tt&62914560)!==Tt&&(Tt&536870912)===0||l!==Ns))throw ld=kp,gy;i.flags|=8192}}function qf(i,l){l!==null&&(i.flags|=4),i.flags&16384&&(l=i.tag!==22?Ha():536870912,i.lanes|=l,Dc|=l)}function xd(i,l){if(!Dt)switch(i.tailMode){case"hidden":l=i.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?l||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function hr(i){var l=i.alternate!==null&&i.alternate.child===i.child,u=0,f=0;if(l)for(var x=i.child;x!==null;)u|=x.lanes|x.childLanes,f|=x.subtreeFlags&65011712,f|=x.flags&65011712,x.return=i,x=x.sibling;else for(x=i.child;x!==null;)u|=x.lanes|x.childLanes,f|=x.subtreeFlags,f|=x.flags,x.return=i,x=x.sibling;return i.subtreeFlags|=f,i.childLanes=u,l}function SA(i,l,u){var f=l.pendingProps;switch(bp(l),l.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return hr(l),null;case 1:return hr(l),null;case 3:return u=l.stateNode,f=null,i!==null&&(f=i.memoizedState.cache),l.memoizedState.cache!==f&&(l.flags|=2048),si(Pr),He(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(i===null||i.child===null)&&(td(l)?ci(l):i===null||i.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,dy())),hr(l),null;case 26:return u=l.memoizedState,i===null?(ci(l),u!==null?(hr(l),k_(l,u)):(hr(l),l.flags&=-16777217)):u?u!==i.memoizedState?(ci(l),hr(l),k_(l,u)):(hr(l),l.flags&=-16777217):(i.memoizedProps!==f&&ci(l),hr(l),l.flags&=-16777217),null;case 27:Be(l),u=de.current;var x=l.type;if(i!==null&&l.stateNode!=null)i.memoizedProps!==f&&ci(l);else{if(!f){if(l.stateNode===null)throw Error(n(166));return hr(l),null}i=Z.current,td(l)?cy(l):(i=k2(x,f,u),l.stateNode=i,ci(l))}return hr(l),null;case 5:if(Be(l),u=l.type,i!==null&&l.stateNode!=null)i.memoizedProps!==f&&ci(l);else{if(!f){if(l.stateNode===null)throw Error(n(166));return hr(l),null}if(i=Z.current,td(l))cy(l);else{switch(x=nm(de.current),i){case 1:i=x.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:i=x.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":i=x.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":i=x.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":i=x.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof f.is=="string"?x.createElement("select",{is:f.is}):x.createElement("select"),f.multiple?i.multiple=!0:f.size&&(i.size=f.size);break;default:i=typeof f.is=="string"?x.createElement(u,{is:f.is}):x.createElement(u)}}i[ur]=l,i[_r]=f;e:for(x=l.child;x!==null;){if(x.tag===5||x.tag===6)i.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===l)break e;for(;x.sibling===null;){if(x.return===null||x.return===l)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}l.stateNode=i;e:switch(ln(i,u,f),u){case"button":case"input":case"select":case"textarea":i=!!f.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&ci(l)}}return hr(l),l.flags&=-16777217,null;case 6:if(i&&l.stateNode!=null)i.memoizedProps!==f&&ci(l);else{if(typeof f!="string"&&l.stateNode===null)throw Error(n(166));if(i=de.current,td(l)){if(i=l.stateNode,u=l.memoizedProps,f=null,x=Fn,x!==null)switch(x.tag){case 27:case 5:f=x.memoizedProps}i[ur]=l,i=!!(i.nodeValue===u||f!==null&&f.suppressHydrationWarning===!0||S2(i.nodeValue,u)),i||xl(l)}else i=nm(i).createTextNode(f),i[ur]=l,l.stateNode=i}return hr(l),null;case 13:if(f=l.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(x=td(l),f!==null&&f.dehydrated!==null){if(i===null){if(!x)throw Error(n(318));if(x=l.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(n(317));x[ur]=l}else rd(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;hr(l),x=!1}else x=dy(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=x),x=!0;if(!x)return l.flags&256?(oi(l),l):(oi(l),null)}if(oi(l),(l.flags&128)!==0)return l.lanes=u,l;if(u=f!==null,i=i!==null&&i.memoizedState!==null,u){f=l.child,x=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(x=f.alternate.memoizedState.cachePool.pool);var _=null;f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(_=f.memoizedState.cachePool.pool),_!==x&&(f.flags|=2048)}return u!==i&&u&&(l.child.flags|=8192),qf(l,l.updateQueue),hr(l),null;case 4:return He(),i===null&&Pg(l.stateNode.containerInfo),hr(l),null;case 10:return si(l.type),hr(l),null;case 19:if(Y(Lr),x=l.memoizedState,x===null)return hr(l),null;if(f=(l.flags&128)!==0,_=x.rendering,_===null)if(f)xd(x,!1);else{if(pr!==0||i!==null&&(i.flags&128)!==0)for(i=l.child;i!==null;){if(_=Vf(i),_!==null){for(l.flags|=128,xd(x,!1),i=_.updateQueue,l.updateQueue=i,qf(l,i),l.subtreeFlags=0,i=u,u=l.child;u!==null;)oy(u,i),u=u.sibling;return te(Lr,Lr.current&1|2),l.child}i=i.sibling}x.tail!==null&&Ue()>Wf&&(l.flags|=128,f=!0,xd(x,!1),l.lanes=4194304)}else{if(!f)if(i=Vf(_),i!==null){if(l.flags|=128,f=!0,i=i.updateQueue,l.updateQueue=i,qf(l,i),xd(x,!0),x.tail===null&&x.tailMode==="hidden"&&!_.alternate&&!Dt)return hr(l),null}else 2*Ue()-x.renderingStartTime>Wf&&u!==536870912&&(l.flags|=128,f=!0,xd(x,!1),l.lanes=4194304);x.isBackwards?(_.sibling=l.child,l.child=_):(i=x.last,i!==null?i.sibling=_:l.child=_,x.last=_)}return x.tail!==null?(l=x.tail,x.rendering=l,x.tail=l.sibling,x.renderingStartTime=Ue(),l.sibling=null,i=Lr.current,te(Lr,f?i&1|2:i&1),l):(hr(l),null);case 22:case 23:return oi(l),Vp(),f=l.memoizedState!==null,i!==null?i.memoizedState!==null!==f&&(l.flags|=8192):f&&(l.flags|=8192),f?(u&536870912)!==0&&(l.flags&128)===0&&(hr(l),l.subtreeFlags&6&&(l.flags|=8192)):hr(l),u=l.updateQueue,u!==null&&qf(l,u.retryQueue),u=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),f=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==u&&(l.flags|=2048),i!==null&&Y(El),null;case 24:return u=null,i!==null&&(u=i.memoizedState.cache),l.memoizedState.cache!==u&&(l.flags|=2048),si(Pr),hr(l),null;case 25:return null;case 30:return null}throw Error(n(156,l.tag))}function jA(i,l){switch(bp(l),l.tag){case 1:return i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 3:return si(Pr),He(),i=l.flags,(i&65536)!==0&&(i&128)===0?(l.flags=i&-65537|128,l):null;case 26:case 27:case 5:return Be(l),null;case 13:if(oi(l),i=l.memoizedState,i!==null&&i.dehydrated!==null){if(l.alternate===null)throw Error(n(340));rd()}return i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 19:return Y(Lr),null;case 4:return He(),null;case 10:return si(l.type),null;case 22:case 23:return oi(l),Vp(),i!==null&&Y(El),i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 24:return si(Pr),null;case 25:return null;default:return null}}function O_(i,l){switch(bp(l),l.tag){case 3:si(Pr),He();break;case 26:case 27:case 5:Be(l);break;case 4:He();break;case 13:oi(l);break;case 19:Y(Lr);break;case 10:si(l.type);break;case 22:case 23:oi(l),Vp(),i!==null&&Y(El);break;case 24:si(Pr)}}function yd(i,l){try{var u=l.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var x=f.next;u=x;do{if((u.tag&i)===i){f=void 0;var _=u.create,I=u.inst;f=_(),I.destroy=f}u=u.next}while(u!==x)}}catch(V){Qt(l,l.return,V)}}function Qi(i,l,u){try{var f=l.updateQueue,x=f!==null?f.lastEffect:null;if(x!==null){var _=x.next;f=_;do{if((f.tag&i)===i){var I=f.inst,V=I.destroy;if(V!==void 0){I.destroy=void 0,x=l;var J=u,ue=V;try{ue()}catch(Ee){Qt(x,J,Ee)}}}f=f.next}while(f!==_)}}catch(Ee){Qt(l,l.return,Ee)}}function M_(i){var l=i.updateQueue;if(l!==null){var u=i.stateNode;try{wy(l,u)}catch(f){Qt(i,i.return,f)}}}function F_(i,l,u){u.props=Nl(i.type,i.memoizedProps),u.state=i.memoizedState;try{u.componentWillUnmount()}catch(f){Qt(i,l,f)}}function _d(i,l){try{var u=i.ref;if(u!==null){switch(i.tag){case 26:case 27:case 5:var f=i.stateNode;break;case 30:f=i.stateNode;break;default:f=i.stateNode}typeof u=="function"?i.refCleanup=u(f):u.current=f}}catch(x){Qt(i,l,x)}}function Ts(i,l){var u=i.ref,f=i.refCleanup;if(u!==null)if(typeof f=="function")try{f()}catch(x){Qt(i,l,x)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(x){Qt(i,l,x)}else u.current=null}function P_(i){var l=i.type,u=i.memoizedProps,f=i.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":u.autoFocus&&f.focus();break e;case"img":u.src?f.src=u.src:u.srcSet&&(f.srcset=u.srcSet)}}catch(x){Qt(i,i.return,x)}}function fg(i,l,u){try{var f=i.stateNode;YA(f,i.type,u,l),f[_r]=l}catch(x){Qt(i,i.return,x)}}function L_(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&so(i.type)||i.tag===4}function mg(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||L_(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&so(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function pg(i,l,u){var f=i.tag;if(f===5||f===6)i=i.stateNode,l?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(i,l):(l=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,l.appendChild(i),u=u._reactRootContainer,u!=null||l.onclick!==null||(l.onclick=rm));else if(f!==4&&(f===27&&so(i.type)&&(u=i.stateNode,l=null),i=i.child,i!==null))for(pg(i,l,u),i=i.sibling;i!==null;)pg(i,l,u),i=i.sibling}function Gf(i,l,u){var f=i.tag;if(f===5||f===6)i=i.stateNode,l?u.insertBefore(i,l):u.appendChild(i);else if(f!==4&&(f===27&&so(i.type)&&(u=i.stateNode),i=i.child,i!==null))for(Gf(i,l,u),i=i.sibling;i!==null;)Gf(i,l,u),i=i.sibling}function V_(i){var l=i.stateNode,u=i.memoizedProps;try{for(var f=i.type,x=l.attributes;x.length;)l.removeAttributeNode(x[0]);ln(l,f,u),l[ur]=i,l[_r]=u}catch(_){Qt(i,i.return,_)}}var ui=!1,Nr=!1,gg=!1,B_=typeof WeakSet=="function"?WeakSet:Set,Kr=null;function CA(i,l){if(i=i.containerInfo,Bg=cm,i=Q1(i),mp(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var x=f.anchorOffset,_=f.focusNode;f=f.focusOffset;try{u.nodeType,_.nodeType}catch{u=null;break e}var I=0,V=-1,J=-1,ue=0,Ee=0,be=i,me=null;t:for(;;){for(var pe;be!==u||x!==0&&be.nodeType!==3||(V=I+x),be!==_||f!==0&&be.nodeType!==3||(J=I+f),be.nodeType===3&&(I+=be.nodeValue.length),(pe=be.firstChild)!==null;)me=be,be=pe;for(;;){if(be===i)break t;if(me===u&&++ue===x&&(V=I),me===_&&++Ee===f&&(J=I),(pe=be.nextSibling)!==null)break;be=me,me=be.parentNode}be=pe}u=V===-1||J===-1?null:{start:V,end:J}}else u=null}u=u||{start:0,end:0}}else u=null;for(Ug={focusedElem:i,selectionRange:u},cm=!1,Kr=l;Kr!==null;)if(l=Kr,i=l.child,(l.subtreeFlags&1024)!==0&&i!==null)i.return=l,Kr=i;else for(;Kr!==null;){switch(l=Kr,_=l.alternate,i=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&_!==null){i=void 0,u=l,x=_.memoizedProps,_=_.memoizedState,f=u.stateNode;try{var ot=Nl(u.type,x,u.elementType===u.type);i=f.getSnapshotBeforeUpdate(ot,_),f.__reactInternalSnapshotBeforeUpdate=i}catch(nt){Qt(u,u.return,nt)}}break;case 3:if((i&1024)!==0){if(i=l.stateNode.containerInfo,u=i.nodeType,u===9)qg(i);else if(u===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":qg(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(n(163))}if(i=l.sibling,i!==null){i.return=l.return,Kr=i;break}Kr=l.return}}function U_(i,l,u){var f=u.flags;switch(u.tag){case 0:case 11:case 15:Ji(i,u),f&4&&yd(5,u);break;case 1:if(Ji(i,u),f&4)if(i=u.stateNode,l===null)try{i.componentDidMount()}catch(I){Qt(u,u.return,I)}else{var x=Nl(u.type,l.memoizedProps);l=l.memoizedState;try{i.componentDidUpdate(x,l,i.__reactInternalSnapshotBeforeUpdate)}catch(I){Qt(u,u.return,I)}}f&64&&M_(u),f&512&&_d(u,u.return);break;case 3:if(Ji(i,u),f&64&&(i=u.updateQueue,i!==null)){if(l=null,u.child!==null)switch(u.child.tag){case 27:case 5:l=u.child.stateNode;break;case 1:l=u.child.stateNode}try{wy(i,l)}catch(I){Qt(u,u.return,I)}}break;case 27:l===null&&f&4&&V_(u);case 26:case 5:Ji(i,u),l===null&&f&4&&P_(u),f&512&&_d(u,u.return);break;case 12:Ji(i,u);break;case 13:Ji(i,u),f&4&&q_(i,u),f&64&&(i=u.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(u=PA.bind(null,u),tR(i,u))));break;case 22:if(f=u.memoizedState!==null||ui,!f){l=l!==null&&l.memoizedState!==null||Nr,x=ui;var _=Nr;ui=f,(Nr=l)&&!_?Zi(i,u,(u.subtreeFlags&8772)!==0):Ji(i,u),ui=x,Nr=_}break;case 30:break;default:Ji(i,u)}}function z_(i){var l=i.alternate;l!==null&&(i.alternate=null,z_(l)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(l=i.stateNode,l!==null&&G(l)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var or=null,Yn=!1;function di(i,l,u){for(u=u.child;u!==null;)H_(i,l,u),u=u.sibling}function H_(i,l,u){if(Sr&&typeof Sr.onCommitFiberUnmount=="function")try{Sr.onCommitFiberUnmount(Na,u)}catch{}switch(u.tag){case 26:Nr||Ts(u,l),di(i,l,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Nr||Ts(u,l);var f=or,x=Yn;so(u.type)&&(or=u.stateNode,Yn=!1),di(i,l,u),Ad(u.stateNode),or=f,Yn=x;break;case 5:Nr||Ts(u,l);case 6:if(f=or,x=Yn,or=null,di(i,l,u),or=f,Yn=x,or!==null)if(Yn)try{(or.nodeType===9?or.body:or.nodeName==="HTML"?or.ownerDocument.body:or).removeChild(u.stateNode)}catch(_){Qt(u,l,_)}else try{or.removeChild(u.stateNode)}catch(_){Qt(u,l,_)}break;case 18:or!==null&&(Yn?(i=or,D2(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,u.stateNode),Pd(i)):D2(or,u.stateNode));break;case 4:f=or,x=Yn,or=u.stateNode.containerInfo,Yn=!0,di(i,l,u),or=f,Yn=x;break;case 0:case 11:case 14:case 15:Nr||Qi(2,u,l),Nr||Qi(4,u,l),di(i,l,u);break;case 1:Nr||(Ts(u,l),f=u.stateNode,typeof f.componentWillUnmount=="function"&&F_(u,l,f)),di(i,l,u);break;case 21:di(i,l,u);break;case 22:Nr=(f=Nr)||u.memoizedState!==null,di(i,l,u),Nr=f;break;default:di(i,l,u)}}function q_(i,l){if(l.memoizedState===null&&(i=l.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Pd(i)}catch(u){Qt(l,l.return,u)}}function AA(i){switch(i.tag){case 13:case 19:var l=i.stateNode;return l===null&&(l=i.stateNode=new B_),l;case 22:return i=i.stateNode,l=i._retryCache,l===null&&(l=i._retryCache=new B_),l;default:throw Error(n(435,i.tag))}}function vg(i,l){var u=AA(i);l.forEach(function(f){var x=LA.bind(null,i,f);u.has(f)||(u.add(f),f.then(x,x))})}function ua(i,l){var u=l.deletions;if(u!==null)for(var f=0;f<u.length;f++){var x=u[f],_=i,I=l,V=I;e:for(;V!==null;){switch(V.tag){case 27:if(so(V.type)){or=V.stateNode,Yn=!1;break e}break;case 5:or=V.stateNode,Yn=!1;break e;case 3:case 4:or=V.stateNode.containerInfo,Yn=!0;break e}V=V.return}if(or===null)throw Error(n(160));H_(_,I,x),or=null,Yn=!1,_=x.alternate,_!==null&&(_.return=null),x.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)G_(l,i),l=l.sibling}var Ja=null;function G_(i,l){var u=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:ua(l,i),da(i),f&4&&(Qi(3,i,i.return),yd(3,i),Qi(5,i,i.return));break;case 1:ua(l,i),da(i),f&512&&(Nr||u===null||Ts(u,u.return)),f&64&&ui&&(i=i.updateQueue,i!==null&&(f=i.callbacks,f!==null&&(u=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=u===null?f:u.concat(f))));break;case 26:var x=Ja;if(ua(l,i),da(i),f&512&&(Nr||u===null||Ts(u,u.return)),f&4){var _=u!==null?u.memoizedState:null;if(f=i.memoizedState,u===null)if(f===null)if(i.stateNode===null){e:{f=i.type,u=i.memoizedProps,x=x.ownerDocument||x;t:switch(f){case"title":_=x.getElementsByTagName("title")[0],(!_||_[q]||_[ur]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=x.createElement(f),x.head.insertBefore(_,x.querySelector("head > title"))),ln(_,f,u),_[ur]=i,ie(_),f=_;break e;case"link":var I=V2("link","href",x).get(f+(u.href||""));if(I){for(var V=0;V<I.length;V++)if(_=I[V],_.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&_.getAttribute("rel")===(u.rel==null?null:u.rel)&&_.getAttribute("title")===(u.title==null?null:u.title)&&_.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){I.splice(V,1);break t}}_=x.createElement(f),ln(_,f,u),x.head.appendChild(_);break;case"meta":if(I=V2("meta","content",x).get(f+(u.content||""))){for(V=0;V<I.length;V++)if(_=I[V],_.getAttribute("content")===(u.content==null?null:""+u.content)&&_.getAttribute("name")===(u.name==null?null:u.name)&&_.getAttribute("property")===(u.property==null?null:u.property)&&_.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&_.getAttribute("charset")===(u.charSet==null?null:u.charSet)){I.splice(V,1);break t}}_=x.createElement(f),ln(_,f,u),x.head.appendChild(_);break;default:throw Error(n(468,f))}_[ur]=i,ie(_),f=_}i.stateNode=f}else B2(x,i.type,i.stateNode);else i.stateNode=L2(x,f,i.memoizedProps);else _!==f?(_===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):_.count--,f===null?B2(x,i.type,i.stateNode):L2(x,f,i.memoizedProps)):f===null&&i.stateNode!==null&&fg(i,i.memoizedProps,u.memoizedProps)}break;case 27:ua(l,i),da(i),f&512&&(Nr||u===null||Ts(u,u.return)),u!==null&&f&4&&fg(i,i.memoizedProps,u.memoizedProps);break;case 5:if(ua(l,i),da(i),f&512&&(Nr||u===null||Ts(u,u.return)),i.flags&32){x=i.stateNode;try{Sa(x,"")}catch(pe){Qt(i,i.return,pe)}}f&4&&i.stateNode!=null&&(x=i.memoizedProps,fg(i,x,u!==null?u.memoizedProps:x)),f&1024&&(gg=!0);break;case 6:if(ua(l,i),da(i),f&4){if(i.stateNode===null)throw Error(n(162));f=i.memoizedProps,u=i.stateNode;try{u.nodeValue=f}catch(pe){Qt(i,i.return,pe)}}break;case 3:if(im=null,x=Ja,Ja=am(l.containerInfo),ua(l,i),Ja=x,da(i),f&4&&u!==null&&u.memoizedState.isDehydrated)try{Pd(l.containerInfo)}catch(pe){Qt(i,i.return,pe)}gg&&(gg=!1,$_(i));break;case 4:f=Ja,Ja=am(i.stateNode.containerInfo),ua(l,i),da(i),Ja=f;break;case 12:ua(l,i),da(i);break;case 13:ua(l,i),da(i),i.child.flags&8192&&i.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Ng=Ue()),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,vg(i,f)));break;case 22:x=i.memoizedState!==null;var J=u!==null&&u.memoizedState!==null,ue=ui,Ee=Nr;if(ui=ue||x,Nr=Ee||J,ua(l,i),Nr=Ee,ui=ue,da(i),f&8192)e:for(l=i.stateNode,l._visibility=x?l._visibility&-2:l._visibility|1,x&&(u===null||J||ui||Nr||Tl(i)),u=null,l=i;;){if(l.tag===5||l.tag===26){if(u===null){J=u=l;try{if(_=J.stateNode,x)I=_.style,typeof I.setProperty=="function"?I.setProperty("display","none","important"):I.display="none";else{V=J.stateNode;var be=J.memoizedProps.style,me=be!=null&&be.hasOwnProperty("display")?be.display:null;V.style.display=me==null||typeof me=="boolean"?"":(""+me).trim()}}catch(pe){Qt(J,J.return,pe)}}}else if(l.tag===6){if(u===null){J=l;try{J.stateNode.nodeValue=x?"":J.memoizedProps}catch(pe){Qt(J,J.return,pe)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===i)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break e;for(;l.sibling===null;){if(l.return===null||l.return===i)break e;u===l&&(u=null),l=l.return}u===l&&(u=null),l.sibling.return=l.return,l=l.sibling}f&4&&(f=i.updateQueue,f!==null&&(u=f.retryQueue,u!==null&&(f.retryQueue=null,vg(i,u))));break;case 19:ua(l,i),da(i),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,vg(i,f)));break;case 30:break;case 21:break;default:ua(l,i),da(i)}}function da(i){var l=i.flags;if(l&2){try{for(var u,f=i.return;f!==null;){if(L_(f)){u=f;break}f=f.return}if(u==null)throw Error(n(160));switch(u.tag){case 27:var x=u.stateNode,_=mg(i);Gf(i,_,x);break;case 5:var I=u.stateNode;u.flags&32&&(Sa(I,""),u.flags&=-33);var V=mg(i);Gf(i,V,I);break;case 3:case 4:var J=u.stateNode.containerInfo,ue=mg(i);pg(i,ue,J);break;default:throw Error(n(161))}}catch(Ee){Qt(i,i.return,Ee)}i.flags&=-3}l&4096&&(i.flags&=-4097)}function $_(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var l=i;$_(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),i=i.sibling}}function Ji(i,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)U_(i,l.alternate,l),l=l.sibling}function Tl(i){for(i=i.child;i!==null;){var l=i;switch(l.tag){case 0:case 11:case 14:case 15:Qi(4,l,l.return),Tl(l);break;case 1:Ts(l,l.return);var u=l.stateNode;typeof u.componentWillUnmount=="function"&&F_(l,l.return,u),Tl(l);break;case 27:Ad(l.stateNode);case 26:case 5:Ts(l,l.return),Tl(l);break;case 22:l.memoizedState===null&&Tl(l);break;case 30:Tl(l);break;default:Tl(l)}i=i.sibling}}function Zi(i,l,u){for(u=u&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var f=l.alternate,x=i,_=l,I=_.flags;switch(_.tag){case 0:case 11:case 15:Zi(x,_,u),yd(4,_);break;case 1:if(Zi(x,_,u),f=_,x=f.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(ue){Qt(f,f.return,ue)}if(f=_,x=f.updateQueue,x!==null){var V=f.stateNode;try{var J=x.shared.hiddenCallbacks;if(J!==null)for(x.shared.hiddenCallbacks=null,x=0;x<J.length;x++)Ey(J[x],V)}catch(ue){Qt(f,f.return,ue)}}u&&I&64&&M_(_),_d(_,_.return);break;case 27:V_(_);case 26:case 5:Zi(x,_,u),u&&f===null&&I&4&&P_(_),_d(_,_.return);break;case 12:Zi(x,_,u);break;case 13:Zi(x,_,u),u&&I&4&&q_(x,_);break;case 22:_.memoizedState===null&&Zi(x,_,u),_d(_,_.return);break;case 30:break;default:Zi(x,_,u)}l=l.sibling}}function xg(i,l){var u=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),i=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(i=l.memoizedState.cachePool.pool),i!==u&&(i!=null&&i.refCount++,u!=null&&sd(u))}function yg(i,l){i=null,l.alternate!==null&&(i=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==i&&(l.refCount++,i!=null&&sd(i))}function bs(i,l,u,f){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)W_(i,l,u,f),l=l.sibling}function W_(i,l,u,f){var x=l.flags;switch(l.tag){case 0:case 11:case 15:bs(i,l,u,f),x&2048&&yd(9,l);break;case 1:bs(i,l,u,f);break;case 3:bs(i,l,u,f),x&2048&&(i=null,l.alternate!==null&&(i=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==i&&(l.refCount++,i!=null&&sd(i)));break;case 12:if(x&2048){bs(i,l,u,f),i=l.stateNode;try{var _=l.memoizedProps,I=_.id,V=_.onPostCommit;typeof V=="function"&&V(I,l.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(J){Qt(l,l.return,J)}}else bs(i,l,u,f);break;case 13:bs(i,l,u,f);break;case 23:break;case 22:_=l.stateNode,I=l.alternate,l.memoizedState!==null?_._visibility&2?bs(i,l,u,f):Ed(i,l):_._visibility&2?bs(i,l,u,f):(_._visibility|=2,Cc(i,l,u,f,(l.subtreeFlags&10256)!==0)),x&2048&&xg(I,l);break;case 24:bs(i,l,u,f),x&2048&&yg(l.alternate,l);break;default:bs(i,l,u,f)}}function Cc(i,l,u,f,x){for(x=x&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var _=i,I=l,V=u,J=f,ue=I.flags;switch(I.tag){case 0:case 11:case 15:Cc(_,I,V,J,x),yd(8,I);break;case 23:break;case 22:var Ee=I.stateNode;I.memoizedState!==null?Ee._visibility&2?Cc(_,I,V,J,x):Ed(_,I):(Ee._visibility|=2,Cc(_,I,V,J,x)),x&&ue&2048&&xg(I.alternate,I);break;case 24:Cc(_,I,V,J,x),x&&ue&2048&&yg(I.alternate,I);break;default:Cc(_,I,V,J,x)}l=l.sibling}}function Ed(i,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var u=i,f=l,x=f.flags;switch(f.tag){case 22:Ed(u,f),x&2048&&xg(f.alternate,f);break;case 24:Ed(u,f),x&2048&&yg(f.alternate,f);break;default:Ed(u,f)}l=l.sibling}}var wd=8192;function Ac(i){if(i.subtreeFlags&wd)for(i=i.child;i!==null;)Y_(i),i=i.sibling}function Y_(i){switch(i.tag){case 26:Ac(i),i.flags&wd&&i.memoizedState!==null&&mR(Ja,i.memoizedState,i.memoizedProps);break;case 5:Ac(i);break;case 3:case 4:var l=Ja;Ja=am(i.stateNode.containerInfo),Ac(i),Ja=l;break;case 22:i.memoizedState===null&&(l=i.alternate,l!==null&&l.memoizedState!==null?(l=wd,wd=16777216,Ac(i),wd=l):Ac(i));break;default:Ac(i)}}function K_(i){var l=i.alternate;if(l!==null&&(i=l.child,i!==null)){l.child=null;do l=i.sibling,i.sibling=null,i=l;while(i!==null)}}function Nd(i){var l=i.deletions;if((i.flags&16)!==0){if(l!==null)for(var u=0;u<l.length;u++){var f=l[u];Kr=f,Q_(f,i)}K_(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)X_(i),i=i.sibling}function X_(i){switch(i.tag){case 0:case 11:case 15:Nd(i),i.flags&2048&&Qi(9,i,i.return);break;case 3:Nd(i);break;case 12:Nd(i);break;case 22:var l=i.stateNode;i.memoizedState!==null&&l._visibility&2&&(i.return===null||i.return.tag!==13)?(l._visibility&=-3,$f(i)):Nd(i);break;default:Nd(i)}}function $f(i){var l=i.deletions;if((i.flags&16)!==0){if(l!==null)for(var u=0;u<l.length;u++){var f=l[u];Kr=f,Q_(f,i)}K_(i)}for(i=i.child;i!==null;){switch(l=i,l.tag){case 0:case 11:case 15:Qi(8,l,l.return),$f(l);break;case 22:u=l.stateNode,u._visibility&2&&(u._visibility&=-3,$f(l));break;default:$f(l)}i=i.sibling}}function Q_(i,l){for(;Kr!==null;){var u=Kr;switch(u.tag){case 0:case 11:case 15:Qi(8,u,l);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var f=u.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:sd(u.memoizedState.cache)}if(f=u.child,f!==null)f.return=u,Kr=f;else e:for(u=i;Kr!==null;){f=Kr;var x=f.sibling,_=f.return;if(z_(f),f===u){Kr=null;break e}if(x!==null){x.return=_,Kr=x;break e}Kr=_}}}var RA={getCacheForType:function(i){var l=wn(Pr),u=l.data.get(i);return u===void 0&&(u=i(),l.data.set(i,u)),u}},DA=typeof WeakMap=="function"?WeakMap:Map,Lt=0,rr=null,yt=null,Tt=0,Vt=0,ha=null,eo=!1,Rc=!1,_g=!1,hi=0,pr=0,to=0,bl=0,Eg=0,ka=0,Dc=0,Td=null,Kn=null,wg=!1,Ng=0,Wf=1/0,Yf=null,ro=null,on=0,no=null,Ic=null,kc=0,Tg=0,bg=null,J_=null,bd=0,Sg=null;function fa(){if((Lt&2)!==0&&Tt!==0)return Tt&-Tt;if(ge.T!==null){var i=_c;return i!==0?i:kg()}return qa()}function Z_(){ka===0&&(ka=(Tt&536870912)===0||Dt?Mi():536870912);var i=Ia.current;return i!==null&&(i.flags|=32),ka}function ma(i,l,u){(i===rr&&(Vt===2||Vt===9)||i.cancelPendingCommit!==null)&&(Oc(i,0),ao(i,Tt,ka,!1)),cr(i,u),((Lt&2)===0||i!==rr)&&(i===rr&&((Lt&2)===0&&(bl|=u),pr===4&&ao(i,Tt,ka,!1)),Ss(i))}function e2(i,l,u){if((Lt&6)!==0)throw Error(n(327));var f=!u&&(l&124)===0&&(l&i.expiredLanes)===0||gs(i,l),x=f?OA(i,l):Ag(i,l,!0),_=f;do{if(x===0){Rc&&!f&&ao(i,l,0,!1);break}else{if(u=i.current.alternate,_&&!IA(u)){x=Ag(i,l,!1),_=!1;continue}if(x===2){if(_=l,i.errorRecoveryDisabledLanes&_)var I=0;else I=i.pendingLanes&-536870913,I=I!==0?I:I&536870912?536870912:0;if(I!==0){l=I;e:{var V=i;x=Td;var J=V.current.memoizedState.isDehydrated;if(J&&(Oc(V,I).flags|=256),I=Ag(V,I,!1),I!==2){if(_g&&!J){V.errorRecoveryDisabledLanes|=_,bl|=_,x=4;break e}_=Kn,Kn=x,_!==null&&(Kn===null?Kn=_:Kn.push.apply(Kn,_))}x=I}if(_=!1,x!==2)continue}}if(x===1){Oc(i,0),ao(i,l,0,!0);break}e:{switch(f=i,_=x,_){case 0:case 1:throw Error(n(345));case 4:if((l&4194048)!==l)break;case 6:ao(f,l,ka,!eo);break e;case 2:Kn=null;break;case 3:case 5:break;default:throw Error(n(329))}if((l&62914560)===l&&(x=Ng+300-Ue(),10<x)){if(ao(f,l,ka,!eo),Gn(f,0,!0)!==0)break e;f.timeoutHandle=A2(t2.bind(null,f,u,Kn,Yf,wg,l,ka,bl,Dc,eo,_,2,-0,0),x);break e}t2(f,u,Kn,Yf,wg,l,ka,bl,Dc,eo,_,0,-0,0)}}break}while(!0);Ss(i)}function t2(i,l,u,f,x,_,I,V,J,ue,Ee,be,me,pe){if(i.timeoutHandle=-1,be=l.subtreeFlags,(be&8192||(be&16785408)===16785408)&&(Id={stylesheets:null,count:0,unsuspend:fR},Y_(l),be=pR(),be!==null)){i.cancelPendingCommit=be(l2.bind(null,i,l,_,u,f,x,I,V,J,Ee,1,me,pe)),ao(i,_,I,!ue);return}l2(i,l,_,u,f,x,I,V,J)}function IA(i){for(var l=i;;){var u=l.tag;if((u===0||u===11||u===15)&&l.flags&16384&&(u=l.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var f=0;f<u.length;f++){var x=u[f],_=x.getSnapshot;x=x.value;try{if(!la(_(),x))return!1}catch{return!1}}if(u=l.child,l.subtreeFlags&16384&&u!==null)u.return=l,l=u;else{if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function ao(i,l,u,f){l&=~Eg,l&=~bl,i.suspendedLanes|=l,i.pingedLanes&=~l,f&&(i.warmLanes|=l),f=i.expirationTimes;for(var x=l;0<x;){var _=31-an(x),I=1<<_;f[_]=-1,x&=~I}u!==0&&vs(i,u,l)}function Kf(){return(Lt&6)===0?(Sd(0),!1):!0}function jg(){if(yt!==null){if(Vt===0)var i=yt.return;else i=yt,ai=yl=null,qp(i),Sc=null,gd=0,i=yt;for(;i!==null;)O_(i.alternate,i),i=i.return;yt=null}}function Oc(i,l){var u=i.timeoutHandle;u!==-1&&(i.timeoutHandle=-1,XA(u)),u=i.cancelPendingCommit,u!==null&&(i.cancelPendingCommit=null,u()),jg(),rr=i,yt=u=ti(i.current,null),Tt=l,Vt=0,ha=null,eo=!1,Rc=gs(i,l),_g=!1,Dc=ka=Eg=bl=to=pr=0,Kn=Td=null,wg=!1,(l&8)!==0&&(l|=l&32);var f=i.entangledLanes;if(f!==0)for(i=i.entanglements,f&=l;0<f;){var x=31-an(f),_=1<<x;l|=i[x],f&=~_}return hi=l,vf(),u}function r2(i,l){gt=null,ge.H=Ff,l===od||l===Sf?(l=yy(),Vt=3):l===gy?(l=yy(),Vt=4):Vt=l===__?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,ha=l,yt===null&&(pr=1,Uf(i,Ca(l,i.current)))}function n2(){var i=ge.H;return ge.H=Ff,i===null?Ff:i}function a2(){var i=ge.A;return ge.A=RA,i}function Cg(){pr=4,eo||(Tt&4194048)!==Tt&&Ia.current!==null||(Rc=!0),(to&134217727)===0&&(bl&134217727)===0||rr===null||ao(rr,Tt,ka,!1)}function Ag(i,l,u){var f=Lt;Lt|=2;var x=n2(),_=a2();(rr!==i||Tt!==l)&&(Yf=null,Oc(i,l)),l=!1;var I=pr;e:do try{if(Vt!==0&&yt!==null){var V=yt,J=ha;switch(Vt){case 8:jg(),I=6;break e;case 3:case 2:case 9:case 6:Ia.current===null&&(l=!0);var ue=Vt;if(Vt=0,ha=null,Mc(i,V,J,ue),u&&Rc){I=0;break e}break;default:ue=Vt,Vt=0,ha=null,Mc(i,V,J,ue)}}kA(),I=pr;break}catch(Ee){r2(i,Ee)}while(!0);return l&&i.shellSuspendCounter++,ai=yl=null,Lt=f,ge.H=x,ge.A=_,yt===null&&(rr=null,Tt=0,vf()),I}function kA(){for(;yt!==null;)s2(yt)}function OA(i,l){var u=Lt;Lt|=2;var f=n2(),x=a2();rr!==i||Tt!==l?(Yf=null,Wf=Ue()+500,Oc(i,l)):Rc=gs(i,l);e:do try{if(Vt!==0&&yt!==null){l=yt;var _=ha;t:switch(Vt){case 1:Vt=0,ha=null,Mc(i,l,_,1);break;case 2:case 9:if(vy(_)){Vt=0,ha=null,i2(l);break}l=function(){Vt!==2&&Vt!==9||rr!==i||(Vt=7),Ss(i)},_.then(l,l);break e;case 3:Vt=7;break e;case 4:Vt=5;break e;case 7:vy(_)?(Vt=0,ha=null,i2(l)):(Vt=0,ha=null,Mc(i,l,_,7));break;case 5:var I=null;switch(yt.tag){case 26:I=yt.memoizedState;case 5:case 27:var V=yt;if(!I||U2(I)){Vt=0,ha=null;var J=V.sibling;if(J!==null)yt=J;else{var ue=V.return;ue!==null?(yt=ue,Xf(ue)):yt=null}break t}}Vt=0,ha=null,Mc(i,l,_,5);break;case 6:Vt=0,ha=null,Mc(i,l,_,6);break;case 8:jg(),pr=6;break e;default:throw Error(n(462))}}MA();break}catch(Ee){r2(i,Ee)}while(!0);return ai=yl=null,ge.H=f,ge.A=x,Lt=u,yt!==null?0:(rr=null,Tt=0,vf(),pr)}function MA(){for(;yt!==null&&!na();)s2(yt)}function s2(i){var l=I_(i.alternate,i,hi);i.memoizedProps=i.pendingProps,l===null?Xf(i):yt=l}function i2(i){var l=i,u=l.alternate;switch(l.tag){case 15:case 0:l=S_(u,l,l.pendingProps,l.type,void 0,Tt);break;case 11:l=S_(u,l,l.pendingProps,l.type.render,l.ref,Tt);break;case 5:qp(l);default:O_(u,l),l=yt=oy(l,hi),l=I_(u,l,hi)}i.memoizedProps=i.pendingProps,l===null?Xf(i):yt=l}function Mc(i,l,u,f){ai=yl=null,qp(l),Sc=null,gd=0;var x=l.return;try{if(TA(i,x,l,u,Tt)){pr=1,Uf(i,Ca(u,i.current)),yt=null;return}}catch(_){if(x!==null)throw yt=x,_;pr=1,Uf(i,Ca(u,i.current)),yt=null;return}l.flags&32768?(Dt||f===1?i=!0:Rc||(Tt&536870912)!==0?i=!1:(eo=i=!0,(f===2||f===9||f===3||f===6)&&(f=Ia.current,f!==null&&f.tag===13&&(f.flags|=16384))),o2(l,i)):Xf(l)}function Xf(i){var l=i;do{if((l.flags&32768)!==0){o2(l,eo);return}i=l.return;var u=SA(l.alternate,l,hi);if(u!==null){yt=u;return}if(l=l.sibling,l!==null){yt=l;return}yt=l=i}while(l!==null);pr===0&&(pr=5)}function o2(i,l){do{var u=jA(i.alternate,i);if(u!==null){u.flags&=32767,yt=u;return}if(u=i.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!l&&(i=i.sibling,i!==null)){yt=i;return}yt=i=u}while(i!==null);pr=6,yt=null}function l2(i,l,u,f,x,_,I,V,J){i.cancelPendingCommit=null;do Qf();while(on!==0);if((Lt&6)!==0)throw Error(n(327));if(l!==null){if(l===i.current)throw Error(n(177));if(_=l.lanes|l.childLanes,_|=yp,Ys(i,u,_,I,V,J),i===rr&&(yt=rr=null,Tt=0),Ic=l,no=i,kc=u,Tg=_,bg=x,J_=f,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,VA(_n,function(){return f2(),null})):(i.callbackNode=null,i.callbackPriority=0),f=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||f){f=ge.T,ge.T=null,x=De.p,De.p=2,I=Lt,Lt|=4;try{CA(i,l,u)}finally{Lt=I,De.p=x,ge.T=f}}on=1,c2(),u2(),d2()}}function c2(){if(on===1){on=0;var i=no,l=Ic,u=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||u){u=ge.T,ge.T=null;var f=De.p;De.p=2;var x=Lt;Lt|=4;try{G_(l,i);var _=Ug,I=Q1(i.containerInfo),V=_.focusedElem,J=_.selectionRange;if(I!==V&&V&&V.ownerDocument&&X1(V.ownerDocument.documentElement,V)){if(J!==null&&mp(V)){var ue=J.start,Ee=J.end;if(Ee===void 0&&(Ee=ue),"selectionStart"in V)V.selectionStart=ue,V.selectionEnd=Math.min(Ee,V.value.length);else{var be=V.ownerDocument||document,me=be&&be.defaultView||window;if(me.getSelection){var pe=me.getSelection(),ot=V.textContent.length,nt=Math.min(J.start,ot),Kt=J.end===void 0?nt:Math.min(J.end,ot);!pe.extend&&nt>Kt&&(I=Kt,Kt=nt,nt=I);var se=K1(V,nt),ne=K1(V,Kt);if(se&&ne&&(pe.rangeCount!==1||pe.anchorNode!==se.node||pe.anchorOffset!==se.offset||pe.focusNode!==ne.node||pe.focusOffset!==ne.offset)){var oe=be.createRange();oe.setStart(se.node,se.offset),pe.removeAllRanges(),nt>Kt?(pe.addRange(oe),pe.extend(ne.node,ne.offset)):(oe.setEnd(ne.node,ne.offset),pe.addRange(oe))}}}}for(be=[],pe=V;pe=pe.parentNode;)pe.nodeType===1&&be.push({element:pe,left:pe.scrollLeft,top:pe.scrollTop});for(typeof V.focus=="function"&&V.focus(),V=0;V<be.length;V++){var Ne=be[V];Ne.element.scrollLeft=Ne.left,Ne.element.scrollTop=Ne.top}}cm=!!Bg,Ug=Bg=null}finally{Lt=x,De.p=f,ge.T=u}}i.current=l,on=2}}function u2(){if(on===2){on=0;var i=no,l=Ic,u=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||u){u=ge.T,ge.T=null;var f=De.p;De.p=2;var x=Lt;Lt|=4;try{U_(i,l.alternate,l)}finally{Lt=x,De.p=f,ge.T=u}}on=3}}function d2(){if(on===4||on===3){on=0,Gt();var i=no,l=Ic,u=kc,f=J_;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?on=5:(on=0,Ic=no=null,h2(i,i.pendingLanes));var x=i.pendingLanes;if(x===0&&(ro=null),Jo(u),l=l.stateNode,Sr&&typeof Sr.onCommitFiberRoot=="function")try{Sr.onCommitFiberRoot(Na,l,void 0,(l.current.flags&128)===128)}catch{}if(f!==null){l=ge.T,x=De.p,De.p=2,ge.T=null;try{for(var _=i.onRecoverableError,I=0;I<f.length;I++){var V=f[I];_(V.value,{componentStack:V.stack})}}finally{ge.T=l,De.p=x}}(kc&3)!==0&&Qf(),Ss(i),x=i.pendingLanes,(u&4194090)!==0&&(x&42)!==0?i===Sg?bd++:(bd=0,Sg=i):bd=0,Sd(0)}}function h2(i,l){(i.pooledCacheLanes&=l)===0&&(l=i.pooledCache,l!=null&&(i.pooledCache=null,sd(l)))}function Qf(i){return c2(),u2(),d2(),f2()}function f2(){if(on!==5)return!1;var i=no,l=Tg;Tg=0;var u=Jo(kc),f=ge.T,x=De.p;try{De.p=32>u?32:u,ge.T=null,u=bg,bg=null;var _=no,I=kc;if(on=0,Ic=no=null,kc=0,(Lt&6)!==0)throw Error(n(331));var V=Lt;if(Lt|=4,X_(_.current),W_(_,_.current,I,u),Lt=V,Sd(0,!1),Sr&&typeof Sr.onPostCommitFiberRoot=="function")try{Sr.onPostCommitFiberRoot(Na,_)}catch{}return!0}finally{De.p=x,ge.T=f,h2(i,l)}}function m2(i,l,u){l=Ca(u,l),l=ag(i.stateNode,l,2),i=Wi(i,l,2),i!==null&&(cr(i,2),Ss(i))}function Qt(i,l,u){if(i.tag===3)m2(i,i,u);else for(;l!==null;){if(l.tag===3){m2(l,i,u);break}else if(l.tag===1){var f=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(ro===null||!ro.has(f))){i=Ca(u,i),u=x_(2),f=Wi(l,u,2),f!==null&&(y_(u,f,l,i),cr(f,2),Ss(f));break}}l=l.return}}function Rg(i,l,u){var f=i.pingCache;if(f===null){f=i.pingCache=new DA;var x=new Set;f.set(l,x)}else x=f.get(l),x===void 0&&(x=new Set,f.set(l,x));x.has(u)||(_g=!0,x.add(u),i=FA.bind(null,i,l,u),l.then(i,i))}function FA(i,l,u){var f=i.pingCache;f!==null&&f.delete(l),i.pingedLanes|=i.suspendedLanes&u,i.warmLanes&=~u,rr===i&&(Tt&u)===u&&(pr===4||pr===3&&(Tt&62914560)===Tt&&300>Ue()-Ng?(Lt&2)===0&&Oc(i,0):Eg|=u,Dc===Tt&&(Dc=0)),Ss(i)}function p2(i,l){l===0&&(l=Ha()),i=gc(i,l),i!==null&&(cr(i,l),Ss(i))}function PA(i){var l=i.memoizedState,u=0;l!==null&&(u=l.retryLane),p2(i,u)}function LA(i,l){var u=0;switch(i.tag){case 13:var f=i.stateNode,x=i.memoizedState;x!==null&&(u=x.retryLane);break;case 19:f=i.stateNode;break;case 22:f=i.stateNode._retryCache;break;default:throw Error(n(314))}f!==null&&f.delete(l),p2(i,u)}function VA(i,l){return qt(i,l)}var Jf=null,Fc=null,Dg=!1,Zf=!1,Ig=!1,Sl=0;function Ss(i){i!==Fc&&i.next===null&&(Fc===null?Jf=Fc=i:Fc=Fc.next=i),Zf=!0,Dg||(Dg=!0,UA())}function Sd(i,l){if(!Ig&&Zf){Ig=!0;do for(var u=!1,f=Jf;f!==null;){if(i!==0){var x=f.pendingLanes;if(x===0)var _=0;else{var I=f.suspendedLanes,V=f.pingedLanes;_=(1<<31-an(42|i)+1)-1,_&=x&~(I&~V),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(u=!0,y2(f,_))}else _=Tt,_=Gn(f,f===rr?_:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(_&3)===0||gs(f,_)||(u=!0,y2(f,_));f=f.next}while(u);Ig=!1}}function BA(){g2()}function g2(){Zf=Dg=!1;var i=0;Sl!==0&&(KA()&&(i=Sl),Sl=0);for(var l=Ue(),u=null,f=Jf;f!==null;){var x=f.next,_=v2(f,l);_===0?(f.next=null,u===null?Jf=x:u.next=x,x===null&&(Fc=u)):(u=f,(i!==0||(_&3)!==0)&&(Zf=!0)),f=x}Sd(i)}function v2(i,l){for(var u=i.suspendedLanes,f=i.pingedLanes,x=i.expirationTimes,_=i.pendingLanes&-62914561;0<_;){var I=31-an(_),V=1<<I,J=x[I];J===-1?((V&u)===0||(V&f)!==0)&&(x[I]=Ws(V,l)):J<=l&&(i.expiredLanes|=V),_&=~V}if(l=rr,u=Tt,u=Gn(i,i===l?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f=i.callbackNode,u===0||i===l&&(Vt===2||Vt===9)||i.cancelPendingCommit!==null)return f!==null&&f!==null&&xt(f),i.callbackNode=null,i.callbackPriority=0;if((u&3)===0||gs(i,u)){if(l=u&-u,l===i.callbackPriority)return l;switch(f!==null&&xt(f),Jo(u)){case 2:case 8:u=er;break;case 32:u=_n;break;case 268435456:u=$s;break;default:u=_n}return f=x2.bind(null,i),u=qt(u,f),i.callbackPriority=l,i.callbackNode=u,l}return f!==null&&f!==null&&xt(f),i.callbackPriority=2,i.callbackNode=null,2}function x2(i,l){if(on!==0&&on!==5)return i.callbackNode=null,i.callbackPriority=0,null;var u=i.callbackNode;if(Qf()&&i.callbackNode!==u)return null;var f=Tt;return f=Gn(i,i===rr?f:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f===0?null:(e2(i,f,l),v2(i,Ue()),i.callbackNode!=null&&i.callbackNode===u?x2.bind(null,i):null)}function y2(i,l){if(Qf())return null;e2(i,l,!0)}function UA(){QA(function(){(Lt&6)!==0?qt(Mt,BA):g2()})}function kg(){return Sl===0&&(Sl=Mi()),Sl}function _2(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Wa(""+i)}function E2(i,l){var u=l.ownerDocument.createElement("input");return u.name=l.name,u.value=l.value,i.id&&u.setAttribute("form",i.id),l.parentNode.insertBefore(u,l),i=new FormData(i),u.parentNode.removeChild(u),i}function zA(i,l,u,f,x){if(l==="submit"&&u&&u.stateNode===x){var _=_2((x[_r]||null).action),I=f.submitter;I&&(l=(l=I[_r]||null)?_2(l.formAction):I.getAttribute("formAction"),l!==null&&(_=l,I=null));var V=new sl("action","action",null,f,x);i.push({event:V,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(Sl!==0){var J=I?E2(x,I):new FormData(x);Zp(u,{pending:!0,data:J,method:x.method,action:_},null,J)}}else typeof _=="function"&&(V.preventDefault(),J=I?E2(x,I):new FormData(x),Zp(u,{pending:!0,data:J,method:x.method,action:_},_,J))},currentTarget:x}]})}}for(var Og=0;Og<xp.length;Og++){var Mg=xp[Og],HA=Mg.toLowerCase(),qA=Mg[0].toUpperCase()+Mg.slice(1);Qa(HA,"on"+qA)}Qa(ey,"onAnimationEnd"),Qa(ty,"onAnimationIteration"),Qa(ry,"onAnimationStart"),Qa("dblclick","onDoubleClick"),Qa("focusin","onFocus"),Qa("focusout","onBlur"),Qa(oA,"onTransitionRun"),Qa(lA,"onTransitionStart"),Qa(cA,"onTransitionCancel"),Qa(ny,"onTransitionEnd"),Ie("onMouseEnter",["mouseout","mouseover"]),Ie("onMouseLeave",["mouseout","mouseover"]),Ie("onPointerEnter",["pointerout","pointerover"]),Ie("onPointerLeave",["pointerout","pointerover"]),Ce("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ce("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ce("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ce("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ce("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ce("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),GA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(jd));function w2(i,l){l=(l&4)!==0;for(var u=0;u<i.length;u++){var f=i[u],x=f.event;f=f.listeners;e:{var _=void 0;if(l)for(var I=f.length-1;0<=I;I--){var V=f[I],J=V.instance,ue=V.currentTarget;if(V=V.listener,J!==_&&x.isPropagationStopped())break e;_=V,x.currentTarget=ue;try{_(x)}catch(Ee){Bf(Ee)}x.currentTarget=null,_=J}else for(I=0;I<f.length;I++){if(V=f[I],J=V.instance,ue=V.currentTarget,V=V.listener,J!==_&&x.isPropagationStopped())break e;_=V,x.currentTarget=ue;try{_(x)}catch(Ee){Bf(Ee)}x.currentTarget=null,_=J}}}}function _t(i,l){var u=l[Ks];u===void 0&&(u=l[Ks]=new Set);var f=i+"__bubble";u.has(f)||(N2(l,i,2,!1),u.add(f))}function Fg(i,l,u){var f=0;l&&(f|=4),N2(u,i,f,l)}var em="_reactListening"+Math.random().toString(36).slice(2);function Pg(i){if(!i[em]){i[em]=!0,he.forEach(function(u){u!=="selectionchange"&&(GA.has(u)||Fg(u,!1,i),Fg(u,!0,i))});var l=i.nodeType===9?i:i.ownerDocument;l===null||l[em]||(l[em]=!0,Fg("selectionchange",!1,l))}}function N2(i,l,u,f){switch(W2(l)){case 2:var x=xR;break;case 8:x=yR;break;default:x=Qg}u=x.bind(null,l,u,i),x=void 0,!Zs||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(x=!0),f?x!==void 0?i.addEventListener(l,u,{capture:!0,passive:x}):i.addEventListener(l,u,!0):x!==void 0?i.addEventListener(l,u,{passive:x}):i.addEventListener(l,u,!1)}function Lg(i,l,u,f,x){var _=f;if((l&1)===0&&(l&2)===0&&f!==null)e:for(;;){if(f===null)return;var I=f.tag;if(I===3||I===4){var V=f.stateNode.containerInfo;if(V===x)break;if(I===4)for(I=f.return;I!==null;){var J=I.tag;if((J===3||J===4)&&I.stateNode.containerInfo===x)return;I=I.return}for(;V!==null;){if(I=K(V),I===null)return;if(J=I.tag,J===5||J===6||J===26||J===27){f=_=I;continue e}V=V.parentNode}}f=f.return}rl(function(){var ue=_,Ee=qu(u),be=[];e:{var me=ay.get(i);if(me!==void 0){var pe=sl,ot=i;switch(i){case"keypress":if(nl(u)===0)break e;case"keydown":case"keyup":pe=hc;break;case"focusin":ot="focus",pe=cc;break;case"focusout":ot="blur",pe=cc;break;case"beforeblur":case"afterblur":pe=cc;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pe=ul;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pe=lf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pe=Hi;break;case ey:case ty:case ry:pe=$u;break;case ny:pe=b;break;case"scroll":case"scrollend":pe=ol;break;case"wheel":pe=H;break;case"copy":case"cut":case"paste":pe=uf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pe=Ku;break;case"toggle":case"beforetoggle":pe=ve}var nt=(l&4)!==0,Kt=!nt&&(i==="scroll"||i==="scrollend"),se=nt?me!==null?me+"Capture":null:me;nt=[];for(var ne=ue,oe;ne!==null;){var Ne=ne;if(oe=Ne.stateNode,Ne=Ne.tag,Ne!==5&&Ne!==26&&Ne!==27||oe===null||se===null||(Ne=Ui(ne,se),Ne!=null&&nt.push(Cd(ne,Ne,oe))),Kt)break;ne=ne.return}0<nt.length&&(me=new pe(me,ot,null,u,Ee),be.push({event:me,listeners:nt}))}}if((l&7)===0){e:{if(me=i==="mouseover"||i==="pointerover",pe=i==="mouseout"||i==="pointerout",me&&u!==Hu&&(ot=u.relatedTarget||u.fromElement)&&(K(ot)||ot[Ga]))break e;if((pe||me)&&(me=Ee.window===Ee?Ee:(me=Ee.ownerDocument)?me.defaultView||me.parentWindow:window,pe?(ot=u.relatedTarget||u.toElement,pe=ue,ot=ot?K(ot):null,ot!==null&&(Kt=o(ot),nt=ot.tag,ot!==Kt||nt!==5&&nt!==27&&nt!==6)&&(ot=null)):(pe=null,ot=ue),pe!==ot)){if(nt=ul,Ne="onMouseLeave",se="onMouseEnter",ne="mouse",(i==="pointerout"||i==="pointerover")&&(nt=Ku,Ne="onPointerLeave",se="onPointerEnter",ne="pointer"),Kt=pe==null?me:ce(pe),oe=ot==null?me:ce(ot),me=new nt(Ne,ne+"leave",pe,u,Ee),me.target=Kt,me.relatedTarget=oe,Ne=null,K(Ee)===ue&&(nt=new nt(se,ne+"enter",ot,u,Ee),nt.target=oe,nt.relatedTarget=Kt,Ne=nt),Kt=Ne,pe&&ot)t:{for(nt=pe,se=ot,ne=0,oe=nt;oe;oe=Pc(oe))ne++;for(oe=0,Ne=se;Ne;Ne=Pc(Ne))oe++;for(;0<ne-oe;)nt=Pc(nt),ne--;for(;0<oe-ne;)se=Pc(se),oe--;for(;ne--;){if(nt===se||se!==null&&nt===se.alternate)break t;nt=Pc(nt),se=Pc(se)}nt=null}else nt=null;pe!==null&&T2(be,me,pe,nt,!1),ot!==null&&Kt!==null&&T2(be,Kt,ot,nt,!0)}}e:{if(me=ue?ce(ue):window,pe=me.nodeName&&me.nodeName.toLowerCase(),pe==="select"||pe==="input"&&me.type==="file")var Xe=H1;else if(U1(me))if(q1)Xe=aA;else{Xe=rA;var vt=tA}else pe=me.nodeName,!pe||pe.toLowerCase()!=="input"||me.type!=="checkbox"&&me.type!=="radio"?ue&&ic(ue.elementType)&&(Xe=H1):Xe=nA;if(Xe&&(Xe=Xe(i,ue))){z1(be,Xe,u,Ee);break e}vt&&vt(i,me,ue),i==="focusout"&&ue&&me.type==="number"&&ue.memoizedProps.value!=null&&Bu(me,"number",me.value)}switch(vt=ue?ce(ue):window,i){case"focusin":(U1(vt)||vt.contentEditable==="true")&&(fc=vt,pp=ue,ed=null);break;case"focusout":ed=pp=fc=null;break;case"mousedown":gp=!0;break;case"contextmenu":case"mouseup":case"dragend":gp=!1,J1(be,u,Ee);break;case"selectionchange":if(iA)break;case"keydown":case"keyup":J1(be,u,Ee)}var Ze;if(ut)e:{switch(i){case"compositionstart":var at="onCompositionStart";break e;case"compositionend":at="onCompositionEnd";break e;case"compositionupdate":at="onCompositionUpdate";break e}at=void 0}else Xa?Ya(i,u)&&(at="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(at="onCompositionStart");at&&(Er&&u.locale!=="ko"&&(Xa||at!=="onCompositionStart"?at==="onCompositionEnd"&&Xa&&(Ze=of()):(ja=Ee,tr="value"in ja?ja.value:ja.textContent,Xa=!0)),vt=tm(ue,at),0<vt.length&&(at=new Yu(at,i,null,u,Ee),be.push({event:at,listeners:vt}),Ze?at.data=Ze:(Ze=Ka(u),Ze!==null&&(at.data=Ze)))),(Ze=Pt?Xu(i,u):JC(i,u))&&(at=tm(ue,"onBeforeInput"),0<at.length&&(vt=new Yu("onBeforeInput","beforeinput",null,u,Ee),be.push({event:vt,listeners:at}),vt.data=Ze)),zA(be,i,ue,u,Ee)}w2(be,l)})}function Cd(i,l,u){return{instance:i,listener:l,currentTarget:u}}function tm(i,l){for(var u=l+"Capture",f=[];i!==null;){var x=i,_=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||_===null||(x=Ui(i,u),x!=null&&f.unshift(Cd(i,x,_)),x=Ui(i,l),x!=null&&f.push(Cd(i,x,_))),i.tag===3)return f;i=i.return}return[]}function Pc(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function T2(i,l,u,f,x){for(var _=l._reactName,I=[];u!==null&&u!==f;){var V=u,J=V.alternate,ue=V.stateNode;if(V=V.tag,J!==null&&J===f)break;V!==5&&V!==26&&V!==27||ue===null||(J=ue,x?(ue=Ui(u,_),ue!=null&&I.unshift(Cd(u,ue,J))):x||(ue=Ui(u,_),ue!=null&&I.push(Cd(u,ue,J)))),u=u.return}I.length!==0&&i.push({event:l,listeners:I})}var $A=/\r\n?/g,WA=/\u0000|\uFFFD/g;function b2(i){return(typeof i=="string"?i:""+i).replace($A,`
`).replace(WA,"")}function S2(i,l){return l=b2(l),b2(i)===l}function rm(){}function Yt(i,l,u,f,x,_){switch(u){case"children":typeof f=="string"?l==="body"||l==="textarea"&&f===""||Sa(i,f):(typeof f=="number"||typeof f=="bigint")&&l!=="body"&&Sa(i,""+f);break;case"className":Rt(i,"class",f);break;case"tabIndex":Rt(i,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":Rt(i,u,f);break;case"style":zu(i,f,_);break;case"data":if(l!=="object"){Rt(i,"data",f);break}case"src":case"href":if(f===""&&(l!=="a"||u!=="href")){i.removeAttribute(u);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(u);break}f=Wa(""+f),i.setAttribute(u,f);break;case"action":case"formAction":if(typeof f=="function"){i.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(u==="formAction"?(l!=="input"&&Yt(i,l,"name",x.name,x,null),Yt(i,l,"formEncType",x.formEncType,x,null),Yt(i,l,"formMethod",x.formMethod,x,null),Yt(i,l,"formTarget",x.formTarget,x,null)):(Yt(i,l,"encType",x.encType,x,null),Yt(i,l,"method",x.method,x,null),Yt(i,l,"target",x.target,x,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(u);break}f=Wa(""+f),i.setAttribute(u,f);break;case"onClick":f!=null&&(i.onclick=rm);break;case"onScroll":f!=null&&_t("scroll",i);break;case"onScrollEnd":f!=null&&_t("scrollend",i);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(n(61));if(u=f.__html,u!=null){if(x.children!=null)throw Error(n(60));i.innerHTML=u}}break;case"multiple":i.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":i.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){i.removeAttribute("xlink:href");break}u=Wa(""+f),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(u,""+f):i.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(u,""):i.removeAttribute(u);break;case"capture":case"download":f===!0?i.setAttribute(u,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(u,f):i.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?i.setAttribute(u,f):i.removeAttribute(u);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?i.removeAttribute(u):i.setAttribute(u,f);break;case"popover":_t("beforetoggle",i),_t("toggle",i),At(i,"popover",f);break;case"xlinkActuate":Ft(i,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":Ft(i,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":Ft(i,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":Ft(i,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":Ft(i,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":Ft(i,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":Ft(i,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":Ft(i,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":Ft(i,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":At(i,"is",f);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=nf.get(u)||u,At(i,u,f))}}function Vg(i,l,u,f,x,_){switch(u){case"style":zu(i,f,_);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(n(61));if(u=f.__html,u!=null){if(x.children!=null)throw Error(n(60));i.innerHTML=u}}break;case"children":typeof f=="string"?Sa(i,f):(typeof f=="number"||typeof f=="bigint")&&Sa(i,""+f);break;case"onScroll":f!=null&&_t("scroll",i);break;case"onScrollEnd":f!=null&&_t("scrollend",i);break;case"onClick":f!=null&&(i.onclick=rm);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!fe.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(x=u.endsWith("Capture"),l=u.slice(2,x?u.length-7:void 0),_=i[_r]||null,_=_!=null?_[u]:null,typeof _=="function"&&i.removeEventListener(l,_,x),typeof f=="function")){typeof _!="function"&&_!==null&&(u in i?i[u]=null:i.hasAttribute(u)&&i.removeAttribute(u)),i.addEventListener(l,f,x);break e}u in i?i[u]=f:f===!0?i.setAttribute(u,""):At(i,u,f)}}}function ln(i,l,u){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":_t("error",i),_t("load",i);var f=!1,x=!1,_;for(_ in u)if(u.hasOwnProperty(_)){var I=u[_];if(I!=null)switch(_){case"src":f=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,l));default:Yt(i,l,_,I,u,null)}}x&&Yt(i,l,"srcSet",u.srcSet,u,null),f&&Yt(i,l,"src",u.src,u,null);return;case"input":_t("invalid",i);var V=_=I=x=null,J=null,ue=null;for(f in u)if(u.hasOwnProperty(f)){var Ee=u[f];if(Ee!=null)switch(f){case"name":x=Ee;break;case"type":I=Ee;break;case"checked":J=Ee;break;case"defaultChecked":ue=Ee;break;case"value":_=Ee;break;case"defaultValue":V=Ee;break;case"children":case"dangerouslySetInnerHTML":if(Ee!=null)throw Error(n(137,l));break;default:Yt(i,l,f,Ee,u,null)}}Vu(i,_,V,J,ue,I,x,!1),Li(i);return;case"select":_t("invalid",i),f=I=_=null;for(x in u)if(u.hasOwnProperty(x)&&(V=u[x],V!=null))switch(x){case"value":_=V;break;case"defaultValue":I=V;break;case"multiple":f=V;default:Yt(i,l,x,V,u,null)}l=_,u=I,i.multiple=!!f,l!=null?Vi(i,!!f,l,!1):u!=null&&Vi(i,!!f,u,!0);return;case"textarea":_t("invalid",i),_=x=f=null;for(I in u)if(u.hasOwnProperty(I)&&(V=u[I],V!=null))switch(I){case"value":f=V;break;case"defaultValue":x=V;break;case"children":_=V;break;case"dangerouslySetInnerHTML":if(V!=null)throw Error(n(91));break;default:Yt(i,l,I,V,u,null)}rf(i,f,x,_),Li(i);return;case"option":for(J in u)u.hasOwnProperty(J)&&(f=u[J],f!=null)&&(J==="selected"?i.selected=f&&typeof f!="function"&&typeof f!="symbol":Yt(i,l,J,f,u,null));return;case"dialog":_t("beforetoggle",i),_t("toggle",i),_t("cancel",i),_t("close",i);break;case"iframe":case"object":_t("load",i);break;case"video":case"audio":for(f=0;f<jd.length;f++)_t(jd[f],i);break;case"image":_t("error",i),_t("load",i);break;case"details":_t("toggle",i);break;case"embed":case"source":case"link":_t("error",i),_t("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ue in u)if(u.hasOwnProperty(ue)&&(f=u[ue],f!=null))switch(ue){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,l));default:Yt(i,l,ue,f,u,null)}return;default:if(ic(l)){for(Ee in u)u.hasOwnProperty(Ee)&&(f=u[Ee],f!==void 0&&Vg(i,l,Ee,f,u,void 0));return}}for(V in u)u.hasOwnProperty(V)&&(f=u[V],f!=null&&Yt(i,l,V,f,u,null))}function YA(i,l,u,f){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,_=null,I=null,V=null,J=null,ue=null,Ee=null;for(pe in u){var be=u[pe];if(u.hasOwnProperty(pe)&&be!=null)switch(pe){case"checked":break;case"value":break;case"defaultValue":J=be;default:f.hasOwnProperty(pe)||Yt(i,l,pe,null,f,be)}}for(var me in f){var pe=f[me];if(be=u[me],f.hasOwnProperty(me)&&(pe!=null||be!=null))switch(me){case"type":_=pe;break;case"name":x=pe;break;case"checked":ue=pe;break;case"defaultChecked":Ee=pe;break;case"value":I=pe;break;case"defaultValue":V=pe;break;case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(n(137,l));break;default:pe!==be&&Yt(i,l,me,pe,f,be)}}Lu(i,I,V,J,ue,Ee,_,x);return;case"select":pe=I=V=me=null;for(_ in u)if(J=u[_],u.hasOwnProperty(_)&&J!=null)switch(_){case"value":break;case"multiple":pe=J;default:f.hasOwnProperty(_)||Yt(i,l,_,null,f,J)}for(x in f)if(_=f[x],J=u[x],f.hasOwnProperty(x)&&(_!=null||J!=null))switch(x){case"value":me=_;break;case"defaultValue":V=_;break;case"multiple":I=_;default:_!==J&&Yt(i,l,x,_,f,J)}l=V,u=I,f=pe,me!=null?Vi(i,!!u,me,!1):!!f!=!!u&&(l!=null?Vi(i,!!u,l,!0):Vi(i,!!u,u?[]:"",!1));return;case"textarea":pe=me=null;for(V in u)if(x=u[V],u.hasOwnProperty(V)&&x!=null&&!f.hasOwnProperty(V))switch(V){case"value":break;case"children":break;default:Yt(i,l,V,null,f,x)}for(I in f)if(x=f[I],_=u[I],f.hasOwnProperty(I)&&(x!=null||_!=null))switch(I){case"value":me=x;break;case"defaultValue":pe=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(n(91));break;default:x!==_&&Yt(i,l,I,x,f,_)}tf(i,me,pe);return;case"option":for(var ot in u)me=u[ot],u.hasOwnProperty(ot)&&me!=null&&!f.hasOwnProperty(ot)&&(ot==="selected"?i.selected=!1:Yt(i,l,ot,null,f,me));for(J in f)me=f[J],pe=u[J],f.hasOwnProperty(J)&&me!==pe&&(me!=null||pe!=null)&&(J==="selected"?i.selected=me&&typeof me!="function"&&typeof me!="symbol":Yt(i,l,J,me,f,pe));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var nt in u)me=u[nt],u.hasOwnProperty(nt)&&me!=null&&!f.hasOwnProperty(nt)&&Yt(i,l,nt,null,f,me);for(ue in f)if(me=f[ue],pe=u[ue],f.hasOwnProperty(ue)&&me!==pe&&(me!=null||pe!=null))switch(ue){case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(n(137,l));break;default:Yt(i,l,ue,me,f,pe)}return;default:if(ic(l)){for(var Kt in u)me=u[Kt],u.hasOwnProperty(Kt)&&me!==void 0&&!f.hasOwnProperty(Kt)&&Vg(i,l,Kt,void 0,f,me);for(Ee in f)me=f[Ee],pe=u[Ee],!f.hasOwnProperty(Ee)||me===pe||me===void 0&&pe===void 0||Vg(i,l,Ee,me,f,pe);return}}for(var se in u)me=u[se],u.hasOwnProperty(se)&&me!=null&&!f.hasOwnProperty(se)&&Yt(i,l,se,null,f,me);for(be in f)me=f[be],pe=u[be],!f.hasOwnProperty(be)||me===pe||me==null&&pe==null||Yt(i,l,be,me,f,pe)}var Bg=null,Ug=null;function nm(i){return i.nodeType===9?i:i.ownerDocument}function j2(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function C2(i,l){if(i===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&l==="foreignObject"?0:i}function zg(i,l){return i==="textarea"||i==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Hg=null;function KA(){var i=window.event;return i&&i.type==="popstate"?i===Hg?!1:(Hg=i,!0):(Hg=null,!1)}var A2=typeof setTimeout=="function"?setTimeout:void 0,XA=typeof clearTimeout=="function"?clearTimeout:void 0,R2=typeof Promise=="function"?Promise:void 0,QA=typeof queueMicrotask=="function"?queueMicrotask:typeof R2<"u"?function(i){return R2.resolve(null).then(i).catch(JA)}:A2;function JA(i){setTimeout(function(){throw i})}function so(i){return i==="head"}function D2(i,l){var u=l,f=0,x=0;do{var _=u.nextSibling;if(i.removeChild(u),_&&_.nodeType===8)if(u=_.data,u==="/$"){if(0<f&&8>f){u=f;var I=i.ownerDocument;if(u&1&&Ad(I.documentElement),u&2&&Ad(I.body),u&4)for(u=I.head,Ad(u),I=u.firstChild;I;){var V=I.nextSibling,J=I.nodeName;I[q]||J==="SCRIPT"||J==="STYLE"||J==="LINK"&&I.rel.toLowerCase()==="stylesheet"||u.removeChild(I),I=V}}if(x===0){i.removeChild(_),Pd(l);return}x--}else u==="$"||u==="$?"||u==="$!"?x++:f=u.charCodeAt(0)-48;else f=0;u=_}while(u);Pd(l)}function qg(i){var l=i.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var u=l;switch(l=l.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":qg(u),G(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}i.removeChild(u)}}function ZA(i,l,u,f){for(;i.nodeType===1;){var x=u;if(i.nodeName.toLowerCase()!==l.toLowerCase()){if(!f&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(f){if(!i[q])switch(l){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(_=i.getAttribute("rel"),_==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(_!==x.rel||i.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||i.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||i.getAttribute("title")!==(x.title==null?null:x.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(_=i.getAttribute("src"),(_!==(x.src==null?null:x.src)||i.getAttribute("type")!==(x.type==null?null:x.type)||i.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&_&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(l==="input"&&i.type==="hidden"){var _=x.name==null?null:""+x.name;if(x.type==="hidden"&&i.getAttribute("name")===_)return i}else return i;if(i=Za(i.nextSibling),i===null)break}return null}function eR(i,l,u){if(l==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!u||(i=Za(i.nextSibling),i===null))return null;return i}function Gg(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function tR(i,l){var u=i.ownerDocument;if(i.data!=="$?"||u.readyState==="complete")l();else{var f=function(){l(),u.removeEventListener("DOMContentLoaded",f)};u.addEventListener("DOMContentLoaded",f),i._reactRetry=f}}function Za(i){for(;i!=null;i=i.nextSibling){var l=i.nodeType;if(l===1||l===3)break;if(l===8){if(l=i.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return i}var $g=null;function I2(i){i=i.previousSibling;for(var l=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(l===0)return i;l--}else u==="/$"&&l++}i=i.previousSibling}return null}function k2(i,l,u){switch(l=nm(u),i){case"html":if(i=l.documentElement,!i)throw Error(n(452));return i;case"head":if(i=l.head,!i)throw Error(n(453));return i;case"body":if(i=l.body,!i)throw Error(n(454));return i;default:throw Error(n(451))}}function Ad(i){for(var l=i.attributes;l.length;)i.removeAttributeNode(l[0]);G(i)}var Oa=new Map,O2=new Set;function am(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var fi=De.d;De.d={f:rR,r:nR,D:aR,C:sR,L:iR,m:oR,X:cR,S:lR,M:uR};function rR(){var i=fi.f(),l=Kf();return i||l}function nR(i){var l=X(i);l!==null&&l.tag===5&&l.type==="form"?e_(l):fi.r(i)}var Lc=typeof document>"u"?null:document;function M2(i,l,u){var f=Lc;if(f&&typeof l=="string"&&l){var x=Wr(l);x='link[rel="'+i+'"][href="'+x+'"]',typeof u=="string"&&(x+='[crossorigin="'+u+'"]'),O2.has(x)||(O2.add(x),i={rel:i,crossOrigin:u,href:l},f.querySelector(x)===null&&(l=f.createElement("link"),ln(l,"link",i),ie(l),f.head.appendChild(l)))}}function aR(i){fi.D(i),M2("dns-prefetch",i,null)}function sR(i,l){fi.C(i,l),M2("preconnect",i,l)}function iR(i,l,u){fi.L(i,l,u);var f=Lc;if(f&&i&&l){var x='link[rel="preload"][as="'+Wr(l)+'"]';l==="image"&&u&&u.imageSrcSet?(x+='[imagesrcset="'+Wr(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(x+='[imagesizes="'+Wr(u.imageSizes)+'"]')):x+='[href="'+Wr(i)+'"]';var _=x;switch(l){case"style":_=Vc(i);break;case"script":_=Bc(i)}Oa.has(_)||(i=p({rel:"preload",href:l==="image"&&u&&u.imageSrcSet?void 0:i,as:l},u),Oa.set(_,i),f.querySelector(x)!==null||l==="style"&&f.querySelector(Rd(_))||l==="script"&&f.querySelector(Dd(_))||(l=f.createElement("link"),ln(l,"link",i),ie(l),f.head.appendChild(l)))}}function oR(i,l){fi.m(i,l);var u=Lc;if(u&&i){var f=l&&typeof l.as=="string"?l.as:"script",x='link[rel="modulepreload"][as="'+Wr(f)+'"][href="'+Wr(i)+'"]',_=x;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Bc(i)}if(!Oa.has(_)&&(i=p({rel:"modulepreload",href:i},l),Oa.set(_,i),u.querySelector(x)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Dd(_)))return}f=u.createElement("link"),ln(f,"link",i),ie(f),u.head.appendChild(f)}}}function lR(i,l,u){fi.S(i,l,u);var f=Lc;if(f&&i){var x=xe(f).hoistableStyles,_=Vc(i);l=l||"default";var I=x.get(_);if(!I){var V={loading:0,preload:null};if(I=f.querySelector(Rd(_)))V.loading=5;else{i=p({rel:"stylesheet",href:i,"data-precedence":l},u),(u=Oa.get(_))&&Wg(i,u);var J=I=f.createElement("link");ie(J),ln(J,"link",i),J._p=new Promise(function(ue,Ee){J.onload=ue,J.onerror=Ee}),J.addEventListener("load",function(){V.loading|=1}),J.addEventListener("error",function(){V.loading|=2}),V.loading|=4,sm(I,l,f)}I={type:"stylesheet",instance:I,count:1,state:V},x.set(_,I)}}}function cR(i,l){fi.X(i,l);var u=Lc;if(u&&i){var f=xe(u).hoistableScripts,x=Bc(i),_=f.get(x);_||(_=u.querySelector(Dd(x)),_||(i=p({src:i,async:!0},l),(l=Oa.get(x))&&Yg(i,l),_=u.createElement("script"),ie(_),ln(_,"link",i),u.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},f.set(x,_))}}function uR(i,l){fi.M(i,l);var u=Lc;if(u&&i){var f=xe(u).hoistableScripts,x=Bc(i),_=f.get(x);_||(_=u.querySelector(Dd(x)),_||(i=p({src:i,async:!0,type:"module"},l),(l=Oa.get(x))&&Yg(i,l),_=u.createElement("script"),ie(_),ln(_,"link",i),u.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},f.set(x,_))}}function F2(i,l,u,f){var x=(x=de.current)?am(x):null;if(!x)throw Error(n(446));switch(i){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(l=Vc(u.href),u=xe(x).hoistableStyles,f=u.get(l),f||(f={type:"style",instance:null,count:0,state:null},u.set(l,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){i=Vc(u.href);var _=xe(x).hoistableStyles,I=_.get(i);if(I||(x=x.ownerDocument||x,I={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(i,I),(_=x.querySelector(Rd(i)))&&!_._p&&(I.instance=_,I.state.loading=5),Oa.has(i)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},Oa.set(i,u),_||dR(x,i,u,I.state))),l&&f===null)throw Error(n(528,""));return I}if(l&&f!==null)throw Error(n(529,""));return null;case"script":return l=u.async,u=u.src,typeof u=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Bc(u),u=xe(x).hoistableScripts,f=u.get(l),f||(f={type:"script",instance:null,count:0,state:null},u.set(l,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,i))}}function Vc(i){return'href="'+Wr(i)+'"'}function Rd(i){return'link[rel="stylesheet"]['+i+"]"}function P2(i){return p({},i,{"data-precedence":i.precedence,precedence:null})}function dR(i,l,u,f){i.querySelector('link[rel="preload"][as="style"]['+l+"]")?f.loading=1:(l=i.createElement("link"),f.preload=l,l.addEventListener("load",function(){return f.loading|=1}),l.addEventListener("error",function(){return f.loading|=2}),ln(l,"link",u),ie(l),i.head.appendChild(l))}function Bc(i){return'[src="'+Wr(i)+'"]'}function Dd(i){return"script[async]"+i}function L2(i,l,u){if(l.count++,l.instance===null)switch(l.type){case"style":var f=i.querySelector('style[data-href~="'+Wr(u.href)+'"]');if(f)return l.instance=f,ie(f),f;var x=p({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return f=(i.ownerDocument||i).createElement("style"),ie(f),ln(f,"style",x),sm(f,u.precedence,i),l.instance=f;case"stylesheet":x=Vc(u.href);var _=i.querySelector(Rd(x));if(_)return l.state.loading|=4,l.instance=_,ie(_),_;f=P2(u),(x=Oa.get(x))&&Wg(f,x),_=(i.ownerDocument||i).createElement("link"),ie(_);var I=_;return I._p=new Promise(function(V,J){I.onload=V,I.onerror=J}),ln(_,"link",f),l.state.loading|=4,sm(_,u.precedence,i),l.instance=_;case"script":return _=Bc(u.src),(x=i.querySelector(Dd(_)))?(l.instance=x,ie(x),x):(f=u,(x=Oa.get(_))&&(f=p({},u),Yg(f,x)),i=i.ownerDocument||i,x=i.createElement("script"),ie(x),ln(x,"link",f),i.head.appendChild(x),l.instance=x);case"void":return null;default:throw Error(n(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(f=l.instance,l.state.loading|=4,sm(f,u.precedence,i));return l.instance}function sm(i,l,u){for(var f=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=f.length?f[f.length-1]:null,_=x,I=0;I<f.length;I++){var V=f[I];if(V.dataset.precedence===l)_=V;else if(_!==x)break}_?_.parentNode.insertBefore(i,_.nextSibling):(l=u.nodeType===9?u.head:u,l.insertBefore(i,l.firstChild))}function Wg(i,l){i.crossOrigin==null&&(i.crossOrigin=l.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=l.referrerPolicy),i.title==null&&(i.title=l.title)}function Yg(i,l){i.crossOrigin==null&&(i.crossOrigin=l.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=l.referrerPolicy),i.integrity==null&&(i.integrity=l.integrity)}var im=null;function V2(i,l,u){if(im===null){var f=new Map,x=im=new Map;x.set(u,f)}else x=im,f=x.get(u),f||(f=new Map,x.set(u,f));if(f.has(i))return f;for(f.set(i,null),u=u.getElementsByTagName(i),x=0;x<u.length;x++){var _=u[x];if(!(_[q]||_[ur]||i==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var I=_.getAttribute(l)||"";I=i+I;var V=f.get(I);V?V.push(_):f.set(I,[_])}}return f}function B2(i,l,u){i=i.ownerDocument||i,i.head.insertBefore(u,l==="title"?i.querySelector("head > title"):null)}function hR(i,l,u){if(u===1||l.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;return l.rel==="stylesheet"?(i=l.disabled,typeof l.precedence=="string"&&i==null):!0;case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function U2(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var Id=null;function fR(){}function mR(i,l,u){if(Id===null)throw Error(n(475));var f=Id;if(l.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var x=Vc(u.href),_=i.querySelector(Rd(x));if(_){i=_._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(f.count++,f=om.bind(f),i.then(f,f)),l.state.loading|=4,l.instance=_,ie(_);return}_=i.ownerDocument||i,u=P2(u),(x=Oa.get(x))&&Wg(u,x),_=_.createElement("link"),ie(_);var I=_;I._p=new Promise(function(V,J){I.onload=V,I.onerror=J}),ln(_,"link",u),l.instance=_}f.stylesheets===null&&(f.stylesheets=new Map),f.stylesheets.set(l,i),(i=l.state.preload)&&(l.state.loading&3)===0&&(f.count++,l=om.bind(f),i.addEventListener("load",l),i.addEventListener("error",l))}}function pR(){if(Id===null)throw Error(n(475));var i=Id;return i.stylesheets&&i.count===0&&Kg(i,i.stylesheets),0<i.count?function(l){var u=setTimeout(function(){if(i.stylesheets&&Kg(i,i.stylesheets),i.unsuspend){var f=i.unsuspend;i.unsuspend=null,f()}},6e4);return i.unsuspend=l,function(){i.unsuspend=null,clearTimeout(u)}}:null}function om(){if(this.count--,this.count===0){if(this.stylesheets)Kg(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var lm=null;function Kg(i,l){i.stylesheets=null,i.unsuspend!==null&&(i.count++,lm=new Map,l.forEach(gR,i),lm=null,om.call(i))}function gR(i,l){if(!(l.state.loading&4)){var u=lm.get(i);if(u)var f=u.get(null);else{u=new Map,lm.set(i,u);for(var x=i.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<x.length;_++){var I=x[_];(I.nodeName==="LINK"||I.getAttribute("media")!=="not all")&&(u.set(I.dataset.precedence,I),f=I)}f&&u.set(null,f)}x=l.instance,I=x.getAttribute("data-precedence"),_=u.get(I)||f,_===f&&u.set(null,x),u.set(I,x),this.count++,f=om.bind(this),x.addEventListener("load",f),x.addEventListener("error",f),_?_.parentNode.insertBefore(x,_.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(x,i.firstChild)),l.state.loading|=4}}var kd={$$typeof:P,Provider:null,Consumer:null,_currentValue:Le,_currentValue2:Le,_threadCount:0};function vR(i,l,u,f,x,_,I,V){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Fi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fi(0),this.hiddenUpdates=Fi(null),this.identifierPrefix=f,this.onUncaughtError=x,this.onCaughtError=_,this.onRecoverableError=I,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function z2(i,l,u,f,x,_,I,V,J,ue,Ee,be){return i=new vR(i,l,u,I,V,J,ue,be),l=1,_===!0&&(l|=24),_=ca(3,null,null,l),i.current=_,_.stateNode=i,l=Rp(),l.refCount++,i.pooledCache=l,l.refCount++,_.memoizedState={element:f,isDehydrated:u,cache:l},Op(_),i}function H2(i){return i?(i=vc,i):vc}function q2(i,l,u,f,x,_){x=H2(x),f.context===null?f.context=x:f.pendingContext=x,f=$i(l),f.payload={element:u},_=_===void 0?null:_,_!==null&&(f.callback=_),u=Wi(i,f,l),u!==null&&(ma(u,i,l),cd(u,i,l))}function G2(i,l){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<l?u:l}}function Xg(i,l){G2(i,l),(i=i.alternate)&&G2(i,l)}function $2(i){if(i.tag===13){var l=gc(i,67108864);l!==null&&ma(l,i,67108864),Xg(i,67108864)}}var cm=!0;function xR(i,l,u,f){var x=ge.T;ge.T=null;var _=De.p;try{De.p=2,Qg(i,l,u,f)}finally{De.p=_,ge.T=x}}function yR(i,l,u,f){var x=ge.T;ge.T=null;var _=De.p;try{De.p=8,Qg(i,l,u,f)}finally{De.p=_,ge.T=x}}function Qg(i,l,u,f){if(cm){var x=Jg(f);if(x===null)Lg(i,l,f,um,u),Y2(i,f);else if(ER(x,i,l,u,f))f.stopPropagation();else if(Y2(i,f),l&4&&-1<_R.indexOf(i)){for(;x!==null;){var _=X(x);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var I=qn(_.pendingLanes);if(I!==0){var V=_;for(V.pendingLanes|=2,V.entangledLanes|=2;I;){var J=1<<31-an(I);V.entanglements[1]|=J,I&=~J}Ss(_),(Lt&6)===0&&(Wf=Ue()+500,Sd(0))}}break;case 13:V=gc(_,2),V!==null&&ma(V,_,2),Kf(),Xg(_,2)}if(_=Jg(f),_===null&&Lg(i,l,f,um,u),_===x)break;x=_}x!==null&&f.stopPropagation()}else Lg(i,l,f,null,u)}}function Jg(i){return i=qu(i),Zg(i)}var um=null;function Zg(i){if(um=null,i=K(i),i!==null){var l=o(i);if(l===null)i=null;else{var u=l.tag;if(u===13){if(i=c(l),i!==null)return i;i=null}else if(u===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;i=null}else l!==i&&(i=null)}}return um=i,null}function W2(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(nn()){case Mt:return 2;case er:return 8;case _n:case ac:return 32;case $s:return 268435456;default:return 32}default:return 32}}var ev=!1,io=null,oo=null,lo=null,Od=new Map,Md=new Map,co=[],_R="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Y2(i,l){switch(i){case"focusin":case"focusout":io=null;break;case"dragenter":case"dragleave":oo=null;break;case"mouseover":case"mouseout":lo=null;break;case"pointerover":case"pointerout":Od.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Md.delete(l.pointerId)}}function Fd(i,l,u,f,x,_){return i===null||i.nativeEvent!==_?(i={blockedOn:l,domEventName:u,eventSystemFlags:f,nativeEvent:_,targetContainers:[x]},l!==null&&(l=X(l),l!==null&&$2(l)),i):(i.eventSystemFlags|=f,l=i.targetContainers,x!==null&&l.indexOf(x)===-1&&l.push(x),i)}function ER(i,l,u,f,x){switch(l){case"focusin":return io=Fd(io,i,l,u,f,x),!0;case"dragenter":return oo=Fd(oo,i,l,u,f,x),!0;case"mouseover":return lo=Fd(lo,i,l,u,f,x),!0;case"pointerover":var _=x.pointerId;return Od.set(_,Fd(Od.get(_)||null,i,l,u,f,x)),!0;case"gotpointercapture":return _=x.pointerId,Md.set(_,Fd(Md.get(_)||null,i,l,u,f,x)),!0}return!1}function K2(i){var l=K(i.target);if(l!==null){var u=o(l);if(u!==null){if(l=u.tag,l===13){if(l=c(u),l!==null){i.blockedOn=l,Pu(i.priority,function(){if(u.tag===13){var f=fa();f=Qo(f);var x=gc(u,f);x!==null&&ma(x,u,f),Xg(u,f)}});return}}else if(l===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function dm(i){if(i.blockedOn!==null)return!1;for(var l=i.targetContainers;0<l.length;){var u=Jg(i.nativeEvent);if(u===null){u=i.nativeEvent;var f=new u.constructor(u.type,u);Hu=f,u.target.dispatchEvent(f),Hu=null}else return l=X(u),l!==null&&$2(l),i.blockedOn=u,!1;l.shift()}return!0}function X2(i,l,u){dm(i)&&u.delete(l)}function wR(){ev=!1,io!==null&&dm(io)&&(io=null),oo!==null&&dm(oo)&&(oo=null),lo!==null&&dm(lo)&&(lo=null),Od.forEach(X2),Md.forEach(X2)}function hm(i,l){i.blockedOn===l&&(i.blockedOn=null,ev||(ev=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,wR)))}var fm=null;function Q2(i){fm!==i&&(fm=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){fm===i&&(fm=null);for(var l=0;l<i.length;l+=3){var u=i[l],f=i[l+1],x=i[l+2];if(typeof f!="function"){if(Zg(f||u)===null)continue;break}var _=X(u);_!==null&&(i.splice(l,3),l-=3,Zp(_,{pending:!0,data:x,method:u.method,action:f},f,x))}}))}function Pd(i){function l(J){return hm(J,i)}io!==null&&hm(io,i),oo!==null&&hm(oo,i),lo!==null&&hm(lo,i),Od.forEach(l),Md.forEach(l);for(var u=0;u<co.length;u++){var f=co[u];f.blockedOn===i&&(f.blockedOn=null)}for(;0<co.length&&(u=co[0],u.blockedOn===null);)K2(u),u.blockedOn===null&&co.shift();if(u=(i.ownerDocument||i).$$reactFormReplay,u!=null)for(f=0;f<u.length;f+=3){var x=u[f],_=u[f+1],I=x[_r]||null;if(typeof _=="function")I||Q2(u);else if(I){var V=null;if(_&&_.hasAttribute("formAction")){if(x=_,I=_[_r]||null)V=I.formAction;else if(Zg(x)!==null)continue}else V=I.action;typeof V=="function"?u[f+1]=V:(u.splice(f,3),f-=3),Q2(u)}}}function tv(i){this._internalRoot=i}mm.prototype.render=tv.prototype.render=function(i){var l=this._internalRoot;if(l===null)throw Error(n(409));var u=l.current,f=fa();q2(u,f,i,l,null,null)},mm.prototype.unmount=tv.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var l=i.containerInfo;q2(i.current,2,null,i,null,null),Kf(),l[Ga]=null}};function mm(i){this._internalRoot=i}mm.prototype.unstable_scheduleHydration=function(i){if(i){var l=qa();i={blockedOn:null,target:i,priority:l};for(var u=0;u<co.length&&l!==0&&l<co[u].priority;u++);co.splice(u,0,i),u===0&&K2(i)}};var J2=e.version;if(J2!=="19.1.1")throw Error(n(527,J2,"19.1.1"));De.findDOMNode=function(i){var l=i._reactInternals;if(l===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=m(l),i=i!==null?h(i):null,i=i===null?null:i.stateNode,i};var NR={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:ge,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pm.isDisabled&&pm.supportsFiber)try{Na=pm.inject(NR),Sr=pm}catch{}}return Vd.createRoot=function(i,l){if(!a(i))throw Error(n(299));var u=!1,f="",x=m_,_=p_,I=g_,V=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(f=l.identifierPrefix),l.onUncaughtError!==void 0&&(x=l.onUncaughtError),l.onCaughtError!==void 0&&(_=l.onCaughtError),l.onRecoverableError!==void 0&&(I=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(V=l.unstable_transitionCallbacks)),l=z2(i,1,!1,null,null,u,f,x,_,I,V,null),i[Ga]=l.current,Pg(i),new tv(l)},Vd.hydrateRoot=function(i,l,u){if(!a(i))throw Error(n(299));var f=!1,x="",_=m_,I=p_,V=g_,J=null,ue=null;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(x=u.identifierPrefix),u.onUncaughtError!==void 0&&(_=u.onUncaughtError),u.onCaughtError!==void 0&&(I=u.onCaughtError),u.onRecoverableError!==void 0&&(V=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(J=u.unstable_transitionCallbacks),u.formState!==void 0&&(ue=u.formState)),l=z2(i,1,!0,l,u??null,f,x,_,I,V,J,ue),l.context=H2(null),u=l.current,f=fa(),f=Qo(f),x=$i(f),x.callback=null,Wi(u,x,f),u=f,l.current.lanes=u,cr(l,u),Ss(l),i[Ga]=l.current,Pg(i),new mm(l)},Vd.version="19.1.1",Vd}var lE;function OR(){if(lE)return av.exports;lE=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),av.exports=kR(),av.exports}var MR=OR();const FR=()=>{};var cE={};const hT=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let a=t.charCodeAt(n);a<128?e[r++]=a:a<2048?(e[r++]=a>>6|192,e[r++]=a&63|128):(a&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=a>>18|240,e[r++]=a>>12&63|128,e[r++]=a>>6&63|128,e[r++]=a&63|128):(e[r++]=a>>12|224,e[r++]=a>>6&63|128,e[r++]=a&63|128)}return e},PR=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const a=t[r++];if(a<128)e[n++]=String.fromCharCode(a);else if(a>191&&a<224){const o=t[r++];e[n++]=String.fromCharCode((a&31)<<6|o&63)}else if(a>239&&a<365){const o=t[r++],c=t[r++],d=t[r++],m=((a&7)<<18|(o&63)<<12|(c&63)<<6|d&63)-65536;e[n++]=String.fromCharCode(55296+(m>>10)),e[n++]=String.fromCharCode(56320+(m&1023))}else{const o=t[r++],c=t[r++];e[n++]=String.fromCharCode((a&15)<<12|(o&63)<<6|c&63)}}return e.join("")},fT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<t.length;a+=3){const o=t[a],c=a+1<t.length,d=c?t[a+1]:0,m=a+2<t.length,h=m?t[a+2]:0,p=o>>2,v=(o&3)<<4|d>>4;let y=(d&15)<<2|h>>6,w=h&63;m||(w=64,c||(y=64)),n.push(r[p],r[v],r[y],r[w])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(hT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):PR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<t.length;){const o=r[t.charAt(a++)],d=a<t.length?r[t.charAt(a)]:0;++a;const h=a<t.length?r[t.charAt(a)]:64;++a;const v=a<t.length?r[t.charAt(a)]:64;if(++a,o==null||d==null||h==null||v==null)throw new LR;const y=o<<2|d>>4;if(n.push(y),h!==64){const w=d<<4&240|h>>2;if(n.push(w),v!==64){const N=h<<6&192|v;n.push(N)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class LR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const VR=function(t){const e=hT(t);return fT.encodeByteArray(e,!0)},$m=function(t){return VR(t).replace(/\./g,"")},mT=function(t){try{return fT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function BR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const UR=()=>BR().__FIREBASE_DEFAULTS__,zR=()=>{if(typeof process>"u"||typeof cE>"u")return;const t=cE.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},HR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&mT(t[1]);return e&&JSON.parse(e)},D0=()=>{try{return FR()||UR()||zR()||HR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},pT=t=>D0()?.emulatorHosts?.[t],qR=t=>{const e=pT(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},gT=()=>D0()?.config,vT=t=>D0()?.[`_${t}`];class GR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}function _u(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function xT(t){return(await fetch(t,{credentials:"include"})).ok}function $R(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",a=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[$m(JSON.stringify(r)),$m(JSON.stringify(c)),""].join(".")}const Zd={};function WR(){const t={prod:[],emulator:[]};for(const e of Object.keys(Zd))Zd[e]?t.emulator.push(e):t.prod.push(e);return t}function YR(t){let e=document.getElementById(t),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),r=!0),{created:r,element:e}}let uE=!1;function yT(t,e){if(typeof window>"u"||typeof document>"u"||!_u(window.location.host)||Zd[t]===e||Zd[t]||uE)return;Zd[t]=e;function r(y){return`__firebase__banner__${y}`}const n="__firebase__banner",o=WR().prod.length>0;function c(){const y=document.getElementById(n);y&&y.remove()}function d(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function m(y,w){y.setAttribute("width","24"),y.setAttribute("id",w),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function h(){const y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{uE=!0,c()},y}function p(y,w){y.setAttribute("id",w),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function v(){const y=YR(n),w=r("text"),N=document.getElementById(w)||document.createElement("span"),E=r("learnmore"),T=document.getElementById(E)||document.createElement("a"),j=r("preprendIcon"),O=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){const P=y.element;d(P),p(T,E);const z=h();m(O,j),P.append(O,N,T,z),document.body.appendChild(P)}o?(N.innerText="Preview backend disconnected.",O.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(O.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}function Rn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function KR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Rn())}function XR(){const t=D0()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function QR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function JR(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function ZR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function e4(){const t=Rn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function t4(){return!XR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function r4(){try{return typeof indexedDB=="object"}catch{return!1}}function n4(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(r){e(r)}})}const a4="FirebaseError";class Ii extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=a4,Object.setPrototypeOf(this,Ii.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ih.prototype.create)}}class Ih{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},a=`${this.service}/${e}`,o=this.errors[e],c=o?s4(o,n):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new Ii(a,d,n)}}function s4(t,e){return t.replace(i4,(r,n)=>{const a=e[n];return a!=null?String(a):`<${n}?>`})}const i4=/\{\$([^}]+)}/g;function o4(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ml(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const a of r){if(!n.includes(a))return!1;const o=t[a],c=e[a];if(dE(o)&&dE(c)){if(!Ml(o,c))return!1}else if(o!==c)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function dE(t){return t!==null&&typeof t=="object"}function kh(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(a=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function $d(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[a,o]=n.split("=");e[decodeURIComponent(a)]=decodeURIComponent(o)}}),e}function Wd(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function l4(t,e){const r=new c4(t,e);return r.subscribe.bind(r)}class c4{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let a;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");u4(e,["next","error","complete"])?a=e:a={next:e,error:r,complete:n},a.next===void 0&&(a.next=lv),a.error===void 0&&(a.error=lv),a.complete===void 0&&(a.complete=lv);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function u4(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function lv(){}function rn(t){return t&&t._delegate?t._delegate:t}class Fl{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Cl="[DEFAULT]";class d4{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new GR;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){const r=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(n)return null;throw a}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(f4(e))try{this.getOrInitializeService({instanceIdentifier:Cl})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const o=this.getOrInitializeService({instanceIdentifier:a});n.resolve(o)}catch{}}}}clearInstance(e=Cl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Cl){return this.instances.has(e)}getOptions(e=Cl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[o,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(o);n===d&&c.resolve(a)}return a}onInit(e,r){const n=this.normalizeInstanceIdentifier(r),a=this.onInitCallbacks.get(n)??new Set;a.add(e),this.onInitCallbacks.set(n,a);const o=this.instances.get(n);return o&&e(o,n),()=>{a.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:h4(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Cl){return this.component?this.component.multipleInstances?e:Cl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function h4(t){return t===Cl?void 0:t}function f4(t){return t.instantiationMode==="EAGER"}class m4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new d4(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}var Et;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Et||(Et={}));const p4={debug:Et.DEBUG,verbose:Et.VERBOSE,info:Et.INFO,warn:Et.WARN,error:Et.ERROR,silent:Et.SILENT},g4=Et.INFO,v4={[Et.DEBUG]:"log",[Et.VERBOSE]:"log",[Et.INFO]:"info",[Et.WARN]:"warn",[Et.ERROR]:"error"},x4=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),a=v4[e];if(a)console[a](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class vx{constructor(e){this.name=e,this._logLevel=g4,this._logHandler=x4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Et))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?p4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Et.DEBUG,...e),this._logHandler(this,Et.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Et.VERBOSE,...e),this._logHandler(this,Et.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Et.INFO,...e),this._logHandler(this,Et.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Et.WARN,...e),this._logHandler(this,Et.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Et.ERROR,...e),this._logHandler(this,Et.ERROR,...e)}}const y4=(t,e)=>e.some(r=>t instanceof r);let hE,fE;function _4(){return hE||(hE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function E4(){return fE||(fE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _T=new WeakMap,Ov=new WeakMap,ET=new WeakMap,cv=new WeakMap,xx=new WeakMap;function w4(t){const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("success",o),t.removeEventListener("error",c)},o=()=>{r(jo(t.result)),a()},c=()=>{n(t.error),a()};t.addEventListener("success",o),t.addEventListener("error",c)});return e.then(r=>{r instanceof IDBCursor&&_T.set(r,t)}).catch(()=>{}),xx.set(e,t),e}function N4(t){if(Ov.has(t))return;const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",c),t.removeEventListener("abort",c)},o=()=>{r(),a()},c=()=>{n(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",o),t.addEventListener("error",c),t.addEventListener("abort",c)});Ov.set(t,e)}let Mv={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return Ov.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ET.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return jo(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function T4(t){Mv=t(Mv)}function b4(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(uv(this),e,...r);return ET.set(n,e.sort?e.sort():[e]),jo(n)}:E4().includes(t)?function(...e){return t.apply(uv(this),e),jo(_T.get(this))}:function(...e){return jo(t.apply(uv(this),e))}}function S4(t){return typeof t=="function"?b4(t):(t instanceof IDBTransaction&&N4(t),y4(t,_4())?new Proxy(t,Mv):t)}function jo(t){if(t instanceof IDBRequest)return w4(t);if(cv.has(t))return cv.get(t);const e=S4(t);return e!==t&&(cv.set(t,e),xx.set(e,t)),e}const uv=t=>xx.get(t);function j4(t,e,{blocked:r,upgrade:n,blocking:a,terminated:o}={}){const c=indexedDB.open(t,e),d=jo(c);return n&&c.addEventListener("upgradeneeded",m=>{n(jo(c.result),m.oldVersion,m.newVersion,jo(c.transaction),m)}),r&&c.addEventListener("blocked",m=>r(m.oldVersion,m.newVersion,m)),d.then(m=>{o&&m.addEventListener("close",()=>o()),a&&m.addEventListener("versionchange",h=>a(h.oldVersion,h.newVersion,h))}).catch(()=>{}),d}const C4=["get","getKey","getAll","getAllKeys","count"],A4=["put","add","delete","clear"],dv=new Map;function mE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(dv.get(e))return dv.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,a=A4.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||C4.includes(r)))return;const o=async function(c,...d){const m=this.transaction(c,a?"readwrite":"readonly");let h=m.store;return n&&(h=h.index(d.shift())),(await Promise.all([h[r](...d),a&&m.done]))[0]};return dv.set(e,o),o}T4(t=>({...t,get:(e,r,n)=>mE(e,r)||t.get(e,r,n),has:(e,r)=>!!mE(e,r)||t.has(e,r)}));class R4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(D4(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function D4(t){return t.getComponent()?.type==="VERSION"}const Fv="@firebase/app",pE="0.14.3";const Ni=new vx("@firebase/app"),I4="@firebase/app-compat",k4="@firebase/analytics-compat",O4="@firebase/analytics",M4="@firebase/app-check-compat",F4="@firebase/app-check",P4="@firebase/auth",L4="@firebase/auth-compat",V4="@firebase/database",B4="@firebase/data-connect",U4="@firebase/database-compat",z4="@firebase/functions",H4="@firebase/functions-compat",q4="@firebase/installations",G4="@firebase/installations-compat",$4="@firebase/messaging",W4="@firebase/messaging-compat",Y4="@firebase/performance",K4="@firebase/performance-compat",X4="@firebase/remote-config",Q4="@firebase/remote-config-compat",J4="@firebase/storage",Z4="@firebase/storage-compat",eD="@firebase/firestore",tD="@firebase/ai",rD="@firebase/firestore-compat",nD="firebase",aD="12.3.0";const Pv="[DEFAULT]",sD={[Fv]:"fire-core",[I4]:"fire-core-compat",[O4]:"fire-analytics",[k4]:"fire-analytics-compat",[F4]:"fire-app-check",[M4]:"fire-app-check-compat",[P4]:"fire-auth",[L4]:"fire-auth-compat",[V4]:"fire-rtdb",[B4]:"fire-data-connect",[U4]:"fire-rtdb-compat",[z4]:"fire-fn",[H4]:"fire-fn-compat",[q4]:"fire-iid",[G4]:"fire-iid-compat",[$4]:"fire-fcm",[W4]:"fire-fcm-compat",[Y4]:"fire-perf",[K4]:"fire-perf-compat",[X4]:"fire-rc",[Q4]:"fire-rc-compat",[J4]:"fire-gcs",[Z4]:"fire-gcs-compat",[eD]:"fire-fst",[rD]:"fire-fst-compat",[tD]:"fire-vertex","fire-js":"fire-js",[nD]:"fire-js-all"};const Wm=new Map,iD=new Map,Lv=new Map;function gE(t,e){try{t.container.addComponent(e)}catch(r){Ni.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function du(t){const e=t.name;if(Lv.has(e))return Ni.debug(`There were multiple attempts to register component ${e}.`),!1;Lv.set(e,t);for(const r of Wm.values())gE(r,t);for(const r of iD.values())gE(r,t);return!0}function yx(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function La(t){return t==null?!1:t.settings!==void 0}const oD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Co=new Ih("app","Firebase",oD);class lD{constructor(e,r,n){this._isDeleted=!1,this._options={...e},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Fl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Co.create("app-deleted",{appName:this._name})}}const Eu=aD;function wT(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n={name:Pv,automaticDataCollectionEnabled:!0,...e},a=n.name;if(typeof a!="string"||!a)throw Co.create("bad-app-name",{appName:String(a)});if(r||(r=gT()),!r)throw Co.create("no-options");const o=Wm.get(a);if(o){if(Ml(r,o.options)&&Ml(n,o.config))return o;throw Co.create("duplicate-app",{appName:a})}const c=new m4(a);for(const m of Lv.values())c.addComponent(m);const d=new lD(r,n,c);return Wm.set(a,d),d}function NT(t=Pv){const e=Wm.get(t);if(!e&&t===Pv&&gT())return wT();if(!e)throw Co.create("no-app",{appName:t});return e}function Ao(t,e,r){let n=sD[t]??t;r&&(n+=`-${r}`);const a=n.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const c=[`Unable to register library "${n}" with version "${e}":`];a&&c.push(`library name "${n}" contains illegal characters (whitespace or "/")`),a&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ni.warn(c.join(" "));return}du(new Fl(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}const cD="firebase-heartbeat-database",uD=1,fh="firebase-heartbeat-store";let hv=null;function TT(){return hv||(hv=j4(cD,uD,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(fh)}catch(r){console.warn(r)}}}}).catch(t=>{throw Co.create("idb-open",{originalErrorMessage:t.message})})),hv}async function dD(t){try{const r=(await TT()).transaction(fh),n=await r.objectStore(fh).get(bT(t));return await r.done,n}catch(e){if(e instanceof Ii)Ni.warn(e.message);else{const r=Co.create("idb-get",{originalErrorMessage:e?.message});Ni.warn(r.message)}}}async function vE(t,e){try{const n=(await TT()).transaction(fh,"readwrite");await n.objectStore(fh).put(e,bT(t)),await n.done}catch(r){if(r instanceof Ii)Ni.warn(r.message);else{const n=Co.create("idb-set",{originalErrorMessage:r?.message});Ni.warn(n.message)}}}function bT(t){return`${t.name}!${t.options.appId}`}const hD=1024,fD=30;class mD{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new gD(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=xE();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(a=>a.date===n))return;if(this._heartbeatsCache.heartbeats.push({date:n,agent:r}),this._heartbeatsCache.heartbeats.length>fD){const a=vD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ni.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=xE(),{heartbeatsToSend:r,unsentEntries:n}=pD(this._heartbeatsCache.heartbeats),a=$m(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return Ni.warn(e),""}}}function xE(){return new Date().toISOString().substring(0,10)}function pD(t,e=hD){const r=[];let n=t.slice();for(const a of t){const o=r.find(c=>c.agent===a.agent);if(o){if(o.dates.push(a.date),yE(r)>e){o.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),yE(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class gD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return r4()?n4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await dD(this.app);return r?.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return vE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return vE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function yE(t){return $m(JSON.stringify({version:2,heartbeats:t})).length}function vD(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let n=1;n<t.length;n++)t[n].date<r&&(r=t[n].date,e=n);return e}function xD(t){du(new Fl("platform-logger",e=>new R4(e),"PRIVATE")),du(new Fl("heartbeat",e=>new mD(e),"PRIVATE")),Ao(Fv,pE,t),Ao(Fv,pE,"esm2020"),Ao("fire-js","")}xD("");var yD="firebase",_D="12.3.0";Ao(yD,_D,"app");function ST(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ED=ST,jT=new Ih("auth","Firebase",ST());const Ym=new vx("@firebase/auth");function wD(t,...e){Ym.logLevel<=Et.WARN&&Ym.warn(`Auth (${Eu}): ${t}`,...e)}function km(t,...e){Ym.logLevel<=Et.ERROR&&Ym.error(`Auth (${Eu}): ${t}`,...e)}function cs(t,...e){throw _x(t,...e)}function ks(t,...e){return _x(t,...e)}function CT(t,e,r){const n={...ED(),[e]:r};return new Ih("auth","Firebase",n).create(e,{appName:t.name})}function vi(t){return CT(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _x(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return jT.create(t,...e)}function st(t,e,...r){if(!t)throw _x(e,...r)}function pi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw km(e),new Error(e)}function Ti(t,e){t||pi(e)}function Vv(){return typeof self<"u"&&self.location?.href||""}function ND(){return _E()==="http:"||_E()==="https:"}function _E(){return typeof self<"u"&&self.location?.protocol||null}function TD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ND()||JR()||"connection"in navigator)?navigator.onLine:!0}function bD(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class Oh{constructor(e,r){this.shortDelay=e,this.longDelay=r,Ti(r>e,"Short delay should be less than long delay!"),this.isMobile=KR()||ZR()}get(){return TD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ex(t,e){Ti(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}class AT{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;pi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;pi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;pi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const SD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const jD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],CD=new Oh(3e4,6e4);function qo(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Go(t,e,r,n,a={}){return RT(t,a,async()=>{let o={},c={};n&&(e==="GET"?c=n:o={body:JSON.stringify(n)});const d=kh({key:t.config.apiKey,...c}).slice(1),m=await t._getAdditionalHeaders();m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode);const h={method:e,headers:m,...o};return QR()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&_u(t.emulatorConfig.host)&&(h.credentials="include"),AT.fetch()(await DT(t,t.config.apiHost,r,d),h)})}async function RT(t,e,r){t._canInitEmulator=!1;const n={...SD,...e};try{const a=new RD(t),o=await Promise.race([r(),a.promise]);a.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw gm(t,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const d=o.ok?c.errorMessage:c.error.message,[m,h]=d.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw gm(t,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw gm(t,"email-already-in-use",c);if(m==="USER_DISABLED")throw gm(t,"user-disabled",c);const p=n[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw CT(t,p,h);cs(t,p)}}catch(a){if(a instanceof Ii)throw a;cs(t,"network-request-failed",{message:String(a)})}}async function Mh(t,e,r,n,a={}){const o=await Go(t,e,r,n,a);return"mfaPendingCredential"in o&&cs(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function DT(t,e,r,n){const a=`${e}${r}?${n}`,o=t,c=o.config.emulator?Ex(t.config,a):`${t.config.apiScheme}://${a}`;return jD.includes(r)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}function AD(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class RD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(ks(this.auth,"network-request-failed")),CD.get())})}}function gm(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const a=ks(t,e,n);return a.customData._tokenResponse=r,a}function EE(t){return t!==void 0&&t.enterprise!==void 0}class DD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return AD(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function ID(t,e){return Go(t,"GET","/v2/recaptchaConfig",qo(t,e))}async function kD(t,e){return Go(t,"POST","/v1/accounts:delete",e)}async function Km(t,e){return Go(t,"POST","/v1/accounts:lookup",e)}function eh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function OD(t,e=!1){const r=rn(t),n=await r.getIdToken(e),a=wx(n);st(a&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error");const o=typeof a.firebase=="object"?a.firebase:void 0,c=o?.sign_in_provider;return{claims:a,token:n,authTime:eh(fv(a.auth_time)),issuedAtTime:eh(fv(a.iat)),expirationTime:eh(fv(a.exp)),signInProvider:c||null,signInSecondFactor:o?.sign_in_second_factor||null}}function fv(t){return Number(t)*1e3}function wx(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return km("JWT malformed, contained fewer than 3 sections"),null;try{const a=mT(r);return a?JSON.parse(a):(km("Failed to decode base64 JWT payload"),null)}catch(a){return km("Caught error parsing JWT payload as JSON",a?.toString()),null}}function wE(t){const e=wx(t);return st(e,"internal-error"),st(typeof e.exp<"u","internal-error"),st(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function mh(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof Ii&&MD(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function MD({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class FD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Bv{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=eh(this.lastLoginAt),this.creationTime=eh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Xm(t){const e=t.auth,r=await t.getIdToken(),n=await mh(t,Km(e,{idToken:r}));st(n?.users.length,e,"internal-error");const a=n.users[0];t._notifyReloadListener(a);const o=a.providerUserInfo?.length?IT(a.providerUserInfo):[],c=LD(t.providerData,o),d=t.isAnonymous,m=!(t.email&&a.passwordHash)&&!c?.length,h=d?m:!1,p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new Bv(a.createdAt,a.lastLoginAt),isAnonymous:h};Object.assign(t,p)}async function PD(t){const e=rn(t);await Xm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function LD(t,e){return[...t.filter(n=>!e.some(a=>a.providerId===n.providerId)),...e]}function IT(t){return t.map(({providerId:e,...r})=>({providerId:e,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}async function VD(t,e){const r=await RT(t,{},async()=>{const n=kh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:o}=t.config,c=await DT(t,a,"/v1/token",`key=${o}`),d=await t._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:d,body:n};return t.emulatorConfig&&_u(t.emulatorConfig.host)&&(m.credentials="include"),AT.fetch()(c,m)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function BD(t,e){return Go(t,"POST","/v2/accounts:revokeToken",qo(t,e))}class tu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){st(e.idToken,"internal-error"),st(typeof e.idToken<"u","internal-error"),st(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):wE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){st(e.length!==0,"internal-error");const r=wE(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(st(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:a,expiresIn:o}=await VD(e,r);this.updateTokensAndExpiration(n,a,Number(o))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:a,expirationTime:o}=r,c=new tu;return n&&(st(typeof n=="string","internal-error",{appName:e}),c.refreshToken=n),a&&(st(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),o&&(st(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new tu,this.toJSON())}_performRefresh(){return pi("not implemented")}}function ho(t,e){st(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ss{constructor({uid:e,auth:r,stsTokenManager:n,...a}){this.providerId="firebase",this.proactiveRefresh=new FD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Bv(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const r=await mh(this,this.stsTokenManager.getToken(this.auth,e));return st(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return OD(this,e)}reload(){return PD(this)}_assign(e){this!==e&&(st(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>({...r})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new ss({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(e){st(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await Xm(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(La(this.auth.app))return Promise.reject(vi(this.auth));const e=await this.getIdToken();return await mh(this,kD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){const n=r.displayName??void 0,a=r.email??void 0,o=r.phoneNumber??void 0,c=r.photoURL??void 0,d=r.tenantId??void 0,m=r._redirectEventId??void 0,h=r.createdAt??void 0,p=r.lastLoginAt??void 0,{uid:v,emailVerified:y,isAnonymous:w,providerData:N,stsTokenManager:E}=r;st(v&&E,e,"internal-error");const T=tu.fromJSON(this.name,E);st(typeof v=="string",e,"internal-error"),ho(n,e.name),ho(a,e.name),st(typeof y=="boolean",e,"internal-error"),st(typeof w=="boolean",e,"internal-error"),ho(o,e.name),ho(c,e.name),ho(d,e.name),ho(m,e.name),ho(h,e.name),ho(p,e.name);const j=new ss({uid:v,auth:e,email:a,emailVerified:y,displayName:n,isAnonymous:w,photoURL:c,phoneNumber:o,tenantId:d,stsTokenManager:T,createdAt:h,lastLoginAt:p});return N&&Array.isArray(N)&&(j.providerData=N.map(O=>({...O}))),m&&(j._redirectEventId=m),j}static async _fromIdTokenResponse(e,r,n=!1){const a=new tu;a.updateFromServerResponse(r);const o=new ss({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:n});return await Xm(o),o}static async _fromGetAccountInfoResponse(e,r,n){const a=r.users[0];st(a.localId!==void 0,"internal-error");const o=a.providerUserInfo!==void 0?IT(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!o?.length,d=new tu;d.updateFromIdToken(n);const m=new ss({uid:a.localId,auth:e,stsTokenManager:d,isAnonymous:c}),h={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new Bv(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!o?.length};return Object.assign(m,h),m}}const NE=new Map;function gi(t){Ti(t instanceof Function,"Expected a class definition");let e=NE.get(t);return e?(Ti(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,NE.set(t,e),e)}class kT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}kT.type="NONE";const TE=kT;function Om(t,e,r){return`firebase:${t}:${e}:${r}`}class ru{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:a,name:o}=this.auth;this.fullUserKey=Om(this.userKey,a.apiKey,o),this.fullPersistenceKey=Om("persistence",a.apiKey,o),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const r=await Km(this.auth,{idToken:e}).catch(()=>{});return r?ss._fromGetAccountInfoResponse(this.auth,r,e):null}return ss._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new ru(gi(TE),e,n);const a=(await Promise.all(r.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let o=a[0]||gi(TE);const c=Om(n,e.config.apiKey,e.name);let d=null;for(const h of r)try{const p=await h._get(c);if(p){let v;if(typeof p=="string"){const y=await Km(e,{idToken:p}).catch(()=>{});if(!y)break;v=await ss._fromGetAccountInfoResponse(e,y,p)}else v=ss._fromJSON(e,p);h!==o&&(d=v),o=h;break}}catch{}const m=a.filter(h=>h._shouldAllowMigration);return!o._shouldAllowMigration||!m.length?new ru(o,e,n):(o=m[0],d&&await o._set(c,d.toJSON()),await Promise.all(r.map(async h=>{if(h!==o)try{await h._remove(c)}catch{}})),new ru(o,e,n))}}function bE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(PT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(OT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(VT(e))return"Blackberry";if(BT(e))return"Webos";if(MT(e))return"Safari";if((e.includes("chrome/")||FT(e))&&!e.includes("edge/"))return"Chrome";if(LT(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if(n?.length===2)return n[1]}return"Other"}function OT(t=Rn()){return/firefox\//i.test(t)}function MT(t=Rn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function FT(t=Rn()){return/crios\//i.test(t)}function PT(t=Rn()){return/iemobile/i.test(t)}function LT(t=Rn()){return/android/i.test(t)}function VT(t=Rn()){return/blackberry/i.test(t)}function BT(t=Rn()){return/webos/i.test(t)}function Nx(t=Rn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function UD(t=Rn()){return Nx(t)&&!!window.navigator?.standalone}function zD(){return e4()&&document.documentMode===10}function UT(t=Rn()){return Nx(t)||LT(t)||BT(t)||VT(t)||/windows phone/i.test(t)||PT(t)}function zT(t,e=[]){let r;switch(t){case"Browser":r=bE(Rn());break;case"Worker":r=`${bE(Rn())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Eu}/${n}`}class HD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=o=>new Promise((c,d)=>{try{const m=e(o);c(m)}catch(m){d(m)}});n.onAbort=r,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const a of r)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}}}async function qD(t,e={}){return Go(t,"GET","/v2/passwordPolicy",qo(t,e))}const GD=6;class $D{constructor(e){const r=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??GD,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,r),this.validatePasswordCharacterOptions(e,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),a&&(r.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let a=0;a<e.length;a++)n=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,a,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class WD{constructor(e,r,n,a){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new SE(this),this.idTokenSubscription=new SE(this),this.beforeStateQueue=new HD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=jT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=gi(r)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await ru.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await Km(this,{idToken:e}),n=await ss._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(La(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,c=n?._redirectEventId,d=await this.tryRedirectSignIn(e);(!o||o===c)&&d?.user&&(n=d.user,a=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(n)}catch(o){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return st(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await Xm(e)}catch(r){if(r?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=bD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(La(this.app))return Promise.reject(vi(this));const r=e?rn(e):null;return r&&st(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&st(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return La(this.app)?Promise.reject(vi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return La(this.app)?Promise.reject(vi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(gi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await qD(this),r=new $D(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ih("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await BD(this,n)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&gi(e)||this._popupRedirectResolver;st(r,this,"argument-error"),this.redirectPersistenceManager=await ru.create(this,[gi(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,a){if(this._deleted)return()=>{};const o=typeof r=="function"?r:r.next.bind(r);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(st(d,this,"internal-error"),d.then(()=>{c||o(this.currentUser)}),typeof r=="function"){const m=e.addObserver(r,n,a);return()=>{c=!0,m()}}else{const m=e.addObserver(r);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return st(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=zT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const r=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();r&&(e["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){if(La(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&wD(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Gl(t){return rn(t)}class SE{constructor(e){this.auth=e,this.observer=null,this.addObserver=l4(r=>this.observer=r)}get next(){return st(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let I0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function YD(t){I0=t}function HT(t){return I0.loadJS(t)}function KD(){return I0.recaptchaEnterpriseScript}function XD(){return I0.gapiScript}function QD(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class JD{constructor(){this.enterprise=new ZD}ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}class ZD{ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}const eI="recaptcha-enterprise",qT="NO_RECAPTCHA";class tI{constructor(e){this.type=eI,this.auth=Gl(e)}async verify(e="verify",r=!1){async function n(o){if(!r){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(c,d)=>{ID(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const h=new DD(m);return o.tenantId==null?o._agentRecaptchaConfig=h:o._tenantRecaptchaConfigs[o.tenantId]=h,c(h.siteKey)}}).catch(m=>{d(m)})})}function a(o,c,d){const m=window.grecaptcha;EE(m)?m.enterprise.ready(()=>{m.enterprise.execute(o,{action:e}).then(h=>{c(h)}).catch(()=>{c(qT)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new JD().execute("siteKey",{action:"verify"}):new Promise((o,c)=>{n(this.auth).then(d=>{if(!r&&EE(window.grecaptcha))a(d,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let m=KD();m.length!==0&&(m+=d),HT(m).then(()=>{a(d,o,c)}).catch(h=>{c(h)})}}).catch(d=>{c(d)})})}}async function jE(t,e,r,n=!1,a=!1){const o=new tI(t);let c;if(a)c=qT;else try{c=await o.verify(r)}catch{c=await o.verify(r,!0)}const d={...e};if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const m=d.phoneEnrollmentInfo.phoneNumber,h=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:h,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const m=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return n?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Uv(t,e,r,n,a){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await jE(t,e,r,r==="getOobCode");return n(t,o)}else return n(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await jE(t,e,r,r==="getOobCode");return n(t,c)}else return Promise.reject(o)})}function rI(t,e){const r=yx(t,"auth");if(r.isInitialized()){const a=r.getImmediate(),o=r.getOptions();if(Ml(o,e??{}))return a;cs(a,"already-initialized")}return r.initialize({options:e})}function nI(t,e){const r=e?.persistence||[],n=(Array.isArray(r)?r:[r]).map(gi);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e?.popupRedirectResolver)}function aI(t,e,r){const n=Gl(t);st(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const a=!1,o=GT(e),{host:c,port:d}=sI(e),m=d===null?"":`:${d}`,h={url:`${o}//${c}${m}/`},p=Object.freeze({host:c,port:d,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!n._canInitEmulator){st(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),st(Ml(h,n.config.emulator)&&Ml(p,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=h,n.emulatorConfig=p,n.settings.appVerificationDisabledForTesting=!0,_u(c)?(xT(`${o}//${c}${m}`),yT("Auth",!0)):iI()}function GT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function sI(t){const e=GT(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const o=a[1];return{host:o,port:CE(n.substr(o.length+1))}}else{const[o,c]=n.split(":");return{host:o,port:CE(c)}}}function CE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function iI(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class Tx{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return pi("not implemented")}_getIdTokenResponse(e){return pi("not implemented")}_linkToIdToken(e,r){return pi("not implemented")}_getReauthenticationResolver(e){return pi("not implemented")}}async function oI(t,e){return Go(t,"POST","/v1/accounts:signUp",e)}async function lI(t,e){return Mh(t,"POST","/v1/accounts:signInWithPassword",qo(t,e))}async function cI(t,e){return Mh(t,"POST","/v1/accounts:signInWithEmailLink",qo(t,e))}async function uI(t,e){return Mh(t,"POST","/v1/accounts:signInWithEmailLink",qo(t,e))}class ph extends Tx{constructor(e,r,n,a=null){super("password",n),this._email=e,this._password=r,this._tenantId=a}static _fromEmailAndPassword(e,r){return new ph(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new ph(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r?.email&&r?.password){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Uv(e,r,"signInWithPassword",lI);case"emailLink":return cI(e,{email:this._email,oobCode:this._password});default:cs(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Uv(e,n,"signUpPassword",oI);case"emailLink":return uI(e,{idToken:r,email:this._email,oobCode:this._password});default:cs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function nu(t,e){return Mh(t,"POST","/v1/accounts:signInWithIdp",qo(t,e))}const dI="http://localhost";class Pl extends Tx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Pl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):cs("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:a,...o}=r;if(!n||!a)return null;const c=new Pl(n,a);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){const r=this.buildRequest();return nu(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,nu(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,nu(e,r)}buildRequest(){const e={requestUri:dI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=kh(r)}return e}}function hI(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function fI(t){const e=$d(Wd(t)).link,r=e?$d(Wd(e)).deep_link_id:null,n=$d(Wd(t)).deep_link_id;return(n?$d(Wd(n)).link:null)||n||r||e||t}class bx{constructor(e){const r=$d(Wd(e)),n=r.apiKey??null,a=r.oobCode??null,o=hI(r.mode??null);st(n&&a&&o,"argument-error"),this.apiKey=n,this.operation=o,this.code=a,this.continueUrl=r.continueUrl??null,this.languageCode=r.lang??null,this.tenantId=r.tenantId??null}static parseLink(e){const r=fI(e);try{return new bx(r)}catch{return null}}}class wu{constructor(){this.providerId=wu.PROVIDER_ID}static credential(e,r){return ph._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=bx.parseLink(r);return st(n,"argument-error"),ph._fromEmailAndCode(e,n.code,n.tenantId)}}wu.PROVIDER_ID="password";wu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";wu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class $T{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Fh extends $T{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class xo extends Fh{constructor(){super("facebook.com")}static credential(e){return Pl._fromParams({providerId:xo.PROVIDER_ID,signInMethod:xo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xo.credentialFromTaggedObject(e)}static credentialFromError(e){return xo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xo.credential(e.oauthAccessToken)}catch{return null}}}xo.FACEBOOK_SIGN_IN_METHOD="facebook.com";xo.PROVIDER_ID="facebook.com";class yo extends Fh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Pl._fromParams({providerId:yo.PROVIDER_ID,signInMethod:yo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return yo.credentialFromTaggedObject(e)}static credentialFromError(e){return yo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return yo.credential(r,n)}catch{return null}}}yo.GOOGLE_SIGN_IN_METHOD="google.com";yo.PROVIDER_ID="google.com";class _o extends Fh{constructor(){super("github.com")}static credential(e){return Pl._fromParams({providerId:_o.PROVIDER_ID,signInMethod:_o.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _o.credentialFromTaggedObject(e)}static credentialFromError(e){return _o.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _o.credential(e.oauthAccessToken)}catch{return null}}}_o.GITHUB_SIGN_IN_METHOD="github.com";_o.PROVIDER_ID="github.com";class Eo extends Fh{constructor(){super("twitter.com")}static credential(e,r){return Pl._fromParams({providerId:Eo.PROVIDER_ID,signInMethod:Eo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return Eo.credentialFromTaggedObject(e)}static credentialFromError(e){return Eo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return Eo.credential(r,n)}catch{return null}}}Eo.TWITTER_SIGN_IN_METHOD="twitter.com";Eo.PROVIDER_ID="twitter.com";async function mI(t,e){return Mh(t,"POST","/v1/accounts:signUp",qo(t,e))}class Ll{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,a=!1){const o=await ss._fromIdTokenResponse(e,n,a),c=AE(n);return new Ll({user:o,providerId:c,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const a=AE(n);return new Ll({user:e,providerId:a,_tokenResponse:n,operationType:r})}}function AE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class Qm extends Ii{constructor(e,r,n,a){super(r.code,r.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,Qm.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,a){return new Qm(e,r,n,a)}}function WT(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Qm._fromErrorAndOperation(t,o,e,n):o})}async function pI(t,e,r=!1){const n=await mh(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Ll._forOperation(t,"link",n)}async function gI(t,e,r=!1){const{auth:n}=t;if(La(n.app))return Promise.reject(vi(n));const a="reauthenticate";try{const o=await mh(t,WT(n,a,e,t),r);st(o.idToken,n,"internal-error");const c=wx(o.idToken);st(c,n,"internal-error");const{sub:d}=c;return st(t.uid===d,n,"user-mismatch"),Ll._forOperation(t,a,o)}catch(o){throw o?.code==="auth/user-not-found"&&cs(n,"user-mismatch"),o}}async function YT(t,e,r=!1){if(La(t.app))return Promise.reject(vi(t));const n="signIn",a=await WT(t,n,e),o=await Ll._fromIdTokenResponse(t,n,a);return r||await t._updateCurrentUser(o.user),o}async function vI(t,e){return YT(Gl(t),e)}async function KT(t){const e=Gl(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function xI(t,e,r){if(La(t.app))return Promise.reject(vi(t));const n=Gl(t),c=await Uv(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",mI).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&KT(t),m}),d=await Ll._fromIdTokenResponse(n,"signIn",c);return await n._updateCurrentUser(d.user),d}function yI(t,e,r){return La(t.app)?Promise.reject(vi(t)):vI(rn(t),wu.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&KT(t),n})}function _I(t,e,r,n){return rn(t).onIdTokenChanged(e,r,n)}function EI(t,e,r){return rn(t).beforeAuthStateChanged(e,r)}function wI(t,e,r,n){return rn(t).onAuthStateChanged(e,r,n)}function NI(t){return rn(t).signOut()}const Jm="__sak";class XT{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Jm,"1"),this.storage.removeItem(Jm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const TI=1e3,bI=10;class QT extends XT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=UT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),a=this.localCache[r];n!==a&&e(r,a,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((c,d,m)=>{this.notifyListeners(c,m)});return}const n=e.key;r?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(n);!r&&this.localCache[n]===c||this.notifyListeners(n,c)},o=this.storage.getItem(n);zD()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,bI):a()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},TI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}QT.type="LOCAL";const SI=QT;class JT extends XT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}JT.type="SESSION";const ZT=JT;function jI(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}class k0{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(a=>a.isListeningto(e));if(r)return r;const n=new k0(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:a,data:o}=r.data,c=this.handlersMap[a];if(!c?.size)return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const d=Array.from(c).map(async h=>h(r.origin,o)),m=await jI(d);r.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:m})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}k0.receivers=[];function Sx(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}class CI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let o,c;return new Promise((d,m)=>{const h=Sx("",20);a.port1.start();const p=setTimeout(()=>{m(new Error("unsupported_event"))},n);c={messageChannel:a,onMessage(v){const y=v;if(y.data.eventId===h)switch(y.data.status){case"ack":clearTimeout(p),o=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),d(y.data.response);break;default:clearTimeout(p),clearTimeout(o),m(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:h,data:r},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function Os(){return window}function AI(t){Os().location.href=t}function eb(){return typeof Os().WorkerGlobalScope<"u"&&typeof Os().importScripts=="function"}async function RI(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function DI(){return navigator?.serviceWorker?.controller||null}function II(){return eb()?self:null}const tb="firebaseLocalStorageDb",kI=1,Zm="firebaseLocalStorage",rb="fbase_key";class Ph{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function O0(t,e){return t.transaction([Zm],e?"readwrite":"readonly").objectStore(Zm)}function OI(){const t=indexedDB.deleteDatabase(tb);return new Ph(t).toPromise()}function zv(){const t=indexedDB.open(tb,kI);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(Zm,{keyPath:rb})}catch(a){r(a)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(Zm)?e(n):(n.close(),await OI(),e(await zv()))})})}async function RE(t,e,r){const n=O0(t,!0).put({[rb]:e,value:r});return new Ph(n).toPromise()}async function MI(t,e){const r=O0(t,!1).get(e),n=await new Ph(r).toPromise();return n===void 0?null:n.value}function DE(t,e){const r=O0(t,!0).delete(e);return new Ph(r).toPromise()}const FI=800,PI=3;class nb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await zv(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>PI)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return eb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=k0._getInstance(II()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await RI(),!this.activeServiceWorker)return;this.sender=new CI(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||DI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await zv();return await RE(e,Jm,"1"),await DE(e,Jm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>RE(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>MI(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>DE(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const o=O0(a,!1).getAll();return new Ph(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:a,value:o}of e)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(o)&&(this.notifyListeners(a,o),r.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),r.push(a));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),FI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}nb.type="LOCAL";const LI=nb;new Oh(3e4,6e4);function VI(t,e){return e?gi(e):(st(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class jx extends Tx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return nu(e,this._buildIdpRequest())}_linkToIdToken(e,r){return nu(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return nu(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function BI(t){return YT(t.auth,new jx(t),t.bypassAuthState)}function UI(t){const{auth:e,user:r}=t;return st(r,e,"internal-error"),gI(r,new jx(t),t.bypassAuthState)}async function zI(t){const{auth:e,user:r}=t;return st(r,e,"internal-error"),pI(r,new jx(t),t.bypassAuthState)}class ab{constructor(e,r,n,a,o=!1){this.auth=e,this.resolver=n,this.user=a,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:a,tenantId:o,error:c,type:d}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:r,sessionId:n,tenantId:o||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(m))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return BI;case"linkViaPopup":case"linkViaRedirect":return zI;case"reauthViaPopup":case"reauthViaRedirect":return UI;default:cs(this.auth,"internal-error")}}resolve(e){Ti(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ti(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const HI=new Oh(2e3,1e4);class Zc extends ab{constructor(e,r,n,a,o){super(e,r,a,o),this.provider=n,this.authWindow=null,this.pollId=null,Zc.currentPopupAction&&Zc.currentPopupAction.cancel(),Zc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return st(e,this.auth,"internal-error"),e}async onExecution(){Ti(this.filter.length===1,"Popup operations only handle one event");const e=Sx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(ks(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ks(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Zc.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ks(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,HI.get())};e()}}Zc.currentPopupAction=null;const qI="pendingRedirect",Mm=new Map;class GI extends ab{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=Mm.get(this.auth._key());if(!e){try{const n=await $I(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}Mm.set(this.auth._key(),e)}return this.bypassAuthState||Mm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function $I(t,e){const r=KI(e),n=YI(t);if(!await n._isAvailable())return!1;const a=await n._get(r)==="true";return await n._remove(r),a}function WI(t,e){Mm.set(t._key(),e)}function YI(t){return gi(t._redirectPersistence)}function KI(t){return Om(qI,t.config.apiKey,t.name)}async function XI(t,e,r=!1){if(La(t.app))return Promise.reject(vi(t));const n=Gl(t),a=VI(n,e),c=await new GI(n,a,r).execute();return c&&!r&&(delete c.user._redirectEventId,await n._persistUserIfCurrent(c.user),await n._setRedirectUser(null,e)),c}const QI=600*1e3;class JI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ZI(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){if(e.error&&!sb(e)){const n=e.error.code?.split("auth/")[1]||"internal-error";r.onError(ks(this.auth,n))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=QI&&this.cachedEventUids.clear(),this.cachedEventUids.has(IE(e))}saveEventToCache(e){this.cachedEventUids.add(IE(e)),this.lastProcessedEventTime=Date.now()}}function IE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function sb({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function ZI(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return sb(t);default:return!1}}async function e3(t,e={}){return Go(t,"GET","/v1/projects",e)}const t3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,r3=/^https?/;async function n3(t){if(t.config.emulator)return;const{authorizedDomains:e}=await e3(t);for(const r of e)try{if(a3(r))return}catch{}cs(t,"unauthorized-domain")}function a3(t){const e=Vv(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const c=new URL(t);return c.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&c.hostname===n}if(!r3.test(r))return!1;if(t3.test(t))return n===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}const s3=new Oh(3e4,6e4);function kE(){const t=Os().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function i3(t){return new Promise((e,r)=>{function n(){kE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{kE(),r(ks(t,"network-request-failed"))},timeout:s3.get()})}if(Os().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Os().gapi?.load)n();else{const a=QD("iframefcb");return Os()[a]=()=>{gapi.load?n():r(ks(t,"network-request-failed"))},HT(`${XD()}?onload=${a}`).catch(o=>r(o))}}).catch(e=>{throw Fm=null,e})}let Fm=null;function o3(t){return Fm=Fm||i3(t),Fm}const l3=new Oh(5e3,15e3),c3="__/auth/iframe",u3="emulator/auth/iframe",d3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},h3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function f3(t){const e=t.config;st(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?Ex(e,u3):`https://${t.config.authDomain}/${c3}`,n={apiKey:e.apiKey,appName:t.name,v:Eu},a=h3.get(t.config.apiHost);a&&(n.eid=a);const o=t._getFrameworks();return o.length&&(n.fw=o.join(",")),`${r}?${kh(n).slice(1)}`}async function m3(t){const e=await o3(t),r=Os().gapi;return st(r,t,"internal-error"),e.open({where:document.body,url:f3(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:d3,dontclear:!0},n=>new Promise(async(a,o)=>{await n.restyle({setHideOnLeave:!1});const c=ks(t,"network-request-failed"),d=Os().setTimeout(()=>{o(c)},l3.get());function m(){Os().clearTimeout(d),a(n)}n.ping(m).then(m,()=>{o(c)})}))}const p3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},g3=500,v3=600,x3="_blank",y3="http://localhost";class OE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _3(t,e,r,n=g3,a=v3){const o=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-n)/2,0).toString();let d="";const m={...p3,width:n.toString(),height:a.toString(),top:o,left:c},h=Rn().toLowerCase();r&&(d=FT(h)?x3:r),OT(h)&&(e=e||y3,m.scrollbars="yes");const p=Object.entries(m).reduce((y,[w,N])=>`${y}${w}=${N},`,"");if(UD(h)&&d!=="_self")return E3(e||"",d),new OE(null);const v=window.open(e||"",d,p);st(v,t,"popup-blocked");try{v.focus()}catch{}return new OE(v)}function E3(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}const w3="__/auth/handler",N3="emulator/auth/handler",T3=encodeURIComponent("fac");async function ME(t,e,r,n,a,o){st(t.config.authDomain,t,"auth-domain-config-required"),st(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:Eu,eventId:a};if(e instanceof $T){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",o4(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,v]of Object.entries({}))c[p]=v}if(e instanceof Fh){const p=e.getScopes().filter(v=>v!=="");p.length>0&&(c.scopes=p.join(","))}t.tenantId&&(c.tid=t.tenantId);const d=c;for(const p of Object.keys(d))d[p]===void 0&&delete d[p];const m=await t._getAppCheckToken(),h=m?`#${T3}=${encodeURIComponent(m)}`:"";return`${b3(t)}?${kh(d).slice(1)}${h}`}function b3({config:t}){return t.emulator?Ex(t,N3):`https://${t.authDomain}/${w3}`}const mv="webStorageSupport";class S3{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ZT,this._completeRedirectFn=XI,this._overrideRedirectResult=WI}async _openPopup(e,r,n,a){Ti(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await ME(e,r,n,Vv(),a);return _3(e,o,Sx())}async _openRedirect(e,r,n,a){await this._originValidation(e);const o=await ME(e,r,n,Vv(),a);return AI(o),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:a,promise:o}=this.eventManagers[r];return a?Promise.resolve(a):(Ti(o,"If manager is not set, promise should be"),o)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await m3(e),n=new JI(e);return r.register("authEvent",a=>(st(a?.authEvent,e,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(mv,{type:mv},a=>{const o=a?.[0]?.[mv];o!==void 0&&r(!!o),cs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=n3(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return UT()||MT()||Nx()}}const j3=S3;var FE="@firebase/auth",PE="1.11.0";class C3{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e(n?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){st(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function A3(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function R3(t){du(new Fl("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=n.options;st(c&&!c.includes(":"),"invalid-api-key",{appName:n.name});const m={apiKey:c,authDomain:d,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zT(t)},h=new WD(n,a,o,m);return nI(h,r),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),du(new Fl("auth-internal",e=>{const r=Gl(e.getProvider("auth").getImmediate());return(n=>new C3(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ao(FE,PE,A3(t)),Ao(FE,PE,"esm2020")}const D3=300,I3=vT("authIdTokenMaxAge")||D3;let LE=null;const k3=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>I3)return;const a=r?.token;LE!==a&&(LE=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function O3(t=NT()){const e=yx(t,"auth");if(e.isInitialized())return e.getImmediate();const r=rI(t,{popupRedirectResolver:j3,persistence:[LI,SI,ZT]}),n=vT("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(n,location.origin);if(location.origin===o.origin){const c=k3(o.toString());EI(r,c,()=>c(r.currentUser)),_I(r,d=>c(d))}}const a=pT("auth");return a&&aI(r,`http://${a}`),r}function M3(){return document.getElementsByTagName("head")?.[0]??document}YD({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=a=>{const o=ks("internal-error");o.customData=a,r(o)},n.type="text/javascript",n.charset="UTF-8",M3().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});R3("Browser");var VE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ro,ib;(function(){var t;function e(C,k){function S(){}S.prototype=k.prototype,C.F=k.prototype,C.prototype=new S,C.prototype.constructor=C,C.D=function(F,M,A){for(var D=Array(arguments.length-2),we=2;we<arguments.length;we++)D[we-2]=arguments[we];return k.prototype[M].apply(F,D)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,r),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(C,k,S){S||(S=0);const F=Array(16);if(typeof k=="string")for(var M=0;M<16;++M)F[M]=k.charCodeAt(S++)|k.charCodeAt(S++)<<8|k.charCodeAt(S++)<<16|k.charCodeAt(S++)<<24;else for(M=0;M<16;++M)F[M]=k[S++]|k[S++]<<8|k[S++]<<16|k[S++]<<24;k=C.g[0],S=C.g[1],M=C.g[2];let A=C.g[3],D;D=k+(A^S&(M^A))+F[0]+3614090360&4294967295,k=S+(D<<7&4294967295|D>>>25),D=A+(M^k&(S^M))+F[1]+3905402710&4294967295,A=k+(D<<12&4294967295|D>>>20),D=M+(S^A&(k^S))+F[2]+606105819&4294967295,M=A+(D<<17&4294967295|D>>>15),D=S+(k^M&(A^k))+F[3]+3250441966&4294967295,S=M+(D<<22&4294967295|D>>>10),D=k+(A^S&(M^A))+F[4]+4118548399&4294967295,k=S+(D<<7&4294967295|D>>>25),D=A+(M^k&(S^M))+F[5]+1200080426&4294967295,A=k+(D<<12&4294967295|D>>>20),D=M+(S^A&(k^S))+F[6]+2821735955&4294967295,M=A+(D<<17&4294967295|D>>>15),D=S+(k^M&(A^k))+F[7]+4249261313&4294967295,S=M+(D<<22&4294967295|D>>>10),D=k+(A^S&(M^A))+F[8]+1770035416&4294967295,k=S+(D<<7&4294967295|D>>>25),D=A+(M^k&(S^M))+F[9]+2336552879&4294967295,A=k+(D<<12&4294967295|D>>>20),D=M+(S^A&(k^S))+F[10]+4294925233&4294967295,M=A+(D<<17&4294967295|D>>>15),D=S+(k^M&(A^k))+F[11]+2304563134&4294967295,S=M+(D<<22&4294967295|D>>>10),D=k+(A^S&(M^A))+F[12]+1804603682&4294967295,k=S+(D<<7&4294967295|D>>>25),D=A+(M^k&(S^M))+F[13]+4254626195&4294967295,A=k+(D<<12&4294967295|D>>>20),D=M+(S^A&(k^S))+F[14]+2792965006&4294967295,M=A+(D<<17&4294967295|D>>>15),D=S+(k^M&(A^k))+F[15]+1236535329&4294967295,S=M+(D<<22&4294967295|D>>>10),D=k+(M^A&(S^M))+F[1]+4129170786&4294967295,k=S+(D<<5&4294967295|D>>>27),D=A+(S^M&(k^S))+F[6]+3225465664&4294967295,A=k+(D<<9&4294967295|D>>>23),D=M+(k^S&(A^k))+F[11]+643717713&4294967295,M=A+(D<<14&4294967295|D>>>18),D=S+(A^k&(M^A))+F[0]+3921069994&4294967295,S=M+(D<<20&4294967295|D>>>12),D=k+(M^A&(S^M))+F[5]+3593408605&4294967295,k=S+(D<<5&4294967295|D>>>27),D=A+(S^M&(k^S))+F[10]+38016083&4294967295,A=k+(D<<9&4294967295|D>>>23),D=M+(k^S&(A^k))+F[15]+3634488961&4294967295,M=A+(D<<14&4294967295|D>>>18),D=S+(A^k&(M^A))+F[4]+3889429448&4294967295,S=M+(D<<20&4294967295|D>>>12),D=k+(M^A&(S^M))+F[9]+568446438&4294967295,k=S+(D<<5&4294967295|D>>>27),D=A+(S^M&(k^S))+F[14]+3275163606&4294967295,A=k+(D<<9&4294967295|D>>>23),D=M+(k^S&(A^k))+F[3]+4107603335&4294967295,M=A+(D<<14&4294967295|D>>>18),D=S+(A^k&(M^A))+F[8]+1163531501&4294967295,S=M+(D<<20&4294967295|D>>>12),D=k+(M^A&(S^M))+F[13]+2850285829&4294967295,k=S+(D<<5&4294967295|D>>>27),D=A+(S^M&(k^S))+F[2]+4243563512&4294967295,A=k+(D<<9&4294967295|D>>>23),D=M+(k^S&(A^k))+F[7]+1735328473&4294967295,M=A+(D<<14&4294967295|D>>>18),D=S+(A^k&(M^A))+F[12]+2368359562&4294967295,S=M+(D<<20&4294967295|D>>>12),D=k+(S^M^A)+F[5]+4294588738&4294967295,k=S+(D<<4&4294967295|D>>>28),D=A+(k^S^M)+F[8]+2272392833&4294967295,A=k+(D<<11&4294967295|D>>>21),D=M+(A^k^S)+F[11]+1839030562&4294967295,M=A+(D<<16&4294967295|D>>>16),D=S+(M^A^k)+F[14]+4259657740&4294967295,S=M+(D<<23&4294967295|D>>>9),D=k+(S^M^A)+F[1]+2763975236&4294967295,k=S+(D<<4&4294967295|D>>>28),D=A+(k^S^M)+F[4]+1272893353&4294967295,A=k+(D<<11&4294967295|D>>>21),D=M+(A^k^S)+F[7]+4139469664&4294967295,M=A+(D<<16&4294967295|D>>>16),D=S+(M^A^k)+F[10]+3200236656&4294967295,S=M+(D<<23&4294967295|D>>>9),D=k+(S^M^A)+F[13]+681279174&4294967295,k=S+(D<<4&4294967295|D>>>28),D=A+(k^S^M)+F[0]+3936430074&4294967295,A=k+(D<<11&4294967295|D>>>21),D=M+(A^k^S)+F[3]+3572445317&4294967295,M=A+(D<<16&4294967295|D>>>16),D=S+(M^A^k)+F[6]+76029189&4294967295,S=M+(D<<23&4294967295|D>>>9),D=k+(S^M^A)+F[9]+3654602809&4294967295,k=S+(D<<4&4294967295|D>>>28),D=A+(k^S^M)+F[12]+3873151461&4294967295,A=k+(D<<11&4294967295|D>>>21),D=M+(A^k^S)+F[15]+530742520&4294967295,M=A+(D<<16&4294967295|D>>>16),D=S+(M^A^k)+F[2]+3299628645&4294967295,S=M+(D<<23&4294967295|D>>>9),D=k+(M^(S|~A))+F[0]+4096336452&4294967295,k=S+(D<<6&4294967295|D>>>26),D=A+(S^(k|~M))+F[7]+1126891415&4294967295,A=k+(D<<10&4294967295|D>>>22),D=M+(k^(A|~S))+F[14]+2878612391&4294967295,M=A+(D<<15&4294967295|D>>>17),D=S+(A^(M|~k))+F[5]+4237533241&4294967295,S=M+(D<<21&4294967295|D>>>11),D=k+(M^(S|~A))+F[12]+1700485571&4294967295,k=S+(D<<6&4294967295|D>>>26),D=A+(S^(k|~M))+F[3]+2399980690&4294967295,A=k+(D<<10&4294967295|D>>>22),D=M+(k^(A|~S))+F[10]+4293915773&4294967295,M=A+(D<<15&4294967295|D>>>17),D=S+(A^(M|~k))+F[1]+2240044497&4294967295,S=M+(D<<21&4294967295|D>>>11),D=k+(M^(S|~A))+F[8]+1873313359&4294967295,k=S+(D<<6&4294967295|D>>>26),D=A+(S^(k|~M))+F[15]+4264355552&4294967295,A=k+(D<<10&4294967295|D>>>22),D=M+(k^(A|~S))+F[6]+2734768916&4294967295,M=A+(D<<15&4294967295|D>>>17),D=S+(A^(M|~k))+F[13]+1309151649&4294967295,S=M+(D<<21&4294967295|D>>>11),D=k+(M^(S|~A))+F[4]+4149444226&4294967295,k=S+(D<<6&4294967295|D>>>26),D=A+(S^(k|~M))+F[11]+3174756917&4294967295,A=k+(D<<10&4294967295|D>>>22),D=M+(k^(A|~S))+F[2]+718787259&4294967295,M=A+(D<<15&4294967295|D>>>17),D=S+(A^(M|~k))+F[9]+3951481745&4294967295,C.g[0]=C.g[0]+k&4294967295,C.g[1]=C.g[1]+(M+(D<<21&4294967295|D>>>11))&4294967295,C.g[2]=C.g[2]+M&4294967295,C.g[3]=C.g[3]+A&4294967295}n.prototype.v=function(C,k){k===void 0&&(k=C.length);const S=k-this.blockSize,F=this.C;let M=this.h,A=0;for(;A<k;){if(M==0)for(;A<=S;)a(this,C,A),A+=this.blockSize;if(typeof C=="string"){for(;A<k;)if(F[M++]=C.charCodeAt(A++),M==this.blockSize){a(this,F),M=0;break}}else for(;A<k;)if(F[M++]=C[A++],M==this.blockSize){a(this,F),M=0;break}}this.h=M,this.o+=k},n.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var k=1;k<C.length-8;++k)C[k]=0;k=this.o*8;for(var S=C.length-8;S<C.length;++S)C[S]=k&255,k/=256;for(this.v(C),C=Array(16),k=0,S=0;S<4;++S)for(let F=0;F<32;F+=8)C[k++]=this.g[S]>>>F&255;return C};function o(C,k){var S=d;return Object.prototype.hasOwnProperty.call(S,C)?S[C]:S[C]=k(C)}function c(C,k){this.h=k;const S=[];let F=!0;for(let M=C.length-1;M>=0;M--){const A=C[M]|0;F&&A==k||(S[M]=A,F=!1)}this.g=S}var d={};function m(C){return-128<=C&&C<128?o(C,function(k){return new c([k|0],k<0?-1:0)}):new c([C|0],C<0?-1:0)}function h(C){if(isNaN(C)||!isFinite(C))return v;if(C<0)return T(h(-C));const k=[];let S=1;for(let F=0;C>=S;F++)k[F]=C/S|0,S*=4294967296;return new c(k,0)}function p(C,k){if(C.length==0)throw Error("number format error: empty string");if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(C.charAt(0)=="-")return T(p(C.substring(1),k));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const S=h(Math.pow(k,8));let F=v;for(let A=0;A<C.length;A+=8){var M=Math.min(8,C.length-A);const D=parseInt(C.substring(A,A+M),k);M<8?(M=h(Math.pow(k,M)),F=F.j(M).add(h(D))):(F=F.j(S),F=F.add(h(D)))}return F}var v=m(0),y=m(1),w=m(16777216);t=c.prototype,t.m=function(){if(E(this))return-T(this).m();let C=0,k=1;for(let S=0;S<this.g.length;S++){const F=this.i(S);C+=(F>=0?F:4294967296+F)*k,k*=4294967296}return C},t.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(N(this))return"0";if(E(this))return"-"+T(this).toString(C);const k=h(Math.pow(C,6));var S=this;let F="";for(;;){const M=z(S,k).g;S=j(S,M.j(k));let A=((S.g.length>0?S.g[0]:S.h)>>>0).toString(C);if(S=M,N(S))return A+F;for(;A.length<6;)A="0"+A;F=A+F}},t.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function N(C){if(C.h!=0)return!1;for(let k=0;k<C.g.length;k++)if(C.g[k]!=0)return!1;return!0}function E(C){return C.h==-1}t.l=function(C){return C=j(this,C),E(C)?-1:N(C)?0:1};function T(C){const k=C.g.length,S=[];for(let F=0;F<k;F++)S[F]=~C.g[F];return new c(S,~C.h).add(y)}t.abs=function(){return E(this)?T(this):this},t.add=function(C){const k=Math.max(this.g.length,C.g.length),S=[];let F=0;for(let M=0;M<=k;M++){let A=F+(this.i(M)&65535)+(C.i(M)&65535),D=(A>>>16)+(this.i(M)>>>16)+(C.i(M)>>>16);F=D>>>16,A&=65535,D&=65535,S[M]=D<<16|A}return new c(S,S[S.length-1]&-2147483648?-1:0)};function j(C,k){return C.add(T(k))}t.j=function(C){if(N(this)||N(C))return v;if(E(this))return E(C)?T(this).j(T(C)):T(T(this).j(C));if(E(C))return T(this.j(T(C)));if(this.l(w)<0&&C.l(w)<0)return h(this.m()*C.m());const k=this.g.length+C.g.length,S=[];for(var F=0;F<2*k;F++)S[F]=0;for(F=0;F<this.g.length;F++)for(let M=0;M<C.g.length;M++){const A=this.i(F)>>>16,D=this.i(F)&65535,we=C.i(M)>>>16,Me=C.i(M)&65535;S[2*F+2*M]+=D*Me,O(S,2*F+2*M),S[2*F+2*M+1]+=A*Me,O(S,2*F+2*M+1),S[2*F+2*M+1]+=D*we,O(S,2*F+2*M+1),S[2*F+2*M+2]+=A*we,O(S,2*F+2*M+2)}for(C=0;C<k;C++)S[C]=S[2*C+1]<<16|S[2*C];for(C=k;C<2*k;C++)S[C]=0;return new c(S,0)};function O(C,k){for(;(C[k]&65535)!=C[k];)C[k+1]+=C[k]>>>16,C[k]&=65535,k++}function P(C,k){this.g=C,this.h=k}function z(C,k){if(N(k))throw Error("division by zero");if(N(C))return new P(v,v);if(E(C))return k=z(T(C),k),new P(T(k.g),T(k.h));if(E(k))return k=z(C,T(k)),new P(T(k.g),k.h);if(C.g.length>30){if(E(C)||E(k))throw Error("slowDivide_ only works with positive integers.");for(var S=y,F=k;F.l(C)<=0;)S=Q(S),F=Q(F);var M=U(S,1),A=U(F,1);for(F=U(F,2),S=U(S,2);!N(F);){var D=A.add(F);D.l(C)<=0&&(M=M.add(S),A=D),F=U(F,1),S=U(S,1)}return k=j(C,M.j(k)),new P(M,k)}for(M=v;C.l(k)>=0;){for(S=Math.max(1,Math.floor(C.m()/k.m())),F=Math.ceil(Math.log(S)/Math.LN2),F=F<=48?1:Math.pow(2,F-48),A=h(S),D=A.j(k);E(D)||D.l(C)>0;)S-=F,A=h(S),D=A.j(k);N(A)&&(A=y),M=M.add(A),C=j(C,D)}return new P(M,C)}t.B=function(C){return z(this,C).h},t.and=function(C){const k=Math.max(this.g.length,C.g.length),S=[];for(let F=0;F<k;F++)S[F]=this.i(F)&C.i(F);return new c(S,this.h&C.h)},t.or=function(C){const k=Math.max(this.g.length,C.g.length),S=[];for(let F=0;F<k;F++)S[F]=this.i(F)|C.i(F);return new c(S,this.h|C.h)},t.xor=function(C){const k=Math.max(this.g.length,C.g.length),S=[];for(let F=0;F<k;F++)S[F]=this.i(F)^C.i(F);return new c(S,this.h^C.h)};function Q(C){const k=C.g.length+1,S=[];for(let F=0;F<k;F++)S[F]=C.i(F)<<1|C.i(F-1)>>>31;return new c(S,C.h)}function U(C,k){const S=k>>5;k%=32;const F=C.g.length-S,M=[];for(let A=0;A<F;A++)M[A]=k>0?C.i(A+S)>>>k|C.i(A+S+1)<<32-k:C.i(A+S);return new c(M,C.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,ib=n,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=h,c.fromString=p,Ro=c}).apply(typeof VE<"u"?VE:typeof self<"u"?self:typeof window<"u"?window:{});var vm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ob,Yd,lb,Pm,Hv,cb,ub,db;(function(){var t,e=Object.defineProperty;function r(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof vm=="object"&&vm];for(var b=0;b<g.length;++b){var R=g[b];if(R&&R.Math==Math)return R}throw Error("Cannot find global object")}var n=r(this);function a(g,b){if(b)e:{var R=n;g=g.split(".");for(var H=0;H<g.length-1;H++){var le=g[H];if(!(le in R))break e;R=R[le]}g=g[g.length-1],H=R[g],b=b(H),b!=H&&b!=null&&e(R,g,{configurable:!0,writable:!0,value:b})}}a("Symbol.dispose",function(g){return g||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(g){return g||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(g){return g||function(b){var R=[],H;for(H in b)Object.prototype.hasOwnProperty.call(b,H)&&R.push([H,b[H]]);return R}});var o=o||{},c=this||self;function d(g){var b=typeof g;return b=="object"&&g!=null||b=="function"}function m(g,b,R){return g.call.apply(g.bind,arguments)}function h(g,b,R){return h=m,h.apply(null,arguments)}function p(g,b){var R=Array.prototype.slice.call(arguments,1);return function(){var H=R.slice();return H.push.apply(H,arguments),g.apply(this,H)}}function v(g,b){function R(){}R.prototype=b.prototype,g.Z=b.prototype,g.prototype=new R,g.prototype.constructor=g,g.Ob=function(H,le,ve){for(var Pe=Array(arguments.length-2),ut=2;ut<arguments.length;ut++)Pe[ut-2]=arguments[ut];return b.prototype[le].apply(H,Pe)}}var y=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?g=>g&&AsyncContext.Snapshot.wrap(g):g=>g;function w(g){const b=g.length;if(b>0){const R=Array(b);for(let H=0;H<b;H++)R[H]=g[H];return R}return[]}function N(g,b){for(let H=1;H<arguments.length;H++){const le=arguments[H];var R=typeof le;if(R=R!="object"?R:le?Array.isArray(le)?"array":R:"null",R=="array"||R=="object"&&typeof le.length=="number"){R=g.length||0;const ve=le.length||0;g.length=R+ve;for(let Pe=0;Pe<ve;Pe++)g[R+Pe]=le[Pe]}else g.push(le)}}class E{constructor(b,R){this.i=b,this.j=R,this.h=0,this.g=null}get(){let b;return this.h>0?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function T(g){c.setTimeout(()=>{throw g},0)}function j(){var g=C;let b=null;return g.g&&(b=g.g,g.g=g.g.next,g.g||(g.h=null),b.next=null),b}class O{constructor(){this.h=this.g=null}add(b,R){const H=P.get();H.set(b,R),this.h?this.h.next=H:this.g=H,this.h=H}}var P=new E(()=>new z,g=>g.reset());class z{constructor(){this.next=this.g=this.h=null}set(b,R){this.h=b,this.g=R,this.next=null}reset(){this.next=this.g=this.h=null}}let Q,U=!1,C=new O,k=()=>{const g=Promise.resolve(void 0);Q=()=>{g.then(S)}};function S(){for(var g;g=j();){try{g.h.call(g.g)}catch(R){T(R)}var b=P;b.j(g),b.h<100&&(b.h++,g.next=b.g,b.g=g)}U=!1}function F(){this.u=this.u,this.C=this.C}F.prototype.u=!1,F.prototype.dispose=function(){this.u||(this.u=!0,this.N())},F.prototype[Symbol.dispose]=function(){this.dispose()},F.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(g,b){this.type=g,this.g=this.target=b,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var A=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var g=!1,b=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const R=()=>{};c.addEventListener("test",R,b),c.removeEventListener("test",R,b)}catch{}return g})();function D(g){return/^[\s\xa0]*$/.test(g)}function we(g,b){M.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g&&this.init(g,b)}v(we,M),we.prototype.init=function(g,b){const R=this.type=g.type,H=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;this.target=g.target||g.srcElement,this.g=b,b=g.relatedTarget,b||(R=="mouseover"?b=g.fromElement:R=="mouseout"&&(b=g.toElement)),this.relatedTarget=b,H?(this.clientX=H.clientX!==void 0?H.clientX:H.pageX,this.clientY=H.clientY!==void 0?H.clientY:H.pageY,this.screenX=H.screenX||0,this.screenY=H.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=g.pointerType,this.state=g.state,this.i=g,g.defaultPrevented&&we.Z.h.call(this)},we.prototype.h=function(){we.Z.h.call(this);const g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var Me="closure_listenable_"+(Math.random()*1e6|0),ge=0;function De(g,b,R,H,le){this.listener=g,this.proxy=null,this.src=b,this.type=R,this.capture=!!H,this.ha=le,this.key=++ge,this.da=this.fa=!1}function Le(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function Je(g,b,R){for(const H in g)b.call(R,g[H],H,g)}function ee(g,b){for(const R in g)b.call(void 0,g[R],R,g)}function _e(g){const b={};for(const R in g)b[R]=g[R];return b}const Y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function te(g,b){let R,H;for(let le=1;le<arguments.length;le++){H=arguments[le];for(R in H)g[R]=H[R];for(let ve=0;ve<Y.length;ve++)R=Y[ve],Object.prototype.hasOwnProperty.call(H,R)&&(g[R]=H[R])}}function Z(g){this.src=g,this.g={},this.h=0}Z.prototype.add=function(g,b,R,H,le){const ve=g.toString();g=this.g[ve],g||(g=this.g[ve]=[],this.h++);const Pe=de(g,b,H,le);return Pe>-1?(b=g[Pe],R||(b.fa=!1)):(b=new De(b,this.src,ve,!!H,le),b.fa=R,g.push(b)),b};function re(g,b){const R=b.type;if(R in g.g){var H=g.g[R],le=Array.prototype.indexOf.call(H,b,void 0),ve;(ve=le>=0)&&Array.prototype.splice.call(H,le,1),ve&&(Le(b),g.g[R].length==0&&(delete g.g[R],g.h--))}}function de(g,b,R,H){for(let le=0;le<g.length;++le){const ve=g[le];if(!ve.da&&ve.listener==b&&ve.capture==!!R&&ve.ha==H)return le}return-1}var Ve="closure_lm_"+(Math.random()*1e6|0),ke={};function He(g,b,R,H,le){if(Array.isArray(b)){for(let ve=0;ve<b.length;ve++)He(g,b[ve],R,H,le);return null}return R=nn(R),g&&g[Me]?g.J(b,R,d(H)?!!H.capture:!1,le):ae(g,b,R,!1,H,le)}function ae(g,b,R,H,le,ve){if(!b)throw Error("Invalid event type");const Pe=d(le)?!!le.capture:!!le;let ut=Gt(g);if(ut||(g[Ve]=ut=new Z(g)),R=ut.add(b,R,H,Pe,ve),R.proxy)return R;if(H=Be(),R.proxy=H,H.src=g,H.listener=R,g.addEventListener)A||(le=Pe),le===void 0&&(le=!1),g.addEventListener(b.toString(),H,le);else if(g.attachEvent)g.attachEvent(xt(b.toString()),H);else if(g.addListener&&g.removeListener)g.addListener(H);else throw Error("addEventListener and attachEvent are unavailable.");return R}function Be(){function g(R){return b.call(g.src,g.listener,R)}const b=na;return g}function tt(g,b,R,H,le){if(Array.isArray(b))for(var ve=0;ve<b.length;ve++)tt(g,b[ve],R,H,le);else H=d(H)?!!H.capture:!!H,R=nn(R),g&&g[Me]?(g=g.i,ve=String(b).toString(),ve in g.g&&(b=g.g[ve],R=de(b,R,H,le),R>-1&&(Le(b[R]),Array.prototype.splice.call(b,R,1),b.length==0&&(delete g.g[ve],g.h--)))):g&&(g=Gt(g))&&(b=g.g[b.toString()],g=-1,b&&(g=de(b,R,H,le)),(R=g>-1?b[g]:null)&&qt(R))}function qt(g){if(typeof g!="number"&&g&&!g.da){var b=g.src;if(b&&b[Me])re(b.i,g);else{var R=g.type,H=g.proxy;b.removeEventListener?b.removeEventListener(R,H,g.capture):b.detachEvent?b.detachEvent(xt(R),H):b.addListener&&b.removeListener&&b.removeListener(H),(R=Gt(b))?(re(R,g),R.h==0&&(R.src=null,b[Ve]=null)):Le(g)}}}function xt(g){return g in ke?ke[g]:ke[g]="on"+g}function na(g,b){if(g.da)g=!0;else{b=new we(b,this);const R=g.listener,H=g.ha||g.src;g.fa&&qt(g),g=R.call(H,b)}return g}function Gt(g){return g=g[Ve],g instanceof Z?g:null}var Ue="__closure_events_fn_"+(Math.random()*1e9>>>0);function nn(g){return typeof g=="function"?g:(g[Ue]||(g[Ue]=function(b){return g.handleEvent(b)}),g[Ue])}function Mt(){F.call(this),this.i=new Z(this),this.M=this,this.G=null}v(Mt,F),Mt.prototype[Me]=!0,Mt.prototype.removeEventListener=function(g,b,R,H){tt(this,g,b,R,H)};function er(g,b){var R,H=g.G;if(H)for(R=[];H;H=H.G)R.push(H);if(g=g.M,H=b.type||b,typeof b=="string")b=new M(b,g);else if(b instanceof M)b.target=b.target||g;else{var le=b;b=new M(H,g),te(b,le)}le=!0;let ve,Pe;if(R)for(Pe=R.length-1;Pe>=0;Pe--)ve=b.g=R[Pe],le=_n(ve,H,!0,b)&&le;if(ve=b.g=g,le=_n(ve,H,!0,b)&&le,le=_n(ve,H,!1,b)&&le,R)for(Pe=0;Pe<R.length;Pe++)ve=b.g=R[Pe],le=_n(ve,H,!1,b)&&le}Mt.prototype.N=function(){if(Mt.Z.N.call(this),this.i){var g=this.i;for(const b in g.g){const R=g.g[b];for(let H=0;H<R.length;H++)Le(R[H]);delete g.g[b],g.h--}}this.G=null},Mt.prototype.J=function(g,b,R,H){return this.i.add(String(g),b,!1,R,H)},Mt.prototype.K=function(g,b,R,H){return this.i.add(String(g),b,!0,R,H)};function _n(g,b,R,H){if(b=g.i.g[String(b)],!b)return!0;b=b.concat();let le=!0;for(let ve=0;ve<b.length;++ve){const Pe=b[ve];if(Pe&&!Pe.da&&Pe.capture==R){const ut=Pe.listener,sr=Pe.ha||Pe.src;Pe.fa&&re(g.i,Pe),le=ut.call(sr,H)!==!1&&le}}return le&&!H.defaultPrevented}function ac(g,b){if(typeof g!="function")if(g&&typeof g.handleEvent=="function")g=h(g.handleEvent,g);else throw Error("Invalid listener argument");return Number(b)>2147483647?-1:c.setTimeout(g,b||0)}function $s(g){g.g=ac(()=>{g.g=null,g.i&&(g.i=!1,$s(g))},g.l);const b=g.h;g.h=null,g.m.apply(null,b)}class Hn extends F{constructor(b,R){super(),this.m=b,this.l=R,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:$s(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wa(g){F.call(this),this.h=g,this.g={}}v(wa,F);var Na=[];function Sr(g){Je(g.g,function(b,R){this.g.hasOwnProperty(R)&&qt(b)},g),g.g={}}wa.prototype.N=function(){wa.Z.N.call(this),Sr(this)},wa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var jr=c.JSON.stringify,an=c.JSON.parse,sc=class{stringify(g){return c.JSON.stringify(g,void 0)}parse(g){return c.JSON.parse(g,void 0)}};function Ko(){}function Xo(){}var aa={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function za(){M.call(this,"d")}v(za,M);function qn(){M.call(this,"c")}v(qn,M);var Gn={},gs=null;function Ws(){return gs=gs||new Mt}Gn.Ia="serverreachability";function Mi(g){M.call(this,Gn.Ia,g)}v(Mi,M);function Ha(g){const b=Ws();er(b,new Mi(b))}Gn.STAT_EVENT="statevent";function Fi(g,b){M.call(this,Gn.STAT_EVENT,g),this.stat=b}v(Fi,M);function cr(g){const b=Ws();er(b,new Fi(b,g))}Gn.Ja="timingevent";function Ys(g,b){M.call(this,Gn.Ja,g),this.size=b}v(Ys,M);function vs(g,b){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){g()},b)}function xs(){this.g=!0}xs.prototype.ua=function(){this.g=!1};function Qo(g,b,R,H,le,ve){g.info(function(){if(g.g)if(ve){var Pe="",ut=ve.split("&");for(let Pt=0;Pt<ut.length;Pt++){var sr=ut[Pt].split("=");if(sr.length>1){const Er=sr[0];sr=sr[1];const oa=Er.split("_");Pe=oa.length>=2&&oa[1]=="type"?Pe+(Er+"="+sr+"&"):Pe+(Er+"=redacted&")}}}else Pe=null;else Pe=ve;return"XMLHTTP REQ ("+H+") [attempt "+le+"]: "+b+`
`+R+`
`+Pe})}function Jo(g,b,R,H,le,ve,Pe){g.info(function(){return"XMLHTTP RESP ("+H+") [ attempt "+le+"]: "+b+`
`+R+`
`+ve+" "+Pe})}function qa(g,b,R,H){g.info(function(){return"XMLHTTP TEXT ("+b+"): "+Ta(g,R)+(H?" "+H:"")})}function Pu(g,b){g.info(function(){return"TIMEOUT: "+b})}xs.prototype.info=function(){};function Ta(g,b){if(!g.g)return b;if(!b)return null;try{const ve=JSON.parse(b);if(ve){for(g=0;g<ve.length;g++)if(Array.isArray(ve[g])){var R=ve[g];if(!(R.length<2)){var H=R[1];if(Array.isArray(H)&&!(H.length<1)){var le=H[0];if(le!="noop"&&le!="stop"&&le!="close")for(let Pe=1;Pe<H.length;Pe++)H[Pe]=""}}}}return jr(ve)}catch{return b}}var ur={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},_r={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ga;function Ks(){}v(Ks,Ko),Ks.prototype.g=function(){return new XMLHttpRequest},Ga=new Ks;function Xs(g){return encodeURIComponent(String(g))}function L(g){var b=1;g=g.split(":");const R=[];for(;b>0&&g.length;)R.push(g.shift()),b--;return g.length&&R.push(g.join(":")),R}function W(g,b,R,H){this.j=g,this.i=b,this.l=R,this.S=H||1,this.V=new wa(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new q}function q(){this.i=null,this.g="",this.h=!1}var G={},K={};function X(g,b,R){g.M=1,g.A=Qs(dr(b)),g.u=R,g.R=!0,ce(g,null)}function ce(g,b){g.F=Date.now(),fe(g),g.B=dr(g.A);var R=g.B,H=g.S;Array.isArray(H)||(H=[String(H)]),nf(R.i,"t",H),g.C=0,R=g.j.L,g.h=new q,g.g=dc(g.j,R?b:null,!g.u),g.P>0&&(g.O=new Hn(h(g.Y,g,g.g),g.P)),b=g.V,R=g.g,H=g.ba;var le="readystatechange";Array.isArray(le)||(le&&(Na[0]=le.toString()),le=Na);for(let ve=0;ve<le.length;ve++){const Pe=He(R,le[ve],H||b.handleEvent,!1,b.h||b);if(!Pe)break;b.g[Pe.key]=Pe}b=g.J?_e(g.J):{},g.u?(g.v||(g.v="POST"),b["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.B,g.v,g.u,b)):(g.v="GET",g.g.ea(g.B,g.v,null,b)),Ha(),Qo(g.i,g.v,g.B,g.l,g.S,g.u)}W.prototype.ba=function(g){g=g.target;const b=this.O;b&&En(g)==3?b.j():this.Y(g)},W.prototype.Y=function(g){try{if(g==this.g)e:{const ut=En(this.g),sr=this.g.ya(),Pt=this.g.ca();if(!(ut<3)&&(ut!=3||this.g&&(this.h.h||this.g.la()||sl(this.g)))){this.K||ut!=4||sr==7||(sr==8||Pt<=0?Ha(3):Ha(2)),Ie(this);var b=this.g.ca();this.X=b;var R=xe(this);if(this.o=b==200,Jo(this.i,this.v,this.B,this.l,this.S,ut,b),this.o){if(this.U&&!this.L){t:{if(this.g){var H,le=this.g;if((H=le.g?le.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(H)){var ve=H;break t}}ve=null}if(g=ve)qa(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ze(this,g);else{this.o=!1,this.m=3,cr(12),Re(this),qe(this);break e}}if(this.R){g=!0;let Er;for(;!this.K&&this.C<R.length;)if(Er=he(this,R),Er==K){ut==4&&(this.m=4,cr(14),g=!1),qa(this.i,this.l,null,"[Incomplete Response]");break}else if(Er==G){this.m=4,cr(15),qa(this.i,this.l,R,"[Invalid Chunk]"),g=!1;break}else qa(this.i,this.l,Er,null),ze(this,Er);if(ie(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ut!=4||R.length!=0||this.h.h||(this.m=1,cr(16),g=!1),this.o=this.o&&g,!g)qa(this.i,this.l,R,"[Invalid Chunked Response]"),Re(this),qe(this);else if(R.length>0&&!this.W){this.W=!0;var Pe=this.j;Pe.g==this&&Pe.aa&&!Pe.P&&(Pe.j.info("Great, no buffering proxy detected. Bytes received: "+R.length),Wu(Pe),Pe.P=!0,cr(11))}}else qa(this.i,this.l,R,null),ze(this,R);ut==4&&Re(this),this.o&&!this.K&&(ut==4?Yu(this.j,this):(this.o=!1,fe(this)))}else il(this.g),b==400&&R.indexOf("Unknown SID")>0?(this.m=3,cr(12)):(this.m=0,cr(13)),Re(this),qe(this)}}}catch{}};function xe(g){if(!ie(g))return g.g.la();const b=sl(g.g);if(b==="")return"";let R="";const H=b.length,le=En(g.g)==4;if(!g.h.i){if(typeof TextDecoder>"u")return Re(g),qe(g),"";g.h.i=new c.TextDecoder}for(let ve=0;ve<H;ve++)g.h.h=!0,R+=g.h.i.decode(b[ve],{stream:!(le&&ve==H-1)});return b.length=0,g.h.g+=R,g.C=0,g.h.g}function ie(g){return g.g?g.v=="GET"&&g.M!=2&&g.j.Aa:!1}function he(g,b){var R=g.C,H=b.indexOf(`
`,R);return H==-1?K:(R=Number(b.substring(R,H)),isNaN(R)?G:(H+=1,H+R>b.length?K:(b=b.slice(H,H+R),g.C=H+R,b)))}W.prototype.cancel=function(){this.K=!0,Re(this)};function fe(g){g.T=Date.now()+g.H,Ce(g,g.H)}function Ce(g,b){if(g.D!=null)throw Error("WatchDog timer not null");g.D=vs(h(g.aa,g),b)}function Ie(g){g.D&&(c.clearTimeout(g.D),g.D=null)}W.prototype.aa=function(){this.D=null;const g=Date.now();g-this.T>=0?(Pu(this.i,this.B),this.M!=2&&(Ha(),cr(17)),Re(this),this.m=2,qe(this)):Ce(this,this.T-g)};function qe(g){g.j.I==0||g.K||Yu(g.j,g)}function Re(g){Ie(g);var b=g.O;b&&typeof b.dispose=="function"&&b.dispose(),g.O=null,Sr(g.V),g.g&&(b=g.g,g.g=null,b.abort(),b.dispose())}function ze(g,b){try{var R=g.j;if(R.I!=0&&(R.g==g||sa(R.h,g))){if(!g.L&&sa(R.h,g)&&R.I==3){try{var H=R.Ba.g.parse(b)}catch{H=null}if(Array.isArray(H)&&H.length==3){var le=H;if(le[0]==0){e:if(!R.v){if(R.g)if(R.g.F+3e3<g.F)uc(R),_s(R);else break e;$u(R),cr(18)}}else R.xa=le[1],0<R.xa-R.K&&le[2]<37500&&R.F&&R.A==0&&!R.C&&(R.C=vs(h(R.Va,R),6e3));Ft(R.h)<=1&&R.ta&&(R.ta=void 0)}else ei(R,11)}else if((g.L||R.g==g)&&uc(R),!D(b))for(le=R.Ba.g.parse(b),b=0;b<le.length;b++){let Pt=le[b];const Er=Pt[0];if(!(Er<=R.K))if(R.K=Er,Pt=Pt[1],R.I==2)if(Pt[0]=="c"){R.M=Pt[1],R.ba=Pt[2];const oa=Pt[3];oa!=null&&(R.ka=oa,R.j.info("VER="+R.ka));const Es=Pt[4];Es!=null&&(R.za=Es,R.j.info("SVER="+R.za));const Ya=Pt[5];Ya!=null&&typeof Ya=="number"&&Ya>0&&(H=1.5*Ya,R.O=H,R.j.info("backChannelRequestTimeoutMs_="+H)),H=R;const Ka=g.g;if(Ka){const Xa=Ka.g?Ka.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xa){var ve=H.h;ve.g||Xa.indexOf("spdy")==-1&&Xa.indexOf("quic")==-1&&Xa.indexOf("h2")==-1||(ve.j=ve.l,ve.g=new Set,ve.h&&(ba(ve,ve.h),ve.h=null))}if(H.G){const Xu=Ka.g?Ka.g.getResponseHeader("X-HTTP-Session-Id"):null;Xu&&(H.wa=Xu,$t(H.J,H.G,Xu))}}R.I=3,R.l&&R.l.ra(),R.aa&&(R.T=Date.now()-g.F,R.j.info("Handshake RTT: "+R.T+"ms")),H=R;var Pe=g;if(H.na=ff(H,H.L?H.ba:null,H.W),Pe.L){In(H.h,Pe);var ut=Pe,sr=H.O;sr&&(ut.H=sr),ut.D&&(Ie(ut),fe(ut)),H.g=Pe}else cf(H);R.i.length>0&&ul(R)}else Pt[0]!="stop"&&Pt[0]!="close"||ei(R,7);else R.I==3&&(Pt[0]=="stop"||Pt[0]=="close"?Pt[0]=="stop"?ei(R,7):ll(R):Pt[0]!="noop"&&R.l&&R.l.qa(Pt),R.A=0)}}Ha(4)}catch{}}var lt=class{constructor(g,b){this.g=g,this.map=b}};function At(g){this.l=g||10,c.PerformanceNavigationTiming?(g=c.performance.getEntriesByType("navigation"),g=g.length>0&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Rt(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function Ft(g){return g.h?1:g.g?g.g.size:0}function sa(g,b){return g.h?g.h==b:g.g?g.g.has(b):!1}function ba(g,b){g.g?g.g.add(b):g.h=b}function In(g,b){g.h&&g.h==b?g.h=null:g.g&&g.g.has(b)&&g.g.delete(b)}At.prototype.cancel=function(){if(this.i=$n(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function $n(g){if(g.h!=null)return g.i.concat(g.h.G);if(g.g!=null&&g.g.size!==0){let b=g.i;for(const R of g.g.values())b=b.concat(R.G);return b}return w(g.i)}var ys=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ia(g,b){if(g){g=g.split("&");for(let R=0;R<g.length;R++){const H=g[R].indexOf("=");let le,ve=null;H>=0?(le=g[R].substring(0,H),ve=g[R].substring(H+1)):le=g[R],b(le,ve?decodeURIComponent(ve.replace(/\+/g," ")):"")}}}function $a(g){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let b;g instanceof $a?(this.l=g.l,Pi(this,g.j),this.o=g.o,this.g=g.g,Zo(this,g.u),this.h=g.h,Li(this,af(g.i)),this.m=g.m):g&&(b=String(g).match(ys))?(this.l=!1,Pi(this,b[1]||"",!0),this.o=el(b[2]||""),this.g=el(b[3]||"",!0),Zo(this,b[4]),this.h=el(b[5]||"",!0),Li(this,b[6]||"",!0),this.m=el(b[7]||"")):(this.l=!1,this.i=new Sa(null,this.l))}$a.prototype.toString=function(){const g=[];var b=this.j;b&&g.push(Wr(b,Vu,!0),":");var R=this.g;return(R||b=="file")&&(g.push("//"),(b=this.o)&&g.push(Wr(b,Vu,!0),"@"),g.push(Xs(R).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),R=this.u,R!=null&&g.push(":",String(R))),(R=this.h)&&(this.g&&R.charAt(0)!="/"&&g.push("/"),g.push(Wr(R,R.charAt(0)=="/"?Vi:Bu,!0))),(R=this.i.toString())&&g.push("?",R),(R=this.m)&&g.push("#",Wr(R,rf)),g.join("")},$a.prototype.resolve=function(g){const b=dr(this);let R=!!g.j;R?Pi(b,g.j):R=!!g.o,R?b.o=g.o:R=!!g.g,R?b.g=g.g:R=g.u!=null;var H=g.h;if(R)Zo(b,g.u);else if(R=!!g.h){if(H.charAt(0)!="/")if(this.g&&!this.h)H="/"+H;else{var le=b.h.lastIndexOf("/");le!=-1&&(H=b.h.slice(0,le+1)+H)}if(le=H,le==".."||le==".")H="";else if(le.indexOf("./")!=-1||le.indexOf("/.")!=-1){H=le.lastIndexOf("/",0)==0,le=le.split("/");const ve=[];for(let Pe=0;Pe<le.length;){const ut=le[Pe++];ut=="."?H&&Pe==le.length&&ve.push(""):ut==".."?((ve.length>1||ve.length==1&&ve[0]!="")&&ve.pop(),H&&Pe==le.length&&ve.push("")):(ve.push(ut),H=!0)}H=ve.join("/")}else H=le}return R?b.h=H:R=g.i.toString()!=="",R?Li(b,af(g.i)):R=!!g.m,R&&(b.m=g.m),b};function dr(g){return new $a(g)}function Pi(g,b,R){g.j=R?el(b,!0):b,g.j&&(g.j=g.j.replace(/:$/,""))}function Zo(g,b){if(b){if(b=Number(b),isNaN(b)||b<0)throw Error("Bad port number "+b);g.u=b}else g.u=null}function Li(g,b,R){b instanceof Sa?(g.i=b,Hu(g.i,g.l)):(R||(b=Wr(b,tf)),g.i=new Sa(b,g.l))}function $t(g,b,R){g.i.set(b,R)}function Qs(g){return $t(g,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),g}function el(g,b){return g?b?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function Wr(g,b,R){return typeof g=="string"?(g=encodeURI(g).replace(b,Lu),R&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function Lu(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var Vu=/[#\/\?@]/g,Bu=/[#\?:]/g,Vi=/[#\?]/g,tf=/[#\?@]/g,rf=/#/g;function Sa(g,b){this.h=this.g=null,this.i=g||null,this.j=!!b}function Js(g){g.g||(g.g=new Map,g.h=0,g.i&&ia(g.i,function(b,R){g.add(decodeURIComponent(b.replace(/\+/g," ")),R)}))}t=Sa.prototype,t.add=function(g,b){Js(this),this.i=null,g=Wa(this,g);let R=this.g.get(g);return R||this.g.set(g,R=[]),R.push(b),this.h+=1,this};function Uu(g,b){Js(g),b=Wa(g,b),g.g.has(b)&&(g.i=null,g.h-=g.g.get(b).length,g.g.delete(b))}function zu(g,b){return Js(g),b=Wa(g,b),g.g.has(b)}t.forEach=function(g,b){Js(this),this.g.forEach(function(R,H){R.forEach(function(le){g.call(b,le,H,this)},this)},this)};function ic(g,b){Js(g);let R=[];if(typeof b=="string")zu(g,b)&&(R=R.concat(g.g.get(Wa(g,b))));else for(g=Array.from(g.g.values()),b=0;b<g.length;b++)R=R.concat(g[b]);return R}t.set=function(g,b){return Js(this),this.i=null,g=Wa(this,g),zu(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[b]),this.h+=1,this},t.get=function(g,b){return g?(g=ic(this,g),g.length>0?String(g[0]):b):b};function nf(g,b,R){Uu(g,b),R.length>0&&(g.i=null,g.g.set(Wa(g,b),w(R)),g.h+=R.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],b=Array.from(this.g.keys());for(let H=0;H<b.length;H++){var R=b[H];const le=Xs(R);R=ic(this,R);for(let ve=0;ve<R.length;ve++){let Pe=le;R[ve]!==""&&(Pe+="="+Xs(R[ve])),g.push(Pe)}}return this.i=g.join("&")};function af(g){const b=new Sa;return b.i=g.i,g.g&&(b.g=new Map(g.g),b.h=g.h),b}function Wa(g,b){return b=String(b),g.j&&(b=b.toLowerCase()),b}function Hu(g,b){b&&!g.j&&(Js(g),g.i=null,g.g.forEach(function(R,H){const le=H.toLowerCase();H!=le&&(Uu(this,H),nf(this,le,R))},g)),g.j=b}function qu(g,b){const R=new xs;if(c.Image){const H=new Image;H.onload=p(kn,R,"TestLoadImage: loaded",!0,b,H),H.onerror=p(kn,R,"TestLoadImage: error",!1,b,H),H.onabort=p(kn,R,"TestLoadImage: abort",!1,b,H),H.ontimeout=p(kn,R,"TestLoadImage: timeout",!1,b,H),c.setTimeout(function(){H.ontimeout&&H.ontimeout()},1e4),H.src=g}else b(!1)}function Bi(g,b){const R=new xs,H=new AbortController,le=setTimeout(()=>{H.abort(),kn(R,"TestPingServer: timeout",!1,b)},1e4);fetch(g,{signal:H.signal}).then(ve=>{clearTimeout(le),ve.ok?kn(R,"TestPingServer: ok",!0,b):kn(R,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(le),kn(R,"TestPingServer: error",!1,b)})}function kn(g,b,R,H,le){try{le&&(le.onload=null,le.onerror=null,le.onabort=null,le.ontimeout=null),H(R)}catch{}}function sf(){this.g=new sc}function tl(g){this.i=g.Sb||null,this.h=g.ab||!1}v(tl,Ko),tl.prototype.g=function(){return new rl(this.i,this.h)};function rl(g,b){Mt.call(this),this.H=g,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(rl,Mt),t=rl.prototype,t.open=function(g,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=g,this.D=b,this.readyState=1,Zs(this)},t.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const b={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};g&&(b.body=g),(this.H||c).fetch(new Request(this.D,b)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,On(this)),this.readyState=0},t.Pa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,Zs(this)),this.g&&(this.readyState=3,Zs(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ui(this)}else g.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ui(g){g.j.read().then(g.Ma.bind(g)).catch(g.ga.bind(g))}t.Ma=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var b=g.value?g.value:new Uint8Array(0);(b=this.B.decode(b,{stream:!g.done}))&&(this.response=this.responseText+=b)}g.done?On(this):Zs(this),this.readyState==3&&Ui(this)}},t.Oa=function(g){this.g&&(this.response=this.responseText=g,On(this))},t.Na=function(g){this.g&&(this.response=g,On(this))},t.ga=function(){this.g&&On(this)};function On(g){g.readyState=4,g.l=null,g.j=null,g.B=null,Zs(g)}t.setRequestHeader=function(g,b){this.A.append(g,b)},t.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],b=this.h.entries();for(var R=b.next();!R.done;)R=R.value,g.push(R[0]+": "+R[1]),R=b.next();return g.join(`\r
`)};function Zs(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(rl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function zi(g){let b="";return Je(g,function(R,H){b+=H,b+=":",b+=R,b+=`\r
`}),b}function ja(g,b,R){e:{for(H in R){var H=!1;break e}H=!0}H||(R=zi(R),typeof g=="string"?R!=null&&Xs(R):$t(g,b,R))}function tr(g){Mt.call(this),this.headers=new Map,this.L=g||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(tr,Mt);var oc=/^https?$/i,of=["POST","PUT"];t=tr.prototype,t.Fa=function(g){this.H=g},t.ea=function(g,b,R,H){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);b=b?b.toUpperCase():"GET",this.D=g,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ga.g(),this.g.onreadystatechange=y(h(this.Ca,this));try{this.B=!0,this.g.open(b,String(g),!0),this.B=!1}catch(ve){nl(this,ve);return}if(g=R||"",R=new Map(this.headers),H)if(Object.getPrototypeOf(H)===Object.prototype)for(var le in H)R.set(le,H[le]);else if(typeof H.keys=="function"&&typeof H.get=="function")for(const ve of H.keys())R.set(ve,H.get(ve));else throw Error("Unknown input type for opt_headers: "+String(H));H=Array.from(R.keys()).find(ve=>ve.toLowerCase()=="content-type"),le=c.FormData&&g instanceof c.FormData,!(Array.prototype.indexOf.call(of,b,void 0)>=0)||H||le||R.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ve,Pe]of R)this.g.setRequestHeader(ve,Pe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(g),this.v=!1}catch(ve){nl(this,ve)}};function nl(g,b){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=b,g.o=5,al(g),Fr(g)}function al(g){g.A||(g.A=!0,er(g,"complete"),er(g,"error"))}t.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=g||7,er(this,"complete"),er(this,"abort"),Fr(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Fr(this,!0)),tr.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Gu(this):this.Xa())},t.Xa=function(){Gu(this)};function Gu(g){if(g.h&&typeof o<"u"){if(g.v&&En(g)==4)setTimeout(g.Ca.bind(g),0);else if(er(g,"readystatechange"),En(g)==4){g.h=!1;try{const ve=g.ca();e:switch(ve){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var R;if(!(R=b)){var H;if(H=ve===0){let Pe=String(g.D).match(ys)[1]||null;!Pe&&c.self&&c.self.location&&(Pe=c.self.location.protocol.slice(0,-1)),H=!oc.test(Pe?Pe.toLowerCase():"")}R=H}if(R)er(g,"complete"),er(g,"success");else{g.o=6;try{var le=En(g)>2?g.g.statusText:""}catch{le=""}g.l=le+" ["+g.ca()+"]",al(g)}}finally{Fr(g)}}}}function Fr(g,b){if(g.g){g.m&&(clearTimeout(g.m),g.m=null);const R=g.g;g.g=null,b||er(g,"ready");try{R.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function En(g){return g.g?g.g.readyState:0}t.ca=function(){try{return En(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(g){if(this.g){var b=this.g.responseText;return g&&b.indexOf(g)==0&&(b=b.substring(g.length)),an(b)}};function sl(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.F){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function il(g){const b={};g=(g.g&&En(g)>=2&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let H=0;H<g.length;H++){if(D(g[H]))continue;var R=L(g[H]);const le=R[0];if(R=R[1],typeof R!="string")continue;R=R.trim();const ve=b[le]||[];b[le]=ve,ve.push(R)}ee(b,function(H){return H.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ol(g,b,R){return R&&R.internalChannelParams&&R.internalChannelParams[g]||b}function lc(g){this.za=0,this.i=[],this.j=new xs,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ol("failFast",!1,g),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ol("baseRetryDelayMs",5e3,g),this.Za=ol("retryDelaySeedMs",1e4,g),this.Ta=ol("forwardChannelMaxRetries",2,g),this.va=ol("forwardChannelRequestTimeoutMs",2e4,g),this.ma=g&&g.xmlHttpFactory||void 0,this.Ua=g&&g.Rb||void 0,this.Aa=g&&g.useFetchStreams||!1,this.O=void 0,this.L=g&&g.supportsCrossDomainXhr||!1,this.M="",this.h=new At(g&&g.concurrentRequestLimit),this.Ba=new sf,this.S=g&&g.fastHandshake||!1,this.R=g&&g.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=g&&g.Pb||!1,g&&g.ua&&this.j.ua(),g&&g.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&g&&g.detectBufferingProxy||!1,this.ia=void 0,g&&g.longPollingTimeout&&g.longPollingTimeout>0&&(this.ia=g.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=lc.prototype,t.ka=8,t.I=1,t.connect=function(g,b,R,H){cr(0),this.W=g,this.H=b||{},R&&H!==void 0&&(this.H.OSID=R,this.H.OAID=H),this.F=this.X,this.J=ff(this,null,this.W),ul(this)};function ll(g){if(cl(g),g.I==3){var b=g.V++,R=dr(g.J);if($t(R,"SID",g.M),$t(R,"RID",b),$t(R,"TYPE","terminate"),dl(g,R),b=new W(g,g.j,b),b.M=2,b.A=Qs(dr(R)),R=!1,c.navigator&&c.navigator.sendBeacon)try{R=c.navigator.sendBeacon(b.A.toString(),"")}catch{}!R&&c.Image&&(new Image().src=b.A,R=!0),R||(b.g=dc(b.j,null),b.g.ea(b.A)),b.F=Date.now(),fe(b)}hf(g)}function _s(g){g.g&&(Wu(g),g.g.cancel(),g.g=null)}function cl(g){_s(g),g.v&&(c.clearTimeout(g.v),g.v=null),uc(g),g.h.cancel(),g.m&&(typeof g.m=="number"&&c.clearTimeout(g.m),g.m=null)}function ul(g){if(!Rt(g.h)&&!g.m){g.m=!0;var b=g.Ea;Q||k(),U||(Q(),U=!0),C.add(b,g),g.D=0}}function dp(g,b){return Ft(g.h)>=g.h.j-(g.m?1:0)?!1:g.m?(g.i=b.G.concat(g.i),!0):g.I==1||g.I==2||g.D>=(g.Sa?0:g.Ta)?!1:(g.m=vs(h(g.Ea,g,b),df(g,g.D)),g.D++,!0)}t.Ea=function(g){if(this.m)if(this.m=null,this.I==1){if(!g){this.V=Math.floor(Math.random()*1e5),g=this.V++;const le=new W(this,this.j,g);let ve=this.o;if(this.U&&(ve?(ve=_e(ve),te(ve,this.U)):ve=this.U),this.u!==null||this.R||(le.J=ve,ve=null),this.S)e:{for(var b=0,R=0;R<this.i.length;R++){t:{var H=this.i[R];if("__data__"in H.map&&(H=H.map.__data__,typeof H=="string")){H=H.length;break t}H=void 0}if(H===void 0)break;if(b+=H,b>4096){b=R;break e}if(b===4096||R===this.i.length-1){b=R+1;break e}}b=1e3}else b=1e3;b=cc(this,le,b),R=dr(this.J),$t(R,"RID",g),$t(R,"CVER",22),this.G&&$t(R,"X-HTTP-Session-Id",this.G),dl(this,R),ve&&(this.R?b="headers="+Xs(zi(ve))+"&"+b:this.u&&ja(R,this.u,ve)),ba(this.h,le),this.Ra&&$t(R,"TYPE","init"),this.S?($t(R,"$req",b),$t(R,"SID","null"),le.U=!0,X(le,R,null)):X(le,R,b),this.I=2}}else this.I==3&&(g?lf(this,g):this.i.length==0||Rt(this.h)||lf(this))};function lf(g,b){var R;b?R=b.l:R=g.V++;const H=dr(g.J);$t(H,"SID",g.M),$t(H,"RID",R),$t(H,"AID",g.K),dl(g,H),g.u&&g.o&&ja(H,g.u,g.o),R=new W(g,g.j,R,g.D+1),g.u===null&&(R.J=g.o),b&&(g.i=b.G.concat(g.i)),b=cc(g,R,1e3),R.H=Math.round(g.va*.5)+Math.round(g.va*.5*Math.random()),ba(g.h,R),X(R,H,b)}function dl(g,b){g.H&&Je(g.H,function(R,H){$t(b,H,R)}),g.l&&Je({},function(R,H){$t(b,H,R)})}function cc(g,b,R){R=Math.min(g.i.length,R);const H=g.l?h(g.l.Ka,g.l,g):null;e:{var le=g.i;let ut=-1;for(;;){const sr=["count="+R];ut==-1?R>0?(ut=le[0].g,sr.push("ofs="+ut)):ut=0:sr.push("ofs="+ut);let Pt=!0;for(let Er=0;Er<R;Er++){var ve=le[Er].g;const oa=le[Er].map;if(ve-=ut,ve<0)ut=Math.max(0,le[Er].g-100),Pt=!1;else try{ve="req"+ve+"_"||"";try{var Pe=oa instanceof Map?oa:Object.entries(oa);for(const[Es,Ya]of Pe){let Ka=Ya;d(Ya)&&(Ka=jr(Ya)),sr.push(ve+Es+"="+encodeURIComponent(Ka))}}catch(Es){throw sr.push(ve+"type="+encodeURIComponent("_badmap")),Es}}catch{H&&H(oa)}}if(Pt){Pe=sr.join("&");break e}}Pe=void 0}return g=g.i.splice(0,R),b.G=g,Pe}function cf(g){if(!g.g&&!g.v){g.Y=1;var b=g.Da;Q||k(),U||(Q(),U=!0),C.add(b,g),g.A=0}}function $u(g){return g.g||g.v||g.A>=3?!1:(g.Y++,g.v=vs(h(g.Da,g),df(g,g.A)),g.A++,!0)}t.Da=function(){if(this.v=null,uf(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var g=4*this.T;this.j.info("BP detection timer enabled: "+g),this.B=vs(h(this.Wa,this),g)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,cr(10),_s(this),uf(this))};function Wu(g){g.B!=null&&(c.clearTimeout(g.B),g.B=null)}function uf(g){g.g=new W(g,g.j,"rpc",g.Y),g.u===null&&(g.g.J=g.o),g.g.P=0;var b=dr(g.na);$t(b,"RID","rpc"),$t(b,"SID",g.M),$t(b,"AID",g.K),$t(b,"CI",g.F?"0":"1"),!g.F&&g.ia&&$t(b,"TO",g.ia),$t(b,"TYPE","xmlhttp"),dl(g,b),g.u&&g.o&&ja(b,g.u,g.o),g.O&&(g.g.H=g.O);var R=g.g;g=g.ba,R.M=1,R.A=Qs(dr(b)),R.u=null,R.R=!0,ce(R,g)}t.Va=function(){this.C!=null&&(this.C=null,_s(this),$u(this),cr(19))};function uc(g){g.C!=null&&(c.clearTimeout(g.C),g.C=null)}function Yu(g,b){var R=null;if(g.g==b){uc(g),Wu(g),g.g=null;var H=2}else if(sa(g.h,b))R=b.G,In(g.h,b),H=1;else return;if(g.I!=0){if(b.o)if(H==1){R=b.u?b.u.length:0,b=Date.now()-b.F;var le=g.D;H=Ws(),er(H,new Ys(H,R)),ul(g)}else cf(g);else if(le=b.m,le==3||le==0&&b.X>0||!(H==1&&dp(g,b)||H==2&&$u(g)))switch(R&&R.length>0&&(b=g.h,b.i=b.i.concat(R)),le){case 1:ei(g,5);break;case 4:ei(g,10);break;case 3:ei(g,6);break;default:ei(g,2)}}}function df(g,b){let R=g.Qa+Math.floor(Math.random()*g.Za);return g.isActive()||(R*=2),R*b}function ei(g,b){if(g.j.info("Error code "+b),b==2){var R=h(g.bb,g),H=g.Ua;const le=!H;H=new $a(H||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Pi(H,"https"),Qs(H),le?qu(H.toString(),R):Bi(H.toString(),R)}else cr(2);g.I=0,g.l&&g.l.pa(b),hf(g),cl(g)}t.bb=function(g){g?(this.j.info("Successfully pinged google.com"),cr(2)):(this.j.info("Failed to ping google.com"),cr(1))};function hf(g){if(g.I=0,g.ja=[],g.l){const b=$n(g.h);(b.length!=0||g.i.length!=0)&&(N(g.ja,b),N(g.ja,g.i),g.h.i.length=0,w(g.i),g.i.length=0),g.l.oa()}}function ff(g,b,R){var H=R instanceof $a?dr(R):new $a(R);if(H.g!="")b&&(H.g=b+"."+H.g),Zo(H,H.u);else{var le=c.location;H=le.protocol,b=b?b+"."+le.hostname:le.hostname,le=+le.port;const ve=new $a(null);H&&Pi(ve,H),b&&(ve.g=b),le&&Zo(ve,le),R&&(ve.h=R),H=ve}return R=g.G,b=g.wa,R&&b&&$t(H,R,b),$t(H,"VER",g.ka),dl(g,H),H}function dc(g,b,R){if(b&&!g.L)throw Error("Can't create secondary domain capable XhrIo object.");return b=g.Aa&&!g.ma?new tr(new tl({ab:R})):new tr(g.ma),b.Fa(g.L),b}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function mf(){}t=mf.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function hc(){}hc.prototype.g=function(g,b){return new Mn(g,b)};function Mn(g,b){Mt.call(this),this.g=new lc(b),this.l=g,this.h=b&&b.messageUrlParams||null,g=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(g?g["X-WebChannel-Content-Type"]=b.messageContentType:g={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.sa&&(g?g["X-WebChannel-Client-Profile"]=b.sa:g={"X-WebChannel-Client-Profile":b.sa}),this.g.U=g,(g=b&&b.Qb)&&!D(g)&&(this.g.u=g),this.A=b&&b.supportsCrossDomainXhr||!1,this.v=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!D(b)&&(this.g.G=b,g=this.h,g!==null&&b in g&&(g=this.h,b in g&&delete g[b])),this.j=new Hi(this)}v(Mn,Mt),Mn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Mn.prototype.close=function(){ll(this.g)},Mn.prototype.o=function(g){var b=this.g;if(typeof g=="string"){var R={};R.__data__=g,g=R}else this.v&&(R={},R.__data__=jr(g),g=R);b.i.push(new lt(b.Ya++,g)),b.I==3&&ul(b)},Mn.prototype.N=function(){this.g.l=null,delete this.j,ll(this.g),delete this.g,Mn.Z.N.call(this)};function Ku(g){za.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var b=g.__sm__;if(b){e:{for(const R in b){g=R;break e}g=void 0}(this.i=g)&&(g=this.i,b=b!==null&&g in b?b[g]:void 0),this.data=b}else this.data=g}v(Ku,za);function pf(){qn.call(this),this.status=1}v(pf,qn);function Hi(g){this.g=g}v(Hi,mf),Hi.prototype.ra=function(){er(this.g,"a")},Hi.prototype.qa=function(g){er(this.g,new Ku(g))},Hi.prototype.pa=function(g){er(this.g,new pf)},Hi.prototype.oa=function(){er(this.g,"b")},hc.prototype.createWebChannel=hc.prototype.g,Mn.prototype.send=Mn.prototype.o,Mn.prototype.open=Mn.prototype.m,Mn.prototype.close=Mn.prototype.close,db=function(){return new hc},ub=function(){return Ws()},cb=Gn,Hv={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ur.NO_ERROR=0,ur.TIMEOUT=8,ur.HTTP_ERROR=6,Pm=ur,_r.COMPLETE="complete",lb=_r,Xo.EventType=aa,aa.OPEN="a",aa.CLOSE="b",aa.ERROR="c",aa.MESSAGE="d",Mt.prototype.listen=Mt.prototype.J,Yd=Xo,tr.prototype.listenOnce=tr.prototype.K,tr.prototype.getLastError=tr.prototype.Ha,tr.prototype.getLastErrorCode=tr.prototype.ya,tr.prototype.getStatus=tr.prototype.ca,tr.prototype.getResponseJson=tr.prototype.La,tr.prototype.getResponseText=tr.prototype.la,tr.prototype.send=tr.prototype.ea,tr.prototype.setWithCredentials=tr.prototype.Fa,ob=tr}).apply(typeof vm<"u"?vm:typeof self<"u"?self:typeof window<"u"?window:{});const BE="@firebase/firestore",UE="4.9.2";class bn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}bn.UNAUTHENTICATED=new bn(null),bn.GOOGLE_CREDENTIALS=new bn("google-credentials-uid"),bn.FIRST_PARTY=new bn("first-party-uid"),bn.MOCK_USER=new bn("mock-user");let Nu="12.3.0";const Vl=new vx("@firebase/firestore");function Yc(){return Vl.logLevel}function We(t,...e){if(Vl.logLevel<=Et.DEBUG){const r=e.map(Cx);Vl.debug(`Firestore (${Nu}): ${t}`,...r)}}function bi(t,...e){if(Vl.logLevel<=Et.ERROR){const r=e.map(Cx);Vl.error(`Firestore (${Nu}): ${t}`,...r)}}function hu(t,...e){if(Vl.logLevel<=Et.WARN){const r=e.map(Cx);Vl.warn(`Firestore (${Nu}): ${t}`,...r)}}function Cx(t){if(typeof t=="string")return t;try{return(function(r){return JSON.stringify(r)})(t)}catch{return t}}function it(t,e,r){let n="Unexpected state";typeof e=="string"?n=e:r=e,hb(t,n,r)}function hb(t,e,r){let n=`FIRESTORE (${Nu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw bi(n),new Error(n)}function Ot(t,e,r,n){let a="Unexpected state";typeof r=="string"?a=r:n=r,t||hb(e,a,n)}function dt(t,e){return t}const Te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ge extends Ii{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class xi{constructor(){this.promise=new Promise(((e,r)=>{this.resolve=e,this.reject=r}))}}class fb{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class F3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable((()=>r(bn.UNAUTHENTICATED)))}shutdown(){}}class P3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable((()=>r(this.token.user)))}shutdown(){this.changeListener=null}}class L3{constructor(e){this.t=e,this.currentUser=bn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Ot(this.o===void 0,42304);let n=this.i;const a=m=>this.i!==n?(n=this.i,r(m)):Promise.resolve();let o=new xi;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new xi,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const m=o;e.enqueueRetryable((async()=>{await m.promise,await a(this.currentUser)}))},d=m=>{We("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((m=>d(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?d(m):(We("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new xi)}}),0),c()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then((n=>this.i!==e?(We("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Ot(typeof n.accessToken=="string",31837,{l:n}),new fb(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ot(e===null||typeof e=="string",2055,{h:e}),new bn(e)}}class V3{constructor(e,r,n){this.P=e,this.T=r,this.I=n,this.type="FirstParty",this.user=bn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class B3{constructor(e,r,n){this.P=e,this.T=r,this.I=n}getToken(){return Promise.resolve(new V3(this.P,this.T,this.I))}start(e,r){e.enqueueRetryable((()=>r(bn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class zE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class U3{constructor(e,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,La(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,r){Ot(this.o===void 0,3512);const n=o=>{o.error!=null&&We("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,We("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?r(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>n(o)))};const a=o=>{We("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>a(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?a(o):We("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new zE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((r=>r?(Ot(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new zE(r.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function z3(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}class Ax{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const a=z3(40);for(let o=0;o<a.length;++o)n.length<20&&a[o]<r&&(n+=e.charAt(a[o]%62))}return n}}function wt(t,e){return t<e?-1:t>e?1:0}function qv(t,e){const r=Math.min(t.length,e.length);for(let n=0;n<r;n++){const a=t.charAt(n),o=e.charAt(n);if(a!==o)return pv(a)===pv(o)?wt(a,o):pv(a)?1:-1}return wt(t.length,e.length)}const H3=55296,q3=57343;function pv(t){const e=t.charCodeAt(0);return e>=H3&&e<=q3}function fu(t,e,r){return t.length===e.length&&t.every(((n,a)=>r(n,e[a])))}const HE="__name__";class As{constructor(e,r,n){r===void 0?r=0:r>e.length&&it(637,{offset:r,range:e.length}),n===void 0?n=e.length-r:n>e.length-r&&it(1746,{length:n,range:e.length-r}),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return As.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof As?e.forEach((n=>{r.push(n)})):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let a=0;a<n;a++){const o=As.compareSegments(e.get(a),r.get(a));if(o!==0)return o}return wt(e.length,r.length)}static compareSegments(e,r){const n=As.isNumericId(e),a=As.isNumericId(r);return n&&!a?-1:!n&&a?1:n&&a?As.extractNumericId(e).compare(As.extractNumericId(r)):qv(e,r)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ro.fromString(e.substring(4,e.length-2))}}class ar extends As{construct(e,r,n){return new ar(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new Ge(Te.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter((a=>a.length>0)))}return new ar(r)}static emptyPath(){return new ar([])}}const G3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class hn extends As{construct(e,r,n){return new hn(e,r,n)}static isValidIdentifier(e){return G3.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),hn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===HE}static keyField(){return new hn([HE])}static fromServerFormat(e){const r=[];let n="",a=0;const o=()=>{if(n.length===0)throw new Ge(Te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let c=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new Ge(Te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new Ge(Te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=m,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(n+=d,a++):(o(),a++)}if(o(),c)throw new Ge(Te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new hn(r)}static emptyPath(){return new hn([])}}class rt{constructor(e){this.path=e}static fromPath(e){return new rt(ar.fromString(e))}static fromName(e){return new rt(ar.fromString(e).popFirst(5))}static empty(){return new rt(ar.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ar.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return ar.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new rt(new ar(e.slice()))}}function mb(t,e,r){if(!r)throw new Ge(Te.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function $3(t,e,r,n){if(e===!0&&n===!0)throw new Ge(Te.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function qE(t){if(!rt.isDocumentKey(t))throw new Ge(Te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function GE(t){if(rt.isDocumentKey(t))throw new Ge(Te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function pb(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function M0(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":it(12329,{type:typeof t})}function us(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ge(Te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=M0(t);throw new Ge(Te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function kr(t,e){const r={typeString:t};return e&&(r.value=e),r}function Lh(t,e){if(!pb(t))throw new Ge(Te.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in e)if(e[n]){const a=e[n].typeString,o="value"in e[n]?{value:e[n].value}:void 0;if(!(n in t)){r=`JSON missing required field: '${n}'`;break}const c=t[n];if(a&&typeof c!==a){r=`JSON field '${n}' must be a ${a}.`;break}if(o!==void 0&&c!==o.value){r=`Expected '${n}' field to equal '${o.value}'`;break}}if(r)throw new Ge(Te.INVALID_ARGUMENT,r);return!0}const $E=-62135596800,WE=1e6;class Ke{static now(){return Ke.fromMillis(Date.now())}static fromDate(e){return Ke.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor((e-1e3*r)*WE);return new Ke(r,n)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Ge(Te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Ge(Te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<$E)throw new Ge(Te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ge(Te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/WE}_compareTo(e){return this.seconds===e.seconds?wt(this.nanoseconds,e.nanoseconds):wt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ke._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Lh(e,Ke._jsonSchema))return new Ke(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-$E;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ke._jsonSchemaVersion="firestore/timestamp/1.0",Ke._jsonSchema={type:kr("string",Ke._jsonSchemaVersion),seconds:kr("number"),nanoseconds:kr("number")};class ct{static fromTimestamp(e){return new ct(e)}static min(){return new ct(new Ke(0,0))}static max(){return new ct(new Ke(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const gh=-1;function W3(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,a=ct.fromTimestamp(n===1e9?new Ke(r+1,0):new Ke(r,n));return new Oo(a,rt.empty(),e)}function Y3(t){return new Oo(t.readTime,t.key,gh)}class Oo{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new Oo(ct.min(),rt.empty(),gh)}static max(){return new Oo(ct.max(),rt.empty(),gh)}}function K3(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=rt.comparator(t.documentKey,e.documentKey),r!==0?r:wt(t.largestBatchId,e.largestBatchId))}const X3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Q3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Tu(t){if(t.code!==Te.FAILED_PRECONDITION||t.message!==X3)throw t;We("LocalStore","Unexpectedly lost primary lease")}class Se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)}),(r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)}))}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&it(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Se(((n,a)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(n,a)},this.catchCallback=o=>{this.wrapFailure(r,o).next(n,a)}}))}toPromise(){return new Promise(((e,r)=>{this.next(e,r)}))}wrapUserFunction(e){try{const r=e();return r instanceof Se?r:Se.resolve(r)}catch(r){return Se.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction((()=>e(r))):Se.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction((()=>e(r))):Se.reject(r)}static resolve(e){return new Se(((r,n)=>{r(e)}))}static reject(e){return new Se(((r,n)=>{n(e)}))}static waitFor(e){return new Se(((r,n)=>{let a=0,o=0,c=!1;e.forEach((d=>{++a,d.next((()=>{++o,c&&o===a&&r()}),(m=>n(m)))})),c=!0,o===a&&r()}))}static or(e){let r=Se.resolve(!1);for(const n of e)r=r.next((a=>a?Se.resolve(a):n()));return r}static forEach(e,r){const n=[];return e.forEach(((a,o)=>{n.push(r.call(this,a,o))})),this.waitFor(n)}static mapArray(e,r){return new Se(((n,a)=>{const o=e.length,c=new Array(o);let d=0;for(let m=0;m<o;m++){const h=m;r(e[h]).next((p=>{c[h]=p,++d,d===o&&n(c)}),(p=>a(p)))}}))}static doWhile(e,r){return new Se(((n,a)=>{const o=()=>{e()===!0?r().next((()=>{o()}),a):n()};o()}))}}function J3(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function bu(t){return t.name==="IndexedDbTransactionError"}class F0{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>r.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}F0.ce=-1;const Rx=-1;function P0(t){return t==null}function e0(t){return t===0&&1/t==-1/0}function Z3(t){return typeof t=="number"&&Number.isInteger(t)&&!e0(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const gb="";function ek(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=YE(e)),e=tk(t.get(r),e);return YE(e)}function tk(t,e){let r=e;const n=t.length;for(let a=0;a<n;a++){const o=t.charAt(a);switch(o){case"\0":r+="";break;case gb:r+="";break;default:r+=o}}return r}function YE(t){return t+gb+""}function KE(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function $o(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function vb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class fr{constructor(e,r){this.comparator=e,this.root=r||dn.EMPTY}insert(e,r){return new fr(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,dn.BLACK,null,null))}remove(e){return new fr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dn.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return r+n.left.size;a<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((r,n)=>(e(r,n),!1)))}toString(){const e=[];return this.inorderTraversal(((r,n)=>(e.push(`${r}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xm(this.root,e,this.comparator,!1)}getReverseIterator(){return new xm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xm(this.root,e,this.comparator,!0)}}class xm{constructor(e,r,n,a){this.isReverse=a,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=r?n(e.key,r):1,r&&a&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dn{constructor(e,r,n,a,o){this.key=e,this.value=r,this.color=n??dn.RED,this.left=a??dn.EMPTY,this.right=o??dn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,a,o){return new dn(e??this.key,r??this.value,n??this.color,a??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let a=this;const o=n(e,a.key);return a=o<0?a.copy(null,null,null,a.left.insert(e,r,n),null):o===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(e,r,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return dn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,a=this;if(r(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(e,a.key)===0){if(a.right.isEmpty())return dn.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw it(43730,{key:this.key,value:this.value});if(this.right.isRed())throw it(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw it(27949);return e+(this.isRed()?0:1)}}dn.EMPTY=null,dn.RED=!0,dn.BLACK=!1;dn.EMPTY=new class{constructor(){this.size=0}get key(){throw it(57766)}get value(){throw it(16141)}get color(){throw it(16727)}get left(){throw it(29726)}get right(){throw it(36894)}copy(e,r,n,a,o){return this}insert(e,r,n){return new dn(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Gr{constructor(e){this.comparator=e,this.data=new fr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((r,n)=>(e(r),!1)))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,e[1])>=0)return;r(a.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new XE(this.data.getIterator())}getIteratorFrom(e){return new XE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach((n=>{r=r.add(n)})),r}isEqual(e){if(!(e instanceof Gr)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,o=n.getNext().key;if(this.comparator(a,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((r=>{e.push(r)})),e}toString(){const e=[];return this.forEach((r=>e.push(r))),"SortedSet("+e.toString()+")"}copy(e){const r=new Gr(this.comparator);return r.data=e,r}}class XE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ya{constructor(e){this.fields=e,e.sort(hn.comparator)}static empty(){return new ya([])}unionWith(e){let r=new Gr(hn.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new ya(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return fu(this.fields,e.fields,((r,n)=>r.isEqual(n)))}}class xb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class xn{constructor(e){this.binaryString=e}static fromBase64String(e){const r=(function(a){try{return atob(a)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new xb("Invalid base64 string: "+o):o}})(e);return new xn(r)}static fromUint8Array(e){const r=(function(a){let o="";for(let c=0;c<a.length;++c)o+=String.fromCharCode(a[c]);return o})(e);return new xn(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(r){return btoa(r)})(this.binaryString)}toUint8Array(){return(function(r){const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return wt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}xn.EMPTY_BYTE_STRING=new xn("");const rk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Mo(t){if(Ot(!!t,39018),typeof t=="string"){let e=0;const r=rk.exec(t);if(Ot(!!r,46558,{timestamp:t}),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),e=Number(a)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Tr(t.seconds),nanos:Tr(t.nanos)}}function Tr(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Fo(t){return typeof t=="string"?xn.fromBase64String(t):xn.fromUint8Array(t)}const yb="server_timestamp",_b="__type__",Eb="__previous_value__",wb="__local_write_time__";function Dx(t){return(t?.mapValue?.fields||{})[_b]?.stringValue===yb}function L0(t){const e=t.mapValue.fields[Eb];return Dx(e)?L0(e):e}function vh(t){const e=Mo(t.mapValue.fields[wb].timestampValue);return new Ke(e.seconds,e.nanos)}class nk{constructor(e,r,n,a,o,c,d,m,h,p){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=a,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=m,this.useFetchStreams=h,this.isUsingEmulator=p}}const t0="(default)";class xh{constructor(e,r){this.projectId=e,this.database=r||t0}static empty(){return new xh("","")}get isDefaultDatabase(){return this.database===t0}isEqual(e){return e instanceof xh&&e.projectId===this.projectId&&e.database===this.database}}const Nb="__type__",ak="__max__",ym={mapValue:{}},Tb="__vector__",r0="value";function Po(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Dx(t)?4:ik(t)?9007199254740991:sk(t)?10:11:it(28295,{value:t})}function Us(t,e){if(t===e)return!0;const r=Po(t);if(r!==Po(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return vh(t).isEqual(vh(e));case 3:return(function(a,o){if(typeof a.timestampValue=="string"&&typeof o.timestampValue=="string"&&a.timestampValue.length===o.timestampValue.length)return a.timestampValue===o.timestampValue;const c=Mo(a.timestampValue),d=Mo(o.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(a,o){return Fo(a.bytesValue).isEqual(Fo(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(a,o){return Tr(a.geoPointValue.latitude)===Tr(o.geoPointValue.latitude)&&Tr(a.geoPointValue.longitude)===Tr(o.geoPointValue.longitude)})(t,e);case 2:return(function(a,o){if("integerValue"in a&&"integerValue"in o)return Tr(a.integerValue)===Tr(o.integerValue);if("doubleValue"in a&&"doubleValue"in o){const c=Tr(a.doubleValue),d=Tr(o.doubleValue);return c===d?e0(c)===e0(d):isNaN(c)&&isNaN(d)}return!1})(t,e);case 9:return fu(t.arrayValue.values||[],e.arrayValue.values||[],Us);case 10:case 11:return(function(a,o){const c=a.mapValue.fields||{},d=o.mapValue.fields||{};if(KE(c)!==KE(d))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(d[m]===void 0||!Us(c[m],d[m])))return!1;return!0})(t,e);default:return it(52216,{left:t})}}function yh(t,e){return(t.values||[]).find((r=>Us(r,e)))!==void 0}function mu(t,e){if(t===e)return 0;const r=Po(t),n=Po(e);if(r!==n)return wt(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return wt(t.booleanValue,e.booleanValue);case 2:return(function(o,c){const d=Tr(o.integerValue||o.doubleValue),m=Tr(c.integerValue||c.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1})(t,e);case 3:return QE(t.timestampValue,e.timestampValue);case 4:return QE(vh(t),vh(e));case 5:return qv(t.stringValue,e.stringValue);case 6:return(function(o,c){const d=Fo(o),m=Fo(c);return d.compareTo(m)})(t.bytesValue,e.bytesValue);case 7:return(function(o,c){const d=o.split("/"),m=c.split("/");for(let h=0;h<d.length&&h<m.length;h++){const p=wt(d[h],m[h]);if(p!==0)return p}return wt(d.length,m.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,c){const d=wt(Tr(o.latitude),Tr(c.latitude));return d!==0?d:wt(Tr(o.longitude),Tr(c.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return JE(t.arrayValue,e.arrayValue);case 10:return(function(o,c){const d=o.fields||{},m=c.fields||{},h=d[r0]?.arrayValue,p=m[r0]?.arrayValue,v=wt(h?.values?.length||0,p?.values?.length||0);return v!==0?v:JE(h,p)})(t.mapValue,e.mapValue);case 11:return(function(o,c){if(o===ym.mapValue&&c===ym.mapValue)return 0;if(o===ym.mapValue)return 1;if(c===ym.mapValue)return-1;const d=o.fields||{},m=Object.keys(d),h=c.fields||{},p=Object.keys(h);m.sort(),p.sort();for(let v=0;v<m.length&&v<p.length;++v){const y=qv(m[v],p[v]);if(y!==0)return y;const w=mu(d[m[v]],h[p[v]]);if(w!==0)return w}return wt(m.length,p.length)})(t.mapValue,e.mapValue);default:throw it(23264,{he:r})}}function QE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return wt(t,e);const r=Mo(t),n=Mo(e),a=wt(r.seconds,n.seconds);return a!==0?a:wt(r.nanos,n.nanos)}function JE(t,e){const r=t.values||[],n=e.values||[];for(let a=0;a<r.length&&a<n.length;++a){const o=mu(r[a],n[a]);if(o)return o}return wt(r.length,n.length)}function pu(t){return Gv(t)}function Gv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(r){const n=Mo(r);return`time(${n.seconds},${n.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(r){return Fo(r).toBase64()})(t.bytesValue):"referenceValue"in t?(function(r){return rt.fromName(r).toString()})(t.referenceValue):"geoPointValue"in t?(function(r){return`geo(${r.latitude},${r.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(r){let n="[",a=!0;for(const o of r.values||[])a?a=!1:n+=",",n+=Gv(o);return n+"]"})(t.arrayValue):"mapValue"in t?(function(r){const n=Object.keys(r.fields||{}).sort();let a="{",o=!0;for(const c of n)o?o=!1:a+=",",a+=`${c}:${Gv(r.fields[c])}`;return a+"}"})(t.mapValue):it(61005,{value:t})}function Lm(t){switch(Po(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=L0(t);return e?16+Lm(e):16;case 5:return 2*t.stringValue.length;case 6:return Fo(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((a,o)=>a+Lm(o)),0)})(t.arrayValue);case 10:case 11:return(function(n){let a=0;return $o(n.fields,((o,c)=>{a+=o.length+Lm(c)})),a})(t.mapValue);default:throw it(13486,{value:t})}}function ZE(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function $v(t){return!!t&&"integerValue"in t}function Ix(t){return!!t&&"arrayValue"in t}function ew(t){return!!t&&"nullValue"in t}function tw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Vm(t){return!!t&&"mapValue"in t}function sk(t){return(t?.mapValue?.fields||{})[Nb]?.stringValue===Tb}function th(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return $o(t.mapValue.fields,((r,n)=>e.mapValue.fields[r]=th(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=th(t.arrayValue.values[r]);return e}return{...t}}function ik(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===ak}class Qn{constructor(e){this.value=e}static empty(){return new Qn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!Vm(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=th(r)}setAll(e){let r=hn.emptyPath(),n={},a=[];e.forEach(((c,d)=>{if(!r.isImmediateParentOf(d)){const m=this.getFieldsMap(r);this.applyChanges(m,n,a),n={},a=[],r=d.popLast()}c?n[d.lastSegment()]=th(c):a.push(d.lastSegment())}));const o=this.getFieldsMap(r);this.applyChanges(o,n,a)}delete(e){const r=this.field(e.popLast());Vm(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Us(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let a=r.mapValue.fields[e.get(n)];Vm(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=a),r=a}return r.mapValue.fields}applyChanges(e,r,n){$o(r,((a,o)=>e[a]=o));for(const a of n)delete e[a]}clone(){return new Qn(th(this.value))}}function bb(t){const e=[];return $o(t.fields,((r,n)=>{const a=new hn([r]);if(Vm(n)){const o=bb(n.mapValue).fields;if(o.length===0)e.push(a);else for(const c of o)e.push(a.child(c))}else e.push(a)})),new ya(e)}class Sn{constructor(e,r,n,a,o,c,d){this.key=e,this.documentType=r,this.version=n,this.readTime=a,this.createTime=o,this.data=c,this.documentState=d}static newInvalidDocument(e){return new Sn(e,0,ct.min(),ct.min(),ct.min(),Qn.empty(),0)}static newFoundDocument(e,r,n,a){return new Sn(e,1,r,ct.min(),n,a,0)}static newNoDocument(e,r){return new Sn(e,2,r,ct.min(),ct.min(),Qn.empty(),0)}static newUnknownDocument(e,r){return new Sn(e,3,r,ct.min(),ct.min(),Qn.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(ct.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ct.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Sn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Sn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class n0{constructor(e,r){this.position=e,this.inclusive=r}}function rw(t,e,r){let n=0;for(let a=0;a<t.position.length;a++){const o=e[a],c=t.position[a];if(o.field.isKeyField()?n=rt.comparator(rt.fromName(c.referenceValue),r.key):n=mu(c,r.data.field(o.field)),o.dir==="desc"&&(n*=-1),n!==0)break}return n}function nw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Us(t.position[r],e.position[r]))return!1;return!0}class _h{constructor(e,r="asc"){this.field=e,this.dir=r}}function ok(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}let Sb=class{};class Ir extends Sb{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new ck(e,r,n):r==="array-contains"?new hk(e,n):r==="in"?new fk(e,n):r==="not-in"?new mk(e,n):r==="array-contains-any"?new pk(e,n):new Ir(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new uk(e,n):new dk(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(mu(r,this.value)):r!==null&&Po(this.value)===Po(r)&&this.matchesComparison(mu(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return it(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ds extends Sb{constructor(e,r){super(),this.filters=e,this.op=r,this.Pe=null}static create(e,r){return new ds(e,r)}matches(e){return jb(this)?this.filters.find((r=>!r.matches(e)))===void 0:this.filters.find((r=>r.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,r)=>e.concat(r.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function jb(t){return t.op==="and"}function Cb(t){return lk(t)&&jb(t)}function lk(t){for(const e of t.filters)if(e instanceof ds)return!1;return!0}function Wv(t){if(t instanceof Ir)return t.field.canonicalString()+t.op.toString()+pu(t.value);if(Cb(t))return t.filters.map((e=>Wv(e))).join(",");{const e=t.filters.map((r=>Wv(r))).join(",");return`${t.op}(${e})`}}function Ab(t,e){return t instanceof Ir?(function(n,a){return a instanceof Ir&&n.op===a.op&&n.field.isEqual(a.field)&&Us(n.value,a.value)})(t,e):t instanceof ds?(function(n,a){return a instanceof ds&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce(((o,c,d)=>o&&Ab(c,a.filters[d])),!0):!1})(t,e):void it(19439)}function Rb(t){return t instanceof Ir?(function(r){return`${r.field.canonicalString()} ${r.op} ${pu(r.value)}`})(t):t instanceof ds?(function(r){return r.op.toString()+" {"+r.getFilters().map(Rb).join(" ,")+"}"})(t):"Filter"}class ck extends Ir{constructor(e,r,n){super(e,r,n),this.key=rt.fromName(n.referenceValue)}matches(e){const r=rt.comparator(e.key,this.key);return this.matchesComparison(r)}}class uk extends Ir{constructor(e,r){super(e,"in",r),this.keys=Db("in",r)}matches(e){return this.keys.some((r=>r.isEqual(e.key)))}}class dk extends Ir{constructor(e,r){super(e,"not-in",r),this.keys=Db("not-in",r)}matches(e){return!this.keys.some((r=>r.isEqual(e.key)))}}function Db(t,e){return(e.arrayValue?.values||[]).map((r=>rt.fromName(r.referenceValue)))}class hk extends Ir{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return Ix(r)&&yh(r.arrayValue,this.value)}}class fk extends Ir{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&yh(this.value.arrayValue,r)}}class mk extends Ir{constructor(e,r){super(e,"not-in",r)}matches(e){if(yh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&r.nullValue===void 0&&!yh(this.value.arrayValue,r)}}class pk extends Ir{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!Ix(r)||!r.arrayValue.values)&&r.arrayValue.values.some((n=>yh(this.value.arrayValue,n)))}}class gk{constructor(e,r=null,n=[],a=[],o=null,c=null,d=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=a,this.limit=o,this.startAt=c,this.endAt=d,this.Te=null}}function aw(t,e=null,r=[],n=[],a=null,o=null,c=null){return new gk(t,e,r,n,a,o,c)}function kx(t){const e=dt(t);if(e.Te===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map((n=>Wv(n))).join(","),r+="|ob:",r+=e.orderBy.map((n=>(function(o){return o.field.canonicalString()+o.dir})(n))).join(","),P0(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map((n=>pu(n))).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map((n=>pu(n))).join(",")),e.Te=r}return e.Te}function Ox(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!ok(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!Ab(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!nw(t.startAt,e.startAt)&&nw(t.endAt,e.endAt)}function Yv(t){return rt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class Su{constructor(e,r=null,n=[],a=[],o=null,c="F",d=null,m=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=a,this.limit=o,this.limitType=c,this.startAt=d,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function vk(t,e,r,n,a,o,c,d){return new Su(t,e,r,n,a,o,c,d)}function Mx(t){return new Su(t)}function sw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Ib(t){return t.collectionGroup!==null}function rh(t){const e=dt(t);if(e.Ie===null){e.Ie=[];const r=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),r.add(o.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Gr(hn.comparator);return c.filters.forEach((m=>{m.getFlattenedFilters().forEach((h=>{h.isInequality()&&(d=d.add(h.field))}))})),d})(e).forEach((o=>{r.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new _h(o,n))})),r.has(hn.keyField().canonicalString())||e.Ie.push(new _h(hn.keyField(),n))}return e.Ie}function Ms(t){const e=dt(t);return e.Ee||(e.Ee=xk(e,rh(t))),e.Ee}function xk(t,e){if(t.limitType==="F")return aw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((a=>{const o=a.dir==="desc"?"asc":"desc";return new _h(a.field,o)}));const r=t.endAt?new n0(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new n0(t.startAt.position,t.startAt.inclusive):null;return aw(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function Kv(t,e){const r=t.filters.concat([e]);return new Su(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function Xv(t,e,r){return new Su(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function V0(t,e){return Ox(Ms(t),Ms(e))&&t.limitType===e.limitType}function kb(t){return`${kx(Ms(t))}|lt:${t.limitType}`}function Kc(t){return`Query(target=${(function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map((a=>Rb(a))).join(", ")}]`),P0(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map((a=>pu(a))).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map((a=>pu(a))).join(",")),`Target(${n})`})(Ms(t))}; limitType=${t.limitType})`}function B0(t,e){return e.isFoundDocument()&&(function(n,a){const o=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(o):rt.isDocumentKey(n.path)?n.path.isEqual(o):n.path.isImmediateParentOf(o)})(t,e)&&(function(n,a){for(const o of rh(n))if(!o.field.isKeyField()&&a.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(n,a){for(const o of n.filters)if(!o.matches(a))return!1;return!0})(t,e)&&(function(n,a){return!(n.startAt&&!(function(c,d,m){const h=rw(c,d,m);return c.inclusive?h<=0:h<0})(n.startAt,rh(n),a)||n.endAt&&!(function(c,d,m){const h=rw(c,d,m);return c.inclusive?h>=0:h>0})(n.endAt,rh(n),a))})(t,e)}function yk(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Ob(t){return(e,r)=>{let n=!1;for(const a of rh(t)){const o=_k(a,e,r);if(o!==0)return o;n=n||a.field.isKeyField()}return 0}}function _k(t,e,r){const n=t.field.isKeyField()?rt.comparator(e.key,r.key):(function(o,c,d){const m=c.data.field(o),h=d.data.field(o);return m!==null&&h!==null?mu(m,h):it(42886)})(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return it(19790,{direction:t.dir})}}class $l{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[a,o]of n)if(this.equalsFn(a,e))return o}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],e))return void(a[o]=[e,r]);a.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],e))return n.length===1?delete this.inner[r]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(e){$o(this.inner,((r,n)=>{for(const[a,o]of n)e(a,o)}))}isEmpty(){return vb(this.inner)}size(){return this.innerSize}}const Ek=new fr(rt.comparator);function Si(){return Ek}const Mb=new fr(rt.comparator);function Kd(...t){let e=Mb;for(const r of t)e=e.insert(r.key,r);return e}function Fb(t){let e=Mb;return t.forEach(((r,n)=>e=e.insert(r,n.overlayedDocument))),e}function Rl(){return nh()}function Pb(){return nh()}function nh(){return new $l((t=>t.toString()),((t,e)=>t.isEqual(e)))}const wk=new fr(rt.comparator),Nk=new Gr(rt.comparator);function Nt(...t){let e=Nk;for(const r of t)e=e.add(r);return e}const Tk=new Gr(wt);function bk(){return Tk}function Fx(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:e0(e)?"-0":e}}function Lb(t){return{integerValue:""+t}}function Sk(t,e){return Z3(e)?Lb(e):Fx(t,e)}class U0{constructor(){this._=void 0}}function jk(t,e,r){return t instanceof a0?(function(a,o){const c={fields:{[_b]:{stringValue:yb},[wb]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return o&&Dx(o)&&(o=L0(o)),o&&(c.fields[Eb]=o),{mapValue:c}})(r,e):t instanceof Eh?Bb(t,e):t instanceof wh?Ub(t,e):(function(a,o){const c=Vb(a,o),d=iw(c)+iw(a.Ae);return $v(c)&&$v(a.Ae)?Lb(d):Fx(a.serializer,d)})(t,e)}function Ck(t,e,r){return t instanceof Eh?Bb(t,e):t instanceof wh?Ub(t,e):r}function Vb(t,e){return t instanceof s0?(function(n){return $v(n)||(function(o){return!!o&&"doubleValue"in o})(n)})(e)?e:{integerValue:0}:null}class a0 extends U0{}class Eh extends U0{constructor(e){super(),this.elements=e}}function Bb(t,e){const r=zb(e);for(const n of t.elements)r.some((a=>Us(a,n)))||r.push(n);return{arrayValue:{values:r}}}class wh extends U0{constructor(e){super(),this.elements=e}}function Ub(t,e){let r=zb(e);for(const n of t.elements)r=r.filter((a=>!Us(a,n)));return{arrayValue:{values:r}}}class s0 extends U0{constructor(e,r){super(),this.serializer=e,this.Ae=r}}function iw(t){return Tr(t.integerValue||t.doubleValue)}function zb(t){return Ix(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Ak(t,e){return t.field.isEqual(e.field)&&(function(n,a){return n instanceof Eh&&a instanceof Eh||n instanceof wh&&a instanceof wh?fu(n.elements,a.elements,Us):n instanceof s0&&a instanceof s0?Us(n.Ae,a.Ae):n instanceof a0&&a instanceof a0})(t.transform,e.transform)}class Rk{constructor(e,r){this.version=e,this.transformResults=r}}class Ba{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Ba}static exists(e){return new Ba(void 0,e)}static updateTime(e){return new Ba(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Bm(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class z0{}function Hb(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Px(t.key,Ba.none()):new Vh(t.key,t.data,Ba.none());{const r=t.data,n=Qn.empty();let a=new Gr(hn.comparator);for(let o of e.fields)if(!a.has(o)){let c=r.field(o);c===null&&o.length>1&&(o=o.popLast(),c=r.field(o)),c===null?n.delete(o):n.set(o,c),a=a.add(o)}return new Wo(t.key,n,new ya(a.toArray()),Ba.none())}}function Dk(t,e,r){t instanceof Vh?(function(a,o,c){const d=a.value.clone(),m=lw(a.fieldTransforms,o,c.transformResults);d.setAll(m),o.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(t,e,r):t instanceof Wo?(function(a,o,c){if(!Bm(a.precondition,o))return void o.convertToUnknownDocument(c.version);const d=lw(a.fieldTransforms,o,c.transformResults),m=o.data;m.setAll(qb(a)),m.setAll(d),o.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(t,e,r):(function(a,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,r)}function ah(t,e,r,n){return t instanceof Vh?(function(o,c,d,m){if(!Bm(o.precondition,c))return d;const h=o.value.clone(),p=cw(o.fieldTransforms,m,c);return h.setAll(p),c.convertToFoundDocument(c.version,h).setHasLocalMutations(),null})(t,e,r,n):t instanceof Wo?(function(o,c,d,m){if(!Bm(o.precondition,c))return d;const h=cw(o.fieldTransforms,m,c),p=c.data;return p.setAll(qb(o)),p.setAll(h),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),d===null?null:d.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((v=>v.field)))})(t,e,r,n):(function(o,c,d){return Bm(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(t,e,r)}function Ik(t,e){let r=null;for(const n of t.fieldTransforms){const a=e.data.field(n.field),o=Vb(n.transform,a||null);o!=null&&(r===null&&(r=Qn.empty()),r.set(n.field,o))}return r||null}function ow(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&fu(n,a,((o,c)=>Ak(o,c)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Vh extends z0{constructor(e,r,n,a=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Wo extends z0{constructor(e,r,n,a,o=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=a,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function qb(t){const e=new Map;return t.fieldMask.fields.forEach((r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}})),e}function lw(t,e,r){const n=new Map;Ot(t.length===r.length,32656,{Re:r.length,Ve:t.length});for(let a=0;a<r.length;a++){const o=t[a],c=o.transform,d=e.data.field(o.field);n.set(o.field,Ck(c,d,r[a]))}return n}function cw(t,e,r){const n=new Map;for(const a of t){const o=a.transform,c=r.data.field(a.field);n.set(a.field,jk(o,c,e))}return n}class Px extends z0{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class kk extends z0{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Ok{constructor(e,r,n,a){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const o=this.mutations[a];o.key.isEqual(e.key)&&Dk(o,e,n[a])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=ah(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=ah(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=Pb();return this.mutations.forEach((a=>{const o=e.get(a.key),c=o.overlayedDocument;let d=this.applyToLocalView(c,o.mutatedFields);d=r.has(a.key)?null:d;const m=Hb(c,d);m!==null&&n.set(a.key,m),c.isValidDocument()||c.convertToNoDocument(ct.min())})),n}keys(){return this.mutations.reduce(((e,r)=>e.add(r.key)),Nt())}isEqual(e){return this.batchId===e.batchId&&fu(this.mutations,e.mutations,((r,n)=>ow(r,n)))&&fu(this.baseMutations,e.baseMutations,((r,n)=>ow(r,n)))}}class Lx{constructor(e,r,n,a){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=a}static from(e,r,n){Ot(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let a=(function(){return wk})();const o=e.mutations;for(let c=0;c<o.length;c++)a=a.insert(o[c].key,n[c].version);return new Lx(e,r,n,a)}}class Mk{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class Fk{constructor(e,r){this.count=e,this.unchangedNames=r}}var Dr,bt;function Pk(t){switch(t){case Te.OK:return it(64938);case Te.CANCELLED:case Te.UNKNOWN:case Te.DEADLINE_EXCEEDED:case Te.RESOURCE_EXHAUSTED:case Te.INTERNAL:case Te.UNAVAILABLE:case Te.UNAUTHENTICATED:return!1;case Te.INVALID_ARGUMENT:case Te.NOT_FOUND:case Te.ALREADY_EXISTS:case Te.PERMISSION_DENIED:case Te.FAILED_PRECONDITION:case Te.ABORTED:case Te.OUT_OF_RANGE:case Te.UNIMPLEMENTED:case Te.DATA_LOSS:return!0;default:return it(15467,{code:t})}}function Gb(t){if(t===void 0)return bi("GRPC error has no .code"),Te.UNKNOWN;switch(t){case Dr.OK:return Te.OK;case Dr.CANCELLED:return Te.CANCELLED;case Dr.UNKNOWN:return Te.UNKNOWN;case Dr.DEADLINE_EXCEEDED:return Te.DEADLINE_EXCEEDED;case Dr.RESOURCE_EXHAUSTED:return Te.RESOURCE_EXHAUSTED;case Dr.INTERNAL:return Te.INTERNAL;case Dr.UNAVAILABLE:return Te.UNAVAILABLE;case Dr.UNAUTHENTICATED:return Te.UNAUTHENTICATED;case Dr.INVALID_ARGUMENT:return Te.INVALID_ARGUMENT;case Dr.NOT_FOUND:return Te.NOT_FOUND;case Dr.ALREADY_EXISTS:return Te.ALREADY_EXISTS;case Dr.PERMISSION_DENIED:return Te.PERMISSION_DENIED;case Dr.FAILED_PRECONDITION:return Te.FAILED_PRECONDITION;case Dr.ABORTED:return Te.ABORTED;case Dr.OUT_OF_RANGE:return Te.OUT_OF_RANGE;case Dr.UNIMPLEMENTED:return Te.UNIMPLEMENTED;case Dr.DATA_LOSS:return Te.DATA_LOSS;default:return it(39323,{code:t})}}(bt=Dr||(Dr={}))[bt.OK=0]="OK",bt[bt.CANCELLED=1]="CANCELLED",bt[bt.UNKNOWN=2]="UNKNOWN",bt[bt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",bt[bt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",bt[bt.NOT_FOUND=5]="NOT_FOUND",bt[bt.ALREADY_EXISTS=6]="ALREADY_EXISTS",bt[bt.PERMISSION_DENIED=7]="PERMISSION_DENIED",bt[bt.UNAUTHENTICATED=16]="UNAUTHENTICATED",bt[bt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",bt[bt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",bt[bt.ABORTED=10]="ABORTED",bt[bt.OUT_OF_RANGE=11]="OUT_OF_RANGE",bt[bt.UNIMPLEMENTED=12]="UNIMPLEMENTED",bt[bt.INTERNAL=13]="INTERNAL",bt[bt.UNAVAILABLE=14]="UNAVAILABLE",bt[bt.DATA_LOSS=15]="DATA_LOSS";function Lk(){return new TextEncoder}const Vk=new Ro([4294967295,4294967295],0);function uw(t){const e=Lk().encode(t),r=new ib;return r.update(e),new Uint8Array(r.digest())}function dw(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),a=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ro([r,n],0),new Ro([a,o],0)]}class Vx{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Xd(`Invalid padding: ${r}`);if(n<0)throw new Xd(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Xd(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new Xd(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*e.length-r,this.pe=Ro.fromNumber(this.ge)}ye(e,r,n){let a=e.add(r.multiply(Ro.fromNumber(n)));return a.compare(Vk)===1&&(a=new Ro([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const r=uw(e),[n,a]=dw(r);for(let o=0;o<this.hashCount;o++){const c=this.ye(n,a,o);if(!this.we(c))return!1}return!0}static create(e,r,n){const a=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),c=new Vx(o,a,r);return n.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const r=uw(e),[n,a]=dw(r);for(let o=0;o<this.hashCount;o++){const c=this.ye(n,a,o);this.Se(c)}}Se(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class Xd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class H0{constructor(e,r,n,a,o){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const a=new Map;return a.set(e,Bh.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new H0(ct.min(),a,new fr(wt),Si(),Nt())}}class Bh{constructor(e,r,n,a,o){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Bh(n,r,Nt(),Nt(),Nt())}}class Um{constructor(e,r,n,a){this.be=e,this.removedTargetIds=r,this.key=n,this.De=a}}class $b{constructor(e,r){this.targetId=e,this.Ce=r}}class Wb{constructor(e,r,n=xn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=a}}class hw{constructor(){this.ve=0,this.Fe=fw(),this.Me=xn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Nt(),r=Nt(),n=Nt();return this.Fe.forEach(((a,o)=>{switch(o){case 0:e=e.add(a);break;case 2:r=r.add(a);break;case 1:n=n.add(a);break;default:it(38017,{changeType:o})}})),new Bh(this.Me,this.xe,e,r,n)}qe(){this.Oe=!1,this.Fe=fw()}Qe(e,r){this.Oe=!0,this.Fe=this.Fe.insert(e,r)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ot(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Bk{constructor(e){this.Ge=e,this.ze=new Map,this.je=Si(),this.Je=_m(),this.He=_m(),this.Ye=new fr(wt)}Ze(e){for(const r of e.be)e.De&&e.De.isFoundDocument()?this.Xe(r,e.De):this.et(r,e.key,e.De);for(const r of e.removedTargetIds)this.et(r,e.key,e.De)}tt(e){this.forEachTarget(e,(r=>{const n=this.nt(r);switch(e.state){case 0:this.rt(r)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(r)&&(this.it(r),n.Le(e.resumeToken));break;default:it(56790,{state:e.state})}}))}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.ze.forEach(((n,a)=>{this.rt(a)&&r(a)}))}st(e){const r=e.targetId,n=e.Ce.count,a=this.ot(r);if(a){const o=a.target;if(Yv(o))if(n===0){const c=new rt(o.path);this.et(r,c,Sn.newNoDocument(c,ct.min()))}else Ot(n===1,20013,{expectedCount:n});else{const c=this._t(r);if(c!==n){const d=this.ut(e),m=d?this.ct(d,e,c):1;if(m!==0){this.it(r);const h=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,h)}}}}}ut(e){const r=e.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:o=0}=r;let c,d;try{c=Fo(n).toUint8Array()}catch(m){if(m instanceof xb)return hu("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{d=new Vx(c,a,o)}catch(m){return hu(m instanceof Xd?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return d.ge===0?null:d}ct(e,r,n){return r.Ce.count===n-this.Pt(e,r.targetId)?0:2}Pt(e,r){const n=this.Ge.getRemoteKeysForTarget(r);let a=0;return n.forEach((o=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;e.mightContain(d)||(this.et(r,o,null),a++)})),a}Tt(e){const r=new Map;this.ze.forEach(((o,c)=>{const d=this.ot(c);if(d){if(o.current&&Yv(d.target)){const m=new rt(d.target.path);this.It(m).has(c)||this.Et(c,m)||this.et(c,m,Sn.newNoDocument(m,e))}o.Be&&(r.set(c,o.ke()),o.qe())}}));let n=Nt();this.He.forEach(((o,c)=>{let d=!0;c.forEachWhile((m=>{const h=this.ot(m);return!h||h.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(n=n.add(o))})),this.je.forEach(((o,c)=>c.setReadTime(e)));const a=new H0(e,r,this.Ye,this.je,n);return this.je=Si(),this.Je=_m(),this.He=_m(),this.Ye=new fr(wt),a}Xe(e,r){if(!this.rt(e))return;const n=this.Et(e,r.key)?2:0;this.nt(e).Qe(r.key,n),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(e)),this.He=this.He.insert(r.key,this.dt(r.key).add(e))}et(e,r,n){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,r)?a.Qe(r,1):a.$e(r),this.He=this.He.insert(r,this.dt(r).delete(e)),this.He=this.He.insert(r,this.dt(r).add(e)),n&&(this.je=this.je.insert(r,n))}removeTarget(e){this.ze.delete(e)}_t(e){const r=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let r=this.ze.get(e);return r||(r=new hw,this.ze.set(e,r)),r}dt(e){let r=this.He.get(e);return r||(r=new Gr(wt),this.He=this.He.insert(e,r)),r}It(e){let r=this.Je.get(e);return r||(r=new Gr(wt),this.Je=this.Je.insert(e,r)),r}rt(e){const r=this.ot(e)!==null;return r||We("WatchChangeAggregator","Detected inactive target",e),r}ot(e){const r=this.ze.get(e);return r&&r.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new hw),this.Ge.getRemoteKeysForTarget(e).forEach((r=>{this.et(e,r,null)}))}Et(e,r){return this.Ge.getRemoteKeysForTarget(e).has(r)}}function _m(){return new fr(rt.comparator)}function fw(){return new fr(rt.comparator)}const Uk={asc:"ASCENDING",desc:"DESCENDING"},zk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Hk={and:"AND",or:"OR"};class qk{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function Qv(t,e){return t.useProto3Json||P0(e)?e:{value:e}}function i0(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Yb(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Gk(t,e){return i0(t,e.toTimestamp())}function Fs(t){return Ot(!!t,49232),ct.fromTimestamp((function(r){const n=Mo(r);return new Ke(n.seconds,n.nanos)})(t))}function Bx(t,e){return Jv(t,e).canonicalString()}function Jv(t,e){const r=(function(a){return new ar(["projects",a.projectId,"databases",a.database])})(t).child("documents");return e===void 0?r:r.child(e)}function Kb(t){const e=ar.fromString(t);return Ot(eS(e),10190,{key:e.toString()}),e}function Zv(t,e){return Bx(t.databaseId,e.path)}function gv(t,e){const r=Kb(e);if(r.get(1)!==t.databaseId.projectId)throw new Ge(Te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new Ge(Te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new rt(Qb(r))}function Xb(t,e){return Bx(t.databaseId,e)}function $k(t){const e=Kb(t);return e.length===4?ar.emptyPath():Qb(e)}function ex(t){return new ar(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Qb(t){return Ot(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function mw(t,e,r){return{name:Zv(t,e),fields:r.value.mapValue.fields}}function Wk(t,e){let r;if("targetChange"in e){e.targetChange;const n=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:it(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],o=(function(h,p){return h.useProto3Json?(Ot(p===void 0||typeof p=="string",58123),xn.fromBase64String(p||"")):(Ot(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),xn.fromUint8Array(p||new Uint8Array))})(t,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(h){const p=h.code===void 0?Te.UNKNOWN:Gb(h.code);return new Ge(p,h.message||"")})(c);r=new Wb(n,a,o,d||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const a=gv(t,n.document.name),o=Fs(n.document.updateTime),c=n.document.createTime?Fs(n.document.createTime):ct.min(),d=new Qn({mapValue:{fields:n.document.fields}}),m=Sn.newFoundDocument(a,o,c,d),h=n.targetIds||[],p=n.removedTargetIds||[];r=new Um(h,p,m.key,m)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const a=gv(t,n.document),o=n.readTime?Fs(n.readTime):ct.min(),c=Sn.newNoDocument(a,o),d=n.removedTargetIds||[];r=new Um([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const a=gv(t,n.document),o=n.removedTargetIds||[];r=new Um([],o,a,null)}else{if(!("filter"in e))return it(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:a=0,unchangedNames:o}=n,c=new Fk(a,o),d=n.targetId;r=new $b(d,c)}}return r}function Yk(t,e){let r;if(e instanceof Vh)r={update:mw(t,e.key,e.value)};else if(e instanceof Px)r={delete:Zv(t,e.key)};else if(e instanceof Wo)r={update:mw(t,e.key,e.data),updateMask:nO(e.fieldMask)};else{if(!(e instanceof kk))return it(16599,{Vt:e.type});r={verify:Zv(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map((n=>(function(o,c){const d=c.transform;if(d instanceof a0)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Eh)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof wh)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof s0)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw it(20930,{transform:c.transform})})(0,n)))),e.precondition.isNone||(r.currentDocument=(function(a,o){return o.updateTime!==void 0?{updateTime:Gk(a,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:it(27497)})(t,e.precondition)),r}function Kk(t,e){return t&&t.length>0?(Ot(e!==void 0,14353),t.map((r=>(function(a,o){let c=a.updateTime?Fs(a.updateTime):Fs(o);return c.isEqual(ct.min())&&(c=Fs(o)),new Rk(c,a.transformResults||[])})(r,e)))):[]}function Xk(t,e){return{documents:[Xb(t,e.path)]}}function Qk(t,e){const r={structuredQuery:{}},n=e.path;let a;e.collectionGroup!==null?(a=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=Xb(t,a);const o=(function(h){if(h.length!==0)return Zb(ds.create(h,"and"))})(e.filters);o&&(r.structuredQuery.where=o);const c=(function(h){if(h.length!==0)return h.map((p=>(function(y){return{field:Xc(y.field),direction:eO(y.dir)}})(p)))})(e.orderBy);c&&(r.structuredQuery.orderBy=c);const d=Qv(t,e.limit);return d!==null&&(r.structuredQuery.limit=d),e.startAt&&(r.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(r.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:r,parent:a}}function Jk(t){let e=$k(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let a=null;if(n>0){Ot(n===1,65062);const p=r.from[0];p.allDescendants?a=p.collectionId:e=e.child(p.collectionId)}let o=[];r.where&&(o=(function(v){const y=Jb(v);return y instanceof ds&&Cb(y)?y.getFilters():[y]})(r.where));let c=[];r.orderBy&&(c=(function(v){return v.map((y=>(function(N){return new _h(Qc(N.field),(function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(N.direction))})(y)))})(r.orderBy));let d=null;r.limit&&(d=(function(v){let y;return y=typeof v=="object"?v.value:v,P0(y)?null:y})(r.limit));let m=null;r.startAt&&(m=(function(v){const y=!!v.before,w=v.values||[];return new n0(w,y)})(r.startAt));let h=null;return r.endAt&&(h=(function(v){const y=!v.before,w=v.values||[];return new n0(w,y)})(r.endAt)),vk(e,a,c,o,d,"F",m,h)}function Zk(t,e){const r=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return it(28987,{purpose:a})}})(e.purpose);return r==null?null:{"goog-listen-tags":r}}function Jb(t){return t.unaryFilter!==void 0?(function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Qc(r.unaryFilter.field);return Ir.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=Qc(r.unaryFilter.field);return Ir.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Qc(r.unaryFilter.field);return Ir.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Qc(r.unaryFilter.field);return Ir.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return it(61313);default:return it(60726)}})(t):t.fieldFilter!==void 0?(function(r){return Ir.create(Qc(r.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return it(58110);default:return it(50506)}})(r.fieldFilter.op),r.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(r){return ds.create(r.compositeFilter.filters.map((n=>Jb(n))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return it(1026)}})(r.compositeFilter.op))})(t):it(30097,{filter:t})}function eO(t){return Uk[t]}function tO(t){return zk[t]}function rO(t){return Hk[t]}function Xc(t){return{fieldPath:t.canonicalString()}}function Qc(t){return hn.fromServerFormat(t.fieldPath)}function Zb(t){return t instanceof Ir?(function(r){if(r.op==="=="){if(tw(r.value))return{unaryFilter:{field:Xc(r.field),op:"IS_NAN"}};if(ew(r.value))return{unaryFilter:{field:Xc(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(tw(r.value))return{unaryFilter:{field:Xc(r.field),op:"IS_NOT_NAN"}};if(ew(r.value))return{unaryFilter:{field:Xc(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xc(r.field),op:tO(r.op),value:r.value}}})(t):t instanceof ds?(function(r){const n=r.getFilters().map((a=>Zb(a)));return n.length===1?n[0]:{compositeFilter:{op:rO(r.op),filters:n}}})(t):it(54877,{filter:t})}function nO(t){const e=[];return t.fields.forEach((r=>e.push(r.canonicalString()))),{fieldPaths:e}}function eS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class wo{constructor(e,r,n,a,o=ct.min(),c=ct.min(),d=xn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=m}withSequenceNumber(e){return new wo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new wo(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new wo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new wo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class aO{constructor(e){this.yt=e}}function sO(t){const e=Jk({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Xv(e,e.limit,"L"):e}class iO{constructor(){this.Cn=new oO}addToCollectionParentIndex(e,r){return this.Cn.add(r),Se.resolve()}getCollectionParents(e,r){return Se.resolve(this.Cn.getEntries(r))}addFieldIndex(e,r){return Se.resolve()}deleteFieldIndex(e,r){return Se.resolve()}deleteAllFieldIndexes(e){return Se.resolve()}createTargetIndexes(e,r){return Se.resolve()}getDocumentsMatchingTarget(e,r){return Se.resolve(null)}getIndexType(e,r){return Se.resolve(0)}getFieldIndexes(e,r){return Se.resolve([])}getNextCollectionGroupToUpdate(e){return Se.resolve(null)}getMinOffset(e,r){return Se.resolve(Oo.min())}getMinOffsetFromCollectionGroup(e,r){return Se.resolve(Oo.min())}updateCollectionGroup(e,r,n){return Se.resolve()}updateIndexEntries(e,r){return Se.resolve()}}class oO{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r]||new Gr(ar.comparator),o=!a.has(n);return this.index[r]=a.add(n),o}has(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r];return a&&a.has(n)}getEntries(e){return(this.index[e]||new Gr(ar.comparator)).toArray()}}const pw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},tS=41943040;class Xn{static withCacheSize(e){return new Xn(e,Xn.DEFAULT_COLLECTION_PERCENTILE,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}Xn.DEFAULT_COLLECTION_PERCENTILE=10,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xn.DEFAULT=new Xn(tS,Xn.DEFAULT_COLLECTION_PERCENTILE,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xn.DISABLED=new Xn(-1,0,0);class gu{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new gu(0)}static cr(){return new gu(-1)}}const gw="LruGarbageCollector",lO=1048576;function vw([t,e],[r,n]){const a=wt(t,r);return a===0?wt(e,n):a}class cO{constructor(e){this.Ir=e,this.buffer=new Gr(vw),this.Er=0}dr(){return++this.Er}Ar(e){const r=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();vw(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class uO{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){We(gw,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){bu(r)?We(gw,"Ignoring IndexedDB error during garbage collection: ",r):await Tu(r)}await this.Vr(3e5)}))}}class dO{constructor(e,r){this.mr=e,this.params=r}calculateTargetCount(e,r){return this.mr.gr(e).next((n=>Math.floor(r/100*n)))}nthSequenceNumber(e,r){if(r===0)return Se.resolve(F0.ce);const n=new cO(r);return this.mr.forEachTarget(e,(a=>n.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>n.Ar(a))))).next((()=>n.maxValue))}removeTargets(e,r,n){return this.mr.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.mr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(We("LruGarbageCollector","Garbage collection skipped; disabled"),Se.resolve(pw)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(We("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),pw):this.yr(e,r)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,r){let n,a,o,c,d,m,h;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(We("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),a=this.params.maximumSequenceNumbersToCollect):a=v,c=Date.now(),this.nthSequenceNumber(e,a)))).next((v=>(n=v,d=Date.now(),this.removeTargets(e,n,r)))).next((v=>(o=v,m=Date.now(),this.removeOrphanedDocuments(e,n)))).next((v=>(h=Date.now(),Yc()<=Et.DEBUG&&We("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-p}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${o} targets in `+(m-d)+`ms
	Removed ${v} documents in `+(h-m)+`ms
Total Duration: ${h-p}ms`),Se.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:o,documentsRemoved:v}))))}}function hO(t,e){return new dO(t,e)}class fO{constructor(){this.changes=new $l((e=>e.toString()),((e,r)=>e.isEqual(r))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Sn.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Se.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class mO{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}class pO{constructor(e,r,n,a){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=a}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next((a=>(n=a,this.remoteDocumentCache.getEntry(e,r)))).next((a=>(n!==null&&ah(n.mutation,a,ya.empty(),Ke.now()),a)))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next((n=>this.getLocalViewOfDocuments(e,n,Nt()).next((()=>n))))}getLocalViewOfDocuments(e,r,n=Nt()){const a=Rl();return this.populateOverlays(e,a,r).next((()=>this.computeViews(e,r,a,n).next((o=>{let c=Kd();return o.forEach(((d,m)=>{c=c.insert(d,m.overlayedDocument)})),c}))))}getOverlayedDocuments(e,r){const n=Rl();return this.populateOverlays(e,n,r).next((()=>this.computeViews(e,r,n,Nt())))}populateOverlays(e,r,n){const a=[];return n.forEach((o=>{r.has(o)||a.push(o)})),this.documentOverlayCache.getOverlays(e,a).next((o=>{o.forEach(((c,d)=>{r.set(c,d)}))}))}computeViews(e,r,n,a){let o=Si();const c=nh(),d=(function(){return nh()})();return r.forEach(((m,h)=>{const p=n.get(h.key);a.has(h.key)&&(p===void 0||p.mutation instanceof Wo)?o=o.insert(h.key,h):p!==void 0?(c.set(h.key,p.mutation.getFieldMask()),ah(p.mutation,h,p.mutation.getFieldMask(),Ke.now())):c.set(h.key,ya.empty())})),this.recalculateAndSaveOverlays(e,o).next((m=>(m.forEach(((h,p)=>c.set(h,p))),r.forEach(((h,p)=>d.set(h,new mO(p,c.get(h)??null)))),d)))}recalculateAndSaveOverlays(e,r){const n=nh();let a=new fr(((c,d)=>c-d)),o=Nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next((c=>{for(const d of c)d.keys().forEach((m=>{const h=r.get(m);if(h===null)return;let p=n.get(m)||ya.empty();p=d.applyToLocalView(h,p),n.set(m,p);const v=(a.get(d.batchId)||Nt()).add(m);a=a.insert(d.batchId,v)}))})).next((()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const m=d.getNext(),h=m.key,p=m.value,v=Pb();p.forEach((y=>{if(!o.has(y)){const w=Hb(r.get(y),n.get(y));w!==null&&v.set(y,w),o=o.add(y)}})),c.push(this.documentOverlayCache.saveOverlays(e,h,v))}return Se.waitFor(c)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,r,n,a){return(function(c){return rt.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):Ib(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,a):this.getDocumentsMatchingCollectionQuery(e,r,n,a)}getNextDocuments(e,r,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,a).next((o=>{const c=a-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,a-o.size):Se.resolve(Rl());let d=gh,m=o;return c.next((h=>Se.forEach(h,((p,v)=>(d<v.largestBatchId&&(d=v.largestBatchId),o.get(p)?Se.resolve():this.remoteDocumentCache.getEntry(e,p).next((y=>{m=m.insert(p,y)}))))).next((()=>this.populateOverlays(e,h,o))).next((()=>this.computeViews(e,m,h,Nt()))).next((p=>({batchId:d,changes:Fb(p)})))))}))}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new rt(r)).next((n=>{let a=Kd();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a}))}getDocumentsMatchingCollectionGroupQuery(e,r,n,a){const o=r.collectionGroup;let c=Kd();return this.indexManager.getCollectionParents(e,o).next((d=>Se.forEach(d,(m=>{const h=(function(v,y){return new Su(y,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(r,m.child(o));return this.getDocumentsMatchingCollectionQuery(e,h,n,a).next((p=>{p.forEach(((v,y)=>{c=c.insert(v,y)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,r,n,a){let o;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next((c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,o,a)))).next((c=>{o.forEach(((m,h)=>{const p=h.getKey();c.get(p)===null&&(c=c.insert(p,Sn.newInvalidDocument(p)))}));let d=Kd();return c.forEach(((m,h)=>{const p=o.get(m);p!==void 0&&ah(p.mutation,h,ya.empty(),Ke.now()),B0(r,h)&&(d=d.insert(m,h))})),d}))}}class gO{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,r){return Se.resolve(this.Lr.get(r))}saveBundleMetadata(e,r){return this.Lr.set(r.id,(function(a){return{id:a.id,version:a.version,createTime:Fs(a.createTime)}})(r)),Se.resolve()}getNamedQuery(e,r){return Se.resolve(this.kr.get(r))}saveNamedQuery(e,r){return this.kr.set(r.name,(function(a){return{name:a.name,query:sO(a.bundledQuery),readTime:Fs(a.readTime)}})(r)),Se.resolve()}}class vO{constructor(){this.overlays=new fr(rt.comparator),this.qr=new Map}getOverlay(e,r){return Se.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Rl();return Se.forEach(r,(a=>this.getOverlay(e,a).next((o=>{o!==null&&n.set(a,o)})))).next((()=>n))}saveOverlays(e,r,n){return n.forEach(((a,o)=>{this.St(e,r,o)})),Se.resolve()}removeOverlaysForBatchId(e,r,n){const a=this.qr.get(n);return a!==void 0&&(a.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(n)),Se.resolve()}getOverlaysForCollection(e,r,n){const a=Rl(),o=r.length+1,c=new rt(r.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const m=d.getNext().value,h=m.getKey();if(!r.isPrefixOf(h.path))break;h.path.length===o&&m.largestBatchId>n&&a.set(m.getKey(),m)}return Se.resolve(a)}getOverlaysForCollectionGroup(e,r,n,a){let o=new fr(((h,p)=>h-p));const c=this.overlays.getIterator();for(;c.hasNext();){const h=c.getNext().value;if(h.getKey().getCollectionGroup()===r&&h.largestBatchId>n){let p=o.get(h.largestBatchId);p===null&&(p=Rl(),o=o.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const d=Rl(),m=o.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((h,p)=>d.set(h,p))),!(d.size()>=a)););return Se.resolve(d)}St(e,r,n){const a=this.overlays.get(n.key);if(a!==null){const c=this.qr.get(a.largestBatchId).delete(n.key);this.qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(n.key,new Mk(r,n));let o=this.qr.get(r);o===void 0&&(o=Nt(),this.qr.set(r,o)),this.qr.set(r,o.add(n.key))}}class xO{constructor(){this.sessionToken=xn.EMPTY_BYTE_STRING}getSessionToken(e){return Se.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,Se.resolve()}}class Ux{constructor(){this.Qr=new Gr(Jr.$r),this.Ur=new Gr(Jr.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,r){const n=new Jr(e,r);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,r){e.forEach((n=>this.addReference(n,r)))}removeReference(e,r){this.Gr(new Jr(e,r))}zr(e,r){e.forEach((n=>this.removeReference(n,r)))}jr(e){const r=new rt(new ar([])),n=new Jr(r,e),a=new Jr(r,e+1),o=[];return this.Ur.forEachInRange([n,a],(c=>{this.Gr(c),o.push(c.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const r=new rt(new ar([])),n=new Jr(r,e),a=new Jr(r,e+1);let o=Nt();return this.Ur.forEachInRange([n,a],(c=>{o=o.add(c.key)})),o}containsKey(e){const r=new Jr(e,0),n=this.Qr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Jr{constructor(e,r){this.key=e,this.Yr=r}static $r(e,r){return rt.comparator(e.key,r.key)||wt(e.Yr,r.Yr)}static Kr(e,r){return wt(e.Yr,r.Yr)||rt.comparator(e.key,r.key)}}class yO{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new Gr(Jr.$r)}checkEmpty(e){return Se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,a){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Ok(o,r,n,a);this.mutationQueue.push(c);for(const d of a)this.Zr=this.Zr.add(new Jr(d.key,o)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return Se.resolve(c)}lookupMutationBatch(e,r){return Se.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=this.ei(n),o=a<0?0:a;return Se.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Se.resolve(this.mutationQueue.length===0?Rx:this.tr-1)}getAllMutationBatches(e){return Se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Jr(r,0),a=new Jr(r,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([n,a],(c=>{const d=this.Xr(c.Yr);o.push(d)})),Se.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Gr(wt);return r.forEach((a=>{const o=new Jr(a,0),c=new Jr(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,c],(d=>{n=n.add(d.Yr)}))})),Se.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1;let o=n;rt.isDocumentKey(o)||(o=o.child(""));const c=new Jr(new rt(o),0);let d=new Gr(wt);return this.Zr.forEachWhile((m=>{const h=m.key.path;return!!n.isPrefixOf(h)&&(h.length===a&&(d=d.add(m.Yr)),!0)}),c),Se.resolve(this.ti(d))}ti(e){const r=[];return e.forEach((n=>{const a=this.Xr(n);a!==null&&r.push(a)})),r}removeMutationBatch(e,r){Ot(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return Se.forEach(r.mutations,(a=>{const o=new Jr(a.key,r.batchId);return n=n.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=n}))}ir(e){}containsKey(e,r){const n=new Jr(r,0),a=this.Zr.firstAfterOrEqual(n);return Se.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,Se.resolve()}ni(e,r){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const r=this.ei(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}class _O{constructor(e){this.ri=e,this.docs=(function(){return new fr(rt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,a=this.docs.get(n),o=a?a.size:0,c=this.ri(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return Se.resolve(n?n.document.mutableCopy():Sn.newInvalidDocument(r))}getEntries(e,r){let n=Si();return r.forEach((a=>{const o=this.docs.get(a);n=n.insert(a,o?o.document.mutableCopy():Sn.newInvalidDocument(a))})),Se.resolve(n)}getDocumentsMatchingQuery(e,r,n,a){let o=Si();const c=r.path,d=new rt(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:h,value:{document:p}}=m.getNext();if(!c.isPrefixOf(h.path))break;h.path.length>c.length+1||K3(Y3(p),n)<=0||(a.has(p.key)||B0(r,p))&&(o=o.insert(p.key,p.mutableCopy()))}return Se.resolve(o)}getAllFromCollectionGroup(e,r,n,a){it(9500)}ii(e,r){return Se.forEach(this.docs,(n=>r(n)))}newChangeBuffer(e){return new EO(this)}getSize(e){return Se.resolve(this.size)}}class EO extends fO{constructor(e){super(),this.Nr=e}applyChanges(e){const r=[];return this.changes.forEach(((n,a)=>{a.isValidDocument()?r.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(n)})),Se.waitFor(r)}getFromCache(e,r){return this.Nr.getEntry(e,r)}getAllFromCache(e,r){return this.Nr.getEntries(e,r)}}class wO{constructor(e){this.persistence=e,this.si=new $l((r=>kx(r)),Ox),this.lastRemoteSnapshotVersion=ct.min(),this.highestTargetId=0,this.oi=0,this._i=new Ux,this.targetCount=0,this.ai=gu.ur()}forEachTarget(e,r){return this.si.forEach(((n,a)=>r(a))),Se.resolve()}getLastRemoteSnapshotVersion(e){return Se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Se.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Se.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.oi&&(this.oi=r),Se.resolve()}Pr(e){this.si.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.ai=new gu(r),this.highestTargetId=r),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,r){return this.Pr(r),this.targetCount+=1,Se.resolve()}updateTargetData(e,r){return this.Pr(r),Se.resolve()}removeTargetData(e,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,Se.resolve()}removeTargets(e,r,n){let a=0;const o=[];return this.si.forEach(((c,d)=>{d.sequenceNumber<=r&&n.get(d.targetId)===null&&(this.si.delete(c),o.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)})),Se.waitFor(o).next((()=>a))}getTargetCount(e){return Se.resolve(this.targetCount)}getTargetData(e,r){const n=this.si.get(r)||null;return Se.resolve(n)}addMatchingKeys(e,r,n){return this._i.Wr(r,n),Se.resolve()}removeMatchingKeys(e,r,n){this._i.zr(r,n);const a=this.persistence.referenceDelegate,o=[];return a&&r.forEach((c=>{o.push(a.markPotentiallyOrphaned(e,c))})),Se.waitFor(o)}removeMatchingKeysForTargetId(e,r){return this._i.jr(r),Se.resolve()}getMatchingKeysForTargetId(e,r){const n=this._i.Hr(r);return Se.resolve(n)}containsKey(e,r){return Se.resolve(this._i.containsKey(r))}}class rS{constructor(e,r){this.ui={},this.overlays={},this.ci=new F0(0),this.li=!1,this.li=!0,this.hi=new xO,this.referenceDelegate=e(this),this.Pi=new wO(this),this.indexManager=new iO,this.remoteDocumentCache=(function(a){return new _O(a)})((n=>this.referenceDelegate.Ti(n))),this.serializer=new aO(r),this.Ii=new gO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new vO,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.ui[e.toKey()];return n||(n=new yO(r,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,r,n){We("MemoryPersistence","Starting transaction:",e);const a=new NO(this.ci.next());return this.referenceDelegate.Ei(),n(a).next((o=>this.referenceDelegate.di(a).next((()=>o)))).toPromise().then((o=>(a.raiseOnCommittedEvent(),o)))}Ai(e,r){return Se.or(Object.values(this.ui).map((n=>()=>n.containsKey(e,r))))}}class NO extends Q3{constructor(e){super(),this.currentSequenceNumber=e}}class zx{constructor(e){this.persistence=e,this.Ri=new Ux,this.Vi=null}static mi(e){return new zx(e)}get fi(){if(this.Vi)return this.Vi;throw it(60996)}addReference(e,r,n){return this.Ri.addReference(n,r),this.fi.delete(n.toString()),Se.resolve()}removeReference(e,r,n){return this.Ri.removeReference(n,r),this.fi.add(n.toString()),Se.resolve()}markPotentiallyOrphaned(e,r){return this.fi.add(r.toString()),Se.resolve()}removeTarget(e,r){this.Ri.jr(r.targetId).forEach((a=>this.fi.add(a.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next((a=>{a.forEach((o=>this.fi.add(o.toString())))})).next((()=>n.removeTargetData(e,r)))}Ei(){this.Vi=new Set}di(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Se.forEach(this.fi,(n=>{const a=rt.fromPath(n);return this.gi(e,a).next((o=>{o||r.removeEntry(a,ct.min())}))})).next((()=>(this.Vi=null,r.apply(e))))}updateLimboDocument(e,r){return this.gi(e,r).next((n=>{n?this.fi.delete(r.toString()):this.fi.add(r.toString())}))}Ti(e){return 0}gi(e,r){return Se.or([()=>Se.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ai(e,r)])}}class o0{constructor(e,r){this.persistence=e,this.pi=new $l((n=>ek(n.path)),((n,a)=>n.isEqual(a))),this.garbageCollector=hO(this,r)}static mi(e,r){return new o0(e,r)}Ei(){}di(e){return Se.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}gr(e){const r=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((n=>r.next((a=>n+a))))}wr(e){let r=0;return this.pr(e,(n=>{r++})).next((()=>r))}pr(e,r){return Se.forEach(this.pi,((n,a)=>this.br(e,n,a).next((o=>o?Se.resolve():r(a)))))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const a=this.persistence.getRemoteDocumentCache(),o=a.newChangeBuffer();return a.ii(e,(c=>this.br(e,c,r).next((d=>{d||(n++,o.removeEntry(c,ct.min()))})))).next((()=>o.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,r){return this.pi.set(r,e.currentSequenceNumber),Se.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),Se.resolve()}removeReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),Se.resolve()}updateLimboDocument(e,r){return this.pi.set(r,e.currentSequenceNumber),Se.resolve()}Ti(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=Lm(e.data.value)),r}br(e,r,n){return Se.or([()=>this.persistence.Ai(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const a=this.pi.get(r);return Se.resolve(a!==void 0&&a>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Hx{constructor(e,r,n,a){this.targetId=e,this.fromCache=r,this.Es=n,this.ds=a}static As(e,r){let n=Nt(),a=Nt();for(const o of r.docChanges)switch(o.type){case 0:n=n.add(o.doc.key);break;case 1:a=a.add(o.doc.key)}return new Hx(e,r.fromCache,n,a)}}class TO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class bO{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return t4()?8:J3(Rn())>0?6:4})()}initialize(e,r){this.ps=e,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(e,r,n,a){const o={result:null};return this.ys(e,r).next((c=>{o.result=c})).next((()=>{if(!o.result)return this.ws(e,r,a,n).next((c=>{o.result=c}))})).next((()=>{if(o.result)return;const c=new TO;return this.Ss(e,r,c).next((d=>{if(o.result=d,this.Vs)return this.bs(e,r,c,d.size)}))})).next((()=>o.result))}bs(e,r,n,a){return n.documentReadCount<this.fs?(Yc()<=Et.DEBUG&&We("QueryEngine","SDK will not create cache indexes for query:",Kc(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Se.resolve()):(Yc()<=Et.DEBUG&&We("QueryEngine","Query:",Kc(r),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.gs*a?(Yc()<=Et.DEBUG&&We("QueryEngine","The SDK decides to create cache indexes for query:",Kc(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ms(r))):Se.resolve())}ys(e,r){if(sw(r))return Se.resolve(null);let n=Ms(r);return this.indexManager.getIndexType(e,n).next((a=>a===0?null:(r.limit!==null&&a===1&&(r=Xv(r,null,"F"),n=Ms(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next((o=>{const c=Nt(...o);return this.ps.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,n).next((m=>{const h=this.Ds(r,d);return this.Cs(r,h,c,m.readTime)?this.ys(e,Xv(r,null,"F")):this.vs(e,h,r,m)}))))})))))}ws(e,r,n,a){return sw(r)||a.isEqual(ct.min())?Se.resolve(null):this.ps.getDocuments(e,n).next((o=>{const c=this.Ds(r,o);return this.Cs(r,c,n,a)?Se.resolve(null):(Yc()<=Et.DEBUG&&We("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Kc(r)),this.vs(e,c,r,W3(a,gh)).next((d=>d)))}))}Ds(e,r){let n=new Gr(Ob(e));return r.forEach(((a,o)=>{B0(e,o)&&(n=n.add(o))})),n}Cs(e,r,n,a){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const o=e.limitType==="F"?r.last():r.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(a)>0)}Ss(e,r,n){return Yc()<=Et.DEBUG&&We("QueryEngine","Using full collection scan to execute query:",Kc(r)),this.ps.getDocumentsMatchingQuery(e,r,Oo.min(),n)}vs(e,r,n,a){return this.ps.getDocumentsMatchingQuery(e,n,a).next((o=>(r.forEach((c=>{o=o.insert(c.key,c)})),o)))}}const qx="LocalStore",SO=3e8;class jO{constructor(e,r,n,a){this.persistence=e,this.Fs=r,this.serializer=a,this.Ms=new fr(wt),this.xs=new $l((o=>kx(o)),Ox),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pO(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(r=>e.collect(r,this.Ms)))}}function CO(t,e,r,n){return new jO(t,e,r,n)}async function nS(t,e){const r=dt(t);return await r.persistence.runTransaction("Handle user change","readonly",(n=>{let a;return r.mutationQueue.getAllMutationBatches(n).next((o=>(a=o,r.Bs(e),r.mutationQueue.getAllMutationBatches(n)))).next((o=>{const c=[],d=[];let m=Nt();for(const h of a){c.push(h.batchId);for(const p of h.mutations)m=m.add(p.key)}for(const h of o){d.push(h.batchId);for(const p of h.mutations)m=m.add(p.key)}return r.localDocuments.getDocuments(n,m).next((h=>({Ls:h,removedBatchIds:c,addedBatchIds:d})))}))}))}function AO(t,e){const r=dt(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const a=e.batch.keys(),o=r.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,m,h,p){const v=h.batch,y=v.keys();let w=Se.resolve();return y.forEach((N=>{w=w.next((()=>p.getEntry(m,N))).next((E=>{const T=h.docVersions.get(N);Ot(T!==null,48541),E.version.compareTo(T)<0&&(v.applyToRemoteDocument(E,h),E.isValidDocument()&&(E.setReadTime(h.commitVersion),p.addEntry(E)))}))})),w.next((()=>d.mutationQueue.removeMutationBatch(m,v)))})(r,n,e,o).next((()=>o.apply(n))).next((()=>r.mutationQueue.performConsistencyCheck(n))).next((()=>r.documentOverlayCache.removeOverlaysForBatchId(n,a,e.batch.batchId))).next((()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(d){let m=Nt();for(let h=0;h<d.mutationResults.length;++h)d.mutationResults[h].transformResults.length>0&&(m=m.add(d.batch.mutations[h].key));return m})(e)))).next((()=>r.localDocuments.getDocuments(n,a)))}))}function aS(t){const e=dt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(r=>e.Pi.getLastRemoteSnapshotVersion(r)))}function RO(t,e){const r=dt(t),n=e.snapshotVersion;let a=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const c=r.Ns.newChangeBuffer({trackRemovals:!0});a=r.Ms;const d=[];e.targetChanges.forEach(((p,v)=>{const y=a.get(v);if(!y)return;d.push(r.Pi.removeMatchingKeys(o,p.removedDocuments,v).next((()=>r.Pi.addMatchingKeys(o,p.addedDocuments,v))));let w=y.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?w=w.withResumeToken(xn.EMPTY_BYTE_STRING,ct.min()).withLastLimboFreeSnapshotVersion(ct.min()):p.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(p.resumeToken,n)),a=a.insert(v,w),(function(E,T,j){return E.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=SO?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0})(y,w,p)&&d.push(r.Pi.updateTargetData(o,w))}));let m=Si(),h=Nt();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&d.push(r.persistence.referenceDelegate.updateLimboDocument(o,p))})),d.push(DO(o,c,e.documentUpdates).next((p=>{m=p.ks,h=p.qs}))),!n.isEqual(ct.min())){const p=r.Pi.getLastRemoteSnapshotVersion(o).next((v=>r.Pi.setTargetsMetadata(o,o.currentSequenceNumber,n)));d.push(p)}return Se.waitFor(d).next((()=>c.apply(o))).next((()=>r.localDocuments.getLocalViewOfDocuments(o,m,h))).next((()=>m))})).then((o=>(r.Ms=a,o)))}function DO(t,e,r){let n=Nt(),a=Nt();return r.forEach((o=>n=n.add(o))),e.getEntries(t,n).next((o=>{let c=Si();return r.forEach(((d,m)=>{const h=o.get(d);m.isFoundDocument()!==h.isFoundDocument()&&(a=a.add(d)),m.isNoDocument()&&m.version.isEqual(ct.min())?(e.removeEntry(d,m.readTime),c=c.insert(d,m)):!h.isValidDocument()||m.version.compareTo(h.version)>0||m.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(m),c=c.insert(d,m)):We(qx,"Ignoring outdated watch update for ",d,". Current version:",h.version," Watch version:",m.version)})),{ks:c,qs:a}}))}function IO(t,e){const r=dt(t);return r.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=Rx),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function kO(t,e){const r=dt(t);return r.persistence.runTransaction("Allocate target","readwrite",(n=>{let a;return r.Pi.getTargetData(n,e).next((o=>o?(a=o,Se.resolve(a)):r.Pi.allocateTargetId(n).next((c=>(a=new wo(e,c,"TargetPurposeListen",n.currentSequenceNumber),r.Pi.addTargetData(n,a).next((()=>a)))))))})).then((n=>{const a=r.Ms.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(n.targetId,n),r.xs.set(e,n.targetId)),n}))}async function tx(t,e,r){const n=dt(t),a=n.Ms.get(e),o=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",o,(c=>n.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!bu(c))throw c;We(qx,`Failed to update sequence numbers for target ${e}: ${c}`)}n.Ms=n.Ms.remove(e),n.xs.delete(a.target)}function xw(t,e,r){const n=dt(t);let a=ct.min(),o=Nt();return n.persistence.runTransaction("Execute query","readwrite",(c=>(function(m,h,p){const v=dt(m),y=v.xs.get(p);return y!==void 0?Se.resolve(v.Ms.get(y)):v.Pi.getTargetData(h,p)})(n,c,Ms(e)).next((d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(c,d.targetId).next((m=>{o=m}))})).next((()=>n.Fs.getDocumentsMatchingQuery(c,e,r?a:ct.min(),r?o:Nt()))).next((d=>(OO(n,yk(e),d),{documents:d,Qs:o})))))}function OO(t,e,r){let n=t.Os.get(e)||ct.min();r.forEach(((a,o)=>{o.readTime.compareTo(n)>0&&(n=o.readTime)})),t.Os.set(e,n)}class yw{constructor(){this.activeTargetIds=bk()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class MO{constructor(){this.Mo=new yw,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,r,n){this.xo[e]=r}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new yw,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class FO{Oo(e){}shutdown(){}}const _w="ConnectivityMonitor";class Ew{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){We(_w,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){We(_w,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Em=null;function rx(){return Em===null?Em=(function(){return 268435456+Math.round(2147483648*Math.random())})():Em++,"0x"+Em.toString(16)}const vv="RestConnection",PO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class LO{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+e.host,this.Ko=`projects/${n}/databases/${a}`,this.Wo=this.databaseId.database===t0?`project_id=${n}`:`project_id=${n}&database_id=${a}`}Go(e,r,n,a,o){const c=rx(),d=this.zo(e,r.toUriEncodedString());We(vv,`Sending RPC '${e}' ${c}:`,d,n);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,a,o);const{host:h}=new URL(d),p=_u(h);return this.Jo(e,d,m,n,p).then((v=>(We(vv,`Received RPC '${e}' ${c}: `,v),v)),(v=>{throw hu(vv,`RPC '${e}' ${c} failed with error: `,v,"url: ",d,"request:",n),v}))}Ho(e,r,n,a,o,c){return this.Go(e,r,n,a,o)}jo(e,r,n){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Nu})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach(((a,o)=>e[o]=a)),n&&n.headers.forEach(((a,o)=>e[o]=a))}zo(e,r){const n=PO[e];return`${this.Uo}/v1/${r}:${n}`}terminate(){}}class VO{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Tn="WebChannelConnection";class BO extends LO{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,r,n,a,o){const c=rx();return new Promise(((d,m)=>{const h=new ob;h.setWithCredentials(!0),h.listenOnce(lb.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case Pm.NO_ERROR:const v=h.getResponseJson();We(Tn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(v)),d(v);break;case Pm.TIMEOUT:We(Tn,`RPC '${e}' ${c} timed out`),m(new Ge(Te.DEADLINE_EXCEEDED,"Request time out"));break;case Pm.HTTP_ERROR:const y=h.getStatus();if(We(Tn,`RPC '${e}' ${c} failed with status:`,y,"response text:",h.getResponseText()),y>0){let w=h.getResponseJson();Array.isArray(w)&&(w=w[0]);const N=w?.error;if(N&&N.status&&N.message){const E=(function(j){const O=j.toLowerCase().replace(/_/g,"-");return Object.values(Te).indexOf(O)>=0?O:Te.UNKNOWN})(N.status);m(new Ge(E,N.message))}else m(new Ge(Te.UNKNOWN,"Server responded with status "+h.getStatus()))}else m(new Ge(Te.UNAVAILABLE,"Connection failed."));break;default:it(9055,{l_:e,streamId:c,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{We(Tn,`RPC '${e}' ${c} completed.`)}}));const p=JSON.stringify(a);We(Tn,`RPC '${e}' ${c} sending request:`,a),h.send(r,"POST",p,n,15)}))}T_(e,r,n){const a=rx(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=db(),d=ub(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(m.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,r,n),m.encodeInitMessageHeaders=!0;const p=o.join("");We(Tn,`Creating RPC '${e}' stream ${a}: ${p}`,m);const v=c.createWebChannel(p,m);this.I_(v);let y=!1,w=!1;const N=new VO({Yo:T=>{w?We(Tn,`Not sending because RPC '${e}' stream ${a} is closed:`,T):(y||(We(Tn,`Opening RPC '${e}' stream ${a} transport.`),v.open(),y=!0),We(Tn,`RPC '${e}' stream ${a} sending:`,T),v.send(T))},Zo:()=>v.close()}),E=(T,j,O)=>{T.listen(j,(P=>{try{O(P)}catch(z){setTimeout((()=>{throw z}),0)}}))};return E(v,Yd.EventType.OPEN,(()=>{w||(We(Tn,`RPC '${e}' stream ${a} transport opened.`),N.o_())})),E(v,Yd.EventType.CLOSE,(()=>{w||(w=!0,We(Tn,`RPC '${e}' stream ${a} transport closed`),N.a_(),this.E_(v))})),E(v,Yd.EventType.ERROR,(T=>{w||(w=!0,hu(Tn,`RPC '${e}' stream ${a} transport errored. Name:`,T.name,"Message:",T.message),N.a_(new Ge(Te.UNAVAILABLE,"The operation could not be completed")))})),E(v,Yd.EventType.MESSAGE,(T=>{if(!w){const j=T.data[0];Ot(!!j,16349);const O=j,P=O?.error||O[0]?.error;if(P){We(Tn,`RPC '${e}' stream ${a} received error:`,P);const z=P.status;let Q=(function(k){const S=Dr[k];if(S!==void 0)return Gb(S)})(z),U=P.message;Q===void 0&&(Q=Te.INTERNAL,U="Unknown error status: "+z+" with message "+P.message),w=!0,N.a_(new Ge(Q,U)),v.close()}else We(Tn,`RPC '${e}' stream ${a} received:`,j),N.u_(j)}})),E(d,cb.STAT_EVENT,(T=>{T.stat===Hv.PROXY?We(Tn,`RPC '${e}' stream ${a} detected buffering proxy`):T.stat===Hv.NOPROXY&&We(Tn,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{N.__()}),0),N}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((r=>r===e))}}function xv(){return typeof document<"u"?document:null}function q0(t){return new qk(t,!0)}class sS{constructor(e,r,n=1e3,a=1.5,o=6e4){this.Mi=e,this.timerId=r,this.d_=n,this.A_=a,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const r=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),a=Math.max(0,r-n);a>0&&We("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const ww="PersistentStream";class iS{constructor(e,r,n,a,o,c,d,m){this.Mi=e,this.S_=n,this.b_=a,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new sS(e,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():r&&r.code===Te.RESOURCE_EXHAUSTED?(bi(r.toString()),bi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===Te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(r)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,a])=>{this.D_===r&&this.G_(n,a)}),(n=>{e((()=>{const a=new Ge(Te.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(a)}))}))}G_(e,r){const n=this.W_(this.D_);this.stream=this.j_(e,r),this.stream.Xo((()=>{n((()=>this.listener.Xo()))})),this.stream.t_((()=>{n((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{n((()=>this.z_(a)))})),this.stream.onMessage((a=>{n((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return We(ww,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return r=>{this.Mi.enqueueAndForget((()=>this.D_===e?r():(We(ww,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class UO extends iS{constructor(e,r,n,a,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,a,c),this.serializer=o}j_(e,r){return this.connection.T_("Listen",e,r)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const r=Wk(this.serializer,e),n=(function(o){if(!("targetChange"in o))return ct.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?ct.min():c.readTime?Fs(c.readTime):ct.min()})(e);return this.listener.H_(r,n)}Y_(e){const r={};r.database=ex(this.serializer),r.addTarget=(function(o,c){let d;const m=c.target;if(d=Yv(m)?{documents:Xk(o,m)}:{query:Qk(o,m).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=Yb(o,c.resumeToken);const h=Qv(o,c.expectedCount);h!==null&&(d.expectedCount=h)}else if(c.snapshotVersion.compareTo(ct.min())>0){d.readTime=i0(o,c.snapshotVersion.toTimestamp());const h=Qv(o,c.expectedCount);h!==null&&(d.expectedCount=h)}return d})(this.serializer,e);const n=Zk(this.serializer,e);n&&(r.labels=n),this.q_(r)}Z_(e){const r={};r.database=ex(this.serializer),r.removeTarget=e,this.q_(r)}}class zO extends iS{constructor(e,r,n,a,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,a,c),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,r){return this.connection.T_("Write",e,r)}J_(e){return Ot(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ot(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ot(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const r=Kk(e.writeResults,e.commitTime),n=Fs(e.commitTime);return this.listener.na(n,r)}ra(){const e={};e.database=ex(this.serializer),this.q_(e)}ea(e){const r={streamToken:this.lastStreamToken,writes:e.map((n=>Yk(this.serializer,n)))};this.q_(r)}}class HO{}class qO extends HO{constructor(e,r,n,a){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new Ge(Te.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,r,n,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Go(e,Jv(r,n),a,o,c))).catch((o=>{throw o.name==="FirebaseError"?(o.code===Te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ge(Te.UNKNOWN,o.toString())}))}Ho(e,r,n,a,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Ho(e,Jv(r,n),a,c,d,o))).catch((c=>{throw c.name==="FirebaseError"?(c.code===Te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ge(Te.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class GO{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(bi(r),this.aa=!1):We("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Bl="RemoteStore";class $O{constructor(e,r,n,a,o){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((c=>{n.enqueueAndForget((async()=>{Wl(this)&&(We(Bl,"Restarting streams for network reachability change."),await(async function(m){const h=dt(m);h.Ea.add(4),await Uh(h),h.Ra.set("Unknown"),h.Ea.delete(4),await G0(h)})(this))}))})),this.Ra=new GO(n,a)}}async function G0(t){if(Wl(t))for(const e of t.da)await e(!0)}async function Uh(t){for(const e of t.da)await e(!1)}function oS(t,e){const r=dt(t);r.Ia.has(e.targetId)||(r.Ia.set(e.targetId,e),Yx(r)?Wx(r):ju(r).O_()&&$x(r,e))}function Gx(t,e){const r=dt(t),n=ju(r);r.Ia.delete(e),n.O_()&&lS(r,e),r.Ia.size===0&&(n.O_()?n.L_():Wl(r)&&r.Ra.set("Unknown"))}function $x(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ct.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}ju(t).Y_(e)}function lS(t,e){t.Va.Ue(e),ju(t).Z_(e)}function Wx(t){t.Va=new Bk({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),ju(t).start(),t.Ra.ua()}function Yx(t){return Wl(t)&&!ju(t).x_()&&t.Ia.size>0}function Wl(t){return dt(t).Ea.size===0}function cS(t){t.Va=void 0}async function WO(t){t.Ra.set("Online")}async function YO(t){t.Ia.forEach(((e,r)=>{$x(t,e)}))}async function KO(t,e){cS(t),Yx(t)?(t.Ra.ha(e),Wx(t)):t.Ra.set("Unknown")}async function XO(t,e,r){if(t.Ra.set("Online"),e instanceof Wb&&e.state===2&&e.cause)try{await(async function(a,o){const c=o.cause;for(const d of o.targetIds)a.Ia.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.Ia.delete(d),a.Va.removeTarget(d))})(t,e)}catch(n){We(Bl,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await l0(t,n)}else if(e instanceof Um?t.Va.Ze(e):e instanceof $b?t.Va.st(e):t.Va.tt(e),!r.isEqual(ct.min()))try{const n=await aS(t.localStore);r.compareTo(n)>=0&&await(function(o,c){const d=o.Va.Tt(c);return d.targetChanges.forEach(((m,h)=>{if(m.resumeToken.approximateByteSize()>0){const p=o.Ia.get(h);p&&o.Ia.set(h,p.withResumeToken(m.resumeToken,c))}})),d.targetMismatches.forEach(((m,h)=>{const p=o.Ia.get(m);if(!p)return;o.Ia.set(m,p.withResumeToken(xn.EMPTY_BYTE_STRING,p.snapshotVersion)),lS(o,m);const v=new wo(p.target,m,h,p.sequenceNumber);$x(o,v)})),o.remoteSyncer.applyRemoteEvent(d)})(t,r)}catch(n){We(Bl,"Failed to raise snapshot:",n),await l0(t,n)}}async function l0(t,e,r){if(!bu(e))throw e;t.Ea.add(1),await Uh(t),t.Ra.set("Offline"),r||(r=()=>aS(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{We(Bl,"Retrying IndexedDB access"),await r(),t.Ea.delete(1),await G0(t)}))}function uS(t,e){return e().catch((r=>l0(t,r,e)))}async function $0(t){const e=dt(t),r=Lo(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Rx;for(;QO(e);)try{const a=await IO(e.localStore,n);if(a===null){e.Ta.length===0&&r.L_();break}n=a.batchId,JO(e,a)}catch(a){await l0(e,a)}dS(e)&&hS(e)}function QO(t){return Wl(t)&&t.Ta.length<10}function JO(t,e){t.Ta.push(e);const r=Lo(t);r.O_()&&r.X_&&r.ea(e.mutations)}function dS(t){return Wl(t)&&!Lo(t).x_()&&t.Ta.length>0}function hS(t){Lo(t).start()}async function ZO(t){Lo(t).ra()}async function e6(t){const e=Lo(t);for(const r of t.Ta)e.ea(r.mutations)}async function t6(t,e,r){const n=t.Ta.shift(),a=Lx.from(n,e,r);await uS(t,(()=>t.remoteSyncer.applySuccessfulWrite(a))),await $0(t)}async function r6(t,e){e&&Lo(t).X_&&await(async function(n,a){if((function(c){return Pk(c)&&c!==Te.ABORTED})(a.code)){const o=n.Ta.shift();Lo(n).B_(),await uS(n,(()=>n.remoteSyncer.rejectFailedWrite(o.batchId,a))),await $0(n)}})(t,e),dS(t)&&hS(t)}async function Nw(t,e){const r=dt(t);r.asyncQueue.verifyOperationInProgress(),We(Bl,"RemoteStore received new credentials");const n=Wl(r);r.Ea.add(3),await Uh(r),n&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.Ea.delete(3),await G0(r)}async function n6(t,e){const r=dt(t);e?(r.Ea.delete(2),await G0(r)):e||(r.Ea.add(2),await Uh(r),r.Ra.set("Unknown"))}function ju(t){return t.ma||(t.ma=(function(r,n,a){const o=dt(r);return o.sa(),new UO(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,a)})(t.datastore,t.asyncQueue,{Xo:WO.bind(null,t),t_:YO.bind(null,t),r_:KO.bind(null,t),H_:XO.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),Yx(t)?Wx(t):t.Ra.set("Unknown")):(await t.ma.stop(),cS(t))}))),t.ma}function Lo(t){return t.fa||(t.fa=(function(r,n,a){const o=dt(r);return o.sa(),new zO(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,a)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:ZO.bind(null,t),r_:r6.bind(null,t),ta:e6.bind(null,t),na:t6.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await $0(t)):(await t.fa.stop(),t.Ta.length>0&&(We(Bl,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class Kx{constructor(e,r,n,a,o){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=a,this.removalCallback=o,this.deferred=new xi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,a,o){const c=Date.now()+n,d=new Kx(e,r,c,a,o);return d.start(n),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ge(Te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xx(t,e){if(bi("AsyncQueue",`${e}: ${t}`),bu(t))return new Ge(Te.UNAVAILABLE,`${e}: ${t}`);throw t}class au{static emptySet(e){return new au(e.comparator)}constructor(e){this.comparator=e?(r,n)=>e(r,n)||rt.comparator(r.key,n.key):(r,n)=>rt.comparator(r.key,n.key),this.keyedMap=Kd(),this.sortedSet=new fr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((r,n)=>(e(r),!1)))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof au)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,o=n.getNext().key;if(!a.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((r=>{e.push(r.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new au;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}class Tw{constructor(){this.ga=new fr(rt.comparator)}track(e){const r=e.doc.key,n=this.ga.get(r);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(r,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(r):e.type===1&&n.type===2?this.ga=this.ga.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):it(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(r,e)}ya(){const e=[];return this.ga.inorderTraversal(((r,n)=>{e.push(n)})),e}}class vu{constructor(e,r,n,a,o,c,d,m,h){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=m,this.hasCachedResults=h}static fromInitialDocuments(e,r,n,a,o){const c=[];return r.forEach((d=>{c.push({type:0,doc:d})})),new vu(e,r,au.emptySet(r),c,n,a,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&V0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==n[a].type||!r[a].doc.isEqual(n[a].doc))return!1;return!0}}class a6{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class s6{constructor(){this.queries=bw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const a=dt(r),o=a.queries;a.queries=bw(),o.forEach(((c,d)=>{for(const m of d.Sa)m.onError(n)}))})(this,new Ge(Te.ABORTED,"Firestore shutting down"))}}function bw(){return new $l((t=>kb(t)),V0)}async function fS(t,e){const r=dt(t);let n=3;const a=e.query;let o=r.queries.get(a);o?!o.ba()&&e.Da()&&(n=2):(o=new a6,n=e.Da()?0:1);try{switch(n){case 0:o.wa=await r.onListen(a,!0);break;case 1:o.wa=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(c){const d=Xx(c,`Initialization of query '${Kc(e.query)}' failed`);return void e.onError(d)}r.queries.set(a,o),o.Sa.push(e),e.va(r.onlineState),o.wa&&e.Fa(o.wa)&&Qx(r)}async function mS(t,e){const r=dt(t),n=e.query;let a=3;const o=r.queries.get(n);if(o){const c=o.Sa.indexOf(e);c>=0&&(o.Sa.splice(c,1),o.Sa.length===0?a=e.Da()?0:1:!o.ba()&&e.Da()&&(a=2))}switch(a){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function i6(t,e){const r=dt(t);let n=!1;for(const a of e){const o=a.query,c=r.queries.get(o);if(c){for(const d of c.Sa)d.Fa(a)&&(n=!0);c.wa=a}}n&&Qx(r)}function o6(t,e,r){const n=dt(t),a=n.queries.get(e);if(a)for(const o of a.Sa)o.onError(r);n.queries.delete(e)}function Qx(t){t.Ca.forEach((e=>{e.next()}))}var nx,Sw;(Sw=nx||(nx={})).Ma="default",Sw.Cache="cache";class pS{constructor(e,r,n){this.query=e,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const a of e.docChanges)a.type!==3&&n.push(a);e=new vu(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),r=!0):this.La(e,this.onlineState)&&(this.ka(e),r=!0),this.Na=e,r}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),r=!0),r}La(e,r){if(!e.fromCache||!this.Da())return!0;const n=r!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(e){e=vu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==nx.Cache}}class gS{constructor(e){this.key=e}}class vS{constructor(e){this.key=e}}class l6{constructor(e,r){this.query=e,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Nt(),this.mutatedKeys=Nt(),this.eu=Ob(e),this.tu=new au(this.eu)}get nu(){return this.Ya}ru(e,r){const n=r?r.iu:new Tw,a=r?r.tu:this.tu;let o=r?r.mutatedKeys:this.mutatedKeys,c=a,d=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,h=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((p,v)=>{const y=a.get(p),w=B0(this.query,v)?v:null,N=!!y&&this.mutatedKeys.has(y.key),E=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let T=!1;y&&w?y.data.isEqual(w.data)?N!==E&&(n.track({type:3,doc:w}),T=!0):this.su(y,w)||(n.track({type:2,doc:w}),T=!0,(m&&this.eu(w,m)>0||h&&this.eu(w,h)<0)&&(d=!0)):!y&&w?(n.track({type:0,doc:w}),T=!0):y&&!w&&(n.track({type:1,doc:y}),T=!0,(m||h)&&(d=!0)),T&&(w?(c=c.add(w),o=E?o.add(p):o.delete(p)):(c=c.delete(p),o=o.delete(p)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const p=this.query.limitType==="F"?c.last():c.first();c=c.delete(p.key),o=o.delete(p.key),n.track({type:1,doc:p})}return{tu:c,iu:n,Cs:d,mutatedKeys:o}}su(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,a){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((p,v)=>(function(w,N){const E=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return it(20277,{Rt:T})}};return E(w)-E(N)})(p.type,v.type)||this.eu(p.doc,v.doc))),this.ou(n),a=a??!1;const d=r&&!a?this._u():[],m=this.Xa.size===0&&this.current&&!a?1:0,h=m!==this.Za;return this.Za=m,c.length!==0||h?{snapshot:new vu(this.query,e.tu,o,c,e.mutatedKeys,m===0,h,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Tw,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((r=>this.Ya=this.Ya.add(r))),e.modifiedDocuments.forEach((r=>{})),e.removedDocuments.forEach((r=>this.Ya=this.Ya.delete(r))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Nt(),this.tu.forEach((n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))}));const r=[];return e.forEach((n=>{this.Xa.has(n)||r.push(new vS(n))})),this.Xa.forEach((n=>{e.has(n)||r.push(new gS(n))})),r}cu(e){this.Ya=e.Qs,this.Xa=Nt();const r=this.ru(e.documents);return this.applyChanges(r,!0)}lu(){return vu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Jx="SyncEngine";class c6{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class u6{constructor(e){this.key=e,this.hu=!1}}class d6{constructor(e,r,n,a,o,c){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=a,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new $l((d=>kb(d)),V0),this.Iu=new Map,this.Eu=new Set,this.du=new fr(rt.comparator),this.Au=new Map,this.Ru=new Ux,this.Vu={},this.mu=new Map,this.fu=gu.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function h6(t,e,r=!0){const n=NS(t);let a;const o=n.Tu.get(e);return o?(n.sharedClientState.addLocalQueryTarget(o.targetId),a=o.view.lu()):a=await xS(n,e,r,!0),a}async function f6(t,e){const r=NS(t);await xS(r,e,!0,!1)}async function xS(t,e,r,n){const a=await kO(t.localStore,Ms(e)),o=a.targetId,c=t.sharedClientState.addLocalQueryTarget(o,r);let d;return n&&(d=await m6(t,e,o,c==="current",a.resumeToken)),t.isPrimaryClient&&r&&oS(t.remoteStore,a),d}async function m6(t,e,r,n,a){t.pu=(v,y,w)=>(async function(E,T,j,O){let P=T.view.ru(j);P.Cs&&(P=await xw(E.localStore,T.query,!1).then((({documents:C})=>T.view.ru(C,P))));const z=O&&O.targetChanges.get(T.targetId),Q=O&&O.targetMismatches.get(T.targetId)!=null,U=T.view.applyChanges(P,E.isPrimaryClient,z,Q);return Cw(E,T.targetId,U.au),U.snapshot})(t,v,y,w);const o=await xw(t.localStore,e,!0),c=new l6(e,o.Qs),d=c.ru(o.documents),m=Bh.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",a),h=c.applyChanges(d,t.isPrimaryClient,m);Cw(t,r,h.au);const p=new c6(e,r,c);return t.Tu.set(e,p),t.Iu.has(r)?t.Iu.get(r).push(e):t.Iu.set(r,[e]),h.snapshot}async function p6(t,e,r){const n=dt(t),a=n.Tu.get(e),o=n.Iu.get(a.targetId);if(o.length>1)return n.Iu.set(a.targetId,o.filter((c=>!V0(c,e)))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await tx(n.localStore,a.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(a.targetId),r&&Gx(n.remoteStore,a.targetId),ax(n,a.targetId)})).catch(Tu)):(ax(n,a.targetId),await tx(n.localStore,a.targetId,!0))}async function g6(t,e){const r=dt(t),n=r.Tu.get(e),a=r.Iu.get(n.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),Gx(r.remoteStore,n.targetId))}async function v6(t,e,r){const n=T6(t);try{const a=await(function(c,d){const m=dt(c),h=Ke.now(),p=d.reduce(((w,N)=>w.add(N.key)),Nt());let v,y;return m.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let N=Si(),E=Nt();return m.Ns.getEntries(w,p).next((T=>{N=T,N.forEach(((j,O)=>{O.isValidDocument()||(E=E.add(j))}))})).next((()=>m.localDocuments.getOverlayedDocuments(w,N))).next((T=>{v=T;const j=[];for(const O of d){const P=Ik(O,v.get(O.key).overlayedDocument);P!=null&&j.push(new Wo(O.key,P,bb(P.value.mapValue),Ba.exists(!0)))}return m.mutationQueue.addMutationBatch(w,h,j,d)})).next((T=>{y=T;const j=T.applyToLocalDocumentSet(v,E);return m.documentOverlayCache.saveOverlays(w,T.batchId,j)}))})).then((()=>({batchId:y.batchId,changes:Fb(v)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(a.batchId),(function(c,d,m){let h=c.Vu[c.currentUser.toKey()];h||(h=new fr(wt)),h=h.insert(d,m),c.Vu[c.currentUser.toKey()]=h})(n,a.batchId,r),await zh(n,a.changes),await $0(n.remoteStore)}catch(a){const o=Xx(a,"Failed to persist write");r.reject(o)}}async function yS(t,e){const r=dt(t);try{const n=await RO(r.localStore,e);e.targetChanges.forEach(((a,o)=>{const c=r.Au.get(o);c&&(Ot(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?Ot(c.hu,14607):a.removedDocuments.size>0&&(Ot(c.hu,42227),c.hu=!1))})),await zh(r,n,e)}catch(n){await Tu(n)}}function jw(t,e,r){const n=dt(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const a=[];n.Tu.forEach(((o,c)=>{const d=c.view.va(e);d.snapshot&&a.push(d.snapshot)})),(function(c,d){const m=dt(c);m.onlineState=d;let h=!1;m.queries.forEach(((p,v)=>{for(const y of v.Sa)y.va(d)&&(h=!0)})),h&&Qx(m)})(n.eventManager,e),a.length&&n.Pu.H_(a),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function x6(t,e,r){const n=dt(t);n.sharedClientState.updateQueryState(e,"rejected",r);const a=n.Au.get(e),o=a&&a.key;if(o){let c=new fr(rt.comparator);c=c.insert(o,Sn.newNoDocument(o,ct.min()));const d=Nt().add(o),m=new H0(ct.min(),new Map,new fr(wt),c,d);await yS(n,m),n.du=n.du.remove(o),n.Au.delete(e),Zx(n)}else await tx(n.localStore,e,!1).then((()=>ax(n,e,r))).catch(Tu)}async function y6(t,e){const r=dt(t),n=e.batch.batchId;try{const a=await AO(r.localStore,e);ES(r,n,null),_S(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await zh(r,a)}catch(a){await Tu(a)}}async function _6(t,e,r){const n=dt(t);try{const a=await(function(c,d){const m=dt(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let p;return m.mutationQueue.lookupMutationBatch(h,d).next((v=>(Ot(v!==null,37113),p=v.keys(),m.mutationQueue.removeMutationBatch(h,v)))).next((()=>m.mutationQueue.performConsistencyCheck(h))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(h,p,d))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p))).next((()=>m.localDocuments.getDocuments(h,p)))}))})(n.localStore,e);ES(n,e,r),_S(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await zh(n,a)}catch(a){await Tu(a)}}function _S(t,e){(t.mu.get(e)||[]).forEach((r=>{r.resolve()})),t.mu.delete(e)}function ES(t,e,r){const n=dt(t);let a=n.Vu[n.currentUser.toKey()];if(a){const o=a.get(e);o&&(r?o.reject(r):o.resolve(),a=a.remove(e)),n.Vu[n.currentUser.toKey()]=a}}function ax(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Iu.get(e))t.Tu.delete(n),r&&t.Pu.yu(n,r);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((n=>{t.Ru.containsKey(n)||wS(t,n)}))}function wS(t,e){t.Eu.delete(e.path.canonicalString());const r=t.du.get(e);r!==null&&(Gx(t.remoteStore,r),t.du=t.du.remove(e),t.Au.delete(r),Zx(t))}function Cw(t,e,r){for(const n of r)n instanceof gS?(t.Ru.addReference(n.key,e),E6(t,n)):n instanceof vS?(We(Jx,"Document no longer in limbo: "+n.key),t.Ru.removeReference(n.key,e),t.Ru.containsKey(n.key)||wS(t,n.key)):it(19791,{wu:n})}function E6(t,e){const r=e.key,n=r.path.canonicalString();t.du.get(r)||t.Eu.has(n)||(We(Jx,"New document in limbo: "+r),t.Eu.add(n),Zx(t))}function Zx(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const r=new rt(ar.fromString(e)),n=t.fu.next();t.Au.set(n,new u6(r)),t.du=t.du.insert(r,n),oS(t.remoteStore,new wo(Ms(Mx(r.path)),n,"TargetPurposeLimboResolution",F0.ce))}}async function zh(t,e,r){const n=dt(t),a=[],o=[],c=[];n.Tu.isEmpty()||(n.Tu.forEach(((d,m)=>{c.push(n.pu(m,e,r).then((h=>{if((h||r)&&n.isPrimaryClient){const p=h?!h.fromCache:r?.targetChanges.get(m.targetId)?.current;n.sharedClientState.updateQueryState(m.targetId,p?"current":"not-current")}if(h){a.push(h);const p=Hx.As(m.targetId,h);o.push(p)}})))})),await Promise.all(c),n.Pu.H_(a),await(async function(m,h){const p=dt(m);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>Se.forEach(h,(y=>Se.forEach(y.Es,(w=>p.persistence.referenceDelegate.addReference(v,y.targetId,w))).next((()=>Se.forEach(y.ds,(w=>p.persistence.referenceDelegate.removeReference(v,y.targetId,w)))))))))}catch(v){if(!bu(v))throw v;We(qx,"Failed to update sequence numbers: "+v)}for(const v of h){const y=v.targetId;if(!v.fromCache){const w=p.Ms.get(y),N=w.snapshotVersion,E=w.withLastLimboFreeSnapshotVersion(N);p.Ms=p.Ms.insert(y,E)}}})(n.localStore,o))}async function w6(t,e){const r=dt(t);if(!r.currentUser.isEqual(e)){We(Jx,"User change. New user:",e.toKey());const n=await nS(r.localStore,e);r.currentUser=e,(function(o,c){o.mu.forEach((d=>{d.forEach((m=>{m.reject(new Ge(Te.CANCELLED,c))}))})),o.mu.clear()})(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await zh(r,n.Ls)}}function N6(t,e){const r=dt(t),n=r.Au.get(e);if(n&&n.hu)return Nt().add(n.key);{let a=Nt();const o=r.Iu.get(e);if(!o)return a;for(const c of o){const d=r.Tu.get(c);a=a.unionWith(d.view.nu)}return a}}function NS(t){const e=dt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=yS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=N6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=x6.bind(null,e),e.Pu.H_=i6.bind(null,e.eventManager),e.Pu.yu=o6.bind(null,e.eventManager),e}function T6(t){const e=dt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=y6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_6.bind(null,e),e}class c0{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=q0(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,r){return null}Mu(e,r){return null}vu(e){return CO(this.persistence,new bO,e.initialUser,this.serializer)}Cu(e){return new rS(zx.mi,this.serializer)}Du(e){return new MO}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}c0.provider={build:()=>new c0};class b6 extends c0{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,r){Ot(this.persistence.referenceDelegate instanceof o0,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new uO(n,e.asyncQueue,r)}Cu(e){const r=this.cacheSizeBytes!==void 0?Xn.withCacheSize(this.cacheSizeBytes):Xn.DEFAULT;return new rS((n=>o0.mi(n,r)),this.serializer)}}class sx{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>jw(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=w6.bind(null,this.syncEngine),await n6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new s6})()}createDatastore(e){const r=q0(e.databaseInfo.databaseId),n=(function(o){return new BO(o)})(e.databaseInfo);return(function(o,c,d,m){return new qO(o,c,d,m)})(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return(function(n,a,o,c,d){return new $O(n,a,o,c,d)})(this.localStore,this.datastore,e.asyncQueue,(r=>jw(this.syncEngine,r,0)),(function(){return Ew.v()?new Ew:new FO})())}createSyncEngine(e,r){return(function(a,o,c,d,m,h,p){const v=new d6(a,o,c,d,m,h);return p&&(v.gu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){await(async function(r){const n=dt(r);We(Bl,"RemoteStore shutting down."),n.Ea.add(5),await Uh(n),n.Aa.shutdown(),n.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}sx.provider={build:()=>new sx};class TS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):bi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,r){setTimeout((()=>{this.muted||e(r)}),0)}}const Vo="FirestoreClient";class S6{constructor(e,r,n,a,o){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=a,this.user=bn.UNAUTHENTICATED,this.clientId=Ax.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(n,(async c=>{We(Vo,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(n,(c=>(We(Vo,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new xi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=Xx(r,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function yv(t,e){t.asyncQueue.verifyOperationInProgress(),We(Vo,"Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener((async a=>{n.isEqual(a)||(await nS(e.localStore,a),n=a)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function Aw(t,e){t.asyncQueue.verifyOperationInProgress();const r=await j6(t);We(Vo,"Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener((n=>Nw(e.remoteStore,n))),t.setAppCheckTokenChangeListener(((n,a)=>Nw(e.remoteStore,a))),t._onlineComponents=e}async function j6(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){We(Vo,"Using user provided OfflineComponentProvider");try{await yv(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!(function(a){return a.name==="FirebaseError"?a.code===Te.FAILED_PRECONDITION||a.code===Te.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(r))throw r;hu("Error using user provided cache. Falling back to memory cache: "+r),await yv(t,new c0)}}else We(Vo,"Using default OfflineComponentProvider"),await yv(t,new b6(void 0));return t._offlineComponents}async function bS(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(We(Vo,"Using user provided OnlineComponentProvider"),await Aw(t,t._uninitializedComponentsProvider._online)):(We(Vo,"Using default OnlineComponentProvider"),await Aw(t,new sx))),t._onlineComponents}function C6(t){return bS(t).then((e=>e.syncEngine))}async function SS(t){const e=await bS(t),r=e.eventManager;return r.onListen=h6.bind(null,e.syncEngine),r.onUnlisten=p6.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=f6.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=g6.bind(null,e.syncEngine),r}function A6(t,e,r={}){const n=new xi;return t.asyncQueue.enqueueAndForget((async()=>(function(o,c,d,m,h){const p=new TS({next:y=>{p.Nu(),c.enqueueAndForget((()=>mS(o,v)));const w=y.docs.has(d);!w&&y.fromCache?h.reject(new Ge(Te.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&y.fromCache&&m&&m.source==="server"?h.reject(new Ge(Te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(y)},error:y=>h.reject(y)}),v=new pS(Mx(d.path),p,{includeMetadataChanges:!0,qa:!0});return fS(o,v)})(await SS(t),t.asyncQueue,e,r,n))),n.promise}function R6(t,e,r={}){const n=new xi;return t.asyncQueue.enqueueAndForget((async()=>(function(o,c,d,m,h){const p=new TS({next:y=>{p.Nu(),c.enqueueAndForget((()=>mS(o,v))),y.fromCache&&m.source==="server"?h.reject(new Ge(Te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(y)},error:y=>h.reject(y)}),v=new pS(d,p,{includeMetadataChanges:!0,qa:!0});return fS(o,v)})(await SS(t),t.asyncQueue,e,r,n))),n.promise}function jS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const Rw=new Map;const CS="firestore.googleapis.com",Dw=!0;class Iw{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ge(Te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=CS,this.ssl=Dw}else this.host=e.host,this.ssl=e.ssl??Dw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=tS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<lO)throw new Ge(Te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jS(e.experimentalLongPollingOptions??{}),(function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new Ge(Te.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new Ge(Te.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new Ge(Te.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,a){return n.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class W0{constructor(e,r,n,a){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Iw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ge(Te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ge(Te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Iw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new F3;switch(n.type){case"firstParty":return new B3(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Ge(Te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(r){const n=Rw.get(r);n&&(We("ComponentProvider","Removing Datastore"),Rw.delete(r),n.terminate())})(this),Promise.resolve()}}function D6(t,e,r,n={}){t=us(t,W0);const a=_u(e),o=t._getSettings(),c={...o,emulatorOptions:t._getEmulatorOptions()},d=`${e}:${r}`;a&&(xT(`https://${d}`),yT("Firestore",!0)),o.host!==CS&&o.host!==d&&hu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...o,host:d,ssl:a,emulatorOptions:n};if(!Ml(m,c)&&(t._setSettings(m),n.mockUserToken)){let h,p;if(typeof n.mockUserToken=="string")h=n.mockUserToken,p=bn.MOCK_USER;else{h=$R(n.mockUserToken,t._app?.options.projectId);const v=n.mockUserToken.sub||n.mockUserToken.user_id;if(!v)throw new Ge(Te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new bn(v)}t._authCredentials=new P3(new fb(h,p))}}class Yl{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Yl(this.firestore,e,this._query)}}class br{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Do(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new br(this.firestore,e,this._key)}toJSON(){return{type:br._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,r,n){if(Lh(r,br._jsonSchema))return new br(e,n||null,new rt(ar.fromString(r.referencePath)))}}br._jsonSchemaVersion="firestore/documentReference/1.0",br._jsonSchema={type:kr("string",br._jsonSchemaVersion),referencePath:kr("string")};class Do extends Yl{constructor(e,r,n){super(e,r,Mx(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new br(this.firestore,null,new rt(e))}withConverter(e){return new Do(this.firestore,e,this._path)}}function kt(t,e,...r){if(t=rn(t),mb("collection","path",e),t instanceof W0){const n=ar.fromString(e,...r);return GE(n),new Do(t,null,n)}{if(!(t instanceof br||t instanceof Do))throw new Ge(Te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(ar.fromString(e,...r));return GE(n),new Do(t.firestore,null,n)}}function Zt(t,e,...r){if(t=rn(t),arguments.length===1&&(e=Ax.newId()),mb("doc","path",e),t instanceof W0){const n=ar.fromString(e,...r);return qE(n),new br(t,null,new rt(n))}{if(!(t instanceof br||t instanceof Do))throw new Ge(Te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(ar.fromString(e,...r));return qE(n),new br(t.firestore,t instanceof Do?t.converter:null,new rt(n))}}const kw="AsyncQueue";class Ow{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new sS(this,"async_queue_retry"),this._c=()=>{const n=xv();n&&We(kw,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const r=xv();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const r=xv();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const r=new xi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise))).then((()=>r.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!bu(e))throw e;We(kw,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const r=this.ac.then((()=>(this.rc=!0,e().catch((n=>{throw this.nc=n,this.rc=!1,bi("INTERNAL UNHANDLED ERROR: ",Mw(n)),n})).then((n=>(this.rc=!1,n))))));return this.ac=r,r}enqueueAfterDelay(e,r,n){this.uc(),this.oc.indexOf(e)>-1&&(r=0);const a=Kx.createAndSchedule(this,e,r,n,(o=>this.hc(o)));return this.tc.push(a),a}uc(){this.nc&&it(47125,{Pc:Mw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const r of this.tc)if(r.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((r,n)=>r.targetTimeMs-n.targetTimeMs));for(const r of this.tc)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const r=this.tc.indexOf(e);this.tc.splice(r,1)}}function Mw(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Kl extends W0{constructor(e,r,n,a){super(e,r,n,a),this.type="firestore",this._queue=new Ow,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ow(e),this._firestoreClient=void 0,await e}}}function I6(t,e){const r=typeof t=="object"?t:NT(),n=typeof t=="string"?t:t0,a=yx(r,"firestore").getImmediate({identifier:n});if(!a._initialized){const o=qR("firestore");o&&D6(a,...o)}return a}function e1(t){if(t._terminated)throw new Ge(Te.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||k6(t),t._firestoreClient}function k6(t){const e=t._freezeSettings(),r=(function(a,o,c,d){return new nk(a,o,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,jS(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new S6(t._authCredentials,t._appCheckCredentials,t._queue,r,t._componentsProvider&&(function(a){const o=a?._online.build();return{_offline:a?._offline.build(o),_online:o}})(t._componentsProvider))}class Va{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Va(xn.fromBase64String(e))}catch(r){throw new Ge(Te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Va(xn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Va._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Lh(e,Va._jsonSchema))return Va.fromBase64String(e.bytes)}}Va._jsonSchemaVersion="firestore/bytes/1.0",Va._jsonSchema={type:kr("string",Va._jsonSchemaVersion),bytes:kr("string")};class Y0{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new Ge(Te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new hn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class t1{constructor(e){this._methodName=e}}class Ps{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Ge(Te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Ge(Te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return wt(this._lat,e._lat)||wt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ps._jsonSchemaVersion}}static fromJSON(e){if(Lh(e,Ps._jsonSchema))return new Ps(e.latitude,e.longitude)}}Ps._jsonSchemaVersion="firestore/geoPoint/1.0",Ps._jsonSchema={type:kr("string",Ps._jsonSchemaVersion),latitude:kr("number"),longitude:kr("number")};class Ls{constructor(e){this._values=(e||[]).map((r=>r))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,a){if(n.length!==a.length)return!1;for(let o=0;o<n.length;++o)if(n[o]!==a[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ls._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Lh(e,Ls._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((r=>typeof r=="number")))return new Ls(e.vectorValues);throw new Ge(Te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ls._jsonSchemaVersion="firestore/vectorValue/1.0",Ls._jsonSchema={type:kr("string",Ls._jsonSchemaVersion),vectorValues:kr("object")};const O6=/^__.*__$/;class M6{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new Wo(e,this.data,this.fieldMask,r,this.fieldTransforms):new Vh(e,this.data,r,this.fieldTransforms)}}class AS{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new Wo(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function RS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw it(40011,{Ac:t})}}class r1{constructor(e,r,n,a,o,c){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=a,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new r1({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const r=this.path?.child(e),n=this.Vc({path:r,fc:!1});return n.gc(e),n}yc(e){const r=this.path?.child(e),n=this.Vc({path:r,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return u0(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((r=>e.isPrefixOf(r)))!==void 0||this.fieldTransforms.find((r=>e.isPrefixOf(r.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(RS(this.Ac)&&O6.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class F6{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||q0(e)}Cc(e,r,n,a=!1){return new r1({Ac:e,methodName:r,Dc:n,path:hn.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function K0(t){const e=t._freezeSettings(),r=q0(t._databaseId);return new F6(t._databaseId,!!e.ignoreUndefinedProperties,r)}function DS(t,e,r,n,a,o={}){const c=t.Cc(o.merge||o.mergeFields?2:0,e,r,a);n1("Data must be an object, but it was:",c,n);const d=IS(n,c);let m,h;if(o.merge)m=new ya(c.fieldMask),h=c.fieldTransforms;else if(o.mergeFields){const p=[];for(const v of o.mergeFields){const y=ix(e,v,r);if(!c.contains(y))throw new Ge(Te.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);OS(p,y)||p.push(y)}m=new ya(p),h=c.fieldTransforms.filter((v=>m.covers(v.field)))}else m=null,h=c.fieldTransforms;return new M6(new Qn(d),m,h)}class X0 extends t1{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof X0}}function P6(t,e,r,n){const a=t.Cc(1,e,r);n1("Data must be an object, but it was:",a,n);const o=[],c=Qn.empty();$o(n,((m,h)=>{const p=a1(e,m,r);h=rn(h);const v=a.yc(p);if(h instanceof X0)o.push(p);else{const y=Hh(h,v);y!=null&&(o.push(p),c.set(p,y))}}));const d=new ya(o);return new AS(c,d,a.fieldTransforms)}function L6(t,e,r,n,a,o){const c=t.Cc(1,e,r),d=[ix(e,n,r)],m=[a];if(o.length%2!=0)throw new Ge(Te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<o.length;y+=2)d.push(ix(e,o[y])),m.push(o[y+1]);const h=[],p=Qn.empty();for(let y=d.length-1;y>=0;--y)if(!OS(h,d[y])){const w=d[y];let N=m[y];N=rn(N);const E=c.yc(w);if(N instanceof X0)h.push(w);else{const T=Hh(N,E);T!=null&&(h.push(w),p.set(w,T))}}const v=new ya(h);return new AS(p,v,c.fieldTransforms)}function V6(t,e,r,n=!1){return Hh(r,t.Cc(n?4:3,e))}function Hh(t,e){if(kS(t=rn(t)))return n1("Unsupported field value:",e,t),IS(t,e);if(t instanceof t1)return(function(n,a){if(!RS(a.Ac))throw a.Sc(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${n._methodName}() is not currently supported inside arrays`);const o=n._toFieldTransform(a);o&&a.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(n,a){const o=[];let c=0;for(const d of n){let m=Hh(d,a.wc(c));m==null&&(m={nullValue:"NULL_VALUE"}),o.push(m),c++}return{arrayValue:{values:o}}})(t,e)}return(function(n,a){if((n=rn(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Sk(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const o=Ke.fromDate(n);return{timestampValue:i0(a.serializer,o)}}if(n instanceof Ke){const o=new Ke(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:i0(a.serializer,o)}}if(n instanceof Ps)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Va)return{bytesValue:Yb(a.serializer,n._byteString)};if(n instanceof br){const o=a.databaseId,c=n.firestore._databaseId;if(!c.isEqual(o))throw a.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Bx(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof Ls)return(function(c,d){return{mapValue:{fields:{[Nb]:{stringValue:Tb},[r0]:{arrayValue:{values:c.toArray().map((h=>{if(typeof h!="number")throw d.Sc("VectorValues must only contain numeric values.");return Fx(d.serializer,h)}))}}}}}})(n,a);throw a.Sc(`Unsupported field value: ${M0(n)}`)})(t,e)}function IS(t,e){const r={};return vb(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$o(t,((n,a)=>{const o=Hh(a,e.mc(n));o!=null&&(r[n]=o)})),{mapValue:{fields:r}}}function kS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ke||t instanceof Ps||t instanceof Va||t instanceof br||t instanceof t1||t instanceof Ls)}function n1(t,e,r){if(!kS(r)||!pb(r)){const n=M0(r);throw n==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+n)}}function ix(t,e,r){if((e=rn(e))instanceof Y0)return e._internalPath;if(typeof e=="string")return a1(t,e);throw u0("Field path arguments must be of type string or ",t,!1,void 0,r)}const B6=new RegExp("[~\\*/\\[\\]]");function a1(t,e,r){if(e.search(B6)>=0)throw u0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new Y0(...e.split("."))._internalPath}catch{throw u0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function u0(t,e,r,n,a){const o=n&&!n.isEmpty(),c=a!==void 0;let d=`Function ${e}() called with invalid data`;r&&(d+=" (via `toFirestore()`)"),d+=". ";let m="";return(o||c)&&(m+=" (found",o&&(m+=` in field ${n}`),c&&(m+=` in document ${a}`),m+=")"),new Ge(Te.INVALID_ARGUMENT,d+t+m)}function OS(t,e){return t.some((r=>r.isEqual(e)))}class MS{constructor(e,r,n,a,o){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=a,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new br(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new U6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Q0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class U6 extends MS{data(){return super.data()}}function Q0(t,e){return typeof e=="string"?a1(t,e):e instanceof Y0?e._internalPath:e._delegate._internalPath}function z6(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ge(Te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class s1{}class FS extends s1{}function mt(t,e,...r){let n=[];e instanceof s1&&n.push(e),n=n.concat(r),(function(o){const c=o.filter((m=>m instanceof i1)).length,d=o.filter((m=>m instanceof J0)).length;if(c>1||c>0&&d>0)throw new Ge(Te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const a of n)t=a._apply(t);return t}class J0 extends FS{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new J0(e,r,n)}_apply(e){const r=this._parse(e);return PS(e._query,r),new Yl(e.firestore,e.converter,Kv(e._query,r))}_parse(e){const r=K0(e.firestore);return(function(o,c,d,m,h,p,v){let y;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new Ge(Te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){Pw(v,p);const N=[];for(const E of v)N.push(Fw(m,o,E));y={arrayValue:{values:N}}}else y=Fw(m,o,v)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||Pw(v,p),y=V6(d,c,v,p==="in"||p==="not-in");return Ir.create(h,p,y)})(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function ft(t,e,r){const n=e,a=Q0("where",t);return J0._create(a,n,r)}class i1 extends s1{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new i1(e,r)}_parse(e){const r=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return r.length===1?r[0]:ds.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:((function(a,o){let c=a;const d=o.getFlattenedFilters();for(const m of d)PS(c,m),c=Kv(c,m)})(e._query,r),new Yl(e.firestore,e.converter,Kv(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class o1 extends FS{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new o1(e,r)}_apply(e){const r=(function(a,o,c){if(a.startAt!==null)throw new Ge(Te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new Ge(Te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new _h(o,c)})(e._query,this._field,this._direction);return new Yl(e.firestore,e.converter,(function(a,o){const c=a.explicitOrderBy.concat([o]);return new Su(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,r))}}function hs(t,e="asc"){const r=e,n=Q0("orderBy",t);return o1._create(n,r)}function Fw(t,e,r){if(typeof(r=rn(r))=="string"){if(r==="")throw new Ge(Te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ib(e)&&r.indexOf("/")!==-1)throw new Ge(Te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(ar.fromString(r));if(!rt.isDocumentKey(n))throw new Ge(Te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return ZE(t,new rt(n))}if(r instanceof br)return ZE(t,r._key);throw new Ge(Te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${M0(r)}.`)}function Pw(t,e){if(!Array.isArray(t)||t.length===0)throw new Ge(Te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function PS(t,e){const r=(function(a,o){for(const c of a)for(const d of c.getFlattenedFilters())if(o.indexOf(d.op)>=0)return d.op;return null})(t.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(r!==null)throw r===e.op?new Ge(Te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ge(Te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class H6{convertValue(e,r="none"){switch(Po(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Fo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw it(62114,{value:e})}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return $o(e,((a,o)=>{n[a]=this.convertValue(o,r)})),n}convertVectorValue(e){const r=e.fields?.[r0].arrayValue?.values?.map((n=>Tr(n.doubleValue)));return new Ls(r)}convertGeoPoint(e){return new Ps(Tr(e.latitude),Tr(e.longitude))}convertArray(e,r){return(e.values||[]).map((n=>this.convertValue(n,r)))}convertServerTimestamp(e,r){switch(r){case"previous":const n=L0(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(vh(e));default:return null}}convertTimestamp(e){const r=Mo(e);return new Ke(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=ar.fromString(e);Ot(eS(n),9688,{name:e});const a=new xh(n.get(1),n.get(3)),o=new rt(n.popFirst(5));return a.isEqual(r)||bi(`Document ${o} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),o}}function LS(t,e,r){let n;return n=t?t.toFirestore(e):e,n}class Qd{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Dl extends MS{constructor(e,r,n,a,o,c){super(e,r,n,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new zm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(Q0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ge(Te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,r={};return r.type=Dl._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}Dl._jsonSchemaVersion="firestore/documentSnapshot/1.0",Dl._jsonSchema={type:kr("string",Dl._jsonSchemaVersion),bundleSource:kr("string","DocumentSnapshot"),bundleName:kr("string"),bundle:kr("string")};class zm extends Dl{data(e={}){return super.data(e)}}class su{constructor(e,r,n,a){this._firestore=e,this._userDataWriter=r,this._snapshot=a,this.metadata=new Qd(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const e=[];return this.forEach((r=>e.push(r))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach((n=>{e.call(r,new zm(this._firestore,this._userDataWriter,n.key,n,new Qd(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Ge(Te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=(function(a,o){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((d=>{const m=new zm(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Qd(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((d=>o||d.type!==3)).map((d=>{const m=new zm(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Qd(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let h=-1,p=-1;return d.type!==0&&(h=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),p=c.indexOf(d.doc.key)),{type:q6(d.type),doc:m,oldIndex:h,newIndex:p}}))}})(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ge(Te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=su._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ax.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],a=[];return this.docs.forEach((o=>{o._document!==null&&(r.push(o._document),n.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),a.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function q6(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return it(61501,{type:t})}}function ji(t){t=us(t,br);const e=us(t.firestore,Kl);return A6(e1(e),t._key).then((r=>G6(e,t,r)))}su._jsonSchemaVersion="firestore/querySnapshot/1.0",su._jsonSchema={type:kr("string",su._jsonSchemaVersion),bundleSource:kr("string","QuerySnapshot"),bundleName:kr("string"),bundle:kr("string")};class VS extends H6{constructor(e){super(),this.firestore=e}convertBytes(e){return new Va(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new br(this.firestore,null,r)}}function qr(t){t=us(t,Yl);const e=us(t.firestore,Kl),r=e1(e),n=new VS(e);return z6(t._query),R6(r,t._query).then((a=>new su(e,n,t,a)))}function Lw(t,e,r){t=us(t,br);const n=us(t.firestore,Kl),a=LS(t.converter,e);return Z0(n,[DS(K0(n),"setDoc",t._key,a,t.converter!==null,r).toMutation(t._key,Ba.none())])}function Vs(t,e,r,...n){t=us(t,br);const a=us(t.firestore,Kl),o=K0(a);let c;return c=typeof(e=rn(e))=="string"||e instanceof Y0?L6(o,"updateDoc",t._key,e,r,n):P6(o,"updateDoc",t._key,e),Z0(a,[c.toMutation(t._key,Ba.exists(!0))])}function Xl(t){return Z0(us(t.firestore,Kl),[new Px(t._key,Ba.none())])}function Bs(t,e){const r=us(t.firestore,Kl),n=Zt(t),a=LS(t.converter,e);return Z0(r,[DS(K0(t.firestore),"addDoc",n._key,a,t.converter!==null,{}).toMutation(n._key,Ba.exists(!1))]).then((()=>n))}function Z0(t,e){return(function(n,a){const o=new xi;return n.asyncQueue.enqueueAndForget((async()=>v6(await C6(n),a,o))),o.promise})(e1(t),e)}function G6(t,e,r){const n=r.docs.get(e._key),a=new VS(t);return new Dl(t,a,e._key,n,new Qd(r.hasPendingWrites,r.fromCache),e.converter)}(function(e,r=!0){(function(a){Nu=a})(Eu),du(new Fl("firestore",((n,{instanceIdentifier:a,options:o})=>{const c=n.getProvider("app").getImmediate(),d=new Kl(new L3(n.getProvider("auth-internal")),new U3(c,n.getProvider("app-check-internal")),(function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Ge(Te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xh(h.options.projectId,p)})(c,a),c);return o={useFetchStreams:r,...o},d._setSettings(o),d}),"PUBLIC").setMultipleInstances(!0)),Ao(BE,UE,e),Ao(BE,UE,"esm2020")})();const $6={apiKey:"AIzaSyCuHqkq6JPf8nlBxPMOI14cq7bV46W_5DY",authDomain:"giogio-158b6.firebaseapp.com",projectId:"giogio-158b6",storageBucket:"giogio-158b6.firebasestorage.app",messagingSenderId:"47400008227",appId:"1:47400008227:web:bfb519bd74346697adcf96"},BS=wT($6),wm=O3(BS),et=I6(BS);function iu(t){if(typeof t=="string")return t;switch(t?.code||""){case"auth/user-not-found":return"Usurio no encontrado. Verifique seu email.";case"auth/wrong-password":return"Senha incorreta. Tente novamente.";case"auth/invalid-email":return"Email invlido. Verifique o formato.";case"auth/too-many-requests":return"Muitas tentativas. Tente novamente em alguns minutos.";case"auth/user-disabled":return"Conta desabilitada. Entre em contato com o suporte.";case"auth/network-request-failed":return"Erro de conexo. Verifique sua internet.";case"auth/invalid-api-key":return"Erro de configurao. Entre em contato com o suporte.";default:return"Erro inesperado. Tente novamente."}}const _v={async logOut(){try{await NI(wm)}catch(t){const e=iu(t);throw new Error(e)}},async login(t){try{const r=(await yI(wm,t.email,t.password)).user,n=await ji(Zt(et,"users",r.uid));if(!n.exists())throw new Error("User not found");const o={...n.data(),lastLogin:new Date};return await Lw(Zt(et,"users",r.uid),o),o}catch(e){const r=iu(e);throw new Error(r)}},async register(t){try{if(!t.email||!t.password||!t.name)throw new Error("Todos os campos so obrigatrios");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.email))throw new Error("Email invlido");if(t.password.length<6)throw new Error("A senha deve ter pelo menos 6 caracteres");const n=(await xI(wm,t.email.trim(),t.password)).user,a={uid:n.uid,email:t.email.trim(),name:t.name.trim(),phone:t.phone||"",role:t.role||"admin",createdAt:new Date,updatedAt:new Date};return await Lw(Zt(et,"users",n.uid),a),a}catch(e){if(e instanceof Error)if(e.message.includes("auth/email-already-in-use"))try{return await this.login({email:t.email,password:t.password})}catch{throw new Error("Este email j est em uso. Verifique suas credenciais ou use outro email.")}else throw e.message.includes("auth/weak-password")?new Error("A senha  muito fraca. Use pelo menos 6 caracteres."):e.message.includes("auth/invalid-email")?new Error("Email invlido. Verifique o formato do email."):e.message.includes("auth/operation-not-allowed")?new Error("Operao no permitida. Contate o administrador."):new Error(e.message);const r=iu(e);throw new Error(r)}},observeAuthState(t){try{return wI(wm,async e=>{if(e)try{const r=await ji(Zt(et,"users",e.uid));if(r.exists()){const n=r.data();t(n)}else t(null)}catch{t(null)}else t(null)})}catch(e){throw new Error("Erro ao observar estado de autenticao: "+e)}}},US=B.createContext(void 0);function W6({children:t}){const[e,r]=B.useState(null),[n,a]=B.useState(!0),[o,c]=B.useState(null);B.useEffect(()=>{r(null),a(!1)},[]);const v={user:e,loading:n,error:o,login:async y=>{try{a(!0),c(null);const w=await _v.login(y);r(w),a(!1)}catch(w){const N=iu(w);c(N),a(!1),r(null)}},register:async y=>{try{a(!0),c(null);const w=await _v.register(y);r(w),a(!1)}catch(w){const N=iu(w);throw c(N),a(!1),r(null),w}},logout:async()=>{try{a(!0),c(null),await _v.logOut(),r(null),a(!1)}catch(y){const w=iu(y);c(w),a(!1)}},clearError:()=>{c(null)}};return s.jsx(US.Provider,{value:v,children:t})}var Vw="popstate";function Y6(t={}){function e(n,a){let{pathname:o,search:c,hash:d}=n.location;return ox("",{pathname:o,search:c,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:Nh(a)}return X6(e,r,null,t)}function lr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function fs(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function K6(){return Math.random().toString(36).substring(2,10)}function Bw(t,e){return{usr:t.state,key:t.key,idx:e}}function ox(t,e,r=null,n){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Cu(e):e,state:r,key:e&&e.key||n||K6()}}function Nh({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Cu(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substring(n),t=t.substring(0,n)),t&&(e.pathname=t)}return e}function X6(t,e,r,n={}){let{window:a=document.defaultView,v5Compat:o=!1}=n,c=a.history,d="POP",m=null,h=p();h==null&&(h=0,c.replaceState({...c.state,idx:h},""));function p(){return(c.state||{idx:null}).idx}function v(){d="POP";let T=p(),j=T==null?null:T-h;h=T,m&&m({action:d,location:E.location,delta:j})}function y(T,j){d="PUSH";let O=ox(E.location,T,j);h=p()+1;let P=Bw(O,h),z=E.createHref(O);try{c.pushState(P,"",z)}catch(Q){if(Q instanceof DOMException&&Q.name==="DataCloneError")throw Q;a.location.assign(z)}o&&m&&m({action:d,location:E.location,delta:1})}function w(T,j){d="REPLACE";let O=ox(E.location,T,j);h=p();let P=Bw(O,h),z=E.createHref(O);c.replaceState(P,"",z),o&&m&&m({action:d,location:E.location,delta:0})}function N(T){return Q6(T)}let E={get action(){return d},get location(){return t(a,c)},listen(T){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(Vw,v),m=T,()=>{a.removeEventListener(Vw,v),m=null}},createHref(T){return e(a,T)},createURL:N,encodeLocation(T){let j=N(T);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:y,replace:w,go(T){return c.go(T)}};return E}function Q6(t,e=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),lr(r,"No window.location.(origin|href) available to create URL");let n=typeof t=="string"?t:Nh(t);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function zS(t,e,r="/"){return J6(t,e,r,!1)}function J6(t,e,r,n){let a=typeof e=="string"?Cu(e):e,o=Ci(a.pathname||"/",r);if(o==null)return null;let c=HS(t);Z6(c);let d=null;for(let m=0;d==null&&m<c.length;++m){let h=uM(o);d=lM(c[m],h,n)}return d}function HS(t,e=[],r=[],n="",a=!1){let o=(c,d,m=a,h)=>{let p={relativePath:h===void 0?c.path||"":h,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(n)&&m)return;lr(p.relativePath.startsWith(n),`Absolute route path "${p.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(n.length)}let v=yi([n,p.relativePath]),y=r.concat(p);c.children&&c.children.length>0&&(lr(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),HS(c.children,e,y,v,m)),!(c.path==null&&!c.index)&&e.push({path:v,score:iM(v,c.index),routesMeta:y})};return t.forEach((c,d)=>{if(c.path===""||!c.path?.includes("?"))o(c,d);else for(let m of qS(c.path))o(c,d,!0,m)}),e}function qS(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,a=r.endsWith("?"),o=r.replace(/\?$/,"");if(n.length===0)return a?[o,""]:[o];let c=qS(n.join("/")),d=[];return d.push(...c.map(m=>m===""?o:[o,m].join("/"))),a&&d.push(...c),d.map(m=>t.startsWith("/")&&m===""?"/":m)}function Z6(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:oM(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var eM=/^:[\w-]+$/,tM=3,rM=2,nM=1,aM=10,sM=-2,Uw=t=>t==="*";function iM(t,e){let r=t.split("/"),n=r.length;return r.some(Uw)&&(n+=sM),e&&(n+=rM),r.filter(a=>!Uw(a)).reduce((a,o)=>a+(eM.test(o)?tM:o===""?nM:aM),n)}function oM(t,e){return t.length===e.length&&t.slice(0,-1).every((n,a)=>n===e[a])?t[t.length-1]-e[e.length-1]:0}function lM(t,e,r=!1){let{routesMeta:n}=t,a={},o="/",c=[];for(let d=0;d<n.length;++d){let m=n[d],h=d===n.length-1,p=o==="/"?e:e.slice(o.length)||"/",v=d0({path:m.relativePath,caseSensitive:m.caseSensitive,end:h},p),y=m.route;if(!v&&h&&r&&!n[n.length-1].route.index&&(v=d0({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},p)),!v)return null;Object.assign(a,v.params),c.push({params:a,pathname:yi([o,v.pathname]),pathnameBase:mM(yi([o,v.pathnameBase])),route:y}),v.pathnameBase!=="/"&&(o=yi([o,v.pathnameBase]))}return c}function d0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=cM(t.path,t.caseSensitive,t.end),a=e.match(r);if(!a)return null;let o=a[0],c=o.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:n.reduce((h,{paramName:p,isOptional:v},y)=>{if(p==="*"){let N=d[y]||"";c=o.slice(0,o.length-N.length).replace(/(.)\/+$/,"$1")}const w=d[y];return v&&!w?h[p]=void 0:h[p]=(w||"").replace(/%2F/g,"/"),h},{}),pathname:o,pathnameBase:c,pattern:t}}function cM(t,e=!1,r=!0){fs(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,m)=>(n.push({paramName:d,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(n.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),n]}function uM(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return fs(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Ci(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}var dM=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function hM(t,e="/"){let{pathname:r,search:n="",hash:a=""}=typeof t=="string"?Cu(t):t,o;return r?(r=r.replace(/\/\/+/g,"/"),r.startsWith("/")?o=zw(r.substring(1),"/"):o=zw(r,e)):o=e,{pathname:o,search:pM(n),hash:gM(a)}}function zw(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function Ev(t,e,r,n){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function fM(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function l1(t){let e=fM(t);return e.map((r,n)=>n===e.length-1?r.pathname:r.pathnameBase)}function c1(t,e,r,n=!1){let a;typeof t=="string"?a=Cu(t):(a={...t},lr(!a.pathname||!a.pathname.includes("?"),Ev("?","pathname","search",a)),lr(!a.pathname||!a.pathname.includes("#"),Ev("#","pathname","hash",a)),lr(!a.search||!a.search.includes("#"),Ev("#","search","hash",a)));let o=t===""||a.pathname==="",c=o?"/":a.pathname,d;if(c==null)d=r;else{let v=e.length-1;if(!n&&c.startsWith("..")){let y=c.split("/");for(;y[0]==="..";)y.shift(),v-=1;a.pathname=y.join("/")}d=v>=0?e[v]:"/"}let m=hM(a,d),h=c&&c!=="/"&&c.endsWith("/"),p=(o||c===".")&&r.endsWith("/");return!m.pathname.endsWith("/")&&(h||p)&&(m.pathname+="/"),m}var yi=t=>t.join("/").replace(/\/\/+/g,"/"),mM=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),pM=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,gM=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,vM=class{constructor(t,e,r,n=!1){this.status=t,this.statusText=e||"",this.internal=n,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}};function xM(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function yM(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var GS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function $S(t,e){let r=t;if(typeof r!="string"||!dM.test(r))return{absoluteURL:void 0,isExternal:!1,to:r};let n=r,a=!1;if(GS)try{let o=new URL(window.location.href),c=r.startsWith("//")?new URL(o.protocol+r):new URL(r),d=Ci(c.pathname,e);c.origin===o.origin&&d!=null?r=d+c.search+c.hash:a=!0}catch{fs(!1,`<Link to="${r}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:n,isExternal:a,to:r}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var WS=["POST","PUT","PATCH","DELETE"];new Set(WS);var _M=["GET",...WS];new Set(_M);var Au=B.createContext(null);Au.displayName="DataRouter";var ep=B.createContext(null);ep.displayName="DataRouterState";var EM=B.createContext(!1),YS=B.createContext({isTransitioning:!1});YS.displayName="ViewTransition";var wM=B.createContext(new Map);wM.displayName="Fetchers";var NM=B.createContext(null);NM.displayName="Await";var Ea=B.createContext(null);Ea.displayName="Navigation";var qh=B.createContext(null);qh.displayName="Location";var Gs=B.createContext({outlet:null,matches:[],isDataRoute:!1});Gs.displayName="Route";var u1=B.createContext(null);u1.displayName="RouteError";var KS="REACT_ROUTER_ERROR",TM="REDIRECT",bM="ROUTE_ERROR_RESPONSE";function SM(t){if(t.startsWith(`${KS}:${TM}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function jM(t){if(t.startsWith(`${KS}:${bM}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new vM(e.status,e.statusText,e.data)}catch{}}function CM(t,{relative:e}={}){lr(Ru(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=B.useContext(Ea),{hash:a,pathname:o,search:c}=Gh(t,{relative:e}),d=o;return r!=="/"&&(d=o==="/"?r:yi([r,o])),n.createHref({pathname:d,search:c,hash:a})}function Ru(){return B.useContext(qh)!=null}function ki(){return lr(Ru(),"useLocation() may be used only in the context of a <Router> component."),B.useContext(qh).location}var XS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function QS(t){B.useContext(Ea).static||B.useLayoutEffect(t)}function Du(){let{isDataRoute:t}=B.useContext(Gs);return t?UM():AM()}function AM(){lr(Ru(),"useNavigate() may be used only in the context of a <Router> component.");let t=B.useContext(Au),{basename:e,navigator:r}=B.useContext(Ea),{matches:n}=B.useContext(Gs),{pathname:a}=ki(),o=JSON.stringify(l1(n)),c=B.useRef(!1);return QS(()=>{c.current=!0}),B.useCallback((m,h={})=>{if(fs(c.current,XS),!c.current)return;if(typeof m=="number"){r.go(m);return}let p=c1(m,JSON.parse(o),a,h.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:yi([e,p.pathname])),(h.replace?r.replace:r.push)(p,h.state,h)},[e,r,o,a,t])}B.createContext(null);function Gh(t,{relative:e}={}){let{matches:r}=B.useContext(Gs),{pathname:n}=ki(),a=JSON.stringify(l1(r));return B.useMemo(()=>c1(t,JSON.parse(a),n,e==="path"),[t,a,n,e])}function RM(t,e){return JS(t,e)}function JS(t,e,r,n,a){lr(Ru(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=B.useContext(Ea),{matches:c}=B.useContext(Gs),d=c[c.length-1],m=d?d.params:{},h=d?d.pathname:"/",p=d?d.pathnameBase:"/",v=d&&d.route;{let O=v&&v.path||"";ej(h,!v||O.endsWith("*")||O.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${O}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${O}"> to <Route path="${O==="/"?"*":`${O}/*`}">.`)}let y=ki(),w;if(e){let O=typeof e=="string"?Cu(e):e;lr(p==="/"||O.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${O.pathname}" was given in the \`location\` prop.`),w=O}else w=y;let N=w.pathname||"/",E=N;if(p!=="/"){let O=p.replace(/^\//,"").split("/");E="/"+N.replace(/^\//,"").split("/").slice(O.length).join("/")}let T=zS(t,{pathname:E});fs(v||T!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),fs(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=MM(T&&T.map(O=>Object.assign({},O,{params:Object.assign({},m,O.params),pathname:yi([p,o.encodeLocation?o.encodeLocation(O.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:O.pathname]),pathnameBase:O.pathnameBase==="/"?p:yi([p,o.encodeLocation?o.encodeLocation(O.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:O.pathnameBase])})),c,r,n,a);return e&&j?B.createElement(qh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},j):j}function DM(){let t=BM(),e=xM(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},o={padding:"2px 4px",backgroundColor:n},c=null;return console.error("Error handled by React Router default ErrorBoundary:",t),c=B.createElement(B.Fragment,null,B.createElement("p",null," Hey developer "),B.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",B.createElement("code",{style:o},"ErrorBoundary")," or"," ",B.createElement("code",{style:o},"errorElement")," prop on your route.")),B.createElement(B.Fragment,null,B.createElement("h2",null,"Unexpected Application Error!"),B.createElement("h3",{style:{fontStyle:"italic"}},e),r?B.createElement("pre",{style:a},r):null,c)}var IM=B.createElement(DM,null),ZS=class extends B.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const r=jM(t.digest);r&&(t=r)}let e=t!==void 0?B.createElement(Gs.Provider,{value:this.props.routeContext},B.createElement(u1.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?B.createElement(kM,{error:t},e):e}};ZS.contextType=EM;var wv=new WeakMap;function kM({children:t,error:e}){let{basename:r}=B.useContext(Ea);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let n=SM(e.digest);if(n){let a=wv.get(e);if(a)throw a;let o=$S(n.location,r);if(GS&&!wv.get(e))if(o.isExternal||n.reloadDocument)window.location.href=o.absoluteURL||o.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(o.to,{replace:n.replace}));throw wv.set(e,c),c}return B.createElement("meta",{httpEquiv:"refresh",content:`0;url=${o.absoluteURL||o.to}`})}}return t}function OM({routeContext:t,match:e,children:r}){let n=B.useContext(Au);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),B.createElement(Gs.Provider,{value:t},r)}function MM(t,e=[],r=null,n=null,a=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let o=t,c=r?.errors;if(c!=null){let p=o.findIndex(v=>v.route.id&&c?.[v.route.id]!==void 0);lr(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let d=!1,m=-1;if(r)for(let p=0;p<o.length;p++){let v=o[p];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(m=p),v.route.id){let{loaderData:y,errors:w}=r,N=v.route.loader&&!y.hasOwnProperty(v.route.id)&&(!w||w[v.route.id]===void 0);if(v.route.lazy||N){d=!0,m>=0?o=o.slice(0,m+1):o=[o[0]];break}}}let h=r&&n?(p,v)=>{n(p,{location:r.location,params:r.matches?.[0]?.params??{},unstable_pattern:yM(r.matches),errorInfo:v})}:void 0;return o.reduceRight((p,v,y)=>{let w,N=!1,E=null,T=null;r&&(w=c&&v.route.id?c[v.route.id]:void 0,E=v.route.errorElement||IM,d&&(m<0&&y===0?(ej("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),N=!0,T=null):m===y&&(N=!0,T=v.route.hydrateFallbackElement||null)));let j=e.concat(o.slice(0,y+1)),O=()=>{let P;return w?P=E:N?P=T:v.route.Component?P=B.createElement(v.route.Component,null):v.route.element?P=v.route.element:P=p,B.createElement(OM,{match:v,routeContext:{outlet:p,matches:j,isDataRoute:r!=null},children:P})};return r&&(v.route.ErrorBoundary||v.route.errorElement||y===0)?B.createElement(ZS,{location:r.location,revalidation:r.revalidation,component:E,error:w,children:O(),routeContext:{outlet:null,matches:j,isDataRoute:!0},onError:h}):O()},null)}function d1(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function FM(t){let e=B.useContext(Au);return lr(e,d1(t)),e}function PM(t){let e=B.useContext(ep);return lr(e,d1(t)),e}function LM(t){let e=B.useContext(Gs);return lr(e,d1(t)),e}function h1(t){let e=LM(t),r=e.matches[e.matches.length-1];return lr(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function VM(){return h1("useRouteId")}function BM(){let t=B.useContext(u1),e=PM("useRouteError"),r=h1("useRouteError");return t!==void 0?t:e.errors?.[r]}function UM(){let{router:t}=FM("useNavigate"),e=h1("useNavigate"),r=B.useRef(!1);return QS(()=>{r.current=!0}),B.useCallback(async(a,o={})=>{fs(r.current,XS),r.current&&(typeof a=="number"?await t.navigate(a):await t.navigate(a,{fromRouteId:e,...o}))},[t,e])}var Hw={};function ej(t,e,r){!e&&!Hw[t]&&(Hw[t]=!0,fs(!1,r))}B.memo(zM);function zM({routes:t,future:e,state:r,onError:n}){return JS(t,void 0,r,n,e)}function HM({to:t,replace:e,state:r,relative:n}){lr(Ru(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=B.useContext(Ea);fs(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=B.useContext(Gs),{pathname:c}=ki(),d=Du(),m=c1(t,l1(o),c,n==="path"),h=JSON.stringify(m);return B.useEffect(()=>{d(JSON.parse(h),{replace:e,state:r,relative:n})},[d,h,n,e,r]),null}function Vr(t){lr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function qM({basename:t="/",children:e=null,location:r,navigationType:n="POP",navigator:a,static:o=!1,unstable_useTransitions:c}){lr(!Ru(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=t.replace(/^\/*/,"/"),m=B.useMemo(()=>({basename:d,navigator:a,static:o,unstable_useTransitions:c,future:{}}),[d,a,o,c]);typeof r=="string"&&(r=Cu(r));let{pathname:h="/",search:p="",hash:v="",state:y=null,key:w="default"}=r,N=B.useMemo(()=>{let E=Ci(h,d);return E==null?null:{location:{pathname:E,search:p,hash:v,state:y,key:w},navigationType:n}},[d,h,p,v,y,w,n]);return fs(N!=null,`<Router basename="${d}"> is not able to match the URL "${h}${p}${v}" because it does not start with the basename, so the <Router> won't render anything.`),N==null?null:B.createElement(Ea.Provider,{value:m},B.createElement(qh.Provider,{children:e,value:N}))}function GM({children:t,location:e}){return RM(lx(t),e)}function lx(t,e=[]){let r=[];return B.Children.forEach(t,(n,a)=>{if(!B.isValidElement(n))return;let o=[...e,a];if(n.type===B.Fragment){r.push.apply(r,lx(n.props.children,o));return}lr(n.type===Vr,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),lr(!n.props.index||!n.props.children,"An index route cannot have child routes.");let c={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(c.children=lx(n.props.children,o)),r.push(c)}),r}var Hm="get",qm="application/x-www-form-urlencoded";function tp(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function $M(t){return tp(t)&&t.tagName.toLowerCase()==="button"}function WM(t){return tp(t)&&t.tagName.toLowerCase()==="form"}function YM(t){return tp(t)&&t.tagName.toLowerCase()==="input"}function KM(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function XM(t,e){return t.button===0&&(!e||e==="_self")&&!KM(t)}var Nm=null;function QM(){if(Nm===null)try{new FormData(document.createElement("form"),0),Nm=!1}catch{Nm=!0}return Nm}var JM=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Nv(t){return t!=null&&!JM.has(t)?(fs(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${qm}"`),null):t}function ZM(t,e){let r,n,a,o,c;if(WM(t)){let d=t.getAttribute("action");n=d?Ci(d,e):null,r=t.getAttribute("method")||Hm,a=Nv(t.getAttribute("enctype"))||qm,o=new FormData(t)}else if($M(t)||YM(t)&&(t.type==="submit"||t.type==="image")){let d=t.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=t.getAttribute("formaction")||d.getAttribute("action");if(n=m?Ci(m,e):null,r=t.getAttribute("formmethod")||d.getAttribute("method")||Hm,a=Nv(t.getAttribute("formenctype"))||Nv(d.getAttribute("enctype"))||qm,o=new FormData(d,t),!QM()){let{name:h,type:p,value:v}=t;if(p==="image"){let y=h?`${h}.`:"";o.append(`${y}x`,"0"),o.append(`${y}y`,"0")}else h&&o.append(h,v)}}else{if(tp(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Hm,n=null,a=qm,c=t}return o&&a==="text/plain"&&(c=o,o=void 0),{action:n,method:r.toLowerCase(),encType:a,formData:o,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function f1(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function eF(t,e,r,n){let a=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r?a.pathname.endsWith("/")?a.pathname=`${a.pathname}_.${n}`:a.pathname=`${a.pathname}.${n}`:a.pathname==="/"?a.pathname=`_root.${n}`:e&&Ci(a.pathname,e)==="/"?a.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${n}`,a}async function tF(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function rF(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function nF(t,e,r){let n=await Promise.all(t.map(async a=>{let o=e.routes[a.route.id];if(o){let c=await tF(o,r);return c.links?c.links():[]}return[]}));return oF(n.flat(1).filter(rF).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function qw(t,e,r,n,a,o){let c=(m,h)=>r[h]?m.route.id!==r[h].route.id:!0,d=(m,h)=>r[h].pathname!==m.pathname||r[h].route.path?.endsWith("*")&&r[h].params["*"]!==m.params["*"];return o==="assets"?e.filter((m,h)=>c(m,h)||d(m,h)):o==="data"?e.filter((m,h)=>{let p=n.routes[m.route.id];if(!p||!p.hasLoader)return!1;if(c(m,h)||d(m,h))return!0;if(m.route.shouldRevalidate){let v=m.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function aF(t,e,{includeHydrateFallback:r}={}){return sF(t.map(n=>{let a=e.routes[n.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),r&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1))}function sF(t){return[...new Set(t)]}function iF(t){let e={},r=Object.keys(t).sort();for(let n of r)e[n]=t[n];return e}function oF(t,e){let r=new Set;return new Set(e),t.reduce((n,a)=>{let o=JSON.stringify(iF(a));return r.has(o)||(r.add(o),n.push({key:o,link:a})),n},[])}function tj(){let t=B.useContext(Au);return f1(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function lF(){let t=B.useContext(ep);return f1(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var m1=B.createContext(void 0);m1.displayName="FrameworkContext";function rj(){let t=B.useContext(m1);return f1(t,"You must render this element inside a <HydratedRouter> element"),t}function cF(t,e){let r=B.useContext(m1),[n,a]=B.useState(!1),[o,c]=B.useState(!1),{onFocus:d,onBlur:m,onMouseEnter:h,onMouseLeave:p,onTouchStart:v}=e,y=B.useRef(null);B.useEffect(()=>{if(t==="render"&&c(!0),t==="viewport"){let E=j=>{j.forEach(O=>{c(O.isIntersecting)})},T=new IntersectionObserver(E,{threshold:.5});return y.current&&T.observe(y.current),()=>{T.disconnect()}}},[t]),B.useEffect(()=>{if(n){let E=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(E)}}},[n]);let w=()=>{a(!0)},N=()=>{a(!1),c(!1)};return r?t!=="intent"?[o,y,{}]:[o,y,{onFocus:Bd(d,w),onBlur:Bd(m,N),onMouseEnter:Bd(h,w),onMouseLeave:Bd(p,N),onTouchStart:Bd(v,w)}]:[!1,y,{}]}function Bd(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function uF({page:t,...e}){let{router:r}=tj(),n=B.useMemo(()=>zS(r.routes,t,r.basename),[r.routes,t,r.basename]);return n?B.createElement(hF,{page:t,matches:n,...e}):null}function dF(t){let{manifest:e,routeModules:r}=rj(),[n,a]=B.useState([]);return B.useEffect(()=>{let o=!1;return nF(t,e,r).then(c=>{o||a(c)}),()=>{o=!0}},[t,e,r]),n}function hF({page:t,matches:e,...r}){let n=ki(),{future:a,manifest:o,routeModules:c}=rj(),{basename:d}=tj(),{loaderData:m,matches:h}=lF(),p=B.useMemo(()=>qw(t,e,h,o,n,"data"),[t,e,h,o,n]),v=B.useMemo(()=>qw(t,e,h,o,n,"assets"),[t,e,h,o,n]),y=B.useMemo(()=>{if(t===n.pathname+n.search+n.hash)return[];let E=new Set,T=!1;if(e.forEach(O=>{let P=o.routes[O.route.id];!P||!P.hasLoader||(!p.some(z=>z.route.id===O.route.id)&&O.route.id in m&&c[O.route.id]?.shouldRevalidate||P.hasClientLoader?T=!0:E.add(O.route.id))}),E.size===0)return[];let j=eF(t,d,a.unstable_trailingSlashAwareDataRequests,"data");return T&&E.size>0&&j.searchParams.set("_routes",e.filter(O=>E.has(O.route.id)).map(O=>O.route.id).join(",")),[j.pathname+j.search]},[d,a.unstable_trailingSlashAwareDataRequests,m,n,o,p,e,t,c]),w=B.useMemo(()=>aF(v,o),[v,o]),N=dF(v);return B.createElement(B.Fragment,null,y.map(E=>B.createElement("link",{key:E,rel:"prefetch",as:"fetch",href:E,...r})),w.map(E=>B.createElement("link",{key:E,rel:"modulepreload",href:E,...r})),N.map(({key:E,link:T})=>B.createElement("link",{key:E,nonce:r.nonce,...T,crossOrigin:T.crossOrigin??r.crossOrigin})))}function fF(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var mF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{mF&&(window.__reactRouterVersion="7.13.0")}catch{}function pF({basename:t,children:e,unstable_useTransitions:r,window:n}){let a=B.useRef();a.current==null&&(a.current=Y6({window:n,v5Compat:!0}));let o=a.current,[c,d]=B.useState({action:o.action,location:o.location}),m=B.useCallback(h=>{r===!1?d(h):B.startTransition(()=>d(h))},[r]);return B.useLayoutEffect(()=>o.listen(m),[o,m]),B.createElement(qM,{basename:t,children:e,location:c.location,navigationType:c.action,navigator:o,unstable_useTransitions:r})}var nj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rp=B.forwardRef(function({onClick:e,discover:r="render",prefetch:n="none",relative:a,reloadDocument:o,replace:c,state:d,target:m,to:h,preventScrollReset:p,viewTransition:v,unstable_defaultShouldRevalidate:y,...w},N){let{basename:E,unstable_useTransitions:T}=B.useContext(Ea),j=typeof h=="string"&&nj.test(h),O=$S(h,E);h=O.to;let P=CM(h,{relative:a}),[z,Q,U]=cF(n,w),C=yF(h,{replace:c,state:d,target:m,preventScrollReset:p,relative:a,viewTransition:v,unstable_defaultShouldRevalidate:y,unstable_useTransitions:T});function k(F){e&&e(F),F.defaultPrevented||C(F)}let S=B.createElement("a",{...w,...U,href:O.absoluteURL||P,onClick:O.isExternal||o?e:k,ref:fF(N,Q),target:m,"data-discover":!j&&r==="render"?"true":void 0});return z&&!j?B.createElement(B.Fragment,null,S,B.createElement(uF,{page:P})):S});rp.displayName="Link";var gF=B.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:n="",end:a=!1,style:o,to:c,viewTransition:d,children:m,...h},p){let v=Gh(c,{relative:h.relative}),y=ki(),w=B.useContext(ep),{navigator:N,basename:E}=B.useContext(Ea),T=w!=null&&TF(v)&&d===!0,j=N.encodeLocation?N.encodeLocation(v).pathname:v.pathname,O=y.pathname,P=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;r||(O=O.toLowerCase(),P=P?P.toLowerCase():null,j=j.toLowerCase()),P&&E&&(P=Ci(P,E)||P);const z=j!=="/"&&j.endsWith("/")?j.length-1:j.length;let Q=O===j||!a&&O.startsWith(j)&&O.charAt(z)==="/",U=P!=null&&(P===j||!a&&P.startsWith(j)&&P.charAt(j.length)==="/"),C={isActive:Q,isPending:U,isTransitioning:T},k=Q?e:void 0,S;typeof n=="function"?S=n(C):S=[n,Q?"active":null,U?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let F=typeof o=="function"?o(C):o;return B.createElement(rp,{...h,"aria-current":k,className:S,ref:p,style:F,to:c,viewTransition:d},typeof m=="function"?m(C):m)});gF.displayName="NavLink";var vF=B.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:n,replace:a,state:o,method:c=Hm,action:d,onSubmit:m,relative:h,preventScrollReset:p,viewTransition:v,unstable_defaultShouldRevalidate:y,...w},N)=>{let{unstable_useTransitions:E}=B.useContext(Ea),T=wF(),j=NF(d,{relative:h}),O=c.toLowerCase()==="get"?"get":"post",P=typeof d=="string"&&nj.test(d),z=Q=>{if(m&&m(Q),Q.defaultPrevented)return;Q.preventDefault();let U=Q.nativeEvent.submitter,C=U?.getAttribute("formmethod")||c,k=()=>T(U||Q.currentTarget,{fetcherKey:e,method:C,navigate:r,replace:a,state:o,relative:h,preventScrollReset:p,viewTransition:v,unstable_defaultShouldRevalidate:y});E&&r!==!1?B.startTransition(()=>k()):k()};return B.createElement("form",{ref:N,method:O,action:j,onSubmit:n?m:z,...w,"data-discover":!P&&t==="render"?"true":void 0})});vF.displayName="Form";function xF(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function aj(t){let e=B.useContext(Au);return lr(e,xF(t)),e}function yF(t,{target:e,replace:r,state:n,preventScrollReset:a,relative:o,viewTransition:c,unstable_defaultShouldRevalidate:d,unstable_useTransitions:m}={}){let h=Du(),p=ki(),v=Gh(t,{relative:o});return B.useCallback(y=>{if(XM(y,e)){y.preventDefault();let w=r!==void 0?r:Nh(p)===Nh(v),N=()=>h(t,{replace:w,state:n,preventScrollReset:a,relative:o,viewTransition:c,unstable_defaultShouldRevalidate:d});m?B.startTransition(()=>N()):N()}},[p,h,v,r,n,e,t,a,o,c,d,m])}var _F=0,EF=()=>`__${String(++_F)}__`;function wF(){let{router:t}=aj("useSubmit"),{basename:e}=B.useContext(Ea),r=VM(),n=t.fetch,a=t.navigate;return B.useCallback(async(o,c={})=>{let{action:d,method:m,encType:h,formData:p,body:v}=ZM(o,e);if(c.navigate===!1){let y=c.fetcherKey||EF();await n(y,r,c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:p,body:v,formMethod:c.method||m,formEncType:c.encType||h,flushSync:c.flushSync})}else await a(c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:p,body:v,formMethod:c.method||m,formEncType:c.encType||h,replace:c.replace,state:c.state,fromRouteId:r,flushSync:c.flushSync,viewTransition:c.viewTransition})},[n,a,e,r])}function NF(t,{relative:e}={}){let{basename:r}=B.useContext(Ea),n=B.useContext(Gs);lr(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),o={...Gh(t||".",{relative:e})},c=ki();if(t==null){o.search=c.search;let d=new URLSearchParams(o.search),m=d.getAll("index");if(m.some(p=>p==="")){d.delete("index"),m.filter(v=>v).forEach(v=>d.append("index",v));let p=d.toString();o.search=p?`?${p}`:""}}return(!t||t===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(o.pathname=o.pathname==="/"?r:yi([r,o.pathname])),Nh(o)}function TF(t,{relative:e}={}){let r=B.useContext(YS);lr(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=aj("useViewTransitionState"),a=Gh(t,{relative:e});if(!r.isTransitioning)return!1;let o=Ci(r.currentLocation.pathname,n)||r.currentLocation.pathname,c=Ci(r.nextLocation.pathname,n)||r.nextLocation.pathname;return d0(a.pathname,c)!=null||d0(a.pathname,o)!=null}const nr={home:"/",login:"/login",register:"/register",profile:"/profile",settings:"/settings",clients:"/clients",owners:"/owners",suppliers:"/suppliers",employees:"/employees",houses:"/houses",sales:"/sales",financial:"/financial",notifications:"/notifications",nfe:"/nfe",dashboardConsolidacao:"/dashboard-consolidacao",dashboardProcessos:"/dashboard-processos",dashboardGoals:"/dashboard-metas",dashboardEstatisticas:"/dashboard-estatisticas"},Ql=()=>{const t=B.useContext(US);if(t===void 0)throw new Error("useAuth deve ser usado dentro de um AuthProvider");return t},Pn=({children:t})=>{const{user:e,loading:r}=Ql();return r?s.jsx("div",{children:"Loading..."}):e?s.jsx(s.Fragment,{children:t}):s.jsx(HM,{to:nr.login,replace:!0})},Ye=({children:t,variant:e="primary",size:r="medium",fullWidth:n=!1,disabled:a=!1,type:o="button",className:c="",onClick:d})=>{const m=["button",`button--${e}`,r!=="medium"&&`button--${r}`,n&&"button--full",c].filter(Boolean).join(" ");return s.jsx("button",{type:o,className:m,disabled:a,onClick:d,children:t})},ra=t=>t.replace(/\D/g,""),sj=t=>{const e=ra(t);return e.length<=3?e:e.length<=6?`${e.slice(0,3)}.${e.slice(3)}`:e.length<=9?`${e.slice(0,3)}.${e.slice(3,6)}.${e.slice(6)}`:`${e.slice(0,3)}.${e.slice(3,6)}.${e.slice(6,9)}-${e.slice(9,11)}`},bF=t=>{const e=ra(t);return e.length<=2?e:e.length<=5?`${e.slice(0,2)}.${e.slice(2)}`:e.length<=8?`${e.slice(0,2)}.${e.slice(2,5)}.${e.slice(5)}`:e.length<=12?`${e.slice(0,2)}.${e.slice(2,5)}.${e.slice(5,8)}/${e.slice(8)}`:`${e.slice(0,2)}.${e.slice(2,5)}.${e.slice(5,8)}/${e.slice(8,12)}-${e.slice(12,14)}`},SF=t=>{const e=ra(t);return e.length<=5?e:`${e.slice(0,5)}-${e.slice(5,8)}`},p1=t=>{const e=ra(t);return e.length===0?"":e.length<=2?`(${e}`:e.length<=6?`(${e.slice(0,2)}) ${e.slice(2)}`:e.length<=10?`(${e.slice(0,2)}) ${e.slice(2,6)}-${e.slice(6)}`:`(${e.slice(0,2)}) ${e.slice(2,7)}-${e.slice(7,11)}`},jF=t=>{const e=ra(t);if(e.length===0)return"";const r=parseInt(e,10)/100;return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:2,maximumFractionDigits:2}).format(r)},CF=t=>ra(t),AF=t=>{const e=ra(t);return e.length===0?0:parseInt(e,10)/100},RF=t=>{const e=ra(t);return e.length===0?"":`${(parseInt(e,10)/100).toFixed(2).replace(".",",")}%`},DF=t=>ra(t),IF=t=>{const e=ra(t);return e.length===0?0:parseFloat(e)/100},kF=t=>ra(t).slice(0,4),OF=t=>{const e=ra(t);return e.length<=5?e:`${e.slice(0,5)}-${e.slice(5,6)}`},Gw=(t,e)=>{if(!t)return"";switch(e){case"cpf":return sj(t);case"cnpj":return bF(t);case"cep":return SF(t);case"phone":return p1(t);case"currency":return jF(t);case"percentage":return RF(t);case"bankAgency":return kF(t);case"bankAccount":return OF(t);case"date":return t;default:return t}},MF=(t,e)=>{if(!t)return"";switch(e){case"currency":return CF(t);case"percentage":return DF(t);default:return ra(t)}},Ur=(t,e)=>{if(!t)return 0;switch(e){case"currency":return AF(t);case"percentage":return IF(t);default:const r=ra(t);return r?parseFloat(r):0}};function Ae({label:t,type:e="text",value:r,onChange:n,placeholder:a,error:o,required:c=!1,disabled:d=!1,min:m,max:h,step:p,mask:v,returnUnmasked:y=!1,maxLength:w,pattern:N}){const[E,T]=B.useState(r);B.useEffect(()=>{T(v&&r?Gw(r,v):r)},[r,v]);const j=P=>{const z=P.target.value;if(v){const Q=Gw(z,v);if(T(Q),y){const U=MF(Q,v);n(U)}else n(Q)}else T(z),n(z)},O=()=>v==="currency"||v==="percentage"?"text":e;return s.jsxs("div",{className:"input-field",children:[s.jsxs("label",{className:"input-field__label",children:[t,c&&s.jsx("span",{className:"input-field__required",children:"*"})]}),s.jsx("input",{type:O(),value:E,onChange:j,placeholder:a,className:`input-field__input ${o?"input-field__input--error":""}`,disabled:d,min:m,max:h,step:p,maxLength:w,pattern:N}),o&&s.jsx("span",{className:"input-field__error",children:o})]})}const ij=B.createContext(void 0),$r=()=>{const t=B.useContext(ij);if(!t)throw new Error("useToast must be used within a ToastProvider");return t};function FF(){const[t,e]=B.useState(""),[r,n]=B.useState(""),[a,o]=B.useState(!1),{user:c,login:d,error:m,clearError:h}=Ql(),p=Du(),{showError:v,showSuccess:y}=$r(),w=async T=>{T.preventDefault(),o(!0),h();try{await d({email:t,password:r})}catch{}finally{o(!1)}};B.useEffect(()=>{c&&(y("Login realizado",c?.email?`Bem-vindo(a), ${c.email}!`:"Bem-vindo(a)!"),p(nr.clients))},[c,p,y]),B.useEffect(()=>{m&&v("Falha no login",m)},[m,v]);const N=T=>{e(T),m&&h()},E=T=>{n(T),m&&h()};return s.jsxs("div",{className:"login-form",children:[s.jsxs("div",{className:"login-form__header",children:[s.jsx("h1",{className:"login-form__title",children:"Bem-Vindo de volta!"}),s.jsx("p",{className:"login-form__subtitle",children:"Bem-vindo ao Exclusive Homes, sua plataforma de gesto de aluguis e imveis"})]}),s.jsxs("form",{onSubmit:w,className:"login-form__form",children:[s.jsx(Ae,{label:"Email",type:"text",value:t,onChange:N,placeholder:"Digite seu email",required:!0}),s.jsx(Ae,{label:"Senha",type:"password",value:r,onChange:E,placeholder:"Digite sua senha",required:!0}),s.jsx(Ye,{type:"submit",variant:"primary",disabled:a,className:"login-form__submit-btn",children:a?"Entrando...":"Entrar"}),s.jsx("a",{href:"#",className:"login-form__forgot-password",children:"Esqueceu sua senha?"}),s.jsx("div",{className:"login-form__divider",children:s.jsx("span",{children:"ou"})}),s.jsxs("div",{className:"login-form__register-link",children:[s.jsx("p",{children:"No tem uma conta?"}),s.jsx(rp,{to:nr.register,className:"login-form__register-btn",children:"Faa o registro"})]})]})]})}function $w(){return s.jsx("div",{className:"login-page",children:s.jsxs("div",{className:"login-page__container",children:[s.jsx("div",{className:"login-page__form-section",children:s.jsx(FF,{})}),s.jsx("div",{className:"login-page__brand-section",children:s.jsxs("div",{className:"login-page__brand-content",children:[s.jsxs("div",{className:"login-page__logo",children:[s.jsx("div",{className:"login-page__logo-icon",children:s.jsxs("svg",{viewBox:"0 0 100 100",className:"logo-svg",children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:"logoGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:"#ffffff"}),s.jsx("stop",{offset:"100%",stopColor:"#e5e7eb"})]})}),s.jsx("rect",{x:"15",y:"25",width:"70",height:"50",rx:"6",fill:"url(#logoGradient)"}),s.jsx("rect",{x:"20",y:"35",width:"60",height:"6",rx:"3",fill:"#1f2937",opacity:"0.9"}),s.jsx("rect",{x:"20",y:"45",width:"45",height:"4",rx:"2",fill:"#1f2937",opacity:"0.7"}),s.jsx("rect",{x:"20",y:"52",width:"55",height:"4",rx:"2",fill:"#1f2937",opacity:"0.7"}),s.jsx("rect",{x:"20",y:"59",width:"40",height:"4",rx:"2",fill:"#1f2937",opacity:"0.7"}),s.jsx("circle",{cx:"75",cy:"40",r:"6",fill:"#1f2937"}),s.jsx("text",{x:"75",y:"44",textAnchor:"middle",fill:"white",fontSize:"6",fontWeight:"bold",children:"R"})]})}),s.jsx("h2",{className:"login-page__brand-name",children:"Exclusive Homes"})]}),s.jsxs("div",{className:"login-page__brand-description",children:[s.jsxs("h3",{className:"login-page__tagline",children:["Gesto Inteligente de Aluguis"," "]}),s.jsx("p",{className:"login-page__description",children:"Plataforma completa para gerenciamento de imveis, contratos de locao, clientes e fornecedores com mtricas financeiras detalhadas"}),s.jsxs("div",{className:"login-page__features",children:[s.jsxs("div",{className:"feature-item",children:[s.jsx("div",{className:"feature-icon",children:s.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"})})}),s.jsx("span",{children:"Gesto de Imveis"})]}),s.jsxs("div",{className:"feature-item",children:[s.jsx("div",{className:"feature-icon",children:s.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{d:"M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"})})}),s.jsx("span",{children:"Contratos de Locao"})]}),s.jsxs("div",{className:"feature-item",children:[s.jsx("div",{className:"feature-icon",children:s.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{d:"M16,6L18.29,8.29L13.41,13.17L9.41,9.17L2,16.59L3.41,18L9.41,12L13.41,16L19.71,9.71L22,12V6H16Z"})})}),s.jsx("span",{children:"Mtricas Financeiras"})]})]})]})]})})]})})}const PF=()=>{const{register:t}=Ql(),e=Du(),[r,n]=B.useState({displayName:"",email:"",password:"",cpf:"",phone:""}),[a,o]=B.useState({}),[c,d]=B.useState(!1),[m,h]=B.useState(""),{showError:p,showSuccess:v}=$r(),y=()=>{const E={};r.displayName.trim()?r.displayName.trim().length<2&&(E.displayName="Nome deve ter pelo menos 2 caracteres"):E.displayName="Nome  obrigatrio";const T=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;r.email.trim()?r.email.includes("@")?r.email.length<5?E.email="Email deve ter pelo menos 5 caracteres":T.test(r.email)||(E.email="Email invlido. Use o formato exemplo@dominio.com"):E.email="Email deve conter @":E.email="Email  obrigatrio",r.password?r.password.length<6&&(E.password="Senha deve ter pelo menos 6 caracteres"):E.password="Senha  obrigatria";const j=r.cpf.replace(/\D/g,"");if(r.cpf.trim()?j.length!==11&&(E.cpf="CPF deve ter 11 dgitos"):E.cpf="CPF  obrigatrio",r.phone.trim()){const O=r.phone.replace(/\D/g,"");(O.length<10||O.length>11)&&(E.phone="Telefone deve ter 10 ou 11 dgitos")}return o(E),Object.keys(E).length===0},w=E=>T=>{E==="cpf"?T=sj(T):E==="phone"&&(T=p1(T)),n(j=>({...j,[E]:T})),a[E]&&o(j=>({...j,[E]:void 0}))},N=async E=>{if(E.preventDefault(),!!y()){d(!0),h("");try{const T={name:r.displayName,email:r.email,password:r.password,phone:r.phone};await t(T),n({displayName:"",email:"",password:"",cpf:"",phone:""}),v("Usurio cadastrado","Cadastro concludo com sucesso. Redirecionando para login."),setTimeout(()=>{e(nr.login)},1e3)}catch(T){T instanceof Error?(h(T.message),p("Falha no cadastro",T.message)):(h("Erro inesperado ao registrar usurio"),p("Falha no cadastro","Erro inesperado ao registrar usurio"))}finally{d(!1)}}};return s.jsxs("div",{className:"user-register-form",children:[s.jsxs("div",{className:"user-register-form__header",children:[s.jsx("h1",{className:"user-register-form__title",children:"Cadastro de Usurio - Exclusive Homes"}),s.jsx("p",{className:"user-register-form__subtitle",children:"Preencha os dados abaixo para cadastrar um novo usurio no sistema de gesto de aluguis"})]}),s.jsxs("form",{className:"user-register-form__form",onSubmit:N,children:[s.jsxs("div",{className:"user-register-form__fields",children:[s.jsx(Ae,{label:"Nome completo",type:"text",value:r.displayName,onChange:w("displayName"),placeholder:"Digite o nome completo",error:a.displayName,required:!0}),s.jsx(Ae,{label:"Email",type:"email",value:r.email,onChange:w("email"),placeholder:"exemplo@dominio.com",error:a.email,required:!0,maxLength:100,pattern:"[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}"}),s.jsx(Ae,{label:"Senha",type:"password",value:r.password,onChange:w("password"),placeholder:"Digite a senha",error:a.password,required:!0,maxLength:50}),s.jsx(Ae,{label:"CPF",type:"text",value:r.cpf,onChange:w("cpf"),placeholder:"000.000.000-00",error:a.cpf,required:!0,maxLength:14}),s.jsx(Ae,{label:"Telefone",type:"text",value:r.phone,onChange:w("phone"),placeholder:"(00) 00000-0000",error:a.phone,maxLength:15})]}),m&&s.jsx("div",{className:"user-register-form__error",children:s.jsx("p",{children:m})}),s.jsx("div",{className:"user-register-form__actions",children:s.jsx(Ye,{type:"submit",variant:"primary",disabled:c,className:"user-register-form__submit-btn",children:c?"Cadastrando...":"Cadastrar Usurio"})}),s.jsx("div",{className:"user-register-form__divider",children:s.jsx("span",{children:"ou"})}),s.jsxs("div",{className:"user-register-form__login-link",children:[s.jsx("p",{children:"J tem uma conta?"}),s.jsx(rp,{to:nr.login,className:"user-register-form__login-btn",children:"Faa o login"})]})]})]})},LF=()=>s.jsx("div",{className:"register-user-page",children:s.jsx("main",{className:"register-user-page__main",children:s.jsx("div",{className:"register-user-page__content",children:s.jsx(PF,{})})})});var oj={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Ww=So.createContext&&So.createContext(oj),VF=["attr","size","title"];function BF(t,e){if(t==null)return{};var r=UF(t,e),n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(a=0;a<o.length;a++)n=o[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function UF(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function h0(){return h0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},h0.apply(this,arguments)}function Yw(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function f0(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Yw(Object(r),!0).forEach(function(n){zF(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Yw(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function zF(t,e,r){return e=HF(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function HF(t){var e=qF(t,"string");return typeof e=="symbol"?e:e+""}function qF(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lj(t){return t&&t.map((e,r)=>So.createElement(e.tag,f0({key:r},e.attr),lj(e.child)))}function $e(t){return e=>So.createElement(GF,h0({attr:f0({},t.attr)},e),lj(t.child))}function GF(t){var e=r=>{var{attr:n,size:a,title:o}=t,c=BF(t,VF),d=a||r.size||"1em",m;return r.className&&(m=r.className),t.className&&(m=(m?m+" ":"")+t.className),So.createElement("svg",h0({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,c,{className:m,style:f0(f0({color:t.color||r.color},r.style),t.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),o&&So.createElement("title",null,o),t.children)};return Ww!==void 0?So.createElement(Ww.Consumer,null,r=>e(r)):e(oj)}function g1(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 18 12 15 21 9 3 6 12 2 12"},child:[]}]})(t)}function Ul(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(t)}function Th(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"},child:[]},{tag:"line",attr:{x1:"12",y1:"9",x2:"12",y2:"13"},child:[]},{tag:"line",attr:{x1:"12",y1:"17",x2:"12.01",y2:"17"},child:[]}]})(t)}function cx(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 5 19 12 12 19"},child:[]}]})(t)}function $F(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"16 12 12 8 8 12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12",y2:"8"},child:[]}]})(t)}function cj(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"8",r:"7"},child:[]},{tag:"polyline",attr:{points:"8.21 13.89 7 23 12 20 17 23 15.79 13.88"},child:[]}]})(t)}function zs(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"4"},child:[]},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"14"},child:[]}]})(t)}function sh(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"10"},child:[]},{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"4"},child:[]},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"16"},child:[]}]})(t)}function Is(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"},child:[]},{tag:"path",attr:{d:"M13.73 21a2 2 0 0 1-3.46 0"},child:[]}]})(t)}function pn(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"},child:[]}]})(t)}function Dn(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},child:[]},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"},child:[]}]})(t)}function Kw(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"},child:[]}]})(t)}function WF(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(t)}function uj(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 18 15 12 9 6"},child:[]}]})(t)}function $h(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(t)}function YF(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"1",y:"4",width:"22",height:"16",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"1",y1:"10",x2:"23",y2:"10"},child:[]}]})(t)}function Xw(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"ellipse",attr:{cx:"12",cy:"5",rx:"9",ry:"3"},child:[]},{tag:"path",attr:{d:"M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"},child:[]},{tag:"path",attr:{d:"M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"},child:[]}]})(t)}function Un(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"},child:[]},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"},child:[]}]})(t)}function v1(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"7 10 12 15 17 10"},child:[]},{tag:"line",attr:{x1:"12",y1:"15",x2:"12",y2:"3"},child:[]}]})(t)}function Ai(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 20h9"},child:[]},{tag:"path",attr:{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"},child:[]}]})(t)}function KF(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},child:[]},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},child:[]}]})(t)}function ms(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(t)}function XF(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"},child:[]}]})(t)}function ps(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},child:[]},{tag:"polyline",attr:{points:"14 2 14 8 20 8"},child:[]},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"},child:[]},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"},child:[]},{tag:"polyline",attr:{points:"10 9 9 9 8 9"},child:[]}]})(t)}function Wh(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"},child:[]}]})(t)}function QF(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"},child:[]},{tag:"line",attr:{x1:"4",y1:"22",x2:"4",y2:"15"},child:[]}]})(t)}function m0(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"path",attr:{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"},child:[]}]})(t)}function Qw(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"14",y:"3",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"14",y:"14",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"3",y:"14",width:"7",height:"7"},child:[]}]})(t)}function JF(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"},child:[]}]})(t)}function jn(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},child:[]},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"},child:[]}]})(t)}function ZF(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12.01",y2:"8"},child:[]}]})(t)}function eP(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"2",width:"20",height:"20",rx:"5",ry:"5"},child:[]},{tag:"path",attr:{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"},child:[]},{tag:"line",attr:{x1:"17.5",y1:"6.5",x2:"17.51",y2:"6.5"},child:[]}]})(t)}function Jw(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"8",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"8",y1:"18",x2:"21",y2:"18"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"3.01",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"12",x2:"3.01",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"3.01",y2:"18"},child:[]}]})(t)}function tP(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"},child:[]},{tag:"polyline",attr:{points:"16 17 21 12 16 7"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"9",y2:"12"},child:[]}]})(t)}function rP(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"},child:[]},{tag:"polyline",attr:{points:"22,6 12,13 2,6"},child:[]}]})(t)}function nP(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(t)}function aP(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"},child:[]}]})(t)}function ux(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"},child:[]}]})(t)}function sP(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(t)}function Zw(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"},child:[]}]})(t)}function Yh(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"6",y:"4",width:"4",height:"16"},child:[]},{tag:"rect",attr:{x:"14",y:"4",width:"4",height:"16"},child:[]}]})(t)}function iP(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"5",x2:"5",y2:"19"},child:[]},{tag:"circle",attr:{cx:"6.5",cy:"6.5",r:"2.5"},child:[]},{tag:"circle",attr:{cx:"17.5",cy:"17.5",r:"2.5"},child:[]}]})(t)}function oP(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(t)}function xu(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21.21 15.89A10 10 0 1 1 8 2.83"},child:[]},{tag:"path",attr:{d:"M22 12A10 10 0 0 0 12 2v10z"},child:[]}]})(t)}function dj(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"5 3 19 12 5 21 5 3"},child:[]}]})(t)}function eN(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18.36 6.64a9 9 0 1 1-12.73 0"},child:[]},{tag:"line",attr:{x1:"12",y1:"2",x2:"12",y2:"12"},child:[]}]})(t)}function Bo(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"},child:[]},{tag:"polyline",attr:{points:"1 20 1 14 7 14"},child:[]},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"},child:[]}]})(t)}function dx(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"},child:[]},{tag:"polyline",attr:{points:"17 21 17 13 7 13 7 21"},child:[]},{tag:"polyline",attr:{points:"7 3 7 8 15 8"},child:[]}]})(t)}function No(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},child:[]}]})(t)}function p0(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"},child:[]}]})(t)}function x1(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"9",cy:"21",r:"1"},child:[]},{tag:"circle",attr:{cx:"20",cy:"21",r:"1"},child:[]},{tag:"path",attr:{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"},child:[]}]})(t)}function gn(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"6"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"2"},child:[]}]})(t)}function es(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"1",y:"5",width:"22",height:"14",rx:"7",ry:"7"},child:[]},{tag:"circle",attr:{cx:"8",cy:"12",r:"3"},child:[]}]})(t)}function ts(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"1",y:"5",width:"22",height:"14",rx:"7",ry:"7"},child:[]},{tag:"circle",attr:{cx:"16",cy:"12",r:"3"},child:[]}]})(t)}function lP(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"},child:[]}]})(t)}function Jl(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(t)}function Jn(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 18 13.5 8.5 8.5 13.5 1 6"},child:[]},{tag:"polyline",attr:{points:"17 18 23 18 23 12"},child:[]}]})(t)}function vr(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 6 13.5 15.5 8.5 10.5 1 18"},child:[]},{tag:"polyline",attr:{points:"17 6 23 6 23 12"},child:[]}]})(t)}function cP(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"1",y:"3",width:"15",height:"13"},child:[]},{tag:"polygon",attr:{points:"16 8 20 8 23 11 23 16 16 16 16 8"},child:[]},{tag:"circle",attr:{cx:"5.5",cy:"18.5",r:"2.5"},child:[]},{tag:"circle",attr:{cx:"18.5",cy:"18.5",r:"2.5"},child:[]}]})(t)}function uP(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"polyline",attr:{points:"17 11 19 13 23 9"},child:[]}]})(t)}function Io(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(t)}function Hr(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(t)}function y1(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"15",y1:"9",x2:"9",y2:"15"},child:[]},{tag:"line",attr:{x1:"9",y1:"9",x2:"15",y2:"15"},child:[]}]})(t)}function Rs(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(t)}function tN(t){return $e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"},child:[]}]})(t)}const dP=({onToggleSidebar:t})=>{const{user:e,logout:r}=Ql(),[n,a]=B.useState(!1),o=Du(),c=B.useRef(null);B.useEffect(()=>{const m=h=>{c.current&&!c.current.contains(h.target)&&a(!1)};return n&&document.addEventListener("mousedown",m),()=>{document.removeEventListener("mousedown",m)}},[n]);const d=async()=>{try{await r(),o("/login")}catch(m){console.error("Erro ao fazer logout:",m)}};return s.jsxs("header",{className:"app-header",children:[s.jsx("div",{className:"header-left",children:s.jsx(Ye,{variant:"ghost",className:"sidebar-toggle",onClick:t,children:s.jsx(aP,{size:20})})}),s.jsxs("div",{className:"header-right",children:[s.jsxs(Ye,{variant:"ghost",className:"notification-btn",onClick:()=>o(nr.notifications),children:[s.jsx(Is,{size:18}),s.jsx("span",{className:"notification-badge",children:"9+"})]}),s.jsxs("div",{className:"user-menu-container",ref:c,children:[s.jsxs(Ye,{variant:"ghost",className:"user-menu-trigger",onClick:()=>a(!n),children:[s.jsx("div",{className:"user-avatar",children:s.jsx(Io,{size:16})}),s.jsxs("div",{className:"user-info",children:[s.jsx("span",{className:"user-name",children:e?.name||"Usurio"}),s.jsx("span",{className:"user-email",children:e?.email||"usurio@email.com"})]}),s.jsx(WF,{size:16,className:`chevron ${n?"rotated":""}`})]}),n&&s.jsxs("div",{className:"user-dropdown",children:[s.jsxs("div",{className:"dropdown-header",children:[s.jsx("div",{className:"user-avatar large",children:s.jsx(Io,{size:20})}),s.jsxs("div",{className:"user-details",children:[s.jsx("span",{className:"name",children:e?.name||"Usurio"}),s.jsx("span",{className:"email",children:e?.email||"email@exemplo.com"})]})]}),s.jsx("div",{className:"dropdown-divider"}),s.jsxs("div",{className:"dropdown-items",children:[s.jsxs("button",{className:"dropdown-item",onClick:()=>{o(nr.profile),a(!1)},children:[s.jsx(Io,{size:16}),s.jsx("span",{children:"Meu Perfil"})]}),s.jsxs("button",{className:"dropdown-item",onClick:()=>{o(nr.settings),a(!1)},children:[s.jsx(No,{size:16}),s.jsx("span",{children:"Configuraes"})]})]}),s.jsx("div",{className:"dropdown-divider"}),s.jsxs("button",{className:"dropdown-item logout",onClick:d,children:[s.jsx(tP,{size:16}),s.jsx("span",{children:"Sair"})]})]})]})]})]})},hP="/assets/logo-BFOBQZYZ.png",fP=[{id:"cadastros",label:"Cadastros",icon:Hr,items:[{id:"clientes",label:"Clientes",icon:Hr,path:"/clients"},{id:"proprietarios",label:"Proprietrios",icon:Hr,path:"/owners"},{id:"fornecedores",label:"Fornecedores",icon:Hr,path:"/suppliers"},{id:"colaboradores",label:"Colaboradores",icon:Hr,path:"/employees"},{id:"casas",label:"Casas",icon:jn,path:"/houses"}]},{id:"vendas",label:"Vendas",icon:x1,path:"/sales"},{id:"financeiro",label:"Financeiro",icon:YF,path:"/financial"},{id:"nfe",label:"Notas Fiscais (NFe)",icon:ps,path:"/nfe"},{id:"dashboard-consolidacao",label:"Dashboard Consolidao",icon:eN,path:"/dashboard-consolidacao"},{id:"dashboard-processos",label:"Dashboard Processos",icon:eN,path:"/dashboard-processos"},{id:"dashboard-metas",label:"Dashboard Metas",icon:$F,path:"/dashboard-metas"},{id:"dashboard-estatisticas",label:"Dashboard Estatsticas",icon:sh,path:"/dashboard-estatisticas"}],mP=({collapsed:t,items:e=fP})=>{const r=Du(),n=ki(),[a,o]=B.useState(new Set),c=v=>{t||o(y=>{const w=new Set(y);return w.has(v)?w.delete(v):w.add(v),w})},d=v=>{v.path?r(v.path):v.items&&c(v.id)},m=v=>v?n.pathname===v||n.pathname.startsWith(v+"/"):!1,h=v=>v.path&&m(v.path)?!0:v.items?v.items.some(y=>m(y.path||"")):!1,p=(v,y=0)=>{const w=v.items&&v.items.length>0,N=a.has(v.id),E=m(v.path||""),T=h(v);return s.jsxs("div",{className:"menu-item-container",children:[s.jsx("button",{className:`menu-item ${E?"active":""} ${T?"parent-active":""} ${y>0?"sub-item":""}`,onClick:()=>d(v),title:t?v.label:void 0,children:s.jsxs("div",{className:"menu-item-content",children:[s.jsx("div",{className:"menu-icon",children:s.jsx(v.icon,{size:18})}),!t&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"menu-label",children:v.label}),s.jsxs("div",{className:"menu-item-end",children:[v.badge&&s.jsx("span",{className:"menu-badge",children:v.badge}),w&&s.jsx(uj,{size:14,className:`chevron ${N?"expanded":""}`})]})]})]})}),w&&!t&&N&&s.jsx("div",{className:"sub-menu",children:v.items.map(j=>p(j,y+1))})]},v.id)};return s.jsxs("aside",{className:`sidebar ${t?"collapsed":""}`,children:[s.jsx("div",{className:"sidebar-header",children:s.jsx("div",{className:"logo",children:!t&&s.jsx("div",{className:"logo-image",children:s.jsx("img",{src:hP,alt:"Logo"})})})}),s.jsx("nav",{className:"sidebar-nav",children:s.jsx("div",{className:"nav-section",children:e.map(v=>p(v))})}),!t&&s.jsx("div",{className:"sidebar-footer",children:s.jsx("div",{className:"footer-content",children:s.jsx("div",{className:"version-info",children:s.jsx("span",{children:"Verso 1.0.0"})})})})]})},Ln=({children:t,sidebarItems:e})=>{const[r,n]=B.useState(!1),[a,o]=B.useState(!1),[c,d]=B.useState(!1);B.useEffect(()=>{const p=()=>{const v=window.innerWidth<1024;o(v),v&&(n(!1),d(!1))};return p(),window.addEventListener("resize",p),()=>window.removeEventListener("resize",p)},[]);const m=()=>{a?d(!c):n(!r)},h=()=>{a&&d(!1)};return s.jsxs("div",{className:"app-layout",children:[s.jsx("div",{className:`sidebar-container ${a&&c?"open":""}`,children:s.jsx(mP,{collapsed:!a&&r,items:e})}),a&&c&&s.jsx("div",{className:"sidebar-overlay",onClick:h}),s.jsxs("div",{className:`main-content ${r&&!a?"sidebar-collapsed":""}`,children:[s.jsx(dP,{onToggleSidebar:m,sidebarCollapsed:r}),s.jsx("main",{className:"content-area",children:s.jsx("div",{className:"content-wrapper",children:t})})]})]})},yr=({size:t="medium",text:e,fullScreen:r=!1})=>{const n=r?"loading-spinner-container full-screen":"loading-spinner-container";return s.jsxs("div",{className:n,children:[s.jsx("div",{className:`loading-spinner ${t}`,children:s.jsx("div",{className:"spinner"})}),e&&s.jsx("p",{className:"loading-text",children:e})]})},pP=()=>{const{user:t}=Ql(),{showSuccess:e,showError:r}=$r(),[n,a]=B.useState(!1),[o,c]=B.useState(!1),[d,m]=B.useState(!1),[h,p]=B.useState({name:t?.name||"",email:t?.email||"",phone:t?.phone||"",currentPassword:"",newPassword:"",confirmPassword:""}),[v,y]=B.useState({});So.useEffect(()=>{t&&p(U=>({...U,name:t.name,email:t.email,phone:t.phone}))},[t]);const w=()=>{const U={};if(h.name.trim()||(U.name="Nome  obrigatrio"),h.email.trim()?/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(h.email)||(U.email="Email invlido"):U.email="Email  obrigatrio",h.phone.trim()){const C=h.phone.replace(/\D/g,"");(C.length<10||C.length>11)&&(U.phone="Telefone deve ter 10 ou 11 dgitos")}return y(U),Object.keys(U).length===0},N=()=>{const U={};return h.currentPassword||(U.currentPassword="Senha atual  obrigatria"),h.newPassword?h.newPassword.length<6&&(U.newPassword="Senha deve ter pelo menos 6 caracteres"):U.newPassword="Nova senha  obrigatria",h.newPassword!==h.confirmPassword&&(U.confirmPassword="As senhas no coincidem"),y(U),Object.keys(U).length===0},E=U=>C=>{U==="phone"&&(C=p1(C)),p(k=>({...k,[U]:C})),v[U]&&y(k=>({...k,[U]:void 0}))},T=async()=>{if(w()){m(!0);try{await new Promise(U=>setTimeout(U,1e3)),e("Perfil atualizado","Suas informaes foram atualizadas com sucesso"),a(!1)}catch(U){r("Erro ao atualizar perfil",U instanceof Error?U.message:"Tente novamente")}finally{m(!1)}}},j=async()=>{if(N()){m(!0);try{await new Promise(U=>setTimeout(U,1e3)),e("Senha alterada","Sua senha foi alterada com sucesso"),p(U=>({...U,currentPassword:"",newPassword:"",confirmPassword:""})),c(!1)}catch(U){r("Erro ao alterar senha",U instanceof Error?U.message:"Tente novamente")}finally{m(!1)}}},O=()=>{p({name:t?.name||"",email:t?.email||"",phone:t?.phone||"",currentPassword:"",newPassword:"",confirmPassword:""}),y({}),a(!1)},P=()=>{p(U=>({...U,currentPassword:"",newPassword:"",confirmPassword:""})),y({}),c(!1)},z=U=>U?new Date(U).toLocaleDateString("pt-BR",{day:"2-digit",month:"long",year:"numeric"}):"N/A",Q=U=>({admin:"Administrador",corretor:"Corretor",proprietario:"Proprietrio",inquilino:"Inquilino",financeiro:"Financeiro"})[U||""]||U||"N/A";return t?s.jsxs("div",{className:"profile-page",children:[s.jsx("div",{className:"profile-header",children:s.jsxs("div",{className:"profile-header__title",children:[s.jsx(Io,{size:24}),s.jsx("h1",{children:"Meu Perfil"})]})}),s.jsxs("div",{className:"profile-content",children:[s.jsxs("div",{className:"profile-card",children:[s.jsxs("div",{className:"profile-card__header",children:[s.jsx("h2",{children:"Informaes Pessoais"}),n?s.jsxs("div",{className:"profile-card__actions",children:[s.jsxs(Ye,{variant:"ghost",onClick:O,children:[s.jsx(Rs,{size:16}),"Cancelar"]}),s.jsxs(Ye,{variant:"primary",onClick:T,disabled:d,children:[s.jsx(dx,{size:16}),d?"Salvando...":"Salvar"]})]}):s.jsxs(Ye,{variant:"secondary",onClick:()=>a(!0),children:[s.jsx(Ai,{size:16}),"Editar"]})]}),s.jsx("div",{className:"profile-card__body",children:s.jsxs("div",{className:"profile-info-grid",children:[s.jsxs("div",{className:"profile-info-item",children:[s.jsx("label",{children:"Nome completo"}),n?s.jsx(Ae,{label:"",type:"text",value:h.name,onChange:E("name"),error:v.name,placeholder:"Digite seu nome completo"}):s.jsxs("div",{className:"profile-info-value",children:[s.jsx(Io,{size:18}),s.jsx("span",{children:t.name})]})]}),s.jsxs("div",{className:"profile-info-item",children:[s.jsx("label",{children:"Email"}),s.jsxs("div",{className:"profile-info-value disabled",children:[s.jsx(rP,{size:18}),s.jsx("span",{children:t.email}),s.jsx("span",{className:"info-badge",children:"No editvel"})]})]}),s.jsxs("div",{className:"profile-info-item",children:[s.jsx("label",{children:"Telefone"}),n?s.jsx(Ae,{label:"",type:"text",value:h.phone,onChange:E("phone"),error:v.phone,placeholder:"(00) 00000-0000",maxLength:15}):s.jsxs("div",{className:"profile-info-value",children:[s.jsx(oP,{size:18}),s.jsx("span",{children:t.phone||"No informado"})]})]}),s.jsxs("div",{className:"profile-info-item",children:[s.jsx("label",{children:"Funo"}),s.jsxs("div",{className:"profile-info-value disabled",children:[s.jsx(p0,{size:18}),s.jsx("span",{children:Q(t.role)})]})]}),s.jsxs("div",{className:"profile-info-item",children:[s.jsx("label",{children:"Membro desde"}),s.jsx("div",{className:"profile-info-value disabled",children:s.jsx("span",{children:z(t.createdAt)})})]}),s.jsxs("div",{className:"profile-info-item",children:[s.jsx("label",{children:"ltima atualizao"}),s.jsx("div",{className:"profile-info-value disabled",children:s.jsx("span",{children:z(t.updatedAt)})})]})]})})]}),s.jsxs("div",{className:"profile-card",children:[s.jsxs("div",{className:"profile-card__header",children:[s.jsx("h2",{children:"Segurana"}),!o&&s.jsxs(Ye,{variant:"secondary",onClick:()=>c(!0),children:[s.jsx(p0,{size:16}),"Alterar Senha"]})]}),o&&s.jsx("div",{className:"profile-card__body",children:s.jsxs("div",{className:"password-change-form",children:[s.jsx(Ae,{label:"Senha atual",type:"password",value:h.currentPassword,onChange:E("currentPassword"),error:v.currentPassword,placeholder:"Digite sua senha atual"}),s.jsx(Ae,{label:"Nova senha",type:"password",value:h.newPassword,onChange:E("newPassword"),error:v.newPassword,placeholder:"Digite a nova senha",maxLength:50}),s.jsx(Ae,{label:"Confirmar nova senha",type:"password",value:h.confirmPassword,onChange:E("confirmPassword"),error:v.confirmPassword,placeholder:"Confirme a nova senha",maxLength:50}),s.jsxs("div",{className:"password-change-actions",children:[s.jsxs(Ye,{variant:"ghost",onClick:P,children:[s.jsx(Rs,{size:16}),"Cancelar"]}),s.jsxs(Ye,{variant:"primary",onClick:j,disabled:d,children:[s.jsx(dx,{size:16}),d?"Alterando...":"Alterar Senha"]})]})]})})]}),s.jsxs("div",{className:"profile-card",children:[s.jsx("div",{className:"profile-card__header",children:s.jsx("h2",{children:"Foto de Perfil"})}),s.jsx("div",{className:"profile-card__body",children:s.jsxs("div",{className:"profile-avatar-section",children:[s.jsx("div",{className:"profile-avatar-large",children:s.jsx(Io,{size:48})}),s.jsxs("div",{className:"profile-avatar-info",children:[s.jsx("p",{children:"Adicione uma foto de perfil para personalizar sua conta"}),s.jsxs(Ye,{variant:"secondary",disabled:!0,children:[s.jsx(Ai,{size:16}),"Em breve"]})]})]})})]})]})]}):s.jsx("div",{className:"profile-page",children:s.jsx(yr,{})})},gP=()=>{const{showSuccess:t,showError:e}=$r(),[r,n]=B.useState(!1),[a,o]=B.useState("notifications"),[c,d]=B.useState({emailNotifications:!0,pushNotifications:!0,smsNotifications:!1,notifyNewClients:!0,notifyPayments:!0,notifySales:!0,darkMode:!1,language:"pt-BR",dateFormat:"DD/MM/YYYY",currency:"BRL",showProfile:!0,showEmail:!1,twoFactorAuth:!1,autoSave:!0,dataRetention:"90",exportFormat:"xlsx"}),m=y=>{d(w=>({...w,[y]:!w[y]}))},h=(y,w)=>{d(N=>({...N,[y]:w}))},p=async()=>{n(!0);try{await new Promise(y=>setTimeout(y,1e3)),t("Configuraes salvas","Suas preferncias foram atualizadas com sucesso")}catch(y){e("Erro ao salvar configuraes",y instanceof Error?y.message:"Tente novamente")}finally{n(!1)}},v=[{id:"notifications",label:"Notificaes",icon:s.jsx(Is,{size:18})},{id:"appearance",label:"Aparncia",icon:s.jsx(Zw,{size:18})},{id:"privacy",label:"Privacidade",icon:s.jsx(p0,{size:18})},{id:"system",label:"Sistema",icon:s.jsx(Xw,{size:18})}];return s.jsxs("div",{className:"settings-page",children:[s.jsxs("div",{className:"settings-header",children:[s.jsxs("div",{className:"settings-header__title",children:[s.jsx(No,{size:24}),s.jsx("h1",{children:"Configuraes"})]}),s.jsxs(Ye,{variant:"primary",onClick:p,disabled:r,children:[s.jsx(dx,{size:16}),r?"Salvando...":"Salvar Alteraes"]})]}),s.jsxs("div",{className:"settings-content",children:[s.jsx("div",{className:"settings-tabs",children:v.map(y=>s.jsxs("button",{className:`settings-tab ${a===y.id?"active":""}`,onClick:()=>o(y.id),children:[y.icon,s.jsx("span",{children:y.label})]},y.id))}),s.jsxs("div",{className:"settings-panel",children:[a==="notifications"&&s.jsxs("div",{className:"settings-section",children:[s.jsxs("div",{className:"section-header",children:[s.jsx("h2",{children:"Preferncias de Notificaes"}),s.jsx("p",{children:"Escolha como voc deseja receber notificaes do sistema"})]}),s.jsxs("div",{className:"settings-group",children:[s.jsx("h3",{children:"Canais de Notificao"}),s.jsxs("div",{className:"setting-item",children:[s.jsxs("div",{className:"setting-info",children:[s.jsx(Is,{size:20}),s.jsxs("div",{children:[s.jsx("h4",{children:"Email"}),s.jsx("p",{children:"Receber notificaes por email"})]})]}),s.jsx("button",{className:"toggle-btn",onClick:()=>m("emailNotifications"),children:c.emailNotifications?s.jsx(ts,{size:32,className:"active"}):s.jsx(es,{size:32})})]}),s.jsxs("div",{className:"setting-item",children:[s.jsxs("div",{className:"setting-info",children:[s.jsx(Is,{size:20}),s.jsxs("div",{children:[s.jsx("h4",{children:"Push"}),s.jsx("p",{children:"Receber notificaes push no navegador"})]})]}),s.jsx("button",{className:"toggle-btn",onClick:()=>m("pushNotifications"),children:c.pushNotifications?s.jsx(ts,{size:32,className:"active"}):s.jsx(es,{size:32})})]}),s.jsxs("div",{className:"setting-item",children:[s.jsxs("div",{className:"setting-info",children:[s.jsx(Is,{size:20}),s.jsxs("div",{children:[s.jsx("h4",{children:"SMS"}),s.jsx("p",{children:"Receber notificaes por SMS"})]})]}),s.jsx("button",{className:"toggle-btn",onClick:()=>m("smsNotifications"),children:c.smsNotifications?s.jsx(ts,{size:32,className:"active"}):s.jsx(es,{size:32})})]})]}),s.jsxs("div",{className:"settings-group",children:[s.jsx("h3",{children:"Eventos"}),s.jsxs("div",{className:"setting-item",children:[s.jsx("div",{className:"setting-info",children:s.jsxs("div",{children:[s.jsx("h4",{children:"Novos Clientes"}),s.jsx("p",{children:"Notificar quando um novo cliente for cadastrado"})]})}),s.jsx("button",{className:"toggle-btn",onClick:()=>m("notifyNewClients"),children:c.notifyNewClients?s.jsx(ts,{size:32,className:"active"}):s.jsx(es,{size:32})})]}),s.jsxs("div",{className:"setting-item",children:[s.jsx("div",{className:"setting-info",children:s.jsxs("div",{children:[s.jsx("h4",{children:"Pagamentos"}),s.jsx("p",{children:"Notificar sobre pagamentos recebidos e pendentes"})]})}),s.jsx("button",{className:"toggle-btn",onClick:()=>m("notifyPayments"),children:c.notifyPayments?s.jsx(ts,{size:32,className:"active"}):s.jsx(es,{size:32})})]}),s.jsxs("div",{className:"setting-item",children:[s.jsx("div",{className:"setting-info",children:s.jsxs("div",{children:[s.jsx("h4",{children:"Vendas"}),s.jsx("p",{children:"Notificar quando uma venda for finalizada"})]})}),s.jsx("button",{className:"toggle-btn",onClick:()=>m("notifySales"),children:c.notifySales?s.jsx(ts,{size:32,className:"active"}):s.jsx(es,{size:32})})]})]})]}),a==="appearance"&&s.jsxs("div",{className:"settings-section",children:[s.jsxs("div",{className:"section-header",children:[s.jsx("h2",{children:"Aparncia e Localizao"}),s.jsx("p",{children:"Personalize a aparncia e formatos do sistema"})]}),s.jsxs("div",{className:"settings-group",children:[s.jsx("h3",{children:"Tema"}),s.jsxs("div",{className:"setting-item",children:[s.jsxs("div",{className:"setting-info",children:[s.jsx(Zw,{size:20}),s.jsxs("div",{children:[s.jsx("h4",{children:"Modo Escuro"}),s.jsx("p",{children:"Ativar tema escuro no sistema"})]})]}),s.jsx("button",{className:"toggle-btn",onClick:()=>m("darkMode"),children:c.darkMode?s.jsx(ts,{size:32,className:"active"}):s.jsx(es,{size:32})})]})]}),s.jsxs("div",{className:"settings-group",children:[s.jsx("h3",{children:"Localizao"}),s.jsxs("div",{className:"setting-item-select",children:[s.jsxs("div",{className:"setting-info",children:[s.jsx(m0,{size:20}),s.jsxs("div",{children:[s.jsx("h4",{children:"Idioma"}),s.jsx("p",{children:"Idioma do sistema"})]})]}),s.jsxs("select",{value:c.language,onChange:y=>h("language",y.target.value),className:"setting-select",children:[s.jsx("option",{value:"pt-BR",children:"Portugus (Brasil)"}),s.jsx("option",{value:"en-US",children:"English (US)"}),s.jsx("option",{value:"es-ES",children:"Espaol"})]})]}),s.jsxs("div",{className:"setting-item-select",children:[s.jsx("div",{className:"setting-info",children:s.jsxs("div",{children:[s.jsx("h4",{children:"Formato de Data"}),s.jsx("p",{children:"Como as datas sero exibidas"})]})}),s.jsxs("select",{value:c.dateFormat,onChange:y=>h("dateFormat",y.target.value),className:"setting-select",children:[s.jsx("option",{value:"DD/MM/YYYY",children:"DD/MM/YYYY"}),s.jsx("option",{value:"MM/DD/YYYY",children:"MM/DD/YYYY"}),s.jsx("option",{value:"YYYY-MM-DD",children:"YYYY-MM-DD"})]})]}),s.jsxs("div",{className:"setting-item-select",children:[s.jsx("div",{className:"setting-info",children:s.jsxs("div",{children:[s.jsx("h4",{children:"Moeda"}),s.jsx("p",{children:"Moeda padro para valores monetrios"})]})}),s.jsxs("select",{value:c.currency,onChange:y=>h("currency",y.target.value),className:"setting-select",children:[s.jsx("option",{value:"BRL",children:"Real (R$)"}),s.jsx("option",{value:"USD",children:"Dlar ($)"}),s.jsx("option",{value:"EUR",children:"Euro ()"})]})]})]})]}),a==="privacy"&&s.jsxs("div",{className:"settings-section",children:[s.jsxs("div",{className:"section-header",children:[s.jsx("h2",{children:"Privacidade e Segurana"}),s.jsx("p",{children:"Controle suas informaes e segurana da conta"})]}),s.jsxs("div",{className:"settings-group",children:[s.jsx("h3",{children:"Visibilidade do Perfil"}),s.jsxs("div",{className:"setting-item",children:[s.jsx("div",{className:"setting-info",children:s.jsxs("div",{children:[s.jsx("h4",{children:"Mostrar Perfil"}),s.jsx("p",{children:"Permitir que outros usurios vejam seu perfil"})]})}),s.jsx("button",{className:"toggle-btn",onClick:()=>m("showProfile"),children:c.showProfile?s.jsx(ts,{size:32,className:"active"}):s.jsx(es,{size:32})})]}),s.jsxs("div",{className:"setting-item",children:[s.jsx("div",{className:"setting-info",children:s.jsxs("div",{children:[s.jsx("h4",{children:"Mostrar Email"}),s.jsx("p",{children:"Exibir seu email para outros usurios"})]})}),s.jsx("button",{className:"toggle-btn",onClick:()=>m("showEmail"),children:c.showEmail?s.jsx(ts,{size:32,className:"active"}):s.jsx(es,{size:32})})]})]}),s.jsxs("div",{className:"settings-group",children:[s.jsx("h3",{children:"Segurana"}),s.jsxs("div",{className:"setting-item",children:[s.jsxs("div",{className:"setting-info",children:[s.jsx(p0,{size:20}),s.jsxs("div",{children:[s.jsx("h4",{children:"Autenticao em Dois Fatores"}),s.jsx("p",{children:"Adicionar uma camada extra de segurana  sua conta"})]})]}),s.jsx("button",{className:"toggle-btn",onClick:()=>m("twoFactorAuth"),children:c.twoFactorAuth?s.jsx(ts,{size:32,className:"active"}):s.jsx(es,{size:32})})]})]})]}),a==="system"&&s.jsxs("div",{className:"settings-section",children:[s.jsxs("div",{className:"section-header",children:[s.jsx("h2",{children:"Configuraes do Sistema"}),s.jsx("p",{children:"Preferncias de funcionamento do sistema"})]}),s.jsxs("div",{className:"settings-group",children:[s.jsx("h3",{children:"Dados"}),s.jsxs("div",{className:"setting-item",children:[s.jsxs("div",{className:"setting-info",children:[s.jsx(Xw,{size:20}),s.jsxs("div",{children:[s.jsx("h4",{children:"Salvamento Automtico"}),s.jsx("p",{children:"Salvar automaticamente as alteraes"})]})]}),s.jsx("button",{className:"toggle-btn",onClick:()=>m("autoSave"),children:c.autoSave?s.jsx(ts,{size:32,className:"active"}):s.jsx(es,{size:32})})]}),s.jsxs("div",{className:"setting-item-select",children:[s.jsx("div",{className:"setting-info",children:s.jsxs("div",{children:[s.jsx("h4",{children:"Reteno de Dados"}),s.jsx("p",{children:"Tempo de armazenamento de dados temporrios"})]})}),s.jsxs("select",{value:c.dataRetention,onChange:y=>h("dataRetention",y.target.value),className:"setting-select",children:[s.jsx("option",{value:"30",children:"30 dias"}),s.jsx("option",{value:"60",children:"60 dias"}),s.jsx("option",{value:"90",children:"90 dias"}),s.jsx("option",{value:"180",children:"6 meses"}),s.jsx("option",{value:"365",children:"1 ano"})]})]}),s.jsxs("div",{className:"setting-item-select",children:[s.jsx("div",{className:"setting-info",children:s.jsxs("div",{children:[s.jsx("h4",{children:"Formato de Exportao"}),s.jsx("p",{children:"Formato padro para exportar relatrios"})]})}),s.jsxs("select",{value:c.exportFormat,onChange:y=>h("exportFormat",y.target.value),className:"setting-select",children:[s.jsx("option",{value:"xlsx",children:"Excel (.xlsx)"}),s.jsx("option",{value:"csv",children:"CSV (.csv)"}),s.jsx("option",{value:"pdf",children:"PDF (.pdf)"})]})]})]})]})]})]})]})},Uc="clients",rN=t=>{const e=t.data();if(!e)throw new Error("Document data is undefined");return{id:t.id,code:e.code||"",name:e.name||"",cpf:e.cpf||"",birthDate:e.birthDate?.toDate()||new Date,instagram:e.instagram||"",address:e.address||{street:"",number:"",complement:"",neighborhood:"",city:"",state:"",zipCode:""},profession:e.profession||"",maritalStatus:e.maritalStatus||"single",phone:e.phone||"",email:e.email||"",status:e.status||"active",createdAt:e.createdAt?.toDate()||new Date,updatedAt:e.updatedAt?.toDate()||new Date}},nN=t=>{const e={...t};return"birthDate"in e&&e.birthDate&&(e.birthDate=Ke.fromDate(e.birthDate)),e},ko={async getAll(t){try{let e=mt(kt(et,Uc),hs("name"));t?.status&&(e=mt(e,ft("status","==",t.status))),t?.city&&(e=mt(e,ft("address.city","==",t.city))),t?.state&&(e=mt(e,ft("address.state","==",t.state)));let n=(await qr(e)).docs.map(rN);if(t?.search){const a=t.search.toLowerCase();n=n.filter(o=>o.name.toLowerCase().includes(a)||o.email.toLowerCase().includes(a)||o.phone.includes(a)||o.cpf.includes(a)||o.instagram.toLowerCase().includes(a)||o.profession.toLowerCase().includes(a))}return n}catch(e){throw console.error("Erro ao buscar clientes:",e),new Error("Falha ao carregar lista de clientes")}},async getById(t){try{const e=Zt(et,Uc,t),r=await ji(e);return r.exists()?rN(r):null}catch(e){throw console.error("Erro ao buscar cliente:",e),new Error("Falha ao carregar dados do cliente")}},async create(t){try{const e=await this.generateClientCode(),r={...nN(t),code:e,createdAt:Ke.now(),updatedAt:Ke.now()};return(await Bs(kt(et,Uc),r)).id}catch(e){throw console.error("Erro ao criar cliente:",e),new Error("Falha ao criar cliente")}},async update(t){try{const{id:e,...r}=t,n=Zt(et,Uc,e),a={...nN(r),updatedAt:Ke.now()};await Vs(n,a)}catch(e){throw console.error("Erro ao atualizar cliente:",e),new Error("Falha ao atualizar cliente")}},async delete(t){try{const e=Zt(et,Uc,t);await Xl(e)}catch(e){throw console.error("Erro ao deletar cliente:",e),new Error("Falha ao deletar cliente")}},async searchByName(t,e=10){try{return(await this.getAll()).filter(a=>a.name.toLowerCase().includes(t.toLowerCase())).slice(0,e)}catch(r){throw console.error("Erro ao buscar clientes por nome:",r),new Error("Falha na busca de clientes")}},async emailExists(t,e){try{const r=mt(kt(et,Uc),ft("email","==",t)),n=await qr(r);return e?n.docs.some(a=>a.id!==e):!n.empty}catch(r){return console.error("Erro ao verificar email:",r),!1}},async generateClientCode(){try{const e=(await this.getAll()).sort((a,o)=>o.createdAt.getTime()-a.createdAt.getTime())[0];return!e||!e.code?"CLI001":`CLI${(parseInt(e.code.replace("CLI",""))+1).toString().padStart(3,"0")}`}catch(t){return console.error("Erro ao gerar cdigo:",t),"CLI001"}},async getStats(){try{const t=await this.getAll();return{total:t.length,active:t.filter(e=>e.status==="active").length,inactive:t.filter(e=>e.status==="inactive").length,prospects:t.filter(e=>e.status==="prospect").length}}catch(t){throw console.error("Erro ao obter estatsticas:",t),new Error("Falha ao carregar estatsticas")}}},vP=({clients:t,loading:e,onEdit:r,onView:n,onDelete:a})=>{const[o,c]=B.useState("name"),[d,m]=B.useState("asc"),h=E=>{o===E?m(d==="asc"?"desc":"asc"):(c(E),m("asc"))},p=[...t].sort((E,T)=>{let j=E[o],O=T[o];return o==="address"&&(j=E.address.city,O=T.address.city),j instanceof Date&&O instanceof Date?d==="asc"?j.getTime()-O.getTime():O.getTime()-j.getTime():typeof j=="string"&&typeof O=="string"?d==="asc"?j.localeCompare(O):O.localeCompare(j):0}),v=E=>new Intl.DateTimeFormat("pt-BR").format(E),y=E=>{const T=E.replace(/\D/g,"");return T.length===11?`(${T.slice(0,2)}) ${T.slice(2,7)}-${T.slice(7)}`:T.length===10?`(${T.slice(0,2)}) ${T.slice(2,6)}-${T.slice(6)}`:E},w=E=>{const j={active:{label:"Ativo",class:"status-active"},inactive:{label:"Inativo",class:"status-inactive"},prospect:{label:"Prospect",class:"status-prospect"}}[E]||{label:E,class:"status-default"};return s.jsx("span",{className:`status-badge ${j.class}`,children:j.label})},N=({field:E,children:T})=>s.jsxs("button",{className:`sort-button ${o===E?"active":""}`,onClick:()=>h(E),children:[T,o===E&&s.jsx("span",{className:"sort-indicator",children:d==="asc"?"":""})]});return e?s.jsx("div",{className:"client-list-loading",children:s.jsx(yr,{text:"Carregando clientes..."})}):t.length===0?s.jsx("div",{className:"client-list-empty",children:s.jsxs("div",{className:"empty-state",children:[s.jsx("div",{className:"empty-icon",children:s.jsx(ps,{size:48})}),s.jsx("h3",{children:"Nenhum cliente encontrado"}),s.jsx("p",{children:"No h clientes cadastrados ou que correspondam aos filtros aplicados."})]})}):s.jsxs("div",{className:"client-list",children:[s.jsx("div",{className:"client-list-header",children:s.jsxs("h3",{children:["Lista de Clientes (",t.length,")"]})}),s.jsx("div",{className:"client-table-container",children:s.jsxs("table",{className:"client-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:s.jsx(N,{field:"name",children:"Nome"})}),s.jsx("th",{children:s.jsx(N,{field:"email",children:"Contato"})}),s.jsx("th",{children:s.jsx(N,{field:"profession",children:"Profisso"})}),s.jsx("th",{children:s.jsx(N,{field:"status",children:"Status"})}),s.jsx("th",{children:s.jsx(N,{field:"address",children:"Cidade"})}),s.jsx("th",{children:s.jsx(N,{field:"createdAt",children:"Data Cadastro"})}),s.jsx("th",{className:"actions-column",children:"Aes"})]})}),s.jsx("tbody",{children:p.map(E=>s.jsxs("tr",{className:"client-row",children:[s.jsx("td",{className:"client-name",children:s.jsxs("div",{className:"name-info",children:[s.jsx("span",{className:"name",children:E.name}),s.jsxs("span",{className:"code",children:["Cdigo: ",E.code]})]})}),s.jsx("td",{className:"client-contact",children:s.jsxs("div",{className:"contact-info",children:[s.jsx("span",{className:"email",children:E.email}),s.jsx("span",{className:"phone",children:y(E.phone)})]})}),s.jsx("td",{className:"client-profession",children:s.jsx("span",{className:"profession",children:E.profession})}),s.jsx("td",{className:"client-status",children:w(E.status)}),s.jsx("td",{className:"client-location",children:s.jsxs("div",{className:"location-info",children:[s.jsx("span",{className:"city",children:E.address.city}),s.jsx("span",{className:"state",children:E.address.state})]})}),s.jsx("td",{className:"client-date",children:v(E.createdAt)}),s.jsx("td",{className:"client-actions",children:s.jsxs("div",{className:"action-buttons",children:[s.jsx(Ye,{onClick:()=>n(E),variant:"secondary",size:"small",className:"action-btn view-btn",children:s.jsx(ms,{size:16})}),s.jsx(Ye,{onClick:()=>r(E),variant:"secondary",size:"small",className:"action-btn edit-btn",children:s.jsx(Ai,{size:16})}),s.jsx(Ye,{onClick:()=>a(E.id),variant:"secondary",size:"small",className:"action-btn delete-btn",children:s.jsx(Jl,{size:16})})]})})]},E.id))})]})})]})},Iu=({isOpen:t,onClose:e,title:r,children:n,size:a="medium",className:o=""})=>(B.useEffect(()=>{const c=d=>{d.key==="Escape"&&t&&e()};return t&&(document.addEventListener("keydown",c),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",c),document.body.style.overflow="unset"}},[t,e]),t?s.jsx("div",{className:"modal-overlay",onClick:e,children:s.jsxs("div",{className:`modal-content modal-${a} ${o}`,onClick:c=>c.stopPropagation(),children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("h2",{className:"modal-title",children:r}),s.jsx("button",{className:"modal-close-button",onClick:e,"aria-label":"Fechar modal",children:""})]}),s.jsx("div",{className:"modal-body",children:n})]})}):null),Jt=({label:t,value:e,onChange:r,options:n,placeholder:a="Selecione uma opo",error:o,required:c=!1,disabled:d=!1,className:m=""})=>{const h=p=>{r(p.target.value)};return s.jsxs("div",{className:`select-field ${m}`,children:[s.jsxs("label",{className:"select-field__label",children:[t,c&&s.jsx("span",{className:"select-field__required",children:"*"})]}),s.jsxs("select",{className:`select-field__select ${o?"select-field__select--error":""}`,value:e,onChange:h,disabled:d,required:c,children:[s.jsx("option",{value:"",disabled:!0,children:a}),n.map(p=>s.jsx("option",{value:p.value,children:p.label},p.value))]}),o&&s.jsx("span",{className:"select-field__error",children:o})]})},aN={name:"",cpf:"",birthDate:new Date,instagram:"",address:{street:"",number:"",complement:"",neighborhood:"",city:"",state:"",zipCode:""},profession:"",maritalStatus:"single",phone:"",email:"",status:"active"},xP=({isOpen:t,onClose:e,onSave:r,client:n,mode:a})=>{const[o,c]=B.useState(aN),[d,m]=B.useState(!1),[h,p]=B.useState({}),{showError:v}=$r(),y=a==="view",w=a==="edit",N=a==="create";B.useEffect(()=>{t&&(c(n&&(w||a==="view")?{name:n.name,cpf:n.cpf,birthDate:n.birthDate,instagram:n.instagram,address:{street:n.address.street,number:n.address.number,complement:n.address.complement||"",neighborhood:n.address.neighborhood,city:n.address.city,state:n.address.state,zipCode:n.address.zipCode},profession:n.profession,maritalStatus:n.maritalStatus,phone:n.phone,email:n.email,status:n.status}:aN),p({}))},[t,n,w,a]);const E=()=>{const C={};return o.name.trim()||(C.name="Nome  obrigatrio"),o.cpf.trim()||(C.cpf="CPF  obrigatrio"),o.instagram.trim()||(C.instagram="Instagram  obrigatrio"),o.birthDate||(C.birthDate="Data de nascimento  obrigatria"),o.profession.trim()||(C.profession="Profisso  obrigatria"),o.phone.trim()||(C.phone="Telefone  obrigatrio"),o.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.email)||(C.email="Email invlido"):C.email="Email  obrigatrio",o.address.street.trim()||(C["address.street"]="Rua  obrigatria"),o.address.number.trim()||(C["address.number"]="Nmero  obrigatrio"),o.address.neighborhood.trim()||(C["address.neighborhood"]="Bairro  obrigatrio"),o.address.city.trim()||(C["address.city"]="Cidade  obrigatria"),o.address.state.trim()||(C["address.state"]="Estado  obrigatrio"),o.address.zipCode.trim()||(C["address.zipCode"]="CEP  obrigatrio"),p(C),Object.keys(C).length===0},T=async C=>{if(C.preventDefault(),!y&&E())try{m(!0);let k="create";N?(await ko.create(o),k="create"):w&&n&&(await ko.update({id:n.id,...o}),k="edit"),r(k)}catch(k){const S=k instanceof Error?k.message:"Erro ao salvar cliente";p({submit:S}),v("Erro ao salvar cliente",S)}finally{m(!1)}},j=(C,k)=>{y||(c(S=>{if(C.includes(".")){const[F,M]=C.split(".");return F==="address"?{...S,address:{...S.address,[M]:k}}:S}return{...S,[C]:k}}),h[C]&&p(S=>{const F={...S};return delete F[C],F}))},O=C=>C.toISOString().split("T")[0],P=C=>C?new Date(C):void 0,z=[{value:"active",label:"Ativo"},{value:"inactive",label:"Inativo"},{value:"prospect",label:"Prospect"}],Q=[{value:"single",label:"Solteiro(a)"},{value:"married",label:"Casado(a)"},{value:"divorced",label:"Divorciado(a)"},{value:"widowed",label:"Vivo(a)"},{value:"separated",label:"Separado(a)"}],U=()=>{switch(a){case"create":return"Novo Cliente";case"edit":return"Editar Cliente";case"view":return"Visualizar Cliente";default:return"Cliente"}};return s.jsx(Iu,{isOpen:t,onClose:e,title:U(),size:"large",className:"client-modal",children:s.jsxs("form",{onSubmit:T,className:"client-form",children:[d&&s.jsx(yr,{text:"Salvando cliente..."}),h.submit&&s.jsx("div",{className:"error-message",children:h.submit}),s.jsxs("div",{className:"form-sections",children:[s.jsxs("div",{className:"form-section",children:[s.jsx("h3",{children:"Informaes Bsicas"}),s.jsxs("div",{className:"form-row",children:[s.jsx("div",{className:"form-group",children:s.jsx(Jt,{label:"Status",value:o.status,onChange:C=>j("status",C),options:z,disabled:y,error:h.status})}),s.jsx("div",{className:"form-group",children:s.jsx(Ae,{label:"Cdigo",value:n?.code||"Gerado automaticamente",placeholder:"Cdigo ser gerado automaticamente",onChange:()=>{}})})]}),s.jsx("div",{className:"form-row",children:s.jsx("div",{className:"form-group full-width",children:s.jsx(Ae,{label:"Nome Completo",value:o.name,onChange:C=>j("name",C),placeholder:"Digite o nome completo",error:h.name,required:!0})})}),s.jsxs("div",{className:"form-row",children:[s.jsx("div",{className:"form-group",children:s.jsx(Ae,{label:"CPF",value:o.cpf,onChange:C=>j("cpf",C),placeholder:"000.000.000-00",error:h.cpf,required:!0,mask:"cpf"})}),s.jsx("div",{className:"form-group",children:s.jsx(Ae,{label:"Instagram",value:o.instagram,onChange:C=>j("instagram",C),placeholder:"Digite o Instagram",error:h.instagram,required:!0})}),s.jsx("div",{className:"form-group",children:s.jsx(Ae,{label:"Data de Nascimento",type:"date",value:o.birthDate?O(o.birthDate):"",onChange:C=>j("birthDate",P(C)),error:h.birthDate,required:!0})})]}),s.jsxs("div",{className:"form-row",children:[s.jsx("div",{className:"form-group",children:s.jsx(Ae,{label:"Profisso",value:o.profession,onChange:C=>j("profession",C),placeholder:"Digite a profisso",error:h.profession,required:!0})}),s.jsx("div",{className:"form-group",children:s.jsx(Jt,{label:"Estado Civil",value:o.maritalStatus,onChange:C=>j("maritalStatus",C),options:Q,disabled:y,error:h.maritalStatus})})]}),s.jsxs("div",{className:"form-row",children:[s.jsx("div",{className:"form-group",children:s.jsx(Ae,{label:"Telefone",value:o.phone,onChange:C=>j("phone",C),placeholder:"(00) 00000-0000",error:h.phone,required:!0,mask:"phone"})}),s.jsx("div",{className:"form-group",children:s.jsx(Ae,{label:"Email",type:"email",value:o.email,onChange:C=>j("email",C),placeholder:"Digite o email",error:h.email,required:!0})})]})]}),s.jsxs("div",{className:"form-section",children:[s.jsx("h3",{children:"Endereo"}),s.jsxs("div",{className:"form-row",children:[s.jsx("div",{className:"form-group",children:s.jsx(Ae,{label:"CEP",value:o.address.zipCode,onChange:C=>j("address.zipCode",C),placeholder:"00000-000",error:h["address.zipCode"],required:!0,mask:"cep"})}),s.jsx("div",{className:"form-group flex-2",children:s.jsx(Ae,{label:"Rua",value:o.address.street,onChange:C=>j("address.street",C),placeholder:"Digite o nome da rua",error:h["address.street"],required:!0})}),s.jsx("div",{className:"form-group",children:s.jsx(Ae,{label:"Nmero",value:o.address.number,onChange:C=>j("address.number",C),placeholder:"123",error:h["address.number"],required:!0})})]}),s.jsxs("div",{className:"form-row",children:[s.jsx("div",{className:"form-group",children:s.jsx(Ae,{label:"Complemento",value:o.address.complement||"",onChange:C=>j("address.complement",C),placeholder:"Apto, sala, etc. (opcional)",error:h["address.complement"]})}),s.jsx("div",{className:"form-group",children:s.jsx(Ae,{label:"Bairro",value:o.address.neighborhood,onChange:C=>j("address.neighborhood",C),placeholder:"Digite o bairro",error:h["address.neighborhood"],required:!0})})]}),s.jsxs("div",{className:"form-row",children:[s.jsx("div",{className:"form-group flex-2",children:s.jsx(Ae,{label:"Cidade",value:o.address.city,onChange:C=>j("address.city",C),placeholder:"Digite a cidade",error:h["address.city"],required:!0})}),s.jsx("div",{className:"form-group",children:s.jsx(Ae,{label:"Estado",value:o.address.state,onChange:C=>j("address.state",C),placeholder:"SP",error:h["address.state"],required:!0})})]})]})]}),!y&&s.jsxs("div",{className:"form-actions",children:[s.jsx(Ye,{type:"button",variant:"secondary",onClick:e,disabled:d,children:"Cancelar"}),s.jsx(Ye,{type:"submit",disabled:d,children:d?"Salvando...":N?"Criar Cliente":"Salvar Alteraes"})]}),y&&s.jsx("div",{className:"form-actions",children:s.jsx(Ye,{type:"button",onClick:e,children:"Fechar"})})]})})},yP=({filters:t,onFiltersChange:e,onClearFilters:r,clientCount:n,totalCount:a})=>{const[o,c]=B.useState(!1),d=(v,y)=>{const w={...t,[v]:y||void 0};Object.keys(w).forEach(N=>{w[N]||delete w[N]}),e(w)},m=Object.keys(t).length>0,h=[{value:"",label:"Todos os status"},{value:"active",label:"Ativo"},{value:"inactive",label:"Inativo"},{value:"prospect",label:"Prospect"}],p=[{value:"",label:"Todos os estados civis"},{value:"single",label:"Solteiro(a)"},{value:"married",label:"Casado(a)"},{value:"divorced",label:"Divorciado(a)"},{value:"widowed",label:"Vivo(a)"},{value:"separated",label:"Separado(a)"}];return s.jsxs("div",{className:"client-filters",children:[s.jsxs("div",{className:"filters-header",children:[s.jsxs("div",{className:"filters-info",children:[s.jsx("h3",{children:"Filtros"}),s.jsx("span",{className:"results-count",children:n===a?`${a} clientes`:`${n} de ${a} clientes`})]}),s.jsxs("div",{className:"filters-actions",children:[m&&s.jsx(Ye,{onClick:r,variant:"secondary",size:"small",children:"Limpar Filtros"}),s.jsx(Ye,{onClick:()=>c(!o),variant:"secondary",size:"small",className:"toggle-filters-btn",children:o?" Ocultar":" Expandir"})]})]}),s.jsxs("div",{className:`filters-content ${o?"expanded":""}`,children:[s.jsxs("div",{className:"filters-row",children:[s.jsx("div",{className:"filter-group",children:s.jsx(Ae,{label:"Buscar",placeholder:"Nome, email, telefone, CPF, CNPJ...",value:t.search||"",onChange:v=>d("search",v)})}),s.jsx("div",{className:"filter-group",children:s.jsx(Jt,{label:"Status",value:t.status||"",onChange:v=>d("status",v),options:h})}),s.jsx("div",{className:"filter-group",children:s.jsx(Ae,{label:"Profisso",placeholder:"Digite a profisso",value:t.profession||"",onChange:v=>d("profession",v)})})]}),o&&s.jsxs("div",{className:"filters-row",children:[s.jsx("div",{className:"filter-group",children:s.jsx(Ae,{label:"Cidade",placeholder:"Digite a cidade",value:t.city||"",onChange:v=>d("city",v)})}),s.jsx("div",{className:"filter-group",children:s.jsx(Ae,{label:"Estado",placeholder:"Digite o estado",value:t.state||"",onChange:v=>d("state",v)})}),s.jsx("div",{className:"filter-group",children:s.jsx(Jt,{label:"Estado Civil",value:t.maritalStatus||"",onChange:v=>d("maritalStatus",v),options:p})})]})]}),m&&s.jsxs("div",{className:"active-filters",children:[s.jsx("span",{className:"active-filters-label",children:"Filtros ativos:"}),s.jsxs("div",{className:"filter-tags",children:[t.search&&s.jsxs("span",{className:"filter-tag",children:['Busca: "',t.search,'"',s.jsx("button",{onClick:()=>d("search",""),children:""})]}),t.status&&s.jsxs("span",{className:"filter-tag",children:["Status:"," ",h.find(v=>v.value===t.status)?.label,s.jsx("button",{onClick:()=>d("status",""),children:""})]}),t.profession&&s.jsxs("span",{className:"filter-tag",children:["Profisso: ",t.profession,s.jsx("button",{onClick:()=>d("profession",""),children:""})]}),t.city&&s.jsxs("span",{className:"filter-tag",children:["Cidade: ",t.city,s.jsx("button",{onClick:()=>d("city",""),children:""})]}),t.state&&s.jsxs("span",{className:"filter-tag",children:["Estado: ",t.state,s.jsx("button",{onClick:()=>d("state",""),children:""})]}),t.maritalStatus&&s.jsxs("span",{className:"filter-tag",children:["Estado Civil:"," ",p.find(v=>v.value===t.maritalStatus)?.label,s.jsx("button",{onClick:()=>d("maritalStatus",""),children:""})]})]})]})]})},_P=({stats:t})=>{const e=[{title:"Total de Clientes",value:t.total,icon:Hr,color:"blue",description:"Total de clientes cadastrados"},{title:"Clientes Ativos",value:t.active,icon:Dn,color:"green",description:"Clientes com status ativo"},{title:"Prospects",value:t.prospects,icon:gn,color:"yellow",description:"Clientes em prospeco"},{title:"Inativos",value:t.inactive,icon:Yh,color:"gray",description:"Clientes inativos"}];return s.jsx("div",{className:"client-stats",children:s.jsx("div",{className:"stats-grid",children:e.map(r=>{const n=r.icon;return s.jsxs("div",{className:`stat-card stat-card-${r.color}`,children:[s.jsx("div",{className:"stat-icon",children:s.jsx(n,{size:24})}),s.jsxs("div",{className:"stat-content",children:[s.jsx("div",{className:"stat-value",children:r.value}),s.jsx("div",{className:"stat-title",children:r.title}),s.jsx("div",{className:"stat-description",children:r.description})]})]},r.title)})})})},EP=()=>{const[t,e]=B.useState([]),[r,n]=B.useState(!0),[a,o]=B.useState(!1),[c,d]=B.useState(null),[m,h]=B.useState("create"),[p,v]=B.useState({}),[y,w]=B.useState({total:0,active:0,inactive:0,prospects:0}),{showError:N,showSuccess:E,showWarning:T}=$r(),j=async()=>{try{n(!0);const A=await ko.getAll(p);e(A)}catch(A){const D=A instanceof Error?A.message:"Erro ao carregar clientes";N("Erro ao carregar clientes",D)}finally{n(!1)}},O=async()=>{try{const A=await ko.getStats();w(A)}catch(A){const D=A instanceof Error?A.message:"Erro ao carregar estatsticas";T("Estatsticas indisponveis",D)}},P=B.useMemo(()=>{let A=[...t];if(p.search){const D=p.search.toLowerCase();A=A.filter(we=>we.name.toLowerCase().includes(D)||we.email.toLowerCase().includes(D)||we.phone.includes(D)||we.cpf.includes(D)||we.profession.toLowerCase().includes(D))}return p.status&&(A=A.filter(D=>D.status===p.status)),p.profession&&(A=A.filter(D=>D.profession.toLowerCase().includes(p.profession.toLowerCase()))),p.maritalStatus&&(A=A.filter(D=>D.maritalStatus===p.maritalStatus)),p.city&&(A=A.filter(D=>D.address.city.toLowerCase().includes(p.city.toLowerCase()))),p.state&&(A=A.filter(D=>D.address.state.toLowerCase().includes(p.state.toLowerCase()))),A},[t,p]);B.useEffect(()=>{j(),O()},[]),B.useEffect(()=>{Object.keys(p).length>0&&j()},[p]);const z=()=>{d(null),h("create"),o(!0)},Q=A=>{d(A),h("edit"),o(!0)},U=A=>{d(A),h("view"),o(!0)},C=async A=>{if(confirm("Tem certeza que deseja excluir este cliente?"))try{await ko.delete(A),e(t.filter(D=>D.id!==A)),O(),E("Cliente excludo","O cliente foi excludo com sucesso.")}catch(D){const we=D instanceof Error?D.message:"Erro ao excluir cliente";N("Erro ao excluir cliente",we)}},k=()=>{o(!1),d(null)},S=A=>{j(),O(),k(),E(A==="create"?"Cliente criado":"Cliente atualizado",A==="create"?"O cliente foi cadastrado com sucesso.":"As informaes do cliente foram atualizadas.")},F=A=>{v(A)},M=()=>{v({})};return r&&t.length===0?s.jsx(yr,{text:"Carregando clientes...",fullScreen:!0}):s.jsxs("div",{className:"client-management",children:[s.jsx("div",{className:"client-management-header",children:s.jsxs("div",{className:"header-content",children:[s.jsx("h1",{children:"Gesto de Clientes"}),s.jsx(Ye,{onClick:z,className:"create-client-btn",children:"+ Novo Cliente"})]})}),s.jsx(_P,{stats:y}),s.jsxs("div",{className:"client-management-content",children:[s.jsx(yP,{filters:p,onFiltersChange:F,onClearFilters:M,clientCount:P.length,totalCount:t.length}),s.jsx(vP,{clients:P,loading:r,onEdit:Q,onView:U,onDelete:C})]}),s.jsx(xP,{isOpen:a,onClose:k,onSave:S,client:c,mode:m})]})},zc="owners",sN=t=>{const e=t.data();if(!e)throw new Error("Document data is undefined");return{id:t.id,code:e.code||"",name:e.name||"",cpf:e.cpf||"",address:e.address||{street:"",number:"",complement:"",neighborhood:"",city:"",state:"",zipCode:""},profession:e.profession||"",maritalStatus:e.maritalStatus||"single",phone:e.phone||"",bankData:e.bankData||{bank:"",agency:"",account:"",accountType:"checking"},pix:e.pix||"",commission:e.commission||0,status:e.status||"active",createdAt:e.createdAt?.toDate()||new Date,updatedAt:e.updatedAt?.toDate()||new Date}},iN=t=>{const e={...t};return"birthDate"in e&&e.birthDate&&(e.birthDate=Ke.fromDate(e.birthDate)),e},Il={async getAll(t){try{let e=mt(kt(et,zc),hs("name","asc"));t?.status&&(e=mt(e,ft("status","==",t.status))),t?.city&&(e=mt(e,ft("address.city","==",t.city))),t?.state&&(e=mt(e,ft("address.state","==",t.state))),t?.bank&&(e=mt(e,ft("bankData.bank","==",t.bank)));let n=(await qr(e)).docs.map(sN);if(t?.search){const a=t.search.toLowerCase();n=n.filter(o=>o.name.toLowerCase().includes(a)||o.phone.includes(a)||o.cpf.includes(a)||o.pix.toLowerCase().includes(a)||o.profession.toLowerCase().includes(a))}return n}catch(e){throw console.error("Erro ao buscar proprietrios:",e),new Error("Falha ao carregar lista de proprietrios")}},async getById(t){try{const e=Zt(et,zc,t),r=await ji(e);return r.exists()?sN(r):null}catch(e){throw console.error("Erro ao buscar proprietrio:",e),new Error("Falha ao carregar dados do proprietrio")}},async create(t){try{const e=await this.generateOwnerCode(),r={...iN(t),code:e,createdAt:Ke.now(),updatedAt:Ke.now()};return(await Bs(kt(et,zc),r)).id}catch(e){throw console.error("Erro ao criar proprietrio:",e),new Error("Falha ao criar proprietrio")}},async update(t){try{const{id:e,...r}=t,n=Zt(et,zc,e);await Vs(n,{...iN(r),updatedAt:Ke.now()})}catch(e){throw console.error("Erro ao atualizar proprietrio:",e),new Error("Falha ao atualizar proprietrio")}},async delete(t){try{const e=Zt(et,zc,t);await Xl(e)}catch(e){throw console.error("Erro ao deletar proprietrio:",e),new Error("Falha ao deletar proprietrio")}},async checkCpfExists(t,e){try{const r=mt(kt(et,zc),ft("cpf","==",t)),n=await qr(r);return e?n.docs.some(a=>a.id!==e):!n.empty}catch(r){return console.error("Erro ao verificar CPF:",r),!1}},async generateOwnerCode(){try{const e=(await this.getAll()).sort((a,o)=>o.createdAt.getTime()-a.createdAt.getTime())[0];return!e||!e.code?"PRO001":`PRO${(parseInt(e.code.replace("PRO",""))+1).toString().padStart(3,"0")}`}catch(t){return console.error("Erro ao gerar cdigo:",t),"PRO001"}},async getStats(){try{const t=await this.getAll();return{total:t.length,active:t.filter(e=>e.status==="active").length,inactive:t.filter(e=>e.status==="inactive").length,suspended:t.filter(e=>e.status==="suspended").length}}catch(t){throw console.error("Erro ao obter estatsticas:",t),new Error("Falha ao carregar estatsticas")}}},wP=({owners:t,loading:e,onEdit:r,onView:n,onDelete:a})=>{const[o,c]=B.useState("name"),[d,m]=B.useState("asc"),h=O=>{o===O?m(d==="asc"?"desc":"asc"):(c(O),m("asc"))},p=[...t].sort((O,P)=>{let z=O[o],Q=P[o];return o==="address"&&(z=O.address.city,Q=P.address.city),o==="bankData"&&(z=O.bankData.bank,Q=P.bankData.bank),z instanceof Date&&Q instanceof Date?d==="asc"?z.getTime()-Q.getTime():Q.getTime()-z.getTime():typeof z=="number"&&typeof Q=="number"?d==="asc"?z-Q:Q-z:typeof z=="string"&&typeof Q=="string"?d==="asc"?z.localeCompare(Q):Q.localeCompare(z):0}),v=O=>new Intl.DateTimeFormat("pt-BR").format(O),y=O=>{const P=O.replace(/\D/g,"");return P.length===11?`(${P.slice(0,2)}) ${P.slice(2,7)}-${P.slice(7)}`:P.length===10?`(${P.slice(0,2)}) ${P.slice(2,6)}-${P.slice(6)}`:O},w=O=>{const P=O.replace(/\D/g,"");return P.length===11?`${P.slice(0,3)}.${P.slice(3,6)}.${P.slice(6,9)}-${P.slice(9)}`:O},N=O=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(O),E=O=>{const z={active:{label:"Ativo",class:"status-active"},inactive:{label:"Inativo",class:"status-inactive"},suspended:{label:"Suspenso",class:"status-suspended"}}[O]||{label:O,class:"status-default"};return s.jsx("span",{className:`status-badge ${z.class}`,children:z.label})},T=O=>({checking:"Conta Corrente",savings:"Poupana",business:"Empresarial"})[O]||O,j=({field:O,children:P})=>s.jsxs("button",{className:`sort-button ${o===O?"active":""}`,onClick:()=>h(O),children:[P,o===O&&s.jsx("span",{className:"sort-indicator",children:d==="asc"?"":""})]});return e?s.jsx("div",{className:"owner-list-loading",children:s.jsx(yr,{text:"Carregando proprietrios..."})}):t.length===0?s.jsx("div",{className:"owner-list-empty",children:s.jsxs("div",{className:"empty-state",children:[s.jsx("div",{className:"empty-icon",children:s.jsx(ps,{size:48})}),s.jsx("h3",{children:"Nenhum proprietrio encontrado"}),s.jsx("p",{children:"No h proprietrios cadastrados ou que correspondam aos filtros aplicados."})]})}):s.jsxs("div",{className:"owner-list",children:[s.jsx("div",{className:"owner-list-header",children:s.jsxs("h3",{children:["Lista de Proprietrios (",t.length,")"]})}),s.jsx("div",{className:"owner-table-container",children:s.jsxs("table",{className:"owner-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:s.jsx(j,{field:"name",children:"Nome"})}),s.jsx("th",{children:s.jsx(j,{field:"phone",children:"Contato"})}),s.jsx("th",{children:s.jsx(j,{field:"profession",children:"Profisso"})}),s.jsx("th",{children:s.jsx(j,{field:"status",children:"Status"})}),s.jsx("th",{children:s.jsx(j,{field:"address",children:"Cidade"})}),s.jsx("th",{children:s.jsx(j,{field:"commission",children:"Comisso"})}),s.jsx("th",{children:s.jsx(j,{field:"bankData",children:"Banco"})}),s.jsx("th",{children:s.jsx(j,{field:"createdAt",children:"Data Cadastro"})}),s.jsx("th",{className:"actions-column",children:"Aes"})]})}),s.jsx("tbody",{children:p.map(O=>s.jsxs("tr",{className:"owner-row",children:[s.jsx("td",{className:"owner-name",children:s.jsxs("div",{className:"name-info",children:[s.jsx("span",{className:"name",children:O.name}),s.jsxs("span",{className:"code",children:["Cdigo: ",O.code]})]})}),s.jsx("td",{className:"owner-contact",children:s.jsxs("div",{className:"contact-info",children:[s.jsx("span",{className:"phone",children:y(O.phone)}),s.jsxs("span",{className:"cpf",children:["CPF: ",w(O.cpf)]})]})}),s.jsx("td",{className:"owner-profession",children:s.jsx("span",{className:"profession",children:O.profession})}),s.jsx("td",{className:"owner-status",children:E(O.status)}),s.jsx("td",{className:"owner-location",children:s.jsxs("div",{className:"location-info",children:[s.jsx("span",{className:"city",children:O.address.city}),s.jsx("span",{className:"state",children:O.address.state})]})}),s.jsx("td",{className:"owner-commission",children:s.jsxs("div",{className:"commission-info",children:[s.jsx("span",{className:"commission-value",children:N(O.commission)}),s.jsx("span",{className:"commission-label",children:"por venda"})]})}),s.jsx("td",{className:"owner-bank",children:s.jsxs("div",{className:"bank-info",children:[s.jsx("span",{className:"bank-name",children:O.bankData.bank}),s.jsx("span",{className:"account-type",children:T(O.bankData.accountType)})]})}),s.jsx("td",{className:"owner-date",children:v(O.createdAt)}),s.jsx("td",{className:"owner-actions",children:s.jsxs("div",{className:"action-buttons",children:[s.jsx(Ye,{onClick:()=>n(O),variant:"secondary",size:"small",className:"action-btn view-btn",children:s.jsx(ms,{size:16})}),s.jsx(Ye,{onClick:()=>r(O),variant:"secondary",size:"small",className:"action-btn edit-btn",children:s.jsx(Ai,{size:16})}),s.jsx(Ye,{onClick:()=>a(O.id),variant:"secondary",size:"small",className:"action-btn delete-btn",children:s.jsx(Jl,{size:16})})]})})]},O.id))})]})})]})},oN={name:"",cpf:"",address:{street:"",number:"",complement:"",neighborhood:"",city:"",state:"",zipCode:""},profession:"",maritalStatus:"single",phone:"",bankData:{bank:"",agency:"",account:"",accountType:"checking"},pix:"",commission:0,status:"active"},NP=({isOpen:t,onClose:e,onSave:r,owner:n,mode:a})=>{const[o,c]=B.useState(oN),[d,m]=B.useState(!1),[h,p]=B.useState({}),{showError:v}=$r(),y=a==="view",w=a==="edit",N=a==="create";B.useEffect(()=>{t&&(c(n&&(w||a==="view")?{name:n.name,cpf:n.cpf,address:{street:n.address.street,number:n.address.number,complement:n.address.complement||"",neighborhood:n.address.neighborhood,city:n.address.city,state:n.address.state,zipCode:n.address.zipCode},profession:n.profession,maritalStatus:n.maritalStatus,phone:n.phone,bankData:{bank:n.bankData.bank,agency:n.bankData.agency,account:n.bankData.account,accountType:n.bankData.accountType},pix:n.pix,commission:n.commission,status:n.status}:oN),p({}))},[t,n,w,a]);const E=()=>{const U={};return o.name.trim()||(U.name="Nome  obrigatrio"),o.cpf.trim()||(U.cpf="CPF  obrigatrio"),o.profession.trim()||(U.profession="Profisso  obrigatria"),o.phone.trim()||(U.phone="Telefone  obrigatrio"),o.pix.trim()||(U.pix="PIX  obrigatrio"),o.commission<=0&&(U.commission="Comisso deve ser maior que zero"),o.address.street.trim()||(U["address.street"]="Rua  obrigatria"),o.address.number.trim()||(U["address.number"]="Nmero  obrigatrio"),o.address.neighborhood.trim()||(U["address.neighborhood"]="Bairro  obrigatrio"),o.address.city.trim()||(U["address.city"]="Cidade  obrigatria"),o.address.state.trim()||(U["address.state"]="Estado  obrigatrio"),o.address.zipCode.trim()||(U["address.zipCode"]="CEP  obrigatrio"),o.bankData.bank.trim()||(U["bankData.bank"]="Banco  obrigatrio"),o.bankData.agency.trim()||(U["bankData.agency"]="Agncia  obrigatria"),o.bankData.account.trim()||(U["bankData.account"]="Conta  obrigatria"),p(U),Object.keys(U).length===0},T=async U=>{if(U.preventDefault(),!y&&E())try{m(!0);let C="create";N?(await Il.create(o),C="create"):w&&n&&(await Il.update({id:n.id,...o}),C="edit"),r(C)}catch(C){const k=C instanceof Error?C.message:"Erro ao salvar proprietrio";p({submit:k}),v("Erro ao salvar proprietrio",k)}finally{m(!1)}},j=(U,C)=>{y||(c(k=>{if(U.includes(".")){const[S,F]=U.split(".");return S==="address"?{...k,address:{...k.address,[F]:C}}:S==="bankData"?{...k,bankData:{...k.bankData,[F]:C}}:k}return{...k,[U]:C}}),h[U]&&p(k=>{const S={...k};return delete S[U],S}))},O=[{value:"active",label:"Ativo"},{value:"inactive",label:"Inativo"},{value:"suspended",label:"Suspenso"}],P=[{value:"single",label:"Solteiro(a)"},{value:"married",label:"Casado(a)"},{value:"divorced",label:"Divorciado(a)"},{value:"widowed",label:"Vivo(a)"},{value:"separated",label:"Separado(a)"}],z=[{value:"checking",label:"Conta Corrente"},{value:"savings",label:"Poupana"},{value:"business",label:"Conta Empresarial"}],Q=()=>{switch(a){case"create":return"Novo Proprietrio";case"edit":return"Editar Proprietrio";case"view":return"Visualizar Proprietrio";default:return"Proprietrio"}};return s.jsx(Iu,{isOpen:t,onClose:e,title:Q(),size:"large",className:"owner-modal",children:s.jsxs("form",{onSubmit:T,className:"owner-form",children:[d&&s.jsx(yr,{text:"Salvando proprietrio..."}),h.submit&&s.jsx("div",{className:"error-message",children:h.submit}),s.jsxs("div",{className:"form-sections",children:[s.jsxs("div",{className:"form-section",children:[s.jsx("h3",{children:"Informaes Bsicas"}),s.jsxs("div",{className:"form-row",children:[s.jsx("div",{className:"form-group",children:s.jsx(Jt,{label:"Status",value:o.status,onChange:U=>j("status",U),options:O,disabled:y,error:h.status})}),s.jsx("div",{className:"form-group",children:s.jsx(Ae,{label:"Cdigo",value:n?.code||"Gerado automaticamente",placeholder:"Cdigo ser gerado automaticamente",onChange:()=>{}})})]}),s.jsx("div",{className:"form-row",children:s.jsx("div",{className:"form-group full-width",children:s.jsx(Ae,{label:"Nome Completo",value:o.name,onChange:U=>j("name",U),placeholder:"Digite o nome completo",error:h.name,required:!0})})}),s.jsxs("div",{className:"form-row",children:[s.jsx("div",{className:"form-group",children:s.jsx(Ae,{label:"CPF",value:o.cpf,onChange:U=>j("cpf",U),placeholder:"000.000.000-00",error:h.cpf,required:!0,mask:"cpf"})}),s.jsx("div",{className:"form-group",children:s.jsx(Ae,{label:"Profisso",value:o.profession,onChange:U=>j("profession",U),placeholder:"Digite a profisso",error:h.profession,required:!0})}),s.jsx("div",{className:"form-group",children:s.jsx(Jt,{label:"Estado Civil",value:o.maritalStatus,onChange:U=>j("maritalStatus",U),options:P,disabled:y,error:h.maritalStatus})})]}),s.jsxs("div",{className:"form-row",children:[s.jsx("div",{className:"form-group",children:s.jsx(Ae,{label:"Telefone",value:o.phone,onChange:U=>j("phone",U),placeholder:"(00) 00000-0000",error:h.phone,required:!0,mask:"phone"})}),s.jsx("div",{className:"form-group",children:s.jsx(Ae,{label:"PIX",value:o.pix,onChange:U=>j("pix",U),placeholder:"Digite a chave PIX",error:h.pix,required:!0})}),s.jsx("div",{className:"form-group",children:s.jsx(Ae,{label:"Comisso (R$)",value:String(Math.round(o.commission*100)),onChange:U=>{const C=Ur(U,"currency");j("commission",C)},placeholder:"R$ 0,00",error:h.commission,required:!0,mask:"currency",returnUnmasked:!0})})]})]}),s.jsxs("div",{className:"form-section",children:[s.jsx("h3",{children:"Endereo"}),s.jsxs("div",{className:"form-row",children:[s.jsx("div",{className:"form-group",children:s.jsx(Ae,{label:"CEP",value:o.address.zipCode,onChange:U=>j("address.zipCode",U),placeholder:"00000-000",error:h["address.zipCode"],required:!0,mask:"cep"})}),s.jsx("div",{className:"form-group flex-2",children:s.jsx(Ae,{label:"Rua",value:o.address.street,onChange:U=>j("address.street",U),placeholder:"Digite o nome da rua",error:h["address.street"],required:!0})}),s.jsx("div",{className:"form-group",children:s.jsx(Ae,{label:"Nmero",value:o.address.number,onChange:U=>j("address.number",U),placeholder:"123",error:h["address.number"],required:!0})})]}),s.jsxs("div",{className:"form-row",children:[s.jsx("div",{className:"form-group",children:s.jsx(Ae,{label:"Complemento",value:o.address.complement||"",onChange:U=>j("address.complement",U),placeholder:"Apto, sala, etc. (opcional)",error:h["address.complement"]})}),s.jsx("div",{className:"form-group",children:s.jsx(Ae,{label:"Bairro",value:o.address.neighborhood,onChange:U=>j("address.neighborhood",U),placeholder:"Digite o bairro",error:h["address.neighborhood"],required:!0})})]}),s.jsxs("div",{className:"form-row",children:[s.jsx("div",{className:"form-group flex-2",children:s.jsx(Ae,{label:"Cidade",value:o.address.city,onChange:U=>j("address.city",U),placeholder:"Digite a cidade",error:h["address.city"],required:!0})}),s.jsx("div",{className:"form-group",children:s.jsx(Ae,{label:"Estado",value:o.address.state,onChange:U=>j("address.state",U),placeholder:"SP",error:h["address.state"],required:!0})})]})]}),s.jsxs("div",{className:"form-section",children:[s.jsx("h3",{children:"Dados Bancrios"}),s.jsxs("div",{className:"form-row",children:[s.jsx("div",{className:"form-group",children:s.jsx(Ae,{label:"Banco",value:o.bankData.bank,onChange:U=>j("bankData.bank",U),placeholder:"Nome do banco",error:h["bankData.bank"],required:!0})}),s.jsx("div",{className:"form-group",children:s.jsx(Ae,{label:"Agncia",value:o.bankData.agency,onChange:U=>j("bankData.agency",U),placeholder:"0000",error:h["bankData.agency"],required:!0,mask:"bankAgency"})}),s.jsx("div",{className:"form-group",children:s.jsx(Ae,{label:"Conta",value:o.bankData.account,onChange:U=>j("bankData.account",U),placeholder:"00000-0",error:h["bankData.account"],required:!0,mask:"bankAccount"})}),s.jsx("div",{className:"form-group",children:s.jsx(Jt,{label:"Tipo de Conta",value:o.bankData.accountType,onChange:U=>j("bankData.accountType",U),options:z,disabled:y,error:h["bankData.accountType"]})})]})]})]}),!y&&s.jsxs("div",{className:"form-actions",children:[s.jsx(Ye,{type:"button",variant:"secondary",onClick:e,disabled:d,children:"Cancelar"}),s.jsx(Ye,{type:"submit",disabled:d,children:d?"Salvando...":N?"Criar Proprietrio":"Salvar Alteraes"})]}),y&&s.jsx("div",{className:"form-actions",children:s.jsx(Ye,{type:"button",onClick:e,children:"Fechar"})})]})})},TP=({filters:t,onFiltersChange:e,onClearFilters:r,ownerCount:n,totalCount:a})=>{const[o,c]=B.useState(!1),d=(v,y)=>{const w={...t,[v]:y||void 0};Object.keys(w).forEach(N=>{w[N]||delete w[N]}),e(w)},m=Object.keys(t).length>0,h=[{value:"",label:"Todos os status"},{value:"active",label:"Ativo"},{value:"inactive",label:"Inativo"},{value:"suspended",label:"Suspenso"}],p=[{value:"",label:"Todos os estados civis"},{value:"single",label:"Solteiro(a)"},{value:"married",label:"Casado(a)"},{value:"divorced",label:"Divorciado(a)"},{value:"widowed",label:"Vivo(a)"}];return s.jsxs("div",{className:"owner-filters",children:[s.jsxs("div",{className:"filters-header",children:[s.jsxs("div",{className:"filters-info",children:[s.jsx("h3",{children:"Filtros"}),s.jsx("span",{className:"results-count",children:n===a?`${a} proprietrios`:`${n} de ${a} proprietrios`})]}),s.jsxs("div",{className:"filters-actions",children:[m&&s.jsx(Ye,{onClick:r,variant:"secondary",size:"small",children:"Limpar filtros"}),s.jsx(Ye,{onClick:()=>c(!o),variant:"secondary",size:"small",children:o?" Ocultar":" Expandir"})]})]}),s.jsxs("div",{className:`filters-content ${o?"expanded":""}`,children:[s.jsxs("div",{className:"filters-row",children:[s.jsx("div",{className:"filter-group",children:s.jsx(Ae,{label:"Buscar",placeholder:"Nome, CPF, telefone, banco...",value:t.search||"",onChange:v=>d("search",v)})}),s.jsx("div",{className:"filter-group",children:s.jsx(Jt,{label:"Status",value:t.status||"",onChange:v=>d("status",v),options:h})}),s.jsx("div",{className:"filter-group",children:s.jsx(Ae,{label:"Profisso",placeholder:"Digite a profisso",value:t.profession||"",onChange:v=>d("profession",v)})})]}),o&&s.jsxs("div",{className:"filters-row",children:[s.jsx("div",{className:"filter-group",children:s.jsx(Ae,{label:"Cidade",placeholder:"Digite a cidade",value:t.city||"",onChange:v=>d("city",v)})}),s.jsx("div",{className:"filter-group",children:s.jsx(Ae,{label:"Estado",placeholder:"Digite o estado",value:t.state||"",onChange:v=>d("state",v)})}),s.jsx("div",{className:"filter-group",children:s.jsx(Jt,{label:"Estado Civil",value:t.maritalStatus||"",onChange:v=>d("maritalStatus",v),options:p})})]}),o&&s.jsx("div",{className:"filters-row",children:s.jsx("div",{className:"filter-group",children:s.jsx(Ae,{label:"Banco",placeholder:"Digite o banco",value:t.bank||"",onChange:v=>d("bank",v)})})})]}),m&&s.jsxs("div",{className:"active-filters",children:[s.jsx("span",{className:"active-filters-label",children:"Filtros ativos:"}),s.jsxs("div",{className:"filter-tags",children:[t.search&&s.jsxs("span",{className:"filter-tag",children:['Busca: "',t.search,'"',s.jsx("button",{onClick:()=>d("search",""),children:""})]}),t.status&&s.jsxs("span",{className:"filter-tag",children:["Status:"," ",h.find(v=>v.value===t.status)?.label,s.jsx("button",{onClick:()=>d("status",""),children:""})]}),t.profession&&s.jsxs("span",{className:"filter-tag",children:["Profisso: ",t.profession,s.jsx("button",{onClick:()=>d("profession",""),children:""})]}),t.city&&s.jsxs("span",{className:"filter-tag",children:["Cidade: ",t.city,s.jsx("button",{onClick:()=>d("city",""),children:""})]}),t.state&&s.jsxs("span",{className:"filter-tag",children:["Estado: ",t.state,s.jsx("button",{onClick:()=>d("state",""),children:""})]}),t.maritalStatus&&s.jsxs("span",{className:"filter-tag",children:["Estado Civil:"," ",p.find(v=>v.value===t.maritalStatus)?.label,s.jsx("button",{onClick:()=>d("maritalStatus",""),children:""})]}),t.bank&&s.jsxs("span",{className:"filter-tag",children:["Banco: ",t.bank,s.jsx("button",{onClick:()=>d("bank",""),children:""})]})]})]})]})},bP=({stats:t})=>{const e=[{title:"Total de Proprietrios",value:t.total,icon:Hr,color:"blue",description:"Total de proprietrios cadastrados"},{title:"Proprietrios Ativos",value:t.active,icon:Dn,color:"green",description:"Total de proprietrios ativos"},{title:"Suspensos",value:t.suspended,icon:gn,color:"yellow",description:"Total de proprietrios suspensos"},{title:"Inativos",value:t.inactive,icon:Yh,color:"red",description:"Total de proprietrios inativos"}];return s.jsx("div",{className:"owner-stats",children:s.jsx("div",{className:"stats-grid",children:e.map(r=>{const n=r.icon;return s.jsxs("div",{className:`stat-card stat-card-${r.color}`,children:[s.jsx("div",{className:"stat-icon",children:s.jsx(n,{size:24})}),s.jsxs("div",{className:"stat-content",children:[s.jsx("div",{className:"stat-value",children:r.value}),s.jsx("div",{className:"stat-title",children:r.title}),s.jsx("div",{className:"stat-description",children:r.description})]})]},r.title)})})})},SP=()=>{const[t,e]=B.useState([]),[r,n]=B.useState(!0),[a,o]=B.useState(!1),[c,d]=B.useState(null),[m,h]=B.useState("create"),[p,v]=B.useState({}),[y,w]=B.useState({total:0,active:0,inactive:0,suspended:0}),{showError:N,showSuccess:E,showWarning:T}=$r(),j=async()=>{try{n(!0);const A=await Il.getAll(p);e(A)}catch(A){const D=A instanceof Error?A.message:"Erro ao carregar proprietrios";N("Erro ao carregar proprietrios",D)}finally{n(!1)}},O=async()=>{try{const A=await Il.getStats();w(A)}catch(A){const D=A instanceof Error?A.message:"Erro ao carregar estatsticas";T("Estatsticas indisponveis",D)}},P=B.useMemo(()=>{let A=[...t];if(p.search){const D=p.search.toLowerCase();A=A.filter(we=>we.name.toLowerCase().includes(D)||we.cpf.includes(D)||we.phone.includes(D)||we.bankData.bank.toLowerCase().includes(D)||we.profession.toLowerCase().includes(D))}return p.status&&(A=A.filter(D=>D.status===p.status)),p.profession&&(A=A.filter(D=>D.profession.toLowerCase().includes(p.profession.toLowerCase()))),p.maritalStatus&&(A=A.filter(D=>D.maritalStatus===p.maritalStatus)),p.city&&(A=A.filter(D=>D.address.city.toLowerCase().includes(p.city.toLowerCase()))),p.state&&(A=A.filter(D=>D.address.state.toLowerCase().includes(p.state.toLowerCase()))),p.bank&&(A=A.filter(D=>D.bankData.bank.toLowerCase().includes(p.bank.toLowerCase()))),A},[t,p]);B.useEffect(()=>{j(),O()},[]),B.useEffect(()=>{Object.keys(p).length>0&&j()},[p]);const z=()=>{d(null),h("create"),o(!0)},Q=A=>{d(A),h("edit"),o(!0)},U=A=>{d(A),h("view"),o(!0)},C=async A=>{if(confirm("Tem certeza que deseja excluir este proprietrio?"))try{await Il.delete(A),e(t.filter(D=>D.id!==A)),O(),E("Proprietrio excludo","O proprietrio foi excludo com sucesso.")}catch(D){const we=D instanceof Error?D.message:"Erro ao excluir proprietrio";N("Erro ao excluir proprietrio",we)}},k=()=>{o(!1),d(null)},S=A=>{j(),O(),k(),E(A==="create"?"Proprietrio criado":"Proprietrio atualizado",A==="create"?"O proprietrio foi cadastrado com sucesso.":"As informaes do proprietrio foram atualizadas.")},F=A=>{v(A)},M=()=>{v({})};return r&&t.length===0?s.jsx(yr,{text:"Carregando proprietrios...",fullScreen:!0}):s.jsxs("div",{className:"owner-management",children:[s.jsx("div",{className:"owner-management-header",children:s.jsxs("div",{className:"header-content",children:[s.jsx("h1",{children:"Gesto de Proprietrios"}),s.jsx(Ye,{onClick:z,className:"create-owner-btn",children:"+ Novo Proprietrio"})]})}),s.jsx(bP,{stats:y}),s.jsxs("div",{className:"owner-management-content",children:[s.jsx(TP,{filters:p,onFiltersChange:F,onClearFilters:M,ownerCount:P.length,totalCount:t.length}),s.jsx(wP,{owners:P,loading:r,onEdit:Q,onView:U,onDelete:C})]}),s.jsx(NP,{isOpen:a,onClose:k,onSave:S,onDelete:()=>C(c?.id||""),owner:c||void 0,mode:m})]})},Hc="suppliers",lN=t=>{const e=t.data();if(!e)throw new Error("Document data is undefined");return{id:t.id,code:e.code||"",establishmentName:e.establishmentName||"",serviceType:e.serviceType||"",bankData:e.bankData||{bank:"",agency:"",account:"",accountType:"checking"},pix:e.pix||"",commissionPercentage:e.commissionPercentage||0,status:e.status||"active",createdAt:e.createdAt?.toDate()||new Date,updatedAt:e.updatedAt?.toDate()||new Date}},cN=t=>({...t}),ih={async getAll(t){try{let e=mt(kt(et,Hc),hs("establishmentName"));t?.status&&(e=mt(e,ft("status","==",t.status))),t?.serviceType&&(e=mt(e,ft("serviceType","==",t.serviceType))),t?.bank&&(e=mt(e,ft("bankData.bank","==",t.bank)));let n=(await qr(e)).docs.map(lN);if(t?.search){const a=t.search.toLowerCase();n=n.filter(o=>o.establishmentName.toLowerCase().includes(a)||o.serviceType.toLowerCase().includes(a)||o.bankData.bank.toLowerCase().includes(a))}return n}catch(e){throw console.error("Erro ao buscar fornecedores:",e),new Error("Falha ao carregar lista de fornecedores")}},async getById(t){try{const e=Zt(et,Hc,t),r=await ji(e);return r.exists()?lN(r):null}catch(e){throw console.error("Erro ao buscar fornecedor:",e),new Error("Falha ao carregar dados do fornecedor")}},async create(t){try{const e=await this.generateSupplierCode(),r={...cN(t),code:e,createdAt:Ke.now(),updatedAt:Ke.now()};return(await Bs(kt(et,Hc),r)).id}catch(e){throw console.error("Erro ao criar fornecedor:",e),new Error("Falha ao criar fornecedor")}},async update(t){try{const{id:e,...r}=t,n=Zt(et,Hc,e),a={...cN(r),updatedAt:Ke.now()};await Vs(n,a)}catch(e){throw console.error("Erro ao atualizar fornecedor:",e),new Error("Falha ao atualizar fornecedor")}},async delete(t){try{const e=Zt(et,Hc,t);await Xl(e)}catch(e){throw console.error("Erro ao deletar fornecedor:",e),new Error("Falha ao deletar fornecedor")}},async searchByName(t,e=10){try{return(await this.getAll()).filter(a=>a.establishmentName.toLowerCase().includes(t.toLowerCase())).slice(0,e)}catch(r){throw console.error("Erro ao buscar fornecedores por nome:",r),new Error("Falha na busca de fornecedores")}},async pixExists(t,e){try{const r=mt(kt(et,Hc),ft("pix","==",t)),n=await qr(r);return e?n.docs.some(a=>a.id!==e):!n.empty}catch(r){return console.error("Erro ao verificar PIX:",r),!1}},async generateSupplierCode(){try{const e=(await this.getAll()).sort((a,o)=>o.createdAt.getTime()-a.createdAt.getTime())[0];return!e||!e.code?"FOR001":`FOR${(parseInt(e.code.replace("FOR",""))+1).toString().padStart(3,"0")}`}catch(t){return console.error("Erro ao gerar cdigo:",t),"FOR001"}},async getStats(){try{const t=await this.getAll();return{total:t.length,active:t.filter(e=>e.status==="active").length,inactive:t.filter(e=>e.status==="inactive").length,suspended:t.filter(e=>e.status==="suspended").length}}catch(t){throw console.error("Erro ao obter estatsticas:",t),new Error("Falha ao carregar estatsticas")}}},jP=({suppliers:t,loading:e,onEdit:r,onView:n,onDelete:a})=>{const[o,c]=B.useState("establishmentName"),[d,m]=B.useState("asc"),h=j=>{o===j?m(d==="asc"?"desc":"asc"):(c(j),m("asc"))},p=[...t].sort((j,O)=>{let P=j[o],z=O[o];return o==="bankData"&&(P=j.bankData.bank,z=O.bankData.bank),P instanceof Date&&z instanceof Date?d==="asc"?P.getTime()-z.getTime():z.getTime()-P.getTime():typeof P=="number"&&typeof z=="number"?d==="asc"?P-z:z-P:typeof P=="string"&&typeof z=="string"?d==="asc"?P.localeCompare(z):z.localeCompare(P):0}),v=j=>new Intl.DateTimeFormat("pt-BR").format(j),y=j=>`${j}%`,w=j=>{const P={active:{label:"Ativo",class:"status-active"},inactive:{label:"Inativo",class:"status-inactive"},suspended:{label:"Suspenso",class:"status-suspended"}}[j]||{label:j,class:"status-default"};return s.jsx("span",{className:`status-badge ${P.class}`,children:P.label})},N=j=>({catering:"Buffet/Catering",decoration:"Decorao",photography:"Fotografia",music:"Msica/Som",transport:"Transporte",cleaning:"Limpeza",security:"Segurana",flowers:"Flores",other:"Outros"})[j]||j,E=j=>({checking:"Conta Corrente",savings:"Poupana",business:"Empresarial"})[j]||j,T=({field:j,children:O})=>s.jsxs("button",{className:`sort-button ${o===j?"active":""}`,onClick:()=>h(j),children:[O,o===j&&s.jsx("span",{className:"sort-indicator",children:d==="asc"?"":""})]});return e?s.jsx("div",{className:"supplier-list-loading",children:s.jsx(yr,{text:"Carregando fornecedores..."})}):t.length===0?s.jsx("div",{className:"supplier-list-empty",children:s.jsxs("div",{className:"empty-state",children:[s.jsx("div",{className:"empty-icon",children:s.jsx(ps,{size:48})}),s.jsx("h3",{children:"Nenhum fornecedor encontrado"}),s.jsx("p",{children:"No h fornecedores cadastrados ou que correspondam aos filtros aplicados."})]})}):s.jsxs("div",{className:"supplier-list",children:[s.jsx("div",{className:"supplier-list-header",children:s.jsxs("h3",{children:["Lista de Fornecedores (",t.length,")"]})}),s.jsx("div",{className:"supplier-table-container",children:s.jsxs("table",{className:"supplier-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:s.jsx(T,{field:"establishmentName",children:"Nome do Estabelecimento"})}),s.jsx("th",{children:s.jsx(T,{field:"serviceType",children:"Tipo de Servio"})}),s.jsx("th",{children:s.jsx(T,{field:"status",children:"Status"})}),s.jsx("th",{children:s.jsx(T,{field:"commissionPercentage",children:"Comisso"})}),s.jsx("th",{children:s.jsx(T,{field:"bankData",children:"Banco"})}),s.jsx("th",{children:s.jsx(T,{field:"createdAt",children:"Data Cadastro"})}),s.jsx("th",{className:"actions-column",children:"Aes"})]})}),s.jsx("tbody",{children:p.map(j=>s.jsxs("tr",{className:"supplier-row",children:[s.jsx("td",{className:"supplier-name",children:s.jsxs("div",{className:"name-info",children:[s.jsx("span",{className:"name",children:j.establishmentName}),s.jsxs("span",{className:"code",children:["Cdigo: ",j.code]})]})}),s.jsx("td",{className:"supplier-service",children:s.jsx("span",{className:"service-type",children:N(j.serviceType)})}),s.jsx("td",{className:"supplier-status",children:w(j.status)}),s.jsx("td",{className:"supplier-commission",children:s.jsxs("div",{className:"commission-info",children:[s.jsx("span",{className:"commission-value",children:y(j.commissionPercentage)}),s.jsx("span",{className:"commission-label",children:"comisso"})]})}),s.jsx("td",{className:"supplier-bank",children:s.jsxs("div",{className:"bank-info",children:[s.jsx("span",{className:"bank-name",children:j.bankData.bank}),s.jsx("span",{className:"account-type",children:E(j.bankData.accountType)})]})}),s.jsx("td",{className:"supplier-date",children:v(j.createdAt)}),s.jsx("td",{className:"supplier-actions",children:s.jsxs("div",{className:"action-buttons",children:[s.jsx(Ye,{onClick:()=>n(j),variant:"secondary",size:"small",className:"action-btn view-btn",children:s.jsx(ms,{size:16})}),s.jsx(Ye,{onClick:()=>r(j),variant:"secondary",size:"small",className:"action-btn edit-btn",children:s.jsx(Ai,{size:16})}),s.jsx(Ye,{onClick:()=>a(j.id),variant:"secondary",size:"small",className:"action-btn delete-btn",children:s.jsx(Jl,{size:16})})]})})]},j.id))})]})})]})},uN={establishmentName:"",serviceType:"",bankData:{bank:"",agency:"",account:"",accountType:"checking"},pix:"",commissionPercentage:0,status:"active"},CP=({isOpen:t,onClose:e,onSave:r,supplier:n,mode:a})=>{const[o,c]=B.useState(uN),[d,m]=B.useState(!1),[h,p]=B.useState({}),{showError:v}=$r(),y=a==="view",w=a==="edit",N=a==="create";B.useEffect(()=>{t&&(c(n&&(w||a==="view")?{establishmentName:n.establishmentName,serviceType:n.serviceType,bankData:{bank:n.bankData.bank,agency:n.bankData.agency,account:n.bankData.account,accountType:n.bankData.accountType},pix:n.pix,commissionPercentage:n.commissionPercentage,status:n.status}:uN),p({}))},[t,n,w,a]);const E=()=>{const U={};return o.establishmentName.trim()||(U.establishmentName="Nome do estabelecimento  obrigatrio"),o.serviceType.trim()||(U.serviceType="Tipo de servio  obrigatrio"),o.pix.trim()||(U.pix="PIX  obrigatrio"),o.commissionPercentage<=0&&(U.commissionPercentage="Percentual de comisso deve ser maior que zero"),o.commissionPercentage>100&&(U.commissionPercentage="Percentual de comisso no pode ser maior que 100%"),o.bankData.bank.trim()||(U["bankData.bank"]="Banco  obrigatrio"),o.bankData.agency.trim()||(U["bankData.agency"]="Agncia  obrigatria"),o.bankData.account.trim()||(U["bankData.account"]="Conta  obrigatria"),p(U),Object.keys(U).length===0},T=async U=>{if(U.preventDefault(),!y&&E())try{m(!0);let C="create";N?(await ih.create(o),C="create"):w&&n&&(await ih.update({id:n.id,...o}),C="edit"),r(C)}catch(C){const k=C instanceof Error?C.message:"Erro ao salvar fornecedor";p({submit:k}),v("Erro ao salvar fornecedor",k)}finally{m(!1)}},j=(U,C)=>{y||(c(k=>{if(U.includes(".")){const[S,F]=U.split(".");return S==="bankData"?{...k,bankData:{...k.bankData,[F]:C}}:k}return{...k,[U]:C}}),h[U]&&p(k=>{const S={...k};return delete S[U],S}))},O=[{value:"active",label:"Ativo"},{value:"inactive",label:"Inativo"},{value:"suspended",label:"Suspenso"}],P=[{value:"catering",label:"Buffet/Catering"},{value:"decoration",label:"Decorao"},{value:"photography",label:"Fotografia"},{value:"music",label:"Msica/Som"},{value:"transport",label:"Transporte"},{value:"cleaning",label:"Limpeza"},{value:"security",label:"Segurana"},{value:"flowers",label:"Flores"},{value:"other",label:"Outros"}],z=[{value:"checking",label:"Conta Corrente"},{value:"savings",label:"Poupana"},{value:"business",label:"Conta Empresarial"}],Q=()=>{switch(a){case"create":return"Novo Fornecedor";case"edit":return"Editar Fornecedor";case"view":return"Visualizar Fornecedor";default:return"Fornecedor"}};return s.jsx(Iu,{isOpen:t,onClose:e,title:Q(),size:"large",className:"supplier-modal",children:s.jsxs("form",{onSubmit:T,className:"supplier-form",children:[d&&s.jsx(yr,{text:"Salvando fornecedor..."}),h.submit&&s.jsx("div",{className:"error-message",children:h.submit}),s.jsxs("div",{className:"form-sections",children:[s.jsxs("div",{className:"form-section",children:[s.jsx("h3",{children:"Informaes Bsicas"}),s.jsxs("div",{className:"form-row",children:[s.jsx("div",{className:"form-group",children:s.jsx(Jt,{label:"Status",value:o.status,onChange:U=>j("status",U),options:O,disabled:y,error:h.status})}),s.jsx("div",{className:"form-group",children:s.jsx(Ae,{label:"Cdigo",value:n?.code||"Gerado automaticamente",placeholder:"Cdigo ser gerado automaticamente",onChange:()=>{}})})]}),s.jsx("div",{className:"form-row",children:s.jsx("div",{className:"form-group full-width",children:s.jsx(Ae,{label:"Nome do Estabelecimento",value:o.establishmentName,onChange:U=>j("establishmentName",U),placeholder:"Digite o nome do estabelecimento",error:h.establishmentName,required:!0})})}),s.jsxs("div",{className:"form-row",children:[s.jsx("div",{className:"form-group",children:s.jsx(Jt,{label:"Tipo de Servio",value:o.serviceType,onChange:U=>j("serviceType",U),options:P,disabled:y,error:h.serviceType,required:!0})}),s.jsx("div",{className:"form-group",children:s.jsx(Ae,{label:"PIX",value:o.pix,onChange:U=>j("pix",U),placeholder:"Digite a chave PIX",error:h.pix,required:!0})}),s.jsx("div",{className:"form-group",children:s.jsx(Ae,{label:"Percentual de Comisso (%)",value:String(Math.round(o.commissionPercentage*100)),onChange:U=>{const C=Ur(U,"percentage");j("commissionPercentage",C)},placeholder:"0,00%",error:h.commissionPercentage,required:!0,mask:"percentage",returnUnmasked:!0})})]})]}),s.jsxs("div",{className:"form-section",children:[s.jsx("h3",{children:"Dados Bancrios"}),s.jsxs("div",{className:"form-row",children:[s.jsx("div",{className:"form-group",children:s.jsx(Ae,{label:"Banco",value:o.bankData.bank,onChange:U=>j("bankData.bank",U),placeholder:"Nome do banco",error:h["bankData.bank"],required:!0})}),s.jsx("div",{className:"form-group",children:s.jsx(Ae,{label:"Agncia",value:o.bankData.agency,onChange:U=>j("bankData.agency",U),placeholder:"0000",error:h["bankData.agency"],required:!0,mask:"bankAgency"})}),s.jsx("div",{className:"form-group",children:s.jsx(Ae,{label:"Conta",value:o.bankData.account,onChange:U=>j("bankData.account",U),placeholder:"00000-0",error:h["bankData.account"],required:!0,mask:"bankAccount"})}),s.jsx("div",{className:"form-group",children:s.jsx(Jt,{label:"Tipo de Conta",value:o.bankData.accountType,onChange:U=>j("bankData.accountType",U),options:z,disabled:y,error:h["bankData.accountType"]})})]})]})]}),!y&&s.jsxs("div",{className:"form-actions",children:[s.jsx(Ye,{type:"button",variant:"secondary",onClick:e,disabled:d,children:"Cancelar"}),s.jsx(Ye,{type:"submit",disabled:d,children:d?"Salvando...":N?"Criar Fornecedor":"Salvar Alteraes"})]}),y&&s.jsx("div",{className:"form-actions",children:s.jsx(Ye,{type:"button",onClick:e,children:"Fechar"})})]})})},AP=({filters:t,onFiltersChange:e,onClearFilters:r,supplierCount:n,totalCount:a})=>{const[o,c]=B.useState(!1),d=(v,y)=>{const w={...t,[v]:y||void 0};Object.keys(w).forEach(N=>{w[N]||delete w[N]}),e(w)},m=Object.keys(t).length>0,h=[{value:"",label:"Todos os status"},{value:"active",label:"Ativo"},{value:"inactive",label:"Inativo"},{value:"suspended",label:"Suspenso"}],p=[{value:"",label:"Todos os tipos de servio"},{value:"catering",label:"Buffet/Catering"},{value:"decoration",label:"Decorao"},{value:"photography",label:"Fotografia"},{value:"music",label:"Msica/Som"},{value:"transport",label:"Transporte"},{value:"cleaning",label:"Limpeza"},{value:"security",label:"Segurana"},{value:"flowers",label:"Flores"},{value:"other",label:"Outros"}];return s.jsxs("div",{className:"supplier-filters",children:[s.jsxs("div",{className:"filters-header",children:[s.jsxs("div",{className:"filters-info",children:[s.jsx("h3",{children:"Filtros"}),s.jsx("span",{className:"results-count",children:n===a?`${a} fornecedores`:`${n} de ${a} fornecedores`})]}),s.jsxs("div",{className:"filters-actions",children:[m&&s.jsx(Ye,{onClick:r,variant:"secondary",size:"small",children:"Limpar Filtros"}),s.jsx(Ye,{onClick:()=>c(!o),variant:"secondary",size:"small",className:"toggle-filters-btn",children:o?" Ocultar":" Expandir"})]})]}),s.jsxs("div",{className:`filters-content ${o?"expanded":""}`,children:[s.jsxs("div",{className:"filters-row",children:[s.jsx("div",{className:"filter-group",children:s.jsx(Ae,{label:"Buscar",placeholder:"Nome, tipo de servio, banco...",value:t.search||"",onChange:v=>d("search",v)})}),s.jsx("div",{className:"filter-group",children:s.jsx(Jt,{label:"Status",value:t.status||"",onChange:v=>d("status",v),options:h})}),s.jsx("div",{className:"filter-group",children:s.jsx(Jt,{label:"Tipo de Servio",value:t.serviceType||"",onChange:v=>d("serviceType",v),options:p})})]}),o&&s.jsx("div",{className:"filters-row",children:s.jsx("div",{className:"filter-group",children:s.jsx(Ae,{label:"Banco",placeholder:"Digite o banco",value:t.bank||"",onChange:v=>d("bank",v)})})})]}),m&&s.jsxs("div",{className:"active-filters",children:[s.jsx("span",{className:"active-filters-label",children:"Filtros ativos:"}),s.jsxs("div",{className:"filter-tags",children:[t.search&&s.jsxs("span",{className:"filter-tag",children:['Busca: "',t.search,'"',s.jsx("button",{onClick:()=>d("search",""),children:""})]}),t.status&&s.jsxs("span",{className:"filter-tag",children:["Status:"," ",h.find(v=>v.value===t.status)?.label,s.jsx("button",{onClick:()=>d("status",""),children:""})]}),t.serviceType&&s.jsxs("span",{className:"filter-tag",children:["Tipo:"," ",p.find(v=>v.value===t.serviceType)?.label,s.jsx("button",{onClick:()=>d("serviceType",""),children:""})]}),t.bank&&s.jsxs("span",{className:"filter-tag",children:["Banco: ",t.bank,s.jsx("button",{onClick:()=>d("bank",""),children:""})]})]})]})]})},RP=({stats:t})=>{const e=[{title:"Total de Fornecedores",value:t.total,icon:cP,color:"blue",description:"Total de fornecedores cadastrados"},{title:"Fornecedores Ativos",value:t.active,icon:Dn,color:"green",description:"Fornecedores com status ativo"},{title:"Suspensos",value:t.suspended,icon:Ul,color:"yellow",description:"Fornecedores suspensos"},{title:"Inativos",value:t.inactive,icon:Yh,color:"gray",description:"Fornecedores inativos"}];return s.jsx("div",{className:"supplier-stats",children:s.jsx("div",{className:"stats-grid",children:e.map(r=>{const n=r.icon;return s.jsxs("div",{className:`stat-card stat-card-${r.color}`,children:[s.jsx("div",{className:"stat-icon",children:s.jsx(n,{size:24})}),s.jsxs("div",{className:"stat-content",children:[s.jsx("div",{className:"stat-value",children:r.value}),s.jsx("div",{className:"stat-title",children:r.title}),s.jsx("div",{className:"stat-description",children:r.description})]})]},r.title)})})})},DP=()=>{const[t,e]=B.useState([]),[r,n]=B.useState(!0),[a,o]=B.useState(!1),[c,d]=B.useState(null),[m,h]=B.useState("create"),[p,v]=B.useState({}),[y,w]=B.useState({total:0,active:0,inactive:0,suspended:0}),{showError:N,showSuccess:E,showWarning:T}=$r(),j=async()=>{try{n(!0);const A=await ih.getAll(p);e(A)}catch(A){const D=A instanceof Error?A.message:"Erro ao carregar fornecedores";N("Erro ao carregar fornecedores",D)}finally{n(!1)}},O=async()=>{try{const A=await ih.getStats();w(A)}catch(A){const D=A instanceof Error?A.message:"Erro ao carregar estatsticas";T("Estatsticas indisponveis",D)}},P=B.useMemo(()=>{let A=[...t];if(p.search){const D=p.search.toLowerCase();A=A.filter(we=>we.establishmentName.toLowerCase().includes(D)||we.serviceType.toLowerCase().includes(D)||we.bankData.bank.toLowerCase().includes(D))}return p.status&&(A=A.filter(D=>D.status===p.status)),p.serviceType&&(A=A.filter(D=>D.serviceType===p.serviceType)),p.bank&&(A=A.filter(D=>D.bankData.bank.toLowerCase().includes(p.bank.toLowerCase()))),A},[t,p]);B.useEffect(()=>{j(),O()},[]),B.useEffect(()=>{Object.keys(p).length>0&&j()},[p]);const z=()=>{d(null),h("create"),o(!0)},Q=A=>{d(A),h("edit"),o(!0)},U=A=>{d(A),h("view"),o(!0)},C=async A=>{if(confirm("Tem certeza que deseja excluir este fornecedor?"))try{await ih.delete(A),e(t.filter(D=>D.id!==A)),O(),E("Fornecedor excludo","O fornecedor foi excludo com sucesso.")}catch(D){const we=D instanceof Error?D.message:"Erro ao excluir fornecedor";N("Erro ao excluir fornecedor",we)}},k=()=>{o(!1),d(null)},S=A=>{j(),O(),k(),E(A==="create"?"Fornecedor criado":"Fornecedor atualizado",A==="create"?"O fornecedor foi cadastrado com sucesso.":"As informaes do fornecedor foram atualizadas.")},F=A=>{v(A)},M=()=>{v({})};return r&&t.length===0?s.jsx(yr,{text:"Carregando fornecedores...",fullScreen:!0}):s.jsxs("div",{className:"supplier-management",children:[s.jsx("div",{className:"supplier-management-header",children:s.jsxs("div",{className:"header-content",children:[s.jsx("h1",{children:"Gesto de Fornecedores"}),s.jsx(Ye,{onClick:z,className:"create-supplier-btn",children:"+ Novo Fornecedor"})]})}),s.jsx(RP,{stats:y}),s.jsxs("div",{className:"supplier-management-content",children:[s.jsx(AP,{filters:p,onFiltersChange:F,onClearFilters:M,supplierCount:P.length,totalCount:t.length}),s.jsx(jP,{suppliers:P,loading:r,onEdit:Q,onView:U,onDelete:C})]}),s.jsx(CP,{isOpen:a,onClose:k,onSave:S,supplier:c,mode:m})]})},Ud="employees",dN=t=>{const e=t.data();if(!e)throw new Error("Document data is undefined");return{id:t.id,name:e.name||"",rentalCommissionPercentage:e.rentalCommissionPercentage||0,supplierCommissionPercentage:e.supplierCommissionPercentage||0,status:e.status||"active",createdAt:e.createdAt?.toDate()||new Date,updatedAt:e.updatedAt?.toDate()||new Date}},hN=t=>({...t}),kl={async getAll(t){try{let e=mt(kt(et,Ud),hs("name"));t?.status&&(e=mt(e,ft("status","==",t.status)));let n=(await qr(e)).docs.map(dN);if(t?.search){const a=t.search.toLowerCase();n=n.filter(o=>o.name.toLowerCase().includes(a))}return n}catch(e){throw console.error("Erro ao buscar colaboradores:",e),new Error("Falha ao carregar lista de colaboradores")}},async getById(t){try{const e=Zt(et,Ud,t),r=await ji(e);return r.exists()?dN(r):null}catch(e){throw console.error("Erro ao buscar colaborador:",e),new Error("Falha ao carregar dados do colaborador")}},async create(t){try{const e={...hN(t),createdAt:Ke.now(),updatedAt:Ke.now()};return(await Bs(kt(et,Ud),e)).id}catch(e){throw console.error("Erro ao criar colaborador:",e),new Error("Falha ao criar colaborador")}},async update(t){try{const{id:e,...r}=t,n=Zt(et,Ud,e),a={...hN(r),updatedAt:Ke.now()};await Vs(n,a)}catch(e){throw console.error("Erro ao atualizar colaborador:",e),new Error("Falha ao atualizar colaborador")}},async delete(t){try{const e=Zt(et,Ud,t);await Xl(e)}catch(e){throw console.error("Erro ao deletar colaborador:",e),new Error("Falha ao deletar colaborador")}},async searchByName(t,e=10){try{return(await this.getAll()).filter(a=>a.name.toLowerCase().includes(t.toLowerCase())).slice(0,e)}catch(r){throw console.error("Erro ao buscar colaboradores por nome:",r),new Error("Falha na busca de colaboradores")}},async getStats(){try{const t=await this.getAll();return{total:t.length,active:t.filter(e=>e.status==="active").length,inactive:t.filter(e=>e.status==="inactive").length,suspended:t.filter(e=>e.status==="suspended").length}}catch(t){throw console.error("Erro ao obter estatsticas:",t),new Error("Falha ao carregar estatsticas")}}},IP=({employees:t,loading:e,onEdit:r,onView:n,onDelete:a})=>{const[o,c]=B.useState("name"),[d,m]=B.useState("asc"),h=E=>{o===E?m(d==="asc"?"desc":"asc"):(c(E),m("asc"))},p=[...t].sort((E,T)=>{const j=E[o],O=T[o];return j instanceof Date&&O instanceof Date?d==="asc"?j.getTime()-O.getTime():O.getTime()-j.getTime():typeof j=="number"&&typeof O=="number"?d==="asc"?j-O:O-j:typeof j=="string"&&typeof O=="string"?d==="asc"?j.localeCompare(O):O.localeCompare(j):0}),v=E=>new Intl.DateTimeFormat("pt-BR").format(E),y=E=>`${E}%`,w=E=>{const j={active:{label:"Ativo",class:"status-active"},inactive:{label:"Inativo",class:"status-inactive"},suspended:{label:"Suspenso",class:"status-suspended"}}[E]||{label:E,class:"status-default"};return s.jsx("span",{className:`status-badge ${j.class}`,children:j.label})},N=({field:E,children:T})=>s.jsxs("button",{className:`sort-button ${o===E?"active":""}`,onClick:()=>h(E),children:[T,o===E&&s.jsx("span",{className:"sort-indicator",children:d==="asc"?"":""})]});return e?s.jsx("div",{className:"employee-list-loading",children:s.jsx(yr,{text:"Carregando colaboradores..."})}):t.length===0?s.jsx("div",{className:"employee-list-empty",children:s.jsxs("div",{className:"empty-state",children:[s.jsx("div",{className:"empty-icon",children:s.jsx(ps,{size:48})}),s.jsx("h3",{children:"Nenhum colaborador encontrado"}),s.jsx("p",{children:"No h colaboradores cadastrados ou que correspondam aos filtros aplicados."})]})}):s.jsxs("div",{className:"employee-list",children:[s.jsx("div",{className:"employee-list-header",children:s.jsxs("h3",{children:["Lista de Colaboradores (",t.length,")"]})}),s.jsx("div",{className:"employee-table-container",children:s.jsxs("table",{className:"employee-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:s.jsx(N,{field:"name",children:"Nome"})}),s.jsx("th",{children:s.jsx(N,{field:"rentalCommissionPercentage",children:"Comisso Locaes"})}),s.jsx("th",{children:s.jsx(N,{field:"supplierCommissionPercentage",children:"Comisso Fornecedores"})}),s.jsx("th",{children:s.jsx(N,{field:"status",children:"Status"})}),s.jsx("th",{children:s.jsx(N,{field:"createdAt",children:"Data Cadastro"})}),s.jsx("th",{className:"actions-column",children:"Aes"})]})}),s.jsx("tbody",{children:p.map(E=>s.jsxs("tr",{className:"employee-row",children:[s.jsx("td",{className:"employee-name",children:s.jsx("span",{className:"name",children:E.name})}),s.jsx("td",{className:"employee-commission",children:s.jsxs("div",{className:"commission-info",children:[s.jsx("span",{className:"commission-value",children:y(E.rentalCommissionPercentage)}),s.jsx("span",{className:"commission-label",children:"do lquido"}),s.jsx("span",{className:"commission-description",children:"(Faturamento - Despesas)"})]})}),s.jsx("td",{className:"employee-commission",children:s.jsxs("div",{className:"commission-info",children:[s.jsx("span",{className:"commission-value",children:y(E.supplierCommissionPercentage)}),s.jsx("span",{className:"commission-label",children:"do lquido"}),s.jsx("span",{className:"commission-description",children:"(Faturamento - Impostos)"})]})}),s.jsx("td",{className:"employee-status",children:w(E.status)}),s.jsx("td",{className:"employee-date",children:v(E.createdAt)}),s.jsx("td",{className:"employee-actions",children:s.jsxs("div",{className:"action-buttons",children:[s.jsx(Ye,{onClick:()=>n(E),variant:"secondary",size:"small",className:"action-btn view-btn",children:s.jsx(ms,{size:16})}),s.jsx(Ye,{onClick:()=>r(E),variant:"secondary",size:"small",className:"action-btn edit-btn",children:s.jsx(Ai,{size:16})}),s.jsx(Ye,{onClick:()=>a(E.id),variant:"secondary",size:"small",className:"action-btn delete-btn",children:s.jsx(Jl,{size:16})})]})})]},E.id))})]})})]})},fN={name:"",rentalCommissionPercentage:10,supplierCommissionPercentage:10,status:"active"},kP=({isOpen:t,onClose:e,onSave:r,employee:n,mode:a})=>{const[o,c]=B.useState(fN),[d,m]=B.useState(!1),[h,p]=B.useState({}),{showError:v}=$r(),y=a==="view",w=a==="edit",N=a==="create";B.useEffect(()=>{t&&(c(n&&(w||a==="view")?{name:n.name,rentalCommissionPercentage:n.rentalCommissionPercentage,supplierCommissionPercentage:n.supplierCommissionPercentage,status:n.status}:fN),p({}))},[t,n,w,a]);const E=()=>{const z={};return o.name.trim()||(z.name="Nome  obrigatrio"),o.rentalCommissionPercentage<=0&&(z.rentalCommissionPercentage="Percentual de comisso de locaes deve ser maior que zero"),o.rentalCommissionPercentage>100&&(z.rentalCommissionPercentage="Percentual de comisso de locaes no pode ser maior que 100%"),o.supplierCommissionPercentage<=0&&(z.supplierCommissionPercentage="Percentual de comisso de fornecedores deve ser maior que zero"),o.supplierCommissionPercentage>100&&(z.supplierCommissionPercentage="Percentual de comisso de fornecedores no pode ser maior que 100%"),p(z),Object.keys(z).length===0},T=async z=>{if(z.preventDefault(),!y&&E())try{m(!0);let Q="create";N?(await kl.create(o),Q="create"):w&&n&&(await kl.update({id:n.id,...o}),Q="edit"),r(Q)}catch(Q){const U=Q instanceof Error?Q.message:"Erro ao salvar colaborador";p({submit:U}),v("Erro ao salvar colaborador",U)}finally{m(!1)}},j=(z,Q)=>{y||(c(U=>({...U,[z]:Q})),h[z]&&p(U=>{const C={...U};return delete C[z],C}))},O=[{value:"active",label:"Ativo"},{value:"inactive",label:"Inativo"},{value:"suspended",label:"Suspenso"}],P=()=>{switch(a){case"create":return"Novo Colaborador";case"edit":return"Editar Colaborador";case"view":return"Visualizar Colaborador";default:return"Colaborador"}};return s.jsx(Iu,{isOpen:t,onClose:e,title:P(),size:"medium",className:"employee-modal",children:s.jsxs("form",{onSubmit:T,className:"employee-form",children:[d&&s.jsx(yr,{text:"Salvando colaborador..."}),h.submit&&s.jsx("div",{className:"error-message",children:h.submit}),s.jsxs("div",{className:"form-sections",children:[s.jsxs("div",{className:"form-section",children:[s.jsx("h3",{children:"Informaes Bsicas"}),s.jsx("div",{className:"form-row",children:s.jsx("div",{className:"form-group",children:s.jsx(Jt,{label:"Status",value:o.status,onChange:z=>j("status",z),options:O,disabled:y,error:h.status})})}),s.jsx("div",{className:"form-row",children:s.jsx("div",{className:"form-group full-width",children:s.jsx(Ae,{label:"Nome do Colaborador",value:o.name,onChange:z=>j("name",z),placeholder:"Digite o nome completo",error:h.name,required:!0})})})]}),s.jsxs("div",{className:"form-section",children:[s.jsx("h3",{children:"Percentuais de Comisso"}),s.jsx("div",{className:"commission-info",children:s.jsx("p",{className:"info-text",children:"Os percentuais so aplicados sobre o valor lquido (faturamento - despesas/impostos)"})}),s.jsxs("div",{className:"form-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsx(Ae,{label:"Comisso Locaes (%)",value:String(Math.round(o.rentalCommissionPercentage*100)),onChange:z=>{const Q=Ur(z,"percentage");j("rentalCommissionPercentage",Q)},placeholder:"10,00%",error:h.rentalCommissionPercentage,required:!0,mask:"percentage",returnUnmasked:!0}),s.jsx("div",{className:"field-description",children:s.jsx("small",{children:"10% do lquido (Faturamento - Despesas)"})})]}),s.jsxs("div",{className:"form-group",children:[s.jsx(Ae,{label:"Comisso Fornecedores (%)",value:String(Math.round(o.supplierCommissionPercentage*100)),onChange:z=>{const Q=Ur(z,"percentage");j("supplierCommissionPercentage",Q)},placeholder:"10,00%",error:h.supplierCommissionPercentage,required:!0,mask:"percentage",returnUnmasked:!0}),s.jsx("div",{className:"field-description",children:s.jsx("small",{children:"10% do lquido (Faturamento - Impostos)"})})]})]})]})]}),!y&&s.jsxs("div",{className:"form-actions",children:[s.jsx(Ye,{type:"button",variant:"secondary",onClick:e,disabled:d,children:"Cancelar"}),s.jsx(Ye,{type:"submit",disabled:d,children:d?"Salvando...":N?"Criar Colaborador":"Salvar Alteraes"})]}),y&&s.jsx("div",{className:"form-actions",children:s.jsx(Ye,{type:"button",onClick:e,children:"Fechar"})})]})})},OP=({filters:t,onFiltersChange:e,onClearFilters:r,employeeCount:n,totalCount:a})=>{const[o,c]=B.useState(!1),d=(p,v)=>{const y={...t,[p]:v||void 0};Object.keys(y).forEach(w=>{y[w]||delete y[w]}),e(y)},m=Object.keys(t).length>0,h=[{value:"",label:"Todos os status"},{value:"active",label:"Ativo"},{value:"inactive",label:"Inativo"},{value:"suspended",label:"Suspenso"}];return s.jsxs("div",{className:"employee-filters",children:[s.jsxs("div",{className:"filters-header",children:[s.jsxs("div",{className:"filters-info",children:[s.jsx("h3",{children:"Filtros"}),s.jsx("span",{className:"results-count",children:n===a?`${a} colaboradores`:`${n} de ${a} colaboradores`})]}),s.jsxs("div",{className:"filters-actions",children:[m&&s.jsx(Ye,{onClick:r,variant:"secondary",size:"small",children:"Limpar Filtros"}),s.jsx(Ye,{onClick:()=>c(!o),variant:"secondary",size:"small",className:"toggle-filters-btn",children:o?" Ocultar":" Expandir"})]})]}),s.jsx("div",{className:`filters-content ${o?"expanded":""}`,children:s.jsxs("div",{className:"filters-row",children:[s.jsx("div",{className:"filter-group",children:s.jsx(Ae,{label:"Buscar",placeholder:"Nome do colaborador...",value:t.search||"",onChange:p=>d("search",p)})}),s.jsx("div",{className:"filter-group",children:s.jsx(Jt,{label:"Status",value:t.status||"",onChange:p=>d("status",p),options:h})})]})}),m&&s.jsxs("div",{className:"active-filters",children:[s.jsx("span",{className:"active-filters-label",children:"Filtros ativos:"}),s.jsxs("div",{className:"filter-tags",children:[t.search&&s.jsxs("span",{className:"filter-tag",children:['Busca: "',t.search,'"',s.jsx("button",{onClick:()=>d("search",""),children:""})]}),t.status&&s.jsxs("span",{className:"filter-tag",children:["Status:"," ",h.find(p=>p.value===t.status)?.label,s.jsx("button",{onClick:()=>d("status",""),children:""})]})]})]})]})},MP=({stats:t})=>{const e=[{title:"Total de Colaboradores",value:t.total,icon:Hr,color:"blue",description:"Total de colaboradores cadastrados"},{title:"Colaboradores Ativos",value:t.active,icon:Dn,color:"green",description:"Colaboradores com status ativo"},{title:"Suspensos",value:t.suspended,icon:Ul,color:"yellow",description:"Colaboradores suspensos"},{title:"Inativos",value:t.inactive,icon:Yh,color:"gray",description:"Colaboradores inativos"}];return s.jsx("div",{className:"employee-stats",children:s.jsx("div",{className:"stats-grid",children:e.map(r=>{const n=r.icon;return s.jsxs("div",{className:`stat-card stat-card-${r.color}`,children:[s.jsx("div",{className:"stat-icon",children:s.jsx(n,{size:24})}),s.jsxs("div",{className:"stat-content",children:[s.jsx("div",{className:"stat-value",children:r.value}),s.jsx("div",{className:"stat-title",children:r.title}),s.jsx("div",{className:"stat-description",children:r.description})]})]},r.title)})})})},FP=()=>{const[t,e]=B.useState([]),[r,n]=B.useState(!0),[a,o]=B.useState(!1),[c,d]=B.useState(null),[m,h]=B.useState("create"),[p,v]=B.useState({}),[y,w]=B.useState({total:0,active:0,inactive:0,suspended:0}),{showError:N,showSuccess:E,showWarning:T}=$r(),j=async()=>{try{n(!0);const A=await kl.getAll(p);e(A)}catch(A){const D=A instanceof Error?A.message:"Erro ao carregar colaboradores";N("Erro ao carregar colaboradores",D)}finally{n(!1)}},O=async()=>{try{const A=await kl.getStats();w(A)}catch(A){const D=A instanceof Error?A.message:"Erro ao carregar estatsticas";T("Estatsticas indisponveis",D)}},P=B.useMemo(()=>{let A=[...t];if(p.search){const D=p.search.toLowerCase();A=A.filter(we=>we.name.toLowerCase().includes(D))}return p.status&&(A=A.filter(D=>D.status===p.status)),A},[t,p]);B.useEffect(()=>{j(),O()},[]),B.useEffect(()=>{Object.keys(p).length>0&&j()},[p]);const z=()=>{d(null),h("create"),o(!0)},Q=A=>{d(A),h("edit"),o(!0)},U=A=>{d(A),h("view"),o(!0)},C=async A=>{if(confirm("Tem certeza que deseja excluir este colaborador?"))try{await kl.delete(A),e(t.filter(D=>D.id!==A)),O(),E("Colaborador excludo","O colaborador foi excludo com sucesso.")}catch(D){const we=D instanceof Error?D.message:"Erro ao excluir colaborador";N("Erro ao excluir colaborador",we)}},k=()=>{o(!1),d(null)},S=A=>{j(),O(),k(),E(A==="create"?"Colaborador criado":"Colaborador atualizado",A==="create"?"O colaborador foi cadastrado com sucesso.":"As informaes do colaborador foram atualizadas.")},F=A=>{v(A)},M=()=>{v({})};return r&&t.length===0?s.jsx(yr,{text:"Carregando colaboradores...",fullScreen:!0}):s.jsxs("div",{className:"employee-management",children:[s.jsx("div",{className:"employee-management-header",children:s.jsxs("div",{className:"header-content",children:[s.jsx("h1",{children:"Gesto de Colaboradores"}),s.jsx(Ye,{onClick:z,className:"create-employee-btn",children:"+ Novo Colaborador"})]})}),s.jsx(MP,{stats:y}),s.jsxs("div",{className:"employee-management-content",children:[s.jsx(OP,{filters:p,onFiltersChange:F,onClearFilters:M,employeeCount:P.length,totalCount:t.length}),s.jsx(IP,{employees:P,loading:r,onEdit:Q,onView:U,onDelete:C})]}),s.jsx(kP,{isOpen:a,onClose:k,onSave:S,employee:c,mode:m})]})},zd="houses",mN=t=>{const e=t.data();if(!e)throw new Error("Data not found");return{id:t.id,code:e.code||"",houseName:e.houseName||"",address:e.address||{street:"",number:"",complement:"",neighborhood:"",city:"",state:""},internetPassword:e.internetPassword||"",photos:e.photos||[],description:e.description||"",observations:e.observations||"",pricing:e.pricing||{lowSeason:0,midSeason:0,highSeason:0,carnivalPackage:0,newYearPackage:0},status:e.status||"available",occupiedDates:Array.isArray(e.occupiedDates)?e.occupiedDates.map(r=>r.toDate()):[],createdAt:e.createdAt?.toDate()||new Date,updatedAt:e.updatedAt?.toDate()||new Date}},pN=t=>{const e={...t};return"occupiedDates"in e&&e.occupiedDates&&(Array.isArray(e.occupiedDates)&&e.occupiedDates.length>0?e.occupiedDates=e.occupiedDates.map(r=>Ke.fromDate(r)):e.occupiedDates=[]),e},os={async getAll(t){try{let e=mt(kt(et,zd),hs("houseName"));t?.status&&(e=mt(e,ft("status","==",t.status))),t?.city&&(e=mt(e,ft("address.city","==",t.city))),t?.state&&(e=mt(e,ft("address.state","==",t.state)));let n=(await qr(e)).docs.map(mN);if(t?.search){const a=t.search.toLowerCase();n=n.filter(o=>o.houseName.toLowerCase().includes(a)||o.address.city.toLowerCase().includes(a)||o.address.neighborhood.toLowerCase().includes(a)||o.description.toLowerCase().includes(a))}return t?.priceRange&&(n=n.filter(a=>{const o=t.priceRange.min,c=t.priceRange.max;return a.pricing.lowSeason>=o&&a.pricing.lowSeason<=c})),n}catch(e){throw console.error("Erro ao buscar casas:",e),new Error("Falha ao carregar lista de casas")}},async getById(t){try{const e=Zt(et,zd,t),r=await ji(e);return r.exists()?mN(r):null}catch(e){throw console.error("Erro ao buscar casa:",e),new Error("Falha ao carregar dados da casa")}},async create(t){try{const e=await this.generateHouseCode(),r={...pN(t),code:e,createdAt:Ke.now(),updatedAt:Ke.now()};return(await Bs(kt(et,zd),r)).id}catch(e){throw console.error("Erro ao criar casa:",e),new Error("Falha ao criar casa")}},async update(t){try{const{id:e,...r}=t,n=Zt(et,zd,e),a={...pN(r),updatedAt:Ke.now()};await Vs(n,a)}catch(e){throw console.error("Erro ao atualizar casa:",e),new Error("Falha ao atualizar casa")}},async delete(t){try{const e=Zt(et,zd,t);await Xl(e)}catch(e){throw console.error("Erro ao deletar casa:",e),new Error("Falha ao deletar casa")}},async generateHouseCode(){try{const e=(await this.getAll()).sort((a,o)=>o.createdAt.getTime()-a.createdAt.getTime())[0];return!e||!e.code?"CASA001":`CASA${(parseInt(e.code.replace("CASA",""))+1).toString().padStart(3,"0")}`}catch(t){return console.error("Erro ao gerar cdigo:",t),"CASA001"}},async getStats(){try{const t=await this.getAll();return{total:t.length,available:t.filter(e=>e.status==="available").length,occupied:t.filter(e=>e.status==="occupied").length,maintenance:t.filter(e=>e.status==="maintenance").length,inactive:t.filter(e=>e.status==="inactive").length}}catch(t){throw console.error("Erro ao obter estatsticas:",t),new Error("Falha ao carregar estatsticas")}}},PP=({houses:t,loading:e,onEdit:r,onDelete:n,onView:a})=>{const[o,c]=B.useState(""),[d,m]=B.useState("asc"),h=E=>{o===E?m(d==="asc"?"desc":"asc"):(c(E),m("asc"))},p=[...t].sort((E,T)=>{let j=E[o],O=T[o];return o==="address"&&(j=E.address.city,O=T.address.city),o==="pricing"&&(j=E.pricing.lowSeason,O=T.pricing.lowSeason),j instanceof Date&&O instanceof Date?d==="asc"?j.getTime()-O.getTime():O.getTime()-j.getTime():typeof j=="number"&&typeof O=="number"?d==="asc"?j-O:O-j:typeof j=="string"&&typeof O=="string"?d==="asc"?j.localeCompare(O):O.localeCompare(j):0}),v=E=>new Intl.DateTimeFormat("pt-BR").format(E),y=E=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(E),w=E=>{const j={available:{label:"Disponvel",class:"status-available"},occupied:{label:"Ocupada",class:"status-occupied"},maintenance:{label:"Manuteno",class:"status-maintenance"},inactive:{label:"Inativa",class:"status-inactive"}}[E]||{label:E,class:"status-default"};return s.jsx("span",{className:`status-badge ${j.class}`,children:j.label})},N=({field:E,children:T})=>s.jsxs("button",{className:`sort-button ${o===E?"active":""}`,onClick:()=>h(E),children:[T,o===E&&s.jsx("span",{className:"sort-indicator",children:d==="asc"?"":""})]});return e?s.jsx("div",{className:"house-list-loading",children:s.jsx(yr,{text:"Carregando casas..."})}):t.length===0?s.jsx("div",{className:"house-list-empty",children:s.jsxs("div",{className:"empty-state",children:[s.jsx("div",{className:"empty-icon",children:s.jsx(jn,{size:48})}),s.jsx("h3",{children:"Nenhuma casa encontrada"}),s.jsx("p",{children:"No h casas cadastradas ou que correspondam aos filtros aplicados."})]})}):s.jsxs("div",{className:"house-list",children:[s.jsx("div",{className:"house-list-header",children:s.jsxs("h3",{children:["Lista de Casas (",t.length,")"]})}),s.jsx("div",{className:"house-table-container",children:s.jsxs("table",{className:"house-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:s.jsx(N,{field:"houseName",children:"Nome da Casa"})}),s.jsx("th",{children:s.jsx(N,{field:"address",children:"Localizao"})}),s.jsx("th",{children:s.jsx(N,{field:"status",children:"Status"})}),s.jsx("th",{children:s.jsx(N,{field:"pricing",children:"Preo (Baixa temporada)"})}),s.jsx("th",{children:s.jsx(N,{field:"createdAt",children:"Data Cadastro"})}),s.jsx("th",{className:"actions-column",children:"Aes"})]})}),s.jsx("tbody",{children:p.map(E=>s.jsxs("tr",{className:"house-row",children:[s.jsx("td",{className:"house-name",children:s.jsxs("div",{className:"name-info",children:[s.jsx("span",{className:"name",children:E.houseName}),s.jsxs("span",{className:"code",children:["Cdigo: ",E.code]})]})}),s.jsx("td",{className:"house-location",children:s.jsxs("div",{className:"location-info",children:[s.jsx("span",{className:"neighborhood",children:E.address.neighborhood}),s.jsxs("span",{className:"city-state",children:[E.address.city," - ",E.address.state]})]})}),s.jsx("td",{className:"house-status",children:w(E.status)}),s.jsx("td",{className:"house-pricing",children:s.jsxs("div",{className:"pricing-info",children:[s.jsx("span",{className:"main-price",children:y(E.pricing.lowSeason)}),s.jsx("span",{className:"price-label",children:"baixa temporada"})]})}),s.jsx("td",{className:"house-date",children:v(E.createdAt)}),s.jsx("td",{className:"house-actions",children:s.jsxs("div",{className:"action-buttons",children:[s.jsx(Ye,{onClick:()=>a(E),variant:"secondary",size:"small",className:"action-btn view-btn",children:s.jsx(ms,{size:16})}),s.jsx(Ye,{onClick:()=>r(E),variant:"secondary",size:"small",className:"action-btn edit-btn",children:s.jsx(Ai,{size:16})}),s.jsx(Ye,{onClick:()=>n(E.id),variant:"secondary",size:"small",className:"action-btn delete-btn",children:s.jsx(Jl,{size:16})})]})})]},E.id))})]})})]})},gN={houseName:"",ownerId:"",address:{street:"",number:"",complement:"",neighborhood:"",city:"",state:"",zipCode:""},internetPassword:"",photos:[],description:"",observations:"",pricing:{lowSeason:0,midSeason:0,highSeason:0,carnivalPackage:0,newYearPackage:0},status:"available"},LP=({isOpen:t,onClose:e,onSave:r,house:n,mode:a})=>{const[o,c]=B.useState(gN),[d,m]=B.useState(!1),[h,p]=B.useState({}),[v,y]=B.useState([]),{showError:w}=$r(),N=a==="view",E=a==="edit",T=a==="create";B.useEffect(()=>{t&&(n&&(E||a==="view")?(c({houseName:n.houseName,ownerId:n.ownerId||"",address:{street:n.address.street,number:n.address.number,complement:n.address.complement||"",neighborhood:n.address.neighborhood,city:n.address.city,state:n.address.state,zipCode:n.address.zipCode||""},internetPassword:n.internetPassword,photos:n.photos,description:n.description,observations:n.observations,pricing:{lowSeason:n.pricing.lowSeason,midSeason:n.pricing.midSeason,highSeason:n.pricing.highSeason,carnivalPackage:n.pricing.carnivalPackage,newYearPackage:n.pricing.newYearPackage},status:n.status}),y(n.photos)):(c(gN),y([])),p({}))},[t,n,E,a]);const j=()=>{const S={};return o.houseName.trim()||(S.houseName="Nome da casa  obrigatrio"),o.internetPassword.trim()||(S.internetPassword="Senha da internet  obrigatria"),o.description.trim()||(S.description="Descrio  obrigatria"),o.address.street.trim()||(S["address.street"]="Rua  obrigatria"),o.address.number.trim()||(S["address.number"]="Nmero  obrigatrio"),o.address.neighborhood.trim()||(S["address.neighborhood"]="Bairro  obrigatrio"),o.address.city.trim()||(S["address.city"]="Cidade  obrigatria"),o.address.state.trim()||(S["address.state"]="Estado  obrigatrio"),o.address.zipCode.trim()||(S["address.zipCode"]="CEP  obrigatrio"),o.pricing.lowSeason<=0&&(S["pricing.lowSeason"]="Preo da baixa temporada deve ser maior que zero"),o.pricing.midSeason<=0&&(S["pricing.midSeason"]="Preo da mdia temporada deve ser maior que zero"),o.pricing.highSeason<=0&&(S["pricing.highSeason"]="Preo da alta temporada deve ser maior que zero"),o.pricing.carnivalPackage<=0&&(S["pricing.carnivalPackage"]="Preo do pacote de carnaval deve ser maior que zero"),o.pricing.newYearPackage<=0&&(S["pricing.newYearPackage"]="Preo do pacote de rveillon deve ser maior que zero"),p(S),Object.keys(S).length===0},O=async S=>{if(S.preventDefault(),!N&&j())try{m(!0);const F={...o,photos:v};let M="create";T?(await os.create(F),M="create"):E&&n&&(await os.update({id:n.id,...F}),M="edit"),r(M)}catch(F){const M=F instanceof Error?F.message:"Erro ao salvar casa";p({submit:M}),w("Erro ao salvar casa",M)}finally{m(!1)}},P=(S,F)=>{N||(c(M=>{if(S.includes(".")){const[A,D]=S.split(".");return A==="address"?{...M,address:{...M.address,[D]:F}}:A==="pricing"?{...M,pricing:{...M.pricing,[D]:F}}:M}return{...M,[S]:F}}),h[S]&&p(M=>{const A={...M};return delete A[S],A}))},z=(S,F)=>{const M=[...v];M[S]=F,y(M)},Q=()=>{y([...v,""])},U=S=>{const F=v.filter((M,A)=>A!==S);y(F)},C=[{value:"available",label:"Disponvel"},{value:"occupied",label:"Ocupada"},{value:"maintenance",label:"Em Manuteno"},{value:"inactive",label:"Inativa"}],k=()=>{switch(a){case"create":return"Nova Casa";case"edit":return"Editar Casa";case"view":return"Visualizar Casa";default:return"Casa"}};return s.jsx(Iu,{isOpen:t,onClose:e,title:k(),size:"large",className:"house-modal",children:s.jsxs("form",{onSubmit:O,className:"house-form",children:[d&&s.jsx(yr,{text:"Salvando casa..."}),h.submit&&s.jsx("div",{className:"error-message",children:h.submit}),s.jsxs("div",{className:"form-sections",children:[s.jsxs("div",{className:"form-section",children:[s.jsx("h3",{children:"Informaes Bsicas"}),s.jsxs("div",{className:"form-row",children:[s.jsx("div",{className:"form-group",children:s.jsx(Jt,{label:"Status",value:o.status,onChange:S=>P("status",S),options:C,disabled:N,error:h.status})}),s.jsx("div",{className:"form-group",children:s.jsx(Ae,{label:"Cdigo",value:n?.code||"Gerado automaticamente",placeholder:"Cdigo ser gerado automaticamente",onChange:()=>{}})})]}),s.jsx("div",{className:"form-row",children:s.jsx("div",{className:"form-group full-width",children:s.jsx(Ae,{label:"Nome da Casa",value:o.houseName,onChange:S=>P("houseName",S),placeholder:"Digite o nome da casa",error:h.houseName,required:!0})})}),s.jsx("div",{className:"form-row",children:s.jsx("div",{className:"form-group",children:s.jsx(Ae,{label:"Senha da Internet",value:o.internetPassword,onChange:S=>P("internetPassword",S),placeholder:"Digite a senha da internet",error:h.internetPassword,required:!0})})})]}),s.jsxs("div",{className:"form-section",children:[s.jsx("h3",{children:"Endereo"}),s.jsxs("div",{className:"form-row",children:[s.jsx("div",{className:"form-group",children:s.jsx(Ae,{label:"CEP",value:o.address.zipCode,onChange:S=>P("address.zipCode",S),placeholder:"00000-000",error:h["address.zipCode"],required:!0,mask:"cep"})}),s.jsx("div",{className:"form-group flex-2",children:s.jsx(Ae,{label:"Rua",value:o.address.street,onChange:S=>P("address.street",S),placeholder:"Digite o nome da rua",error:h["address.street"],required:!0})}),s.jsx("div",{className:"form-group",children:s.jsx(Ae,{label:"Nmero",value:o.address.number,onChange:S=>P("address.number",S),placeholder:"123",error:h["address.number"],required:!0})})]}),s.jsxs("div",{className:"form-row",children:[s.jsx("div",{className:"form-group",children:s.jsx(Ae,{label:"Complemento",value:o.address.complement||"",onChange:S=>P("address.complement",S),placeholder:"Apto, sala, etc. (opcional)",error:h["address.complement"]})}),s.jsx("div",{className:"form-group",children:s.jsx(Ae,{label:"Bairro",value:o.address.neighborhood,onChange:S=>P("address.neighborhood",S),placeholder:"Digite o bairro",error:h["address.neighborhood"],required:!0})})]}),s.jsxs("div",{className:"form-row",children:[s.jsx("div",{className:"form-group flex-2",children:s.jsx(Ae,{label:"Cidade",value:o.address.city,onChange:S=>P("address.city",S),placeholder:"Digite a cidade",error:h["address.city"],required:!0})}),s.jsx("div",{className:"form-group",children:s.jsx(Ae,{label:"Estado",value:o.address.state,onChange:S=>P("address.state",S),placeholder:"SP",error:h["address.state"],required:!0})})]})]}),s.jsxs("div",{className:"form-section",children:[s.jsx("h3",{children:"Valores das Dirias"}),s.jsxs("div",{className:"form-row",children:[s.jsx("div",{className:"form-group",children:s.jsx(Ae,{label:"Baixa Temporada (R$)",value:String(Math.round(o.pricing.lowSeason*100)),onChange:S=>{const F=Ur(S,"currency");P("pricing.lowSeason",F)},placeholder:"R$ 0,00",error:h["pricing.lowSeason"],required:!0,mask:"currency",returnUnmasked:!0})}),s.jsx("div",{className:"form-group",children:s.jsx(Ae,{label:"Mdia Temporada (R$)",value:String(Math.round(o.pricing.midSeason*100)),onChange:S=>{const F=Ur(S,"currency");P("pricing.midSeason",F)},placeholder:"R$ 0,00",error:h["pricing.midSeason"],required:!0,mask:"currency",returnUnmasked:!0})}),s.jsx("div",{className:"form-group",children:s.jsx(Ae,{label:"Alta Temporada (R$)",value:String(Math.round(o.pricing.highSeason*100)),onChange:S=>{const F=Ur(S,"currency");P("pricing.highSeason",F)},placeholder:"R$ 0,00",error:h["pricing.highSeason"],required:!0,mask:"currency",returnUnmasked:!0})})]}),s.jsxs("div",{className:"form-row",children:[s.jsx("div",{className:"form-group",children:s.jsx(Ae,{label:"Pacote de Carnaval (R$)",value:String(Math.round(o.pricing.carnivalPackage*100)),onChange:S=>{const F=Ur(S,"currency");P("pricing.carnivalPackage",F)},placeholder:"R$ 0,00",error:h["pricing.carnivalPackage"],required:!0,mask:"currency",returnUnmasked:!0})}),s.jsx("div",{className:"form-group",children:s.jsx(Ae,{label:"Pacote de Rveillon (R$)",value:String(Math.round(o.pricing.newYearPackage*100)),onChange:S=>{const F=Ur(S,"currency");P("pricing.newYearPackage",F)},placeholder:"R$ 0,00",error:h["pricing.newYearPackage"],required:!0,mask:"currency",returnUnmasked:!0})})]})]}),s.jsxs("div",{className:"form-section",children:[s.jsx("h3",{children:"Fotos"}),s.jsxs("div",{className:"photos-container",children:[v.map((S,F)=>s.jsxs("div",{className:"photo-input-group",children:[s.jsx(Ae,{label:`Foto ${F+1}`,value:S,onChange:M=>z(F,M),placeholder:"URL da foto",disabled:N}),!N&&s.jsx(Ye,{type:"button",variant:"secondary",size:"small",onClick:()=>U(F),className:"remove-photo-btn",children:"Remover"})]},F)),!N&&s.jsx(Ye,{type:"button",variant:"secondary",onClick:Q,className:"add-photo-btn",children:"+ Adicionar Foto"})]})]}),s.jsxs("div",{className:"form-section",children:[s.jsx("h3",{children:"Descrio e Observaes"}),s.jsx("div",{className:"form-row",children:s.jsx("div",{className:"form-group full-width",children:s.jsx(Ae,{label:"Descrio da Casa",value:o.description,onChange:S=>P("description",S),placeholder:"Descreva a casa, comodidades, etc.",error:h.description,required:!0})})}),s.jsx("div",{className:"form-row",children:s.jsx("div",{className:"form-group full-width",children:s.jsx(Ae,{label:"Observaes",value:o.observations,onChange:S=>P("observations",S),placeholder:"Observaes adicionais (opcional)",error:h.observations})})})]})]}),!N&&s.jsxs("div",{className:"form-actions",children:[s.jsx(Ye,{type:"button",variant:"secondary",onClick:e,disabled:d,children:"Cancelar"}),s.jsx(Ye,{type:"submit",disabled:d,children:d?"Salvando...":T?"Criar Casa":"Salvar Alteraes"})]}),N&&s.jsx("div",{className:"form-actions",children:s.jsx(Ye,{type:"button",onClick:e,children:"Fechar"})})]})})},VP=({filters:t,onFiltersChange:e,onClearFilters:r,houseCount:n,totalCount:a})=>{const[o,c]=B.useState(!1),d=(v,y)=>{const w={...t,[v]:y||void 0};Object.keys(w).forEach(N=>{w[N]||delete w[N]}),e(w)},m=(v,y)=>{const w=parseFloat(y)||0,N={...t.priceRange,[v]:w};if(!N.min&&!N.max){const{priceRange:E,...T}=t;e(T)}else e({...t,priceRange:{min:N.min||0,max:N.max||0}})},h=Object.keys(t).length>0,p=[{value:"",label:"Todos os status"},{value:"available",label:"Disponveis"},{value:"occupied",label:"Ocupadas"},{value:"maintenance",label:"Em manuteno"},{value:"inactive",label:"Inativas"}];return s.jsxs("div",{className:"house-filters",children:[s.jsxs("div",{className:"filters-header",children:[s.jsxs("div",{className:"filters-info",children:[s.jsx("h3",{children:"Filtros"}),s.jsx("span",{className:"results-count",children:n===a?`${a} casas`:`${n} de ${a} casas`})]}),s.jsxs("div",{className:"filters-actions",children:[h&&s.jsx(Ye,{onClick:r,variant:"secondary",size:"small",children:"Limpar Filtros"}),s.jsx(Ye,{onClick:()=>c(!o),variant:"secondary",size:"small",className:"toggle-filters-btn",children:o?" Ocultar":" Expandir"})]})]}),s.jsxs("div",{className:`filters-content ${o?"expanded":""}`,children:[s.jsxs("div",{className:"filters-row",children:[s.jsx("div",{className:"filter-group",children:s.jsx(Ae,{label:"Buscar",placeholder:"Nome da casa, cidade, bairro, descrio...",value:t.search||"",onChange:v=>d("search",v)})}),s.jsx("div",{className:"filter-group",children:s.jsx(Jt,{label:"Status",value:t.status||"",onChange:v=>d("status",v),options:p})}),s.jsx("div",{className:"filter-group",children:s.jsx(Ae,{label:"Cidade",placeholder:"Digite a cidade",value:t.city||"",onChange:v=>d("city",v)})})]}),o&&s.jsxs("div",{className:"filters-row",children:[s.jsx("div",{className:"filter-group",children:s.jsx(Ae,{label:"Estado",placeholder:"Digite o estado",value:t.state||"",onChange:v=>d("state",v)})}),s.jsx("div",{className:"filter-group",children:s.jsx(Ae,{label:"Preo Mnimo (R$)",type:"number",placeholder:"0",value:t.priceRange?.min?.toString()||"",onChange:v=>m("min",v)})}),s.jsx("div",{className:"filter-group",children:s.jsx(Ae,{label:"Preo Mximo (R$)",type:"number",placeholder:"999999",value:t.priceRange?.max?.toString()||"",onChange:v=>m("max",v)})})]})]}),h&&s.jsxs("div",{className:"active-filters",children:[s.jsx("span",{className:"active-filters-label",children:"Filtros ativos:"}),s.jsxs("div",{className:"filter-tags",children:[t.search&&s.jsxs("span",{className:"filter-tag",children:['Busca: "',t.search,'"',s.jsx("button",{onClick:()=>d("search",""),children:""})]}),t.status&&s.jsxs("span",{className:"filter-tag",children:["Status:"," ",p.find(v=>v.value===t.status)?.label,s.jsx("button",{onClick:()=>d("status",""),children:""})]}),t.city&&s.jsxs("span",{className:"filter-tag",children:["Cidade: ",t.city,s.jsx("button",{onClick:()=>d("city",""),children:""})]}),t.state&&s.jsxs("span",{className:"filter-tag",children:["Estado: ",t.state,s.jsx("button",{onClick:()=>d("state",""),children:""})]}),t.priceRange&&s.jsxs("span",{className:"filter-tag",children:["Preo: R$ ",t.priceRange.min," - R$ ",t.priceRange.max,s.jsx("button",{onClick:()=>d("priceRange",""),children:""})]})]})]})]})},BP=({stats:t})=>{const e=[{title:"Total de Casas",value:t.total,icon:jn,color:"blue",description:"Total de casas cadastradas"},{title:"Disponveis",value:t.available,icon:Dn,color:"green",description:"Casas disponveis para alocao"},{title:"Ocupadas",value:t.occupied,icon:Hr,color:"orange",description:"Casas atualmente ocupadas"},{title:"Em Manuteno",value:t.maintenance,icon:lP,color:"yellow",description:"Casas em manuteno"},{title:"Inativas",value:t.inactive,icon:Yh,color:"red",description:"Casas inativas"}];return s.jsx("div",{className:"house-stats",children:s.jsx("div",{className:"stats-grid",children:e.map(r=>{const n=r.icon;return s.jsxs("div",{className:`stat-card stat-card-${r.color}`,children:[s.jsx("div",{className:"stat-icon",children:s.jsx(n,{size:24})}),s.jsxs("div",{className:"stat-content",children:[s.jsx("div",{className:"stat-value",children:r.value}),s.jsx("div",{className:"stat-title",children:r.title}),s.jsx("div",{className:"stat-description",children:r.description})]})]},r.title)})})})},UP=()=>{const[t,e]=B.useState([]),[r,n]=B.useState(!0),[a,o]=B.useState(!1),[c,d]=B.useState("create"),[m,h]=B.useState(null),[p,v]=B.useState({}),[y,w]=B.useState({total:0,available:0,occupied:0,maintenance:0,inactive:0}),{showError:N,showSuccess:E,showWarning:T}=$r(),j=async()=>{try{n(!0);const A=await os.getAll(p);e(A)}catch(A){const D=A instanceof Error?A.message:"Erro ao carregar casas";N("Erro ao carregar casas",D)}finally{n(!1)}},O=async()=>{try{const A=await os.getStats();w(A)}catch(A){const D=A instanceof Error?A.message:"Erro ao carregar estatsticas";T("Estatsticas indisponveis",D)}},P=B.useMemo(()=>{let A=[...t];if(p.search){const D=p.search.toLowerCase();A=A.filter(we=>we.houseName.toLowerCase().includes(D)||we.address.neighborhood.toLowerCase().includes(D)||we.address.city.toLowerCase().includes(D)||we.description.toLowerCase().includes(D))}return p.status&&(A=A.filter(D=>D.status===p.status)),p.city&&(A=A.filter(D=>D.address.city.toLowerCase().includes(p.city.toLowerCase()))),p.state&&(A=A.filter(D=>D.address.state.toLowerCase().includes(p.state.toLowerCase()))),p.priceRange&&(A=A.filter(D=>{const we=p.priceRange.min,Me=p.priceRange.max;return D.pricing.lowSeason>=we&&D.pricing.lowSeason<=Me})),A},[t,p]);B.useEffect(()=>{j(),O()},[]),B.useEffect(()=>{j()},[p]);const z=()=>{h(null),d("create"),o(!0)},Q=A=>{h(A),d("edit"),o(!0)},U=A=>{h(A),d("view"),o(!0)},C=async A=>{if(confirm("Tem certeza que deseja excluir esta casa?"))try{await os.delete(A),e(t.filter(D=>D.id!==A)),O(),E("Casa excluda","A casa foi excluda com sucesso.")}catch(D){const we=D instanceof Error?D.message:"Erro ao excluir casa";N("Erro ao excluir casa",we)}},k=()=>{o(!1),h(null)},S=A=>{j(),O(),k(),E(A==="create"?"Casa criada":"Casa atualizada",A==="create"?"A casa foi cadastrada com sucesso.":"As informaes da casa foram atualizadas.")},F=A=>{v(A)},M=()=>{v({})};return r&&t.length===0?s.jsx(yr,{text:"Carregando casas...",fullScreen:!0}):s.jsxs("div",{className:"house-management",children:[s.jsx("div",{className:"house-management-header",children:s.jsxs("div",{className:"header-content",children:[s.jsx("h1",{children:"Gesto de Casas"}),s.jsx(Ye,{onClick:z,className:"create-house-btn",children:"+ Nova Casa"})]})}),s.jsx(BP,{stats:y}),s.jsxs("div",{className:"house-management-content",children:[s.jsx(VP,{filters:p,onFiltersChange:F,onClearFilters:M,houseCount:P.length,totalCount:t.length}),s.jsx(PP,{houses:P,loading:r,onEdit:Q,onView:U,onDelete:C})]}),s.jsx(LP,{isOpen:a,onClose:k,onSave:S,house:m,mode:c})]})},Hd="sales",zP=(t,e)=>{const r=Math.abs(e.getTime()-t.getTime());return Math.ceil(r/(1e3*60*60*24))},hj=(t,e,r,n=0,a=0,o=0,c={})=>{const d=zP(t,e),m=r-n,h=m*.1,p=(c.supermarket||0)+(c.seafood||0)+(c.seafoodMeat||0)+(c.transfer||0)+(c.vegetables||0)+(c.coconuts||0),v=m+o+p,y=m-h-a-p;return{numberOfNights:d,netValue:m,salesCommission:h,totalAdditionalSales:p,totalRevenue:v,contributionMargin:y}},vN=t=>{const e=t.data();if(!e)throw new Error("Document data is undefined");return{id:t.id,code:e.code||"",company:e.company||"exclusive",clientId:e.clientId||"",clientName:e.clientName||"",clientCpf:e.clientCpf||"",clientPhone:e.clientPhone||"",clientEmail:e.clientEmail||"",clientGender:e.clientGender||"",employeeId:e.employeeId||"",employeeName:e.employeeName||"",employeeCommission:e.employeeCommission||0,saleOrigin:e.saleOrigin||"instagram",houseId:e.houseId||"",houseName:e.houseName||"",houseAddress:e.houseAddress||"",ownerId:e.ownerId||"",ownerName:e.ownerName||"",ownerPhone:e.ownerPhone||"",checkInDate:e.checkInDate?.toDate()||new Date,checkOutDate:e.checkOutDate?.toDate()||new Date,numberOfNights:e.numberOfNights||0,numberOfGuests:e.numberOfGuests||0,contractValue:e.contractValue||0,discount:e.discount||0,netValue:e.netValue||0,salesCommission:e.salesCommission||0,housekeeperValue:e.housekeeperValue||0,conciergeValue:e.conciergeValue||0,additionalSales:e.additionalSales||{supermarket:0,seafood:0,seafoodMeat:0,transfer:0,vegetables:0,coconuts:0},totalAdditionalSales:e.totalAdditionalSales||0,totalRevenue:e.totalRevenue||0,contributionMargin:e.contributionMargin||0,status:e.status||"pending",createdAt:e.createdAt?.toDate()||new Date,updatedAt:e.updatedAt?.toDate()||new Date}},xN=async t=>{const e={...t};if("clientId"in e&&e.clientId){const r=await ko.getById(e.clientId);r&&(e.clientName=r.name,e.clientCpf=r.cpf,e.clientPhone=r.phone,e.clientEmail=r.email,e.clientGender="")}if("employeeId"in e&&e.employeeId){const r=await kl.getById(e.employeeId);r&&(e.employeeName=r.name,e.employeeCommission=r.rentalCommissionPercentage)}if("houseId"in e&&e.houseId){const r=await os.getById(e.houseId);if(r&&(e.houseName=r.houseName,e.houseAddress=`${r.address.street}, ${r.address.number} - ${r.address.city}/${r.address.state}`,r.ownerId)){const n=await Il.getById(r.ownerId);n&&(e.ownerName=n.name,e.ownerId=n.id)}}if("checkInDate"in e&&"checkOutDate"in e&&"contractValue"in e){const r=hj(e.checkInDate,e.checkOutDate,e.contractValue,e.discount||0,e.housekeeperValue||0,e.conciergeValue||0,e.additionalSales||{});e.numberOfNights=r.numberOfNights,e.netValue=r.netValue,e.salesCommission=r.salesCommission,e.totalAdditionalSales=r.totalAdditionalSales,e.totalRevenue=r.totalRevenue,e.contributionMargin=r.contributionMargin}return"checkInDate"in e&&e.checkInDate&&(e.checkInDate=Ke.fromDate(e.checkInDate)),"checkOutDate"in e&&e.checkOutDate&&(e.checkOutDate=Ke.fromDate(e.checkOutDate)),e.additionalSales||(e.additionalSales={supermarket:0,seafood:0,seafoodMeat:0,transfer:0,vegetables:0,coconuts:0}),e},zr={async getAll(t){try{let e=mt(kt(et,Hd),hs("createdAt","desc"));t?.company&&(e=mt(e,ft("company","==",t.company))),t?.status&&(e=mt(e,ft("status","==",t.status))),t?.saleOrigin&&(e=mt(e,ft("saleOrigin","==",t.saleOrigin)));let n=(await qr(e)).docs.map(vN);if(t?.search){const a=t.search.toLowerCase();n=n.filter(o=>o.code.toLowerCase().includes(a)||o.clientName.toLowerCase().includes(a)||o.houseName.toLowerCase().includes(a)||o.clientCpf.includes(a))}return t?.dateRange&&(n=n.filter(a=>a.checkInDate>=t.dateRange.start&&a.checkInDate<=t.dateRange.end)),n}catch(e){throw console.error("Erro ao buscar vendas:",e),new Error("Falha ao carregar lista de vendas")}},async getById(t){try{const e=Zt(et,Hd,t),r=await ji(e);return r.exists()?vN(r):null}catch(e){throw console.error("Erro ao buscar venda:",e),new Error("Falha ao carregar dados da venda")}},async create(t){try{const e=await this.generateSaleCode(),n={...await xN(t),code:e,status:t.status||"pending",createdAt:Ke.now(),updatedAt:Ke.now()};return(await Bs(kt(et,Hd),n)).id}catch(e){throw console.error("Erro ao criar venda:",e),new Error("Falha ao criar venda")}},async update(t){try{const{id:e,...r}=t,n=Zt(et,Hd,e),o={...await xN(r),updatedAt:Ke.now()};await Vs(n,o)}catch(e){throw console.error("Erro ao atualizar venda:",e),new Error("Falha ao atualizar venda")}},async delete(t){try{const e=Zt(et,Hd,t);await Xl(e)}catch(e){throw console.error("Erro ao deletar venda:",e),new Error("Falha ao deletar venda")}},async generateSaleCode(){try{const e=(await this.getAll()).sort((a,o)=>o.createdAt.getTime()-a.createdAt.getTime())[0];return!e||!e.code?"VND001":`VND${(parseInt(e.code.replace("VND",""))+1).toString().padStart(3,"0")}`}catch(t){return console.error("Erro ao gerar cdigo:",t),"VND001"}},async getStats(){try{const t=await this.getAll(),e=t.reduce((a,o)=>a+o.totalRevenue,0),r=t.reduce((a,o)=>a+o.salesCommission+o.totalAdditionalSales,0),n=t.reduce((a,o)=>a+o.contributionMargin,0);return{total:t.length,totalRevenue:e,pending:t.filter(a=>a.status==="pending").length,confirmed:t.filter(a=>a.status==="confirmed").length,cancelled:t.filter(a=>a.status==="cancelled").length,completed:t.filter(a=>a.status==="completed").length,averageTicket:t.length>0?e/t.length:0,totalCommissions:r,totalMargin:n}}catch(t){throw console.error("Erro ao obter estatsticas:",t),new Error("Falha ao carregar estatsticas")}},async checkHouseAvailability(t,e,r,n){try{return(await this.getAll()).filter(c=>n&&c.id===n||c.houseId!==t||c.status==="cancelled"?!1:e>=c.checkInDate&&e<c.checkOutDate||r>c.checkInDate&&r<=c.checkOutDate||e<=c.checkInDate&&r>=c.checkOutDate).length===0}catch(a){return console.error("Erro ao verificar disponibilidade:",a),!1}}},qc="nfes",yN="nfe_sequences",Tv="company_nfe_configs",_N=t=>{const e=t.data();if(!e)throw new Error("Document data is undefined");return{id:t.id,number:e.number||0,series:e.series||"1",code:e.code||"",company:e.company||"exclusive",companyName:e.companyName||"",companyCnpj:e.companyCnpj||"",clientId:e.clientId||"",clientName:e.clientName||"",clientCpf:e.clientCpf||"",clientEmail:e.clientEmail||"",saleId:e.saleId||"",saleCode:e.saleCode||"",houseId:e.houseId||"",houseName:e.houseName||"",checkInDate:e.checkInDate?.toDate()||new Date,checkOutDate:e.checkOutDate?.toDate()||new Date,numberOfNights:e.numberOfNights||0,dailyRateValue:e.dailyRateValue||0,conciergeValue:e.conciergeValue||0,additionalServicesValue:e.additionalServicesValue||0,discountValue:e.discountValue||0,subtotal:e.subtotal||0,taxValue:e.taxValue||0,totalValue:e.totalValue||0,issueDate:e.issueDate?.toDate()||new Date,status:e.status||"pending",nfeNumber:e.nfeNumber,nfeKey:e.nfeKey,xmlContent:e.xmlContent,pdfUrl:e.pdfUrl,emissionError:e.emissionError,failureAttempts:e.failureAttempts||0,lastAttemptDate:e.lastAttemptDate?.toDate(),createdAt:e.createdAt?.toDate()||new Date,updatedAt:e.updatedAt?.toDate()||new Date}},Gm={async getCompanyConfig(t){try{const e=mt(kt(et,Tv),ft("company","==",t)),r=await qr(e);if(!r.empty)return r.docs[0].data();console.warn(`Configurao no encontrada para ${t}. Criando configurao padro...`);const n=this.getDefaultCompanyConfig(t);return await Bs(kt(et,Tv),{...n,createdAt:Ke.fromDate(n.createdAt),updatedAt:Ke.fromDate(n.updatedAt)}),n}catch(e){throw console.error("Erro ao obter configurao da empresa:",e),e}},getDefaultCompanyConfig(t){return{exclusive:{company:"exclusive",companyName:"Exclusive Imveis",cnpj:"00.000.000/0000-00",stateRegistration:"00.000.000.000.000",series:"1",autoIssue:!0,sefazEnvironment:"sandbox",createdAt:new Date,updatedAt:new Date},giogio:{company:"giogio",companyName:"Gio Gio Temporadas",cnpj:"00.000.000/0000-00",stateRegistration:"00.000.000.000.000",series:"1",autoIssue:!0,sefazEnvironment:"sandbox",createdAt:new Date,updatedAt:new Date},direta:{company:"direta",companyName:"Venda Direta",cnpj:"00.000.000/0000-00",stateRegistration:"00.000.000.000.000",series:"1",autoIssue:!1,sefazEnvironment:"sandbox",createdAt:new Date,updatedAt:new Date}}[t]||{company:t,companyName:t,cnpj:"00.000.000/0000-00",stateRegistration:"00.000.000.000.000",series:"1",autoIssue:!1,sefazEnvironment:"sandbox",createdAt:new Date,updatedAt:new Date}},async updateCompanyConfig(t,e){try{const r=mt(kt(et,Tv),ft("company","==",t)),n=await qr(r);if(!n.empty){const a=n.docs[0].ref;await Vs(a,{...e,updatedAt:Ke.now()})}}catch(r){throw console.error("Erro ao atualizar configurao da empresa:",r),r}},async getNextNFeNumber(t,e){try{const r=mt(kt(et,yN),ft("company","==",t),ft("series","==",e)),n=await qr(r);if(n.empty){const d={company:t,series:e,lastNumber:1,lastIssueDate:new Date,createdAt:new Date,updatedAt:new Date};return{number:1,sequenceId:(await Bs(kt(et,yN),{...d,lastIssueDate:Ke.fromDate(d.lastIssueDate),createdAt:Ke.fromDate(d.createdAt),updatedAt:Ke.fromDate(d.updatedAt)})).id}}const a=n.docs[0].ref,c=n.docs[0].data().lastNumber+1;return await Vs(a,{lastNumber:c,lastIssueDate:Ke.now(),updatedAt:Ke.now()}),{number:c,sequenceId:a.id}}catch(r){throw console.error("Erro ao obter prximo nmero de NF-e:",r),r}},async createNFe(t){try{const e=await zr.getById(t.saleId);if(!e)throw new Error("Venda no encontrada");const r=await this.getCompanyConfig(t.company),{number:n}=await this.getNextNFeNumber(t.company,r.series),a=`${r.series}${String(n).padStart(9,"0")}`,o={id:"",number:n,series:r.series,code:a,company:t.company,companyName:r.companyName,companyCnpj:r.cnpj,clientId:e.clientId,clientName:e.clientName,clientCpf:e.clientCpf,clientEmail:e.clientEmail,saleId:e.id,saleCode:e.code,houseId:e.houseId,houseName:e.houseName,checkInDate:e.checkInDate,checkOutDate:e.checkOutDate,numberOfNights:e.numberOfNights,dailyRateValue:e.netValue,conciergeValue:e.conciergeValue,additionalServicesValue:e.totalAdditionalSales,discountValue:e.discount,subtotal:e.netValue+e.conciergeValue+e.totalAdditionalSales,taxValue:0,totalValue:0,issueDate:t.issueDate||new Date,status:"pending",failureAttempts:0,createdAt:new Date,updatedAt:new Date},d={exclusive:6,giogio:6,direta:6}[t.company]||6;o.taxValue=o.subtotal*d/100,o.totalValue=o.subtotal+o.taxValue;const m=await Bs(kt(et,qc),{...o,checkInDate:Ke.fromDate(o.checkInDate),checkOutDate:Ke.fromDate(o.checkOutDate),issueDate:Ke.fromDate(o.issueDate),lastAttemptDate:o.lastAttemptDate?Ke.fromDate(o.lastAttemptDate):null,createdAt:Ke.fromDate(o.createdAt),updatedAt:Ke.fromDate(o.updatedAt)});return o.id=m.id,r.autoIssue&&await this.issueNFe(o.id),o}catch(e){throw console.error("Erro ao criar NF-e:",e),e}},async issueNFe(t){try{const e=await this.getNFeById(t);if(!e)throw new Error("NF-e no encontrada");if(e.status==="authorized")return{success:!0,nfeNumber:e.nfeNumber,nfeKey:e.nfeKey,timestamp:new Date};await this.updateNFe(t,{id:t,status:"processing"});const r=await this.simulateNFeSefazEmission(e);if(r.success&&r.nfeNumber)await this.updateNFe(t,{id:t,status:"authorized",nfeNumber:r.nfeNumber,nfeKey:r.nfeKey,xmlContent:r.xmlContent,pdfUrl:r.pdfUrl});else{const a=((await this.getNFeById(t))?.failureAttempts||0)+1;await this.updateNFe(t,{id:t,status:"error",emissionError:r.error||"Erro desconhecido",failureAttempts:a})}return r}catch(e){console.error("Erro ao emitir NF-e:",e);const n=((await this.getNFeById(t))?.failureAttempts||0)+1;return await this.updateNFe(t,{id:t,status:"error",emissionError:String(e),failureAttempts:n}),{success:!1,error:String(e),timestamp:new Date}}},async simulateNFeSefazEmission(t){return new Promise(e=>{setTimeout(()=>{if(Math.random()<.95){const n=`${t.series}${String(t.number).padStart(9,"0")}`,a=this.generateNFeKey(t);e({success:!0,nfeNumber:n,nfeKey:a,xmlContent:this.generateMockXML(t,a),pdfUrl:`https://exemplo.com/danfe/${a}.pdf`,timestamp:new Date})}else e({success:!1,error:"Erro simulado na SEFAZ: Dados inconsistentes",timestamp:new Date})},2e3)})},generateNFeKey(t){const e=t.companyCnpj.replace(/\D/g,""),r=t.issueDate.getFullYear().toString().slice(-2),n=String(t.issueDate.getMonth()+1).padStart(2,"0"),a="55",o=String(t.series).padStart(3,"0"),c=String(t.number).padStart(9,"0"),m=`35${r}${n}${e.substring(0,8)}${a}${o}${c}`,h=this.calculateNFeKeyDV(m);return`${m}${h}`},calculateNFeKeyDV(t){const e="2987654321";let r=0;for(let a=0;a<t.length;a++)r+=parseInt(t[a])*parseInt(e[a%10]);const n=11-r%11;return String(n===10||n===11?0:n)},generateMockXML(t,e){return`<?xml version="1.0" encoding="UTF-8"?>
<NFe xmlns="http://www.portalfiscal.inf.br/nfe">
  <infNFe Id="NFe${e}">
    <ide>
      <cUF>35</cUF>
      <cNF>${t.code}</cNF>
      <natOp>Locao de Imvel</natOp>
      <mod>55</mod>
      <serie>${t.series}</serie>
      <nNF>${t.number}</nNF>
      <dEmi>${t.issueDate.toISOString().split("T")[0]}</dEmi>
    </ide>
    <emit>
      <CNPJ>${t.companyCnpj}</CNPJ>
      <xNome>${t.companyName}</xNome>
    </emit>
    <dest>
      <CPF>${t.clientCpf}</CPF>
      <xNome>${t.clientName}</xNome>
    </dest>
    <det nItem="1">
      <prod>
        <xDesc>Locao de Imvel - ${t.houseName}</xDesc>
        <qCom>${t.numberOfNights}</qCom>
        <vItem12741>${t.totalValue.toFixed(2)}</vItem12741>
      </prod>
    </det>
    <total>
      <ICMStot>
        <vBC>${t.subtotal.toFixed(2)}</vBC>
        <vICMS>${t.taxValue.toFixed(2)}</vICMS>
      </ICMStot>
    </total>
  </infNFe>
</NFe>`},async getNFeById(t){try{const e=Zt(et,qc,t),r=await ji(e);return r.exists()?_N(r):null}catch(e){throw console.error("Erro ao obter NF-e:",e),e}},async getNFes(t){try{let e=mt(kt(et,qc),hs("issueDate","desc"));const r=[];t?.company&&t.company!=="all"&&r.push(ft("company","==",t.company)),t?.status&&r.push(ft("status","==",t.status)),t?.series&&r.push(ft("series","==",t.series)),r.length>0&&(e=mt(kt(et,qc),...r,hs("issueDate","desc")));const a=(await qr(e)).docs.map(_N);if(t?.search){const o=t.search.toLowerCase();return a.filter(c=>c.code.toLowerCase().includes(o)||c.clientName.toLowerCase().includes(o)||c.houseName.toLowerCase().includes(o)||c.saleCode.toLowerCase().includes(o))}return t?.dateRange?.start&&t?.dateRange?.end?a.filter(o=>o.issueDate>=t.dateRange.start&&o.issueDate<=t.dateRange.end):a}catch(e){throw console.error("Erro ao listar NF-es:",e),e}},async updateNFe(t,e){try{const r=Zt(et,qc,t);await Vs(r,{...e,updatedAt:Ke.now()})}catch(r){throw console.error("Erro ao atualizar NF-e:",r),r}},async cancelNFe(t,e){try{await this.updateNFe(t,{id:t,status:"cancelled",emissionError:e})}catch(r){throw console.error("Erro ao cancelar NF-e:",r),r}},async getNFeReport(t,e,r){try{const n=await this.getNFes({company:t,dateRange:{start:e,end:r}}),a=n.length,o=n.filter(y=>y.status==="authorized").length,c=n.filter(y=>y.status==="rejected").length,d=n.filter(y=>y.status==="cancelled").length,m=n.reduce((y,w)=>y+w.totalValue,0),h=n.reduce((y,w)=>y+w.taxValue,0),p=a>0?o/a*100:0,v=`${e.toLocaleDateString()} a ${r.toLocaleDateString()}`;return{company:t,period:v,totalIssued:a,totalAuthorized:o,totalRejected:c,totalCancelled:d,totalValue:m,taxCollected:h,successRate:p}}catch(n){throw console.error("Erro ao gerar relatrio de NFes:",n),n}},async deleteNFe(t){try{const e=Zt(et,qc,t);await Xl(e)}catch(e){throw console.error("Erro ao deletar NF-e:",e),e}}},HP=({sales:t,loading:e,onEdit:r,onView:n,onDelete:a,onCreateNFe:o,filters:c,onFiltersChange:d,onClearFilters:m})=>{const[h,p]=B.useState("createdAt"),[v,y]=B.useState("desc"),[w,N]=B.useState(!1),E=S=>{h===S?y(v==="asc"?"desc":"asc"):(p(S),y("asc"))},T=[...t].sort((S,F)=>{const M=S[h],A=F[h];return M instanceof Date&&A instanceof Date?v==="asc"?M.getTime()-A.getTime():A.getTime()-M.getTime():typeof M=="string"&&typeof A=="string"?v==="asc"?M.localeCompare(A):A.localeCompare(M):typeof M=="number"&&typeof A=="number"?v==="asc"?M-A:A-M:0}),j=S=>new Intl.DateTimeFormat("pt-BR").format(S),O=S=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(S),P=S=>{const M={pending:{label:"Pendente",class:"status-pending"},confirmed:{label:"Confirmada",class:"status-confirmed"},cancelled:{label:"Cancelada",class:"status-cancelled"},completed:{label:"Concluda",class:"status-completed"}}[S];return s.jsx("span",{className:`status-badge ${M.class}`,children:M.label})},z=S=>{const M={exclusive:{label:"Exclusive",class:"company-exclusive"},giogio:{label:"Giogio",class:"company-giogio"},direta:{label:"Direta",class:"company-direta"}}[S];return s.jsx("span",{className:`company-badge ${M.class}`,children:M.label})},Q=(S,F)=>{d({...c,[S]:F||void 0})},U=[{value:"",label:"Todas"},{value:"exclusive",label:"Exclusive"},{value:"giogio",label:"Giogio"},{value:"direta",label:"Direta"}],C=[{value:"",label:"Todos"},{value:"pending",label:"Pendente"},{value:"confirmed",label:"Confirmada"},{value:"completed",label:"Concluda"},{value:"cancelled",label:"Cancelada"}],k=[{value:"",label:"Todas"},{value:"instagram",label:"Instagram"},{value:"facebook",label:"Facebook"},{value:"google",label:"Google"},{value:"indicacao",label:"Indicao"},{value:"whatsapp",label:"WhatsApp"},{value:"site",label:"Site"},{value:"outros",label:"Outros"}];return e&&t.length===0?s.jsx(yr,{text:"Carregando vendas..."}):s.jsxs("div",{className:"sale-list",children:[s.jsxs("div",{className:"sale-list-header",children:[s.jsxs("div",{className:"list-info",children:[s.jsx("h2",{children:"Lista de Vendas"}),s.jsxs("span",{className:"list-count",children:[t.length," ",t.length===1?"venda":"vendas"]})]}),s.jsxs(Ye,{onClick:()=>N(!w),className:"filter-toggle-btn",children:[s.jsx(Wh,{size:16}),w?"Ocultar Filtros":"Mostrar Filtros"]})]}),w&&s.jsxs("div",{className:"sale-filters",children:[s.jsx(Ae,{label:"Buscar",type:"text",placeholder:"Buscar por cdigo, cliente, casa...",value:c.search||"",onChange:S=>Q("search",S)}),s.jsx(Jt,{label:"Empresa",value:c.company||"",onChange:S=>Q("company",S),options:U}),s.jsx(Jt,{label:"Status",value:c.status||"",onChange:S=>Q("status",S),options:C}),s.jsx(Jt,{label:"Origem da Venda",value:c.saleOrigin||"",onChange:S=>Q("saleOrigin",S),options:k}),s.jsxs(Ye,{onClick:m,className:"clear-filters-btn",children:[s.jsx(Rs,{size:16}),"Limpar Filtros"]})]}),t.length===0?s.jsxs("div",{className:"empty-state",children:[s.jsx(pn,{size:48}),s.jsx("h3",{children:"Nenhuma venda encontrada"}),s.jsx("p",{children:"Comece criando sua primeira venda ou ajuste os filtros."})]}):s.jsx("div",{className:"sale-table-container",children:s.jsxs("table",{className:"sale-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsxs("th",{onClick:()=>E("code"),children:["Cdigo"," ",h==="code"&&(v==="asc"?"":"")]}),s.jsxs("th",{onClick:()=>E("company"),children:["Empresa"," ",h==="company"&&(v==="asc"?"":"")]}),s.jsxs("th",{onClick:()=>E("clientName"),children:["Cliente"," ",h==="clientName"&&(v==="asc"?"":"")]}),s.jsxs("th",{onClick:()=>E("employeeName"),children:["Vendedor/Colaborador"," ",h==="employeeName"&&(v==="asc"?"":"")]}),s.jsxs("th",{onClick:()=>E("houseName"),children:["Casa"," ",h==="houseName"&&(v==="asc"?"":"")]}),s.jsxs("th",{onClick:()=>E("checkInDate"),children:["Check-in"," ",h==="checkInDate"&&(v==="asc"?"":"")]}),s.jsxs("th",{onClick:()=>E("numberOfNights"),children:["Noites"," ",h==="numberOfNights"&&(v==="asc"?"":"")]}),s.jsxs("th",{onClick:()=>E("totalRevenue"),children:["Faturamento"," ",h==="totalRevenue"&&(v==="asc"?"":"")]}),s.jsxs("th",{onClick:()=>E("status"),children:["Status"," ",h==="status"&&(v==="asc"?"":"")]}),s.jsx("th",{children:"Aes"})]})}),s.jsx("tbody",{children:T.map(S=>s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx("strong",{children:S.code})}),s.jsx("td",{children:z(S.company)}),s.jsx("td",{children:s.jsxs("div",{className:"client-info",children:[s.jsx("span",{className:"client-name",children:S.clientName}),s.jsx("span",{className:"client-details",children:S.clientPhone})]})}),s.jsx("td",{children:s.jsx("div",{className:"employee-info",children:s.jsx("span",{className:"employee-name",children:S.employeeName})})}),s.jsx("td",{children:s.jsxs("div",{className:"house-info",children:[s.jsx(jn,{size:14}),s.jsx("span",{children:S.houseName})]})}),s.jsx("td",{children:s.jsxs("div",{className:"date-info",children:[s.jsx(pn,{size:14}),s.jsx("span",{children:j(S.checkInDate)})]})}),s.jsx("td",{children:s.jsxs("span",{className:"nights-badge",children:[S.numberOfNights," noites"]})}),s.jsx("td",{children:s.jsx("strong",{className:"revenue-value",children:O(S.totalRevenue)})}),s.jsx("td",{children:P(S.status)}),s.jsx("td",{children:s.jsxs("div",{className:"action-buttons",children:[s.jsx("button",{className:"action-btn view-btn",onClick:()=>n(S),title:"Visualizar",children:s.jsx(ms,{size:16})}),s.jsx("button",{className:"action-btn edit-btn",onClick:()=>r(S),title:"Editar",children:s.jsx(Ai,{size:16})}),o&&s.jsx("button",{className:"action-btn nfe-btn",onClick:()=>o(S),title:"Criar NFe",children:s.jsx(ps,{size:16})}),s.jsx("button",{className:"action-btn delete-btn",onClick:()=>a(S.id),title:"Excluir",children:s.jsx(Jl,{size:16})})]})})]},S.id))})]})}),e&&t.length>0&&s.jsx("div",{className:"loading-overlay",children:s.jsx(yr,{text:"Atualizando..."})})]})},EN={company:"exclusive",clientId:"",saleOrigin:"instagram",houseId:"",checkInDate:new Date,checkOutDate:new Date,numberOfGuests:1,contractValue:0,discount:0,housekeeperValue:0,conciergeValue:0,additionalSales:{supermarket:0,seafood:0,seafoodMeat:0,transfer:0,vegetables:0,coconuts:0},status:"pending",employeeId:""},qP=({isOpen:t,onClose:e,onSave:r,sale:n,mode:a})=>{const[o,c]=B.useState(EN),[d,m]=B.useState(!1),[h,p]=B.useState({}),[v,y]=B.useState([]),[w,N]=B.useState([]),[E,T]=B.useState(null),[j,O]=B.useState(null),[P,z]=B.useState([]),[Q,U]=B.useState(null),{showError:C,showWarning:k}=$r(),[S,F]=B.useState({numberOfNights:0,netValue:0,salesCommission:0,totalAdditionalSales:0,totalRevenue:0,contributionMargin:0}),M=a==="view",A=a==="edit";B.useEffect(()=>{t&&(D(),Me(),we())},[t]);const D=async()=>{try{const ae=await ko.getAll();y(ae)}catch(ae){const Be=ae instanceof Error?ae.message:"Erro ao carregar clientes";C("Erro ao carregar clientes",Be)}},we=async()=>{try{const ae=await kl.getAll();z(ae)}catch(ae){const Be=ae instanceof Error?ae.message:"Erro ao carregar colaboradores";C("Erro ao carregar colaboradores",Be)}},Me=async()=>{try{const ae=await os.getAll();N(ae)}catch(ae){const Be=ae instanceof Error?ae.message:"Erro ao carregar casas";C("Erro ao carregar casas",Be)}};B.useEffect(()=>{t&&(n&&(A||a==="view")?(c({company:n.company,clientId:n.clientId,saleOrigin:n.saleOrigin,houseId:n.houseId,checkInDate:n.checkInDate,checkOutDate:n.checkOutDate,numberOfGuests:n.numberOfGuests,contractValue:n.contractValue,discount:n.discount,housekeeperValue:n.housekeeperValue,conciergeValue:n.conciergeValue,additionalSales:n.additionalSales,status:n.status,employeeId:n.employeeId}),ko.getById(n.clientId).then(T),os.getById(n.houseId).then(O)):(c(EN),T(null),O(null)),p({}))},[t,n,A,a]),B.useEffect(()=>{const ae=hj(o.checkInDate,o.checkOutDate,o.contractValue,o.discount||0,o.housekeeperValue||0,o.conciergeValue||0,o.additionalSales||{});F(ae)},[o.checkInDate,o.checkOutDate,o.contractValue,o.discount,o.housekeeperValue,o.conciergeValue,o.additionalSales]),B.useEffect(()=>{if(o.clientId){const ae=v.find(Be=>Be.id===o.clientId);T(ae||null)}else T(null)},[o.clientId,v]),B.useEffect(()=>{if(o.employeeId){const ae=P.find(Be=>Be.id===o.employeeId);U(ae||null)}else U(null)},[o.employeeId,P]),B.useEffect(()=>{if(o.houseId){const ae=w.find(Be=>Be.id===o.houseId);O(ae||null)}else O(null)},[o.houseId,w]),B.useEffect(()=>{j?.ownerId&&Il.getById(j.ownerId).then(ae=>{ae&&c(Be=>({...Be,ownerId:ae.id,ownerName:ae.name,ownerPhone:ae.phone}))})},[j]);const ge=()=>{const ae={};return o.clientId||(ae.clientId="Cliente  obrigatrio"),o.employeeId||(ae.employeeId="Funcionrio  obrigatrio"),o.houseId||(ae.houseId="Casa  obrigatria"),o.checkInDate>=o.checkOutDate&&(ae.checkOutDate="Data de sada deve ser aps a data de entrada"),o.contractValue<=0&&(ae.contractValue="Valor do contrato deve ser maior que zero"),o.numberOfGuests<=0&&(ae.numberOfGuests="Nmero de hspedes deve ser maior que zero"),p(ae),Object.keys(ae).length===0},De=async ae=>{if(ae.preventDefault(),M){e();return}if(ge())try{if(m(!0),!await zr.checkHouseAvailability(o.houseId,o.checkInDate,o.checkOutDate,n?.id)){k("Casa indisponvel","Esta casa j possui uma reserva para as datas selecionadas.");return}let tt="create";A&&n?(await zr.update({id:n.id,...o}),tt="edit"):(await zr.create(o),tt="create"),r(tt),e()}catch(Be){const tt=Be instanceof Error?Be.message:"Erro ao salvar venda. Tente novamente.";C("Erro ao salvar venda",tt)}finally{m(!1)}},Le=(ae,Be)=>{c(tt=>({...tt,[ae]:Be})),h[ae]&&p(tt=>{const qt={...tt};return delete qt[ae],qt})},Je=(ae,Be)=>{c(tt=>({...tt,additionalSales:{...tt.additionalSales||{},[ae]:Be}}))},ee=ae=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(ae),_e=ae=>{const Be=ae.getFullYear(),tt=String(ae.getMonth()+1).padStart(2,"0"),qt=String(ae.getDate()).padStart(2,"0");return`${Be}-${tt}-${qt}`},Y=ae=>new Date(ae+"T00:00:00"),te=()=>a==="view"?"Visualizar Venda":a==="edit"?"Editar Venda":"Nova Venda",Z=[{value:"exclusive",label:"Exclusive"},{value:"giogio",label:"Giogio"},{value:"direta",label:"Direta"}],re=[{value:"instagram",label:"Instagram"},{value:"facebook",label:"Facebook"},{value:"google",label:"Google"},{value:"indicacao",label:"Indicao"},{value:"whatsapp",label:"WhatsApp"},{value:"site",label:"Site"},{value:"outros",label:"Outros"}],de=[{value:"pending",label:"Pendente"},{value:"confirmed",label:"Confirmada"},{value:"completed",label:"Concluda"},{value:"cancelled",label:"Cancelada"}],Ve=v.map(ae=>({value:ae.id,label:`${ae.name} - ${ae.cpf}`})),ke=P.map(ae=>({value:ae.id,label:ae.name})),He=w.map(ae=>({value:ae.id,label:`${ae.houseName} - ${ae.address.city}`}));return s.jsx(Iu,{isOpen:t,onClose:e,title:te(),size:"large",children:s.jsxs("form",{onSubmit:De,className:"sale-modal-form",children:[d&&s.jsx(yr,{text:"Salvando..."}),s.jsxs("div",{className:"form-grid",children:[s.jsxs("div",{className:"form-section",children:[s.jsx("h3",{className:"section-title",children:"Informaes Bsicas"}),s.jsx(Jt,{label:"Empresa",value:o.company,onChange:ae=>Le("company",ae),options:Z,disabled:M,error:h.company,required:!0}),s.jsx(Jt,{label:"Origem da Venda",value:o.saleOrigin,onChange:ae=>Le("saleOrigin",ae),options:re,disabled:M,error:h.saleOrigin,required:!0}),s.jsx(Jt,{label:"Status",value:o.status||"pending",onChange:ae=>Le("status",ae),options:de,disabled:M})]}),s.jsxs("div",{className:"form-section",children:[s.jsx("h3",{className:"section-title",children:"Cliente"}),s.jsx(Jt,{label:"Cliente",value:o.clientId,onChange:ae=>Le("clientId",ae),options:[{value:"",label:"Selecione um cliente"},...Ve],disabled:M,error:h.clientId,required:!0}),E&&s.jsxs("div",{className:"client-info-display",children:[s.jsxs("div",{className:"info-row",children:[s.jsx("span",{className:"info-label",children:"CPF:"}),s.jsx("span",{className:"info-value",children:E.cpf})]}),s.jsxs("div",{className:"info-row",children:[s.jsx("span",{className:"info-label",children:"Telefone:"}),s.jsx("span",{className:"info-value",children:E.phone})]}),s.jsxs("div",{className:"info-row",children:[s.jsx("span",{className:"info-label",children:"Email:"}),s.jsx("span",{className:"info-value",children:E.email})]})]})]}),s.jsxs("div",{className:"form-section",children:[s.jsx("h3",{className:"section-title",children:"Casa"}),s.jsx(Jt,{label:"Casa",value:o.houseId,onChange:ae=>Le("houseId",ae),options:[{value:"",label:"Selecione uma casa"},...He],disabled:M,error:h.houseId,required:!0}),j&&s.jsxs("div",{className:"house-info-display",children:[s.jsxs("div",{className:"info-row",children:[s.jsx("span",{className:"info-label",children:"Endereo:"}),s.jsxs("span",{className:"info-value",children:[j.address.street,","," ",j.address.number," -"," ",j.address.city,"/",j.address.state]})]}),j.ownerId&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"info-divider"}),s.jsx("div",{className:"info-subtitle",children:"Proprietrio"}),s.jsxs("div",{className:"info-row",children:[s.jsx("span",{className:"info-label",children:"Nome:"}),s.jsx("span",{className:"info-value",children:j.ownerName})]}),s.jsxs("div",{className:"info-row",children:[s.jsx("span",{className:"info-label",children:"Telefone:"}),s.jsx("span",{className:"info-value",children:j.ownerPhone})]})]})]})]}),s.jsxs("div",{className:"form-section",children:[s.jsx("h3",{className:"section-title",children:"Colaborador Responsvel"}),s.jsx(Jt,{label:"Vendedor/Colaborador",value:o.employeeId||"",onChange:ae=>Le("employeeId",ae),options:[{value:"",label:"Selecione um vendedor/colaborador"},...ke],disabled:M,error:h.employeeId,required:!0}),Q&&s.jsxs("div",{className:"employee-info-display",children:[s.jsxs("div",{className:"info-row",children:[s.jsx("span",{className:"info-label",children:"Nome:"}),s.jsx("span",{className:"info-value",children:Q.name})]}),s.jsxs("div",{className:"info-row",children:[s.jsx("span",{className:"info-label",children:"Comisso:"}),s.jsxs("span",{className:"info-value",children:[Q.rentalCommissionPercentage,"%"]})]})]})]}),s.jsxs("div",{className:"form-section",children:[s.jsx("h3",{className:"section-title",children:"Informaes de Estadia"}),s.jsxs("div",{className:"form-row",children:[s.jsx(Ae,{label:"Data de Check-in",type:"date",value:_e(o.checkInDate),onChange:ae=>Le("checkInDate",Y(ae)),disabled:M,error:h.checkInDate}),s.jsx(Ae,{label:"Data de Check-out",type:"date",value:_e(o.checkOutDate),onChange:ae=>Le("checkOutDate",Y(ae)),disabled:M,error:h.checkOutDate})]}),s.jsxs("div",{className:"calculated-value",children:[s.jsx("span",{className:"calc-label",children:"Nmero de Pernoites:"}),s.jsxs("span",{className:"calc-value",children:[S.numberOfNights," noites"]})]}),s.jsx(Ae,{label:"Nmero de Hspedes",type:"number",value:String(o.numberOfGuests),onChange:ae=>Le("numberOfGuests",parseInt(ae)||1),disabled:M,error:h.numberOfGuests})]}),s.jsxs("div",{className:"form-section",children:[s.jsx("h3",{className:"section-title",children:"Valores Financeiros"}),s.jsx(Ae,{label:"Valor do Contrato",value:String(Math.round(o.contractValue*100)),onChange:ae=>{const Be=Ur(ae,"currency");Le("contractValue",Be)},placeholder:"R$ 0,00",disabled:M,error:h.contractValue,mask:"currency",returnUnmasked:!0}),s.jsx(Ae,{label:"Desconto",value:String(Math.round((o.discount||0)*100)),onChange:ae=>{const Be=Ur(ae,"currency");Le("discount",Be)},placeholder:"R$ 0,00",disabled:M,mask:"currency",returnUnmasked:!0}),s.jsxs("div",{className:"calculated-value",children:[s.jsx("span",{className:"calc-label",children:"Valor Lquido:"}),s.jsx("span",{className:"calc-value highlight",children:ee(S.netValue)})]}),s.jsxs("div",{className:"calculated-value",children:[s.jsx("span",{className:"calc-label",children:"Comisso de Venda (10%):"}),s.jsx("span",{className:"calc-value",children:ee(S.salesCommission)})]}),s.jsx(Ae,{label:"Valor da Governanta",value:String(Math.round((o.housekeeperValue||0)*100)),onChange:ae=>{const Be=Ur(ae,"currency");Le("housekeeperValue",Be)},placeholder:"R$ 0,00",disabled:M,mask:"currency",returnUnmasked:!0}),s.jsx(Ae,{label:"Valor do Concierge",value:String(Math.round((o.conciergeValue||0)*100)),onChange:ae=>{const Be=Ur(ae,"currency");Le("conciergeValue",Be)},placeholder:"R$ 0,00",disabled:M,mask:"currency",returnUnmasked:!0})]}),s.jsxs("div",{className:"form-section full-width",children:[s.jsx("h3",{className:"section-title",children:"Vendas Adicionais (Comisses de Fornecedores)"}),s.jsxs("div",{className:"additional-sales-grid",children:[s.jsx(Ae,{label:"Supermercado",value:String(Math.round((o.additionalSales?.supermarket||0)*100)),onChange:ae=>{const Be=Ur(ae,"currency");Je("supermarket",Be)},placeholder:"R$ 0,00",disabled:M,mask:"currency",returnUnmasked:!0}),s.jsx(Ae,{label:"Pescados",value:String(Math.round((o.additionalSales?.seafood||0)*100)),onChange:ae=>{const Be=Ur(ae,"currency");Je("seafood",Be)},placeholder:"R$ 0,00",disabled:M,mask:"currency",returnUnmasked:!0}),s.jsx(Ae,{label:"Pescados/Carne",value:String(Math.round((o.additionalSales?.seafoodMeat||0)*100)),onChange:ae=>{const Be=Ur(ae,"currency");Je("seafoodMeat",Be)},placeholder:"R$ 0,00",disabled:M,mask:"currency",returnUnmasked:!0}),s.jsx(Ae,{label:"Transfer",value:String(Math.round((o.additionalSales?.transfer||0)*100)),onChange:ae=>{const Be=Ur(ae,"currency");Je("transfer",Be)},placeholder:"R$ 0,00",disabled:M,mask:"currency",returnUnmasked:!0}),s.jsx(Ae,{label:"Hortalias",value:String(Math.round((o.additionalSales?.vegetables||0)*100)),onChange:ae=>{const Be=Ur(ae,"currency");Je("vegetables",Be)},placeholder:"R$ 0,00",disabled:M,mask:"currency",returnUnmasked:!0}),s.jsx(Ae,{label:"Cocos",value:String(Math.round((o.additionalSales?.coconuts||0)*100)),onChange:ae=>{const Be=Ur(ae,"currency");Je("coconuts",Be)},placeholder:"R$ 0,00",disabled:M,mask:"currency",returnUnmasked:!0})]}),s.jsxs("div",{className:"calculated-value",children:[s.jsx("span",{className:"calc-label",children:"Total de Vendas Adicionais:"}),s.jsx("span",{className:"calc-value",children:ee(S.totalAdditionalSales)})]})]}),s.jsxs("div",{className:"form-section full-width totals-section",children:[s.jsx("h3",{className:"section-title",children:"Resumo Financeiro"}),s.jsxs("div",{className:"totals-grid",children:[s.jsxs("div",{className:"total-card",children:[s.jsx("span",{className:"total-label",children:"Total de Faturamento"}),s.jsx("span",{className:"total-value primary",children:ee(S.totalRevenue)})]}),s.jsxs("div",{className:"total-card",children:[s.jsx("span",{className:"total-label",children:"Margem de Contribuio"}),s.jsx("span",{className:"total-value success",children:ee(S.contributionMargin)})]})]})]})]}),s.jsxs("div",{className:"modal-actions",children:[s.jsx(Ye,{type:"button",onClick:e,className:"cancel-btn",children:M?"Fechar":"Cancelar"}),!M&&s.jsx(Ye,{type:"submit",disabled:d,className:"save-btn",children:d?"Salvando...":A?"Salvar Alteraes":"Criar Venda"})]})]})})},GP=({stats:t})=>{const e=a=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(a),r=[{title:"Total de Vendas",value:t.total,icon:x1,color:"blue",description:"Nmero total de contratos",format:"number"},{title:"Faturamento Total",value:t.totalRevenue,icon:Un,color:"green",description:"Receita total gerada",format:"currency"},{title:"Ticket Mdio",value:t.averageTicket,icon:gn,color:"purple",description:"Valor mdio por venda",format:"currency"},{title:"Margem de Contribuio",value:t.totalMargin,icon:vr,color:"cyan",description:"Margem total aps custos",format:"currency"},{title:"Vendas Confirmadas",value:t.confirmed,icon:Dn,color:"success",description:"Contratos confirmados",format:"number"},{title:"Vendas Pendentes",value:t.pending,icon:$h,color:"yellow",description:"Aguardando confirmao",format:"number"},{title:"Vendas Concludas",value:t.completed,icon:Dn,color:"green",description:"Contratos finalizados",format:"number"},{title:"Total de Comisses",value:t.totalCommissions,icon:iP,color:"orange",description:"Comisses pagas",format:"currency"}],n=(a,o)=>o==="currency"?e(a):a;return s.jsx("div",{className:"sale-stats",children:s.jsx("div",{className:"stats-grid",children:r.map(a=>{const o=a.icon;return s.jsxs("div",{className:`stat-card stat-card-${a.color}`,children:[s.jsx("div",{className:"stat-icon",children:s.jsx(o,{size:24})}),s.jsxs("div",{className:"stat-content",children:[s.jsx("div",{className:"stat-value",children:n(a.value,a.format)}),s.jsx("div",{className:"stat-title",children:a.title}),s.jsx("div",{className:"stat-description",children:a.description})]})]},a.title)})})})},$P=()=>{const[t,e]=B.useState([]),[r,n]=B.useState(!0),[a,o]=B.useState(!1),[c,d]=B.useState(null),[m,h]=B.useState("create"),[p,v]=B.useState({}),[y,w]=B.useState({total:0,totalRevenue:0,pending:0,confirmed:0,cancelled:0,completed:0,averageTicket:0,totalCommissions:0,totalMargin:0}),{showError:N,showSuccess:E,showWarning:T}=$r(),j=async()=>{try{n(!0);const D=await zr.getAll(p);e(D)}catch(D){const we=D instanceof Error?D.message:"Erro ao carregar vendas";N("Erro ao carregar vendas",we)}finally{n(!1)}},O=async()=>{try{const D=await zr.getStats();w(D)}catch(D){const we=D instanceof Error?D.message:"Erro ao carregar estatsticas";T("Estatsticas indisponveis",we)}},P=B.useMemo(()=>{let D=[...t];if(p.search){const we=p.search.toLowerCase();D=D.filter(Me=>Me.code.toLowerCase().includes(we)||Me.clientName.toLowerCase().includes(we)||Me.houseName.toLowerCase().includes(we)||Me.clientCpf.includes(we))}return p.company&&(D=D.filter(we=>we.company===p.company)),p.status&&(D=D.filter(we=>we.status===p.status)),p.saleOrigin&&(D=D.filter(we=>we.saleOrigin===p.saleOrigin)),p.dateRange&&(D=D.filter(we=>we.checkInDate>=p.dateRange.start&&we.checkInDate<=p.dateRange.end)),D},[t,p]);B.useEffect(()=>{j(),O()},[]),B.useEffect(()=>{Object.keys(p).length>0&&j()},[p]);const z=()=>{d(null),h("create"),o(!0)},Q=D=>{d(D),h("edit"),o(!0)},U=D=>{d(D),h("view"),o(!0)},C=async D=>{if(confirm("Tem certeza que deseja excluir esta venda?"))try{await zr.delete(D),e(t.filter(we=>we.id!==D)),O(),E("Venda excluda","A venda foi excluda com sucesso.")}catch(we){const Me=we instanceof Error?we.message:"Erro ao excluir venda";N("Erro ao excluir venda",Me)}},k=()=>{o(!1),d(null)},S=D=>{j(),O(),k(),E(D==="create"?"Venda criada":"Venda atualizada",D==="create"?"A venda foi registrada com sucesso.":"As informaes da venda foram atualizadas.")},F=D=>{v(D)},M=()=>{v({})},A=async D=>{try{n(!0),await Gm.createNFe({saleId:D.id,company:D.company}),E("NF-e criada",`NF-e criada com sucesso para a venda ${D.code}. Verifique no mdulo de NFe.`)}catch(we){const Me=we instanceof Error?we.message:"Erro ao criar NF-e";N("Erro ao criar NF-e",Me)}finally{n(!1)}};return r&&t.length===0?s.jsx(yr,{text:"Carregando vendas...",fullScreen:!0}):s.jsxs("div",{className:"sales-management",children:[s.jsx("div",{className:"sales-header",children:s.jsxs("div",{className:"sales-header-content",children:[s.jsxs("div",{className:"sales-header-left",children:[s.jsx("div",{className:"sales-header-icon",children:s.jsx(x1,{})}),s.jsxs("div",{className:"sales-header-text",children:[s.jsx("h1",{className:"sales-header-title",children:"Gesto de Vendas e Contratos"}),s.jsx("p",{className:"sales-header-subtitle",children:"Gerencie vendas, contratos e desempenho comercial"})]})]}),s.jsx(Ye,{onClick:z,className:"create-sale-btn",children:"+ Nova Venda"})]})}),s.jsx(GP,{stats:y}),s.jsx("div",{className:"sales-management-content",children:s.jsx(HP,{sales:P,loading:r,onEdit:Q,onView:U,onDelete:C,onCreateNFe:A,filters:p,onFiltersChange:F,onClearFilters:M})}),s.jsx(qP,{isOpen:a,onClose:k,onSave:S,sale:c,mode:m})]})},WP=({onFilterChange:t,onExport:e})=>{const[r,n]=B.useState([]),[a,o]=B.useState({startDate:"",endDate:"",company:"all",houseId:"",reportType:"summary",groupBy:"month",demographicType:"house"});B.useEffect(()=>{c()},[]);const c=async()=>{try{const p=await os.getAll();n(p)}catch(p){console.error("Erro ao carregar casas:",p)}},d=(p,v)=>{const y={...a,[p]:v};o(y),t(y)},m=()=>{const p={startDate:"",endDate:"",company:"all",houseId:"",reportType:"summary",groupBy:"month",demographicType:"house"};o(p),t(p)},h=()=>{switch(a.reportType){case"summary":return"Exportar Resumo";case"revenue-by-house":return"Exportar Receitas";case"cash-flow":return"Exportar Fluxo de Caixa";case"contracts":return"Exportar Contratos";case"breakdown":return"Exportar Breakdown";case"demographic":return"Exportar Demogrfico";case"comparative":return"Exportar Comparativo";case"tax":return"Exportar Impostos";default:return"Exportar Excel"}};return s.jsxs("div",{className:"financial-filters",children:[s.jsxs("div",{className:"filters-header",children:[s.jsx("h3",{children:"Filtros de Relatrio"}),s.jsxs("div",{className:"filters-actions",children:[s.jsx("button",{className:"btn-clear-filters",onClick:m,title:"Limpar filtros",children:"Limpar Filtros"}),s.jsxs("button",{className:"btn-export-excel",onClick:()=>e(a.reportType),title:"Exportar para Excel",children:[s.jsx(v1,{size:18})," ",h()]})]})]}),s.jsxs("div",{className:"filters-grid",children:[s.jsxs("div",{className:"filter-group",children:[s.jsx("label",{htmlFor:"reportType",children:"Tipo de Relatrio"}),s.jsxs("select",{id:"reportType",value:a.reportType,onChange:p=>d("reportType",p.target.value),children:[s.jsx("option",{value:"summary",children:"Resumo Geral"}),s.jsx("option",{value:"revenue-by-house",children:"Receitas por Casa"}),s.jsx("option",{value:"cash-flow",children:"Fluxo de Caixa"}),s.jsx("option",{value:"contracts",children:"Contratos Ativos/Concludos"}),s.jsx("option",{value:"breakdown",children:"Breakdown de Receitas"}),s.jsx("option",{value:"demographic",children:"Anlise Demogrfica"}),s.jsx("option",{value:"comparative",children:"Comparativo entre Perodos"}),s.jsx("option",{value:"tax",children:"Impostos por Empresa"})]})]}),s.jsxs("div",{className:"filter-group",children:[s.jsx("label",{htmlFor:"startDate",children:"Data Incio"}),s.jsx("input",{id:"startDate",type:"date",value:a.startDate,onChange:p=>d("startDate",p.target.value)})]}),s.jsxs("div",{className:"filter-group",children:[s.jsx("label",{htmlFor:"endDate",children:"Data Fim"}),s.jsx("input",{id:"endDate",type:"date",value:a.endDate,onChange:p=>d("endDate",p.target.value)})]}),s.jsxs("div",{className:"filter-group",children:[s.jsx("label",{htmlFor:"company",children:"Empresa"}),s.jsxs("select",{id:"company",value:a.company,onChange:p=>d("company",p.target.value),children:[s.jsx("option",{value:"all",children:"Todas"}),s.jsx("option",{value:"exclusive",children:"Exclusive Imveis"}),s.jsx("option",{value:"giogio",children:"Gio Gio Temporadas"}),s.jsx("option",{value:"direta",children:"Venda Direta"})]})]}),(a.reportType==="revenue-by-house"||a.reportType==="summary")&&s.jsxs("div",{className:"filter-group",children:[s.jsx("label",{htmlFor:"houseId",children:"Casa Especfica (opcional)"}),s.jsxs("select",{id:"houseId",value:a.houseId,onChange:p=>d("houseId",p.target.value),children:[s.jsx("option",{value:"",children:"Todas as casas"}),r.map(p=>s.jsx("option",{value:p.id,children:p.houseName},p.id))]})]}),a.reportType==="cash-flow"&&s.jsxs("div",{className:"filter-group",children:[s.jsx("label",{htmlFor:"groupBy",children:"Agrupar por"}),s.jsxs("select",{id:"groupBy",value:a.groupBy,onChange:p=>d("groupBy",p.target.value),children:[s.jsx("option",{value:"day",children:"Dia"}),s.jsx("option",{value:"month",children:"Ms"}),s.jsx("option",{value:"quarter",children:"Trimestre"}),s.jsx("option",{value:"year",children:"Ano"})]})]}),a.reportType==="demographic"&&s.jsxs("div",{className:"filter-group",children:[s.jsx("label",{htmlFor:"demographicType",children:"Analisar por"}),s.jsxs("select",{id:"demographicType",value:a.demographicType,onChange:p=>d("demographicType",p.target.value),children:[s.jsx("option",{value:"house",children:"Casa"}),s.jsx("option",{value:"gender",children:"Gnero"}),s.jsx("option",{value:"location",children:"Localidade"}),s.jsx("option",{value:"origin",children:"Origem da Venda"})]})]})]}),a.reportType==="comparative"&&s.jsx("div",{className:"comparative-notice",children:s.jsxs("p",{children:[s.jsx("strong",{children:"Relatrio Comparativo:"})," Ser comparado o perodo selecionado com o perodo anterior de mesma durao."]})})]})},YP=({data:t})=>{const e=n=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(n),r=n=>`${n.toFixed(2)}%`;return s.jsxs("div",{className:"financial-summary",children:[s.jsx("h2",{children:"Resumo Financeiro"}),s.jsxs("div",{className:"summary-cards",children:[s.jsxs("div",{className:"summary-card main-card",children:[s.jsx("div",{className:"card-icon",children:s.jsx(Un,{size:40,style:{color:"#667eea"}})}),s.jsxs("div",{className:"card-content",children:[s.jsx("h3",{children:"Receita Total"}),s.jsx("p",{className:"card-value",children:e(t.totalRevenue)})]})]}),s.jsxs("div",{className:"summary-card expense-card",children:[s.jsx("div",{className:"card-icon",children:s.jsx(Jn,{size:40,style:{color:"#667eea"}})}),s.jsxs("div",{className:"card-content",children:[s.jsx("h3",{children:"Despesas Totais"}),s.jsx("p",{className:"card-value",children:e(t.totalExpenses)})]})]}),s.jsxs("div",{className:"summary-card profit-card",children:[s.jsx("div",{className:"card-icon",children:s.jsx(vr,{size:40,style:{color:"#667eea"}})}),s.jsxs("div",{className:"card-content",children:[s.jsx("h3",{children:"Lucro Lquido"}),s.jsx("p",{className:"card-value profit",children:e(t.netProfit)})]})]}),s.jsxs("div",{className:"summary-card margin-card",children:[s.jsx("div",{className:"card-icon",children:s.jsx(xu,{size:40,style:{color:"#667eea"}})}),s.jsxs("div",{className:"card-content",children:[s.jsx("h3",{children:"Margem de Lucro"}),s.jsx("p",{className:"card-value",children:r(t.profitMargin)})]})]})]}),s.jsxs("div",{className:"revenue-breakdown",children:[s.jsx("h3",{children:"Breakdown de Receitas (Trs Fontes)"}),s.jsxs("div",{className:"breakdown-grid",children:[s.jsxs("div",{className:"breakdown-item",children:[s.jsxs("div",{className:"breakdown-header",children:[s.jsx("span",{className:"breakdown-icon",children:s.jsx(jn,{size:28,style:{color:"#667eea"}})}),s.jsx("h4",{children:"Dirias"})]}),s.jsx("p",{className:"breakdown-value",children:e(t.dailyRatesRevenue)}),s.jsxs("p",{className:"breakdown-percentage",children:[(t.dailyRatesRevenue/t.totalRevenue*100).toFixed(1),"% do total"]})]}),s.jsxs("div",{className:"breakdown-item",children:[s.jsxs("div",{className:"breakdown-header",children:[s.jsx("span",{className:"breakdown-icon",children:s.jsx(Is,{size:28})}),s.jsx("h4",{children:"Concierge"})]}),s.jsx("p",{className:"breakdown-value",children:e(t.conciergeRevenue)}),s.jsxs("p",{className:"breakdown-percentage",children:[(t.conciergeRevenue/t.totalRevenue*100).toFixed(1),"% do total"]})]}),s.jsxs("div",{className:"breakdown-item",children:[s.jsxs("div",{className:"breakdown-header",children:[s.jsx("span",{className:"breakdown-icon",children:s.jsx(Hr,{size:28})}),s.jsx("h4",{children:"Comisses Fornecedores"})]}),s.jsx("p",{className:"breakdown-value",children:e(t.suppliersCommissionRevenue)}),s.jsxs("p",{className:"breakdown-percentage",children:[(t.suppliersCommissionRevenue/t.totalRevenue*100).toFixed(1),"% do total"]})]})]})]}),s.jsxs("div",{className:"additional-metrics",children:[s.jsxs("div",{className:"metric-item",children:[s.jsx("span",{className:"metric-label",children:"Nmero de Vendas"}),s.jsx("span",{className:"metric-value",children:t.numberOfSales})]}),s.jsxs("div",{className:"metric-item",children:[s.jsx("span",{className:"metric-label",children:"Ticket Mdio"}),s.jsx("span",{className:"metric-value",children:e(t.averageTicket)})]})]})]})},KP=({data:t})=>{const e=a=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(a),n=t.reduce((a,o)=>({dailyRatesRevenue:a.dailyRatesRevenue+o.dailyRatesRevenue,conciergeRevenue:a.conciergeRevenue+o.conciergeRevenue,suppliersCommission:a.suppliersCommission+o.suppliersCommission,grossRevenue:a.grossRevenue+o.grossRevenue,expenses:a.expenses+o.expenses,netRevenue:a.netRevenue+o.netRevenue,numberOfSales:a.numberOfSales+o.numberOfSales,numberOfNights:a.numberOfNights+o.numberOfNights}),{dailyRatesRevenue:0,conciergeRevenue:0,suppliersCommission:0,grossRevenue:0,expenses:0,netRevenue:0,numberOfSales:0,numberOfNights:0});return t.length===0?s.jsxs("div",{className:"revenue-by-house-report",children:[s.jsx("h2",{children:"Receitas e Despesas por Casa"}),s.jsx("div",{className:"no-data",children:s.jsx("p",{children:"Nenhum dado encontrado para o perodo selecionado."})})]}):s.jsxs("div",{className:"revenue-by-house-report",children:[s.jsx("h2",{children:"Receitas e Despesas por Casa"}),s.jsx("p",{className:"report-subtitle",children:"Anlise detalhada das trs fontes de receita por propriedade"}),s.jsx("div",{className:"table-container",children:s.jsxs("table",{className:"revenue-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Casa"}),s.jsx("th",{children:"Vendas"}),s.jsx("th",{children:"Noites"}),s.jsx("th",{children:"Dirias"}),s.jsx("th",{children:"Concierge"}),s.jsx("th",{children:"Comisses"}),s.jsx("th",{children:"Receita Bruta"}),s.jsx("th",{children:"Despesas"}),s.jsx("th",{children:"Receita Lquida"})]})}),s.jsx("tbody",{children:t.map(a=>s.jsxs("tr",{children:[s.jsx("td",{children:s.jsxs("div",{className:"house-cell",children:[s.jsx("strong",{children:a.houseName}),s.jsx("small",{children:a.houseAddress})]})}),s.jsx("td",{className:"text-center",children:a.numberOfSales}),s.jsx("td",{className:"text-center",children:a.numberOfNights}),s.jsx("td",{className:"text-right revenue-daily",children:e(a.dailyRatesRevenue)}),s.jsx("td",{className:"text-right revenue-concierge",children:e(a.conciergeRevenue)}),s.jsx("td",{className:"text-right revenue-suppliers",children:e(a.suppliersCommission)}),s.jsx("td",{className:"text-right gross-revenue",children:e(a.grossRevenue)}),s.jsx("td",{className:"text-right expenses",children:e(a.expenses)}),s.jsx("td",{className:"text-right net-revenue",children:e(a.netRevenue)})]},a.houseId))}),s.jsx("tfoot",{children:s.jsxs("tr",{className:"totals-row",children:[s.jsx("td",{children:s.jsx("strong",{children:"TOTAL GERAL"})}),s.jsx("td",{className:"text-center",children:s.jsx("strong",{children:n.numberOfSales})}),s.jsx("td",{className:"text-center",children:s.jsx("strong",{children:n.numberOfNights})}),s.jsx("td",{className:"text-right",children:s.jsx("strong",{children:e(n.dailyRatesRevenue)})}),s.jsx("td",{className:"text-right",children:s.jsx("strong",{children:e(n.conciergeRevenue)})}),s.jsx("td",{className:"text-right",children:s.jsx("strong",{children:e(n.suppliersCommission)})}),s.jsx("td",{className:"text-right",children:s.jsx("strong",{children:e(n.grossRevenue)})}),s.jsx("td",{className:"text-right",children:s.jsx("strong",{children:e(n.expenses)})}),s.jsx("td",{className:"text-right",children:s.jsx("strong",{children:e(n.netRevenue)})})]})})]})}),s.jsxs("div",{className:"revenue-sources-legend",children:[s.jsx("h3",{children:"Trs Fontes de Receita"}),s.jsxs("div",{className:"legend-items",children:[s.jsxs("div",{className:"legend-item",children:[s.jsx("span",{className:"legend-color daily"}),s.jsxs("div",{children:[s.jsx("strong",{children:"Dirias"}),s.jsx("p",{children:"Valor lquido das dirias (aps descontos)"})]})]}),s.jsxs("div",{className:"legend-item",children:[s.jsx("span",{className:"legend-color concierge"}),s.jsxs("div",{children:[s.jsx("strong",{children:"Concierge"}),s.jsx("p",{children:"Servios de concierge prestados"})]})]}),s.jsxs("div",{className:"legend-item",children:[s.jsx("span",{className:"legend-color suppliers"}),s.jsxs("div",{children:[s.jsx("strong",{children:"Comisses Fornecedores"}),s.jsx("p",{children:"Comisses de mercado, frutos do mar, transfer, verduras, cocos, etc."})]})]})]})]})]})},XP=({data:t})=>{const e=a=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(a),r=a=>a>0?"positive":a<0?"negative":"neutral";if(t.length===0)return s.jsxs("div",{className:"cash-flow-report",children:[s.jsx("h2",{children:"Fluxo de Caixa"}),s.jsx("div",{className:"no-data",children:s.jsx("p",{children:"Nenhum dado encontrado para o perodo selecionado."})})]});const n=t[t.length-1]?.accumulatedBalance||0;return s.jsxs("div",{className:"cash-flow-report",children:[s.jsxs("div",{className:"report-header",children:[s.jsxs("div",{children:[s.jsx("h2",{children:"Fluxo de Caixa"}),s.jsx("p",{className:"report-subtitle",children:"Entradas e sadas financeiras por perodo"})]}),s.jsxs("div",{className:"final-balance-card",children:[s.jsx("span",{className:"balance-label",children:"Saldo Final"}),s.jsx("span",{className:`balance-value ${r(n)}`,children:e(n)})]})]}),s.jsx("div",{className:"table-container",children:s.jsxs("table",{className:"cash-flow-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Perodo"}),s.jsx("th",{children:"Entradas"}),s.jsx("th",{children:"Sadas"}),s.jsx("th",{children:"Saldo do Perodo"}),s.jsx("th",{children:"Saldo Acumulado"})]})}),s.jsx("tbody",{children:t.map((a,o)=>s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx("strong",{children:a.period})}),s.jsx("td",{className:"cash-in",children:e(a.cashIn)}),s.jsx("td",{className:"cash-out",children:e(a.cashOut)}),s.jsx("td",{className:`balance ${r(a.balance)}`,children:e(a.balance)}),s.jsx("td",{className:`accumulated ${r(a.accumulatedBalance)}`,children:e(a.accumulatedBalance)})]},o))})]})}),s.jsxs("div",{className:"cash-flow-summary",children:[s.jsxs("div",{className:"summary-item in",children:[s.jsx("div",{className:"summary-icon",children:s.jsx(vr,{size:40})}),s.jsxs("div",{className:"summary-content",children:[s.jsx("span",{className:"summary-label",children:"Total de Entradas"}),s.jsx("span",{className:"summary-value",children:e(t.reduce((a,o)=>a+o.cashIn,0))})]})]}),s.jsxs("div",{className:"summary-item out",children:[s.jsx("div",{className:"summary-icon",children:s.jsx(Jn,{size:40})}),s.jsxs("div",{className:"summary-content",children:[s.jsx("span",{className:"summary-label",children:"Total de Sadas"}),s.jsx("span",{className:"summary-value",children:e(t.reduce((a,o)=>a+o.cashOut,0))})]})]}),s.jsxs("div",{className:"summary-item balance",children:[s.jsx("div",{className:"summary-icon",children:s.jsx(Un,{size:40})}),s.jsxs("div",{className:"summary-content",children:[s.jsx("span",{className:"summary-label",children:"Saldo Total"}),s.jsx("span",{className:`summary-value ${r(t.reduce((a,o)=>a+o.balance,0))}`,children:e(t.reduce((a,o)=>a+o.balance,0))})]})]})]})]})},QP=({data:t})=>{const e=a=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(a),r=t.active.count+t.completed.count+t.pending.count,n=t.active.totalRevenue+t.completed.totalRevenue+t.pending.totalRevenue;return s.jsxs("div",{className:"contracts-report",children:[s.jsx("h2",{children:"Relatrio de Contratos"}),s.jsx("p",{className:"report-subtitle",children:"Anlise de contratos ativos, concludos, pendentes e cancelados"}),s.jsxs("div",{className:"contracts-grid",children:[s.jsxs("div",{className:"contract-card active",children:[s.jsxs("div",{className:"card-header",children:[s.jsx("span",{className:"card-icon",children:s.jsx(Dn,{size:28})}),s.jsx("h3",{children:"Ativos/Confirmados"})]}),s.jsxs("div",{className:"card-body",children:[s.jsxs("div",{className:"metric",children:[s.jsx("span",{className:"metric-label",children:"Quantidade"}),s.jsx("span",{className:"metric-value",children:t.active.count})]}),s.jsxs("div",{className:"metric",children:[s.jsx("span",{className:"metric-label",children:"Receita Total"}),s.jsx("span",{className:"metric-value",children:e(t.active.totalRevenue)})]}),s.jsxs("div",{className:"metric",children:[s.jsx("span",{className:"metric-label",children:"Ticket Mdio"}),s.jsx("span",{className:"metric-value",children:e(t.active.averageValue)})]})]}),s.jsxs("div",{className:"card-footer",children:[s.jsx("div",{className:"percentage-bar",children:s.jsx("div",{className:"percentage-fill active-fill",style:{width:`${r>0?t.active.count/r*100:0}%`}})}),s.jsxs("span",{className:"percentage-text",children:[r>0?(t.active.count/r*100).toFixed(1):0,"% do total"]})]})]}),s.jsxs("div",{className:"contract-card completed",children:[s.jsxs("div",{className:"card-header",children:[s.jsx("span",{className:"card-icon",children:s.jsx(QF,{size:28})}),s.jsx("h3",{children:"Concludos"})]}),s.jsxs("div",{className:"card-body",children:[s.jsxs("div",{className:"metric",children:[s.jsx("span",{className:"metric-label",children:"Quantidade"}),s.jsx("span",{className:"metric-value",children:t.completed.count})]}),s.jsxs("div",{className:"metric",children:[s.jsx("span",{className:"metric-label",children:"Receita Total"}),s.jsx("span",{className:"metric-value",children:e(t.completed.totalRevenue)})]}),s.jsxs("div",{className:"metric",children:[s.jsx("span",{className:"metric-label",children:"Ticket Mdio"}),s.jsx("span",{className:"metric-value",children:e(t.completed.averageValue)})]})]}),s.jsxs("div",{className:"card-footer",children:[s.jsx("div",{className:"percentage-bar",children:s.jsx("div",{className:"percentage-fill completed-fill",style:{width:`${r>0?t.completed.count/r*100:0}%`}})}),s.jsxs("span",{className:"percentage-text",children:[r>0?(t.completed.count/r*100).toFixed(1):0,"% do total"]})]})]}),s.jsxs("div",{className:"contract-card pending",children:[s.jsxs("div",{className:"card-header",children:[s.jsx("span",{className:"card-icon",children:s.jsx($h,{size:28})}),s.jsx("h3",{children:"Pendentes"})]}),s.jsxs("div",{className:"card-body",children:[s.jsxs("div",{className:"metric",children:[s.jsx("span",{className:"metric-label",children:"Quantidade"}),s.jsx("span",{className:"metric-value",children:t.pending.count})]}),s.jsxs("div",{className:"metric",children:[s.jsx("span",{className:"metric-label",children:"Receita Potencial"}),s.jsx("span",{className:"metric-value",children:e(t.pending.totalRevenue)})]})]}),s.jsxs("div",{className:"card-footer",children:[s.jsx("div",{className:"percentage-bar",children:s.jsx("div",{className:"percentage-fill pending-fill",style:{width:`${r>0?t.pending.count/r*100:0}%`}})}),s.jsxs("span",{className:"percentage-text",children:[r>0?(t.pending.count/r*100).toFixed(1):0,"% do total"]})]})]}),s.jsxs("div",{className:"contract-card cancelled",children:[s.jsxs("div",{className:"card-header",children:[s.jsx("span",{className:"card-icon",children:s.jsx(y1,{size:28})}),s.jsx("h3",{children:"Cancelados"})]}),s.jsxs("div",{className:"card-body",children:[s.jsxs("div",{className:"metric",children:[s.jsx("span",{className:"metric-label",children:"Quantidade"}),s.jsx("span",{className:"metric-value",children:t.cancelled.count})]}),s.jsxs("div",{className:"metric",children:[s.jsx("span",{className:"metric-label",children:"Receita Perdida"}),s.jsx("span",{className:"metric-value",children:e(t.cancelled.lostRevenue)})]})]})]})]}),s.jsxs("div",{className:"contracts-summary",children:[s.jsx("h3",{children:"Resumo Geral"}),s.jsxs("div",{className:"summary-grid",children:[s.jsxs("div",{className:"summary-item",children:[s.jsx("span",{className:"summary-label",children:"Total de Contratos"}),s.jsx("span",{className:"summary-value",children:r})]}),s.jsxs("div",{className:"summary-item",children:[s.jsx("span",{className:"summary-label",children:"Receita Total (Efetiva)"}),s.jsx("span",{className:"summary-value",children:e(n)})]}),s.jsxs("div",{className:"summary-item",children:[s.jsx("span",{className:"summary-label",children:"Taxa de Cancelamento"}),s.jsxs("span",{className:"summary-value",children:[r+t.cancelled.count>0?(t.cancelled.count/(r+t.cancelled.count)*100).toFixed(1):0,"%"]})]}),s.jsxs("div",{className:"summary-item",children:[s.jsx("span",{className:"summary-label",children:"Taxa de Concluso"}),s.jsxs("span",{className:"summary-value",children:[r>0?(t.completed.count/r*100).toFixed(1):0,"%"]})]})]})]})]})},JP=({data:t,type:e})=>{const r=d=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(d),n=()=>({house:"Casa",gender:"Gnero",location:"Localidade",origin:"Origem da Venda"})[e],a=()=>({house:s.jsx(jn,{size:24}),gender:s.jsx(Hr,{size:24}),location:s.jsx(nP,{size:24}),origin:s.jsx(gn,{size:24})})[e];if(t.length===0)return s.jsxs("div",{className:"demographic-report",children:[s.jsxs("h2",{children:["Anlise Demogrfica - ",n()]}),s.jsx("div",{className:"no-data",children:s.jsx("p",{children:"Nenhum dado encontrado para o perodo selecionado."})})]});const o=t.reduce((d,m)=>d+m.totalRevenue,0),c=t.reduce((d,m)=>d+m.numberOfSales,0);return s.jsxs("div",{className:"demographic-report",children:[s.jsxs("div",{className:"report-header",children:[s.jsxs("div",{children:[s.jsxs("h2",{children:[a()," Anlise Demogrfica - ",n()]}),s.jsxs("p",{className:"report-subtitle",children:["Vendas e receitas segmentadas por ",n().toLowerCase()]})]}),s.jsxs("div",{className:"totals-card",children:[s.jsxs("div",{className:"total-item",children:[s.jsx("span",{className:"total-label",children:"Total de Vendas"}),s.jsx("span",{className:"total-value",children:c})]}),s.jsxs("div",{className:"total-item",children:[s.jsx("span",{className:"total-label",children:"Receita Total"}),s.jsx("span",{className:"total-value",children:r(o)})]})]})]}),s.jsx("div",{className:"table-container",children:s.jsxs("table",{className:"demographic-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:n()}),s.jsx("th",{children:"N de Vendas"}),s.jsx("th",{children:"Receita Total"}),s.jsx("th",{children:"% do Total"}),s.jsx("th",{children:"Ticket Mdio"}),s.jsx("th",{children:"Participao"})]})}),s.jsx("tbody",{children:t.map((d,m)=>s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx("strong",{children:d.value})}),s.jsx("td",{className:"text-center",children:d.numberOfSales}),s.jsx("td",{className:"text-right revenue",children:r(d.totalRevenue)}),s.jsxs("td",{className:"text-center percentage",children:[d.percentage.toFixed(1),"%"]}),s.jsx("td",{className:"text-right",children:r(d.averageTicket)}),s.jsx("td",{children:s.jsx("div",{className:"participation-bar",children:s.jsx("div",{className:"participation-fill",style:{width:`${d.percentage}%`}})})})]},m))})]})}),s.jsxs("div",{className:"highlights",children:[s.jsx("h3",{children:"Destaques"}),s.jsxs("div",{className:"highlights-grid",children:[t.length>0&&s.jsxs("div",{className:"highlight-card top-revenue",children:[s.jsx("div",{className:"highlight-icon",children:s.jsx(cj,{size:40})}),s.jsxs("div",{className:"highlight-content",children:[s.jsx("span",{className:"highlight-label",children:"Maior Receita"}),s.jsx("span",{className:"highlight-title",children:t[0].value}),s.jsx("span",{className:"highlight-value",children:r(t[0].totalRevenue)})]})]}),t.length>0&&s.jsxs("div",{className:"highlight-card top-volume",children:[s.jsx("div",{className:"highlight-icon",children:s.jsx(zs,{size:40})}),s.jsxs("div",{className:"highlight-content",children:[s.jsx("span",{className:"highlight-label",children:"Maior Volume"}),s.jsx("span",{className:"highlight-title",children:[...t].sort((d,m)=>m.numberOfSales-d.numberOfSales)[0].value}),s.jsxs("span",{className:"highlight-value",children:[[...t].sort((d,m)=>m.numberOfSales-d.numberOfSales)[0].numberOfSales," ","vendas"]})]})]}),t.length>0&&s.jsxs("div",{className:"highlight-card top-ticket",children:[s.jsx("div",{className:"highlight-icon",children:s.jsx(Un,{size:40})}),s.jsxs("div",{className:"highlight-content",children:[s.jsx("span",{className:"highlight-label",children:"Maior Ticket Mdio"}),s.jsx("span",{className:"highlight-title",children:[...t].sort((d,m)=>m.averageTicket-d.averageTicket)[0].value}),s.jsx("span",{className:"highlight-value",children:r([...t].sort((d,m)=>m.averageTicket-d.averageTicket)[0].averageTicket)})]})]})]})]})]})},ZP=({data:t})=>{const e=c=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(c),r=c=>`${c>0?"+":""}${c.toFixed(1)}%`,n=c=>c==="up"?s.jsx(vr,{size:16}):c==="down"?s.jsx(Jn,{size:16}):s.jsx(cx,{size:16}),a=c=>c==="up"?"trend-up":c==="down"?"trend-down":"trend-neutral",o=[{label:"Total de Vendas",key:"totalSales",format:c=>c.toString()},{label:"Receita Total",key:"totalRevenue",format:e},{label:"Receita Dirias",key:"dailyRates",format:e},{label:"Receita Concierge",key:"concierge",format:e},{label:"Comisses Fornecedores",key:"suppliersCommission",format:e},{label:"Ticket Mdio",key:"averageTicket",format:e},{label:"Noites Vendidas",key:"numberOfNights",format:c=>c.toString()}];return s.jsxs("div",{className:"comparative-report",children:[s.jsxs("h2",{children:[s.jsx(zs,{size:28,style:{verticalAlign:"middle",marginRight:"0.5rem"}}),"Relatrio Comparativo entre Perodos"]}),s.jsx("p",{className:"report-subtitle",children:"Anlise comparativa das mtricas entre dois perodos"}),s.jsxs("div",{className:"periods-header",children:[s.jsxs("div",{className:"period-card period1",children:[s.jsx("span",{className:"period-label",children:"Perodo 1"}),s.jsx("span",{className:"period-value",children:t.period1.label})]}),s.jsx("div",{className:"versus",children:"VS"}),s.jsxs("div",{className:"period-card period2",children:[s.jsx("span",{className:"period-label",children:"Perodo 2"}),s.jsx("span",{className:"period-value",children:t.period2.label})]})]}),s.jsx("div",{className:"table-container",children:s.jsxs("table",{className:"comparative-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Mtrica"}),s.jsx("th",{children:t.period1.label}),s.jsx("th",{children:t.period2.label}),s.jsx("th",{children:"Variao"}),s.jsx("th",{children:"Variao %"}),s.jsx("th",{children:"Tendncia"})]})}),s.jsx("tbody",{children:o.map(c=>{const d=t.comparison[c.key],m=t.period1.metrics[c.key],h=t.period2.metrics[c.key];return s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx("strong",{children:c.label})}),s.jsx("td",{className:"value-cell",children:c.format(m)}),s.jsx("td",{className:"value-cell",children:c.format(h)}),s.jsx("td",{className:`change-cell ${a(d.trend)}`,children:c.key==="totalSales"||c.key==="numberOfNights"?d.absoluteChange>0?`+${d.absoluteChange}`:d.absoluteChange.toString():e(d.absoluteChange)}),s.jsx("td",{className:`percentage-cell ${a(d.trend)}`,children:r(d.percentageChange)}),s.jsx("td",{className:"trend-cell",children:s.jsxs("span",{className:`trend-badge ${a(d.trend)}`,children:[n(d.trend)," ",d.trend==="up"?"Crescimento":d.trend==="down"?"Queda":"Estvel"]})})]},c.key)})})]})}),s.jsxs("div",{className:"revenue-sources-comparison",children:[s.jsx("h3",{children:"Comparao das Trs Fontes de Receita"}),s.jsxs("div",{className:"sources-grid",children:[s.jsxs("div",{className:"source-item",children:[s.jsxs("div",{className:"source-header",children:[s.jsx("span",{className:"source-icon",children:s.jsx(jn,{size:28})}),s.jsx("h4",{children:"Dirias"})]}),s.jsxs("div",{className:"source-values",children:[s.jsxs("div",{className:"source-period",children:[s.jsx("span",{className:"period-label",children:"Perodo 1"}),s.jsx("span",{className:"period-value",children:e(t.period1.metrics.dailyRates)})]}),s.jsxs("div",{className:"source-period",children:[s.jsx("span",{className:"period-label",children:"Perodo 2"}),s.jsx("span",{className:"period-value",children:e(t.period2.metrics.dailyRates)})]})]}),s.jsx("div",{className:`source-change ${a(t.comparison.dailyRates.trend)}`,children:r(t.comparison.dailyRates.percentageChange)})]}),s.jsxs("div",{className:"source-item",children:[s.jsxs("div",{className:"source-header",children:[s.jsx("span",{className:"source-icon",children:s.jsx(Is,{size:28})}),s.jsx("h4",{children:"Concierge"})]}),s.jsxs("div",{className:"source-values",children:[s.jsxs("div",{className:"source-period",children:[s.jsx("span",{className:"period-label",children:"Perodo 1"}),s.jsx("span",{className:"period-value",children:e(t.period1.metrics.concierge)})]}),s.jsxs("div",{className:"source-period",children:[s.jsx("span",{className:"period-label",children:"Perodo 2"}),s.jsx("span",{className:"period-value",children:e(t.period2.metrics.concierge)})]})]}),s.jsx("div",{className:`source-change ${a(t.comparison.concierge.trend)}`,children:r(t.comparison.concierge.percentageChange)})]}),s.jsxs("div",{className:"source-item",children:[s.jsxs("div",{className:"source-header",children:[s.jsx("span",{className:"source-icon",children:s.jsx(Hr,{size:28})}),s.jsx("h4",{children:"Comisses"})]}),s.jsxs("div",{className:"source-values",children:[s.jsxs("div",{className:"source-period",children:[s.jsx("span",{className:"period-label",children:"Perodo 1"}),s.jsx("span",{className:"period-value",children:e(t.period1.metrics.suppliersCommission)})]}),s.jsxs("div",{className:"source-period",children:[s.jsx("span",{className:"period-label",children:"Perodo 2"}),s.jsx("span",{className:"period-value",children:e(t.period2.metrics.suppliersCommission)})]})]}),s.jsx("div",{className:`source-change ${a(t.comparison.suppliersCommission.trend)}`,children:r(t.comparison.suppliersCommission.percentageChange)})]})]})]})]})},eL=({data:t})=>{const e=c=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(c),r=c=>`${c.toFixed(2)}%`,n=t.reduce((c,d)=>c+d.grossRevenue,0),a=t.reduce((c,d)=>c+d.taxAmount,0),o=t.reduce((c,d)=>c+d.netRevenue,0);return s.jsxs("div",{className:"tax-report",children:[s.jsxs("h2",{children:[s.jsx(Un,{size:28,style:{verticalAlign:"middle",marginRight:"0.5rem"}}),"Relatrio de Impostos por Empresa"]}),s.jsx("p",{className:"report-subtitle",children:"Anlise de impostos pagos e receita lquida por empresa"}),s.jsx("div",{className:"companies-grid",children:t.map((c,d)=>s.jsxs("div",{className:"company-card",children:[s.jsxs("div",{className:"company-header",children:[s.jsx("h3",{children:c.companyName}),s.jsx("span",{className:"company-period",children:c.period})]}),s.jsxs("div",{className:"company-metrics",children:[s.jsxs("div",{className:"metric-row",children:[s.jsx("span",{className:"metric-label",children:"Receita Bruta"}),s.jsx("span",{className:"metric-value gross",children:e(c.grossRevenue)})]}),s.jsxs("div",{className:"metric-row",children:[s.jsx("span",{className:"metric-label",children:"Receita Tributvel"}),s.jsx("span",{className:"metric-value",children:e(c.taxableRevenue)})]}),s.jsxs("div",{className:"metric-row",children:[s.jsx("span",{className:"metric-label",children:"Alquota"}),s.jsx("span",{className:"metric-value tax-rate",children:r(c.taxRate)})]}),s.jsxs("div",{className:"metric-row highlight",children:[s.jsx("span",{className:"metric-label",children:"Valor do Imposto"}),s.jsx("span",{className:"metric-value tax",children:e(c.taxAmount)})]}),s.jsxs("div",{className:"metric-row highlight",children:[s.jsx("span",{className:"metric-label",children:"Receita Lquida"}),s.jsx("span",{className:"metric-value net",children:e(c.netRevenue)})]})]}),s.jsxs("div",{className:"tax-visualization",children:[s.jsxs("div",{className:"tax-bar",children:[s.jsx("div",{className:"tax-portion",style:{width:`${c.taxAmount/c.grossRevenue*100}%`},title:`Imposto: ${r(c.taxAmount/c.grossRevenue*100)}`}),s.jsx("div",{className:"net-portion",style:{width:`${c.netRevenue/c.grossRevenue*100}%`},title:`Lquido: ${r(c.netRevenue/c.grossRevenue*100)}`})]}),s.jsxs("div",{className:"tax-legend",children:[s.jsxs("span",{className:"legend-item",children:[s.jsx("span",{className:"legend-color tax-color"}),"Imposto"]}),s.jsxs("span",{className:"legend-item",children:[s.jsx("span",{className:"legend-color net-color"}),"Lquido"]})]})]})]},d))}),s.jsxs("div",{className:"tax-summary",children:[s.jsx("h3",{children:"Resumo Consolidado"}),s.jsxs("div",{className:"summary-grid",children:[s.jsxs("div",{className:"summary-card",children:[s.jsx("div",{className:"summary-icon",children:s.jsx(Un,{size:32})}),s.jsxs("div",{className:"summary-content",children:[s.jsx("span",{className:"summary-label",children:"Receita Bruta Total"}),s.jsx("span",{className:"summary-value",children:e(n)})]})]}),s.jsxs("div",{className:"summary-card",children:[s.jsx("div",{className:"summary-icon",children:s.jsx(ps,{size:32})}),s.jsxs("div",{className:"summary-content",children:[s.jsx("span",{className:"summary-label",children:"Total de Impostos Pagos"}),s.jsx("span",{className:"summary-value tax",children:e(a)})]})]}),s.jsxs("div",{className:"summary-card",children:[s.jsx("div",{className:"summary-icon",children:s.jsx(Un,{size:32})}),s.jsxs("div",{className:"summary-content",children:[s.jsx("span",{className:"summary-label",children:"Receita Lquida Total"}),s.jsx("span",{className:"summary-value net",children:e(o)})]})]}),s.jsxs("div",{className:"summary-card",children:[s.jsx("div",{className:"summary-icon",children:s.jsx(xu,{size:32})}),s.jsxs("div",{className:"summary-content",children:[s.jsx("span",{className:"summary-label",children:"Carga Tributria Mdia"}),s.jsx("span",{className:"summary-value",children:r(n>0?a/n*100:0)})]})]})]})]}),s.jsxs("div",{className:"tax-notes",children:[s.jsxs("h4",{children:[s.jsx(Ul,{size:20,style:{verticalAlign:"middle",marginRight:"0.5rem"}}),"Observaes"]}),s.jsxs("ul",{children:[s.jsx("li",{children:"Os valores de impostos so calculados com base na alquota configurada para cada empresa"}),s.jsx("li",{children:"A alquota padro  de 6% (Simples Nacional), mas pode ser ajustada no cdigo conforme necessrio"}),s.jsx("li",{children:"Valores consideram apenas vendas no canceladas no perodo"}),s.jsx("li",{children:"Para relatrios fiscais oficiais, consulte sempre um contador certificado"})]})]})]})},tL={exclusive:6,giogio:6,direta:6},rL={exclusive:"Exclusive Imveis",giogio:"Gio Gio Temporadas",direta:"Venda Direta"},mi=(t,e,r)=>!e&&!r?t:t.filter(n=>{const a=n.checkInDate;return!(e&&a<e||r&&a>r)}),fo=(t,e)=>!e||e==="all"?t:t.filter(r=>r.company===e),nL=(t,e)=>{const r=new Map;return t.forEach(n=>{let a;const o=n.checkInDate;switch(e){case"day":a=o.toISOString().split("T")[0];break;case"month":a=`${o.getFullYear()}-${String(o.getMonth()+1).padStart(2,"0")}`;break;case"quarter":{const c=Math.floor(o.getMonth()/3)+1;a=`${o.getFullYear()}-Q${c}`;break}case"year":a=o.getFullYear().toString();break;default:a=o.toISOString().split("T")[0]}r.has(a)||r.set(a,[]),r.get(a).push(n)}),r},aL=(t,e)=>{if(e==="day"){const[r,n,a]=t.split("-");return`${a}/${n}/${r}`}if(e==="month"){const[r,n]=t.split("-");return`${["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"][parseInt(n)-1]}/${r}`}return t},mo={async getRevenueByHouse(t){try{let e=await zr.getAll();e=mi(e,t?.startDate,t?.endDate),e=fo(e,t?.company),t?.houseId&&(e=e.filter(a=>a.houseId===t.houseId)),e=e.filter(a=>a.status!=="cancelled");const r=new Map;e.forEach(a=>{r.has(a.houseId)||r.set(a.houseId,[]),r.get(a.houseId).push(a)});const n=[];return r.forEach((a,o)=>{const c=a.reduce((w,N)=>w+N.netValue,0),d=a.reduce((w,N)=>w+N.conciergeValue,0),m=a.reduce((w,N)=>w+N.totalAdditionalSales,0),h=a.reduce((w,N)=>w+N.housekeeperValue+N.salesCommission,0),p=a.reduce((w,N)=>w+N.numberOfNights,0),v=c+d+m,y=v-h;n.push({houseId:o,houseName:a[0].houseName,houseAddress:a[0].houseAddress,dailyRatesRevenue:c,conciergeRevenue:d,suppliersCommission:m,grossRevenue:v,expenses:h,netRevenue:y,numberOfSales:a.length,numberOfNights:p})}),n.sort((a,o)=>o.netRevenue-a.netRevenue)}catch(e){throw console.error("Erro ao calcular receitas por casa:",e),new Error("Falha ao gerar relatrio de receitas por casa")}},async getCashFlow(t){try{let e=await zr.getAll();e=mi(e,t?.startDate,t?.endDate),e=fo(e,t?.company),e=e.filter(d=>d.status!=="cancelled");const r=t?.groupBy||"month",n=nL(e,r),a=[];let o=0;return Array.from(n.keys()).sort().forEach(d=>{const m=n.get(d),h=m.reduce((E,T)=>E+T.totalRevenue,0),p=m.reduce((E,T)=>E+T.housekeeperValue+T.salesCommission,0),v=h-p;o+=v;const[y,w]=d.split("-"),N=new Date(parseInt(y),parseInt(w)-1,1);a.push({period:aL(d,r),date:N,cashIn:h,cashOut:p,balance:v,accumulatedBalance:o})}),a}catch(e){throw console.error("Erro ao calcular fluxo de caixa:",e),new Error("Falha ao gerar relatrio de fluxo de caixa")}},async getContractsReport(t){try{let e=await zr.getAll();e=mi(e,t?.startDate,t?.endDate),e=fo(e,t?.company);const r=e.filter(d=>d.status==="confirmed"||d.status==="pending"),n=e.filter(d=>d.status==="completed"),a=e.filter(d=>d.status==="pending"),o=e.filter(d=>d.status==="cancelled"),c=d=>{const m=d.reduce((p,v)=>p+v.totalRevenue,0),h=d.length>0?m/d.length:0;return{count:d.length,totalRevenue:m,averageValue:h}};return{active:c(r),completed:c(n),pending:{count:a.length,totalRevenue:a.reduce((d,m)=>d+m.totalRevenue,0)},cancelled:{count:o.length,lostRevenue:o.reduce((d,m)=>d+m.totalRevenue,0)}}}catch(e){throw console.error("Erro ao gerar relatrio de contratos:",e),new Error("Falha ao gerar relatrio de contratos")}},async getRevenueBreakdown(t){try{let e=await zr.getAll();e=mi(e,t?.startDate,t?.endDate),e=fo(e,t?.company),e=e.filter(c=>c.status!=="cancelled");const r=e.reduce((c,d)=>c+d.netValue,0),n=e.reduce((c,d)=>c+d.conciergeValue,0),a=e.reduce((c,d)=>c+d.totalAdditionalSales,0),o=r+n+a;return{dailyRates:{total:r,percentage:o>0?r/o*100:0},concierge:{total:n,percentage:o>0?n/o*100:0},suppliersCommission:{total:a,percentage:o>0?a/o*100:0},totalRevenue:o}}catch(e){throw console.error("Erro ao calcular breakdown de receitas:",e),new Error("Falha ao gerar relatrio de receitas")}},async getDemographicReport(t,e){try{let r=await zr.getAll();r=mi(r,e?.startDate,e?.endDate),r=fo(r,e?.company),r=r.filter(c=>c.status!=="cancelled");const n=new Map;r.forEach(c=>{let d;switch(t){case"house":d=c.houseName;break;case"gender":d=c.clientGender||"No informado";break;case"location":d=c.houseAddress.split(" - ")[1]||"No informado";break;case"origin":d=c.saleOrigin;break;default:d="Outros"}n.has(d)||n.set(d,[]),n.get(d).push(c)});const a=r.reduce((c,d)=>c+d.totalRevenue,0),o=[];return n.forEach((c,d)=>{const m=c.reduce((h,p)=>h+p.totalRevenue,0);o.push({category:t,value:d,numberOfSales:c.length,totalRevenue:m,percentage:a>0?m/a*100:0,averageTicket:c.length>0?m/c.length:0})}),o.sort((c,d)=>d.totalRevenue-c.totalRevenue)}catch(r){throw console.error("Erro ao gerar relatrio demogrfico:",r),new Error("Falha ao gerar relatrio demogrfico")}},async getComparativeReport(t,e,r,n,a){try{const o=await zr.getAll();let c=mi(o,t,e),d=mi(o,r,n);c=fo(c,a),d=fo(d,a),c=c.filter(y=>y.status!=="cancelled"),d=d.filter(y=>y.status!=="cancelled");const m=y=>{const w=y.reduce((N,E)=>N+E.totalRevenue,0);return{totalSales:y.length,totalRevenue:w,dailyRates:y.reduce((N,E)=>N+E.netValue,0),concierge:y.reduce((N,E)=>N+E.conciergeValue,0),suppliersCommission:y.reduce((N,E)=>N+E.totalAdditionalSales,0),averageTicket:y.length>0?w/y.length:0,numberOfNights:y.reduce((N,E)=>N+E.numberOfNights,0)}},h={label:`${t.toLocaleDateString("pt-BR")} - ${e.toLocaleDateString("pt-BR")}`,startDate:t,endDate:e,metrics:m(c)},p={label:`${r.toLocaleDateString("pt-BR")} - ${n.toLocaleDateString("pt-BR")}`,startDate:r,endDate:n,metrics:m(d)},v=(y,w)=>{const N=w-y,E=y!==0?N/y*100:0,T=N>0?"up":N<0?"down":"neutral";return{absoluteChange:N,percentageChange:E,trend:T}};return{period1:h,period2:p,comparison:{totalSales:v(h.metrics.totalSales,p.metrics.totalSales),totalRevenue:v(h.metrics.totalRevenue,p.metrics.totalRevenue),dailyRates:v(h.metrics.dailyRates,p.metrics.dailyRates),concierge:v(h.metrics.concierge,p.metrics.concierge),suppliersCommission:v(h.metrics.suppliersCommission,p.metrics.suppliersCommission),averageTicket:v(h.metrics.averageTicket,p.metrics.averageTicket),numberOfNights:v(h.metrics.numberOfNights,p.metrics.numberOfNights)}}}catch(o){throw console.error("Erro ao gerar relatrio comparativo:",o),new Error("Falha ao gerar relatrio comparativo")}},async getTaxReport(t){try{const e=await zr.getAll();let r=mi(e,t?.startDate,t?.endDate);r=r.filter(o=>o.status!=="cancelled");const n=["exclusive","giogio","direta"],a=[];return n.forEach(o=>{const d=r.filter(v=>v.company===o).reduce((v,y)=>v+y.totalRevenue,0),m=tL[o],h=d*m/100,p=d-h;a.push({company:o,companyName:rL[o],period:t?.startDate&&t?.endDate?`${t.startDate.toLocaleDateString("pt-BR")} - ${t.endDate.toLocaleDateString("pt-BR")}`:"Todos os perodos",grossRevenue:d,taxableRevenue:d,taxRate:m,taxAmount:h,netRevenue:p})}),a}catch(e){throw console.error("Erro ao gerar relatrio de impostos:",e),new Error("Falha ao gerar relatrio de impostos")}},async getFinancialSummary(t){try{let e=await zr.getAll();e=mi(e,t?.startDate,t?.endDate),e=fo(e,t?.company),e=e.filter(c=>c.status!=="cancelled");const r=e.reduce((c,d)=>c+d.totalRevenue,0),n=e.reduce((c,d)=>c+d.housekeeperValue+d.salesCommission,0),a=r-n,o=r>0?a/r*100:0;return{totalRevenue:r,totalExpenses:n,netProfit:a,profitMargin:o,numberOfSales:e.length,averageTicket:e.length>0?r/e.length:0,dailyRatesRevenue:e.reduce((c,d)=>c+d.netValue,0),conciergeRevenue:e.reduce((c,d)=>c+d.conciergeValue,0),suppliersCommissionRevenue:e.reduce((c,d)=>c+d.totalAdditionalSales,0)}}catch(e){throw console.error("Erro ao calcular resumo financeiro:",e),new Error("Falha ao gerar resumo financeiro")}},formatCurrency(t){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t)},formatPercentage(t){return`${t.toFixed(2)}%`}};var g0={};g0.version="0.18.5";var fj=1252,sL=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],mj=function(t){sL.indexOf(t)!=-1&&(fj=t)};function iL(){mj(1252)}var bh=function(t){mj(t)};function oL(){bh(1200),iL()}var Tm=function(e){return String.fromCharCode(e)},wN=function(e){return String.fromCharCode(e)},v0,To="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Sh(t){for(var e="",r=0,n=0,a=0,o=0,c=0,d=0,m=0,h=0;h<t.length;)r=t.charCodeAt(h++),o=r>>2,n=t.charCodeAt(h++),c=(r&3)<<4|n>>4,a=t.charCodeAt(h++),d=(n&15)<<2|a>>6,m=a&63,isNaN(n)?d=m=64:isNaN(a)&&(m=64),e+=To.charAt(o)+To.charAt(c)+To.charAt(d)+To.charAt(m);return e}function Ri(t){var e="",r=0,n=0,a=0,o=0,c=0,d=0,m=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var h=0;h<t.length;)o=To.indexOf(t.charAt(h++)),c=To.indexOf(t.charAt(h++)),r=o<<2|c>>4,e+=String.fromCharCode(r),d=To.indexOf(t.charAt(h++)),n=(c&15)<<4|d>>2,d!==64&&(e+=String.fromCharCode(n)),m=To.indexOf(t.charAt(h++)),a=(d&3)<<6|m,m!==64&&(e+=String.fromCharCode(a));return e}var It=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),Oi=(function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,r){return r?new Buffer(e,r):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}})();function zl(t){return It?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function NN(t){return It?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var as=function(e){return It?Oi(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)&255})};function np(t){if(typeof ArrayBuffer>"u")return as(t);for(var e=new ArrayBuffer(t.length),r=new Uint8Array(e),n=0;n!=t.length;++n)r[n]=t.charCodeAt(n)&255;return e}function Kh(t){if(Array.isArray(t))return t.map(function(n){return String.fromCharCode(n)}).join("");for(var e=[],r=0;r<t.length;++r)e[r]=String.fromCharCode(t[r]);return e.join("")}function lL(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}var fn=It?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:Oi(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,r=0;for(e=0;e<t.length;++e)r+=t[e].length;var n=new Uint8Array(r),a=0;for(e=0,r=0;e<t.length;r+=a,++e)if(a=t[e].length,t[e]instanceof Uint8Array)n.set(t[e],r);else{if(typeof t[e]=="string")throw"wtf";n.set(new Uint8Array(t[e]),r)}return n}return[].concat.apply([],t.map(function(o){return Array.isArray(o)?o:[].slice.call(o)}))};function cL(t){for(var e=[],r=0,n=t.length+250,a=zl(t.length+255),o=0;o<t.length;++o){var c=t.charCodeAt(o);if(c<128)a[r++]=c;else if(c<2048)a[r++]=192|c>>6&31,a[r++]=128|c&63;else if(c>=55296&&c<57344){c=(c&1023)+64;var d=t.charCodeAt(++o)&1023;a[r++]=240|c>>8&7,a[r++]=128|c>>2&63,a[r++]=128|d>>6&15|(c&3)<<4,a[r++]=128|d&63}else a[r++]=224|c>>12&15,a[r++]=128|c>>6&63,a[r++]=128|c&63;r>n&&(e.push(a.slice(0,r)),r=0,a=zl(65535),n=65530)}return e.push(a.slice(0,r)),fn(e)}var oh=/\u0000/g,bm=/[\u0001-\u0006]/g;function ou(t){for(var e="",r=t.length-1;r>=0;)e+=t.charAt(r--);return e}function is(t,e){var r=""+t;return r.length>=e?r:gr("0",e-r.length)+r}function _1(t,e){var r=""+t;return r.length>=e?r:gr(" ",e-r.length)+r}function x0(t,e){var r=""+t;return r.length>=e?r:r+gr(" ",e-r.length)}function uL(t,e){var r=""+Math.round(t);return r.length>=e?r:gr("0",e-r.length)+r}function dL(t,e){var r=""+t;return r.length>=e?r:gr("0",e-r.length)+r}var TN=Math.pow(2,32);function Gc(t,e){if(t>TN||t<-TN)return uL(t,e);var r=Math.round(t);return dL(r,e)}function y0(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var bN=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],bv=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function hL(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var xr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},SN={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},fL={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function _0(t,e,r){for(var n=t<0?-1:1,a=t*n,o=0,c=1,d=0,m=1,h=0,p=0,v=Math.floor(a);h<e&&(v=Math.floor(a),d=v*c+o,p=v*h+m,!(a-v<5e-8));)a=1/(a-v),o=c,c=d,m=h,h=p;if(p>e&&(h>e?(p=m,d=o):(p=h,d=c)),!r)return[0,n*d,p];var y=Math.floor(n*d/p);return[y,n*d-y*p,p]}function Sm(t,e,r){if(t>2958465||t<0)return null;var n=t|0,a=Math.floor(86400*(t-n)),o=0,c=[],d={D:n,T:a,u:86400*(t-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(d.u)<1e-6&&(d.u=0),e&&e.date1904&&(n+=1462),d.u>.9999&&(d.u=0,++a==86400&&(d.T=a=0,++n,++d.D)),n===60)c=r?[1317,10,29]:[1900,2,29],o=3;else if(n===0)c=r?[1317,8,29]:[1900,1,0],o=6;else{n>60&&--n;var m=new Date(1900,0,1);m.setDate(m.getDate()+n-1),c=[m.getFullYear(),m.getMonth()+1,m.getDate()],o=m.getDay(),n<60&&(o=(o+6)%7),r&&(o=_L(m,c))}return d.y=c[0],d.m=c[1],d.d=c[2],d.S=a%60,a=Math.floor(a/60),d.M=a%60,a=Math.floor(a/60),d.H=a,d.q=o,d}var pj=new Date(1899,11,31,0,0,0),mL=pj.getTime(),pL=new Date(1900,2,1,0,0,0);function gj(t,e){var r=t.getTime();return e?r-=1461*24*60*60*1e3:t>=pL&&(r+=1440*60*1e3),(r-(mL+(t.getTimezoneOffset()-pj.getTimezoneOffset())*6e4))/(1440*60*1e3)}function E1(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function gL(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function vL(t){var e=t<0?12:11,r=E1(t.toFixed(12));return r.length<=e||(r=t.toPrecision(10),r.length<=e)?r:t.toExponential(5)}function xL(t){var e=E1(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function yL(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return e>=-4&&e<=-1?r=t.toPrecision(10+e):Math.abs(e)<=9?r=vL(t):e===10?r=t.toFixed(10).substr(0,12):r=xL(t),E1(gL(r.toUpperCase()))}function hx(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):yL(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return Uo(14,gj(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function _L(t,e){e[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function EL(t,e,r,n){var a="",o=0,c=0,d=r.y,m,h=0;switch(t){case 98:d=r.y+543;case 121:switch(e.length){case 1:case 2:m=d%100,h=2;break;default:m=d%1e4,h=4;break}break;case 109:switch(e.length){case 1:case 2:m=r.m,h=e.length;break;case 3:return bv[r.m-1][1];case 5:return bv[r.m-1][0];default:return bv[r.m-1][2]}break;case 100:switch(e.length){case 1:case 2:m=r.d,h=e.length;break;case 3:return bN[r.q][0];default:return bN[r.q][1]}break;case 104:switch(e.length){case 1:case 2:m=1+(r.H+11)%12,h=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:m=r.H,h=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:m=r.M,h=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return r.u===0&&(e=="s"||e=="ss")?is(r.S,e.length):(n>=2?c=n===3?1e3:100:c=n===1?10:1,o=Math.round(c*(r.S+r.u)),o>=60*c&&(o=0),e==="s"?o===0?"0":""+o/c:(a=is(o,2+n),e==="ss"?a.substr(0,2):"."+a.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":m=r.D*24+r.H;break;case"[m]":case"[mm]":m=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":m=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+e}h=e.length===3?1:2;break;case 101:m=d,h=1;break}var p=h>0?is(m,h):"";return p}function bo(t){var e=3;if(t.length<=e)return t;for(var r=t.length%e,n=t.substr(0,r);r!=t.length;r+=e)n+=(n.length>0?",":"")+t.substr(r,e);return n}var vj=/%/g;function wL(t,e,r){var n=e.replace(vj,""),a=e.length-n.length;return _i(t,n,r*Math.pow(10,2*a))+gr("%",a)}function NL(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return _i(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function xj(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+xj(t,-e);var a=t.indexOf(".");a===-1&&(a=t.indexOf("E"));var o=Math.floor(Math.log(e)*Math.LOG10E)%a;if(o<0&&(o+=a),r=(e/Math.pow(10,o)).toPrecision(n+1+(a+o)%a),r.indexOf("e")===-1){var c=Math.floor(Math.log(e)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(c-r.length+o):r+="E+"+(c-o);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(d,m,h,p){return m+h+p.substr(0,(a+o)%a)+"."+p.substr(o)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var yj=/# (\?+)( ?)\/( ?)(\d+)/;function TL(t,e,r){var n=parseInt(t[4],10),a=Math.round(e*n),o=Math.floor(a/n),c=a-o*n,d=n;return r+(o===0?"":""+o)+" "+(c===0?gr(" ",t[1].length+1+t[4].length):_1(c,t[1].length)+t[2]+"/"+t[3]+is(d,t[4].length))}function bL(t,e,r){return r+(e===0?"":""+e)+gr(" ",t[1].length+2+t[4].length)}var _j=/^#*0*\.([0#]+)/,Ej=/\).*[0#]/,wj=/\(###\) ###\\?-####/;function Vn(t){for(var e="",r,n=0;n!=t.length;++n)switch(r=t.charCodeAt(n)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(r)}return e}function jN(t,e){var r=Math.pow(10,e);return""+Math.round(t*r)/r}function CN(t,e){var r=t-Math.floor(t),n=Math.pow(10,e);return e<(""+Math.round(r*n)).length?0:Math.round(r*n)}function SL(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function jL(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function Fa(t,e,r){if(t.charCodeAt(0)===40&&!e.match(Ej)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Fa("n",n,r):"("+Fa("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return NL(t,e,r);if(e.indexOf("%")!==-1)return wL(t,e,r);if(e.indexOf("E")!==-1)return xj(e,r);if(e.charCodeAt(0)===36)return"$"+Fa(t,e.substr(e.charAt(1)==" "?2:1),r);var a,o,c,d,m=Math.abs(r),h=r<0?"-":"";if(e.match(/^00+$/))return h+Gc(m,e.length);if(e.match(/^[#?]+$/))return a=Gc(r,0),a==="0"&&(a=""),a.length>e.length?a:Vn(e.substr(0,e.length-a.length))+a;if(o=e.match(yj))return TL(o,m,h);if(e.match(/^#+0+$/))return h+Gc(m,e.length-e.indexOf("0"));if(o=e.match(_j))return a=jN(r,o[1].length).replace(/^([^\.]+)$/,"$1."+Vn(o[1])).replace(/\.$/,"."+Vn(o[1])).replace(/\.(\d*)$/,function(N,E){return"."+E+gr("0",Vn(o[1]).length-E.length)}),e.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),o=e.match(/^(0*)\.(#*)$/))return h+jN(m,o[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,o[1].length?"0.":".");if(o=e.match(/^#{1,3},##0(\.?)$/))return h+bo(Gc(m,0));if(o=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Fa(t,e,-r):bo(""+(Math.floor(r)+SL(r,o[1].length)))+"."+is(CN(r,o[1].length),o[1].length);if(o=e.match(/^#,#*,#0/))return Fa(t,e.replace(/^#,#*,/,""),r);if(o=e.match(/^([0#]+)(\\?-([0#]+))+$/))return a=ou(Fa(t,e.replace(/[\\-]/g,""),r)),c=0,ou(ou(e.replace(/\\/g,"")).replace(/[0#]/g,function(N){return c<a.length?a.charAt(c++):N==="0"?"0":""}));if(e.match(wj))return a=Fa(t,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var p="";if(o=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return c=Math.min(o[4].length,7),d=_0(m,Math.pow(10,c)-1,!1),a=""+h,p=_i("n",o[1],d[1]),p.charAt(p.length-1)==" "&&(p=p.substr(0,p.length-1)+"0"),a+=p+o[2]+"/"+o[3],p=x0(d[2],c),p.length<o[4].length&&(p=Vn(o[4].substr(o[4].length-p.length))+p),a+=p,a;if(o=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return c=Math.min(Math.max(o[1].length,o[4].length),7),d=_0(m,Math.pow(10,c)-1,!0),h+(d[0]||(d[1]?"":"0"))+" "+(d[1]?_1(d[1],c)+o[2]+"/"+o[3]+x0(d[2],c):gr(" ",2*c+1+o[2].length+o[3].length));if(o=e.match(/^[#0?]+$/))return a=Gc(r,0),e.length<=a.length?a:Vn(e.substr(0,e.length-a.length))+a;if(o=e.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(o[2].length,10)).replace(/([^0])0+$/,"$1"),c=a.indexOf(".");var v=e.indexOf(".")-c,y=e.length-a.length-v;return Vn(e.substr(0,v)+a+e.substr(e.length-y))}if(o=e.match(/^00,000\.([#0]*0)$/))return c=CN(r,o[1].length),r<0?"-"+Fa(t,e,-r):bo(jL(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(N){return"00,"+(N.length<3?is(0,3-N.length):"")+N})+"."+is(c,o[1].length);switch(e){case"###,##0.00":return Fa(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var w=bo(Gc(m,0));return w!=="0"?h+w:"";case"###,###.00":return Fa(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Fa(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function CL(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return _i(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function AL(t,e,r){var n=e.replace(vj,""),a=e.length-n.length;return _i(t,n,r*Math.pow(10,2*a))+gr("%",a)}function Nj(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+Nj(t,-e);var a=t.indexOf(".");a===-1&&(a=t.indexOf("E"));var o=Math.floor(Math.log(e)*Math.LOG10E)%a;if(o<0&&(o+=a),r=(e/Math.pow(10,o)).toPrecision(n+1+(a+o)%a),!r.match(/[Ee]/)){var c=Math.floor(Math.log(e)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(c-r.length+o):r+="E+"+(c-o),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(d,m,h,p){return m+h+p.substr(0,(a+o)%a)+"."+p.substr(o)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function js(t,e,r){if(t.charCodeAt(0)===40&&!e.match(Ej)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?js("n",n,r):"("+js("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return CL(t,e,r);if(e.indexOf("%")!==-1)return AL(t,e,r);if(e.indexOf("E")!==-1)return Nj(e,r);if(e.charCodeAt(0)===36)return"$"+js(t,e.substr(e.charAt(1)==" "?2:1),r);var a,o,c,d,m=Math.abs(r),h=r<0?"-":"";if(e.match(/^00+$/))return h+is(m,e.length);if(e.match(/^[#?]+$/))return a=""+r,r===0&&(a=""),a.length>e.length?a:Vn(e.substr(0,e.length-a.length))+a;if(o=e.match(yj))return bL(o,m,h);if(e.match(/^#+0+$/))return h+is(m,e.length-e.indexOf("0"));if(o=e.match(_j))return a=(""+r).replace(/^([^\.]+)$/,"$1."+Vn(o[1])).replace(/\.$/,"."+Vn(o[1])),a=a.replace(/\.(\d*)$/,function(N,E){return"."+E+gr("0",Vn(o[1]).length-E.length)}),e.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),o=e.match(/^(0*)\.(#*)$/))return h+(""+m).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,o[1].length?"0.":".");if(o=e.match(/^#{1,3},##0(\.?)$/))return h+bo(""+m);if(o=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+js(t,e,-r):bo(""+r)+"."+gr("0",o[1].length);if(o=e.match(/^#,#*,#0/))return js(t,e.replace(/^#,#*,/,""),r);if(o=e.match(/^([0#]+)(\\?-([0#]+))+$/))return a=ou(js(t,e.replace(/[\\-]/g,""),r)),c=0,ou(ou(e.replace(/\\/g,"")).replace(/[0#]/g,function(N){return c<a.length?a.charAt(c++):N==="0"?"0":""}));if(e.match(wj))return a=js(t,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var p="";if(o=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return c=Math.min(o[4].length,7),d=_0(m,Math.pow(10,c)-1,!1),a=""+h,p=_i("n",o[1],d[1]),p.charAt(p.length-1)==" "&&(p=p.substr(0,p.length-1)+"0"),a+=p+o[2]+"/"+o[3],p=x0(d[2],c),p.length<o[4].length&&(p=Vn(o[4].substr(o[4].length-p.length))+p),a+=p,a;if(o=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return c=Math.min(Math.max(o[1].length,o[4].length),7),d=_0(m,Math.pow(10,c)-1,!0),h+(d[0]||(d[1]?"":"0"))+" "+(d[1]?_1(d[1],c)+o[2]+"/"+o[3]+x0(d[2],c):gr(" ",2*c+1+o[2].length+o[3].length));if(o=e.match(/^[#0?]+$/))return a=""+r,e.length<=a.length?a:Vn(e.substr(0,e.length-a.length))+a;if(o=e.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(o[2].length,10)).replace(/([^0])0+$/,"$1"),c=a.indexOf(".");var v=e.indexOf(".")-c,y=e.length-a.length-v;return Vn(e.substr(0,v)+a+e.substr(e.length-y))}if(o=e.match(/^00,000\.([#0]*0)$/))return r<0?"-"+js(t,e,-r):bo(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(N){return"00,"+(N.length<3?is(0,3-N.length):"")+N})+"."+is(0,o[1].length);switch(e){case"###,###":case"##,###":case"#,###":var w=bo(""+m);return w!=="0"?h+w:"";default:if(e.match(/\.[0#?]*$/))return js(t,e.slice(0,e.lastIndexOf(".")),r)+Vn(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function _i(t,e,r){return(r|0)===r?js(t,e,r):Fa(t,e,r)}function RL(t){for(var e=[],r=!1,n=0,a=0;n<t.length;++n)switch(t.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:e[e.length]=t.substr(a,n-a),a=n+1}if(e[e.length]=t.substr(a),r===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var Tj=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function bj(t){for(var e=0,r="",n="";e<t.length;)switch(r=t.charAt(e)){case"G":y0(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(n=r;t.charAt(e++)!=="]"&&e<t.length;)n+=t.charAt(e);if(n.match(Tj))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++e))>-1||r=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===r;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function DL(t,e,r,n){for(var a=[],o="",c=0,d="",m="t",h,p,v,y="H";c<t.length;)switch(d=t.charAt(c)){case"G":if(!y0(t,c))throw new Error("unrecognized character "+d+" in "+t);a[a.length]={t:"G",v:"General"},c+=7;break;case'"':for(o="";(v=t.charCodeAt(++c))!==34&&c<t.length;)o+=String.fromCharCode(v);a[a.length]={t:"t",v:o},++c;break;case"\\":var w=t.charAt(++c),N=w==="("||w===")"?w:"t";a[a.length]={t:N,v:w},++c;break;case"_":a[a.length]={t:"t",v:" "},c+=2;break;case"@":a[a.length]={t:"T",v:e},++c;break;case"B":case"b":if(t.charAt(c+1)==="1"||t.charAt(c+1)==="2"){if(h==null&&(h=Sm(e,r,t.charAt(c+1)==="2"),h==null))return"";a[a.length]={t:"X",v:t.substr(c,2)},m=d,c+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":d=d.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||h==null&&(h=Sm(e,r),h==null))return"";for(o=d;++c<t.length&&t.charAt(c).toLowerCase()===d;)o+=d;d==="m"&&m.toLowerCase()==="h"&&(d="M"),d==="h"&&(d=y),a[a.length]={t:d,v:o},m=d;break;case"A":case"a":case"":var E={t:d,v:d};if(h==null&&(h=Sm(e,r)),t.substr(c,3).toUpperCase()==="A/P"?(h!=null&&(E.v=h.H>=12?"P":"A"),E.t="T",y="h",c+=3):t.substr(c,5).toUpperCase()==="AM/PM"?(h!=null&&(E.v=h.H>=12?"PM":"AM"),E.t="T",c+=5,y="h"):t.substr(c,5).toUpperCase()==="/"?(h!=null&&(E.v=h.H>=12?"":""),E.t="T",c+=5,y="h"):(E.t="t",++c),h==null&&E.t==="T")return"";a[a.length]=E,m=d;break;case"[":for(o=d;t.charAt(c++)!=="]"&&c<t.length;)o+=t.charAt(c);if(o.slice(-1)!=="]")throw'unterminated "[" block: |'+o+"|";if(o.match(Tj)){if(h==null&&(h=Sm(e,r),h==null))return"";a[a.length]={t:"Z",v:o.toLowerCase()},m=o.charAt(1)}else o.indexOf("$")>-1&&(o=(o.match(/\$([^-\[\]]*)/)||[])[1]||"$",bj(t)||(a[a.length]={t:"t",v:o}));break;case".":if(h!=null){for(o=d;++c<t.length&&(d=t.charAt(c))==="0";)o+=d;a[a.length]={t:"s",v:o};break}case"0":case"#":for(o=d;++c<t.length&&"0#?.,E+-%".indexOf(d=t.charAt(c))>-1;)o+=d;a[a.length]={t:"n",v:o};break;case"?":for(o=d;t.charAt(++c)===d;)o+=d;a[a.length]={t:d,v:o},m=d;break;case"*":++c,(t.charAt(c)==" "||t.charAt(c)=="*")&&++c;break;case"(":case")":a[a.length]={t:n===1?"t":d,v:d},++c;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(o=d;c<t.length&&"0123456789".indexOf(t.charAt(++c))>-1;)o+=t.charAt(c);a[a.length]={t:"D",v:o};break;case" ":a[a.length]={t:d,v:d},++c;break;case"$":a[a.length]={t:"t",v:"$"},++c;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(d)===-1)throw new Error("unrecognized character "+d+" in "+t);a[a.length]={t:"t",v:d},++c;break}var T=0,j=0,O;for(c=a.length-1,m="t";c>=0;--c)switch(a[c].t){case"h":case"H":a[c].t=y,m="h",T<1&&(T=1);break;case"s":(O=a[c].v.match(/\.0+$/))&&(j=Math.max(j,O[0].length-1)),T<3&&(T=3);case"d":case"y":case"M":case"e":m=a[c].t;break;case"m":m==="s"&&(a[c].t="M",T<2&&(T=2));break;case"X":break;case"Z":T<1&&a[c].v.match(/[Hh]/)&&(T=1),T<2&&a[c].v.match(/[Mm]/)&&(T=2),T<3&&a[c].v.match(/[Ss]/)&&(T=3)}switch(T){case 0:break;case 1:h.u>=.5&&(h.u=0,++h.S),h.S>=60&&(h.S=0,++h.M),h.M>=60&&(h.M=0,++h.H);break;case 2:h.u>=.5&&(h.u=0,++h.S),h.S>=60&&(h.S=0,++h.M);break}var P="",z;for(c=0;c<a.length;++c)switch(a[c].t){case"t":case"T":case" ":case"D":break;case"X":a[c].v="",a[c].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[c].v=EL(a[c].t.charCodeAt(0),a[c].v,h,j),a[c].t="t";break;case"n":case"?":for(z=c+1;a[z]!=null&&((d=a[z].t)==="?"||d==="D"||(d===" "||d==="t")&&a[z+1]!=null&&(a[z+1].t==="?"||a[z+1].t==="t"&&a[z+1].v==="/")||a[c].t==="("&&(d===" "||d==="n"||d===")")||d==="t"&&(a[z].v==="/"||a[z].v===" "&&a[z+1]!=null&&a[z+1].t=="?"));)a[c].v+=a[z].v,a[z]={v:"",t:";"},++z;P+=a[c].v,c=z-1;break;case"G":a[c].t="t",a[c].v=hx(e,r);break}var Q="",U,C;if(P.length>0){P.charCodeAt(0)==40?(U=e<0&&P.charCodeAt(0)===45?-e:e,C=_i("n",P,U)):(U=e<0&&n>1?-e:e,C=_i("n",P,U),U<0&&a[0]&&a[0].t=="t"&&(C=C.substr(1),a[0].v="-"+a[0].v)),z=C.length-1;var k=a.length;for(c=0;c<a.length;++c)if(a[c]!=null&&a[c].t!="t"&&a[c].v.indexOf(".")>-1){k=c;break}var S=a.length;if(k===a.length&&C.indexOf("E")===-1){for(c=a.length-1;c>=0;--c)a[c]==null||"n?".indexOf(a[c].t)===-1||(z>=a[c].v.length-1?(z-=a[c].v.length,a[c].v=C.substr(z+1,a[c].v.length)):z<0?a[c].v="":(a[c].v=C.substr(0,z+1),z=-1),a[c].t="t",S=c);z>=0&&S<a.length&&(a[S].v=C.substr(0,z+1)+a[S].v)}else if(k!==a.length&&C.indexOf("E")===-1){for(z=C.indexOf(".")-1,c=k;c>=0;--c)if(!(a[c]==null||"n?".indexOf(a[c].t)===-1)){for(p=a[c].v.indexOf(".")>-1&&c===k?a[c].v.indexOf(".")-1:a[c].v.length-1,Q=a[c].v.substr(p+1);p>=0;--p)z>=0&&(a[c].v.charAt(p)==="0"||a[c].v.charAt(p)==="#")&&(Q=C.charAt(z--)+Q);a[c].v=Q,a[c].t="t",S=c}for(z>=0&&S<a.length&&(a[S].v=C.substr(0,z+1)+a[S].v),z=C.indexOf(".")+1,c=k;c<a.length;++c)if(!(a[c]==null||"n?(".indexOf(a[c].t)===-1&&c!==k)){for(p=a[c].v.indexOf(".")>-1&&c===k?a[c].v.indexOf(".")+1:0,Q=a[c].v.substr(0,p);p<a[c].v.length;++p)z<C.length&&(Q+=C.charAt(z++));a[c].v=Q,a[c].t="t",S=c}}}for(c=0;c<a.length;++c)a[c]!=null&&"n?".indexOf(a[c].t)>-1&&(U=n>1&&e<0&&c>0&&a[c-1].v==="-"?-e:e,a[c].v=_i(a[c].t,a[c].v,U),a[c].t="t");var F="";for(c=0;c!==a.length;++c)a[c]!=null&&(F+=a[c].v);return F}var AN=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function RN(t,e){if(e==null)return!1;var r=parseFloat(e[2]);switch(e[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function IL(t,e){var r=RL(t),n=r.length,a=r[n-1].indexOf("@");if(n<4&&a>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof e!="number")return[4,r.length===4||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var o=e>0?r[0]:e<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,o];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var c=r[0].match(AN),d=r[1].match(AN);return RN(e,c)?[n,r[0]]:RN(e,d)?[n,r[1]]:[n,r[c!=null&&d!=null?2:1]]}return[n,o]}function Uo(t,e,r){r==null&&(r={});var n="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?n=r.dateNF:n=t;break;case"number":t==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:xr)[t],n==null&&(n=r.table&&r.table[SN[t]]||xr[SN[t]]),n==null&&(n=fL[t]||"General");break}if(y0(n,0))return hx(e,r);e instanceof Date&&(e=gj(e,r.date1904));var a=IL(n,e);if(y0(a[1]))return hx(e,r);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return DL(a[1],e,r,a[0])}function Sj(t,e){if(typeof e!="number"){e=+e||-1;for(var r=0;r<392;++r){if(xr[r]==null){e<0&&(e=r);continue}if(xr[r]==t){e=r;break}}e<0&&(e=391)}return xr[e]=t,e}function ap(t){for(var e=0;e!=392;++e)t[e]!==void 0&&Sj(t[e],e)}function sp(){xr=hL()}var jj=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function kL(t){var e=typeof t=="number"?xr[t]:t;return e=e.replace(jj,"(\\d+)"),new RegExp("^"+e+"$")}function OL(t,e,r){var n=-1,a=-1,o=-1,c=-1,d=-1,m=-1;(e.match(jj)||[]).forEach(function(v,y){var w=parseInt(r[y+1],10);switch(v.toLowerCase().charAt(0)){case"y":n=w;break;case"d":o=w;break;case"h":c=w;break;case"s":m=w;break;case"m":c>=0?d=w:a=w;break}}),m>=0&&d==-1&&a>=0&&(d=a,a=-1);var h=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(o>=1?o:1)).slice(-2);h.length==7&&(h="0"+h),h.length==8&&(h="20"+h);var p=("00"+(c>=0?c:0)).slice(-2)+":"+("00"+(d>=0?d:0)).slice(-2)+":"+("00"+(m>=0?m:0)).slice(-2);return c==-1&&d==-1&&m==-1?h:n==-1&&a==-1&&o==-1?p:h+"T"+p}var ML=(function(){var t={};t.version="1.2.0";function e(){for(var C=0,k=new Array(256),S=0;S!=256;++S)C=S,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,k[S]=C;return typeof Int32Array<"u"?new Int32Array(k):k}var r=e();function n(C){var k=0,S=0,F=0,M=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(F=0;F!=256;++F)M[F]=C[F];for(F=0;F!=256;++F)for(S=C[F],k=256+F;k<4096;k+=256)S=M[k]=S>>>8^C[S&255];var A=[];for(F=1;F!=16;++F)A[F-1]=typeof Int32Array<"u"?M.subarray(F*256,F*256+256):M.slice(F*256,F*256+256);return A}var a=n(r),o=a[0],c=a[1],d=a[2],m=a[3],h=a[4],p=a[5],v=a[6],y=a[7],w=a[8],N=a[9],E=a[10],T=a[11],j=a[12],O=a[13],P=a[14];function z(C,k){for(var S=k^-1,F=0,M=C.length;F<M;)S=S>>>8^r[(S^C.charCodeAt(F++))&255];return~S}function Q(C,k){for(var S=k^-1,F=C.length-15,M=0;M<F;)S=P[C[M++]^S&255]^O[C[M++]^S>>8&255]^j[C[M++]^S>>16&255]^T[C[M++]^S>>>24]^E[C[M++]]^N[C[M++]]^w[C[M++]]^y[C[M++]]^v[C[M++]]^p[C[M++]]^h[C[M++]]^m[C[M++]]^d[C[M++]]^c[C[M++]]^o[C[M++]]^r[C[M++]];for(F+=15;M<F;)S=S>>>8^r[(S^C[M++])&255];return~S}function U(C,k){for(var S=k^-1,F=0,M=C.length,A=0,D=0;F<M;)A=C.charCodeAt(F++),A<128?S=S>>>8^r[(S^A)&255]:A<2048?(S=S>>>8^r[(S^(192|A>>6&31))&255],S=S>>>8^r[(S^(128|A&63))&255]):A>=55296&&A<57344?(A=(A&1023)+64,D=C.charCodeAt(F++)&1023,S=S>>>8^r[(S^(240|A>>8&7))&255],S=S>>>8^r[(S^(128|A>>2&63))&255],S=S>>>8^r[(S^(128|D>>6&15|(A&3)<<4))&255],S=S>>>8^r[(S^(128|D&63))&255]):(S=S>>>8^r[(S^(224|A>>12&15))&255],S=S>>>8^r[(S^(128|A>>6&63))&255],S=S>>>8^r[(S^(128|A&63))&255]);return~S}return t.table=r,t.bstr=z,t.buf=Q,t.str=U,t})(),Xt=(function(){var e={};e.version="1.2.1";function r(L,W){for(var q=L.split("/"),G=W.split("/"),K=0,X=0,ce=Math.min(q.length,G.length);K<ce;++K){if(X=q[K].length-G[K].length)return X;if(q[K]!=G[K])return q[K]<G[K]?-1:1}return q.length-G.length}function n(L){if(L.charAt(L.length-1)=="/")return L.slice(0,-1).indexOf("/")===-1?L:n(L.slice(0,-1));var W=L.lastIndexOf("/");return W===-1?L:L.slice(0,W+1)}function a(L){if(L.charAt(L.length-1)=="/")return a(L.slice(0,-1));var W=L.lastIndexOf("/");return W===-1?L:L.slice(W+1)}function o(L,W){typeof W=="string"&&(W=new Date(W));var q=W.getHours();q=q<<6|W.getMinutes(),q=q<<5|W.getSeconds()>>>1,L.write_shift(2,q);var G=W.getFullYear()-1980;G=G<<4|W.getMonth()+1,G=G<<5|W.getDate(),L.write_shift(2,G)}function c(L){var W=L.read_shift(2)&65535,q=L.read_shift(2)&65535,G=new Date,K=q&31;q>>>=5;var X=q&15;q>>>=4,G.setMilliseconds(0),G.setFullYear(q+1980),G.setMonth(X-1),G.setDate(K);var ce=W&31;W>>>=5;var xe=W&63;return W>>>=6,G.setHours(W),G.setMinutes(xe),G.setSeconds(ce<<1),G}function d(L){ga(L,0);for(var W={},q=0;L.l<=L.length-4;){var G=L.read_shift(2),K=L.read_shift(2),X=L.l+K,ce={};G===21589&&(q=L.read_shift(1),q&1&&(ce.mtime=L.read_shift(4)),K>5&&(q&2&&(ce.atime=L.read_shift(4)),q&4&&(ce.ctime=L.read_shift(4))),ce.mtime&&(ce.mt=new Date(ce.mtime*1e3))),L.l=X,W[G]=ce}return W}var m;function h(){return m||(m={})}function p(L,W){if(L[0]==80&&L[1]==75)return Ha(L,W);if((L[0]|32)==109&&(L[1]|32)==105)return Pu(L,W);if(L.length<512)throw new Error("CFB file size "+L.length+" < 512");var q=3,G=512,K=0,X=0,ce=0,xe=0,ie=0,he=[],fe=L.slice(0,512);ga(fe,0);var Ce=v(fe);switch(q=Ce[0],q){case 3:G=512;break;case 4:G=4096;break;case 0:if(Ce[1]==0)return Ha(L,W);default:throw new Error("Major Version: Expected 3 or 4 saw "+q)}G!==512&&(fe=L.slice(0,G),ga(fe,28));var Ie=L.slice(0,G);y(fe,q);var qe=fe.read_shift(4,"i");if(q===3&&qe!==0)throw new Error("# Directory Sectors: Expected 0 saw "+qe);fe.l+=4,ce=fe.read_shift(4,"i"),fe.l+=4,fe.chk("00100000","Mini Stream Cutoff Size: "),xe=fe.read_shift(4,"i"),K=fe.read_shift(4,"i"),ie=fe.read_shift(4,"i"),X=fe.read_shift(4,"i");for(var Re=-1,ze=0;ze<109&&(Re=fe.read_shift(4,"i"),!(Re<0));++ze)he[ze]=Re;var lt=w(L,G);T(ie,X,lt,G,he);var At=O(lt,ce,he,G);At[ce].name="!Directory",K>0&&xe!==D&&(At[xe].name="!MiniFAT"),At[he[0]].name="!FAT",At.fat_addrs=he,At.ssz=G;var Rt={},Ft=[],sa=[],ba=[];P(ce,At,lt,Ft,K,Rt,sa,xe),N(sa,ba,Ft),Ft.shift();var In={FileIndex:sa,FullPaths:ba};return W&&W.raw&&(In.raw={header:Ie,sectors:lt}),In}function v(L){if(L[L.l]==80&&L[L.l+1]==75)return[0,0];L.chk(we,"Header Signature: "),L.l+=16;var W=L.read_shift(2,"u");return[L.read_shift(2,"u"),W]}function y(L,W){var q=9;switch(L.l+=2,q=L.read_shift(2)){case 9:if(W!=3)throw new Error("Sector Shift: Expected 9 saw "+q);break;case 12:if(W!=4)throw new Error("Sector Shift: Expected 12 saw "+q);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+q)}L.chk("0600","Mini Sector Shift: "),L.chk("000000000000","Reserved: ")}function w(L,W){for(var q=Math.ceil(L.length/W)-1,G=[],K=1;K<q;++K)G[K-1]=L.slice(K*W,(K+1)*W);return G[q-1]=L.slice(q*W),G}function N(L,W,q){for(var G=0,K=0,X=0,ce=0,xe=0,ie=q.length,he=[],fe=[];G<ie;++G)he[G]=fe[G]=G,W[G]=q[G];for(;xe<fe.length;++xe)G=fe[xe],K=L[G].L,X=L[G].R,ce=L[G].C,he[G]===G&&(K!==-1&&he[K]!==K&&(he[G]=he[K]),X!==-1&&he[X]!==X&&(he[G]=he[X])),ce!==-1&&(he[ce]=G),K!==-1&&G!=he[G]&&(he[K]=he[G],fe.lastIndexOf(K)<xe&&fe.push(K)),X!==-1&&G!=he[G]&&(he[X]=he[G],fe.lastIndexOf(X)<xe&&fe.push(X));for(G=1;G<ie;++G)he[G]===G&&(X!==-1&&he[X]!==X?he[G]=he[X]:K!==-1&&he[K]!==K&&(he[G]=he[K]));for(G=1;G<ie;++G)if(L[G].type!==0){if(xe=G,xe!=he[xe])do xe=he[xe],W[G]=W[xe]+"/"+W[G];while(xe!==0&&he[xe]!==-1&&xe!=he[xe]);he[G]=-1}for(W[0]+="/",G=1;G<ie;++G)L[G].type!==2&&(W[G]+="/")}function E(L,W,q){for(var G=L.start,K=L.size,X=[],ce=G;q&&K>0&&ce>=0;)X.push(W.slice(ce*A,ce*A+A)),K-=A,ce=Al(q,ce*4);return X.length===0?ye(0):fn(X).slice(0,L.size)}function T(L,W,q,G,K){var X=D;if(L===D){if(W!==0)throw new Error("DIFAT chain shorter than expected")}else if(L!==-1){var ce=q[L],xe=(G>>>2)-1;if(!ce)return;for(var ie=0;ie<xe&&(X=Al(ce,ie*4))!==D;++ie)K.push(X);T(Al(ce,G-4),W-1,q,G,K)}}function j(L,W,q,G,K){var X=[],ce=[];K||(K=[]);var xe=G-1,ie=0,he=0;for(ie=W;ie>=0;){K[ie]=!0,X[X.length]=ie,ce.push(L[ie]);var fe=q[Math.floor(ie*4/G)];if(he=ie*4&xe,G<4+he)throw new Error("FAT boundary crossed: "+ie+" 4 "+G);if(!L[fe])break;ie=Al(L[fe],he)}return{nodes:X,data:LN([ce])}}function O(L,W,q,G){var K=L.length,X=[],ce=[],xe=[],ie=[],he=G-1,fe=0,Ce=0,Ie=0,qe=0;for(fe=0;fe<K;++fe)if(xe=[],Ie=fe+W,Ie>=K&&(Ie-=K),!ce[Ie]){ie=[];var Re=[];for(Ce=Ie;Ce>=0;){Re[Ce]=!0,ce[Ce]=!0,xe[xe.length]=Ce,ie.push(L[Ce]);var ze=q[Math.floor(Ce*4/G)];if(qe=Ce*4&he,G<4+qe)throw new Error("FAT boundary crossed: "+Ce+" 4 "+G);if(!L[ze]||(Ce=Al(L[ze],qe),Re[Ce]))break}X[Ie]={nodes:xe,data:LN([ie])}}return X}function P(L,W,q,G,K,X,ce,xe){for(var ie=0,he=G.length?2:0,fe=W[L].data,Ce=0,Ie=0,qe;Ce<fe.length;Ce+=128){var Re=fe.slice(Ce,Ce+128);ga(Re,64),Ie=Re.read_shift(2),qe=S1(Re,0,Ie-he),G.push(qe);var ze={name:qe,type:Re.read_shift(1),color:Re.read_shift(1),L:Re.read_shift(4,"i"),R:Re.read_shift(4,"i"),C:Re.read_shift(4,"i"),clsid:Re.read_shift(16),state:Re.read_shift(4,"i"),start:0,size:0},lt=Re.read_shift(2)+Re.read_shift(2)+Re.read_shift(2)+Re.read_shift(2);lt!==0&&(ze.ct=z(Re,Re.l-8));var At=Re.read_shift(2)+Re.read_shift(2)+Re.read_shift(2)+Re.read_shift(2);At!==0&&(ze.mt=z(Re,Re.l-8)),ze.start=Re.read_shift(4,"i"),ze.size=Re.read_shift(4,"i"),ze.size<0&&ze.start<0&&(ze.size=ze.type=0,ze.start=D,ze.name=""),ze.type===5?(ie=ze.start,K>0&&ie!==D&&(W[ie].name="!StreamData")):ze.size>=4096?(ze.storage="fat",W[ze.start]===void 0&&(W[ze.start]=j(q,ze.start,W.fat_addrs,W.ssz)),W[ze.start].name=ze.name,ze.content=W[ze.start].data.slice(0,ze.size)):(ze.storage="minifat",ze.size<0?ze.size=0:ie!==D&&ze.start!==D&&W[ie]&&(ze.content=E(ze,W[ie].data,(W[xe]||{}).data))),ze.content&&ga(ze.content,0),X[qe]=ze,ce.push(ze)}}function z(L,W){return new Date((xa(L,W+4)/1e7*Math.pow(2,32)+xa(L,W)/1e7-11644473600)*1e3)}function Q(L,W){return h(),p(m.readFileSync(L),W)}function U(L,W){var q=W&&W.type;switch(q||It&&Buffer.isBuffer(L)&&(q="buffer"),q||"base64"){case"file":return Q(L,W);case"base64":return p(as(Ri(L)),W);case"binary":return p(as(L),W)}return p(L,W)}function C(L,W){var q=W||{},G=q.root||"Root Entry";if(L.FullPaths||(L.FullPaths=[]),L.FileIndex||(L.FileIndex=[]),L.FullPaths.length!==L.FileIndex.length)throw new Error("inconsistent CFB structure");L.FullPaths.length===0&&(L.FullPaths[0]=G+"/",L.FileIndex[0]={name:G,type:5}),q.CLSID&&(L.FileIndex[0].clsid=q.CLSID),k(L)}function k(L){var W="Sh33tJ5";if(!Xt.find(L,"/"+W)){var q=ye(4);q[0]=55,q[1]=q[3]=50,q[2]=54,L.FileIndex.push({name:W,type:2,content:q,size:4,L:69,R:69,C:69}),L.FullPaths.push(L.FullPaths[0]+W),S(L)}}function S(L,W){C(L);for(var q=!1,G=!1,K=L.FullPaths.length-1;K>=0;--K){var X=L.FileIndex[K];switch(X.type){case 0:G?q=!0:(L.FileIndex.pop(),L.FullPaths.pop());break;case 1:case 2:case 5:G=!0,isNaN(X.R*X.L*X.C)&&(q=!0),X.R>-1&&X.L>-1&&X.R==X.L&&(q=!0);break;default:q=!0;break}}if(!(!q&&!W)){var ce=new Date(1987,1,19),xe=0,ie=Object.create?Object.create(null):{},he=[];for(K=0;K<L.FullPaths.length;++K)ie[L.FullPaths[K]]=!0,L.FileIndex[K].type!==0&&he.push([L.FullPaths[K],L.FileIndex[K]]);for(K=0;K<he.length;++K){var fe=n(he[K][0]);G=ie[fe],G||(he.push([fe,{name:a(fe).replace("/",""),type:1,clsid:ge,ct:ce,mt:ce,content:null}]),ie[fe]=!0)}for(he.sort(function(qe,Re){return r(qe[0],Re[0])}),L.FullPaths=[],L.FileIndex=[],K=0;K<he.length;++K)L.FullPaths[K]=he[K][0],L.FileIndex[K]=he[K][1];for(K=0;K<he.length;++K){var Ce=L.FileIndex[K],Ie=L.FullPaths[K];if(Ce.name=a(Ie).replace("/",""),Ce.L=Ce.R=Ce.C=-(Ce.color=1),Ce.size=Ce.content?Ce.content.length:0,Ce.start=0,Ce.clsid=Ce.clsid||ge,K===0)Ce.C=he.length>1?1:-1,Ce.size=0,Ce.type=5;else if(Ie.slice(-1)=="/"){for(xe=K+1;xe<he.length&&n(L.FullPaths[xe])!=Ie;++xe);for(Ce.C=xe>=he.length?-1:xe,xe=K+1;xe<he.length&&n(L.FullPaths[xe])!=n(Ie);++xe);Ce.R=xe>=he.length?-1:xe,Ce.type=1}else n(L.FullPaths[K+1]||"")==n(Ie)&&(Ce.R=K+1),Ce.type=2}}}function F(L,W){var q=W||{};if(q.fileType=="mad")return Ta(L,q);if(S(L),q.fileType==="zip")return cr(L,q);var G=(function(qe){for(var Re=0,ze=0,lt=0;lt<qe.FileIndex.length;++lt){var At=qe.FileIndex[lt];if(At.content){var Rt=At.content.length;Rt>0&&(Rt<4096?Re+=Rt+63>>6:ze+=Rt+511>>9)}}for(var Ft=qe.FullPaths.length+3>>2,sa=Re+7>>3,ba=Re+127>>7,In=sa+ze+Ft+ba,$n=In+127>>7,ys=$n<=109?0:Math.ceil(($n-109)/127);In+$n+ys+127>>7>$n;)ys=++$n<=109?0:Math.ceil(($n-109)/127);var ia=[1,ys,$n,ba,Ft,ze,Re,0];return qe.FileIndex[0].size=Re<<6,ia[7]=(qe.FileIndex[0].start=ia[0]+ia[1]+ia[2]+ia[3]+ia[4]+ia[5])+(ia[6]+7>>3),ia})(L),K=ye(G[7]<<9),X=0,ce=0;{for(X=0;X<8;++X)K.write_shift(1,Me[X]);for(X=0;X<8;++X)K.write_shift(2,0);for(K.write_shift(2,62),K.write_shift(2,3),K.write_shift(2,65534),K.write_shift(2,9),K.write_shift(2,6),X=0;X<3;++X)K.write_shift(2,0);for(K.write_shift(4,0),K.write_shift(4,G[2]),K.write_shift(4,G[0]+G[1]+G[2]+G[3]-1),K.write_shift(4,0),K.write_shift(4,4096),K.write_shift(4,G[3]?G[0]+G[1]+G[2]-1:D),K.write_shift(4,G[3]),K.write_shift(-4,G[1]?G[0]-1:D),K.write_shift(4,G[1]),X=0;X<109;++X)K.write_shift(-4,X<G[2]?G[1]+X:-1)}if(G[1])for(ce=0;ce<G[1];++ce){for(;X<236+ce*127;++X)K.write_shift(-4,X<G[2]?G[1]+X:-1);K.write_shift(-4,ce===G[1]-1?D:ce+1)}var xe=function(qe){for(ce+=qe;X<ce-1;++X)K.write_shift(-4,X+1);qe&&(++X,K.write_shift(-4,D))};for(ce=X=0,ce+=G[1];X<ce;++X)K.write_shift(-4,De.DIFSECT);for(ce+=G[2];X<ce;++X)K.write_shift(-4,De.FATSECT);xe(G[3]),xe(G[4]);for(var ie=0,he=0,fe=L.FileIndex[0];ie<L.FileIndex.length;++ie)fe=L.FileIndex[ie],fe.content&&(he=fe.content.length,!(he<4096)&&(fe.start=ce,xe(he+511>>9)));for(xe(G[6]+7>>3);K.l&511;)K.write_shift(-4,De.ENDOFCHAIN);for(ce=X=0,ie=0;ie<L.FileIndex.length;++ie)fe=L.FileIndex[ie],fe.content&&(he=fe.content.length,!(!he||he>=4096)&&(fe.start=ce,xe(he+63>>6)));for(;K.l&511;)K.write_shift(-4,De.ENDOFCHAIN);for(X=0;X<G[4]<<2;++X){var Ce=L.FullPaths[X];if(!Ce||Ce.length===0){for(ie=0;ie<17;++ie)K.write_shift(4,0);for(ie=0;ie<3;++ie)K.write_shift(4,-1);for(ie=0;ie<12;++ie)K.write_shift(4,0);continue}fe=L.FileIndex[X],X===0&&(fe.start=fe.size?fe.start-1:D);var Ie=X===0&&q.root||fe.name;if(he=2*(Ie.length+1),K.write_shift(64,Ie,"utf16le"),K.write_shift(2,he),K.write_shift(1,fe.type),K.write_shift(1,fe.color),K.write_shift(-4,fe.L),K.write_shift(-4,fe.R),K.write_shift(-4,fe.C),fe.clsid)K.write_shift(16,fe.clsid,"hex");else for(ie=0;ie<4;++ie)K.write_shift(4,0);K.write_shift(4,fe.state||0),K.write_shift(4,0),K.write_shift(4,0),K.write_shift(4,0),K.write_shift(4,0),K.write_shift(4,fe.start),K.write_shift(4,fe.size),K.write_shift(4,0)}for(X=1;X<L.FileIndex.length;++X)if(fe=L.FileIndex[X],fe.size>=4096)if(K.l=fe.start+1<<9,It&&Buffer.isBuffer(fe.content))fe.content.copy(K,K.l,0,fe.size),K.l+=fe.size+511&-512;else{for(ie=0;ie<fe.size;++ie)K.write_shift(1,fe.content[ie]);for(;ie&511;++ie)K.write_shift(1,0)}for(X=1;X<L.FileIndex.length;++X)if(fe=L.FileIndex[X],fe.size>0&&fe.size<4096)if(It&&Buffer.isBuffer(fe.content))fe.content.copy(K,K.l,0,fe.size),K.l+=fe.size+63&-64;else{for(ie=0;ie<fe.size;++ie)K.write_shift(1,fe.content[ie]);for(;ie&63;++ie)K.write_shift(1,0)}if(It)K.l=K.length;else for(;K.l<K.length;)K.write_shift(1,0);return K}function M(L,W){var q=L.FullPaths.map(function(ie){return ie.toUpperCase()}),G=q.map(function(ie){var he=ie.split("/");return he[he.length-(ie.slice(-1)=="/"?2:1)]}),K=!1;W.charCodeAt(0)===47?(K=!0,W=q[0].slice(0,-1)+W):K=W.indexOf("/")!==-1;var X=W.toUpperCase(),ce=K===!0?q.indexOf(X):G.indexOf(X);if(ce!==-1)return L.FileIndex[ce];var xe=!X.match(bm);for(X=X.replace(oh,""),xe&&(X=X.replace(bm,"!")),ce=0;ce<q.length;++ce)if((xe?q[ce].replace(bm,"!"):q[ce]).replace(oh,"")==X||(xe?G[ce].replace(bm,"!"):G[ce]).replace(oh,"")==X)return L.FileIndex[ce];return null}var A=64,D=-2,we="d0cf11e0a1b11ae1",Me=[208,207,17,224,161,177,26,225],ge="00000000000000000000000000000000",De={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:D,FREESECT:-1,HEADER_SIGNATURE:we,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:ge,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function Le(L,W,q){h();var G=F(L,q);m.writeFileSync(W,G)}function Je(L){for(var W=new Array(L.length),q=0;q<L.length;++q)W[q]=String.fromCharCode(L[q]);return W.join("")}function ee(L,W){var q=F(L,W);switch(W&&W.type||"buffer"){case"file":return h(),m.writeFileSync(W.filename,q),q;case"binary":return typeof q=="string"?q:Je(q);case"base64":return Sh(typeof q=="string"?q:Je(q));case"buffer":if(It)return Buffer.isBuffer(q)?q:Oi(q);case"array":return typeof q=="string"?as(q):q}return q}var _e;function Y(L){try{var W=L.InflateRaw,q=new W;if(q._processChunk(new Uint8Array([3,0]),q._finishFlushFlag),q.bytesRead)_e=L;else throw new Error("zlib does not expose bytesRead")}catch(G){console.error("cannot use native zlib: "+(G.message||G))}}function te(L,W){if(!_e)return Ws(L,W);var q=_e.InflateRaw,G=new q,K=G._processChunk(L.slice(L.l),G._finishFlushFlag);return L.l+=G.bytesRead,K}function Z(L){return _e?_e.deflateRawSync(L):sc(L)}var re=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],de=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Ve=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function ke(L){var W=(L<<1|L<<11)&139536|(L<<5|L<<15)&558144;return(W>>16|W>>8|W)&255}for(var He=typeof Uint8Array<"u",ae=He?new Uint8Array(256):[],Be=0;Be<256;++Be)ae[Be]=ke(Be);function tt(L,W){var q=ae[L&255];return W<=8?q>>>8-W:(q=q<<8|ae[L>>8&255],W<=16?q>>>16-W:(q=q<<8|ae[L>>16&255],q>>>24-W))}function qt(L,W){var q=W&7,G=W>>>3;return(L[G]|(q<=6?0:L[G+1]<<8))>>>q&3}function xt(L,W){var q=W&7,G=W>>>3;return(L[G]|(q<=5?0:L[G+1]<<8))>>>q&7}function na(L,W){var q=W&7,G=W>>>3;return(L[G]|(q<=4?0:L[G+1]<<8))>>>q&15}function Gt(L,W){var q=W&7,G=W>>>3;return(L[G]|(q<=3?0:L[G+1]<<8))>>>q&31}function Ue(L,W){var q=W&7,G=W>>>3;return(L[G]|(q<=1?0:L[G+1]<<8))>>>q&127}function nn(L,W,q){var G=W&7,K=W>>>3,X=(1<<q)-1,ce=L[K]>>>G;return q<8-G||(ce|=L[K+1]<<8-G,q<16-G)||(ce|=L[K+2]<<16-G,q<24-G)||(ce|=L[K+3]<<24-G),ce&X}function Mt(L,W,q){var G=W&7,K=W>>>3;return G<=5?L[K]|=(q&7)<<G:(L[K]|=q<<G&255,L[K+1]=(q&7)>>8-G),W+3}function er(L,W,q){var G=W&7,K=W>>>3;return q=(q&1)<<G,L[K]|=q,W+1}function _n(L,W,q){var G=W&7,K=W>>>3;return q<<=G,L[K]|=q&255,q>>>=8,L[K+1]=q,W+8}function ac(L,W,q){var G=W&7,K=W>>>3;return q<<=G,L[K]|=q&255,q>>>=8,L[K+1]=q&255,L[K+2]=q>>>8,W+16}function $s(L,W){var q=L.length,G=2*q>W?2*q:W+5,K=0;if(q>=W)return L;if(It){var X=NN(G);if(L.copy)L.copy(X);else for(;K<L.length;++K)X[K]=L[K];return X}else if(He){var ce=new Uint8Array(G);if(ce.set)ce.set(L);else for(;K<q;++K)ce[K]=L[K];return ce}return L.length=G,L}function Hn(L){for(var W=new Array(L),q=0;q<L;++q)W[q]=0;return W}function wa(L,W,q){var G=1,K=0,X=0,ce=0,xe=0,ie=L.length,he=He?new Uint16Array(32):Hn(32);for(X=0;X<32;++X)he[X]=0;for(X=ie;X<q;++X)L[X]=0;ie=L.length;var fe=He?new Uint16Array(ie):Hn(ie);for(X=0;X<ie;++X)he[K=L[X]]++,G<K&&(G=K),fe[X]=0;for(he[0]=0,X=1;X<=G;++X)he[X+16]=xe=xe+he[X-1]<<1;for(X=0;X<ie;++X)xe=L[X],xe!=0&&(fe[X]=he[xe+16]++);var Ce=0;for(X=0;X<ie;++X)if(Ce=L[X],Ce!=0)for(xe=tt(fe[X],G)>>G-Ce,ce=(1<<G+4-Ce)-1;ce>=0;--ce)W[xe|ce<<Ce]=Ce&15|X<<4;return G}var Na=He?new Uint16Array(512):Hn(512),Sr=He?new Uint16Array(32):Hn(32);if(!He){for(var jr=0;jr<512;++jr)Na[jr]=0;for(jr=0;jr<32;++jr)Sr[jr]=0}(function(){for(var L=[],W=0;W<32;W++)L.push(5);wa(L,Sr,32);var q=[];for(W=0;W<=143;W++)q.push(8);for(;W<=255;W++)q.push(9);for(;W<=279;W++)q.push(7);for(;W<=287;W++)q.push(8);wa(q,Na,288)})();var an=(function(){for(var W=He?new Uint8Array(32768):[],q=0,G=0;q<Ve.length-1;++q)for(;G<Ve[q+1];++G)W[G]=q;for(;G<32768;++G)W[G]=29;var K=He?new Uint8Array(259):[];for(q=0,G=0;q<de.length-1;++q)for(;G<de[q+1];++G)K[G]=q;function X(xe,ie){for(var he=0;he<xe.length;){var fe=Math.min(65535,xe.length-he),Ce=he+fe==xe.length;for(ie.write_shift(1,+Ce),ie.write_shift(2,fe),ie.write_shift(2,~fe&65535);fe-- >0;)ie[ie.l++]=xe[he++]}return ie.l}function ce(xe,ie){for(var he=0,fe=0,Ce=He?new Uint16Array(32768):[];fe<xe.length;){var Ie=Math.min(65535,xe.length-fe);if(Ie<10){for(he=Mt(ie,he,+(fe+Ie==xe.length)),he&7&&(he+=8-(he&7)),ie.l=he/8|0,ie.write_shift(2,Ie),ie.write_shift(2,~Ie&65535);Ie-- >0;)ie[ie.l++]=xe[fe++];he=ie.l*8;continue}he=Mt(ie,he,+(fe+Ie==xe.length)+2);for(var qe=0;Ie-- >0;){var Re=xe[fe];qe=(qe<<5^Re)&32767;var ze=-1,lt=0;if((ze=Ce[qe])&&(ze|=fe&-32768,ze>fe&&(ze-=32768),ze<fe))for(;xe[ze+lt]==xe[fe+lt]&&lt<250;)++lt;if(lt>2){Re=K[lt],Re<=22?he=_n(ie,he,ae[Re+1]>>1)-1:(_n(ie,he,3),he+=5,_n(ie,he,ae[Re-23]>>5),he+=3);var At=Re<8?0:Re-4>>2;At>0&&(ac(ie,he,lt-de[Re]),he+=At),Re=W[fe-ze],he=_n(ie,he,ae[Re]>>3),he-=3;var Rt=Re<4?0:Re-2>>1;Rt>0&&(ac(ie,he,fe-ze-Ve[Re]),he+=Rt);for(var Ft=0;Ft<lt;++Ft)Ce[qe]=fe&32767,qe=(qe<<5^xe[fe])&32767,++fe;Ie-=lt-1}else Re<=143?Re=Re+48:he=er(ie,he,1),he=_n(ie,he,ae[Re]),Ce[qe]=fe&32767,++fe}he=_n(ie,he,0)-1}return ie.l=(he+7)/8|0,ie.l}return function(ie,he){return ie.length<8?X(ie,he):ce(ie,he)}})();function sc(L){var W=ye(50+Math.floor(L.length*1.1)),q=an(L,W);return W.slice(0,q)}var Ko=He?new Uint16Array(32768):Hn(32768),Xo=He?new Uint16Array(32768):Hn(32768),aa=He?new Uint16Array(128):Hn(128),za=1,qn=1;function Gn(L,W){var q=Gt(L,W)+257;W+=5;var G=Gt(L,W)+1;W+=5;var K=na(L,W)+4;W+=4;for(var X=0,ce=He?new Uint8Array(19):Hn(19),xe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],ie=1,he=He?new Uint8Array(8):Hn(8),fe=He?new Uint8Array(8):Hn(8),Ce=ce.length,Ie=0;Ie<K;++Ie)ce[re[Ie]]=X=xt(L,W),ie<X&&(ie=X),he[X]++,W+=3;var qe=0;for(he[0]=0,Ie=1;Ie<=ie;++Ie)fe[Ie]=qe=qe+he[Ie-1]<<1;for(Ie=0;Ie<Ce;++Ie)(qe=ce[Ie])!=0&&(xe[Ie]=fe[qe]++);var Re=0;for(Ie=0;Ie<Ce;++Ie)if(Re=ce[Ie],Re!=0){qe=ae[xe[Ie]]>>8-Re;for(var ze=(1<<7-Re)-1;ze>=0;--ze)aa[qe|ze<<Re]=Re&7|Ie<<3}var lt=[];for(ie=1;lt.length<q+G;)switch(qe=aa[Ue(L,W)],W+=qe&7,qe>>>=3){case 16:for(X=3+qt(L,W),W+=2,qe=lt[lt.length-1];X-- >0;)lt.push(qe);break;case 17:for(X=3+xt(L,W),W+=3;X-- >0;)lt.push(0);break;case 18:for(X=11+Ue(L,W),W+=7;X-- >0;)lt.push(0);break;default:lt.push(qe),ie<qe&&(ie=qe);break}var At=lt.slice(0,q),Rt=lt.slice(q);for(Ie=q;Ie<286;++Ie)At[Ie]=0;for(Ie=G;Ie<30;++Ie)Rt[Ie]=0;return za=wa(At,Ko,286),qn=wa(Rt,Xo,30),W}function gs(L,W){if(L[0]==3&&!(L[1]&3))return[zl(W),2];for(var q=0,G=0,K=NN(W||1<<18),X=0,ce=K.length>>>0,xe=0,ie=0;(G&1)==0;){if(G=xt(L,q),q+=3,G>>>1)G>>1==1?(xe=9,ie=5):(q=Gn(L,q),xe=za,ie=qn);else{q&7&&(q+=8-(q&7));var he=L[q>>>3]|L[(q>>>3)+1]<<8;if(q+=32,he>0)for(!W&&ce<X+he&&(K=$s(K,X+he),ce=K.length);he-- >0;)K[X++]=L[q>>>3],q+=8;continue}for(;;){!W&&ce<X+32767&&(K=$s(K,X+32767),ce=K.length);var fe=nn(L,q,xe),Ce=G>>>1==1?Na[fe]:Ko[fe];if(q+=Ce&15,Ce>>>=4,(Ce>>>8&255)===0)K[X++]=Ce;else{if(Ce==256)break;Ce-=257;var Ie=Ce<8?0:Ce-4>>2;Ie>5&&(Ie=0);var qe=X+de[Ce];Ie>0&&(qe+=nn(L,q,Ie),q+=Ie),fe=nn(L,q,ie),Ce=G>>>1==1?Sr[fe]:Xo[fe],q+=Ce&15,Ce>>>=4;var Re=Ce<4?0:Ce-2>>1,ze=Ve[Ce];for(Re>0&&(ze+=nn(L,q,Re),q+=Re),!W&&ce<qe&&(K=$s(K,qe+100),ce=K.length);X<qe;)K[X]=K[X-ze],++X}}}return W?[K,q+7>>>3]:[K.slice(0,X),q+7>>>3]}function Ws(L,W){var q=L.slice(L.l||0),G=gs(q,W);return L.l+=G[1],G[0]}function Mi(L,W){if(L)typeof console<"u"&&console.error(W);else throw new Error(W)}function Ha(L,W){var q=L;ga(q,0);var G=[],K=[],X={FileIndex:G,FullPaths:K};C(X,{root:W.root});for(var ce=q.length-4;(q[ce]!=80||q[ce+1]!=75||q[ce+2]!=5||q[ce+3]!=6)&&ce>=0;)--ce;q.l=ce+4,q.l+=4;var xe=q.read_shift(2);q.l+=6;var ie=q.read_shift(4);for(q.l=ie,ce=0;ce<xe;++ce){q.l+=20;var he=q.read_shift(4),fe=q.read_shift(4),Ce=q.read_shift(2),Ie=q.read_shift(2),qe=q.read_shift(2);q.l+=8;var Re=q.read_shift(4),ze=d(q.slice(q.l+Ce,q.l+Ce+Ie));q.l+=Ce+Ie+qe;var lt=q.l;q.l=Re+4,Fi(q,he,fe,X,ze),q.l=lt}return X}function Fi(L,W,q,G,K){L.l+=2;var X=L.read_shift(2),ce=L.read_shift(2),xe=c(L);if(X&8257)throw new Error("Unsupported ZIP encryption");for(var ie=L.read_shift(4),he=L.read_shift(4),fe=L.read_shift(4),Ce=L.read_shift(2),Ie=L.read_shift(2),qe="",Re=0;Re<Ce;++Re)qe+=String.fromCharCode(L[L.l++]);if(Ie){var ze=d(L.slice(L.l,L.l+Ie));(ze[21589]||{}).mt&&(xe=ze[21589].mt),((K||{})[21589]||{}).mt&&(xe=K[21589].mt)}L.l+=Ie;var lt=L.slice(L.l,L.l+he);switch(ce){case 8:lt=te(L,fe);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+ce)}var At=!1;X&8&&(ie=L.read_shift(4),ie==134695760&&(ie=L.read_shift(4),At=!0),he=L.read_shift(4),fe=L.read_shift(4)),he!=W&&Mi(At,"Bad compressed size: "+W+" != "+he),fe!=q&&Mi(At,"Bad uncompressed size: "+q+" != "+fe),_r(G,qe,lt,{unsafe:!0,mt:xe})}function cr(L,W){var q=W||{},G=[],K=[],X=ye(1),ce=q.compression?8:0,xe=0,ie=0,he=0,fe=0,Ce=0,Ie=L.FullPaths[0],qe=Ie,Re=L.FileIndex[0],ze=[],lt=0;for(ie=1;ie<L.FullPaths.length;++ie)if(qe=L.FullPaths[ie].slice(Ie.length),Re=L.FileIndex[ie],!(!Re.size||!Re.content||qe=="Sh33tJ5")){var At=fe,Rt=ye(qe.length);for(he=0;he<qe.length;++he)Rt.write_shift(1,qe.charCodeAt(he)&127);Rt=Rt.slice(0,Rt.l),ze[Ce]=ML.buf(Re.content,0);var Ft=Re.content;ce==8&&(Ft=Z(Ft)),X=ye(30),X.write_shift(4,67324752),X.write_shift(2,20),X.write_shift(2,xe),X.write_shift(2,ce),Re.mt?o(X,Re.mt):X.write_shift(4,0),X.write_shift(-4,ze[Ce]),X.write_shift(4,Ft.length),X.write_shift(4,Re.content.length),X.write_shift(2,Rt.length),X.write_shift(2,0),fe+=X.length,G.push(X),fe+=Rt.length,G.push(Rt),fe+=Ft.length,G.push(Ft),X=ye(46),X.write_shift(4,33639248),X.write_shift(2,0),X.write_shift(2,20),X.write_shift(2,xe),X.write_shift(2,ce),X.write_shift(4,0),X.write_shift(-4,ze[Ce]),X.write_shift(4,Ft.length),X.write_shift(4,Re.content.length),X.write_shift(2,Rt.length),X.write_shift(2,0),X.write_shift(2,0),X.write_shift(2,0),X.write_shift(2,0),X.write_shift(4,0),X.write_shift(4,At),lt+=X.l,K.push(X),lt+=Rt.length,K.push(Rt),++Ce}return X=ye(22),X.write_shift(4,101010256),X.write_shift(2,0),X.write_shift(2,0),X.write_shift(2,Ce),X.write_shift(2,Ce),X.write_shift(4,lt),X.write_shift(4,fe),X.write_shift(2,0),fn([fn(G),fn(K),X])}var Ys={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function vs(L,W){if(L.ctype)return L.ctype;var q=L.name||"",G=q.match(/\.([^\.]+)$/);return G&&Ys[G[1]]||W&&(G=(q=W).match(/[\.\\]([^\.\\])+$/),G&&Ys[G[1]])?Ys[G[1]]:"application/octet-stream"}function xs(L){for(var W=Sh(L),q=[],G=0;G<W.length;G+=76)q.push(W.slice(G,G+76));return q.join(`\r
`)+`\r
`}function Qo(L){var W=L.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(he){var fe=he.charCodeAt(0).toString(16).toUpperCase();return"="+(fe.length==1?"0"+fe:fe)});W=W.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),W.charAt(0)==`
`&&(W="=0D"+W.slice(1)),W=W.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var q=[],G=W.split(`\r
`),K=0;K<G.length;++K){var X=G[K];if(X.length==0){q.push("");continue}for(var ce=0;ce<X.length;){var xe=76,ie=X.slice(ce,ce+xe);ie.charAt(xe-1)=="="?xe--:ie.charAt(xe-2)=="="?xe-=2:ie.charAt(xe-3)=="="&&(xe-=3),ie=X.slice(ce,ce+xe),ce+=xe,ce<X.length&&(ie+="="),q.push(ie)}}return q.join(`\r
`)}function Jo(L){for(var W=[],q=0;q<L.length;++q){for(var G=L[q];q<=L.length&&G.charAt(G.length-1)=="=";)G=G.slice(0,G.length-1)+L[++q];W.push(G)}for(var K=0;K<W.length;++K)W[K]=W[K].replace(/[=][0-9A-Fa-f]{2}/g,function(X){return String.fromCharCode(parseInt(X.slice(1),16))});return as(W.join(`\r
`))}function qa(L,W,q){for(var G="",K="",X="",ce,xe=0;xe<10;++xe){var ie=W[xe];if(!ie||ie.match(/^\s*$/))break;var he=ie.match(/^(.*?):\s*([^\s].*)$/);if(he)switch(he[1].toLowerCase()){case"content-location":G=he[2].trim();break;case"content-type":X=he[2].trim();break;case"content-transfer-encoding":K=he[2].trim();break}}switch(++xe,K.toLowerCase()){case"base64":ce=as(Ri(W.slice(xe).join("")));break;case"quoted-printable":ce=Jo(W.slice(xe));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+K)}var fe=_r(L,G.slice(q.length),ce,{unsafe:!0});X&&(fe.ctype=X)}function Pu(L,W){if(Je(L.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var q=W&&W.root||"",G=(It&&Buffer.isBuffer(L)?L.toString("binary"):Je(L)).split(`\r
`),K=0,X="";for(K=0;K<G.length;++K)if(X=G[K],!!/^Content-Location:/i.test(X)&&(X=X.slice(X.indexOf("file")),q||(q=X.slice(0,X.lastIndexOf("/")+1)),X.slice(0,q.length)!=q))for(;q.length>0&&(q=q.slice(0,q.length-1),q=q.slice(0,q.lastIndexOf("/")+1),X.slice(0,q.length)!=q););var ce=(G[1]||"").match(/boundary="(.*?)"/);if(!ce)throw new Error("MAD cannot find boundary");var xe="--"+(ce[1]||""),ie=[],he=[],fe={FileIndex:ie,FullPaths:he};C(fe);var Ce,Ie=0;for(K=0;K<G.length;++K){var qe=G[K];qe!==xe&&qe!==xe+"--"||(Ie++&&qa(fe,G.slice(Ce,K),q),Ce=K)}return fe}function Ta(L,W){var q=W||{},G=q.boundary||"SheetJS";G="------="+G;for(var K=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+G.slice(2)+'"',"","",""],X=L.FullPaths[0],ce=X,xe=L.FileIndex[0],ie=1;ie<L.FullPaths.length;++ie)if(ce=L.FullPaths[ie].slice(X.length),xe=L.FileIndex[ie],!(!xe.size||!xe.content||ce=="Sh33tJ5")){ce=ce.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(lt){return"_x"+lt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(lt){return"_u"+lt.charCodeAt(0).toString(16)+"_"});for(var he=xe.content,fe=It&&Buffer.isBuffer(he)?he.toString("binary"):Je(he),Ce=0,Ie=Math.min(1024,fe.length),qe=0,Re=0;Re<=Ie;++Re)(qe=fe.charCodeAt(Re))>=32&&qe<128&&++Ce;var ze=Ce>=Ie*4/5;K.push(G),K.push("Content-Location: "+(q.root||"file:///C:/SheetJS/")+ce),K.push("Content-Transfer-Encoding: "+(ze?"quoted-printable":"base64")),K.push("Content-Type: "+vs(xe,ce)),K.push(""),K.push(ze?Qo(fe):xs(fe))}return K.push(G+`--\r
`),K.join(`\r
`)}function ur(L){var W={};return C(W,L),W}function _r(L,W,q,G){var K=G&&G.unsafe;K||C(L);var X=!K&&Xt.find(L,W);if(!X){var ce=L.FullPaths[0];W.slice(0,ce.length)==ce?ce=W:(ce.slice(-1)!="/"&&(ce+="/"),ce=(ce+W).replace("//","/")),X={name:a(W),type:2},L.FileIndex.push(X),L.FullPaths.push(ce),K||Xt.utils.cfb_gc(L)}return X.content=q,X.size=q?q.length:0,G&&(G.CLSID&&(X.clsid=G.CLSID),G.mt&&(X.mt=G.mt),G.ct&&(X.ct=G.ct)),X}function Ga(L,W){C(L);var q=Xt.find(L,W);if(q){for(var G=0;G<L.FileIndex.length;++G)if(L.FileIndex[G]==q)return L.FileIndex.splice(G,1),L.FullPaths.splice(G,1),!0}return!1}function Ks(L,W,q){C(L);var G=Xt.find(L,W);if(G){for(var K=0;K<L.FileIndex.length;++K)if(L.FileIndex[K]==G)return L.FileIndex[K].name=a(q),L.FullPaths[K]=q,!0}return!1}function Xs(L){S(L,!0)}return e.find=M,e.read=U,e.parse=p,e.write=ee,e.writeFile=Le,e.utils={cfb_new:ur,cfb_add:_r,cfb_del:Ga,cfb_mov:Ks,cfb_gc:Xs,ReadShift:ch,CheckField:Gj,prep_blob:ga,bconcat:fn,use_zlib:Y,_deflateRaw:sc,_inflateRaw:Ws,consts:De},e})();function FL(t){return typeof t=="string"?np(t):Array.isArray(t)?lL(t):t}function Xh(t,e,r){if(typeof Deno<"u"){if(r&&typeof e=="string")switch(r){case"utf8":e=new TextEncoder(r).encode(e);break;case"binary":e=np(e);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(t,e)}var n=r=="utf8"?Ch(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,t);if(typeof Blob<"u"){var a=new Blob([FL(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,t);if(typeof saveAs<"u")return saveAs(a,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var o=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(o)},6e4),chrome.downloads.download({url:o,filename:t,saveAs:!0});var c=document.createElement("a");if(c.download!=null)return c.download=t,c.href=o,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(o)},6e4),o}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var d=File(t);return d.open("w"),d.encoding="binary",Array.isArray(e)&&(e=Kh(e)),d.write(e),d.close(),e}catch(m){if(!m.message||!m.message.match(/onstruct/))throw m}throw new Error("cannot save file "+t)}function yn(t){for(var e=Object.keys(t),r=[],n=0;n<e.length;++n)Object.prototype.hasOwnProperty.call(t,e[n])&&r.push(e[n]);return r}function DN(t,e){for(var r=[],n=yn(t),a=0;a!==n.length;++a)r[t[n[a]][e]]==null&&(r[t[n[a]][e]]=n[a]);return r}function w1(t){for(var e=[],r=yn(t),n=0;n!==r.length;++n)e[t[r[n]]]=r[n];return e}function ip(t){for(var e=[],r=yn(t),n=0;n!==r.length;++n)e[t[r[n]]]=parseInt(r[n],10);return e}function PL(t){for(var e=[],r=yn(t),n=0;n!==r.length;++n)e[t[r[n]]]==null&&(e[t[r[n]]]=[]),e[t[r[n]]].push(r[n]);return e}var E0=new Date(1899,11,30,0,0,0);function ea(t,e){var r=t.getTime(),n=E0.getTime()+(t.getTimezoneOffset()-E0.getTimezoneOffset())*6e4;return(r-n)/(1440*60*1e3)}var Cj=new Date,LL=E0.getTime()+(Cj.getTimezoneOffset()-E0.getTimezoneOffset())*6e4,IN=Cj.getTimezoneOffset();function Aj(t){var e=new Date;return e.setTime(t*24*60*60*1e3+LL),e.getTimezoneOffset()!==IN&&e.setTime(e.getTime()+(e.getTimezoneOffset()-IN)*6e4),e}var kN=new Date("2017-02-19T19:06:09.000Z"),Rj=isNaN(kN.getFullYear())?new Date("2/19/17"):kN,VL=Rj.getFullYear()==2017;function zn(t,e){var r=new Date(t);if(VL)return e>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):e<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(Rj.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return t.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var a=t.match(/\d+/g)||["2017","2","19","0","0","0"],o=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return t.indexOf("Z")>-1&&(o=new Date(o.getTime()-o.getTimezoneOffset()*60*1e3)),o}function op(t,e){if(It&&Buffer.isBuffer(t))return t.toString("binary");if(typeof TextDecoder<"u")try{var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(o){return r[o]||o})}catch{}for(var n=[],a=0;a!=t.length;++a)n.push(String.fromCharCode(t[a]));return n.join("")}function ta(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=ta(t[r]));return e}function gr(t,e){for(var r="";r.length<e;)r+=t;return r}function Ei(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var r=1,n=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(e=Number(n))||(n=n.replace(/[(](.*)[)]/,function(a,o){return r=-r,o}),!isNaN(e=Number(n)))?e/r:e}var BL=["january","february","march","april","may","june","july","august","september","october","november","december"];function jh(t){var e=new Date(t),r=new Date(NaN),n=e.getYear(),a=e.getMonth(),o=e.getDate();if(isNaN(o))return r;var c=t.toLowerCase();if(c.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(c=c.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),c.length>3&&BL.indexOf(c)==-1)return r}else if(c.match(/[a-z]/))return r;return n<0||n>8099?r:(a>0||o>1)&&n!=101?e:t.match(/[^-0-9:,\/\\]/)?r:e}function pt(t,e,r){if(t.FullPaths){if(typeof r=="string"){var n;return It?n=Oi(r):n=cL(r),Xt.utils.cfb_add(t,e,n)}Xt.utils.cfb_add(t,e,r)}else t.file(e,r)}function N1(){return Xt.utils.cfb_new()}var Mr=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,UL={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},T1=w1(UL),b1=/[&<>'"]/g,zL=/[\u0000-\u0008\u000b-\u001f]/g;function zt(t){var e=t+"";return e.replace(b1,function(r){return T1[r]}).replace(zL,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function ON(t){return zt(t).replace(/ /g,"_x0020_")}var Dj=/[\u0000-\u001f]/g;function HL(t){var e=t+"";return e.replace(b1,function(r){return T1[r]}).replace(/\n/g,"<br/>").replace(Dj,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function qL(t){var e=t+"";return e.replace(b1,function(r){return T1[r]}).replace(Dj,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}function GL(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function $L(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function Sv(t){for(var e="",r=0,n=0,a=0,o=0,c=0,d=0;r<t.length;){if(n=t.charCodeAt(r++),n<128){e+=String.fromCharCode(n);continue}if(a=t.charCodeAt(r++),n>191&&n<224){c=(n&31)<<6,c|=a&63,e+=String.fromCharCode(c);continue}if(o=t.charCodeAt(r++),n<240){e+=String.fromCharCode((n&15)<<12|(a&63)<<6|o&63);continue}c=t.charCodeAt(r++),d=((n&7)<<18|(a&63)<<12|(o&63)<<6|c&63)-65536,e+=String.fromCharCode(55296+(d>>>10&1023)),e+=String.fromCharCode(56320+(d&1023))}return e}function MN(t){var e=zl(2*t.length),r,n,a=1,o=0,c=0,d;for(n=0;n<t.length;n+=a)a=1,(d=t.charCodeAt(n))<128?r=d:d<224?(r=(d&31)*64+(t.charCodeAt(n+1)&63),a=2):d<240?(r=(d&15)*4096+(t.charCodeAt(n+1)&63)*64+(t.charCodeAt(n+2)&63),a=3):(a=4,r=(d&7)*262144+(t.charCodeAt(n+1)&63)*4096+(t.charCodeAt(n+2)&63)*64+(t.charCodeAt(n+3)&63),r-=65536,c=55296+(r>>>10&1023),r=56320+(r&1023)),c!==0&&(e[o++]=c&255,e[o++]=c>>>8,c=0),e[o++]=r%256,e[o++]=r>>>8;return e.slice(0,o).toString("ucs2")}function FN(t){return Oi(t,"binary").toString("utf8")}var jm="foo bar baz",lh=It&&(FN(jm)==Sv(jm)&&FN||MN(jm)==Sv(jm)&&MN)||Sv,Ch=It?function(t){return Oi(t,"utf8").toString("binary")}:function(t){for(var e=[],r=0,n=0,a=0;r<t.length;)switch(n=t.charCodeAt(r++),!0){case n<128:e.push(String.fromCharCode(n));break;case n<2048:e.push(String.fromCharCode(192+(n>>6))),e.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,a=t.charCodeAt(r++)-56320+(n<<10),e.push(String.fromCharCode(240+(a>>18&7))),e.push(String.fromCharCode(144+(a>>12&63))),e.push(String.fromCharCode(128+(a>>6&63))),e.push(String.fromCharCode(128+(a&63)));break;default:e.push(String.fromCharCode(224+(n>>12))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)))}return e.join("")},WL=(function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<t.length;++a)n=n.replace(t[a][0],t[a][1]);return n}})(),Ij=/(^\s|\s$|\n)/;function mn(t,e){return"<"+t+(e.match(Ij)?' xml:space="preserve"':"")+">"+e+"</"+t+">"}function Ah(t){return yn(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function Oe(t,e,r){return"<"+t+(r!=null?Ah(r):"")+(e!=null?(e.match(Ij)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function fx(t,e){try{return t.toISOString().replace(/\.\d*/,"")}catch(r){if(e)throw r}return""}function YL(t,e){switch(typeof t){case"string":var r=Oe("vt:lpwstr",zt(t));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return Oe((t|0)==t?"vt:i4":"vt:r8",zt(String(t)));case"boolean":return Oe("vt:bool",t?"true":"false")}if(t instanceof Date)return Oe("vt:filetime",fx(t));throw new Error("Unable to serialize "+t)}var Zr={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},ku=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],va={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function KL(t,e){for(var r=1-2*(t[e+7]>>>7),n=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),a=t[e+6]&15,o=5;o>=0;--o)a=a*256+t[e+o];return n==2047?a==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,a+=Math.pow(2,52)),r*Math.pow(2,n-52)*a)}function XL(t,e,r){var n=(e<0||1/e==-1/0?1:0)<<7,a=0,o=0,c=n?-e:e;isFinite(c)?c==0?a=o=0:(a=Math.floor(Math.log(c)/Math.LN2),o=c*Math.pow(2,52-a),a<=-1023&&(!isFinite(o)||o<Math.pow(2,52))?a=-1022:(o-=Math.pow(2,52),a+=1023)):(a=2047,o=isNaN(e)?26985:0);for(var d=0;d<=5;++d,o/=256)t[r+d]=o&255;t[r+6]=(a&15)<<4|o&15,t[r+7]=a>>4|n}var PN=function(t){for(var e=[],r=10240,n=0;n<t[0].length;++n)if(t[0][n])for(var a=0,o=t[0][n].length;a<o;a+=r)e.push.apply(e,t[0][n].slice(a,a+r));return e},LN=It?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:Oi(e)})):PN(t)}:PN,VN=function(t,e,r){for(var n=[],a=e;a<r;a+=2)n.push(String.fromCharCode(Jd(t,a)));return n.join("").replace(oh,"")},S1=It?function(t,e,r){return Buffer.isBuffer(t)?t.toString("utf16le",e,r).replace(oh,""):VN(t,e,r)}:VN,BN=function(t,e,r){for(var n=[],a=e;a<e+r;++a)n.push(("0"+t[a].toString(16)).slice(-2));return n.join("")},kj=It?function(t,e,r){return Buffer.isBuffer(t)?t.toString("hex",e,e+r):BN(t,e,r)}:BN,UN=function(t,e,r){for(var n=[],a=e;a<r;a++)n.push(String.fromCharCode(Jc(t,a)));return n.join("")},Qh=It?function(e,r,n){return Buffer.isBuffer(e)?e.toString("utf8",r,n):UN(e,r,n)}:UN,Oj=function(t,e){var r=xa(t,e);return r>0?Qh(t,e+4,e+4+r-1):""},Mj=Oj,Fj=function(t,e){var r=xa(t,e);return r>0?Qh(t,e+4,e+4+r-1):""},Pj=Fj,Lj=function(t,e){var r=2*xa(t,e);return r>0?Qh(t,e+4,e+4+r-1):""},Vj=Lj,Bj=function(e,r){var n=xa(e,r);return n>0?S1(e,r+4,r+4+n):""},Uj=Bj,zj=function(t,e){var r=xa(t,e);return r>0?Qh(t,e+4,e+4+r):""},Hj=zj,qj=function(t,e){return KL(t,e)},w0=qj,j1=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};It&&(Mj=function(e,r){if(!Buffer.isBuffer(e))return Oj(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},Pj=function(e,r){if(!Buffer.isBuffer(e))return Fj(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},Vj=function(e,r){if(!Buffer.isBuffer(e))return Lj(e,r);var n=2*e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n-1)},Uj=function(e,r){if(!Buffer.isBuffer(e))return Bj(e,r);var n=e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n)},Hj=function(e,r){if(!Buffer.isBuffer(e))return zj(e,r);var n=e.readUInt32LE(r);return e.toString("utf8",r+4,r+4+n)},w0=function(e,r){return Buffer.isBuffer(e)?e.readDoubleLE(r):qj(e,r)},j1=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var Jc=function(t,e){return t[e]},Jd=function(t,e){return t[e+1]*256+t[e]},QL=function(t,e){var r=t[e+1]*256+t[e];return r<32768?r:(65535-r+1)*-1},xa=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},Al=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},JL=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function ch(t,e){var r="",n,a,o=[],c,d,m,h;switch(e){case"dbcs":if(h=this.l,It&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(m=0;m<t;++m)r+=String.fromCharCode(Jd(this,h)),h+=2;t*=2;break;case"utf8":r=Qh(this,this.l,this.l+t);break;case"utf16le":t*=2,r=S1(this,this.l,this.l+t);break;case"wstr":return ch.call(this,t,"dbcs");case"lpstr-ansi":r=Mj(this,this.l),t=4+xa(this,this.l);break;case"lpstr-cp":r=Pj(this,this.l),t=4+xa(this,this.l);break;case"lpwstr":r=Vj(this,this.l),t=4+2*xa(this,this.l);break;case"lpp4":t=4+xa(this,this.l),r=Uj(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+xa(this,this.l),r=Hj(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(c=Jc(this,this.l+t++))!==0;)o.push(Tm(c));r=o.join("");break;case"_wstr":for(t=0,r="";(c=Jd(this,this.l+t))!==0;)o.push(Tm(c)),t+=2;t+=2,r=o.join("");break;case"dbcs-cont":for(r="",h=this.l,m=0;m<t;++m){if(this.lens&&this.lens.indexOf(h)!==-1)return c=Jc(this,h),this.l=h+1,d=ch.call(this,t-m,c?"dbcs-cont":"sbcs-cont"),o.join("")+d;o.push(Tm(Jd(this,h))),h+=2}r=o.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",h=this.l,m=0;m!=t;++m){if(this.lens&&this.lens.indexOf(h)!==-1)return c=Jc(this,h),this.l=h+1,d=ch.call(this,t-m,c?"dbcs-cont":"sbcs-cont"),o.join("")+d;o.push(Tm(Jc(this,h))),h+=1}r=o.join("");break;default:switch(t){case 1:return n=Jc(this,this.l),this.l++,n;case 2:return n=(e==="i"?QL:Jd)(this,this.l),this.l+=2,n;case 4:case-4:return e==="i"||(this[this.l+3]&128)===0?(n=(t>0?Al:JL)(this,this.l),this.l+=4,n):(a=xa(this,this.l),this.l+=4,a);case 8:case-8:if(e==="f")return t==8?a=w0(this,this.l):a=w0([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;t=8;case 16:r=kj(this,this.l,t);break}}return this.l+=t,r}var ZL=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24&255},e8=function(t,e,r){t[r]=e&255,t[r+1]=e>>8&255,t[r+2]=e>>16&255,t[r+3]=e>>24&255},t8=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255};function r8(t,e,r){var n=0,a=0;if(r==="dbcs"){for(a=0;a!=e.length;++a)t8(this,e.charCodeAt(a),this.l+2*a);n=2*e.length}else if(r==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=e.length;++a)this[this.l+a]=e.charCodeAt(a)&255;n=e.length}else if(r==="hex"){for(;a<t;++a)this[this.l++]=parseInt(e.slice(2*a,2*a+2),16)||0;return this}else if(r==="utf16le"){var o=Math.min(this.l+t,this.length);for(a=0;a<Math.min(e.length,t);++a){var c=e.charCodeAt(a);this[this.l++]=c&255,this[this.l++]=c>>8}for(;this.l<o;)this[this.l++]=0;return this}else switch(t){case 1:n=1,this[this.l]=e&255;break;case 2:n=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:n=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:n=4,ZL(this,e,this.l);break;case 8:if(n=8,r==="f"){XL(this,e,this.l);break}case 16:break;case-4:n=4,e8(this,e,this.l);break}return this.l+=n,this}function Gj(t,e){var r=kj(this,this.l,t.length>>1);if(r!==t)throw new Error(e+"Expected "+t+" saw "+r);this.l+=t.length>>1}function ga(t,e){t.l=e,t.read_shift=ch,t.chk=Gj,t.write_shift=r8}function Hs(t,e){t.l+=e}function ye(t){var e=zl(t);return ga(e,0),e}function Zn(){var t=[],e=It?256:2048,r=function(h){var p=ye(h);return ga(p,0),p},n=r(e),a=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&t.push(n),n=null)},o=function(h){return n&&h<n.length-n.l?n:(a(),n=r(Math.max(h+1,e)))},c=function(){return a(),fn(t)},d=function(h){a(),n=h,n.l==null&&(n.l=n.length),o(e)};return{next:o,push:d,end:c,_bufs:t}}function je(t,e,r,n){var a=+e,o;if(!isNaN(a)){n||(n=KB[a].p||(r||[]).length||0),o=1+(a>=128?1:0)+1,n>=128&&++o,n>=16384&&++o,n>=2097152&&++o;var c=t.next(o);a<=127?c.write_shift(1,a):(c.write_shift(1,(a&127)+128),c.write_shift(1,a>>7));for(var d=0;d!=4;++d)if(n>=128)c.write_shift(1,(n&127)+128),n>>=7;else{c.write_shift(1,n);break}n>0&&j1(r)&&t.push(r)}}function uh(t,e,r){var n=ta(t);if(e.s?(n.cRel&&(n.c+=e.s.c),n.rRel&&(n.r+=e.s.r)):(n.cRel&&(n.c+=e.c),n.rRel&&(n.r+=e.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function zN(t,e,r){var n=ta(t);return n.s=uh(n.s,e.s,r),n.e=uh(n.e,e.s,r),n}function dh(t,e){if(t.cRel&&t.c<0)for(t=ta(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=ta(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var r=Ht(t);return!t.cRel&&t.cRel!=null&&(r=s8(r)),!t.rRel&&t.rRel!=null&&(r=n8(r)),r}function jv(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+Cn(t.s.c)+":"+(t.e.cRel?"":"$")+Cn(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+vn(t.s.r)+":"+(t.e.rRel?"":"$")+vn(t.e.r):dh(t.s,e.biff)+":"+dh(t.e,e.biff)}function C1(t){return parseInt(a8(t),10)-1}function vn(t){return""+(t+1)}function n8(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function a8(t){return t.replace(/\$(\d+)$/,"$1")}function A1(t){for(var e=i8(t),r=0,n=0;n!==e.length;++n)r=26*r+e.charCodeAt(n)-64;return r-1}function Cn(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function s8(t){return t.replace(/^([A-Z])/,"$$$1")}function i8(t){return t.replace(/^\$([A-Z])/,"$1")}function o8(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function en(t){for(var e=0,r=0,n=0;n<t.length;++n){var a=t.charCodeAt(n);a>=48&&a<=57?e=10*e+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:e-1}}function Ht(t){for(var e=t.c+1,r="";e;e=(e-1)/26|0)r=String.fromCharCode((e-1)%26+65)+r;return r+(t.r+1)}function _a(t){var e=t.indexOf(":");return e==-1?{s:en(t),e:en(t)}:{s:en(t.slice(0,e)),e:en(t.slice(e+1))}}function Or(t,e){return typeof e>"u"||typeof e=="number"?Or(t.s,t.e):(typeof t!="string"&&(t=Ht(t)),typeof e!="string"&&(e=Ht(e)),t==e?t:t+":"+e)}function ir(t){var e={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,a=0,o=t.length;for(r=0;n<o&&!((a=t.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(e.s.c=--r,r=0;n<o&&!((a=t.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;if(e.s.r=--r,n===o||a!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++n,r=0;n!=o&&!((a=t.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(e.e.c=--r,r=0;n!=o&&!((a=t.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;return e.e.r=--r,e}function HN(t,e){var r=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=Uo(t.z,r?ea(e):e)}catch{}try{return t.w=Uo((t.XF||{}).numFmtId||(r?14:0),r?ea(e):e)}catch{return""+e}}function Di(t,e,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?Jh[t.v]||t.v:e==null?HN(t,t.v):HN(t,e))}function Zl(t,e){var r=e&&e.sheet?e.sheet:"Sheet1",n={};return n[r]=t,{SheetNames:[r],Sheets:n}}function $j(t,e,r){var n=r||{},a=t?Array.isArray(t):n.dense,o=t||(a?[]:{}),c=0,d=0;if(o&&n.origin!=null){if(typeof n.origin=="number")c=n.origin;else{var m=typeof n.origin=="string"?en(n.origin):n.origin;c=m.r,d=m.c}o["!ref"]||(o["!ref"]="A1:A1")}var h={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(o["!ref"]){var p=ir(o["!ref"]);h.s.c=p.s.c,h.s.r=p.s.r,h.e.c=Math.max(h.e.c,p.e.c),h.e.r=Math.max(h.e.r,p.e.r),c==-1&&(h.e.r=c=p.e.r+1)}for(var v=0;v!=e.length;++v)if(e[v]){if(!Array.isArray(e[v]))throw new Error("aoa_to_sheet expects an array of arrays");for(var y=0;y!=e[v].length;++y)if(!(typeof e[v][y]>"u")){var w={v:e[v][y]},N=c+v,E=d+y;if(h.s.r>N&&(h.s.r=N),h.s.c>E&&(h.s.c=E),h.e.r<N&&(h.e.r=N),h.e.c<E&&(h.e.c=E),e[v][y]&&typeof e[v][y]=="object"&&!Array.isArray(e[v][y])&&!(e[v][y]instanceof Date))w=e[v][y];else if(Array.isArray(w.v)&&(w.f=e[v][y][1],w.v=w.v[0]),w.v===null)if(w.f)w.t="n";else if(n.nullError)w.t="e",w.v=0;else if(n.sheetStubs)w.t="z";else continue;else typeof w.v=="number"?w.t="n":typeof w.v=="boolean"?w.t="b":w.v instanceof Date?(w.z=n.dateNF||xr[14],n.cellDates?(w.t="d",w.w=Uo(w.z,ea(w.v))):(w.t="n",w.v=ea(w.v),w.w=Uo(w.z,w.v))):w.t="s";if(a)o[N]||(o[N]=[]),o[N][E]&&o[N][E].z&&(w.z=o[N][E].z),o[N][E]=w;else{var T=Ht({c:E,r:N});o[T]&&o[T].z&&(w.z=o[T].z),o[T]=w}}}return h.s.c<1e7&&(o["!ref"]=Or(h)),o}function Ou(t,e){return $j(null,t,e)}function l8(t){return t.read_shift(4,"i")}function ls(t,e){return e||(e=ye(4)),e.write_shift(4,t),e}function An(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function tn(t,e){var r=!1;return e==null&&(r=!0,e=ye(4+2*t.length)),e.write_shift(4,t.length),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}function c8(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function u8(t,e){return e||(e=ye(4)),e.write_shift(2,0),e.write_shift(2,0),e}function R1(t,e){var r=t.l,n=t.read_shift(1),a=An(t),o=[],c={t:a,h:a};if((n&1)!==0){for(var d=t.read_shift(4),m=0;m!=d;++m)o.push(c8(t));c.r=o}else c.r=[{ich:0,ifnt:0}];return t.l=r+e,c}function d8(t,e){var r=!1;return e==null&&(r=!0,e=ye(15+4*t.t.length)),e.write_shift(1,0),tn(t.t,e),r?e.slice(0,e.l):e}var h8=R1;function f8(t,e){var r=!1;return e==null&&(r=!0,e=ye(23+4*t.t.length)),e.write_shift(1,1),tn(t.t,e),e.write_shift(4,1),u8({},e),r?e.slice(0,e.l):e}function Ua(t){var e=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:r}}function ec(t,e){return e==null&&(e=ye(8)),e.write_shift(-4,t.c),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}function tc(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}function rc(t,e){return e==null&&(e=ye(4)),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}var m8=An,Wj=tn;function D1(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}function N0(t,e){var r=!1;return e==null&&(r=!0,e=ye(127)),e.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}var p8=An,mx=D1,I1=N0;function Yj(t){var e=t.slice(t.l,t.l+4),r=e[0]&1,n=e[0]&2;t.l+=4;var a=n===0?w0([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):Al(e,0)>>2;return r?a/100:a}function Kj(t,e){e==null&&(e=ye(4));var r=0,n=0,a=t*100;if(t==(t|0)&&t>=-536870912&&t<1<<29?n=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(n=1,r=1),n)e.write_shift(-4,((r?a:t)<<2)+(r+2));else throw new Error("unsupported RkNumber "+t)}function Xj(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}function g8(t,e){return e||(e=ye(16)),e.write_shift(4,t.s.r),e.write_shift(4,t.e.r),e.write_shift(4,t.s.c),e.write_shift(4,t.e.c),e}var nc=Xj,Mu=g8;function Fu(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function Hl(t,e){return(e||ye(8)).write_shift(8,t,"f")}function v8(t){var e={},r=t.read_shift(1),n=r>>>1,a=t.read_shift(1),o=t.read_shift(2,"i"),c=t.read_shift(1),d=t.read_shift(1),m=t.read_shift(1);switch(t.l++,n){case 0:e.auto=1;break;case 1:e.index=a;var h=S8[a];h&&(e.rgb=eT(h));break;case 2:e.rgb=eT([c,d,m]);break;case 3:e.theme=a;break}return o!=0&&(e.tint=o>0?o/32767:o/32768),e}function T0(t,e){if(e||(e=ye(8)),!t||t.auto)return e.write_shift(4,0),e.write_shift(4,0),e;t.index!=null?(e.write_shift(1,2),e.write_shift(1,t.index)):t.theme!=null?(e.write_shift(1,6),e.write_shift(1,t.theme)):(e.write_shift(1,5),e.write_shift(1,0));var r=t.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),e.write_shift(2,r),!t.rgb||t.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var n=t.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),e.write_shift(1,parseInt(n.slice(0,2),16)),e.write_shift(1,parseInt(n.slice(2,4),16)),e.write_shift(1,parseInt(n.slice(4,6),16)),e.write_shift(1,255)}return e}function x8(t){var e=t.read_shift(1);t.l++;var r={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return r}function y8(t,e){e||(e=ye(2));var r=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return e.write_shift(1,r),e.write_shift(1,0),e}var Qj=2,pa=3,Cm=11,b0=19,Am=64,_8=65,E8=71,w8=4108,N8=4126,un=80,qN={1:{n:"CodePage",t:Qj},2:{n:"Category",t:un},3:{n:"PresentationFormat",t:un},4:{n:"ByteCount",t:pa},5:{n:"LineCount",t:pa},6:{n:"ParagraphCount",t:pa},7:{n:"SlideCount",t:pa},8:{n:"NoteCount",t:pa},9:{n:"HiddenCount",t:pa},10:{n:"MultimediaClipCount",t:pa},11:{n:"ScaleCrop",t:Cm},12:{n:"HeadingPairs",t:w8},13:{n:"TitlesOfParts",t:N8},14:{n:"Manager",t:un},15:{n:"Company",t:un},16:{n:"LinksUpToDate",t:Cm},17:{n:"CharacterCount",t:pa},19:{n:"SharedDoc",t:Cm},22:{n:"HyperlinksChanged",t:Cm},23:{n:"AppVersion",t:pa,p:"version"},24:{n:"DigSig",t:_8},26:{n:"ContentType",t:un},27:{n:"ContentStatus",t:un},28:{n:"Language",t:un},29:{n:"Version",t:un},255:{},2147483648:{n:"Locale",t:b0},2147483651:{n:"Behavior",t:b0},1919054434:{}},GN={1:{n:"CodePage",t:Qj},2:{n:"Title",t:un},3:{n:"Subject",t:un},4:{n:"Author",t:un},5:{n:"Keywords",t:un},6:{n:"Comments",t:un},7:{n:"Template",t:un},8:{n:"LastAuthor",t:un},9:{n:"RevNumber",t:un},10:{n:"EditTime",t:Am},11:{n:"LastPrinted",t:Am},12:{n:"CreatedDate",t:Am},13:{n:"ModifiedDate",t:Am},14:{n:"PageCount",t:pa},15:{n:"WordCount",t:pa},16:{n:"CharCount",t:pa},17:{n:"Thumbnail",t:E8},18:{n:"Application",t:un},19:{n:"DocSecurity",t:pa},255:{},2147483648:{n:"Locale",t:b0},2147483651:{n:"Behavior",t:b0},1919054434:{}};function T8(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var b8=T8([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),S8=ta(b8),Jh={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},j8={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},Rm={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function Jj(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function Zj(t,e){var r=PL(j8),n=[],a;n[n.length]=Mr,n[n.length]=Oe("Types",null,{xmlns:Zr.CT,"xmlns:xsd":Zr.xsd,"xmlns:xsi":Zr.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(m){return Oe("Default",null,{Extension:m[0],ContentType:m[1]})}));var o=function(m){t[m]&&t[m].length>0&&(a=t[m][0],n[n.length]=Oe("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:Rm[m][e.bookType]||Rm[m].xlsx}))},c=function(m){(t[m]||[]).forEach(function(h){n[n.length]=Oe("Override",null,{PartName:(h[0]=="/"?"":"/")+h,ContentType:Rm[m][e.bookType]||Rm[m].xlsx})})},d=function(m){(t[m]||[]).forEach(function(h){n[n.length]=Oe("Override",null,{PartName:(h[0]=="/"?"":"/")+h,ContentType:r[m][0]})})};return o("workbooks"),c("sheets"),c("charts"),d("themes"),["strs","styles"].forEach(o),["coreprops","extprops","custprops"].forEach(d),d("vba"),d("comments"),d("threadedcomments"),d("drawings"),c("metadata"),d("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var Ct={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function eC(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function lu(t){var e=[Mr,Oe("Relationships",null,{xmlns:Zr.RELS})];return yn(t["!id"]).forEach(function(r){e[e.length]=Oe("Relationship",null,t["!id"][r])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function Ut(t,e,r,n,a,o){if(a||(a={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),e<0)for(e=t["!idx"];t["!id"]["rId"+e];++e);if(t["!idx"]=e+1,a.Id="rId"+e,a.Type=n,a.Target=r,[Ct.HLINK,Ct.XPATH,Ct.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),t["!id"][a.Id])throw new Error("Cannot rewrite rId "+e);return t["!id"][a.Id]=a,t[("/"+a.Target).replace("//","/")]=a,e}function C8(t){var e=[Mr];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<t.length;++r)e.push('  <manifest:file-entry manifest:full-path="'+t[r][0]+'" manifest:media-type="'+t[r][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function $N(t,e,r){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function A8(t,e){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function R8(t){var e=[Mr];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=t.length;++r)e.push($N(t[r][0],t[r][1])),e.push(A8("",t[r][0]));return e.push($N("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function tC(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+g0.version+"</meta:generator></office:meta></office:document-meta>"}var Ol=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function Cv(t,e,r,n,a){a[t]!=null||e==null||e===""||(a[t]=e,e=zt(e),n[n.length]=r?Oe(t,e,r):mn(t,e))}function rC(t,e){var r=e||{},n=[Mr,Oe("cp:coreProperties",null,{"xmlns:cp":Zr.CORE_PROPS,"xmlns:dc":Zr.dc,"xmlns:dcterms":Zr.dcterms,"xmlns:dcmitype":Zr.dcmitype,"xmlns:xsi":Zr.xsi})],a={};if(!t&&!r.Props)return n.join("");t&&(t.CreatedDate!=null&&Cv("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:fx(t.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),t.ModifiedDate!=null&&Cv("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:fx(t.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var o=0;o!=Ol.length;++o){var c=Ol[o],d=r.Props&&r.Props[c[1]]!=null?r.Props[c[1]]:t?t[c[1]]:null;d===!0?d="1":d===!1?d="0":typeof d=="number"&&(d=String(d)),d!=null&&Cv(c[0],d,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var cu=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],nC=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function aC(t){var e=[],r=Oe;return t||(t={}),t.Application="SheetJS",e[e.length]=Mr,e[e.length]=Oe("Properties",null,{xmlns:Zr.EXT_PROPS,"xmlns:vt":Zr.vt}),cu.forEach(function(n){if(t[n[1]]!==void 0){var a;switch(n[2]){case"string":a=zt(String(t[n[1]]));break;case"bool":a=t[n[1]]?"true":"false";break}a!==void 0&&(e[e.length]=r(n[0],a))}}),e[e.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=r("TitlesOfParts",r("vt:vector",t.SheetNames.map(function(n){return"<vt:lpstr>"+zt(n)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}function sC(t){var e=[Mr,Oe("Properties",null,{xmlns:Zr.CUST_PROPS,"xmlns:vt":Zr.vt})];if(!t)return e.join("");var r=1;return yn(t).forEach(function(a){++r,e[e.length]=Oe("property",YL(t[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:zt(a)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var WN={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function D8(t,e){var r=[];return yn(WN).map(function(n){for(var a=0;a<Ol.length;++a)if(Ol[a][1]==n)return Ol[a];for(a=0;a<cu.length;++a)if(cu[a][1]==n)return cu[a];throw n}).forEach(function(n){if(t[n[1]]!=null){var a=e&&e.Props&&e.Props[n[1]]!=null?e.Props[n[1]]:t[n[1]];n[2]==="date"&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"Z")),typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),r.push(mn(WN[n[1]]||n[1],a))}}),Oe("DocumentProperties",r.join(""),{xmlns:va.o})}function I8(t,e){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return t&&yn(t).forEach(function(o){if(Object.prototype.hasOwnProperty.call(t,o)){for(var c=0;c<Ol.length;++c)if(o==Ol[c][1])return;for(c=0;c<cu.length;++c)if(o==cu[c][1])return;for(c=0;c<r.length;++c)if(o==r[c])return;var d=t[o],m="string";typeof d=="number"?(m="float",d=String(d)):d===!0||d===!1?(m="boolean",d=d?"1":"0"):d=String(d),a.push(Oe(ON(o),d,{"dt:dt":m}))}}),e&&yn(e).forEach(function(o){if(Object.prototype.hasOwnProperty.call(e,o)&&!(t&&Object.prototype.hasOwnProperty.call(t,o))){var c=e[o],d="string";typeof c=="number"?(d="float",c=String(c)):c===!0||c===!1?(d="boolean",c=c?"1":"0"):c instanceof Date?(d="dateTime.tz",c=c.toISOString()):c=String(c),a.push(Oe(ON(o),c,{"dt:dt":d}))}}),"<"+n+' xmlns="'+va.o+'">'+a.join("")+"</"+n+">"}function k8(t){var e=typeof t=="string"?new Date(Date.parse(t)):t,r=e.getTime()/1e3+11644473600,n=r%Math.pow(2,32),a=(r-n)/Math.pow(2,32);n*=1e7,a*=1e7;var o=n/Math.pow(2,32)|0;o>0&&(n=n%Math.pow(2,32),a+=o);var c=ye(8);return c.write_shift(4,n),c.write_shift(4,a),c}function YN(t,e){var r=ye(4),n=ye(4);switch(r.write_shift(4,t==80?31:t),t){case 3:n.write_shift(-4,e);break;case 5:n=ye(8),n.write_shift(8,e,"f");break;case 11:n.write_shift(4,e?1:0);break;case 64:n=k8(e);break;case 31:case 80:for(n=ye(4+2*(e.length+1)+(e.length%2?0:2)),n.write_shift(4,e.length+1),n.write_shift(0,e,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+e)}return fn([r,n])}var iC=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function O8(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function KN(t,e,r){var n=ye(8),a=[],o=[],c=8,d=0,m=ye(8),h=ye(8);if(m.write_shift(4,2),m.write_shift(4,1200),h.write_shift(4,1),o.push(m),a.push(h),c+=8+m.length,!e){h=ye(8),h.write_shift(4,0),a.unshift(h);var p=[ye(4)];for(p[0].write_shift(4,t.length),d=0;d<t.length;++d){var v=t[d][0];for(m=ye(8+2*(v.length+1)+(v.length%2?0:2)),m.write_shift(4,d+2),m.write_shift(4,v.length+1),m.write_shift(0,v,"dbcs");m.l!=m.length;)m.write_shift(1,0);p.push(m)}m=fn(p),o.unshift(m),c+=8+m.length}for(d=0;d<t.length;++d)if(!(e&&!e[t[d][0]])&&!(iC.indexOf(t[d][0])>-1||nC.indexOf(t[d][0])>-1)&&t[d][1]!=null){var y=t[d][1],w=0;if(e){w=+e[t[d][0]];var N=r[w];if(N.p=="version"&&typeof y=="string"){var E=y.split(".");y=(+E[0]<<16)+(+E[1]||0)}m=YN(N.t,y)}else{var T=O8(y);T==-1&&(T=31,y=String(y)),m=YN(T,y)}o.push(m),h=ye(8),h.write_shift(4,e?w:2+d),a.push(h),c+=8+m.length}var j=8*(o.length+1);for(d=0;d<o.length;++d)a[d].write_shift(4,j),j+=o[d].length;return n.write_shift(4,c),n.write_shift(4,o.length),fn([n].concat(a).concat(o))}function XN(t,e,r,n,a,o){var c=ye(a?68:48),d=[c];c.write_shift(2,65534),c.write_shift(2,0),c.write_shift(4,842412599),c.write_shift(16,Xt.utils.consts.HEADER_CLSID,"hex"),c.write_shift(4,a?2:1),c.write_shift(16,e,"hex"),c.write_shift(4,a?68:48);var m=KN(t,r,n);if(d.push(m),a){var h=KN(a,null,null);c.write_shift(16,o,"hex"),c.write_shift(4,68+m.length),d.push(h)}return fn(d)}function M8(t,e){e||(e=ye(t));for(var r=0;r<t;++r)e.write_shift(1,0);return e}function F8(t,e){return t.read_shift(e)===1}function Bn(t,e){return e||(e=ye(2)),e.write_shift(2,+!!t),e}function oC(t){return t.read_shift(2,"u")}function Pa(t,e){return e||(e=ye(2)),e.write_shift(2,t),e}function lC(t,e,r){return r||(r=ye(2)),r.write_shift(1,e=="e"?+t:+!!t),r.write_shift(1,e=="e"?1:0),r}function cC(t,e,r){var n=t.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var o=t.read_shift(1);o&&(a="dbcs-cont")}else r.biff==12&&(a="wstr");r.biff>=2&&r.biff<=5&&(a="cpstr");var c=n?t.read_shift(n,a):"";return c}function P8(t){var e=t.t||"",r=ye(3);r.write_shift(2,e.length),r.write_shift(1,1);var n=ye(2*e.length);n.write_shift(2*e.length,e,"utf16le");var a=[r,n];return fn(a)}function L8(t,e,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(e,"cpstr");if(r.biff>=12)return t.read_shift(e,"dbcs-cont")}var a=t.read_shift(1);return a===0?n=t.read_shift(e,"sbcs-cont"):n=t.read_shift(e,"dbcs-cont"),n}function V8(t,e,r){var n=t.read_shift(r&&r.biff==2?1:2);return n===0?(t.l++,""):L8(t,n,r)}function B8(t,e,r){if(r.biff>5)return V8(t,e,r);var n=t.read_shift(1);return n===0?(t.l++,""):t.read_shift(n,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function uC(t,e,r){return r||(r=ye(3+2*t.length)),r.write_shift(2,t.length),r.write_shift(1,1),r.write_shift(31,t,"utf16le"),r}function QN(t,e){e||(e=ye(6+t.length*2)),e.write_shift(4,1+t.length);for(var r=0;r<t.length;++r)e.write_shift(2,t.charCodeAt(r));return e.write_shift(2,0),e}function U8(t){var e=ye(512),r=0,n=t.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var a=n.indexOf("#"),o=a>-1?31:23;switch(n.charAt(0)){case"#":o=28;break;case".":o&=-3;break}e.write_shift(4,2),e.write_shift(4,o);var c=[8,6815827,6619237,4849780,83];for(r=0;r<c.length;++r)e.write_shift(4,c[r]);if(o==28)n=n.slice(1),QN(n,e);else if(o&2){for(c="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<c.length;++r)e.write_shift(1,parseInt(c[r],16));var d=a>-1?n.slice(0,a):n;for(e.write_shift(4,2*(d.length+1)),r=0;r<d.length;++r)e.write_shift(2,d.charCodeAt(r));e.write_shift(2,0),o&8&&QN(a>-1?n.slice(a+1):"",e)}else{for(c="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<c.length;++r)e.write_shift(1,parseInt(c[r],16));for(var m=0;n.slice(m*3,m*3+3)=="../"||n.slice(m*3,m*3+3)=="..\\";)++m;for(e.write_shift(2,m),e.write_shift(4,n.length-3*m+1),r=0;r<n.length-3*m;++r)e.write_shift(1,n.charCodeAt(r+3*m)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),r=0;r<6;++r)e.write_shift(4,0)}return e.slice(0,e.l)}function ql(t,e,r,n){return n||(n=ye(6)),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(2,r||0),n}function z8(t,e,r){var n=r.biff>8?4:2,a=t.read_shift(n),o=t.read_shift(n,"i"),c=t.read_shift(n,"i");return[a,o,c]}function H8(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),a=t.read_shift(2);return{s:{c:n,r:e},e:{c:a,r}}}function dC(t,e){return e||(e=ye(8)),e.write_shift(2,t.s.r),e.write_shift(2,t.e.r),e.write_shift(2,t.s.c),e.write_shift(2,t.e.c),e}function k1(t,e,r){var n=1536,a=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var o=ye(a);return o.write_shift(2,n),o.write_shift(2,e),a>4&&o.write_shift(2,29282),a>6&&o.write_shift(2,1997),a>8&&(o.write_shift(2,49161),o.write_shift(2,1),o.write_shift(2,1798),o.write_shift(2,0)),o}function q8(t,e){var r=!e||e.biff==8,n=ye(r?112:54);for(n.write_shift(e.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function G8(t,e){var r=!e||e.biff>=8?2:1,n=ye(8+r*t.name.length);n.write_shift(4,t.pos),n.write_shift(1,t.hs||0),n.write_shift(1,t.dt),n.write_shift(1,t.name.length),e.biff>=8&&n.write_shift(1,1),n.write_shift(r*t.name.length,t.name,e.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function $8(t,e){var r=ye(8);r.write_shift(4,t.Count),r.write_shift(4,t.Unique);for(var n=[],a=0;a<t.length;++a)n[a]=P8(t[a]);var o=fn([r].concat(n));return o.parts=[r.length].concat(n.map(function(c){return c.length})),o}function W8(){var t=ye(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function Y8(t){var e=ye(18),r=1718;return t&&t.RTL&&(r|=64),e.write_shift(2,r),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function K8(t,e){var r=t.name||"Arial",n=e&&e.biff==5,a=n?15+r.length:16+2*r.length,o=ye(a);return o.write_shift(2,t.sz*20),o.write_shift(4,0),o.write_shift(2,400),o.write_shift(4,0),o.write_shift(2,0),o.write_shift(1,r.length),n||o.write_shift(1,1),o.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),o}function X8(t,e,r,n){var a=ye(10);return ql(t,e,n,a),a.write_shift(4,r),a}function Q8(t,e,r,n,a){var o=!a||a.biff==8,c=ye(8+ +o+(1+o)*r.length);return ql(t,e,n,c),c.write_shift(2,r.length),o&&c.write_shift(1,1),c.write_shift((1+o)*r.length,r,o?"utf16le":"sbcs"),c}function J8(t,e,r,n){var a=r&&r.biff==5;n||(n=ye(a?3+e.length:5+2*e.length)),n.write_shift(2,t),n.write_shift(a?1:2,e.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*e.length,e,a?"sbcs":"utf16le");var o=n.length>n.l?n.slice(0,n.l):n;return o.l==null&&(o.l=o.length),o}function Z8(t,e){var r=e.biff==8||!e.biff?4:2,n=ye(2*r+6);return n.write_shift(r,t.s.r),n.write_shift(r,t.e.r+1),n.write_shift(2,t.s.c),n.write_shift(2,t.e.c+1),n.write_shift(2,0),n}function JN(t,e,r,n){var a=r&&r.biff==5;n||(n=ye(a?16:20)),n.write_shift(2,0),t.style?(n.write_shift(2,t.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,t.numFmtId||0),n.write_shift(2,e<<4));var o=0;return t.numFmtId>0&&a&&(o|=1024),n.write_shift(4,o),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function e5(t){var e=ye(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function t5(t,e,r,n,a,o){var c=ye(8);return ql(t,e,n,c),lC(r,o,c),c}function r5(t,e,r,n){var a=ye(14);return ql(t,e,n,a),Hl(r,a),a}function n5(t,e,r){if(r.biff<8)return a5(t,e,r);for(var n=[],a=t.l+e,o=t.read_shift(r.biff>8?4:2);o--!==0;)n.push(z8(t,r.biff>8?12:6,r));if(t.l!=a)throw new Error("Bad ExternSheet: "+t.l+" != "+a);return n}function a5(t,e,r){t[t.l+1]==3&&t[t.l]++;var n=cC(t,e,r);return n.charCodeAt(0)==3?n.slice(1):n}function s5(t){var e=ye(2+t.length*8);e.write_shift(2,t.length);for(var r=0;r<t.length;++r)dC(t[r],e);return e}function i5(t){var e=ye(24),r=en(t[0]);e.write_shift(2,r.r),e.write_shift(2,r.r),e.write_shift(2,r.c),e.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)e.write_shift(1,parseInt(n[a],16));return fn([e,U8(t[1])])}function o5(t){var e=t[1].Tooltip,r=ye(10+2*(e.length+1));r.write_shift(2,2048);var n=en(t[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var a=0;a<e.length;++a)r.write_shift(2,e.charCodeAt(a));return r.write_shift(2,0),r}function l5(t){return t||(t=ye(4)),t.write_shift(2,1),t.write_shift(2,1),t}function c5(t,e,r){if(!r.cellStyles)return Hs(t,e);var n=r&&r.biff>=12?4:2,a=t.read_shift(n),o=t.read_shift(n),c=t.read_shift(n),d=t.read_shift(n),m=t.read_shift(2);n==2&&(t.l+=2);var h={s:a,e:o,w:c,ixfe:d,flags:m};return(r.biff>=5||!r.biff)&&(h.level=m>>8&7),h}function u5(t,e){var r=ye(12);r.write_shift(2,e),r.write_shift(2,e),r.write_shift(2,t.width*256),r.write_shift(2,0);var n=0;return t.hidden&&(n|=1),r.write_shift(1,n),n=t.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function d5(t){for(var e=ye(2*t),r=0;r<t;++r)e.write_shift(2,r+1);return e}function h5(t,e,r){var n=ye(15);return ef(n,t,e),n.write_shift(8,r,"f"),n}function f5(t,e,r){var n=ye(9);return ef(n,t,e),n.write_shift(2,r),n}var m5=(function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=w1({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(d,m){var h=[],p=zl(1);switch(m.type){case"base64":p=as(Ri(d));break;case"binary":p=as(d);break;case"buffer":case"array":p=d;break}ga(p,0);var v=p.read_shift(1),y=!!(v&136),w=!1,N=!1;switch(v){case 2:break;case 3:break;case 48:w=!0,y=!0;break;case 49:w=!0,y=!0;break;case 131:break;case 139:break;case 140:N=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+v.toString(16))}var E=0,T=521;v==2&&(E=p.read_shift(2)),p.l+=3,v!=2&&(E=p.read_shift(4)),E>1048576&&(E=1e6),v!=2&&(T=p.read_shift(2));var j=p.read_shift(2),O=m.codepage||1252;v!=2&&(p.l+=16,p.read_shift(1),p[p.l]!==0&&(O=t[p[p.l]]),p.l+=1,p.l+=2),N&&(p.l+=36);for(var P=[],z={},Q=Math.min(p.length,v==2?521:T-10-(w?264:0)),U=N?32:11;p.l<Q&&p[p.l]!=13;)switch(z={},z.name=v0.utils.decode(O,p.slice(p.l,p.l+U)).replace(/[\u0000\r\n].*$/g,""),p.l+=U,z.type=String.fromCharCode(p.read_shift(1)),v!=2&&!N&&(z.offset=p.read_shift(4)),z.len=p.read_shift(1),v==2&&(z.offset=p.read_shift(2)),z.dec=p.read_shift(1),z.name.length&&P.push(z),v!=2&&(p.l+=N?13:14),z.type){case"B":(!w||z.len!=8)&&m.WTF&&console.log("Skipping "+z.name+":"+z.type);break;case"G":case"P":m.WTF&&console.log("Skipping "+z.name+":"+z.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+z.type)}if(p[p.l]!==13&&(p.l=T-1),p.read_shift(1)!==13)throw new Error("DBF Terminator not found "+p.l+" "+p[p.l]);p.l=T;var C=0,k=0;for(h[0]=[],k=0;k!=P.length;++k)h[0][k]=P[k].name;for(;E-- >0;){if(p[p.l]===42){p.l+=j;continue}for(++p.l,h[++C]=[],k=0,k=0;k!=P.length;++k){var S=p.slice(p.l,p.l+P[k].len);p.l+=P[k].len,ga(S,0);var F=v0.utils.decode(O,S);switch(P[k].type){case"C":F.trim().length&&(h[C][k]=F.replace(/\s+$/,""));break;case"D":F.length===8?h[C][k]=new Date(+F.slice(0,4),+F.slice(4,6)-1,+F.slice(6,8)):h[C][k]=F;break;case"F":h[C][k]=parseFloat(F.trim());break;case"+":case"I":h[C][k]=N?S.read_shift(-4,"i")^2147483648:S.read_shift(4,"i");break;case"L":switch(F.trim().toUpperCase()){case"Y":case"T":h[C][k]=!0;break;case"N":case"F":h[C][k]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+F+"|")}break;case"M":if(!y)throw new Error("DBF Unexpected MEMO for type "+v.toString(16));h[C][k]="##MEMO##"+(N?parseInt(F.trim(),10):S.read_shift(4));break;case"N":F=F.replace(/\u0000/g,"").trim(),F&&F!="."&&(h[C][k]=+F||0);break;case"@":h[C][k]=new Date(S.read_shift(-8,"f")-621356832e5);break;case"T":h[C][k]=new Date((S.read_shift(4)-2440588)*864e5+S.read_shift(4));break;case"Y":h[C][k]=S.read_shift(4,"i")/1e4+S.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":h[C][k]=-S.read_shift(-8,"f");break;case"B":if(w&&P[k].len==8){h[C][k]=S.read_shift(8,"f");break}case"G":case"P":S.l+=P[k].len;break;case"0":if(P[k].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+P[k].type)}}}if(v!=2&&p.l<p.length&&p[p.l++]!=26)throw new Error("DBF EOF Marker missing "+(p.l-1)+" of "+p.length+" "+p[p.l-1].toString(16));return m&&m.sheetRows&&(h=h.slice(0,m.sheetRows)),m.DBF=P,h}function n(d,m){var h=m||{};h.dateNF||(h.dateNF="yyyymmdd");var p=Ou(r(d,h),h);return p["!cols"]=h.DBF.map(function(v){return{wch:v.len,DBF:v}}),delete h.DBF,p}function a(d,m){try{return Zl(n(d,m),m)}catch(h){if(m&&m.WTF)throw h}return{SheetNames:[],Sheets:{}}}var o={B:8,C:250,L:1,D:8,"?":0,"":0};function c(d,m){var h=m||{};if(+h.codepage>=0&&bh(+h.codepage),h.type=="string")throw new Error("Cannot write DBF to JS string");var p=Zn(),v=R0(d,{header:1,raw:!0,cellDates:!0}),y=v[0],w=v.slice(1),N=d["!cols"]||[],E=0,T=0,j=0,O=1;for(E=0;E<y.length;++E){if(((N[E]||{}).DBF||{}).name){y[E]=N[E].DBF.name,++j;continue}if(y[E]!=null){if(++j,typeof y[E]=="number"&&(y[E]=y[E].toString(10)),typeof y[E]!="string")throw new Error("DBF Invalid column name "+y[E]+" |"+typeof y[E]+"|");if(y.indexOf(y[E])!==E){for(T=0;T<1024;++T)if(y.indexOf(y[E]+"_"+T)==-1){y[E]+="_"+T;break}}}}var P=ir(d["!ref"]),z=[],Q=[],U=[];for(E=0;E<=P.e.c-P.s.c;++E){var C="",k="",S=0,F=[];for(T=0;T<w.length;++T)w[T][E]!=null&&F.push(w[T][E]);if(F.length==0||y[E]==null){z[E]="?";continue}for(T=0;T<F.length;++T){switch(typeof F[T]){case"number":k="B";break;case"string":k="C";break;case"boolean":k="L";break;case"object":k=F[T]instanceof Date?"D":"C";break;default:k="C"}S=Math.max(S,String(F[T]).length),C=C&&C!=k?"C":k}S>250&&(S=250),k=((N[E]||{}).DBF||{}).type,k=="C"&&N[E].DBF.len>S&&(S=N[E].DBF.len),C=="B"&&k=="N"&&(C="N",U[E]=N[E].DBF.dec,S=N[E].DBF.len),Q[E]=C=="C"||k=="N"?S:o[C]||0,O+=Q[E],z[E]=C}var M=p.next(32);for(M.write_shift(4,318902576),M.write_shift(4,w.length),M.write_shift(2,296+32*j),M.write_shift(2,O),E=0;E<4;++E)M.write_shift(4,0);for(M.write_shift(4,0|(+e[fj]||3)<<8),E=0,T=0;E<y.length;++E)if(y[E]!=null){var A=p.next(32),D=(y[E].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);A.write_shift(1,D,"sbcs"),A.write_shift(1,z[E]=="?"?"C":z[E],"sbcs"),A.write_shift(4,T),A.write_shift(1,Q[E]||o[z[E]]||0),A.write_shift(1,U[E]||0),A.write_shift(1,2),A.write_shift(4,0),A.write_shift(1,0),A.write_shift(4,0),A.write_shift(4,0),T+=Q[E]||o[z[E]]||0}var we=p.next(264);for(we.write_shift(4,13),E=0;E<65;++E)we.write_shift(4,0);for(E=0;E<w.length;++E){var Me=p.next(O);for(Me.write_shift(1,0),T=0;T<y.length;++T)if(y[T]!=null)switch(z[T]){case"L":Me.write_shift(1,w[E][T]==null?63:w[E][T]?84:70);break;case"B":Me.write_shift(8,w[E][T]||0,"f");break;case"N":var ge="0";for(typeof w[E][T]=="number"&&(ge=w[E][T].toFixed(U[T]||0)),j=0;j<Q[T]-ge.length;++j)Me.write_shift(1,32);Me.write_shift(1,ge,"sbcs");break;case"D":w[E][T]?(Me.write_shift(4,("0000"+w[E][T].getFullYear()).slice(-4),"sbcs"),Me.write_shift(2,("00"+(w[E][T].getMonth()+1)).slice(-2),"sbcs"),Me.write_shift(2,("00"+w[E][T].getDate()).slice(-2),"sbcs")):Me.write_shift(8,"00000000","sbcs");break;case"C":var De=String(w[E][T]!=null?w[E][T]:"").slice(0,Q[T]);for(Me.write_shift(1,De,"sbcs"),j=0;j<Q[T]-De.length;++j)Me.write_shift(1,32);break}}return p.next(1).write_shift(1,26),p.end()}return{to_workbook:a,to_sheet:n,from_sheet:c}})(),p5=(function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+yn(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(y,w){var N=t[w];return typeof N=="number"?wN(N):N},n=function(y,w,N){var E=w.charCodeAt(0)-32<<4|N.charCodeAt(0)-48;return E==59?y:wN(E)};t["|"]=254;function a(y,w){switch(w.type){case"base64":return o(Ri(y),w);case"binary":return o(y,w);case"buffer":return o(It&&Buffer.isBuffer(y)?y.toString("binary"):Kh(y),w);case"array":return o(op(y),w)}throw new Error("Unrecognized type "+w.type)}function o(y,w){var N=y.split(/[\n\r]+/),E=-1,T=-1,j=0,O=0,P=[],z=[],Q=null,U={},C=[],k=[],S=[],F=0,M;for(+w.codepage>=0&&bh(+w.codepage);j!==N.length;++j){F=0;var A=N[j].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(e,r),D=A.replace(/;;/g,"\0").split(";").map(function(re){return re.replace(/\u0000/g,";")}),we=D[0],Me;if(A.length>0)switch(we){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":D[1].charAt(0)=="P"&&z.push(A.slice(3).replace(/;;/g,";"));break;case"C":var ge=!1,De=!1,Le=!1,Je=!1,ee=-1,_e=-1;for(O=1;O<D.length;++O)switch(D[O].charAt(0)){case"A":break;case"X":T=parseInt(D[O].slice(1))-1,De=!0;break;case"Y":for(E=parseInt(D[O].slice(1))-1,De||(T=0),M=P.length;M<=E;++M)P[M]=[];break;case"K":Me=D[O].slice(1),Me.charAt(0)==='"'?Me=Me.slice(1,Me.length-1):Me==="TRUE"?Me=!0:Me==="FALSE"?Me=!1:isNaN(Ei(Me))?isNaN(jh(Me).getDate())||(Me=zn(Me)):(Me=Ei(Me),Q!==null&&bj(Q)&&(Me=Aj(Me))),ge=!0;break;case"E":Je=!0;var Y=f9(D[O].slice(1),{r:E,c:T});P[E][T]=[P[E][T],Y];break;case"S":Le=!0,P[E][T]=[P[E][T],"S5S"];break;case"G":break;case"R":ee=parseInt(D[O].slice(1))-1;break;case"C":_e=parseInt(D[O].slice(1))-1;break;default:if(w&&w.WTF)throw new Error("SYLK bad record "+A)}if(ge&&(P[E][T]&&P[E][T].length==2?P[E][T][0]=Me:P[E][T]=Me,Q=null),Le){if(Je)throw new Error("SYLK shared formula cannot have own formula");var te=ee>-1&&P[ee][_e];if(!te||!te[1])throw new Error("SYLK shared formula cannot find base");P[E][T][1]=m9(te[1],{r:E-ee,c:T-_e})}break;case"F":var Z=0;for(O=1;O<D.length;++O)switch(D[O].charAt(0)){case"X":T=parseInt(D[O].slice(1))-1,++Z;break;case"Y":for(E=parseInt(D[O].slice(1))-1,M=P.length;M<=E;++M)P[M]=[];break;case"M":F=parseInt(D[O].slice(1))/20;break;case"F":break;case"G":break;case"P":Q=z[parseInt(D[O].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(S=D[O].slice(1).split(" "),M=parseInt(S[0],10);M<=parseInt(S[1],10);++M)F=parseInt(S[2],10),k[M-1]=F===0?{hidden:!0}:{wch:F},O1(k[M-1]);break;case"C":T=parseInt(D[O].slice(1))-1,k[T]||(k[T]={});break;case"R":E=parseInt(D[O].slice(1))-1,C[E]||(C[E]={}),F>0?(C[E].hpt=F,C[E].hpx=gC(F)):F===0&&(C[E].hidden=!0);break;default:if(w&&w.WTF)throw new Error("SYLK bad record "+A)}Z<1&&(Q=null);break;default:if(w&&w.WTF)throw new Error("SYLK bad record "+A)}}return C.length>0&&(U["!rows"]=C),k.length>0&&(U["!cols"]=k),w&&w.sheetRows&&(P=P.slice(0,w.sheetRows)),[P,U]}function c(y,w){var N=a(y,w),E=N[0],T=N[1],j=Ou(E,w);return yn(T).forEach(function(O){j[O]=T[O]}),j}function d(y,w){return Zl(c(y,w),w)}function m(y,w,N,E){var T="C;Y"+(N+1)+";X"+(E+1)+";K";switch(y.t){case"n":T+=y.v||0,y.f&&!y.F&&(T+=";E"+F1(y.f,{r:N,c:E}));break;case"b":T+=y.v?"TRUE":"FALSE";break;case"e":T+=y.w||y.v;break;case"d":T+='"'+(y.w||y.v)+'"';break;case"s":T+='"'+y.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return T}function h(y,w){w.forEach(function(N,E){var T="F;W"+(E+1)+" "+(E+1)+" ";N.hidden?T+="0":(typeof N.width=="number"&&!N.wpx&&(N.wpx=S0(N.width)),typeof N.wpx=="number"&&!N.wch&&(N.wch=j0(N.wpx)),typeof N.wch=="number"&&(T+=Math.round(N.wch))),T.charAt(T.length-1)!=" "&&y.push(T)})}function p(y,w){w.forEach(function(N,E){var T="F;";N.hidden?T+="M0;":N.hpt?T+="M"+20*N.hpt+";":N.hpx&&(T+="M"+20*C0(N.hpx)+";"),T.length>2&&y.push(T+"R"+(E+1))})}function v(y,w){var N=["ID;PWXL;N;E"],E=[],T=ir(y["!ref"]),j,O=Array.isArray(y),P=`\r
`;N.push("P;PGeneral"),N.push("F;P0;DG0G8;M255"),y["!cols"]&&h(N,y["!cols"]),y["!rows"]&&p(N,y["!rows"]),N.push("B;Y"+(T.e.r-T.s.r+1)+";X"+(T.e.c-T.s.c+1)+";D"+[T.s.c,T.s.r,T.e.c,T.e.r].join(" "));for(var z=T.s.r;z<=T.e.r;++z)for(var Q=T.s.c;Q<=T.e.c;++Q){var U=Ht({r:z,c:Q});j=O?(y[z]||[])[Q]:y[U],!(!j||j.v==null&&(!j.f||j.F))&&E.push(m(j,y,z,Q))}return N.join(P)+P+E.join(P)+P+"E"+P}return{to_workbook:d,to_sheet:c,from_sheet:v}})(),g5=(function(){function t(o,c){switch(c.type){case"base64":return e(Ri(o),c);case"binary":return e(o,c);case"buffer":return e(It&&Buffer.isBuffer(o)?o.toString("binary"):Kh(o),c);case"array":return e(op(o),c)}throw new Error("Unrecognized type "+c.type)}function e(o,c){for(var d=o.split(`
`),m=-1,h=-1,p=0,v=[];p!==d.length;++p){if(d[p].trim()==="BOT"){v[++m]=[],h=0;continue}if(!(m<0)){var y=d[p].trim().split(","),w=y[0],N=y[1];++p;for(var E=d[p]||"";(E.match(/["]/g)||[]).length&1&&p<d.length-1;)E+=`
`+d[++p];switch(E=E.trim(),+w){case-1:if(E==="BOT"){v[++m]=[],h=0;continue}else if(E!=="EOD")throw new Error("Unrecognized DIF special command "+E);break;case 0:E==="TRUE"?v[m][h]=!0:E==="FALSE"?v[m][h]=!1:isNaN(Ei(N))?isNaN(jh(N).getDate())?v[m][h]=N:v[m][h]=zn(N):v[m][h]=Ei(N),++h;break;case 1:E=E.slice(1,E.length-1),E=E.replace(/""/g,'"'),E&&E.match(/^=".*"$/)&&(E=E.slice(2,-1)),v[m][h++]=E!==""?E:null;break}if(E==="EOD")break}}return c&&c.sheetRows&&(v=v.slice(0,c.sheetRows)),v}function r(o,c){return Ou(t(o,c),c)}function n(o,c){return Zl(r(o,c),c)}var a=(function(){var o=function(m,h,p,v,y){m.push(h),m.push(p+","+v),m.push('"'+y.replace(/"/g,'""')+'"')},c=function(m,h,p,v){m.push(h+","+p),m.push(h==1?'"'+v.replace(/"/g,'""')+'"':v)};return function(m){var h=[],p=ir(m["!ref"]),v,y=Array.isArray(m);o(h,"TABLE",0,1,"sheetjs"),o(h,"VECTORS",0,p.e.r-p.s.r+1,""),o(h,"TUPLES",0,p.e.c-p.s.c+1,""),o(h,"DATA",0,0,"");for(var w=p.s.r;w<=p.e.r;++w){c(h,-1,0,"BOT");for(var N=p.s.c;N<=p.e.c;++N){var E=Ht({r:w,c:N});if(v=y?(m[w]||[])[N]:m[E],!v){c(h,1,0,"");continue}switch(v.t){case"n":var T=v.w;!T&&v.v!=null&&(T=v.v),T==null?v.f&&!v.F?c(h,1,0,"="+v.f):c(h,1,0,""):c(h,0,T,"V");break;case"b":c(h,0,v.v?1:0,v.v?"TRUE":"FALSE");break;case"s":c(h,1,0,isNaN(v.v)?v.v:'="'+v.v+'"');break;case"d":v.w||(v.w=Uo(v.z||xr[14],ea(zn(v.v)))),c(h,0,v.w,"V");break;default:c(h,1,0,"")}}}c(h,-1,0,"EOD");var j=`\r
`,O=h.join(j);return O}})();return{to_workbook:n,to_sheet:r,from_sheet:a}})(),hC=(function(){function t(v){return v.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(v){return v.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(v,y){for(var w=v.split(`
`),N=-1,E=-1,T=0,j=[];T!==w.length;++T){var O=w[T].trim().split(":");if(O[0]==="cell"){var P=en(O[1]);if(j.length<=P.r)for(N=j.length;N<=P.r;++N)j[N]||(j[N]=[]);switch(N=P.r,E=P.c,O[2]){case"t":j[N][E]=t(O[3]);break;case"v":j[N][E]=+O[3];break;case"vtf":var z=O[O.length-1];case"vtc":O[3]==="nl"?j[N][E]=!!+O[4]:j[N][E]=+O[4],O[2]=="vtf"&&(j[N][E]=[j[N][E],z])}}}return y&&y.sheetRows&&(j=j.slice(0,y.sheetRows)),j}function n(v,y){return Ou(r(v,y),y)}function a(v,y){return Zl(n(v,y),y)}var o=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),c=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,d=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),m="--SocialCalcSpreadsheetControlSave--";function h(v){if(!v||!v["!ref"])return"";for(var y=[],w=[],N,E="",T=_a(v["!ref"]),j=Array.isArray(v),O=T.s.r;O<=T.e.r;++O)for(var P=T.s.c;P<=T.e.c;++P)if(E=Ht({r:O,c:P}),N=j?(v[O]||[])[P]:v[E],!(!N||N.v==null||N.t==="z")){switch(w=["cell",E,"t"],N.t){case"s":case"str":w.push(e(N.v));break;case"n":N.f?(w[2]="vtf",w[3]="n",w[4]=N.v,w[5]=e(N.f)):(w[2]="v",w[3]=N.v);break;case"b":w[2]="vt"+(N.f?"f":"c"),w[3]="nl",w[4]=N.v?"1":"0",w[5]=e(N.f||(N.v?"TRUE":"FALSE"));break;case"d":var z=ea(zn(N.v));w[2]="vtc",w[3]="nd",w[4]=""+z,w[5]=N.w||Uo(N.z||xr[14],z);break;case"e":continue}y.push(w.join(":"))}return y.push("sheet:c:"+(T.e.c-T.s.c+1)+":r:"+(T.e.r-T.s.r+1)+":tvf:1"),y.push("valueformat:1:text-wiki"),y.join(`
`)}function p(v){return[o,c,d,c,h(v),m].join(`
`)}return{to_workbook:a,to_sheet:n,from_sheet:p}})(),v5=(function(){function t(p,v,y,w,N){N.raw?v[y][w]=p:p===""||(p==="TRUE"?v[y][w]=!0:p==="FALSE"?v[y][w]=!1:isNaN(Ei(p))?isNaN(jh(p).getDate())?v[y][w]=p:v[y][w]=zn(p):v[y][w]=Ei(p))}function e(p,v){var y=v||{},w=[];if(!p||p.length===0)return w;for(var N=p.split(/[\r\n]/),E=N.length-1;E>=0&&N[E].length===0;)--E;for(var T=10,j=0,O=0;O<=E;++O)j=N[O].indexOf(" "),j==-1?j=N[O].length:j++,T=Math.max(T,j);for(O=0;O<=E;++O){w[O]=[];var P=0;for(t(N[O].slice(0,T).trim(),w,O,P,y),P=1;P<=(N[O].length-T)/10+1;++P)t(N[O].slice(T+(P-1)*10,T+P*10).trim(),w,O,P,y)}return y.sheetRows&&(w=w.slice(0,y.sheetRows)),w}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function a(p){for(var v={},y=!1,w=0,N=0;w<p.length;++w)(N=p.charCodeAt(w))==34?y=!y:!y&&N in r&&(v[N]=(v[N]||0)+1);N=[];for(w in v)Object.prototype.hasOwnProperty.call(v,w)&&N.push([v[w],w]);if(!N.length){v=n;for(w in v)Object.prototype.hasOwnProperty.call(v,w)&&N.push([v[w],w])}return N.sort(function(E,T){return E[0]-T[0]||n[E[1]]-n[T[1]]}),r[N.pop()[1]]||44}function o(p,v){var y=v||{},w="",N=y.dense?[]:{},E={s:{c:0,r:0},e:{c:0,r:0}};p.slice(0,4)=="sep="?p.charCodeAt(5)==13&&p.charCodeAt(6)==10?(w=p.charAt(4),p=p.slice(7)):p.charCodeAt(5)==13||p.charCodeAt(5)==10?(w=p.charAt(4),p=p.slice(6)):w=a(p.slice(0,1024)):y&&y.FS?w=y.FS:w=a(p.slice(0,1024));var T=0,j=0,O=0,P=0,z=0,Q=w.charCodeAt(0),U=!1,C=0,k=p.charCodeAt(0);p=p.replace(/\r\n/mg,`
`);var S=y.dateNF!=null?kL(y.dateNF):null;function F(){var M=p.slice(P,z),A={};if(M.charAt(0)=='"'&&M.charAt(M.length-1)=='"'&&(M=M.slice(1,-1).replace(/""/g,'"')),M.length===0)A.t="z";else if(y.raw)A.t="s",A.v=M;else if(M.trim().length===0)A.t="s",A.v=M;else if(M.charCodeAt(0)==61)M.charCodeAt(1)==34&&M.charCodeAt(M.length-1)==34?(A.t="s",A.v=M.slice(2,-1).replace(/""/g,'"')):p9(M)?(A.t="n",A.f=M.slice(1)):(A.t="s",A.v=M);else if(M=="TRUE")A.t="b",A.v=!0;else if(M=="FALSE")A.t="b",A.v=!1;else if(!isNaN(O=Ei(M)))A.t="n",y.cellText!==!1&&(A.w=M),A.v=O;else if(!isNaN(jh(M).getDate())||S&&M.match(S)){A.z=y.dateNF||xr[14];var D=0;S&&M.match(S)&&(M=OL(M,y.dateNF,M.match(S)||[]),D=1),y.cellDates?(A.t="d",A.v=zn(M,D)):(A.t="n",A.v=ea(zn(M,D))),y.cellText!==!1&&(A.w=Uo(A.z,A.v instanceof Date?ea(A.v):A.v)),y.cellNF||delete A.z}else A.t="s",A.v=M;if(A.t=="z"||(y.dense?(N[T]||(N[T]=[]),N[T][j]=A):N[Ht({c:j,r:T})]=A),P=z+1,k=p.charCodeAt(P),E.e.c<j&&(E.e.c=j),E.e.r<T&&(E.e.r=T),C==Q)++j;else if(j=0,++T,y.sheetRows&&y.sheetRows<=T)return!0}e:for(;z<p.length;++z)switch(C=p.charCodeAt(z)){case 34:k===34&&(U=!U);break;case Q:case 10:case 13:if(!U&&F())break e;break}return z-P>0&&F(),N["!ref"]=Or(E),N}function c(p,v){return!(v&&v.PRN)||v.FS||p.slice(0,4)=="sep="||p.indexOf("	")>=0||p.indexOf(",")>=0||p.indexOf(";")>=0?o(p,v):Ou(e(p,v),v)}function d(p,v){var y="",w=v.type=="string"?[0,0,0,0]:AU(p,v);switch(v.type){case"base64":y=Ri(p);break;case"binary":y=p;break;case"buffer":v.codepage==65001?y=p.toString("utf8"):v.codepage&&typeof v0<"u"||(y=It&&Buffer.isBuffer(p)?p.toString("binary"):Kh(p));break;case"array":y=op(p);break;case"string":y=p;break;default:throw new Error("Unrecognized type "+v.type)}return w[0]==239&&w[1]==187&&w[2]==191?y=lh(y.slice(3)):v.type!="string"&&v.type!="buffer"&&v.codepage==65001?y=lh(y):v.type=="binary"&&typeof v0<"u",y.slice(0,19)=="socialcalc:version:"?hC.to_sheet(v.type=="string"?y:lh(y),v):c(y,v)}function m(p,v){return Zl(d(p,v),v)}function h(p){for(var v=[],y=ir(p["!ref"]),w,N=Array.isArray(p),E=y.s.r;E<=y.e.r;++E){for(var T=[],j=y.s.c;j<=y.e.c;++j){var O=Ht({r:E,c:j});if(w=N?(p[E]||[])[j]:p[O],!w||w.v==null){T.push("          ");continue}for(var P=(w.w||(Di(w),w.w)||"").slice(0,10);P.length<10;)P+=" ";T.push(P+(j===0?" ":""))}v.push(T.join(""))}return v.join(`
`)}return{to_workbook:m,to_sheet:d,from_sheet:h}})(),ZN=(function(){function t(Y,te,Z){if(Y){ga(Y,Y.l||0);for(var re=Z.Enum||ee;Y.l<Y.length;){var de=Y.read_shift(2),Ve=re[de]||re[65535],ke=Y.read_shift(2),He=Y.l+ke,ae=Ve.f&&Ve.f(Y,ke,Z);if(Y.l=He,te(ae,Ve,de))return}}}function e(Y,te){switch(te.type){case"base64":return r(as(Ri(Y)),te);case"binary":return r(as(Y),te);case"buffer":case"array":return r(Y,te)}throw"Unsupported type "+te.type}function r(Y,te){if(!Y)return Y;var Z=te||{},re=Z.dense?[]:{},de="Sheet1",Ve="",ke=0,He={},ae=[],Be=[],tt={s:{r:0,c:0},e:{r:0,c:0}},qt=Z.sheetRows||0;if(Y[2]==0&&(Y[3]==8||Y[3]==9)&&Y.length>=16&&Y[14]==5&&Y[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(Y[2]==2)Z.Enum=ee,t(Y,function(Ue,nn,Mt){switch(Mt){case 0:Z.vers=Ue,Ue>=4096&&(Z.qpro=!0);break;case 6:tt=Ue;break;case 204:Ue&&(Ve=Ue);break;case 222:Ve=Ue;break;case 15:case 51:Z.qpro||(Ue[1].v=Ue[1].v.slice(1));case 13:case 14:case 16:Mt==14&&(Ue[2]&112)==112&&(Ue[2]&15)>1&&(Ue[2]&15)<15&&(Ue[1].z=Z.dateNF||xr[14],Z.cellDates&&(Ue[1].t="d",Ue[1].v=Aj(Ue[1].v))),Z.qpro&&Ue[3]>ke&&(re["!ref"]=Or(tt),He[de]=re,ae.push(de),re=Z.dense?[]:{},tt={s:{r:0,c:0},e:{r:0,c:0}},ke=Ue[3],de=Ve||"Sheet"+(ke+1),Ve="");var er=Z.dense?(re[Ue[0].r]||[])[Ue[0].c]:re[Ht(Ue[0])];if(er){er.t=Ue[1].t,er.v=Ue[1].v,Ue[1].z!=null&&(er.z=Ue[1].z),Ue[1].f!=null&&(er.f=Ue[1].f);break}Z.dense?(re[Ue[0].r]||(re[Ue[0].r]=[]),re[Ue[0].r][Ue[0].c]=Ue[1]):re[Ht(Ue[0])]=Ue[1];break}},Z);else if(Y[2]==26||Y[2]==14)Z.Enum=_e,Y[2]==14&&(Z.qpro=!0,Y.l=0),t(Y,function(Ue,nn,Mt){switch(Mt){case 204:de=Ue;break;case 22:Ue[1].v=Ue[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Ue[3]>ke&&(re["!ref"]=Or(tt),He[de]=re,ae.push(de),re=Z.dense?[]:{},tt={s:{r:0,c:0},e:{r:0,c:0}},ke=Ue[3],de="Sheet"+(ke+1)),qt>0&&Ue[0].r>=qt)break;Z.dense?(re[Ue[0].r]||(re[Ue[0].r]=[]),re[Ue[0].r][Ue[0].c]=Ue[1]):re[Ht(Ue[0])]=Ue[1],tt.e.c<Ue[0].c&&(tt.e.c=Ue[0].c),tt.e.r<Ue[0].r&&(tt.e.r=Ue[0].r);break;case 27:Ue[14e3]&&(Be[Ue[14e3][0]]=Ue[14e3][1]);break;case 1537:Be[Ue[0]]=Ue[1],Ue[0]==ke&&(de=Ue[1]);break}},Z);else throw new Error("Unrecognized LOTUS BOF "+Y[2]);if(re["!ref"]=Or(tt),He[Ve||de]=re,ae.push(Ve||de),!Be.length)return{SheetNames:ae,Sheets:He};for(var xt={},na=[],Gt=0;Gt<Be.length;++Gt)He[ae[Gt]]?(na.push(Be[Gt]||ae[Gt]),xt[Be[Gt]]=He[Be[Gt]]||He[ae[Gt]]):(na.push(Be[Gt]),xt[Be[Gt]]={"!ref":"A1"});return{SheetNames:na,Sheets:xt}}function n(Y,te){var Z=te||{};if(+Z.codepage>=0&&bh(+Z.codepage),Z.type=="string")throw new Error("Cannot write WK1 to JS string");var re=Zn(),de=ir(Y["!ref"]),Ve=Array.isArray(Y),ke=[];Fe(re,0,o(1030)),Fe(re,6,m(de));for(var He=Math.min(de.e.r,8191),ae=de.s.r;ae<=He;++ae)for(var Be=vn(ae),tt=de.s.c;tt<=de.e.c;++tt){ae===de.s.r&&(ke[tt]=Cn(tt));var qt=ke[tt]+Be,xt=Ve?(Y[ae]||[])[tt]:Y[qt];if(!(!xt||xt.t=="z"))if(xt.t=="n")(xt.v|0)==xt.v&&xt.v>=-32768&&xt.v<=32767?Fe(re,13,w(ae,tt,xt.v)):Fe(re,14,E(ae,tt,xt.v));else{var na=Di(xt);Fe(re,15,v(ae,tt,na.slice(0,239)))}}return Fe(re,1),re.end()}function a(Y,te){var Z=te||{};if(+Z.codepage>=0&&bh(+Z.codepage),Z.type=="string")throw new Error("Cannot write WK3 to JS string");var re=Zn();Fe(re,0,c(Y));for(var de=0,Ve=0;de<Y.SheetNames.length;++de)(Y.Sheets[Y.SheetNames[de]]||{})["!ref"]&&Fe(re,27,Je(Y.SheetNames[de],Ve++));var ke=0;for(de=0;de<Y.SheetNames.length;++de){var He=Y.Sheets[Y.SheetNames[de]];if(!(!He||!He["!ref"])){for(var ae=ir(He["!ref"]),Be=Array.isArray(He),tt=[],qt=Math.min(ae.e.r,8191),xt=ae.s.r;xt<=qt;++xt)for(var na=vn(xt),Gt=ae.s.c;Gt<=ae.e.c;++Gt){xt===ae.s.r&&(tt[Gt]=Cn(Gt));var Ue=tt[Gt]+na,nn=Be?(He[xt]||[])[Gt]:He[Ue];if(!(!nn||nn.t=="z"))if(nn.t=="n")Fe(re,23,F(xt,Gt,ke,nn.v));else{var Mt=Di(nn);Fe(re,22,C(xt,Gt,ke,Mt.slice(0,239)))}}++ke}}return Fe(re,1),re.end()}function o(Y){var te=ye(2);return te.write_shift(2,Y),te}function c(Y){var te=ye(26);te.write_shift(2,4096),te.write_shift(2,4),te.write_shift(4,0);for(var Z=0,re=0,de=0,Ve=0;Ve<Y.SheetNames.length;++Ve){var ke=Y.SheetNames[Ve],He=Y.Sheets[ke];if(!(!He||!He["!ref"])){++de;var ae=_a(He["!ref"]);Z<ae.e.r&&(Z=ae.e.r),re<ae.e.c&&(re=ae.e.c)}}return Z>8191&&(Z=8191),te.write_shift(2,Z),te.write_shift(1,de),te.write_shift(1,re),te.write_shift(2,0),te.write_shift(2,0),te.write_shift(1,1),te.write_shift(1,2),te.write_shift(4,0),te.write_shift(4,0),te}function d(Y,te,Z){var re={s:{c:0,r:0},e:{c:0,r:0}};return te==8&&Z.qpro?(re.s.c=Y.read_shift(1),Y.l++,re.s.r=Y.read_shift(2),re.e.c=Y.read_shift(1),Y.l++,re.e.r=Y.read_shift(2),re):(re.s.c=Y.read_shift(2),re.s.r=Y.read_shift(2),te==12&&Z.qpro&&(Y.l+=2),re.e.c=Y.read_shift(2),re.e.r=Y.read_shift(2),te==12&&Z.qpro&&(Y.l+=2),re.s.c==65535&&(re.s.c=re.e.c=re.s.r=re.e.r=0),re)}function m(Y){var te=ye(8);return te.write_shift(2,Y.s.c),te.write_shift(2,Y.s.r),te.write_shift(2,Y.e.c),te.write_shift(2,Y.e.r),te}function h(Y,te,Z){var re=[{c:0,r:0},{t:"n",v:0},0,0];return Z.qpro&&Z.vers!=20768?(re[0].c=Y.read_shift(1),re[3]=Y.read_shift(1),re[0].r=Y.read_shift(2),Y.l+=2):(re[2]=Y.read_shift(1),re[0].c=Y.read_shift(2),re[0].r=Y.read_shift(2)),re}function p(Y,te,Z){var re=Y.l+te,de=h(Y,te,Z);if(de[1].t="s",Z.vers==20768){Y.l++;var Ve=Y.read_shift(1);return de[1].v=Y.read_shift(Ve,"utf8"),de}return Z.qpro&&Y.l++,de[1].v=Y.read_shift(re-Y.l,"cstr"),de}function v(Y,te,Z){var re=ye(7+Z.length);re.write_shift(1,255),re.write_shift(2,te),re.write_shift(2,Y),re.write_shift(1,39);for(var de=0;de<re.length;++de){var Ve=Z.charCodeAt(de);re.write_shift(1,Ve>=128?95:Ve)}return re.write_shift(1,0),re}function y(Y,te,Z){var re=h(Y,te,Z);return re[1].v=Y.read_shift(2,"i"),re}function w(Y,te,Z){var re=ye(7);return re.write_shift(1,255),re.write_shift(2,te),re.write_shift(2,Y),re.write_shift(2,Z,"i"),re}function N(Y,te,Z){var re=h(Y,te,Z);return re[1].v=Y.read_shift(8,"f"),re}function E(Y,te,Z){var re=ye(13);return re.write_shift(1,255),re.write_shift(2,te),re.write_shift(2,Y),re.write_shift(8,Z,"f"),re}function T(Y,te,Z){var re=Y.l+te,de=h(Y,te,Z);if(de[1].v=Y.read_shift(8,"f"),Z.qpro)Y.l=re;else{var Ve=Y.read_shift(2);z(Y.slice(Y.l,Y.l+Ve),de),Y.l+=Ve}return de}function j(Y,te,Z){var re=te&32768;return te&=-32769,te=(re?Y:0)+(te>=8192?te-16384:te),(re?"":"$")+(Z?Cn(te):vn(te))}var O={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},P=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function z(Y,te){ga(Y,0);for(var Z=[],re=0,de="",Ve="",ke="",He="";Y.l<Y.length;){var ae=Y[Y.l++];switch(ae){case 0:Z.push(Y.read_shift(8,"f"));break;case 1:Ve=j(te[0].c,Y.read_shift(2),!0),de=j(te[0].r,Y.read_shift(2),!1),Z.push(Ve+de);break;case 2:{var Be=j(te[0].c,Y.read_shift(2),!0),tt=j(te[0].r,Y.read_shift(2),!1);Ve=j(te[0].c,Y.read_shift(2),!0),de=j(te[0].r,Y.read_shift(2),!1),Z.push(Be+tt+":"+Ve+de)}break;case 3:if(Y.l<Y.length){console.error("WK1 premature formula end");return}break;case 4:Z.push("("+Z.pop()+")");break;case 5:Z.push(Y.read_shift(2));break;case 6:{for(var qt="";ae=Y[Y.l++];)qt+=String.fromCharCode(ae);Z.push('"'+qt.replace(/"/g,'""')+'"')}break;case 8:Z.push("-"+Z.pop());break;case 23:Z.push("+"+Z.pop());break;case 22:Z.push("NOT("+Z.pop()+")");break;case 20:case 21:He=Z.pop(),ke=Z.pop(),Z.push(["AND","OR"][ae-20]+"("+ke+","+He+")");break;default:if(ae<32&&P[ae])He=Z.pop(),ke=Z.pop(),Z.push(ke+P[ae]+He);else if(O[ae]){if(re=O[ae][1],re==69&&(re=Y[Y.l++]),re>Z.length){console.error("WK1 bad formula parse 0x"+ae.toString(16)+":|"+Z.join("|")+"|");return}var xt=Z.slice(-re);Z.length-=re,Z.push(O[ae][0]+"("+xt.join(",")+")")}else return ae<=7?console.error("WK1 invalid opcode "+ae.toString(16)):ae<=24?console.error("WK1 unsupported op "+ae.toString(16)):ae<=30?console.error("WK1 invalid opcode "+ae.toString(16)):ae<=115?console.error("WK1 unsupported function opcode "+ae.toString(16)):console.error("WK1 unrecognized opcode "+ae.toString(16))}}Z.length==1?te[1].f=""+Z[0]:console.error("WK1 bad formula parse |"+Z.join("|")+"|")}function Q(Y){var te=[{c:0,r:0},{t:"n",v:0},0];return te[0].r=Y.read_shift(2),te[3]=Y[Y.l++],te[0].c=Y[Y.l++],te}function U(Y,te){var Z=Q(Y);return Z[1].t="s",Z[1].v=Y.read_shift(te-4,"cstr"),Z}function C(Y,te,Z,re){var de=ye(6+re.length);de.write_shift(2,Y),de.write_shift(1,Z),de.write_shift(1,te),de.write_shift(1,39);for(var Ve=0;Ve<re.length;++Ve){var ke=re.charCodeAt(Ve);de.write_shift(1,ke>=128?95:ke)}return de.write_shift(1,0),de}function k(Y,te){var Z=Q(Y);Z[1].v=Y.read_shift(2);var re=Z[1].v>>1;if(Z[1].v&1)switch(re&7){case 0:re=(re>>3)*5e3;break;case 1:re=(re>>3)*500;break;case 2:re=(re>>3)/20;break;case 3:re=(re>>3)/200;break;case 4:re=(re>>3)/2e3;break;case 5:re=(re>>3)/2e4;break;case 6:re=(re>>3)/16;break;case 7:re=(re>>3)/64;break}return Z[1].v=re,Z}function S(Y,te){var Z=Q(Y),re=Y.read_shift(4),de=Y.read_shift(4),Ve=Y.read_shift(2);if(Ve==65535)return re===0&&de===3221225472?(Z[1].t="e",Z[1].v=15):re===0&&de===3489660928?(Z[1].t="e",Z[1].v=42):Z[1].v=0,Z;var ke=Ve&32768;return Ve=(Ve&32767)-16446,Z[1].v=(1-ke*2)*(de*Math.pow(2,Ve+32)+re*Math.pow(2,Ve)),Z}function F(Y,te,Z,re){var de=ye(14);if(de.write_shift(2,Y),de.write_shift(1,Z),de.write_shift(1,te),re==0)return de.write_shift(4,0),de.write_shift(4,0),de.write_shift(2,65535),de;var Ve=0,ke=0,He=0,ae=0;return re<0&&(Ve=1,re=-re),ke=Math.log2(re)|0,re/=Math.pow(2,ke-31),ae=re>>>0,(ae&2147483648)==0&&(re/=2,++ke,ae=re>>>0),re-=ae,ae|=2147483648,ae>>>=0,re*=Math.pow(2,32),He=re>>>0,de.write_shift(4,He),de.write_shift(4,ae),ke+=16383+(Ve?32768:0),de.write_shift(2,ke),de}function M(Y,te){var Z=S(Y);return Y.l+=te-14,Z}function A(Y,te){var Z=Q(Y),re=Y.read_shift(4);return Z[1].v=re>>6,Z}function D(Y,te){var Z=Q(Y),re=Y.read_shift(8,"f");return Z[1].v=re,Z}function we(Y,te){var Z=D(Y);return Y.l+=te-10,Z}function Me(Y,te){return Y[Y.l+te-1]==0?Y.read_shift(te,"cstr"):""}function ge(Y,te){var Z=Y[Y.l++];Z>te-1&&(Z=te-1);for(var re="";re.length<Z;)re+=String.fromCharCode(Y[Y.l++]);return re}function De(Y,te,Z){if(!(!Z.qpro||te<21)){var re=Y.read_shift(1);Y.l+=17,Y.l+=1,Y.l+=2;var de=Y.read_shift(te-21,"cstr");return[re,de]}}function Le(Y,te){for(var Z={},re=Y.l+te;Y.l<re;){var de=Y.read_shift(2);if(de==14e3){for(Z[de]=[0,""],Z[de][0]=Y.read_shift(2);Y[Y.l];)Z[de][1]+=String.fromCharCode(Y[Y.l]),Y.l++;Y.l++}}return Z}function Je(Y,te){var Z=ye(5+Y.length);Z.write_shift(2,14e3),Z.write_shift(2,te);for(var re=0;re<Y.length;++re){var de=Y.charCodeAt(re);Z[Z.l++]=de>127?95:de}return Z[Z.l++]=0,Z}var ee={0:{n:"BOF",f:oC},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:d},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:y},14:{n:"NUMBER",f:N},15:{n:"LABEL",f:p},16:{n:"FORMULA",f:T},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:p},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:Me},222:{n:"SHEETNAMELP",f:ge},65535:{n:""}},_e={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:U},23:{n:"NUMBER17",f:S},24:{n:"NUMBER18",f:k},25:{n:"FORMULA19",f:M},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:Le},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:A},38:{n:"??"},39:{n:"NUMBER27",f:D},40:{n:"FORMULA28",f:we},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:Me},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:De},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:a,to_workbook:e}})(),x5=/^\s|\s$|[\t\n\r]/;function fC(t,e){if(!e.bookSST)return"";var r=[Mr];r[r.length]=Oe("sst",null,{xmlns:ku[0],count:t.Count,uniqueCount:t.Unique});for(var n=0;n!=t.length;++n)if(t[n]!=null){var a=t[n],o="<si>";a.r?o+=a.r:(o+="<t",a.t||(a.t=""),a.t.match(x5)&&(o+=' xml:space="preserve"'),o+=">"+zt(a.t)+"</t>"),o+="</si>",r[r.length]=o}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function y5(t){return[t.read_shift(4),t.read_shift(4)]}function _5(t,e){return e||(e=ye(8)),e.write_shift(4,t.Count),e.write_shift(4,t.Unique),e}var E5=d8;function w5(t){var e=Zn();je(e,159,_5(t));for(var r=0;r<t.length;++r)je(e,19,E5(t[r]));return je(e,160),e.end()}function N5(t){for(var e=[],r=t.split(""),n=0;n<r.length;++n)e[n]=r[n].charCodeAt(0);return e}function mC(t){var e=0,r,n=N5(t),a=n.length+1,o,c,d,m,h;for(r=zl(a),r[0]=n.length,o=1;o!=a;++o)r[o]=n[o-1];for(o=a-1;o>=0;--o)c=r[o],d=(e&16384)===0?0:1,m=e<<1&32767,h=d|m,e=h^c;return e^52811}var T5=(function(){function t(a,o){switch(o.type){case"base64":return e(Ri(a),o);case"binary":return e(a,o);case"buffer":return e(It&&Buffer.isBuffer(a)?a.toString("binary"):Kh(a),o);case"array":return e(op(a),o)}throw new Error("Unrecognized type "+o.type)}function e(a,o){var c=o||{},d=c.dense?[]:{},m=a.match(/\\trowd.*?\\row\b/g);if(!m.length)throw new Error("RTF missing table");var h={s:{c:0,r:0},e:{c:0,r:m.length-1}};return m.forEach(function(p,v){Array.isArray(d)&&(d[v]=[]);for(var y=/\\\w+\b/g,w=0,N,E=-1;N=y.exec(p);){switch(N[0]){case"\\cell":var T=p.slice(w,y.lastIndex-N[0].length);if(T[0]==" "&&(T=T.slice(1)),++E,T.length){var j={v:T,t:"s"};Array.isArray(d)?d[v][E]=j:d[Ht({r:v,c:E})]=j}break}w=y.lastIndex}E>h.e.c&&(h.e.c=E)}),d["!ref"]=Or(h),d}function r(a,o){return Zl(t(a,o),o)}function n(a){for(var o=["{\\rtf1\\ansi"],c=ir(a["!ref"]),d,m=Array.isArray(a),h=c.s.r;h<=c.e.r;++h){o.push("\\trowd\\trautofit1");for(var p=c.s.c;p<=c.e.c;++p)o.push("\\cellx"+(p+1));for(o.push("\\pard\\intbl"),p=c.s.c;p<=c.e.c;++p){var v=Ht({r:h,c:p});d=m?(a[h]||[])[p]:a[v],!(!d||d.v==null&&(!d.f||d.F))&&(o.push(" "+(d.w||(Di(d),d.w))),o.push("\\cell"))}o.push("\\pard\\intbl\\row")}return o.join("")+"}"}return{to_workbook:r,to_sheet:t,from_sheet:n}})();function eT(t){for(var e=0,r=1;e!=3;++e)r=r*256+(t[e]>255?255:t[e]<0?0:t[e]);return r.toString(16).toUpperCase().slice(1)}var b5=6,wi=b5;function S0(t){return Math.floor((t+Math.round(128/wi)/256)*wi)}function j0(t){return Math.floor((t-5)/wi*100+.5)/100}function px(t){return Math.round((t*wi+5)/wi*256)/256}function O1(t){t.width?(t.wpx=S0(t.width),t.wch=j0(t.wpx),t.MDW=wi):t.wpx?(t.wch=j0(t.wpx),t.width=px(t.wch),t.MDW=wi):typeof t.wch=="number"&&(t.width=px(t.wch),t.wpx=S0(t.width),t.MDW=wi),t.customWidth&&delete t.customWidth}var S5=96,pC=S5;function C0(t){return t*96/pC}function gC(t){return t*pC/96}function j5(t){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)t[n]!=null&&(e[e.length]=Oe("numFmt",null,{numFmtId:n,formatCode:zt(t[n])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=Oe("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function C5(t){var e=[];return e[e.length]=Oe("cellXfs",null),t.forEach(function(r){e[e.length]=Oe("xf",null,r)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=Oe("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function vC(t,e){var r=[Mr,Oe("styleSheet",null,{xmlns:ku[0],"xmlns:vt":Zr.vt})],n;return t.SSF&&(n=j5(t.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=C5(e.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function A5(t,e){var r=t.read_shift(2),n=An(t);return[r,n]}function R5(t,e,r){r||(r=ye(6+4*e.length)),r.write_shift(2,t),tn(e,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function D5(t,e,r){var n={};n.sz=t.read_shift(2)/20;var a=x8(t);a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1);var o=t.read_shift(2);switch(o===700&&(n.bold=1),t.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var c=t.read_shift(1);c!=0&&(n.underline=c);var d=t.read_shift(1);d>0&&(n.family=d);var m=t.read_shift(1);switch(m>0&&(n.charset=m),t.l++,n.color=v8(t),t.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=An(t),n}function I5(t,e){e||(e=ye(153)),e.write_shift(2,t.sz*20),y8(t,e),e.write_shift(2,t.bold?700:400);var r=0;t.vertAlign=="superscript"?r=1:t.vertAlign=="subscript"&&(r=2),e.write_shift(2,r),e.write_shift(1,t.underline||0),e.write_shift(1,t.family||0),e.write_shift(1,t.charset||0),e.write_shift(1,0),T0(t.color,e);var n=0;return n=2,e.write_shift(1,n),tn(t.name,e),e.length>e.l?e.slice(0,e.l):e}var k5=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],Av,O5=Hs;function tT(t,e){e||(e=ye(84)),Av||(Av=w1(k5));var r=Av[t.patternType];r==null&&(r=40),e.write_shift(4,r);var n=0;if(r!=40)for(T0({auto:1},e),T0({auto:1},e);n<12;++n)e.write_shift(4,0);else{for(;n<4;++n)e.write_shift(4,0);for(;n<12;++n)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function M5(t,e){var r=t.l+e,n=t.read_shift(2),a=t.read_shift(2);return t.l=r,{ixfe:n,numFmtId:a}}function xC(t,e,r){r||(r=ye(16)),r.write_shift(2,e||0),r.write_shift(2,t.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function qd(t,e){return e||(e=ye(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var F5=Hs;function P5(t,e){return e||(e=ye(51)),e.write_shift(1,0),qd(null,e),qd(null,e),qd(null,e),qd(null,e),qd(null,e),e.length>e.l?e.slice(0,e.l):e}function L5(t,e){return e||(e=ye(52)),e.write_shift(4,t.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),N0(t.name||"",e),e.length>e.l?e.slice(0,e.l):e}function V5(t,e,r){var n=ye(2052);return n.write_shift(4,t),N0(e,n),N0(r,n),n.length>n.l?n.slice(0,n.l):n}function B5(t,e){if(e){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&++r}),r!=0&&(je(t,615,ls(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&je(t,44,R5(a,e[a]))}),je(t,616))}}function U5(t){var e=1;je(t,611,ls(e)),je(t,43,I5({sz:12,color:{theme:1},name:"Calibri",family:2})),je(t,612)}function z5(t){var e=2;je(t,603,ls(e)),je(t,45,tT({patternType:"none"})),je(t,45,tT({patternType:"gray125"})),je(t,604)}function H5(t){var e=1;je(t,613,ls(e)),je(t,46,P5()),je(t,614)}function q5(t){var e=1;je(t,626,ls(e)),je(t,47,xC({numFmtId:0},65535)),je(t,627)}function G5(t,e){je(t,617,ls(e.length)),e.forEach(function(r){je(t,47,xC(r,0))}),je(t,618)}function $5(t){var e=1;je(t,619,ls(e)),je(t,48,L5({xfId:0,name:"Normal"})),je(t,620)}function W5(t){var e=0;je(t,505,ls(e)),je(t,506)}function Y5(t){var e=0;je(t,508,V5(e,"TableStyleMedium9","PivotStyleMedium4")),je(t,509)}function K5(t,e){var r=Zn();return je(r,278),B5(r,t.SSF),U5(r),z5(r),H5(r),q5(r),G5(r,e.cellXfs),$5(r),W5(r),Y5(r),je(r,279),r.end()}function yC(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var r=[Mr];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function X5(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:An(t)}}function Q5(t){var e=ye(12+2*t.name.length);return e.write_shift(4,t.flags),e.write_shift(4,t.version),tn(t.name,e),e.slice(0,e.l)}function J5(t){for(var e=[],r=t.read_shift(4);r-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function Z5(t){var e=ye(4+8*t.length);e.write_shift(4,t.length);for(var r=0;r<t.length;++r)e.write_shift(4,t[r][0]),e.write_shift(4,t[r][1]);return e}function e9(t,e){var r=ye(8+2*e.length);return r.write_shift(4,t),tn(e,r),r.slice(0,r.l)}function t9(t){return t.l+=4,t.read_shift(4)!=0}function r9(t,e){var r=ye(8);return r.write_shift(4,t),r.write_shift(4,1),r}function n9(){var t=Zn();return je(t,332),je(t,334,ls(1)),je(t,335,Q5({name:"XLDAPR",version:12e4,flags:3496657072})),je(t,336),je(t,339,e9(1,"XLDAPR")),je(t,52),je(t,35,ls(514)),je(t,4096,ls(0)),je(t,4097,Pa(1)),je(t,36),je(t,53),je(t,340),je(t,337,r9(1)),je(t,51,Z5([[1,0]])),je(t,338),je(t,333),t.end()}function _C(){var t=[Mr];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function a9(t){var e={};e.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),e.r=Ht(r);var n=t.read_shift(1);return n&2&&(e.l="1"),n&8&&(e.a="1"),e}var eu=1024;function EC(t,e){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),a=[Oe("xml",null,{"xmlns:v":va.v,"xmlns:o":va.o,"xmlns:x":va.x,"xmlns:mv":va.mv}).replace(/\/>/,">"),Oe("o:shapelayout",Oe("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),Oe("v:shapetype",[Oe("v:stroke",null,{joinstyle:"miter"}),Oe("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];eu<t*1e3;)eu+=1e3;return e.forEach(function(o){var c=en(o[0]),d={color2:"#BEFF82",type:"gradient"};d.type=="gradient"&&(d.angle="-180");var m=d.type=="gradient"?Oe("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,h=Oe("v:fill",m,d),p={on:"t",obscured:"t"};++eu,a=a.concat(["<v:shape"+Ah({id:"_x0000_s"+eu,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(o[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",h,Oe("v:shadow",null,p),Oe("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",mn("x:Anchor",[c.c+1,0,c.r+1,0,c.c+3,20,c.r+5,20].join(",")),mn("x:AutoFill","False"),mn("x:Row",String(c.r)),mn("x:Column",String(c.c)),o[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function wC(t){var e=[Mr,Oe("comments",null,{xmlns:ku[0]})],r=[];return e.push("<authors>"),t.forEach(function(n){n[1].forEach(function(a){var o=zt(a.a);r.indexOf(o)==-1&&(r.push(o),e.push("<author>"+o+"</author>")),a.T&&a.ID&&r.indexOf("tc="+a.ID)==-1&&(r.push("tc="+a.ID),e.push("<author>tc="+a.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),t.forEach(function(n){var a=0,o=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?a=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(m){m.a&&(a=r.indexOf(zt(m.a))),o.push(m.t||"")}),e.push('<comment ref="'+n[0]+'" authorId="'+a+'"><text>'),o.length<=1)e.push(mn("t",zt(o[0]||"")));else{for(var c=`Comment:
    `+o[0]+`
`,d=1;d<o.length;++d)c+=`Reply:
    `+o[d]+`
`;e.push(mn("t",zt(c)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function s9(t,e,r){var n=[Mr,Oe("ThreadedComments",null,{xmlns:Zr.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(a){var o="";(a[1]||[]).forEach(function(c,d){if(!c.T){delete c.ID;return}c.a&&e.indexOf(c.a)==-1&&e.push(c.a);var m={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};d==0?o=m.id:m.parentId=o,c.ID=m.id,c.a&&(m.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(c.a)).slice(-12)+"}"),n.push(Oe("threadedComment",mn("text",c.t||""),m))})}),n.push("</ThreadedComments>"),n.join("")}function i9(t){var e=[Mr,Oe("personList",null,{xmlns:Zr.TCMNT,"xmlns:x":ku[0]}).replace(/[\/]>/,">")];return t.forEach(function(r,n){e.push(Oe("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),e.push("</personList>"),e.join("")}function o9(t){var e={};e.iauthor=t.read_shift(4);var r=nc(t);return e.rfx=r.s,e.ref=Ht(r.s),t.l+=16,e}function l9(t,e){return e==null&&(e=ye(36)),e.write_shift(4,t[1].iauthor),Mu(t[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var c9=An;function u9(t){return tn(t.slice(0,54))}function d9(t){var e=Zn(),r=[];return je(e,628),je(e,630),t.forEach(function(n){n[1].forEach(function(a){r.indexOf(a.a)>-1||(r.push(a.a.slice(0,54)),je(e,632,u9(a.a)))})}),je(e,631),je(e,633),t.forEach(function(n){n[1].forEach(function(a){a.iauthor=r.indexOf(a.a);var o={s:en(n[0]),e:en(n[0])};je(e,635,l9([o,a])),a.t&&a.t.length>0&&je(e,637,f8(a)),je(e,636),delete a.iauthor})}),je(e,634),je(e,629),e.end()}function h9(t,e){e.FullPaths.forEach(function(r,n){if(n!=0){var a=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&Xt.utils.cfb_add(t,a,e.FileIndex[n].content)}})}var NC=["xlsb","xlsm","xlam","biff8","xla"],f9=(function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function r(n,a,o,c){var d=!1,m=!1;o.length==0?m=!0:o.charAt(0)=="["&&(m=!0,o=o.slice(1,-1)),c.length==0?d=!0:c.charAt(0)=="["&&(d=!0,c=c.slice(1,-1));var h=o.length>0?parseInt(o,10)|0:0,p=c.length>0?parseInt(c,10)|0:0;return d?p+=e.c:--p,m?h+=e.r:--h,a+(d?"":"$")+Cn(p)+(m?"":"$")+vn(h)}return function(a,o){return e=o,a.replace(t,r)}})(),M1=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,F1=(function(){return function(e,r){return e.replace(M1,function(n,a,o,c,d,m){var h=A1(c)-(o?0:r.c),p=C1(m)-(d?0:r.r),v=p==0?"":d?p+1:"["+p+"]",y=h==0?"":o?h+1:"["+h+"]";return a+"R"+v+"C"+y})}})();function m9(t,e){return t.replace(M1,function(r,n,a,o,c,d){return n+(a=="$"?a+o:Cn(A1(o)+e.c))+(c=="$"?c+d:vn(C1(d)+e.r))})}function p9(t){return t.length!=1}function Rr(t){t.l+=1}function zo(t,e){var r=t.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function TC(t,e,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return bC(t);r.biff==12&&(n=4)}var a=t.read_shift(n),o=t.read_shift(n),c=zo(t),d=zo(t);return{s:{r:a,c:c[0],cRel:c[1],rRel:c[2]},e:{r:o,c:d[0],cRel:d[1],rRel:d[2]}}}function bC(t){var e=zo(t),r=zo(t),n=t.read_shift(1),a=t.read_shift(1);return{s:{r:e[0],c:n,cRel:e[1],rRel:e[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function g9(t,e,r){if(r.biff<8)return bC(t);var n=t.read_shift(r.biff==12?4:2),a=t.read_shift(r.biff==12?4:2),o=zo(t),c=zo(t);return{s:{r:n,c:o[0],cRel:o[1],rRel:o[2]},e:{r:a,c:c[0],cRel:c[1],rRel:c[2]}}}function SC(t,e,r){if(r&&r.biff>=2&&r.biff<=5)return v9(t);var n=t.read_shift(r&&r.biff==12?4:2),a=zo(t);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function v9(t){var e=zo(t),r=t.read_shift(1);return{r:e[0],c:r,cRel:e[1],rRel:e[2]}}function x9(t){var e=t.read_shift(2),r=t.read_shift(2);return{r:e,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function y9(t,e,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return _9(t);var a=t.read_shift(n>=12?4:2),o=t.read_shift(2),c=(o&16384)>>14,d=(o&32768)>>15;if(o&=16383,d==1)for(;a>524287;)a-=1048576;if(c==1)for(;o>8191;)o=o-16384;return{r:a,c:o,cRel:c,rRel:d}}function _9(t){var e=t.read_shift(2),r=t.read_shift(1),n=(e&32768)>>15,a=(e&16384)>>14;return e&=16383,n==1&&e>=8192&&(e=e-16384),a==1&&r>=128&&(r=r-256),{r:e,c:r,cRel:a,rRel:n}}function E9(t,e,r){var n=(t[t.l++]&96)>>5,a=TC(t,r.biff>=2&&r.biff<=5?6:8,r);return[n,a]}function w9(t,e,r){var n=(t[t.l++]&96)>>5,a=t.read_shift(2,"i"),o=8;if(r)switch(r.biff){case 5:t.l+=12,o=6;break;case 12:o=12;break}var c=TC(t,o,r);return[n,a,c]}function N9(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function T9(t,e,r){var n=(t[t.l++]&96)>>5,a=t.read_shift(2),o=8;if(r)switch(r.biff){case 5:t.l+=12,o=6;break;case 12:o=12;break}return t.l+=o,[n,a]}function b9(t,e,r){var n=(t[t.l++]&96)>>5,a=g9(t,e-1,r);return[n,a]}function S9(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[n]}function rT(t){var e=t[t.l+1]&1,r=1;return t.l+=4,[e,r]}function j9(t,e,r){t.l+=2;for(var n=t.read_shift(r&&r.biff==2?1:2),a=[],o=0;o<=n;++o)a.push(t.read_shift(r&&r.biff==2?1:2));return a}function C9(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function A9(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function R9(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function D9(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[n]}function jC(t){var e=t.read_shift(1),r=t.read_shift(1);return[e,r]}function I9(t){return t.read_shift(2),jC(t)}function k9(t){return t.read_shift(2),jC(t)}function O9(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=SC(t,0,r);return[n,a]}function M9(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=y9(t,0,r);return[n,a]}function F9(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var o=SC(t,0,r);return[n,a,o]}function P9(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=t.read_shift(r&&r.biff<=3?1:2);return[PV[a],RC[a],n]}function L9(t,e,r){var n=t[t.l++],a=t.read_shift(1),o=r&&r.biff<=3?[n==88?-1:0,t.read_shift(1)]:V9(t);return[a,(o[0]===0?RC:FV)[o[1]]]}function V9(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function B9(t,e,r){t.l+=r&&r.biff==2?3:4}function U9(t,e,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var n=t.read_shift(2),a=t.read_shift(r&&r.biff==2?1:2);return[n,a]}function z9(t){return t.l++,Jh[t.read_shift(1)]}function H9(t){return t.l++,t.read_shift(2)}function q9(t){return t.l++,t.read_shift(1)!==0}function G9(t){return t.l++,Fu(t)}function $9(t,e,r){return t.l++,cC(t,e-1,r)}function W9(t,e){var r=[t.read_shift(1)];if(e==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=F8(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:r[1]=Jh[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=Fu(t);break;case 2:r[1]=B8(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function Y9(t,e,r){for(var n=t.read_shift(r.biff==12?4:2),a=[],o=0;o!=n;++o)a.push((r.biff==12?nc:H8)(t));return a}function K9(t,e,r){var n=0,a=0;r.biff==12?(n=t.read_shift(4),a=t.read_shift(4)):(a=1+t.read_shift(1),n=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--a==0&&(a=256));for(var o=0,c=[];o!=n&&(c[o]=[]);++o)for(var d=0;d!=a;++d)c[o][d]=W9(t,r.biff);return c}function X9(t,e,r){var n=t.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,o=t.read_shift(a);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[n,0,o]}function Q9(t,e,r){if(r.biff==5)return J9(t);var n=t.read_shift(1)>>>5&3,a=t.read_shift(2),o=t.read_shift(4);return[n,a,o]}function J9(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var n=t.read_shift(2);return t.l+=12,[e,r,n]}function Z9(t,e,r){var n=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var a=t.read_shift(r&&r.biff==2?1:2);return[n,a]}function eV(t,e,r){var n=t.read_shift(1)>>>5&3,a=t.read_shift(r&&r.biff==2?1:2);return[n,a]}function tV(t,e,r){var n=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[n]}function rV(t,e,r){var n=(t[t.l++]&96)>>5,a=t.read_shift(2),o=4;if(r)switch(r.biff){case 5:o=15;break;case 12:o=6;break}return t.l+=o,[n,a]}var nV=Hs,aV=Hs,sV=Hs;function Zh(t,e,r){return t.l+=2,[x9(t)]}function P1(t){return t.l+=6,[]}var iV=Zh,oV=P1,lV=P1,cV=Zh;function CC(t){return t.l+=2,[oC(t),t.read_shift(2)&1]}var uV=Zh,dV=CC,hV=P1,fV=Zh,mV=Zh,pV=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function gV(t){t.l+=2;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),a=t.read_shift(2),o=t.read_shift(2),c=pV[r>>2&31];return{ixti:e,coltype:r&3,rt:c,idx:n,c:a,C:o}}function vV(t){return t.l+=2,[t.read_shift(4)]}function xV(t,e,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function yV(t,e,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function _V(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function EV(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function wV(t){return t.l+=4,[0,0]}var nT={1:{n:"PtgExp",f:U9},2:{n:"PtgTbl",f:sV},3:{n:"PtgAdd",f:Rr},4:{n:"PtgSub",f:Rr},5:{n:"PtgMul",f:Rr},6:{n:"PtgDiv",f:Rr},7:{n:"PtgPower",f:Rr},8:{n:"PtgConcat",f:Rr},9:{n:"PtgLt",f:Rr},10:{n:"PtgLe",f:Rr},11:{n:"PtgEq",f:Rr},12:{n:"PtgGe",f:Rr},13:{n:"PtgGt",f:Rr},14:{n:"PtgNe",f:Rr},15:{n:"PtgIsect",f:Rr},16:{n:"PtgUnion",f:Rr},17:{n:"PtgRange",f:Rr},18:{n:"PtgUplus",f:Rr},19:{n:"PtgUminus",f:Rr},20:{n:"PtgPercent",f:Rr},21:{n:"PtgParen",f:Rr},22:{n:"PtgMissArg",f:Rr},23:{n:"PtgStr",f:$9},26:{n:"PtgSheet",f:xV},27:{n:"PtgEndSheet",f:yV},28:{n:"PtgErr",f:z9},29:{n:"PtgBool",f:q9},30:{n:"PtgInt",f:H9},31:{n:"PtgNum",f:G9},32:{n:"PtgArray",f:S9},33:{n:"PtgFunc",f:P9},34:{n:"PtgFuncVar",f:L9},35:{n:"PtgName",f:X9},36:{n:"PtgRef",f:O9},37:{n:"PtgArea",f:E9},38:{n:"PtgMemArea",f:Z9},39:{n:"PtgMemErr",f:nV},40:{n:"PtgMemNoMem",f:aV},41:{n:"PtgMemFunc",f:eV},42:{n:"PtgRefErr",f:tV},43:{n:"PtgAreaErr",f:N9},44:{n:"PtgRefN",f:M9},45:{n:"PtgAreaN",f:b9},46:{n:"PtgMemAreaN",f:_V},47:{n:"PtgMemNoMemN",f:EV},57:{n:"PtgNameX",f:Q9},58:{n:"PtgRef3d",f:F9},59:{n:"PtgArea3d",f:w9},60:{n:"PtgRefErr3d",f:rV},61:{n:"PtgAreaErr3d",f:T9},255:{}},NV={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},TV={1:{n:"PtgElfLel",f:CC},2:{n:"PtgElfRw",f:fV},3:{n:"PtgElfCol",f:iV},6:{n:"PtgElfRwV",f:mV},7:{n:"PtgElfColV",f:cV},10:{n:"PtgElfRadical",f:uV},11:{n:"PtgElfRadicalS",f:hV},13:{n:"PtgElfColS",f:oV},15:{n:"PtgElfColSV",f:lV},16:{n:"PtgElfRadicalLel",f:dV},25:{n:"PtgList",f:gV},29:{n:"PtgSxName",f:vV},255:{}},bV={0:{n:"PtgAttrNoop",f:wV},1:{n:"PtgAttrSemi",f:D9},2:{n:"PtgAttrIf",f:A9},4:{n:"PtgAttrChoose",f:j9},8:{n:"PtgAttrGoto",f:C9},16:{n:"PtgAttrSum",f:B9},32:{n:"PtgAttrBaxcel",f:rT},33:{n:"PtgAttrBaxcel",f:rT},64:{n:"PtgAttrSpace",f:I9},65:{n:"PtgAttrSpaceSemi",f:k9},128:{n:"PtgAttrIfError",f:R9},255:{}};function SV(t,e,r,n){if(n.biff<8)return Hs(t,e);for(var a=t.l+e,o=[],c=0;c!==r.length;++c)switch(r[c][0]){case"PtgArray":r[c][1]=K9(t,0,n),o.push(r[c][1]);break;case"PtgMemArea":r[c][2]=Y9(t,r[c][1],n),o.push(r[c][2]);break;case"PtgExp":n&&n.biff==12&&(r[c][1][1]=t.read_shift(4),o.push(r[c][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[c][0]}return e=a-t.l,e!==0&&o.push(Hs(t,e)),o}function jV(t,e,r){for(var n=t.l+e,a,o,c=[];n!=t.l;)e=n-t.l,o=t[t.l],a=nT[o]||nT[NV[o]],(o===24||o===25)&&(a=(o===24?TV:bV)[t[t.l+1]]),!a||!a.f?Hs(t,e):c.push([a.n,a.f(t,e,r)]);return c}function CV(t){for(var e=[],r=0;r<t.length;++r){for(var n=t[r],a=[],o=0;o<n.length;++o){var c=n[o];c?c[0]===2?a.push('"'+c[1].replace(/"/g,'""')+'"'):a.push(c[1]):a.push("")}e.push(a.join(","))}return e.join(";")}var AV={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function RV(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function AC(t,e,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var n=t.XTI[e];if(r.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!n)return"SH33TJSERR1";var a="";if(r.biff>8)switch(t[n[0]][0]){case 357:return a=n[1]==-1?"#REF":t.SheetNames[n[1]],n[1]==n[2]?a:a+":"+t.SheetNames[n[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[n[0]][0];default:return"SH33TJSSRC"+t[n[0]][0]}switch(t[n[0]][0][0]){case 1025:return a=n[1]==-1?"#REF":t.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+t.SheetNames[n[2]];case 14849:return t[n[0]].slice(1).map(function(o){return o.Name}).join(";;");default:return t[n[0]][0][3]?(a=n[1]==-1?"#REF":t[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+t[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function aT(t,e,r){var n=AC(t,e,r);return n=="#REF"?n:RV(n,r)}function yu(t,e,r,n,a){var o=a&&a.biff||8,c={s:{c:0,r:0}},d=[],m,h,p,v=0,y=0,w,N="";if(!t[0]||!t[0][0])return"";for(var E=-1,T="",j=0,O=t[0].length;j<O;++j){var P=t[0][j];switch(P[0]){case"PtgUminus":d.push("-"+d.pop());break;case"PtgUplus":d.push("+"+d.pop());break;case"PtgPercent":d.push(d.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(m=d.pop(),h=d.pop(),E>=0){switch(t[0][E][1][0]){case 0:T=gr(" ",t[0][E][1][1]);break;case 1:T=gr("\r",t[0][E][1][1]);break;default:if(T="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][E][1][0])}h=h+T,E=-1}d.push(h+AV[P[0]]+m);break;case"PtgIsect":m=d.pop(),h=d.pop(),d.push(h+" "+m);break;case"PtgUnion":m=d.pop(),h=d.pop(),d.push(h+","+m);break;case"PtgRange":m=d.pop(),h=d.pop(),d.push(h+":"+m);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":p=uh(P[1][1],c,a),d.push(dh(p,o));break;case"PtgRefN":p=r?uh(P[1][1],r,a):P[1][1],d.push(dh(p,o));break;case"PtgRef3d":v=P[1][1],p=uh(P[1][2],c,a),N=aT(n,v,a),d.push(N+"!"+dh(p,o));break;case"PtgFunc":case"PtgFuncVar":var z=P[1][0],Q=P[1][1];z||(z=0),z&=127;var U=z==0?[]:d.slice(-z);d.length-=z,Q==="User"&&(Q=U.shift()),d.push(Q+"("+U.join(",")+")");break;case"PtgBool":d.push(P[1]?"TRUE":"FALSE");break;case"PtgInt":d.push(P[1]);break;case"PtgNum":d.push(String(P[1]));break;case"PtgStr":d.push('"'+P[1].replace(/"/g,'""')+'"');break;case"PtgErr":d.push(P[1]);break;case"PtgAreaN":w=zN(P[1][1],r?{s:r}:c,a),d.push(jv(w,a));break;case"PtgArea":w=zN(P[1][1],c,a),d.push(jv(w,a));break;case"PtgArea3d":v=P[1][1],w=P[1][2],N=aT(n,v,a),d.push(N+"!"+jv(w,a));break;case"PtgAttrSum":d.push("SUM("+d.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":y=P[1][2];var C=(n.names||[])[y-1]||(n[0]||[])[y],k=C?C.Name:"SH33TJSNAME"+String(y);k&&k.slice(0,6)=="_xlfn."&&!a.xlfn&&(k=k.slice(6)),d.push(k);break;case"PtgNameX":var S=P[1][1];y=P[1][2];var F;if(a.biff<=5)S<0&&(S=-S),n[S]&&(F=n[S][y]);else{var M="";if(((n[S]||[])[0]||[])[0]==14849||(((n[S]||[])[0]||[])[0]==1025?n[S][y]&&n[S][y].itab>0&&(M=n.SheetNames[n[S][y].itab-1]+"!"):M=n.SheetNames[y-1]+"!"),n[S]&&n[S][y])M+=n[S][y].Name;else if(n[0]&&n[0][y])M+=n[0][y].Name;else{var A=(AC(n,S,a)||"").split(";;");A[y-1]?M=A[y-1]:M+="SH33TJSERRX"}d.push(M);break}F||(F={Name:"SH33TJSERRY"}),d.push(F.Name);break;case"PtgParen":var D="(",we=")";if(E>=0){switch(T="",t[0][E][1][0]){case 2:D=gr(" ",t[0][E][1][1])+D;break;case 3:D=gr("\r",t[0][E][1][1])+D;break;case 4:we=gr(" ",t[0][E][1][1])+we;break;case 5:we=gr("\r",t[0][E][1][1])+we;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][E][1][0])}E=-1}d.push(D+d.pop()+we);break;case"PtgRefErr":d.push("#REF!");break;case"PtgRefErr3d":d.push("#REF!");break;case"PtgExp":p={c:P[1][1],r:P[1][0]};var Me={c:r.c,r:r.r};if(n.sharedf[Ht(p)]){var ge=n.sharedf[Ht(p)];d.push(yu(ge,c,Me,n,a))}else{var De=!1;for(m=0;m!=n.arrayf.length;++m)if(h=n.arrayf[m],!(p.c<h[0].s.c||p.c>h[0].e.c)&&!(p.r<h[0].s.r||p.r>h[0].e.r)){d.push(yu(h[1],c,Me,n,a)),De=!0;break}De||d.push(P[1])}break;case"PtgArray":d.push("{"+CV(P[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":E=j;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":d.push("");break;case"PtgAreaErr":d.push("#REF!");break;case"PtgAreaErr3d":d.push("#REF!");break;case"PtgList":d.push("Table"+P[1].idx+"[#"+P[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(P));default:throw new Error("Unrecognized Formula Token: "+String(P))}var Le=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&E>=0&&Le.indexOf(t[0][j][0])==-1){P=t[0][E];var Je=!0;switch(P[1][0]){case 4:Je=!1;case 0:T=gr(" ",P[1][1]);break;case 5:Je=!1;case 1:T=gr("\r",P[1][1]);break;default:if(T="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+P[1][0])}d.push((Je?T:"")+d.pop()+(Je?"":T)),E=-1}}if(d.length>1&&a.WTF)throw new Error("bad formula stack");return d[0]}function DV(t){if(t==null){var e=ye(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof t=="number")return Hl(t);return Hl(0)}function IV(t,e,r,n,a){var o=ql(e,r,a),c=DV(t.v),d=ye(6),m=33;d.write_shift(2,m),d.write_shift(4,0);for(var h=ye(t.bf.length),p=0;p<t.bf.length;++p)h[p]=t.bf[p];var v=fn([o,c,d,h]);return v}function lp(t,e,r){var n=t.read_shift(4),a=jV(t,n,r),o=t.read_shift(4),c=o>0?SV(t,o,a,r):null;return[a,c]}var kV=lp,cp=lp,OV=lp,MV=lp,FV={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},RC={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},PV={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function LV(t){var e="of:="+t.replace(M1,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function VV(t){return t.replace(/\./,"!")}var hh=typeof Map<"u";function L1(t,e,r){var n=0,a=t.length;if(r){if(hh?r.has(e):Object.prototype.hasOwnProperty.call(r,e)){for(var o=hh?r.get(e):r[e];n<o.length;++n)if(t[o[n]].t===e)return t.Count++,o[n]}}else for(;n<a;++n)if(t[n].t===e)return t.Count++,n;return t[a]={t:e},t.Count++,t.Unique++,r&&(hh?(r.has(e)||r.set(e,[]),r.get(e).push(a)):(Object.prototype.hasOwnProperty.call(r,e)||(r[e]=[]),r[e].push(a))),a}function up(t,e){var r={min:t+1,max:t+1},n=-1;return e.MDW&&(wi=e.MDW),e.width!=null?r.customWidth=1:e.wpx!=null?n=j0(e.wpx):e.wch!=null&&(n=e.wch),n>-1?(r.width=px(n),r.customWidth=1):e.width!=null&&(r.width=e.width),e.hidden&&(r.hidden=!0),e.level!=null&&(r.outlineLevel=r.level=e.level),r}function DC(t,e){if(t){var r=[.7,.7,.75,.75,.3,.3];t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function Yo(t,e,r){var n=r.revssf[e.z!=null?e.z:"General"],a=60,o=t.length;if(n==null&&r.ssf){for(;a<392;++a)if(r.ssf[a]==null){Sj(e.z,a),r.ssf[a]=e.z,r.revssf[e.z]=n=a;break}}for(a=0;a!=o;++a)if(t[a].numFmtId===n)return a;return t[o]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},o}function BV(t,e,r){if(t&&t["!ref"]){var n=ir(t["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+t["!ref"])}}function UV(t){if(t.length===0)return"";for(var e='<mergeCells count="'+t.length+'">',r=0;r!=t.length;++r)e+='<mergeCell ref="'+Or(t[r])+'"/>';return e+"</mergeCells>"}function zV(t,e,r,n,a){var o=!1,c={},d=null;if(n.bookType!=="xlsx"&&e.vbaraw){var m=e.SheetNames[r];try{e.Workbook&&(m=e.Workbook.Sheets[r].CodeName||m)}catch{}o=!0,c.codeName=Ch(zt(m))}if(t&&t["!outline"]){var h={summaryBelow:1,summaryRight:1};t["!outline"].above&&(h.summaryBelow=0),t["!outline"].left&&(h.summaryRight=0),d=(d||"")+Oe("outlinePr",null,h)}!o&&!d||(a[a.length]=Oe("sheetPr",d,c))}var HV=["objects","scenarios","selectLockedCells","selectUnlockedCells"],qV=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function GV(t){var e={sheet:1};return HV.forEach(function(r){t[r]!=null&&t[r]&&(e[r]="1")}),qV.forEach(function(r){t[r]!=null&&!t[r]&&(e[r]="0")}),t.password&&(e.password=mC(t.password).toString(16).toUpperCase()),Oe("sheetProtection",null,e)}function $V(t){return DC(t),Oe("pageMargins",null,t)}function WV(t,e){for(var r=["<cols>"],n,a=0;a!=e.length;++a)(n=e[a])&&(r[r.length]=Oe("col",null,up(a,n)));return r[r.length]="</cols>",r.join("")}function YV(t,e,r,n){var a=typeof t.ref=="string"?t.ref:Or(t.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var o=r.Workbook.Names,c=_a(a);c.s.r==c.e.r&&(c.e.r=_a(e["!ref"]).e.r,a=Or(c));for(var d=0;d<o.length;++d){var m=o[d];if(m.Name=="_xlnm._FilterDatabase"&&m.Sheet==n){m.Ref="'"+r.SheetNames[n]+"'!"+a;break}}return d==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),Oe("autoFilter",null,{ref:a})}function KV(t,e,r,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Oe("sheetViews",Oe("sheetView",null,a),{})}function XV(t,e,r,n){if(t.c&&r["!comments"].push([e,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var a="",o=t.t,c=t.v;if(t.t!=="z")switch(t.t){case"b":a=t.v?"1":"0";break;case"n":a=""+t.v;break;case"e":a=Jh[t.v];break;case"d":n&&n.cellDates?a=zn(t.v,-1).toISOString():(t=ta(t),t.t="n",a=""+(t.v=ea(zn(t.v)))),typeof t.z>"u"&&(t.z=xr[14]);break;default:a=t.v;break}var d=mn("v",zt(a)),m={r:e},h=Yo(n.cellXfs,t,n);switch(h!==0&&(m.s=h),t.t){case"n":break;case"d":m.t="d";break;case"b":m.t="b";break;case"e":m.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){d=mn("v",""+L1(n.Strings,t.v,n.revStrings)),m.t="s";break}m.t="str";break}if(t.t!=o&&(t.t=o,t.v=c),typeof t.f=="string"&&t.f){var p=t.F&&t.F.slice(0,e.length)==e?{t:"array",ref:t.F}:null;d=Oe("f",zt(t.f),p)+(t.v!=null?d:"")}return t.l&&r["!links"].push([e,t.l]),t.D&&(m.cm=1),Oe("c",d,m)}function QV(t,e,r,n){var a=[],o=[],c=ir(t["!ref"]),d="",m,h="",p=[],v=0,y=0,w=t["!rows"],N=Array.isArray(t),E={r:h},T,j=-1;for(y=c.s.c;y<=c.e.c;++y)p[y]=Cn(y);for(v=c.s.r;v<=c.e.r;++v){for(o=[],h=vn(v),y=c.s.c;y<=c.e.c;++y){m=p[y]+h;var O=N?(t[v]||[])[y]:t[m];O!==void 0&&(d=XV(O,m,t,e))!=null&&o.push(d)}(o.length>0||w&&w[v])&&(E={r:h},w&&w[v]&&(T=w[v],T.hidden&&(E.hidden=1),j=-1,T.hpx?j=C0(T.hpx):T.hpt&&(j=T.hpt),j>-1&&(E.ht=j,E.customHeight=1),T.level&&(E.outlineLevel=T.level)),a[a.length]=Oe("row",o.join(""),E))}if(w)for(;v<w.length;++v)w&&w[v]&&(E={r:v+1},T=w[v],T.hidden&&(E.hidden=1),j=-1,T.hpx?j=C0(T.hpx):T.hpt&&(j=T.hpt),j>-1&&(E.ht=j,E.customHeight=1),T.level&&(E.outlineLevel=T.level),a[a.length]=Oe("row","",E));return a.join("")}function IC(t,e,r,n){var a=[Mr,Oe("worksheet",null,{xmlns:ku[0],"xmlns:r":Zr.r})],o=r.SheetNames[t],c=0,d="",m=r.Sheets[o];m==null&&(m={});var h=m["!ref"]||"A1",p=ir(h);if(p.e.c>16383||p.e.r>1048575){if(e.WTF)throw new Error("Range "+h+" exceeds format limit A1:XFD1048576");p.e.c=Math.min(p.e.c,16383),p.e.r=Math.min(p.e.c,1048575),h=Or(p)}n||(n={}),m["!comments"]=[];var v=[];zV(m,r,t,e,a),a[a.length]=Oe("dimension",null,{ref:h}),a[a.length]=KV(m,e,t,r),e.sheetFormat&&(a[a.length]=Oe("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),m["!cols"]!=null&&m["!cols"].length>0&&(a[a.length]=WV(m,m["!cols"])),a[c=a.length]="<sheetData/>",m["!links"]=[],m["!ref"]!=null&&(d=QV(m,e),d.length>0&&(a[a.length]=d)),a.length>c+1&&(a[a.length]="</sheetData>",a[c]=a[c].replace("/>",">")),m["!protect"]&&(a[a.length]=GV(m["!protect"])),m["!autofilter"]!=null&&(a[a.length]=YV(m["!autofilter"],m,r,t)),m["!merges"]!=null&&m["!merges"].length>0&&(a[a.length]=UV(m["!merges"]));var y=-1,w,N=-1;return m["!links"].length>0&&(a[a.length]="<hyperlinks>",m["!links"].forEach(function(E){E[1].Target&&(w={ref:E[0]},E[1].Target.charAt(0)!="#"&&(N=Ut(n,-1,zt(E[1].Target).replace(/#.*$/,""),Ct.HLINK),w["r:id"]="rId"+N),(y=E[1].Target.indexOf("#"))>-1&&(w.location=zt(E[1].Target.slice(y+1))),E[1].Tooltip&&(w.tooltip=zt(E[1].Tooltip)),a[a.length]=Oe("hyperlink",null,w))}),a[a.length]="</hyperlinks>"),delete m["!links"],m["!margins"]!=null&&(a[a.length]=$V(m["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(a[a.length]=mn("ignoredErrors",Oe("ignoredError",null,{numberStoredAsText:1,sqref:h}))),v.length>0&&(N=Ut(n,-1,"../drawings/drawing"+(t+1)+".xml",Ct.DRAW),a[a.length]=Oe("drawing",null,{"r:id":"rId"+N}),m["!drawing"]=v),m["!comments"].length>0&&(N=Ut(n,-1,"../drawings/vmlDrawing"+(t+1)+".vml",Ct.VML),a[a.length]=Oe("legacyDrawing",null,{"r:id":"rId"+N}),m["!legacy"]=N),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function JV(t,e){var r={},n=t.l+e;r.r=t.read_shift(4),t.l+=4;var a=t.read_shift(2);t.l+=1;var o=t.read_shift(1);return t.l=n,o&7&&(r.level=o&7),o&16&&(r.hidden=!0),o&32&&(r.hpt=a/20),r}function ZV(t,e,r){var n=ye(145),a=(r["!rows"]||[])[t]||{};n.write_shift(4,t),n.write_shift(4,0);var o=320;a.hpx?o=C0(a.hpx)*20:a.hpt&&(o=a.hpt*20),n.write_shift(2,o),n.write_shift(1,0);var c=0;a.level&&(c|=a.level),a.hidden&&(c|=16),(a.hpx||a.hpt)&&(c|=32),n.write_shift(1,c),n.write_shift(1,0);var d=0,m=n.l;n.l+=4;for(var h={r:t,c:0},p=0;p<16;++p)if(!(e.s.c>p+1<<10||e.e.c<p<<10)){for(var v=-1,y=-1,w=p<<10;w<p+1<<10;++w){h.c=w;var N=Array.isArray(r)?(r[h.r]||[])[h.c]:r[Ht(h)];N&&(v<0&&(v=w),y=w)}v<0||(++d,n.write_shift(4,v),n.write_shift(4,y))}var E=n.l;return n.l=m,n.write_shift(4,d),n.l=E,n.length>n.l?n.slice(0,n.l):n}function e7(t,e,r,n){var a=ZV(n,r,e);(a.length>17||(e["!rows"]||[])[n])&&je(t,0,a)}var t7=nc,r7=Mu;function n7(){}function a7(t,e){var r={},n=t[t.l];return++t.l,r.above=!(n&64),r.left=!(n&128),t.l+=18,r.name=m8(t),r}function s7(t,e,r){r==null&&(r=ye(84+4*t.length));var n=192;e&&(e.above&&(n&=-65),e.left&&(n&=-129)),r.write_shift(1,n);for(var a=1;a<3;++a)r.write_shift(1,0);return T0({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),Wj(t,r),r.slice(0,r.l)}function i7(t){var e=Ua(t);return[e]}function o7(t,e,r){return r==null&&(r=ye(8)),ec(e,r)}function l7(t){var e=tc(t);return[e]}function c7(t,e,r){return r==null&&(r=ye(4)),rc(e,r)}function u7(t){var e=Ua(t),r=t.read_shift(1);return[e,r,"b"]}function d7(t,e,r){return r==null&&(r=ye(9)),ec(e,r),r.write_shift(1,t.v?1:0),r}function h7(t){var e=tc(t),r=t.read_shift(1);return[e,r,"b"]}function f7(t,e,r){return r==null&&(r=ye(5)),rc(e,r),r.write_shift(1,t.v?1:0),r}function m7(t){var e=Ua(t),r=t.read_shift(1);return[e,r,"e"]}function p7(t,e,r){return r==null&&(r=ye(9)),ec(e,r),r.write_shift(1,t.v),r}function g7(t){var e=tc(t),r=t.read_shift(1);return[e,r,"e"]}function v7(t,e,r){return r==null&&(r=ye(8)),rc(e,r),r.write_shift(1,t.v),r.write_shift(2,0),r.write_shift(1,0),r}function x7(t){var e=Ua(t),r=t.read_shift(4);return[e,r,"s"]}function y7(t,e,r){return r==null&&(r=ye(12)),ec(e,r),r.write_shift(4,e.v),r}function _7(t){var e=tc(t),r=t.read_shift(4);return[e,r,"s"]}function E7(t,e,r){return r==null&&(r=ye(8)),rc(e,r),r.write_shift(4,e.v),r}function w7(t){var e=Ua(t),r=Fu(t);return[e,r,"n"]}function N7(t,e,r){return r==null&&(r=ye(16)),ec(e,r),Hl(t.v,r),r}function T7(t){var e=tc(t),r=Fu(t);return[e,r,"n"]}function b7(t,e,r){return r==null&&(r=ye(12)),rc(e,r),Hl(t.v,r),r}function S7(t){var e=Ua(t),r=Yj(t);return[e,r,"n"]}function j7(t,e,r){return r==null&&(r=ye(12)),ec(e,r),Kj(t.v,r),r}function C7(t){var e=tc(t),r=Yj(t);return[e,r,"n"]}function A7(t,e,r){return r==null&&(r=ye(8)),rc(e,r),Kj(t.v,r),r}function R7(t){var e=Ua(t),r=R1(t);return[e,r,"is"]}function D7(t){var e=Ua(t),r=An(t);return[e,r,"str"]}function I7(t,e,r){return r==null&&(r=ye(12+4*t.v.length)),ec(e,r),tn(t.v,r),r.length>r.l?r.slice(0,r.l):r}function k7(t){var e=tc(t),r=An(t);return[e,r,"str"]}function O7(t,e,r){return r==null&&(r=ye(8+4*t.v.length)),rc(e,r),tn(t.v,r),r.length>r.l?r.slice(0,r.l):r}function M7(t,e,r){var n=t.l+e,a=Ua(t);a.r=r["!row"];var o=t.read_shift(1),c=[a,o,"b"];if(r.cellFormula){t.l+=2;var d=cp(t,n-t.l,r);c[3]=yu(d,null,a,r.supbooks,r)}else t.l=n;return c}function F7(t,e,r){var n=t.l+e,a=Ua(t);a.r=r["!row"];var o=t.read_shift(1),c=[a,o,"e"];if(r.cellFormula){t.l+=2;var d=cp(t,n-t.l,r);c[3]=yu(d,null,a,r.supbooks,r)}else t.l=n;return c}function P7(t,e,r){var n=t.l+e,a=Ua(t);a.r=r["!row"];var o=Fu(t),c=[a,o,"n"];if(r.cellFormula){t.l+=2;var d=cp(t,n-t.l,r);c[3]=yu(d,null,a,r.supbooks,r)}else t.l=n;return c}function L7(t,e,r){var n=t.l+e,a=Ua(t);a.r=r["!row"];var o=An(t),c=[a,o,"str"];if(r.cellFormula){t.l+=2;var d=cp(t,n-t.l,r);c[3]=yu(d,null,a,r.supbooks,r)}else t.l=n;return c}var V7=nc,B7=Mu;function U7(t,e){return e==null&&(e=ye(4)),e.write_shift(4,t),e}function z7(t,e){var r=t.l+e,n=nc(t),a=D1(t),o=An(t),c=An(t),d=An(t);t.l=r;var m={rfx:n,relId:a,loc:o,display:d};return c&&(m.Tooltip=c),m}function H7(t,e){var r=ye(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));Mu({s:en(t[0]),e:en(t[0])},r),I1("rId"+e,r);var n=t[1].Target.indexOf("#"),a=n==-1?"":t[1].Target.slice(n+1);return tn(a||"",r),tn(t[1].Tooltip||"",r),tn("",r),r.slice(0,r.l)}function q7(){}function G7(t,e,r){var n=t.l+e,a=Xj(t),o=t.read_shift(1),c=[a];if(c[2]=o,r.cellFormula){var d=kV(t,n-t.l,r);c[1]=d}else t.l=n;return c}function $7(t,e,r){var n=t.l+e,a=nc(t),o=[a];if(r.cellFormula){var c=MV(t,n-t.l,r);o[1]=c,t.l=n}else t.l=n;return o}function W7(t,e,r){r==null&&(r=ye(18));var n=up(t,e);r.write_shift(-4,t),r.write_shift(-4,t),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var a=0;return e.hidden&&(a|=1),typeof n.width=="number"&&(a|=2),e.level&&(a|=e.level<<8),r.write_shift(2,a),r}var kC=["left","right","top","bottom","header","footer"];function Y7(t){var e={};return kC.forEach(function(r){e[r]=Fu(t)}),e}function K7(t,e){return e==null&&(e=ye(48)),DC(t),kC.forEach(function(r){Hl(t[r],e)}),e}function X7(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function Q7(t,e,r){r==null&&(r=ye(30));var n=924;return(((e||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function J7(t){var e=ye(24);return e.write_shift(4,4),e.write_shift(4,1),Mu(t,e),e}function Z7(t,e){return e==null&&(e=ye(66)),e.write_shift(2,t.password?mC(t.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?e.write_shift(4,t[r[0]]!=null&&!t[r[0]]?1:0):e.write_shift(4,t[r[0]]!=null&&t[r[0]]?0:1)}),e}function eB(){}function tB(){}function rB(t,e,r,n,a,o,c){if(e.v===void 0)return!1;var d="";switch(e.t){case"b":d=e.v?"1":"0";break;case"d":e=ta(e),e.z=e.z||xr[14],e.v=ea(zn(e.v)),e.t="n";break;case"n":case"e":d=""+e.v;break;default:d=e.v;break}var m={r,c:n};switch(m.s=Yo(a.cellXfs,e,a),e.l&&o["!links"].push([Ht(m),e.l]),e.c&&o["!comments"].push([Ht(m),e.c]),e.t){case"s":case"str":return a.bookSST?(d=L1(a.Strings,e.v,a.revStrings),m.t="s",m.v=d,c?je(t,18,E7(e,m)):je(t,7,y7(e,m))):(m.t="str",c?je(t,17,O7(e,m)):je(t,6,I7(e,m))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?c?je(t,13,A7(e,m)):je(t,2,j7(e,m)):c?je(t,16,b7(e,m)):je(t,5,N7(e,m)),!0;case"b":return m.t="b",c?je(t,15,f7(e,m)):je(t,4,d7(e,m)),!0;case"e":return m.t="e",c?je(t,14,v7(e,m)):je(t,3,p7(e,m)),!0}return c?je(t,12,c7(e,m)):je(t,1,o7(e,m)),!0}function nB(t,e,r,n){var a=ir(e["!ref"]||"A1"),o,c="",d=[];je(t,145);var m=Array.isArray(e),h=a.e.r;e["!rows"]&&(h=Math.max(a.e.r,e["!rows"].length-1));for(var p=a.s.r;p<=h;++p){c=vn(p),e7(t,e,a,p);var v=!1;if(p<=a.e.r)for(var y=a.s.c;y<=a.e.c;++y){p===a.s.r&&(d[y]=Cn(y)),o=d[y]+c;var w=m?(e[p]||[])[y]:e[o];if(!w){v=!1;continue}v=rB(t,w,p,y,n,e,v)}}je(t,146)}function aB(t,e){!e||!e["!merges"]||(je(t,177,U7(e["!merges"].length)),e["!merges"].forEach(function(r){je(t,176,B7(r))}),je(t,178))}function sB(t,e){!e||!e["!cols"]||(je(t,390),e["!cols"].forEach(function(r,n){r&&je(t,60,W7(n,r))}),je(t,391))}function iB(t,e){!e||!e["!ref"]||(je(t,648),je(t,649,J7(ir(e["!ref"]))),je(t,650))}function oB(t,e,r){e["!links"].forEach(function(n){if(n[1].Target){var a=Ut(r,-1,n[1].Target.replace(/#.*$/,""),Ct.HLINK);je(t,494,H7(n,a))}}),delete e["!links"]}function lB(t,e,r,n){if(e["!comments"].length>0){var a=Ut(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",Ct.VML);je(t,551,I1("rId"+a)),e["!legacy"]=a}}function cB(t,e,r,n){if(e["!autofilter"]){var a=e["!autofilter"],o=typeof a.ref=="string"?a.ref:Or(a.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var c=r.Workbook.Names,d=_a(o);d.s.r==d.e.r&&(d.e.r=_a(e["!ref"]).e.r,o=Or(d));for(var m=0;m<c.length;++m){var h=c[m];if(h.Name=="_xlnm._FilterDatabase"&&h.Sheet==n){h.Ref="'"+r.SheetNames[n]+"'!"+o;break}}m==c.length&&c.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+o}),je(t,161,Mu(ir(o))),je(t,162)}}function uB(t,e,r){je(t,133),je(t,137,Q7(e,r)),je(t,138),je(t,134)}function dB(t,e){e["!protect"]&&je(t,535,Z7(e["!protect"]))}function hB(t,e,r,n){var a=Zn(),o=r.SheetNames[t],c=r.Sheets[o]||{},d=o;try{r&&r.Workbook&&(d=r.Workbook.Sheets[t].CodeName||d)}catch{}var m=ir(c["!ref"]||"A1");if(m.e.c>16383||m.e.r>1048575){if(e.WTF)throw new Error("Range "+(c["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");m.e.c=Math.min(m.e.c,16383),m.e.r=Math.min(m.e.c,1048575)}return c["!links"]=[],c["!comments"]=[],je(a,129),(r.vbaraw||c["!outline"])&&je(a,147,s7(d,c["!outline"])),je(a,148,r7(m)),uB(a,c,r.Workbook),sB(a,c),nB(a,c,t,e),dB(a,c),cB(a,c,r,t),aB(a,c),oB(a,c,n),c["!margins"]&&je(a,476,K7(c["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&iB(a,c),lB(a,c,t,n),je(a,130),a.end()}function fB(t,e){t.l+=10;var r=An(t);return{name:r}}var mB=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function pB(t){return!t.Workbook||!t.Workbook.WBProps?"false":$L(t.Workbook.WBProps.date1904)?"true":"false"}var gB="][*?/\\".split("");function OC(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return gB.forEach(function(n){if(t.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function vB(t,e,r){t.forEach(function(n,a){OC(n);for(var o=0;o<a;++o)if(n==t[o])throw new Error("Duplicate Sheet Name: "+n);if(r){var c=e&&e[a]&&e[a].CodeName||n;if(c.charCodeAt(0)==95&&c.length>22)throw new Error("Bad Code Name: Worksheet"+c)}})}function xB(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var e=t.Workbook&&t.Workbook.Sheets||[];vB(t.SheetNames,e,!!t.vbaraw);for(var r=0;r<t.SheetNames.length;++r)BV(t.Sheets[t.SheetNames[r]],t.SheetNames[r],r)}function MC(t){var e=[Mr];e[e.length]=Oe("workbook",null,{xmlns:ku[0],"xmlns:r":Zr.r});var r=t.Workbook&&(t.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(mB.forEach(function(d){t.Workbook.WBProps[d[0]]!=null&&t.Workbook.WBProps[d[0]]!=d[1]&&(n[d[0]]=t.Workbook.WBProps[d[0]])}),t.Workbook.WBProps.CodeName&&(n.codeName=t.Workbook.WBProps.CodeName,delete n.CodeName)),e[e.length]=Oe("workbookPr",null,n);var a=t.Workbook&&t.Workbook.Sheets||[],o=0;if(a&&a[0]&&a[0].Hidden){for(e[e.length]="<bookViews>",o=0;o!=t.SheetNames.length&&!(!a[o]||!a[o].Hidden);++o);o==t.SheetNames.length&&(o=0),e[e.length]='<workbookView firstSheet="'+o+'" activeTab="'+o+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",o=0;o!=t.SheetNames.length;++o){var c={name:zt(t.SheetNames[o].slice(0,31))};if(c.sheetId=""+(o+1),c["r:id"]="rId"+(o+1),a[o])switch(a[o].Hidden){case 1:c.state="hidden";break;case 2:c.state="veryHidden";break}e[e.length]=Oe("sheet",null,c)}return e[e.length]="</sheets>",r&&(e[e.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(d){var m={name:d.Name};d.Comment&&(m.comment=d.Comment),d.Sheet!=null&&(m.localSheetId=""+d.Sheet),d.Hidden&&(m.hidden="1"),d.Ref&&(e[e.length]=Oe("definedName",zt(d.Ref),m))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function yB(t,e){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=mx(t),r.name=An(t),r}function _B(t,e){return e||(e=ye(127)),e.write_shift(4,t.Hidden),e.write_shift(4,t.iTabID),I1(t.strRelID,e),tn(t.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function EB(t,e){var r={},n=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var a=e>8?An(t):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function wB(t,e){e||(e=ye(72));var r=0;return t&&t.filterPrivacy&&(r|=8),e.write_shift(4,r),e.write_shift(4,0),Wj(t&&t.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function NB(t,e,r){var n=t.l+e;t.l+=4,t.l+=1;var a=t.read_shift(4),o=p8(t),c=OV(t,0,r),d=D1(t);t.l=n;var m={Name:o,Ptg:c};return a<268435455&&(m.Sheet=a),d&&(m.Comment=d),m}function TB(t,e){je(t,143);for(var r=0;r!=e.SheetNames.length;++r){var n=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[r]&&e.Workbook.Sheets[r].Hidden||0,a={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:e.SheetNames[r]};je(t,156,_B(a))}je(t,144)}function bB(t,e){e||(e=ye(127));for(var r=0;r!=4;++r)e.write_shift(4,0);return tn("SheetJS",e),tn(g0.version,e),tn(g0.version,e),tn("7262",e),e.length>e.l?e.slice(0,e.l):e}function SB(t,e){e||(e=ye(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,t),e.write_shift(4,t);var r=120;return e.write_shift(1,r),e.length>e.l?e.slice(0,e.l):e}function jB(t,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var r=e.Workbook.Sheets,n=0,a=-1,o=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&a==-1?a=n:r[n].Hidden==1&&o==-1&&(o=n);o>a||(je(t,135),je(t,158,SB(a)),je(t,136))}}function CB(t,e){var r=Zn();return je(r,131),je(r,128,bB()),je(r,153,wB(t.Workbook&&t.Workbook.WBProps||null)),jB(r,t),TB(r,t),je(r,132),r.end()}function AB(t,e,r){return(e.slice(-4)===".bin"?CB:MC)(t)}function RB(t,e,r,n,a){return(e.slice(-4)===".bin"?hB:IC)(t,r,n,a)}function DB(t,e,r){return(e.slice(-4)===".bin"?K5:vC)(t,r)}function IB(t,e,r){return(e.slice(-4)===".bin"?w5:fC)(t,r)}function kB(t,e,r){return(e.slice(-4)===".bin"?d9:wC)(t)}function OB(t){return(t.slice(-4)===".bin"?n9:_C)()}function MB(t,e){var r=[];return t.Props&&r.push(D8(t.Props,e)),t.Custprops&&r.push(I8(t.Props,t.Custprops)),r.join("")}function FB(){return""}function PB(t,e){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(n,a){var o=[];o.push(Oe("NumberFormat",null,{"ss:Format":zt(xr[n.numFmtId])}));var c={"ss:ID":"s"+(21+a)};r.push(Oe("Style",o.join(""),c))}),Oe("Styles",r.join(""))}function FC(t){return Oe("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+F1(t.Ref,{r:0,c:0})})}function LB(t){if(!((t||{}).Workbook||{}).Names)return"";for(var e=t.Workbook.Names,r=[],n=0;n<e.length;++n){var a=e[n];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||r.push(FC(a)))}return Oe("Names",r.join(""))}function VB(t,e,r,n){if(!t||!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,o=[],c=0;c<a.length;++c){var d=a[c];d.Sheet==r&&(d.Name.match(/^_xlfn\./)||o.push(FC(d)))}return o.join("")}function BB(t,e,r,n){if(!t)return"";var a=[];if(t["!margins"]&&(a.push("<PageSetup>"),t["!margins"].header&&a.push(Oe("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&a.push(Oe("Footer",null,{"x:Margin":t["!margins"].footer})),a.push(Oe("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)a.push(Oe("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var o=0;o<r&&!(n.Workbook.Sheets[o]&&!n.Workbook.Sheets[o].Hidden);++o);o==r&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),t["!protect"]&&(a.push(mn("ProtectContents","True")),t["!protect"].objects&&a.push(mn("ProtectObjects","True")),t["!protect"].scenarios&&a.push(mn("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?a.push(mn("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&a.push(mn("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(c){t["!protect"][c[0]]&&a.push("<"+c[1]+"/>")})),a.length==0?"":Oe("WorksheetOptions",a.join(""),{xmlns:va.x})}function UB(t){return t.map(function(e){var r=GL(e.t||""),n=Oe("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Oe("Comment",n,{"ss:Author":e.a})}).join("")}function zB(t,e,r,n,a,o,c){if(!t||t.v==null&&t.f==null)return"";var d={};if(t.f&&(d["ss:Formula"]="="+zt(F1(t.f,c))),t.F&&t.F.slice(0,e.length)==e){var m=en(t.F.slice(e.length+1));d["ss:ArrayRange"]="RC:R"+(m.r==c.r?"":"["+(m.r-c.r)+"]")+"C"+(m.c==c.c?"":"["+(m.c-c.c)+"]")}if(t.l&&t.l.Target&&(d["ss:HRef"]=zt(t.l.Target),t.l.Tooltip&&(d["x:HRefScreenTip"]=zt(t.l.Tooltip))),r["!merges"])for(var h=r["!merges"],p=0;p!=h.length;++p)h[p].s.c!=c.c||h[p].s.r!=c.r||(h[p].e.c>h[p].s.c&&(d["ss:MergeAcross"]=h[p].e.c-h[p].s.c),h[p].e.r>h[p].s.r&&(d["ss:MergeDown"]=h[p].e.r-h[p].s.r));var v="",y="";switch(t.t){case"z":if(!n.sheetStubs)return"";break;case"n":v="Number",y=String(t.v);break;case"b":v="Boolean",y=t.v?"1":"0";break;case"e":v="Error",y=Jh[t.v];break;case"d":v="DateTime",y=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||xr[14]);break;case"s":v="String",y=qL(t.v||"");break}var w=Yo(n.cellXfs,t,n);d["ss:StyleID"]="s"+(21+w),d["ss:Index"]=c.c+1;var N=t.v!=null?y:"",E=t.t=="z"?"":'<Data ss:Type="'+v+'">'+N+"</Data>";return(t.c||[]).length>0&&(E+=UB(t.c)),Oe("Cell",E,d)}function HB(t,e){var r='<Row ss:Index="'+(t+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=gC(e.hpt)),e.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(r+=' ss:Hidden="1"')),r+">"}function qB(t,e,r,n){if(!t["!ref"])return"";var a=ir(t["!ref"]),o=t["!merges"]||[],c=0,d=[];t["!cols"]&&t["!cols"].forEach(function(T,j){O1(T);var O=!!T.width,P=up(j,T),z={"ss:Index":j+1};O&&(z["ss:Width"]=S0(P.width)),T.hidden&&(z["ss:Hidden"]="1"),d.push(Oe("Column",null,z))});for(var m=Array.isArray(t),h=a.s.r;h<=a.e.r;++h){for(var p=[HB(h,(t["!rows"]||[])[h])],v=a.s.c;v<=a.e.c;++v){var y=!1;for(c=0;c!=o.length;++c)if(!(o[c].s.c>v)&&!(o[c].s.r>h)&&!(o[c].e.c<v)&&!(o[c].e.r<h)){(o[c].s.c!=v||o[c].s.r!=h)&&(y=!0);break}if(!y){var w={r:h,c:v},N=Ht(w),E=m?(t[h]||[])[v]:t[N];p.push(zB(E,N,t,e,r,n,w))}}p.push("</Row>"),p.length>2&&d.push(p.join(""))}return d.join("")}function GB(t,e,r){var n=[],a=r.SheetNames[t],o=r.Sheets[a],c=o?VB(o,e,t,r):"";return c.length>0&&n.push("<Names>"+c+"</Names>"),c=o?qB(o,e,t,r):"",c.length>0&&n.push("<Table>"+c+"</Table>"),n.push(BB(o,e,t,r)),n.join("")}function $B(t,e){e||(e={}),t.SSF||(t.SSF=ta(xr)),t.SSF&&(sp(),ap(t.SSF),e.revssf=ip(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF,e.cellXfs=[],Yo(e.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(MB(t,e)),r.push(FB()),r.push(""),r.push("");for(var n=0;n<t.SheetNames.length;++n)r.push(Oe("Worksheet",GB(n,e,t),{"ss:Name":zt(t.SheetNames[n])}));return r[2]=PB(t,e),r[3]=LB(t),Mr+Oe("Workbook",r.join(""),{xmlns:va.ss,"xmlns:o":va.o,"xmlns:x":va.x,"xmlns:ss":va.ss,"xmlns:dt":va.dt,"xmlns:html":va.html})}var Rv={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function WB(t,e){var r=[],n=[],a=[],o=0,c,d=DN(qN,"n"),m=DN(GN,"n");if(t.Props)for(c=yn(t.Props),o=0;o<c.length;++o)(Object.prototype.hasOwnProperty.call(d,c[o])?r:Object.prototype.hasOwnProperty.call(m,c[o])?n:a).push([c[o],t.Props[c[o]]]);if(t.Custprops)for(c=yn(t.Custprops),o=0;o<c.length;++o)Object.prototype.hasOwnProperty.call(t.Props||{},c[o])||(Object.prototype.hasOwnProperty.call(d,c[o])?r:Object.prototype.hasOwnProperty.call(m,c[o])?n:a).push([c[o],t.Custprops[c[o]]]);var h=[];for(o=0;o<a.length;++o)iC.indexOf(a[o][0])>-1||nC.indexOf(a[o][0])>-1||a[o][1]!=null&&h.push(a[o]);n.length&&Xt.utils.cfb_add(e,"/SummaryInformation",XN(n,Rv.SI,m,GN)),(r.length||h.length)&&Xt.utils.cfb_add(e,"/DocumentSummaryInformation",XN(r,Rv.DSI,d,qN,h.length?h:null,Rv.UDI))}function YB(t,e){var r=e||{},n=Xt.utils.cfb_new({root:"R"}),a="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":a="/Workbook",r.biff=8;break;case"biff5":a="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return Xt.utils.cfb_add(n,a,PC(t,r)),r.biff==8&&(t.Props||t.Custprops)&&WB(t,n),r.biff==8&&t.vbaraw&&h9(n,Xt.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),n}var KB={0:{f:JV},1:{f:i7},2:{f:S7},3:{f:m7},4:{f:u7},5:{f:w7},6:{f:D7},7:{f:x7},8:{f:L7},9:{f:P7},10:{f:M7},11:{f:F7},12:{f:l7},13:{f:C7},14:{f:g7},15:{f:h7},16:{f:T7},17:{f:k7},18:{f:_7},19:{f:R1},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:NB},40:{},42:{},43:{f:D5},44:{f:A5},45:{f:O5},46:{f:F5},47:{f:M5},48:{},49:{f:l8},50:{},51:{f:J5},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:c5},62:{f:R7},63:{f:a9},64:{f:eB},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Hs,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:X7},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:a7},148:{f:t7,p:16},151:{f:q7},152:{},153:{f:EB},154:{},155:{},156:{f:yB},157:{},158:{},159:{T:1,f:y5},160:{T:-1},161:{T:1,f:nc},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:V7},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:X5},336:{T:-1},337:{f:t9,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:mx},357:{},358:{},359:{},360:{T:1},361:{},362:{f:n5},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:G7},427:{f:$7},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:Y7},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:n7},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:z7},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:mx},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:c9},633:{T:1},634:{T:-1},635:{T:1,f:o9},636:{T:-1},637:{f:h8},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:fB},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:tB},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function Fe(t,e,r,n){var a=e;if(!isNaN(a)){var o=n||(r||[]).length||0,c=t.next(4);c.write_shift(2,a),c.write_shift(2,o),o>0&&j1(r)&&t.push(r)}}function XB(t,e,r,n){var a=(r||[]).length||0;if(a<=8224)return Fe(t,e,r,a);var o=e;if(!isNaN(o)){for(var c=r.parts||[],d=0,m=0,h=0;h+(c[d]||8224)<=8224;)h+=c[d]||8224,d++;var p=t.next(4);for(p.write_shift(2,o),p.write_shift(2,h),t.push(r.slice(m,m+h)),m+=h;m<a;){for(p=t.next(4),p.write_shift(2,60),h=0;h+(c[d]||8224)<=8224;)h+=c[d]||8224,d++;p.write_shift(2,h),t.push(r.slice(m,m+h)),m+=h}}}function ef(t,e,r){return t||(t=ye(7)),t.write_shift(2,e),t.write_shift(2,r),t.write_shift(2,0),t.write_shift(1,0),t}function QB(t,e,r,n){var a=ye(9);return ef(a,t,e),lC(r,n||"b",a),a}function JB(t,e,r){var n=ye(8+2*r.length);return ef(n,t,e),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function ZB(t,e,r,n){if(e.v!=null)switch(e.t){case"d":case"n":var a=e.t=="d"?ea(zn(e.v)):e.v;a==(a|0)&&a>=0&&a<65536?Fe(t,2,f5(r,n,a)):Fe(t,3,h5(r,n,a));return;case"b":case"e":Fe(t,5,QB(r,n,e.v,e.t));return;case"s":case"str":Fe(t,4,JB(r,n,(e.v||"").slice(0,255)));return}Fe(t,1,ef(null,r,n))}function eU(t,e,r,n){var a=Array.isArray(e),o=ir(e["!ref"]||"A1"),c,d="",m=[];if(o.e.c>255||o.e.r>16383){if(n.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");o.e.c=Math.min(o.e.c,255),o.e.r=Math.min(o.e.c,16383),c=Or(o)}for(var h=o.s.r;h<=o.e.r;++h){d=vn(h);for(var p=o.s.c;p<=o.e.c;++p){h===o.s.r&&(m[p]=Cn(p)),c=m[p]+d;var v=a?(e[h]||[])[p]:e[c];v&&ZB(t,v,h,p)}}}function tU(t,e){for(var r=e||{},n=Zn(),a=0,o=0;o<t.SheetNames.length;++o)t.SheetNames[o]==r.sheet&&(a=o);if(a==0&&r.sheet&&t.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return Fe(n,r.biff==4?1033:r.biff==3?521:9,k1(t,16,r)),eU(n,t.Sheets[t.SheetNames[a]],a,r),Fe(n,10),n.end()}function rU(t,e,r){Fe(t,49,K8({sz:12,name:"Arial"},r))}function nU(t,e,r){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&Fe(t,1054,J8(a,e[a],r))})}function aU(t,e){var r=ye(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),Fe(t,2151,r),r=ye(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),dC(ir(e["!ref"]||"A1"),r),r.write_shift(4,4),Fe(t,2152,r)}function sU(t,e){for(var r=0;r<16;++r)Fe(t,224,JN({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(n){Fe(t,224,JN(n,0,e))})}function iU(t,e){for(var r=0;r<e["!links"].length;++r){var n=e["!links"][r];Fe(t,440,i5(n)),n[1].Tooltip&&Fe(t,2048,o5(n))}delete e["!links"]}function oU(t,e){if(e){var r=0;e.forEach(function(n,a){++r<=256&&n&&Fe(t,125,u5(up(a,n),a))})}}function lU(t,e,r,n,a){var o=16+Yo(a.cellXfs,e,a);if(e.v==null&&!e.bf){Fe(t,513,ql(r,n,o));return}if(e.bf)Fe(t,6,IV(e,r,n,a,o));else switch(e.t){case"d":case"n":var c=e.t=="d"?ea(zn(e.v)):e.v;Fe(t,515,r5(r,n,c,o));break;case"b":case"e":Fe(t,517,t5(r,n,e.v,o,a,e.t));break;case"s":case"str":if(a.bookSST){var d=L1(a.Strings,e.v,a.revStrings);Fe(t,253,X8(r,n,d,o))}else Fe(t,516,Q8(r,n,(e.v||"").slice(0,255),o,a));break;default:Fe(t,513,ql(r,n,o))}}function cU(t,e,r){var n=Zn(),a=r.SheetNames[t],o=r.Sheets[a]||{},c=(r||{}).Workbook||{},d=(c.Sheets||[])[t]||{},m=Array.isArray(o),h=e.biff==8,p,v="",y=[],w=ir(o["!ref"]||"A1"),N=h?65536:16384;if(w.e.c>255||w.e.r>=N){if(e.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:IV16384");w.e.c=Math.min(w.e.c,255),w.e.r=Math.min(w.e.c,N-1)}Fe(n,2057,k1(r,16,e)),Fe(n,13,Pa(1)),Fe(n,12,Pa(100)),Fe(n,15,Bn(!0)),Fe(n,17,Bn(!1)),Fe(n,16,Hl(.001)),Fe(n,95,Bn(!0)),Fe(n,42,Bn(!1)),Fe(n,43,Bn(!1)),Fe(n,130,Pa(1)),Fe(n,128,e5()),Fe(n,131,Bn(!1)),Fe(n,132,Bn(!1)),h&&oU(n,o["!cols"]),Fe(n,512,Z8(w,e)),h&&(o["!links"]=[]);for(var E=w.s.r;E<=w.e.r;++E){v=vn(E);for(var T=w.s.c;T<=w.e.c;++T){E===w.s.r&&(y[T]=Cn(T)),p=y[T]+v;var j=m?(o[E]||[])[T]:o[p];j&&(lU(n,j,E,T,e),h&&j.l&&o["!links"].push([p,j.l]))}}var O=d.CodeName||d.name||a;return h&&Fe(n,574,Y8((c.Views||[])[0])),h&&(o["!merges"]||[]).length&&Fe(n,229,s5(o["!merges"])),h&&iU(n,o),Fe(n,442,uC(O)),h&&aU(n,o),Fe(n,10),n.end()}function uU(t,e,r){var n=Zn(),a=(t||{}).Workbook||{},o=a.Sheets||[],c=a.WBProps||{},d=r.biff==8,m=r.biff==5;if(Fe(n,2057,k1(t,5,r)),r.bookType=="xla"&&Fe(n,135),Fe(n,225,d?Pa(1200):null),Fe(n,193,M8(2)),m&&Fe(n,191),m&&Fe(n,192),Fe(n,226),Fe(n,92,q8("SheetJS",r)),Fe(n,66,Pa(d?1200:1252)),d&&Fe(n,353,Pa(0)),d&&Fe(n,448),Fe(n,317,d5(t.SheetNames.length)),d&&t.vbaraw&&Fe(n,211),d&&t.vbaraw){var h=c.CodeName||"ThisWorkbook";Fe(n,442,uC(h))}Fe(n,156,Pa(17)),Fe(n,25,Bn(!1)),Fe(n,18,Bn(!1)),Fe(n,19,Pa(0)),d&&Fe(n,431,Bn(!1)),d&&Fe(n,444,Pa(0)),Fe(n,61,W8()),Fe(n,64,Bn(!1)),Fe(n,141,Pa(0)),Fe(n,34,Bn(pB(t)=="true")),Fe(n,14,Bn(!0)),d&&Fe(n,439,Bn(!1)),Fe(n,218,Pa(0)),rU(n,t,r),nU(n,t.SSF,r),sU(n,r),d&&Fe(n,352,Bn(!1));var p=n.end(),v=Zn();d&&Fe(v,140,l5()),d&&r.Strings&&XB(v,252,$8(r.Strings)),Fe(v,10);var y=v.end(),w=Zn(),N=0,E=0;for(E=0;E<t.SheetNames.length;++E)N+=(d?12:11)+(d?2:1)*t.SheetNames[E].length;var T=p.length+N+y.length;for(E=0;E<t.SheetNames.length;++E){var j=o[E]||{};Fe(w,133,G8({pos:T,hs:j.Hidden||0,dt:0,name:t.SheetNames[E]},r)),T+=e[E].length}var O=w.end();if(N!=O.length)throw new Error("BS8 "+N+" != "+O.length);var P=[];return p.length&&P.push(p),O.length&&P.push(O),y.length&&P.push(y),fn(P)}function dU(t,e){var r=e||{},n=[];t&&!t.SSF&&(t.SSF=ta(xr)),t&&t.SSF&&(sp(),ap(t.SSF),r.revssf=ip(t.SSF),r.revssf[t.SSF[65535]]=0,r.ssf=t.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,V1(r),r.cellXfs=[],Yo(r.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var a=0;a<t.SheetNames.length;++a)n[n.length]=cU(a,r,t);return n.unshift(uU(t,n,r)),fn(n)}function PC(t,e){for(var r=0;r<=t.SheetNames.length;++r){var n=t.Sheets[t.SheetNames[r]];if(!(!n||!n["!ref"])){var a=_a(n["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var o=e||{};switch(o.biff||2){case 8:case 5:return dU(t,e);case 4:case 3:case 2:return tU(t,e)}throw new Error("invalid type "+o.bookType+" for BIFF")}function hU(t,e,r,n){for(var a=t["!merges"]||[],o=[],c=e.s.c;c<=e.e.c;++c){for(var d=0,m=0,h=0;h<a.length;++h)if(!(a[h].s.r>r||a[h].s.c>c)&&!(a[h].e.r<r||a[h].e.c<c)){if(a[h].s.r<r||a[h].s.c<c){d=-1;break}d=a[h].e.r-a[h].s.r+1,m=a[h].e.c-a[h].s.c+1;break}if(!(d<0)){var p=Ht({r,c}),v=n.dense?(t[r]||[])[c]:t[p],y=v&&v.v!=null&&(v.h||HL(v.w||(Di(v),v.w)||""))||"",w={};d>1&&(w.rowspan=d),m>1&&(w.colspan=m),n.editable?y='<span contenteditable="true">'+y+"</span>":v&&(w["data-t"]=v&&v.t||"z",v.v!=null&&(w["data-v"]=v.v),v.z!=null&&(w["data-z"]=v.z),v.l&&(v.l.Target||"#").charAt(0)!="#"&&(y='<a href="'+v.l.Target+'">'+y+"</a>")),w.id=(n.id||"sjs")+"-"+p,o.push(Oe("td",y,w))}}var N="<tr>";return N+o.join("")+"</tr>"}var fU='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',mU="</body></html>";function pU(t,e,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function LC(t,e){var r=e||{},n=r.header!=null?r.header:fU,a=r.footer!=null?r.footer:mU,o=[n],c=_a(t["!ref"]);r.dense=Array.isArray(t),o.push(pU(t,c,r));for(var d=c.s.r;d<=c.e.r;++d)o.push(hU(t,c,d,r));return o.push("</table>"+a),o.join("")}function VC(t,e,r){var n=r||{},a=0,o=0;if(n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var c=typeof n.origin=="string"?en(n.origin):n.origin;a=c.r,o=c.c}var d=e.getElementsByTagName("tr"),m=Math.min(n.sheetRows||1e7,d.length),h={s:{r:0,c:0},e:{r:a,c:o}};if(t["!ref"]){var p=_a(t["!ref"]);h.s.r=Math.min(h.s.r,p.s.r),h.s.c=Math.min(h.s.c,p.s.c),h.e.r=Math.max(h.e.r,p.e.r),h.e.c=Math.max(h.e.c,p.e.c),a==-1&&(h.e.r=a=p.e.r+1)}var v=[],y=0,w=t["!rows"]||(t["!rows"]=[]),N=0,E=0,T=0,j=0,O=0,P=0;for(t["!cols"]||(t["!cols"]=[]);N<d.length&&E<m;++N){var z=d[N];if(sT(z)){if(n.display)continue;w[E]={hidden:!0}}var Q=z.children;for(T=j=0;T<Q.length;++T){var U=Q[T];if(!(n.display&&sT(U))){var C=U.hasAttribute("data-v")?U.getAttribute("data-v"):U.hasAttribute("v")?U.getAttribute("v"):WL(U.innerHTML),k=U.getAttribute("data-z")||U.getAttribute("z");for(y=0;y<v.length;++y){var S=v[y];S.s.c==j+o&&S.s.r<E+a&&E+a<=S.e.r&&(j=S.e.c+1-o,y=-1)}P=+U.getAttribute("colspan")||1,((O=+U.getAttribute("rowspan")||1)>1||P>1)&&v.push({s:{r:E+a,c:j+o},e:{r:E+a+(O||1)-1,c:j+o+(P||1)-1}});var F={t:"s",v:C},M=U.getAttribute("data-t")||U.getAttribute("t")||"";C!=null&&(C.length==0?F.t=M||"z":n.raw||C.trim().length==0||M=="s"||(C==="TRUE"?F={t:"b",v:!0}:C==="FALSE"?F={t:"b",v:!1}:isNaN(Ei(C))?isNaN(jh(C).getDate())||(F={t:"d",v:zn(C)},n.cellDates||(F={t:"n",v:ea(F.v)}),F.z=n.dateNF||xr[14]):F={t:"n",v:Ei(C)})),F.z===void 0&&k!=null&&(F.z=k);var A="",D=U.getElementsByTagName("A");if(D&&D.length)for(var we=0;we<D.length&&!(D[we].hasAttribute("href")&&(A=D[we].getAttribute("href"),A.charAt(0)!="#"));++we);A&&A.charAt(0)!="#"&&(F.l={Target:A}),n.dense?(t[E+a]||(t[E+a]=[]),t[E+a][j+o]=F):t[Ht({c:j+o,r:E+a})]=F,h.e.c<j+o&&(h.e.c=j+o),j+=P}}++E}return v.length&&(t["!merges"]=(t["!merges"]||[]).concat(v)),h.e.r=Math.max(h.e.r,E-1+a),t["!ref"]=Or(h),E>=m&&(t["!fullref"]=Or((h.e.r=d.length-N+E-1+a,h))),t}function BC(t,e){var r=e||{},n=r.dense?[]:{};return VC(n,t,e)}function gU(t,e){return Zl(BC(t,e),e)}function sT(t){var e="",r=vU(t);return r&&(e=r(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function vU(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var xU=(function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+Ah({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return Mr+e}})(),iT=(function(){var t=function(o){return zt(o).replace(/  +/g,function(c){return'<text:s text:c="'+c.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(o,c,d){var m=[];m.push('      <table:table table:name="'+zt(c.SheetNames[d])+`" table:style-name="ta1">
`);var h=0,p=0,v=_a(o["!ref"]||"A1"),y=o["!merges"]||[],w=0,N=Array.isArray(o);if(o["!cols"])for(p=0;p<=v.e.c;++p)m.push("        <table:table-column"+(o["!cols"][p]?' table:style-name="co'+o["!cols"][p].ods+'"':"")+`></table:table-column>
`);var E="",T=o["!rows"]||[];for(h=0;h<v.s.r;++h)E=T[h]?' table:style-name="ro'+T[h].ods+'"':"",m.push("        <table:table-row"+E+`></table:table-row>
`);for(;h<=v.e.r;++h){for(E=T[h]?' table:style-name="ro'+T[h].ods+'"':"",m.push("        <table:table-row"+E+`>
`),p=0;p<v.s.c;++p)m.push(e);for(;p<=v.e.c;++p){var j=!1,O={},P="";for(w=0;w!=y.length;++w)if(!(y[w].s.c>p)&&!(y[w].s.r>h)&&!(y[w].e.c<p)&&!(y[w].e.r<h)){(y[w].s.c!=p||y[w].s.r!=h)&&(j=!0),O["table:number-columns-spanned"]=y[w].e.c-y[w].s.c+1,O["table:number-rows-spanned"]=y[w].e.r-y[w].s.r+1;break}if(j){m.push(r);continue}var z=Ht({r:h,c:p}),Q=N?(o[h]||[])[p]:o[z];if(Q&&Q.f&&(O["table:formula"]=zt(LV(Q.f)),Q.F&&Q.F.slice(0,z.length)==z)){var U=_a(Q.F);O["table:number-matrix-columns-spanned"]=U.e.c-U.s.c+1,O["table:number-matrix-rows-spanned"]=U.e.r-U.s.r+1}if(!Q){m.push(e);continue}switch(Q.t){case"b":P=Q.v?"TRUE":"FALSE",O["office:value-type"]="boolean",O["office:boolean-value"]=Q.v?"true":"false";break;case"n":P=Q.w||String(Q.v||0),O["office:value-type"]="float",O["office:value"]=Q.v||0;break;case"s":case"str":P=Q.v==null?"":Q.v,O["office:value-type"]="string";break;case"d":P=Q.w||zn(Q.v).toISOString(),O["office:value-type"]="date",O["office:date-value"]=zn(Q.v).toISOString(),O["table:style-name"]="ce1";break;default:m.push(e);continue}var C=t(P);if(Q.l&&Q.l.Target){var k=Q.l.Target;k=k.charAt(0)=="#"?"#"+VV(k.slice(1)):k,k.charAt(0)!="#"&&!k.match(/^\w+:/)&&(k="../"+k),C=Oe("text:a",C,{"xlink:href":k.replace(/&/g,"&amp;")})}m.push("          "+Oe("table:table-cell",Oe("text:p",C,{}),O)+`
`)}m.push(`        </table:table-row>
`)}return m.push(`      </table:table>
`),m.join("")},a=function(o,c){o.push(` <office:automatic-styles>
`),o.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),o.push(`   <number:month number:style="long"/>
`),o.push(`   <number:text>/</number:text>
`),o.push(`   <number:day number:style="long"/>
`),o.push(`   <number:text>/</number:text>
`),o.push(`   <number:year/>
`),o.push(`  </number:date-style>
`);var d=0;c.SheetNames.map(function(h){return c.Sheets[h]}).forEach(function(h){if(h&&h["!cols"]){for(var p=0;p<h["!cols"].length;++p)if(h["!cols"][p]){var v=h["!cols"][p];if(v.width==null&&v.wpx==null&&v.wch==null)continue;O1(v),v.ods=d;var y=h["!cols"][p].wpx+"px";o.push('  <style:style style:name="co'+d+`" style:family="table-column">
`),o.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+y+`"/>
`),o.push(`  </style:style>
`),++d}}});var m=0;c.SheetNames.map(function(h){return c.Sheets[h]}).forEach(function(h){if(h&&h["!rows"]){for(var p=0;p<h["!rows"].length;++p)if(h["!rows"][p]){h["!rows"][p].ods=m;var v=h["!rows"][p].hpx+"px";o.push('  <style:style style:name="ro'+m+`" style:family="table-row">
`),o.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+v+`"/>
`),o.push(`  </style:style>
`),++m}}}),o.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),o.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),o.push(`  </style:style>
`),o.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),o.push(` </office:automatic-styles>
`)};return function(c,d){var m=[Mr],h=Ah({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),p=Ah({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});d.bookType=="fods"?(m.push("<office:document"+h+p+`>
`),m.push(tC().replace(/office:document-meta/g,"office:meta"))):m.push("<office:document-content"+h+`>
`),a(m,c),m.push(`  <office:body>
`),m.push(`    <office:spreadsheet>
`);for(var v=0;v!=c.SheetNames.length;++v)m.push(n(c.Sheets[c.SheetNames[v]],c,v));return m.push(`    </office:spreadsheet>
`),m.push(`  </office:body>
`),d.bookType=="fods"?m.push("</office:document>"):m.push("</office:document-content>"),m.join("")}})();function UC(t,e){if(e.bookType=="fods")return iT(t,e);var r=N1(),n="",a=[],o=[];return n="mimetype",pt(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",pt(r,n,iT(t,e)),a.push([n,"text/xml"]),o.push([n,"ContentFile"]),n="styles.xml",pt(r,n,xU(t,e)),a.push([n,"text/xml"]),o.push([n,"StylesFile"]),n="meta.xml",pt(r,n,Mr+tC()),a.push([n,"text/xml"]),o.push([n,"MetadataFile"]),n="manifest.rdf",pt(r,n,R8(o)),a.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",pt(r,n,C8(a)),r}function A0(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function yU(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):as(Ch(t))}function _U(t,e){e:for(var r=0;r<=t.length-e.length;++r){for(var n=0;n<e.length;++n)if(t[r+n]!=e[n])continue e;return!0}return!1}function Ho(t){var e=t.reduce(function(a,o){return a+o.length},0),r=new Uint8Array(e),n=0;return t.forEach(function(a){r.set(a,n),n+=a.length}),r}function EU(t,e,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,a=r/Math.pow(10,n-6176);t[e+15]|=n>>7,t[e+14]|=(n&127)<<1;for(var o=0;a>=1;++o,a/=256)t[e+o]=a&255;t[e+15]|=r>=0?0:128}function Rh(t,e){var r=e?e[0]:0,n=t[r]&127;e:if(t[r++]>=128&&(n|=(t[r]&127)<<7,t[r++]<128||(n|=(t[r]&127)<<14,t[r++]<128)||(n|=(t[r]&127)<<21,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return e&&(e[0]=r),n}function Bt(t){var e=new Uint8Array(7);e[0]=t&127;var r=1;e:if(t>127){if(e[r-1]|=128,e[r]=t>>7&127,++r,t<=16383||(e[r-1]|=128,e[r]=t>>14&127,++r,t<=2097151)||(e[r-1]|=128,e[r]=t>>21&127,++r,t<=268435455)||(e[r-1]|=128,e[r]=t/256>>>21&127,++r,t<=34359738367)||(e[r-1]|=128,e[r]=t/65536>>>21&127,++r,t<=4398046511103))break e;e[r-1]|=128,e[r]=t/16777216>>>21&127,++r}return e.slice(0,r)}function uu(t){var e=0,r=t[e]&127;e:if(t[e++]>=128){if(r|=(t[e]&127)<<7,t[e++]<128||(r|=(t[e]&127)<<14,t[e++]<128)||(r|=(t[e]&127)<<21,t[e++]<128))break e;r|=(t[e]&127)<<28}return r}function Br(t){for(var e=[],r=[0];r[0]<t.length;){var n=r[0],a=Rh(t,r),o=a&7;a=Math.floor(a/8);var c=0,d;if(a==0)break;switch(o){case 0:{for(var m=r[0];t[r[0]++]>=128;);d=t.slice(m,r[0])}break;case 5:c=4,d=t.slice(r[0],r[0]+c),r[0]+=c;break;case 1:c=8,d=t.slice(r[0],r[0]+c),r[0]+=c;break;case 2:c=Rh(t,r),d=t.slice(r[0],r[0]+c),r[0]+=c;break;default:throw new Error("PB Type ".concat(o," for Field ").concat(a," at offset ").concat(n))}var h={data:d,type:o};e[a]==null?e[a]=[h]:e[a].push(h)}return e}function cn(t){var e=[];return t.forEach(function(r,n){r.forEach(function(a){a.data&&(e.push(Bt(n*8+a.type)),a.type==2&&e.push(Bt(a.data.length)),e.push(a.data))})}),Ho(e)}function rs(t){for(var e,r=[],n=[0];n[0]<t.length;){var a=Rh(t,n),o=Br(t.slice(n[0],n[0]+a));n[0]+=a;var c={id:uu(o[1][0].data),messages:[]};o[2].forEach(function(d){var m=Br(d.data),h=uu(m[3][0].data);c.messages.push({meta:m,data:t.slice(n[0],n[0]+h)}),n[0]+=h}),(e=o[3])!=null&&e[0]&&(c.merge=uu(o[3][0].data)>>>0>0),r.push(c)}return r}function $c(t){var e=[];return t.forEach(function(r){var n=[];n[1]=[{data:Bt(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:Bt(+!!r.merge),type:0}]);var a=[];r.messages.forEach(function(c){a.push(c.data),c.meta[3]=[{type:0,data:Bt(c.data.length)}],n[2].push({data:cn(c.meta),type:2})});var o=cn(n);e.push(Bt(o.length)),e.push(o),a.forEach(function(c){return e.push(c)})}),Ho(e)}function wU(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],n=Rh(e,r),a=[];r[0]<e.length;){var o=e[r[0]]&3;if(o==0){var c=e[r[0]++]>>2;if(c<60)++c;else{var d=c-59;c=e[r[0]],d>1&&(c|=e[r[0]+1]<<8),d>2&&(c|=e[r[0]+2]<<16),d>3&&(c|=e[r[0]+3]<<24),c>>>=0,c++,r[0]+=d}a.push(e.slice(r[0],r[0]+c)),r[0]+=c;continue}else{var m=0,h=0;if(o==1?(h=(e[r[0]]>>2&7)+4,m=(e[r[0]++]&224)<<3,m|=e[r[0]++]):(h=(e[r[0]++]>>2)+1,o==2?(m=e[r[0]]|e[r[0]+1]<<8,r[0]+=2):(m=(e[r[0]]|e[r[0]+1]<<8|e[r[0]+2]<<16|e[r[0]+3]<<24)>>>0,r[0]+=4)),a=[Ho(a)],m==0)throw new Error("Invalid offset 0");if(m>a[0].length)throw new Error("Invalid offset beyond length");if(h>=m)for(a.push(a[0].slice(-m)),h-=m;h>=a[a.length-1].length;)a.push(a[a.length-1]),h-=a[a.length-1].length;a.push(a[0].slice(-m,-m+h))}}var p=Ho(a);if(p.length!=n)throw new Error("Unexpected length: ".concat(p.length," != ").concat(n));return p}function ns(t){for(var e=[],r=0;r<t.length;){var n=t[r++],a=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,e.push(wU(n,t.slice(r,r+a))),r+=a}if(r!==t.length)throw new Error("data is not a valid framed stream!");return Ho(e)}function Wc(t){for(var e=[],r=0;r<t.length;){var n=Math.min(t.length-r,268435455),a=new Uint8Array(4);e.push(a);var o=Bt(n),c=o.length;e.push(o),n<=60?(c++,e.push(new Uint8Array([n-1<<2]))):n<=256?(c+=2,e.push(new Uint8Array([240,n-1&255]))):n<=65536?(c+=3,e.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(c+=4,e.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(c+=5,e.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),e.push(t.slice(r,r+n)),c+=n,a[0]=0,a[1]=c&255,a[2]=c>>8&255,a[3]=c>>16&255,r+=n}return Ho(e)}function Dv(t,e){var r=new Uint8Array(32),n=A0(r),a=12,o=0;switch(r[0]=5,t.t){case"n":r[1]=2,EU(r,a,t.v),o|=1,a+=16;break;case"b":r[1]=6,n.setFloat64(a,t.v?1:0,!0),o|=2,a+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[1]=3,n.setUint32(a,e.indexOf(t.v),!0),o|=8,a+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(8,o,!0),r.slice(0,a)}function Iv(t,e){var r=new Uint8Array(32),n=A0(r),a=12,o=0;switch(r[0]=3,t.t){case"n":r[2]=2,n.setFloat64(a,t.v,!0),o|=32,a+=8;break;case"b":r[2]=6,n.setFloat64(a,t.v?1:0,!0),o|=32,a+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[2]=3,n.setUint32(a,e.indexOf(t.v),!0),o|=16,a+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(4,o,!0),r.slice(0,a)}function po(t){var e=Br(t);return Rh(e[1][0].data)}function NU(t,e,r){var n,a,o,c;if(!((n=t[6])!=null&&n[0])||!((a=t[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var d=((c=(o=t[8])==null?void 0:o[0])==null?void 0:c.data)&&uu(t[8][0].data)>0||!1;if(d)throw"Math only works with normal offsets";for(var m=0,h=A0(t[7][0].data),p=0,v=[],y=A0(t[4][0].data),w=0,N=[],E=0;E<e.length;++E){if(e[E]==null){h.setUint16(E*2,65535,!0),y.setUint16(E*2,65535);continue}h.setUint16(E*2,p,!0),y.setUint16(E*2,w,!0);var T,j;switch(typeof e[E]){case"string":T=Dv({t:"s",v:e[E]},r),j=Iv({t:"s",v:e[E]},r);break;case"number":T=Dv({t:"n",v:e[E]},r),j=Iv({t:"n",v:e[E]},r);break;case"boolean":T=Dv({t:"b",v:e[E]},r),j=Iv({t:"b",v:e[E]},r);break;default:throw new Error("Unsupported value "+e[E])}v.push(T),p+=T.length,N.push(j),w+=j.length,++m}for(t[2][0].data=Bt(m);E<t[7][0].data.length/2;++E)h.setUint16(E*2,65535,!0),y.setUint16(E*2,65535,!0);return t[6][0].data=Ho(v),t[3][0].data=Ho(N),m}function TU(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=_a(r["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(Or(n)));var o=R0(r,{range:n,header:1}),c=["~Sh33tJ5~"];o.forEach(function(te){return te.forEach(function(Z){typeof Z=="string"&&c.push(Z)})});var d={},m=[],h=Xt.read(e.numbers,{type:"base64"});h.FileIndex.map(function(te,Z){return[te,h.FullPaths[Z]]}).forEach(function(te){var Z=te[0],re=te[1];if(Z.type==2&&Z.name.match(/\.iwa/)){var de=Z.content,Ve=ns(de),ke=rs(Ve);ke.forEach(function(He){m.push(He.id),d[He.id]={deps:[],location:re,type:uu(He.messages[0].meta[1][0].data)}})}}),m.sort(function(te,Z){return te-Z});var p=m.filter(function(te){return te>1}).map(function(te){return[te,Bt(te)]});h.FileIndex.map(function(te,Z){return[te,h.FullPaths[Z]]}).forEach(function(te){var Z=te[0];if(te[1],!!Z.name.match(/\.iwa/)){var re=rs(ns(Z.content));re.forEach(function(de){de.messages.forEach(function(Ve){p.forEach(function(ke){de.messages.some(function(He){return uu(He.meta[1][0].data)!=11006&&_U(He.data,ke[1])})&&d[ke[0]].deps.push(de.id)})})})}});for(var v=Xt.find(h,d[1].location),y=rs(ns(v.content)),w,N=0;N<y.length;++N){var E=y[N];E.id==1&&(w=E)}var T=po(Br(w.messages[0].data)[1][0].data);for(v=Xt.find(h,d[T].location),y=rs(ns(v.content)),N=0;N<y.length;++N)E=y[N],E.id==T&&(w=E);for(T=po(Br(w.messages[0].data)[2][0].data),v=Xt.find(h,d[T].location),y=rs(ns(v.content)),N=0;N<y.length;++N)E=y[N],E.id==T&&(w=E);for(T=po(Br(w.messages[0].data)[2][0].data),v=Xt.find(h,d[T].location),y=rs(ns(v.content)),N=0;N<y.length;++N)E=y[N],E.id==T&&(w=E);var j=Br(w.messages[0].data);{j[6][0].data=Bt(n.e.r+1),j[7][0].data=Bt(n.e.c+1);var O=po(j[46][0].data),P=Xt.find(h,d[O].location),z=rs(ns(P.content));{for(var Q=0;Q<z.length&&z[Q].id!=O;++Q);if(z[Q].id!=O)throw"Bad ColumnRowUIDMapArchive";var U=Br(z[Q].messages[0].data);U[1]=[],U[2]=[],U[3]=[];for(var C=0;C<=n.e.c;++C){var k=[];k[1]=k[2]=[{type:0,data:Bt(C+420690)}],U[1].push({type:2,data:cn(k)}),U[2].push({type:0,data:Bt(C)}),U[3].push({type:0,data:Bt(C)})}U[4]=[],U[5]=[],U[6]=[];for(var S=0;S<=n.e.r;++S)k=[],k[1]=k[2]=[{type:0,data:Bt(S+726270)}],U[4].push({type:2,data:cn(k)}),U[5].push({type:0,data:Bt(S)}),U[6].push({type:0,data:Bt(S)});z[Q].messages[0].data=cn(U)}P.content=Wc($c(z)),P.size=P.content.length,delete j[46];var F=Br(j[4][0].data);{F[7][0].data=Bt(n.e.r+1);var M=Br(F[1][0].data),A=po(M[2][0].data);P=Xt.find(h,d[A].location),z=rs(ns(P.content));{if(z[0].id!=A)throw"Bad HeaderStorageBucket";var D=Br(z[0].messages[0].data);for(S=0;S<o.length;++S){var we=Br(D[2][0].data);we[1][0].data=Bt(S),we[4][0].data=Bt(o[S].length),D[2][S]={type:D[2][0].type,data:cn(we)}}z[0].messages[0].data=cn(D)}P.content=Wc($c(z)),P.size=P.content.length;var Me=po(F[2][0].data);P=Xt.find(h,d[Me].location),z=rs(ns(P.content));{if(z[0].id!=Me)throw"Bad HeaderStorageBucket";for(D=Br(z[0].messages[0].data),C=0;C<=n.e.c;++C)we=Br(D[2][0].data),we[1][0].data=Bt(C),we[4][0].data=Bt(n.e.r+1),D[2][C]={type:D[2][0].type,data:cn(we)};z[0].messages[0].data=cn(D)}P.content=Wc($c(z)),P.size=P.content.length;var ge=po(F[4][0].data);(function(){for(var te=Xt.find(h,d[ge].location),Z=rs(ns(te.content)),re,de=0;de<Z.length;++de){var Ve=Z[de];Ve.id==ge&&(re=Ve)}var ke=Br(re.messages[0].data);{ke[3]=[];var He=[];c.forEach(function(tt,qt){He[1]=[{type:0,data:Bt(qt)}],He[2]=[{type:0,data:Bt(1)}],He[3]=[{type:2,data:yU(tt)}],ke[3].push({type:2,data:cn(He)})})}re.messages[0].data=cn(ke);var ae=$c(Z),Be=Wc(ae);te.content=Be,te.size=te.content.length})();var De=Br(F[3][0].data);{var Le=De[1][0];delete De[2];var Je=Br(Le.data);{var ee=po(Je[2][0].data);(function(){for(var te=Xt.find(h,d[ee].location),Z=rs(ns(te.content)),re,de=0;de<Z.length;++de){var Ve=Z[de];Ve.id==ee&&(re=Ve)}var ke=Br(re.messages[0].data);{delete ke[6],delete De[7];var He=new Uint8Array(ke[5][0].data);ke[5]=[];for(var ae=0,Be=0;Be<=n.e.r;++Be){var tt=Br(He);ae+=NU(tt,o[Be],c),tt[1][0].data=Bt(Be),ke[5].push({data:cn(tt),type:2})}ke[1]=[{type:0,data:Bt(n.e.c+1)}],ke[2]=[{type:0,data:Bt(n.e.r+1)}],ke[3]=[{type:0,data:Bt(ae)}],ke[4]=[{type:0,data:Bt(n.e.r+1)}]}re.messages[0].data=cn(ke);var qt=$c(Z),xt=Wc(qt);te.content=xt,te.size=te.content.length})()}Le.data=cn(Je)}F[3][0].data=cn(De)}j[4][0].data=cn(F)}w.messages[0].data=cn(j);var _e=$c(y),Y=Wc(_e);return v.content=Y,v.size=v.content.length,h}function bU(t){return function(r){for(var n=0;n!=t.length;++n){var a=t[n];r[a[0]]===void 0&&(r[a[0]]=a[1]),a[2]==="n"&&(r[a[0]]=Number(r[a[0]]))}}}function V1(t){bU([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function SU(t,e){return e.bookType=="ods"?UC(t,e):e.bookType=="numbers"?TU(t,e):e.bookType=="xlsb"?jU(t,e):CU(t,e)}function jU(t,e){eu=1024,t&&!t.SSF&&(t.SSF=ta(xr)),t&&t.SSF&&(sp(),ap(t.SSF),e.revssf=ip(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,hh?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r=e.bookType=="xlsb"?"bin":"xml",n=NC.indexOf(e.bookType)>-1,a=Jj();V1(e=e||{});var o=N1(),c="",d=0;if(e.cellXfs=[],Yo(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),c="docProps/core.xml",pt(o,c,rC(t.Props,e)),a.coreprops.push(c),Ut(e.rels,2,c,Ct.CORE_PROPS),c="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var m=[],h=0;h<t.SheetNames.length;++h)(t.Workbook.Sheets[h]||{}).Hidden!=2&&m.push(t.SheetNames[h]);t.Props.SheetNames=m}for(t.Props.Worksheets=t.Props.SheetNames.length,pt(o,c,aC(t.Props)),a.extprops.push(c),Ut(e.rels,3,c,Ct.EXT_PROPS),t.Custprops!==t.Props&&yn(t.Custprops||{}).length>0&&(c="docProps/custom.xml",pt(o,c,sC(t.Custprops)),a.custprops.push(c),Ut(e.rels,4,c,Ct.CUST_PROPS)),d=1;d<=t.SheetNames.length;++d){var p={"!id":{}},v=t.Sheets[t.SheetNames[d-1]],y=(v||{})["!type"]||"sheet";if(c="xl/worksheets/sheet"+d+"."+r,pt(o,c,RB(d-1,c,e,t,p)),a.sheets.push(c),Ut(e.wbrels,-1,"worksheets/sheet"+d+"."+r,Ct.WS[0]),v){var w=v["!comments"],N=!1,E="";w&&w.length>0&&(E="xl/comments"+d+"."+r,pt(o,E,kB(w,E)),a.comments.push(E),Ut(p,-1,"../comments"+d+"."+r,Ct.CMNT),N=!0),v["!legacy"]&&N&&pt(o,"xl/drawings/vmlDrawing"+d+".vml",EC(d,v["!comments"])),delete v["!comments"],delete v["!legacy"]}p["!id"].rId1&&pt(o,eC(c),lu(p))}return e.Strings!=null&&e.Strings.length>0&&(c="xl/sharedStrings."+r,pt(o,c,IB(e.Strings,c,e)),a.strs.push(c),Ut(e.wbrels,-1,"sharedStrings."+r,Ct.SST)),c="xl/workbook."+r,pt(o,c,AB(t,c)),a.workbooks.push(c),Ut(e.rels,1,c,Ct.WB),c="xl/theme/theme1.xml",pt(o,c,yC(t.Themes,e)),a.themes.push(c),Ut(e.wbrels,-1,"theme/theme1.xml",Ct.THEME),c="xl/styles."+r,pt(o,c,DB(t,c,e)),a.styles.push(c),Ut(e.wbrels,-1,"styles."+r,Ct.STY),t.vbaraw&&n&&(c="xl/vbaProject.bin",pt(o,c,t.vbaraw),a.vba.push(c),Ut(e.wbrels,-1,"vbaProject.bin",Ct.VBA)),c="xl/metadata."+r,pt(o,c,OB(c)),a.metadata.push(c),Ut(e.wbrels,-1,"metadata."+r,Ct.XLMETA),pt(o,"[Content_Types].xml",Zj(a,e)),pt(o,"_rels/.rels",lu(e.rels)),pt(o,"xl/_rels/workbook."+r+".rels",lu(e.wbrels)),delete e.revssf,delete e.ssf,o}function CU(t,e){eu=1024,t&&!t.SSF&&(t.SSF=ta(xr)),t&&t.SSF&&(sp(),ap(t.SSF),e.revssf=ip(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,hh?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r="xml",n=NC.indexOf(e.bookType)>-1,a=Jj();V1(e=e||{});var o=N1(),c="",d=0;if(e.cellXfs=[],Yo(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),c="docProps/core.xml",pt(o,c,rC(t.Props,e)),a.coreprops.push(c),Ut(e.rels,2,c,Ct.CORE_PROPS),c="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var m=[],h=0;h<t.SheetNames.length;++h)(t.Workbook.Sheets[h]||{}).Hidden!=2&&m.push(t.SheetNames[h]);t.Props.SheetNames=m}t.Props.Worksheets=t.Props.SheetNames.length,pt(o,c,aC(t.Props)),a.extprops.push(c),Ut(e.rels,3,c,Ct.EXT_PROPS),t.Custprops!==t.Props&&yn(t.Custprops||{}).length>0&&(c="docProps/custom.xml",pt(o,c,sC(t.Custprops)),a.custprops.push(c),Ut(e.rels,4,c,Ct.CUST_PROPS));var p=["SheetJ5"];for(e.tcid=0,d=1;d<=t.SheetNames.length;++d){var v={"!id":{}},y=t.Sheets[t.SheetNames[d-1]],w=(y||{})["!type"]||"sheet";if(c="xl/worksheets/sheet"+d+"."+r,pt(o,c,IC(d-1,e,t,v)),a.sheets.push(c),Ut(e.wbrels,-1,"worksheets/sheet"+d+"."+r,Ct.WS[0]),y){var N=y["!comments"],E=!1,T="";if(N&&N.length>0){var j=!1;N.forEach(function(O){O[1].forEach(function(P){P.T==!0&&(j=!0)})}),j&&(T="xl/threadedComments/threadedComment"+d+"."+r,pt(o,T,s9(N,p,e)),a.threadedcomments.push(T),Ut(v,-1,"../threadedComments/threadedComment"+d+"."+r,Ct.TCMNT)),T="xl/comments"+d+"."+r,pt(o,T,wC(N)),a.comments.push(T),Ut(v,-1,"../comments"+d+"."+r,Ct.CMNT),E=!0}y["!legacy"]&&E&&pt(o,"xl/drawings/vmlDrawing"+d+".vml",EC(d,y["!comments"])),delete y["!comments"],delete y["!legacy"]}v["!id"].rId1&&pt(o,eC(c),lu(v))}return e.Strings!=null&&e.Strings.length>0&&(c="xl/sharedStrings."+r,pt(o,c,fC(e.Strings,e)),a.strs.push(c),Ut(e.wbrels,-1,"sharedStrings."+r,Ct.SST)),c="xl/workbook."+r,pt(o,c,MC(t)),a.workbooks.push(c),Ut(e.rels,1,c,Ct.WB),c="xl/theme/theme1.xml",pt(o,c,yC(t.Themes,e)),a.themes.push(c),Ut(e.wbrels,-1,"theme/theme1.xml",Ct.THEME),c="xl/styles."+r,pt(o,c,vC(t,e)),a.styles.push(c),Ut(e.wbrels,-1,"styles."+r,Ct.STY),t.vbaraw&&n&&(c="xl/vbaProject.bin",pt(o,c,t.vbaraw),a.vba.push(c),Ut(e.wbrels,-1,"vbaProject.bin",Ct.VBA)),c="xl/metadata."+r,pt(o,c,_C()),a.metadata.push(c),Ut(e.wbrels,-1,"metadata."+r,Ct.XLMETA),p.length>1&&(c="xl/persons/person.xml",pt(o,c,i9(p)),a.people.push(c),Ut(e.wbrels,-1,"persons/person.xml",Ct.PEOPLE)),pt(o,"[Content_Types].xml",Zj(a,e)),pt(o,"_rels/.rels",lu(e.rels)),pt(o,"xl/_rels/workbook."+r+".rels",lu(e.wbrels)),delete e.revssf,delete e.ssf,o}function AU(t,e){var r="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=Ri(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function zC(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return Xh(e.file,Xt.write(t,{type:It?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return Xt.write(t,e)}function RU(t,e){var r=ta(e||{}),n=SU(t,r);return DU(n,r)}function DU(t,e){var r={},n=It?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(r.compression="DEFLATE"),e.password)r.type=n;else switch(e.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+e.type)}var a=t.FullPaths?Xt.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!e.compression}):t.generate(r);if(typeof Deno<"u"&&typeof a=="string"){if(e.type=="binary"||e.type=="base64")return a;a=new Uint8Array(np(a))}return e.password&&typeof encrypt_agile<"u"?zC(encrypt_agile(a,e.password),e):e.type==="file"?Xh(e.file,a):e.type=="string"?lh(a):a}function IU(t,e){var r=e||{},n=YB(t,r);return zC(n,r)}function Cs(t,e,r){r||(r="");var n=r+t;switch(e.type){case"base64":return Sh(Ch(n));case"binary":return Ch(n);case"string":return t;case"file":return Xh(e.file,n,"utf8");case"buffer":return It?Oi(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):Cs(n,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function kU(t,e){switch(e.type){case"base64":return Sh(t);case"binary":return t;case"string":return t;case"file":return Xh(e.file,t,"binary");case"buffer":return It?Oi(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function Dm(t,e){switch(e.type){case"string":case"base64":case"binary":for(var r="",n=0;n<t.length;++n)r+=String.fromCharCode(t[n]);return e.type=="base64"?Sh(r):e.type=="string"?lh(r):r;case"file":return Xh(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function HC(t,e){oL(),xB(t);var r=ta(e||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=HC(t,r);return r.type="array",np(n)}var a=0;if(r.sheet&&(typeof r.sheet=="number"?a=r.sheet:a=t.SheetNames.indexOf(r.sheet),!t.SheetNames[a]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return Cs($B(t,r),r);case"slk":case"sylk":return Cs(p5.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"htm":case"html":return Cs(LC(t.Sheets[t.SheetNames[a]],r),r);case"txt":return kU(qC(t.Sheets[t.SheetNames[a]],r),r);case"csv":return Cs(B1(t.Sheets[t.SheetNames[a]],r),r,"\uFEFF");case"dif":return Cs(g5.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"dbf":return Dm(m5.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"prn":return Cs(v5.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"rtf":return Cs(T5.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"eth":return Cs(hC.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"fods":return Cs(UC(t,r),r);case"wk1":return Dm(ZN.sheet_to_wk1(t.Sheets[t.SheetNames[a]],r),r);case"wk3":return Dm(ZN.book_to_wk3(t,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),Dm(PC(t,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),IU(t,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return RU(t,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function OU(t){if(!t.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(t.bookType=r.slice(1)),t.bookType=e[t.bookType]||t.bookType}}function go(t,e,r){var n={};return n.type="file",n.file=e,OU(n),HC(t,n)}function MU(t,e,r,n,a,o,c,d){var m=vn(r),h=d.defval,p=d.raw||!Object.prototype.hasOwnProperty.call(d,"raw"),v=!0,y=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(y,"__rowNum__",{value:r,enumerable:!1})}catch{y.__rowNum__=r}else y.__rowNum__=r;if(!c||t[r])for(var w=e.s.c;w<=e.e.c;++w){var N=c?t[r][w]:t[n[w]+m];if(N===void 0||N.t===void 0){if(h===void 0)continue;o[w]!=null&&(y[o[w]]=h);continue}var E=N.v;switch(N.t){case"z":if(E==null)break;continue;case"e":E=E==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+N.t)}if(o[w]!=null){if(E==null)if(N.t=="e"&&E===null)y[o[w]]=null;else if(h!==void 0)y[o[w]]=h;else if(p&&E===null)y[o[w]]=null;else continue;else y[o[w]]=p&&(N.t!=="n"||N.t==="n"&&d.rawNumbers!==!1)?E:Di(N,E,d);E!=null&&(v=!1)}}return{row:y,isempty:v}}function R0(t,e){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},n=0,a=1,o=[],c=0,d="",m={s:{r:0,c:0},e:{r:0,c:0}},h=e||{},p=h.range!=null?h.range:t["!ref"];switch(h.header===1?n=1:h.header==="A"?n=2:Array.isArray(h.header)?n=3:h.header==null&&(n=0),typeof p){case"string":m=ir(p);break;case"number":m=ir(t["!ref"]),m.s.r=p;break;default:m=p}n>0&&(a=0);var v=vn(m.s.r),y=[],w=[],N=0,E=0,T=Array.isArray(t),j=m.s.r,O=0,P={};T&&!t[j]&&(t[j]=[]);var z=h.skipHidden&&t["!cols"]||[],Q=h.skipHidden&&t["!rows"]||[];for(O=m.s.c;O<=m.e.c;++O)if(!(z[O]||{}).hidden)switch(y[O]=Cn(O),r=T?t[j][O]:t[y[O]+v],n){case 1:o[O]=O-m.s.c;break;case 2:o[O]=y[O];break;case 3:o[O]=h.header[O-m.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),d=c=Di(r,null,h),E=P[c]||0,!E)P[c]=1;else{do d=c+"_"+E++;while(P[d]);P[c]=E,P[d]=1}o[O]=d}for(j=m.s.r+a;j<=m.e.r;++j)if(!(Q[j]||{}).hidden){var U=MU(t,m,j,y,n,o,T,h);(U.isempty===!1||(n===1?h.blankrows!==!1:h.blankrows))&&(w[N++]=U.row)}return w.length=N,w}var oT=/"/g;function FU(t,e,r,n,a,o,c,d){for(var m=!0,h=[],p="",v=vn(r),y=e.s.c;y<=e.e.c;++y)if(n[y]){var w=d.dense?(t[r]||[])[y]:t[n[y]+v];if(w==null)p="";else if(w.v!=null){m=!1,p=""+(d.rawNumbers&&w.t=="n"?w.v:Di(w,null,d));for(var N=0,E=0;N!==p.length;++N)if((E=p.charCodeAt(N))===a||E===o||E===34||d.forceQuotes){p='"'+p.replace(oT,'""')+'"';break}p=="ID"&&(p='"ID"')}else w.f!=null&&!w.F?(m=!1,p="="+w.f,p.indexOf(",")>=0&&(p='"'+p.replace(oT,'""')+'"')):p="";h.push(p)}return d.blankrows===!1&&m?null:h.join(c)}function B1(t,e){var r=[],n=e??{};if(t==null||t["!ref"]==null)return"";var a=ir(t["!ref"]),o=n.FS!==void 0?n.FS:",",c=o.charCodeAt(0),d=n.RS!==void 0?n.RS:`
`,m=d.charCodeAt(0),h=new RegExp((o=="|"?"\\|":o)+"+$"),p="",v=[];n.dense=Array.isArray(t);for(var y=n.skipHidden&&t["!cols"]||[],w=n.skipHidden&&t["!rows"]||[],N=a.s.c;N<=a.e.c;++N)(y[N]||{}).hidden||(v[N]=Cn(N));for(var E=0,T=a.s.r;T<=a.e.r;++T)(w[T]||{}).hidden||(p=FU(t,a,T,v,c,m,o,n),p!=null&&(n.strip&&(p=p.replace(h,"")),(p||n.blankrows!==!1)&&r.push((E++?d:"")+p)));return delete n.dense,r.join("")}function qC(t,e){e||(e={}),e.FS="	",e.RS=`
`;var r=B1(t,e);return r}function PU(t){var e="",r,n="";if(t==null||t["!ref"]==null)return[];var a=ir(t["!ref"]),o="",c=[],d,m=[],h=Array.isArray(t);for(d=a.s.c;d<=a.e.c;++d)c[d]=Cn(d);for(var p=a.s.r;p<=a.e.r;++p)for(o=vn(p),d=a.s.c;d<=a.e.c;++d)if(e=c[d]+o,r=h?(t[p]||[])[d]:t[e],n="",r!==void 0){if(r.F!=null){if(e=r.F,!r.f)continue;n=r.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}m[m.length]=e+"="+n}return m}function GC(t,e,r){var n=r||{},a=+!n.skipHeader,o=t||{},c=0,d=0;if(o&&n.origin!=null)if(typeof n.origin=="number")c=n.origin;else{var m=typeof n.origin=="string"?en(n.origin):n.origin;c=m.r,d=m.c}var h,p={s:{c:0,r:0},e:{c:d,r:c+e.length-1+a}};if(o["!ref"]){var v=ir(o["!ref"]);p.e.c=Math.max(p.e.c,v.e.c),p.e.r=Math.max(p.e.r,v.e.r),c==-1&&(c=v.e.r+1,p.e.r=c+e.length-1+a)}else c==-1&&(c=0,p.e.r=e.length-1+a);var y=n.header||[],w=0;e.forEach(function(E,T){yn(E).forEach(function(j){(w=y.indexOf(j))==-1&&(y[w=y.length]=j);var O=E[j],P="z",z="",Q=Ht({c:d+w,r:c+T+a});h=Dh(o,Q),O&&typeof O=="object"&&!(O instanceof Date)?o[Q]=O:(typeof O=="number"?P="n":typeof O=="boolean"?P="b":typeof O=="string"?P="s":O instanceof Date?(P="d",n.cellDates||(P="n",O=ea(O)),z=n.dateNF||xr[14]):O===null&&n.nullError&&(P="e",O=0),h?(h.t=P,h.v=O,delete h.w,delete h.R,z&&(h.z=z)):o[Q]=h={t:P,v:O},z&&(h.z=z))})}),p.e.c=Math.max(p.e.c,d+y.length-1);var N=vn(c);if(a)for(w=0;w<y.length;++w)o[Cn(w+d)+N]={t:"s",v:y[w]};return o["!ref"]=Or(p),o}function LU(t,e){return GC(null,t,e)}function Dh(t,e,r){if(typeof e=="string"){if(Array.isArray(t)){var n=en(e);return t[n.r]||(t[n.r]=[]),t[n.r][n.c]||(t[n.r][n.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?Dh(t,Ht(e)):Dh(t,Ht({r:e,c:r||0}))}function VU(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var r=t.SheetNames.indexOf(e);if(r>-1)return r;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function BU(){return{SheetNames:[],Sheets:{}}}function UU(t,e,r,n){var a=1;if(!r)for(;a<=65535&&t.SheetNames.indexOf(r="Sheet"+a)!=-1;++a,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&t.SheetNames.indexOf(r)>=0){var o=r.match(/(^.*?)(\d+)$/);a=o&&+o[2]||0;var c=o&&o[1]||r;for(++a;a<=65535&&t.SheetNames.indexOf(r=c+a)!=-1;++a);}if(OC(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=e,r}function zU(t,e,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var n=VU(t,e);switch(t.Workbook.Sheets[n]||(t.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[n].Hidden=r}function HU(t,e){return t.z=e,t}function $C(t,e,r){return e?(t.l={Target:e},r&&(t.l.Tooltip=r)):delete t.l,t}function qU(t,e,r){return $C(t,"#"+e,r)}function GU(t,e,r){t.c||(t.c=[]),t.c.push({t:e,a:r||"SheetJS"})}function $U(t,e,r,n){for(var a=typeof e!="string"?e:ir(e),o=typeof e=="string"?e:Or(e),c=a.s.r;c<=a.e.r;++c)for(var d=a.s.c;d<=a.e.c;++d){var m=Dh(t,c,d);m.t="n",m.F=o,delete m.v,c==a.s.r&&d==a.s.c&&(m.f=r,n&&(m.D=!0))}return t}var jt={encode_col:Cn,encode_row:vn,encode_cell:Ht,encode_range:Or,decode_col:A1,decode_row:C1,split_cell:o8,decode_cell:en,decode_range:_a,format_cell:Di,sheet_add_aoa:$j,sheet_add_json:GC,sheet_add_dom:VC,aoa_to_sheet:Ou,json_to_sheet:LU,table_to_sheet:BC,table_to_book:gU,sheet_to_csv:B1,sheet_to_txt:qC,sheet_to_json:R0,sheet_to_html:LC,sheet_to_formulae:PU,sheet_to_row_object_array:R0,sheet_get_cell:Dh,book_new:BU,book_append_sheet:UU,book_set_sheet_visibility:zU,cell_set_number_format:HU,cell_set_hyperlink:$C,cell_set_internal_link:qU,cell_add_comment:GU,sheet_set_array_formula:$U,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const Qe=t=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t),Ma=t=>`${t.toFixed(2)}%`,vo={exportRevenueByHouse(t,e="receitas-por-casa.xlsx"){const r=jt.json_to_sheet(t.map(a=>({Casa:a.houseName,Endereo:a.houseAddress,Vendas:a.numberOfSales,Noites:a.numberOfNights,Dirias:Qe(a.dailyRatesRevenue),Concierge:Qe(a.conciergeRevenue),"Comisses Fornecedores":Qe(a.suppliersCommission),"Receita Bruta":Qe(a.grossRevenue),Despesas:Qe(a.expenses),"Receita Lquida":Qe(a.netRevenue)}))),n=jt.book_new();jt.book_append_sheet(n,r,"Receitas por Casa"),go(n,e)},exportCashFlow(t,e="fluxo-de-caixa.xlsx"){const r=jt.json_to_sheet(t.map(a=>({Perodo:a.period,Entradas:Qe(a.cashIn),Sadas:Qe(a.cashOut),"Saldo do Perodo":Qe(a.balance),"Saldo Acumulado":Qe(a.accumulatedBalance)}))),n=jt.book_new();jt.book_append_sheet(n,r,"Fluxo de Caixa"),go(n,e)},exportContractsReport(t,e="relatorio-contratos.xlsx"){const r=[{Status:"Ativos",Quantidade:t.active.count,"Receita Total":Qe(t.active.totalRevenue),"Ticket Mdio":Qe(t.active.averageValue)},{Status:"Concludos",Quantidade:t.completed.count,"Receita Total":Qe(t.completed.totalRevenue),"Ticket Mdio":Qe(t.completed.averageValue)},{Status:"Pendentes",Quantidade:t.pending.count,"Receita Total":Qe(t.pending.totalRevenue),"Ticket Mdio":"-"},{Status:"Cancelados",Quantidade:t.cancelled.count,"Receita Perdida":Qe(t.cancelled.lostRevenue),"Ticket Mdio":"-"}],n=jt.json_to_sheet(r),a=jt.book_new();jt.book_append_sheet(a,n,"Contratos"),go(a,e)},exportDemographicReport(t,e,r){const n={house:"Casa",gender:"Gnero",location:"Localidade",origin:"Origem"},a=jt.json_to_sheet(t.map(c=>({[n[c.category]||"Categoria"]:c.value,"Nmero de Vendas":c.numberOfSales,"Receita Total":Qe(c.totalRevenue),Percentual:Ma(c.percentage),"Ticket Mdio":Qe(c.averageTicket)}))),o=jt.book_new();jt.book_append_sheet(o,a,`Por ${n[e]||"Categoria"}`),go(o,r||`vendas-por-${e}.xlsx`)},exportComparativeReport(t,e="relatorio-comparativo.xlsx"){const r=[{Mtrica:"Total de Vendas",[t.period1.label]:t.period1.metrics.totalSales,[t.period2.label]:t.period2.metrics.totalSales,Variao:t.comparison.totalSales.absoluteChange,"Variao %":Ma(t.comparison.totalSales.percentageChange)},{Mtrica:"Receita Total",[t.period1.label]:Qe(t.period1.metrics.totalRevenue),[t.period2.label]:Qe(t.period2.metrics.totalRevenue),Variao:Qe(t.comparison.totalRevenue.absoluteChange),"Variao %":Ma(t.comparison.totalRevenue.percentageChange)},{Mtrica:"Dirias",[t.period1.label]:Qe(t.period1.metrics.dailyRates),[t.period2.label]:Qe(t.period2.metrics.dailyRates),Variao:Qe(t.comparison.dailyRates.absoluteChange),"Variao %":Ma(t.comparison.dailyRates.percentageChange)},{Mtrica:"Concierge",[t.period1.label]:Qe(t.period1.metrics.concierge),[t.period2.label]:Qe(t.period2.metrics.concierge),Variao:Qe(t.comparison.concierge.absoluteChange),"Variao %":Ma(t.comparison.concierge.percentageChange)},{Mtrica:"Comisses Fornecedores",[t.period1.label]:Qe(t.period1.metrics.suppliersCommission),[t.period2.label]:Qe(t.period2.metrics.suppliersCommission),Variao:Qe(t.comparison.suppliersCommission.absoluteChange),"Variao %":Ma(t.comparison.suppliersCommission.percentageChange)},{Mtrica:"Ticket Mdio",[t.period1.label]:Qe(t.period1.metrics.averageTicket),[t.period2.label]:Qe(t.period2.metrics.averageTicket),Variao:Qe(t.comparison.averageTicket.absoluteChange),"Variao %":Ma(t.comparison.averageTicket.percentageChange)},{Mtrica:"Noites Vendidas",[t.period1.label]:t.period1.metrics.numberOfNights,[t.period2.label]:t.period2.metrics.numberOfNights,Variao:t.comparison.numberOfNights.absoluteChange,"Variao %":Ma(t.comparison.numberOfNights.percentageChange)}],n=jt.json_to_sheet(r),a=jt.book_new();jt.book_append_sheet(a,n,"Comparativo"),go(a,e)},exportTaxReport(t,e="impostos.xlsx"){const r=jt.json_to_sheet(t.map(a=>({Empresa:a.companyName,Perodo:a.period,"Receita Bruta":Qe(a.grossRevenue),"Receita Tributvel":Qe(a.taxableRevenue),Alquota:Ma(a.taxRate),"Valor do Imposto":Qe(a.taxAmount),"Receita Lquida":Qe(a.netRevenue)}))),n=jt.book_new();jt.book_append_sheet(n,r,"Impostos"),go(n,e)},exportFinancialSummary(t,e="resumo-financeiro.xlsx"){const r=[{Mtrica:"Receita Total",Valor:Qe(t.totalRevenue)},{Mtrica:"Despesas Totais",Valor:Qe(t.totalExpenses)},{Mtrica:"Lucro Lquido",Valor:Qe(t.netProfit)},{Mtrica:"Margem de Lucro",Valor:Ma(t.profitMargin)},{Mtrica:"Nmero de Vendas",Valor:t.numberOfSales.toString()},{Mtrica:"Ticket Mdio",Valor:Qe(t.averageTicket)},{Mtrica:"Receita Dirias",Valor:Qe(t.dailyRatesRevenue)},{Mtrica:"Receita Concierge",Valor:Qe(t.conciergeRevenue)},{Mtrica:"Comisses Fornecedores",Valor:Qe(t.suppliersCommissionRevenue)}],n=jt.json_to_sheet(r),a=jt.book_new();jt.book_append_sheet(a,n,"Resumo"),go(a,e)},exportCompleteReport(t,e,r,n,a,o="relatorio-completo.xlsx"){const c=jt.book_new(),d=jt.json_to_sheet([{Mtrica:"Receita Total",Valor:Qe(a.totalRevenue)},{Mtrica:"Despesas Totais",Valor:Qe(a.totalExpenses)},{Mtrica:"Lucro Lquido",Valor:Qe(a.netProfit)},{Mtrica:"Margem de Lucro",Valor:Ma(a.profitMargin)},{Mtrica:"Nmero de Vendas",Valor:a.numberOfSales.toString()},{Mtrica:"Ticket Mdio",Valor:Qe(a.averageTicket)}]);jt.book_append_sheet(c,d,"Resumo");const m=jt.json_to_sheet(t.map(y=>({Casa:y.houseName,Dirias:Qe(y.dailyRatesRevenue),Concierge:Qe(y.conciergeRevenue),Comisses:Qe(y.suppliersCommission),"Receita Bruta":Qe(y.grossRevenue),Despesas:Qe(y.expenses),"Receita Lquida":Qe(y.netRevenue)})));jt.book_append_sheet(c,m,"Receitas por Casa");const h=jt.json_to_sheet(e.map(y=>({Perodo:y.period,Entradas:Qe(y.cashIn),Sadas:Qe(y.cashOut),Saldo:Qe(y.balance)})));jt.book_append_sheet(c,h,"Fluxo de Caixa");const p=jt.json_to_sheet([{Status:"Ativos",Quantidade:r.active.count,Receita:Qe(r.active.totalRevenue)},{Status:"Concludos",Quantidade:r.completed.count,Receita:Qe(r.completed.totalRevenue)},{Status:"Cancelados",Quantidade:r.cancelled.count,Receita:Qe(r.cancelled.lostRevenue)}]);jt.book_append_sheet(c,p,"Contratos");const v=jt.json_to_sheet(n.map(y=>({Empresa:y.companyName,"Receita Bruta":Qe(y.grossRevenue),Alquota:Ma(y.taxRate),"Valor Imposto":Qe(y.taxAmount),"Receita Lquida":Qe(y.netRevenue)})));jt.book_append_sheet(c,v,"Impostos"),go(c,o)}},WU=()=>{const[t,e]=B.useState(!1),[r,n]=B.useState(null),[a,o]=B.useState({startDate:"",endDate:"",company:"all",houseId:"",reportType:"summary",groupBy:"month",demographicType:"house"}),[c,d]=B.useState(null),[m,h]=B.useState([]),[p,v]=B.useState([]),[y,w]=B.useState(null),[N,E]=B.useState([]),[T,j]=B.useState(null),[O,P]=B.useState([]),{showError:z,showWarning:Q,showSuccess:U}=$r();B.useEffect(()=>{C()},[a]);const C=async()=>{e(!0),n(null);try{const F={startDate:a.startDate?new Date(a.startDate):void 0,endDate:a.endDate?new Date(a.endDate):void 0,company:a.company,houseId:a.houseId||void 0,groupBy:a.groupBy};switch(a.reportType){case"summary":{const M=await mo.getFinancialSummary(F);d(M);break}case"revenue-by-house":{const M=await mo.getRevenueByHouse(F);h(M);break}case"cash-flow":{const M=await mo.getCashFlow(F);v(M);break}case"contracts":{const M=await mo.getContractsReport(F);w(M);break}case"breakdown":{const M=await mo.getFinancialSummary(F);d(M);break}case"demographic":{const M=await mo.getDemographicReport(a.demographicType,F);E(M);break}case"comparative":{if(a.startDate&&a.endDate){const M=new Date(a.startDate),A=new Date(a.endDate),D=A.getTime()-M.getTime(),we=new Date(M.getTime()-1),Me=new Date(we.getTime()-D),ge=await mo.getComparativeReport(Me,we,M,A,a.company);j(ge)}else{const M="Por favor, selecione um perodo (data incio e fim) para o relatrio comparativo.";n(M),Q("Perodo necessrio",M)}break}case"tax":{const M=await mo.getTaxReport(F);P(M);break}default:break}}catch(F){console.error("Erro ao carregar dados financeiros:",F);const M=F instanceof Error?F.message:"Erro ao carregar dados financeiros";n(M),z("Erro financeiro",M)}finally{e(!1)}},k=async F=>{try{switch(n(null),F){case"summary":c&&(vo.exportFinancialSummary(c),U("Exportao concluda","Resumo financeiro exportado."));break;case"revenue-by-house":m.length>0&&(vo.exportRevenueByHouse(m),U("Exportao concluda","Relatrio de receita por casa exportado."));break;case"cash-flow":p.length>0&&(vo.exportCashFlow(p),U("Exportao concluda","Relatrio de fluxo de caixa exportado."));break;case"contracts":y&&(vo.exportContractsReport(y),U("Exportao concluda","Relatrio de contratos exportado."));break;case"breakdown":c&&(vo.exportFinancialSummary(c),U("Exportao concluda","Resumo financeiro exportado."));break;case"demographic":N.length>0&&(vo.exportDemographicReport(N,a.demographicType),U("Exportao concluda","Relatrio demogrfico exportado."));break;case"comparative":T&&(vo.exportComparativeReport(T),U("Exportao concluda","Relatrio comparativo exportado."));break;case"tax":O.length>0&&(vo.exportTaxReport(O),U("Exportao concluda","Relatrio fiscal exportado."));break;default:break}}catch(M){console.error("Erro ao exportar relatrio:",M);const A=M instanceof Error?M.message:"Erro ao exportar relatrio para Excel";n(A),z("Erro na exportao",A)}},S=()=>{if(t)return s.jsx(yr,{});if(r)return s.jsx("div",{className:"no-data error-state",children:r});switch(a.reportType){case"summary":case"breakdown":return c?s.jsx(YP,{data:c}):s.jsx("div",{className:"no-data",children:"Nenhum dado disponvel"});case"revenue-by-house":return s.jsx(KP,{data:m});case"cash-flow":return s.jsx(XP,{data:p});case"contracts":return y?s.jsx(QP,{data:y}):s.jsx("div",{className:"no-data",children:"Nenhum dado disponvel"});case"demographic":return s.jsx(JP,{data:N,type:a.demographicType});case"comparative":return T?s.jsx(ZP,{data:T}):s.jsx("div",{className:"no-data",children:"Selecione um perodo para visualizar o relatrio comparativo"});case"tax":return s.jsx(eL,{data:O});default:return s.jsx("div",{className:"no-data",children:"Selecione um tipo de relatrio"})}};return s.jsxs("div",{className:"financial-management",children:[s.jsx("div",{className:"financial-header-modern",children:s.jsx("div",{className:"financial-header-content",children:s.jsxs("div",{className:"financial-header-left",children:[s.jsx("div",{className:"financial-header-icon",children:s.jsx(Un,{})}),s.jsxs("div",{className:"financial-header-text",children:[s.jsx("h1",{className:"financial-header-title",children:"Financeiro e Relatrios"}),s.jsx("p",{className:"financial-header-subtitle",children:"Anlise completa de receitas, despesas e relatrios gerenciais"})]})]})})}),s.jsx(WP,{onFilterChange:o,onExport:k}),s.jsx("div",{className:"financial-content",children:S()})]})},YU=()=>{const[t,e]=B.useState([]),[r,n]=B.useState(!0),[a,o]=B.useState("all"),{showSuccess:c,showError:d}=$r(),m=async()=>{try{n(!0);const T=[{id:"1",title:"Novo cliente cadastrado",message:"O cliente Joo Silva foi cadastrado com sucesso no sistema.",type:"success",isRead:!1,createdAt:new Date(Date.now()-1e3*60*30)},{id:"2",title:"Pagamento pendente",message:"O pagamento da casa #123 est pendente h 5 dias.",type:"warning",isRead:!1,createdAt:new Date(Date.now()-1e3*60*60*2)},{id:"3",title:"Venda finalizada",message:"A venda #456 foi finalizada com sucesso.",type:"success",isRead:!0,createdAt:new Date(Date.now()-1e3*60*60*24)},{id:"4",title:"Erro no sistema",message:"Houve um erro ao processar a ltima solicitao.",type:"error",isRead:!1,createdAt:new Date(Date.now()-1e3*60*60*24*2)},{id:"5",title:"Atualizao disponvel",message:"Uma nova verso do sistema est disponvel.",type:"info",isRead:!0,createdAt:new Date(Date.now()-1e3*60*60*24*3)}];e(T)}catch(T){const j=T instanceof Error?T.message:"Erro ao carregar notificaes";d("Erro ao carregar notificaes",j)}finally{n(!1)}};B.useEffect(()=>{m()},[]);const h=T=>{const O=new Date().getTime()-T.getTime(),P=Math.floor(O/6e4),z=Math.floor(O/36e5),Q=Math.floor(O/864e5);return P<60?`h ${P} ${P===1?"minuto":"minutos"}`:z<24?`h ${z} ${z===1?"hora":"horas"}`:`h ${Q} ${Q===1?"dia":"dias"}`},p=async T=>{try{e(j=>j.map(O=>O.id===T?{...O,isRead:!0}:O)),c("Notificao marcada como lida","")}catch{d("Erro ao marcar como lida","Tente novamente")}},v=async()=>{try{e(T=>T.map(j=>({...j,isRead:!0}))),c("Todas as notificaes foram marcadas como lidas","")}catch{d("Erro ao marcar todas como lidas","Tente novamente")}},y=async T=>{try{e(j=>j.filter(O=>O.id!==T)),c("Notificao excluda","")}catch{d("Erro ao excluir notificao","Tente novamente")}},w=t.filter(T=>a==="unread"?!T.isRead:a==="read"?T.isRead:!0),N=T=>{switch(T){case"success":return s.jsx(Dn,{size:20});case"warning":return s.jsx(Ul,{size:20});case"error":return s.jsx(Ul,{size:20});default:return s.jsx(ZF,{size:20})}},E=t.filter(T=>!T.isRead).length;return r?s.jsx("div",{className:"notifications-page",children:s.jsx(yr,{})}):s.jsxs("div",{className:"notifications-page",children:[s.jsxs("div",{className:"notifications-header",children:[s.jsxs("div",{className:"notifications-header__title",children:[s.jsx(Is,{size:24}),s.jsx("h1",{children:"Notificaes"}),E>0&&s.jsx("span",{className:"unread-badge",children:E})]}),s.jsx("div",{className:"notifications-header__actions",children:E>0&&s.jsxs(Ye,{variant:"secondary",onClick:v,children:[s.jsx(Kw,{size:16}),"Marcar todas como lidas"]})})]}),s.jsxs("div",{className:"notifications-filters",children:[s.jsxs("button",{className:`filter-btn ${a==="all"?"active":""}`,onClick:()=>o("all"),children:["Todas (",t.length,")"]}),s.jsxs("button",{className:`filter-btn ${a==="unread"?"active":""}`,onClick:()=>o("unread"),children:["No lidas (",t.filter(T=>!T.isRead).length,")"]}),s.jsxs("button",{className:`filter-btn ${a==="read"?"active":""}`,onClick:()=>o("read"),children:["Lidas (",t.filter(T=>T.isRead).length,")"]})]}),s.jsx("div",{className:"notifications-list",children:w.length===0?s.jsxs("div",{className:"notifications-empty",children:[s.jsx(Is,{size:48}),s.jsx("h3",{children:"Nenhuma notificao"}),s.jsx("p",{children:a==="unread"?"Voc no tem notificaes no lidas":a==="read"?"Voc no tem notificaes lidas":"Voc no tem notificaes"})]}):w.map(T=>s.jsxs("div",{className:`notification-card ${T.type} ${T.isRead?"":"unread"}`,children:[s.jsx("div",{className:"notification-icon",children:N(T.type)}),s.jsxs("div",{className:"notification-content",children:[s.jsx("h3",{children:T.title}),s.jsx("p",{children:T.message}),s.jsx("span",{className:"notification-time",children:h(T.createdAt)})]}),s.jsxs("div",{className:"notification-actions",children:[!T.isRead&&s.jsx("button",{className:"action-btn",onClick:()=>p(T.id),title:"Marcar como lida",children:s.jsx(Kw,{size:18})}),s.jsx("button",{className:"action-btn delete",onClick:()=>y(T.id),title:"Excluir",children:s.jsx(Jl,{size:18})})]})]},T.id))})]})},KU=({nfe:t,onClose:e,onIssueNFe:r})=>{const[n,a]=B.useState(!1),o=v=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(v),c=v=>new Date(v).toLocaleDateString("pt-BR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),d=v=>({pending:"Pendente",processing:"Processando",authorized:"Autorizada",cancelled:"Cancelada",rejected:"Rejeitada",error:"Erro"})[v]||v,m=async()=>{a(!0);try{await r(t.id),setTimeout(e,1500)}finally{a(!1)}},h=()=>{if(t.xmlContent){const v=document.createElement("a");v.setAttribute("href","data:text/xml;charset=utf-8,"+encodeURIComponent(t.xmlContent)),v.setAttribute("download",`${t.code}.xml`),v.style.display="none",document.body.appendChild(v),v.click(),document.body.removeChild(v)}},p=()=>{t.pdfUrl&&window.open(t.pdfUrl,"_blank")};return s.jsx("div",{className:"nfe-modal",onClick:e,children:s.jsxs("div",{className:"nfe-modal-content",onClick:v=>v.stopPropagation(),children:[s.jsxs("div",{className:"nfe-modal-header",children:[s.jsx("h2",{className:"nfe-modal-title",children:"Detalhes da NF-e"}),s.jsx("button",{className:"nfe-modal-close",onClick:e,children:""})]}),s.jsxs("div",{className:"nfe-modal-body",children:[s.jsxs("div",{className:"nfe-form-group",children:[s.jsx("h3",{style:{marginTop:0},children:"Informaes da NF-e"}),s.jsxs("div",{className:"nfe-form-row",children:[s.jsxs("div",{children:[s.jsx("label",{className:"nfe-form-label",children:"Cdigo"}),s.jsx("div",{children:t.code})]}),s.jsxs("div",{children:[s.jsx("label",{className:"nfe-form-label",children:"Status"}),s.jsx("div",{children:s.jsx("span",{className:`nfe-status ${t.status}`,children:d(t.status)})})]})]}),s.jsxs("div",{className:"nfe-form-row",children:[s.jsxs("div",{children:[s.jsx("label",{className:"nfe-form-label",children:"Data de Emisso"}),s.jsx("div",{children:c(t.issueDate)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"nfe-form-label",children:"Nmero NF-e"}),s.jsx("div",{children:t.nfeNumber||""})]})]}),t.nfeKey&&s.jsxs("div",{children:[s.jsx("label",{className:"nfe-form-label",children:"Chave de Acesso"}),s.jsx("div",{style:{fontSize:"0.875rem",wordBreak:"break-all"},children:t.nfeKey})]})]}),s.jsxs("div",{className:"nfe-form-group",children:[s.jsx("h3",{children:"Cliente"}),s.jsxs("div",{className:"nfe-form-row",children:[s.jsxs("div",{children:[s.jsx("label",{className:"nfe-form-label",children:"Nome"}),s.jsx("div",{children:t.clientName})]}),s.jsxs("div",{children:[s.jsx("label",{className:"nfe-form-label",children:"CPF"}),s.jsx("div",{children:t.clientCpf})]})]}),t.clientEmail&&s.jsxs("div",{children:[s.jsx("label",{className:"nfe-form-label",children:"Email"}),s.jsx("div",{children:t.clientEmail})]})]}),s.jsxs("div",{className:"nfe-form-group",children:[s.jsx("h3",{children:"Venda/Contrato"}),s.jsxs("div",{className:"nfe-form-row",children:[s.jsxs("div",{children:[s.jsx("label",{className:"nfe-form-label",children:"Cdigo Venda"}),s.jsx("div",{children:t.saleCode})]}),s.jsxs("div",{children:[s.jsx("label",{className:"nfe-form-label",children:"Casa"}),s.jsx("div",{children:t.houseName})]})]}),s.jsxs("div",{className:"nfe-form-row",children:[s.jsxs("div",{children:[s.jsx("label",{className:"nfe-form-label",children:"Check-in"}),s.jsx("div",{children:new Date(t.checkInDate).toLocaleDateString("pt-BR")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"nfe-form-label",children:"Check-out"}),s.jsx("div",{children:new Date(t.checkOutDate).toLocaleDateString("pt-BR")})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"nfe-form-label",children:"Noites"}),s.jsx("div",{children:t.numberOfNights})]})]}),s.jsxs("div",{className:"nfe-form-group",children:[s.jsx("h3",{children:"Valores"}),s.jsxs("div",{className:"nfe-form-row",children:[s.jsxs("div",{children:[s.jsx("label",{className:"nfe-form-label",children:"Dirias"}),s.jsx("div",{children:o(t.dailyRateValue)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"nfe-form-label",children:"Concierge"}),s.jsx("div",{children:o(t.conciergeValue)})]})]}),s.jsxs("div",{className:"nfe-form-row",children:[s.jsxs("div",{children:[s.jsx("label",{className:"nfe-form-label",children:"Servios Adicionais"}),s.jsx("div",{children:o(t.additionalServicesValue)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"nfe-form-label",children:"Descontos"}),s.jsxs("div",{children:["-",o(t.discountValue)]})]})]}),s.jsxs("div",{className:"nfe-form-row",children:[s.jsxs("div",{children:[s.jsx("label",{className:"nfe-form-label",children:"Subtotal"}),s.jsx("div",{style:{fontSize:"1.1em",fontWeight:"600"},children:o(t.subtotal)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"nfe-form-label",children:"Impostos"}),s.jsx("div",{style:{fontSize:"1.1em",fontWeight:"600"},children:o(t.taxValue)})]})]}),s.jsxs("div",{style:{backgroundColor:"#f0f0f0",padding:"1rem",borderRadius:"0.5rem",marginTop:"1rem"},children:[s.jsx("label",{className:"nfe-form-label",children:"TOTAL"}),s.jsx("div",{style:{fontSize:"1.5em",fontWeight:"700",color:"#007bff"},children:o(t.totalValue)})]})]}),s.jsxs("div",{className:"nfe-form-group",children:[s.jsx("h3",{children:"Empresa Emitente"}),s.jsxs("div",{className:"nfe-form-row",children:[s.jsxs("div",{children:[s.jsx("label",{className:"nfe-form-label",children:"Razo Social"}),s.jsx("div",{children:t.companyName})]}),s.jsxs("div",{children:[s.jsx("label",{className:"nfe-form-label",children:"CNPJ"}),s.jsx("div",{children:t.companyCnpj})]})]})]}),t.emissionError&&s.jsxs("div",{className:"nfe-error-message",children:[s.jsx("strong",{children:"Erro na Emisso:"})," ",t.emissionError,t.failureAttempts>0&&s.jsxs("div",{style:{fontSize:"0.9em",marginTop:"0.5rem"},children:["Tentativas falhas: ",t.failureAttempts]})]})]}),s.jsxs("div",{className:"nfe-modal-footer",children:[t.status==="pending"&&s.jsx("button",{className:"primary",onClick:m,disabled:n,children:n?"Emitindo...":"Emitir NF-e"}),t.status==="authorized"&&s.jsxs(s.Fragment,{children:[t.xmlContent&&s.jsx("button",{className:"primary",onClick:h,children:"Baixar XML"}),t.pdfUrl&&s.jsx("button",{className:"primary",onClick:p,children:"Baixar DANFE (PDF)"})]}),s.jsx("button",{className:"secondary",onClick:e,children:"Fechar"})]})]})})},XU=({nfes:t})=>{const e=B.useMemo(()=>{const n=t.filter(N=>N.status==="authorized").length,a=t.filter(N=>N.status==="pending").length,o=t.filter(N=>N.status==="processing").length,c=t.filter(N=>N.status==="cancelled").length,d=t.filter(N=>N.status==="rejected").length,m=t.filter(N=>N.status==="error").length,h=t.reduce((N,E)=>N+E.totalValue,0),p=t.filter(N=>N.status==="authorized").reduce((N,E)=>N+E.totalValue,0),v=t.reduce((N,E)=>N+E.taxValue,0),y=t.length,w=y>0?n/y*100:0;return{authorized:n,pending:a,processing:o,cancelled:c,rejected:d,error:m,totalValue:h,authorizedValue:p,totalTax:v,total:y,successRate:w}},[t]),r=n=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(n);return s.jsxs("div",{className:"nfe-stats",children:[s.jsxs("div",{className:"nfe-stat-card success",children:[s.jsx("div",{className:"nfe-stat-label",children:"Autorizadas"}),s.jsx("div",{className:"nfe-stat-value",children:e.authorized}),s.jsx("div",{className:"nfe-stat-change",children:r(e.authorizedValue)})]}),s.jsxs("div",{className:"nfe-stat-card warning",children:[s.jsx("div",{className:"nfe-stat-label",children:"Pendentes"}),s.jsx("div",{className:"nfe-stat-value",children:e.pending}),s.jsx("div",{className:"nfe-stat-change",children:e.processing>0&&`${e.processing} processando`})]}),s.jsxs("div",{className:"nfe-stat-card danger",children:[s.jsx("div",{className:"nfe-stat-label",children:"Problemas"}),s.jsx("div",{className:"nfe-stat-value",children:e.error+e.rejected}),s.jsxs("div",{className:"nfe-stat-change",children:[e.error," erros, ",e.rejected," rejeitadas"]})]}),s.jsxs("div",{className:"nfe-stat-card",children:[s.jsx("div",{className:"nfe-stat-label",children:"Taxa de Sucesso"}),s.jsxs("div",{className:"nfe-stat-value",children:[e.successRate.toFixed(1),"%"]}),s.jsxs("div",{className:"nfe-stat-change",children:[e.total," NFe(s) emitida(s)"]})]}),s.jsxs("div",{className:"nfe-stat-card",children:[s.jsx("div",{className:"nfe-stat-label",children:"Valor Total"}),s.jsx("div",{className:"nfe-stat-value",children:r(e.totalValue)}),s.jsxs("div",{className:"nfe-stat-change",children:["Impostos: ",r(e.totalTax)]})]}),s.jsxs("div",{className:"nfe-stat-card",children:[s.jsx("div",{className:"nfe-stat-label",children:"Canceladas"}),s.jsx("div",{className:"nfe-stat-value",children:e.cancelled}),s.jsxs("div",{className:"nfe-stat-change",children:[(e.cancelled/e.total*100).toFixed(1),"% do total"]})]})]})},QU=({nfes:t,onViewDetails:e,onIssueNFe:r,onCancelNFe:n,loading:a})=>{const o=p=>({pending:"Pendente",processing:"Processando",authorized:"Autorizada",cancelled:"Cancelada",rejected:"Rejeitada",error:"Erro"})[p]||p,c=p=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(p),d=p=>new Date(p).toLocaleDateString("pt-BR"),m=p=>{p.pdfUrl?window.open(p.pdfUrl,"_blank"):alert("DANFE ainda no est disponvel para esta NF-e")},h=p=>{if(p.xmlContent){const v=document.createElement("a");v.setAttribute("href","data:text/xml;charset=utf-8,"+encodeURIComponent(p.xmlContent)),v.setAttribute("download",`${p.code}.xml`),v.style.display="none",document.body.appendChild(v),v.click(),document.body.removeChild(v)}else alert("XML ainda no est disponvel para esta NF-e")};return s.jsx("div",{className:"nfe-table",children:s.jsxs("table",{children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Cdigo"}),s.jsx("th",{children:"Cliente"}),s.jsx("th",{children:"Casa"}),s.jsx("th",{children:"Data Emisso"}),s.jsx("th",{children:"Valor Total"}),s.jsx("th",{children:"Status"}),s.jsx("th",{children:"Aes"})]})}),s.jsx("tbody",{children:t.map(p=>s.jsxs("tr",{children:[s.jsxs("td",{children:[s.jsx("strong",{children:p.code}),p.nfeNumber&&s.jsxs("div",{children:["NF-e: ",p.nfeNumber]})]}),s.jsx("td",{children:p.clientName}),s.jsx("td",{children:p.houseName}),s.jsx("td",{children:d(p.issueDate)}),s.jsx("td",{className:"text-right",children:s.jsx("strong",{children:c(p.totalValue)})}),s.jsx("td",{children:s.jsx("span",{className:`nfe-status ${p.status}`,children:o(p.status)})}),s.jsx("td",{children:s.jsxs("div",{className:"nfe-actions-cell",children:[s.jsx("button",{className:"view",onClick:()=>e(p),title:"Ver detalhes",children:"Ver"}),p.status==="pending"&&s.jsx("button",{className:"issue",onClick:()=>r(p.id),disabled:a,title:"Emitir NF-e",children:"Emitir"}),(p.status==="authorized"||p.status==="processing")&&s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"download",onClick:()=>m(p),title:"Baixar DANFE",children:"DANFE"}),s.jsx("button",{className:"download",onClick:()=>h(p),title:"Baixar XML",children:"XML"})]}),p.status!=="cancelled"&&p.status!=="rejected"&&p.status!=="error"&&s.jsx("button",{className:"cancel",onClick:()=>{const v=prompt("Motivo do cancelamento:");v&&n(p.id,v)},disabled:a,title:"Cancelar NF-e",children:"Cancelar"})]})})]},p.id))})]})})},JU=()=>{const[t,e]=B.useState([]),[r,n]=B.useState([]),[a,o]=B.useState(!1),[c,d]=B.useState(!1),[m,h]=B.useState(null),[p,v]=B.useState({}),{showSuccess:y,showError:w}=$r();B.useEffect(()=>{N()},[]),B.useEffect(()=>{E()},[t,p]);const N=async()=>{o(!0);try{const P=await Gm.getNFes();e(P)}catch(P){w("Erro ao Carregar","Erro ao carregar NFes"),console.error(P)}finally{o(!1)}},E=()=>{let P=[...t];if(p.search){const z=p.search.toLowerCase();P=P.filter(Q=>Q.code.toLowerCase().includes(z)||Q.clientName.toLowerCase().includes(z)||Q.houseName.toLowerCase().includes(z))}p.company&&p.company!=="all"&&(P=P.filter(z=>z.company===p.company)),p.status&&(P=P.filter(z=>z.status===p.status)),n(P)},T=async P=>{try{o(!0);const z=await Gm.issueNFe(P);z.success?(y("Sucesso","NF-e emitida com sucesso!"),await N()):w("Erro na Emisso","Erro na emisso: "+z.error)}catch(z){w("Erro ao Emitir","Erro ao emitir NF-e: "+String(z)),console.error(z)}finally{o(!1)}},j=async(P,z)=>{if(window.confirm("Tem certeza que deseja cancelar esta NF-e?"))try{o(!0),await Gm.cancelNFe(P,z),y("Sucesso","NF-e cancelada com sucesso!"),await N()}catch(Q){w("Erro ao Cancelar","Erro ao cancelar NF-e: "+String(Q)),console.error(Q)}finally{o(!1)}},O=P=>{h(P),d(!0)};return s.jsxs("div",{className:"nfe-container",children:[s.jsxs("div",{className:"nfe-header",children:[s.jsx("h1",{className:"nfe-header-title",children:"Gesto de Notas Fiscais (NFe)"}),s.jsx("p",{className:"nfe-header-subtitle",children:"Emita, controle e acompanhe notas fiscais eletrnicas"})]}),!a&&s.jsx(XU,{nfes:t}),s.jsxs("div",{className:"nfe-filters",children:[s.jsx("input",{type:"text",placeholder:"Buscar por cdigo, cliente ou casa...",value:p.search||"",onChange:P=>v({...p,search:P.target.value})}),s.jsxs("select",{value:p.company||"all",onChange:P=>v({...p,company:P.target.value}),children:[s.jsx("option",{value:"all",children:"Todas as Empresas"}),s.jsx("option",{value:"exclusive",children:"Exclusive Imveis"}),s.jsx("option",{value:"giogio",children:"Gio Gio Temporadas"}),s.jsx("option",{value:"direta",children:"Venda Direta"})]}),s.jsxs("select",{value:p.status||"",onChange:P=>v({...p,status:P.target.value||void 0}),children:[s.jsx("option",{value:"",children:"Todos os Status"}),s.jsx("option",{value:"pending",children:"Pendente"}),s.jsx("option",{value:"processing",children:"Processando"}),s.jsx("option",{value:"authorized",children:"Autorizada"}),s.jsx("option",{value:"cancelled",children:"Cancelada"}),s.jsx("option",{value:"rejected",children:"Rejeitada"}),s.jsx("option",{value:"error",children:"Erro"})]})]}),a?s.jsx("div",{className:"nfe-loading",children:"Carregando..."}):r.length===0?s.jsx("div",{className:"nfe-empty",children:"Nenhuma NF-e encontrada. Crie uma nova NF-e atravs do mdulo de Vendas."}):s.jsx(QU,{nfes:r,onViewDetails:O,onIssueNFe:T,onCancelNFe:j,loading:a}),c&&m&&s.jsx(KU,{nfe:m,onClose:()=>{d(!1),h(null)},onIssueNFe:T})]})},ZU=({filters:t,onFiltersChange:e,onClearFilters:r,loading:n=!1})=>{const[a,o]=B.useState([]),[c,d]=B.useState(t);B.useEffect(()=>{(async()=>{try{const E=await os.getAll();o(E.filter(T=>T.status==="available"))}catch(E){console.error("Erro ao carregar casas:",E)}})()},[]),B.useEffect(()=>{d(t)},[t]);const m=(N,E)=>{const T={...c,[N]:E};d(T),e(T)},h=()=>{const N={period:"month",company:"all",houseId:void 0,viewMode:"consolidated",comparisonMode:"previous-month",startDate:void 0,endDate:void 0};d(N),e(N),r()},p=()=>{const N=new Date,E=N.getFullYear(),T=N.getMonth();return[{value:"month",label:"Mensal",description:`Mes atual (${N.toLocaleDateString("pt-BR",{month:"long",year:"numeric"})})`},{value:"quarter",label:"Trimestral",description:`Trimestre atual (Q${Math.floor(T/3)+1}/${E}s)`},{value:"year",label:"Anual",description:`Ano atual (${E})`}]},v=()=>[{value:"all",label:"Todas as empresas",icon:s.jsx(Qw,{})},{value:"exclusive",label:"Exclusive Homes",icon:s.jsx(cj,{})},{value:"giogio",label:"Giogio",icon:s.jsx(jn,{})},{value:"direta",label:"Venda Direta",icon:s.jsx(ms,{})}],y=()=>[{value:"consolidated",label:"Consolidado",description:"Soma geral de todas as casas",icon:s.jsx(Qw,{size:20})},{value:"individual",label:"Individual",description:"Anlise detalhada de uma casa especfica",icon:s.jsx(jn,{size:20})}],w=()=>[{value:"previous-month",label:"Ms Anterior",description:"Comparar com o ms anterior"},{value:"previous-year",label:"Ano Anterior",description:"Comparar com o mesmo perodo do ano anterior"}];return s.jsxs("div",{className:"dashboard-filters",children:[s.jsxs("div",{className:"filters-header",children:[s.jsxs("div",{className:"filters-title",children:[s.jsx(Wh,{size:24}),s.jsx("h3",{children:"Filtros do Dashboard"})]}),s.jsx("div",{className:"filters-actions",children:s.jsxs("button",{className:"btn-clear-filters",onClick:h,disabled:n,title:"Limpar Filtros",children:[s.jsx(Bo,{size:16}),"Limpar Filtros"]})})]}),s.jsxs("div",{className:"filters-grid",children:[s.jsxs("div",{className:"filter-group",children:[s.jsxs("label",{className:"filter-label",children:[s.jsx(pn,{size:16}),"Perodo"]}),s.jsx("select",{value:c.period,onChange:N=>m("period",N.target.value),className:"filter-select",disabled:n,children:p().map(N=>s.jsx("option",{value:N.value,children:N.label},N.value))}),s.jsx("small",{className:"filter-description",children:p().find(N=>N.value===c.period)?.description})]}),s.jsxs("div",{className:"filter-group",children:[s.jsxs("label",{className:"filter-label",children:[s.jsx(KF,{size:16}),"Empresa"]}),s.jsx("select",{value:c.company,onChange:N=>m("company",N.target.value),className:"filter-select",disabled:n,children:v().map(N=>s.jsx("option",{value:N.value,children:N.label},N.value))})]}),c.viewMode==="individual"&&s.jsxs("div",{className:"filter-group",children:[s.jsxs("label",{className:"filter-label",children:[s.jsx(jn,{size:16}),"Casa especfica"]}),s.jsxs("select",{value:c.houseId||"",onChange:N=>m("houseId",N.target.value||void 0),className:"filter-select",disabled:n,children:[s.jsx("option",{value:"",children:"Selecione uma casa"}),a.map(N=>s.jsx("option",{value:N.id,children:N.houseName},N.id))]}),!c.houseId&&s.jsx("small",{className:"filter-warning",children:"Selecione uma casa para visualizar os dados especficos"})]}),s.jsxs("div",{className:"filter-group",children:[s.jsxs("label",{className:"filter-label",children:[s.jsx(ms,{size:18}),"Tipo de visualizao"]}),s.jsx("div",{className:"view-mode-buttons",children:y().map(N=>s.jsxs("button",{className:`view-mode-btn ${c.viewMode===N.value?"active":""}`,onClick:()=>m("viewMode",N.value),disabled:n,title:N.description,children:[N.icon,s.jsx("span",{children:N.label})]},N.value))})]}),s.jsxs("div",{className:"filter-group",children:[s.jsxs("label",{className:"filter-label",children:[s.jsx(Bo,{size:18}),"Comparao"]}),s.jsx("select",{value:c.comparisonMode,onChange:N=>m("comparisonMode",N.target.value),className:"filter-select",disabled:n,children:w().map(N=>s.jsx("option",{value:N.value,children:N.label},N.value))}),s.jsx("small",{className:"filter-description",children:w().find(N=>N.value===c.comparisonMode)?.description})]})]}),s.jsxs("div",{className:"active-filters-summary",children:[s.jsx("h4",{children:"Filtros Ativos:"}),s.jsxs("div",{className:"active-filters-tags",children:[s.jsxs("span",{className:"filter-tag",children:["Perodo:"," ",p().find(N=>N.value===c.period)?.label]}),s.jsxs("span",{className:"filter-tag",children:["Empresa:"," ",v().find(N=>N.value===c.company)?.label]}),s.jsxs("span",{className:"filter-tag",children:["Tipo de visualizao:"," ",y().find(N=>N.value===c.viewMode)?.label]}),c.houseId&&s.jsxs("span",{className:"filter-tag",children:["Casa:"," ",a.find(N=>N.id===c.houseId)?.houseName]}),s.jsxs("span",{className:"filter-tag",children:["Comparao:"," ",w().find(N=>N.value===c.comparisonMode)?.label]})]})]}),n&&s.jsxs("div",{className:"filters-loading",children:[s.jsx("div",{className:"loading-spinner"}),s.jsx("span",{children:"Carregando filtros..."})]})]})},ez=({data:t,loading:e=!1})=>{const r=c=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(c),n=c=>`${c>0?"+":""}${c.toFixed(1)}%`,a=c=>c>0?s.jsx(vr,{size:16,className:"trend-up"}):c<0?s.jsx(Jn,{size:16,className:"trend-down"}):s.jsx(sP,{size:16,className:"trend-neutral"}),o=c=>c>0?"trend-up":c<0?"trend-down":"trend-neutral";return e?s.jsxs("div",{className:"top-indicator",children:[s.jsx("h2",{children:"Indicadores Principais"}),s.jsx("div",{className:"indicators-grid",children:[...Array(5)].map((c,d)=>s.jsx("div",{className:"indicator-card loading",children:s.jsxs("div",{className:"card-skeleton",children:[s.jsx("div",{className:"skeleton-icon"}),s.jsxs("div",{className:"skeleton-content",children:[s.jsx("div",{className:"skeleton-title"}),s.jsx("div",{className:"skeleton-value"}),s.jsx("div",{className:"skeleton-variation"})]})]})},d))})]}):s.jsxs("div",{className:"top-indicator",children:[s.jsx("h2",{children:"Indicadores Principais"}),s.jsx("p",{className:"indicators-subtitle",children:"Mtricas-chave com comparao ao perodo anterior"}),s.jsxs("div",{className:"indicators-grid",children:[s.jsxs("div",{className:"indicator-card contracts-active",children:[s.jsxs("div",{className:"card-header",children:[s.jsx("div",{className:"card-icon",children:s.jsx(Dn,{size:24})}),s.jsxs("div",{className:"card-trend",children:[a(t.activeContracts.variation),s.jsx("span",{className:`trend-value ${o(t.activeContracts.variation)}`,children:n(t.activeContracts.variation)})]})]}),"x",s.jsxs("div",{className:"card-content",children:[s.jsx("h3",{children:"Contratos Ativos"}),s.jsxs("p",{className:"card-value",children:[" ",t.activeContracts.count]}),s.jsx("p",{className:"card-description",children:"Contratos confirmado e pendente no momento"})]})]}),s.jsxs("div",{className:"indicator-card future-reservations",children:[s.jsxs("div",{className:"card-header",children:[s.jsx("div",{className:"card-icon",children:s.jsx(pn,{size:32})}),s.jsx("div",{className:"card-trend",children:s.jsxs("span",{className:"trend-value neutral",children:[t.futureReservations.count," reservas"]})})]}),s.jsxs("div",{className:"card-content",children:[s.jsx("h3",{children:"Reservas Futuras"}),s.jsx("p",{className:"card-value",children:t.futureReservations.count}),s.jsx("p",{className:"card-description",children:"Prximas reservas agendadas"})]}),t.futureReservations.reservations.length>0&&s.jsxs("div",{className:"card-details",children:[s.jsx("h4",{children:"Prximas Reservas:"}),s.jsxs("div",{className:"reservations-list",children:[t.futureReservations.reservations.slice(0,3).map(c=>s.jsxs("div",{className:"reservation-item",children:[s.jsxs("div",{className:"reservation-info",children:[s.jsx("strong",{children:c.clientName}),s.jsx("span",{children:c.houseName})]}),s.jsxs("div",{className:"reservation-dates",children:[s.jsxs("span",{children:[c.checkInDate.toLocaleDateString("pt-BR")," ","-"," ",c.checkOutDate.toLocaleDateString("pt-BR")]}),s.jsx("span",{className:"reservation-value",children:r(c.contractValue)})]})]},c.id)),t.futureReservations.reservations.length>3&&s.jsxs("div",{className:"more-reservations",children:["+",t.futureReservations.reservations.length-3," mais reservas"]})]})]})]}),s.jsxs("div",{className:"indicator-card daily-rates-month",children:[s.jsxs("div",{className:"card-header",children:[s.jsx("div",{className:"card-icon",children:s.jsx(Un,{size:32})}),s.jsxs("div",{className:"card-trend",children:[a(t.totalDailyRates.month.variation),s.jsx("span",{className:`trend-value ${o(t.totalDailyRates.month.variation)}`,children:n(t.totalDailyRates.month.variation)})]})]}),s.jsxs("div",{className:"card-content",children:[s.jsx("h3",{children:"Dirias Fechadas (Ms)"}),s.jsx("p",{className:"card-value",children:r(t.totalDailyRates.month.value)}),s.jsx("p",{className:"card-description",children:"Receita de dirias no ms atual"})]})]}),s.jsxs("div",{className:"indicator-card daily-rates-year",children:[s.jsxs("div",{className:"card-header",children:[s.jsx("div",{className:"card-icon",children:s.jsx(Un,{size:32})}),s.jsxs("div",{className:"card-trend",children:[a(t.totalDailyRates.year.variation),s.jsx("span",{className:`trend-value ${o(t.totalDailyRates.year.variation)}`,children:n(t.totalDailyRates.year.variation)})]})]}),s.jsxs("div",{className:"card-content",children:[s.jsx("h3",{children:"Dirias Fechadas (Ano)"}),s.jsx("p",{className:"card-value",children:r(t.totalDailyRates.year.value)}),s.jsx("p",{className:"card-description",children:"Receita de dirias no ano atual"})]})]}),s.jsxs("div",{className:"indicator-card contracts-month",children:[s.jsxs("div",{className:"card-header",children:[s.jsx("div",{className:"card-icon",children:s.jsx(ps,{size:32})}),s.jsxs("div",{className:"card-trend",children:[a(t.totalContracts.month.variation),s.jsx("span",{className:`trend-value ${o(t.totalContracts.month.variation)}`,children:n(t.totalContracts.month.variation)})]})]}),s.jsxs("div",{className:"card-content",children:[s.jsx("h3",{children:"Contratos Fechados (Ms)"}),s.jsx("p",{className:"card-value",children:t.totalContracts.month.count}),s.jsx("p",{className:"card-description",children:"Contratos concludos no ms atual"})]})]}),s.jsxs("div",{className:"indicator-card contracts-year",children:[s.jsxs("div",{className:"card-header",children:[s.jsx("div",{className:"card-icon",children:s.jsx(ps,{size:32})}),s.jsxs("div",{className:"card-trend",children:[a(t.totalContracts.year.variation),s.jsx("span",{className:`trend-value ${o(t.totalContracts.year.variation)}`,children:n(t.totalContracts.year.variation)})]})]}),s.jsxs("div",{className:"card-content",children:[s.jsx("h3",{children:"Contratos Fechados (Ano)"}),s.jsx("p",{className:"card-value",children:t.totalContracts.year.count}),s.jsx("p",{className:"card-description",children:"Contratos concludos no ano atual"})]})]}),s.jsxs("div",{className:"indicator-card average-ticket",children:[s.jsxs("div",{className:"card-header",children:[s.jsx("div",{className:"card-icon",children:s.jsx(Un,{size:32})}),s.jsx("div",{className:"card-trend",children:s.jsx("span",{className:"trend-value neutral",children:"Ticket mdio"})})]}),s.jsxs("div",{className:"card-content",children:[s.jsx("h3",{children:"Ticket Mdio"}),s.jsx("p",{className:"card-value",children:r(t.averageTicket.total)}),s.jsx("p",{className:"card-description",children:"Valor mdio por contrato"})]}),s.jsx("div",{className:"card-details",children:s.jsxs("div",{className:"ticket-breakdown",children:[s.jsxs("div",{className:"breakdown-item",children:[s.jsx("span",{children:"Por Casa:"}),s.jsx("span",{children:r(t.averageTicket.byHouse)})]}),s.jsxs("div",{className:"breakdown-item",children:[s.jsx("span",{children:"Por Fornecedor:"}),s.jsx("span",{children:r(t.averageTicket.bySupplier)})]}),s.jsxs("div",{className:"breakdown-item",children:[s.jsx("span",{children:"Por Concierge:"}),s.jsx("span",{children:r(t.averageTicket.byConcierge)})]})]})})]})]})]})},tz=({data:t,loading:e=!1})=>{const[r,n]=B.useState("sales"),a=m=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(m),o=m=>`${m.toFixed(1)}%`,c=m=>m>0?s.jsx(vr,{size:16,className:"trend-up"}):m<0?s.jsx(Jn,{size:16,className:"trend-down"}):null,d=m=>m>0?"trend-up":m<0?"trend-down":"trend-neutral";return e?s.jsxs("div",{className:"financial-block",children:[s.jsxs("div",{className:"block-header",children:[s.jsxs("h2",{children:[s.jsx(zs,{size:24,style:{marginRight:"8px",verticalAlign:"middle"}}),"Bloco Financeiro Consolidado"]}),s.jsxs("div",{className:"chart-selector loading",children:[s.jsx("div",{className:"skeleton-button"}),s.jsx("div",{className:"skeleton-button"}),s.jsx("div",{className:"skeleton-button"})]})]}),s.jsx("div",{className:"financial-cards",children:[...Array(6)].map((m,h)=>s.jsx("div",{className:"financial-card loading",children:s.jsxs("div",{className:"card-skeleton",children:[s.jsx("div",{className:"skeleton-icon"}),s.jsxs("div",{className:"skeleton-content",children:[s.jsx("div",{className:"skeleton-title"}),s.jsx("div",{className:"skeleton-value"})]})]})},h))}),s.jsx("div",{className:"chart-container loading",children:s.jsx("div",{className:"skeleton-chart"})})]}):s.jsxs("div",{className:"financial-block",children:[s.jsxs("div",{className:"block-header",children:[s.jsxs("h2",{children:[s.jsx(zs,{size:24,style:{marginRight:"8px",verticalAlign:"middle"}}),"Bloco Financeiro Consolidado"]}),s.jsx("p",{className:"block-subtitle",children:"Anlise completa de receitas, despesas e margem de contribuio"}),s.jsxs("div",{className:"chart-selector",children:[s.jsxs("button",{className:`chart-btn ${r==="sales"?"active":""}`,onClick:()=>n("sales"),children:[s.jsx(sh,{size:16}),"Total de Vendas"]}),s.jsxs("button",{className:`chart-btn ${r==="commissions"?"active":""}`,onClick:()=>n("commissions"),children:[s.jsx(xu,{size:16}),"Comisses"]}),s.jsxs("button",{className:`chart-btn ${r==="margin"?"active":""}`,onClick:()=>n("margin"),children:[s.jsx(jn,{size:16}),"Margem por Casa"]})]})]}),s.jsxs("div",{className:"financial-cards",children:[s.jsxs("div",{className:"financial-card total-sales",children:[s.jsxs("div",{className:"card-header",children:[s.jsx("div",{className:"card-icon",children:s.jsx(Un,{size:24})}),s.jsxs("div",{className:"card-trend",children:[c(t.totalSales.variation),s.jsx("span",{className:`trend-value ${d(t.totalSales.variation)}`,children:o(t.totalSales.variation)})]})]}),s.jsxs("div",{className:"card-content",children:[s.jsx("h3",{children:"Total de Vendas"}),s.jsx("p",{className:"card-value",children:a(t.totalSales.current)}),s.jsx("p",{className:"card-description",children:"Receita total no perodo"})]})]}),s.jsxs("div",{className:"financial-card total-commissions",children:[s.jsxs("div",{className:"card-header",children:[s.jsx("div",{className:"card-icon",children:s.jsx(vr,{size:24})}),s.jsxs("div",{className:"card-trend",children:[c(t.totalCommissions.variation),s.jsx("span",{className:`trend-value ${d(t.totalCommissions.variation)}`,children:o(t.totalCommissions.variation)})]})]}),s.jsxs("div",{className:"card-content",children:[s.jsx("h3",{children:"Total de Comisses"}),s.jsx("p",{className:"card-value",children:a(t.totalCommissions.current)}),s.jsx("p",{className:"card-description",children:"Comisses pagas no perodo"})]})]}),s.jsxs("div",{className:"financial-card supplier-commissions",children:[s.jsx("div",{className:"card-header",children:s.jsx("div",{className:"card-icon",children:s.jsx(ps,{size:24})})}),s.jsxs("div",{className:"card-content",children:[s.jsx("h3",{children:"Comisses Fornecedores"}),s.jsx("p",{className:"card-value",children:a(t.supplierCommissions.current)}),s.jsx("p",{className:"card-description",children:"Comisses pagas a fornecedores"})]})]}),s.jsxs("div",{className:"financial-card total-concierge",children:[s.jsx("div",{className:"card-header",children:s.jsx("div",{className:"card-icon",children:s.jsx(Hr,{size:24})})}),s.jsxs("div",{className:"card-content",children:[s.jsx("h3",{children:"Total Concierge"}),s.jsx("p",{className:"card-value",children:a(t.concierge.current)}),s.jsx("p",{className:"card-description",children:"Receita de servios de concierge"})]})]}),s.jsxs("div",{className:"financial-card housekeeper-payments",children:[s.jsx("div",{className:"card-header",children:s.jsx("div",{className:"card-icon",children:s.jsx(jn,{size:24})})}),s.jsxs("div",{className:"card-content",children:[s.jsx("h3",{children:"Pagamentos Governantas"}),s.jsx("p",{className:"card-value",children:a(t.housekeeperPayments.current)}),s.jsx("p",{className:"card-description",children:"Pagamentos realizados a governantas"})]})]}),s.jsxs("div",{className:"financial-card contribution-margin",children:[s.jsxs("div",{className:"card-header",children:[s.jsx("div",{className:"card-icon",children:s.jsx(sh,{size:24})}),s.jsxs("div",{className:"card-trend",children:[c(t.contributionMargin.total.variation),s.jsx("span",{className:`trend-value ${d(t.contributionMargin.total.variation)}`,children:o(t.contributionMargin.total.variation)})]})]}),s.jsxs("div",{className:"card-content",children:[s.jsx("h3",{children:"Margem de Contribuio"}),s.jsx("p",{className:"card-value",children:a(t.contributionMargin.total.current)}),s.jsx("p",{className:"card-description",children:"Receita - Despesas diretas"})]})]})]}),s.jsxs("div",{className:"chart-container",children:[r==="sales"&&s.jsxs("div",{className:"chart-section",children:[s.jsxs("div",{className:"chart-header",children:[s.jsxs("h3",{children:[s.jsx(sh,{size:20}),"Evoluo de Vendas - Ms a Ms"]}),s.jsx("div",{className:"chart-info",children:s.jsx("span",{children:"Perodo: ltimos 12 meses"})})]}),s.jsx("div",{className:"chart-content",children:s.jsx("div",{className:"simple-chart",children:s.jsx("div",{className:"chart-bars",children:t.totalSales.chartData.map((m,h)=>s.jsxs("div",{className:"chart-bar-container",children:[s.jsxs("div",{className:"chart-bar-wrapper",children:[s.jsx("div",{className:"chart-bar",style:{height:`${m.value/Math.max(...t.totalSales.chartData.map(p=>p.value))*100}%`,backgroundColor:`hsl(${200+h*20}, 70%, 50%)`}}),s.jsx("div",{className:"bar-value",children:a(m.value)})]}),s.jsx("div",{className:"bar-label",children:m.label?new Date(m.label).toLocaleDateString("pt-BR",{month:"short",year:"2-digit"}):""})]},h))})})})]}),r==="commissions"&&s.jsxs("div",{className:"chart-section",children:[s.jsxs("div",{className:"chart-header",children:[s.jsxs("h3",{children:[s.jsx(xu,{size:20}),"Evoluo de Comisses - Ms a Ms"]}),s.jsx("div",{className:"chart-info",children:s.jsx("span",{children:"Perodo: ltimos 12 meses"})})]}),s.jsx("div",{className:"chart-content",children:s.jsx("div",{className:"simple-chart",children:s.jsx("div",{className:"chart-bars",children:t.totalCommissions.chartData.map((m,h)=>s.jsxs("div",{className:"chart-bar-container",children:[s.jsxs("div",{className:"chart-bar-wrapper",children:[s.jsx("div",{className:"chart-bar",style:{height:`${m.value/Math.max(...t.totalCommissions.chartData.map(p=>p.value))*100}%`,backgroundColor:`hsl(${120+h*15}, 70%, 50%)`}}),s.jsx("div",{className:"bar-value",children:a(m.value)})]}),s.jsx("div",{className:"bar-label",children:m.label?new Date(m.label).toLocaleDateString("pt-BR",{month:"short",year:"2-digit"}):""})]},h))})})})]}),r==="margin"&&s.jsxs("div",{className:"chart-section",children:[s.jsxs("div",{className:"chart-header",children:[s.jsxs("h3",{children:[s.jsx(jn,{size:20}),"Margem de Contribuio por Casa"]}),s.jsx("div",{className:"chart-info",children:s.jsx("span",{children:"Comparativo entre casas"})})]}),s.jsx("div",{className:"chart-content",children:s.jsx("div",{className:"margin-chart",children:t.contributionMargin.byHouse.map((m,h)=>s.jsxs("div",{className:"margin-house",children:[s.jsxs("div",{className:"house-header",children:[s.jsx("h4",{children:m.houseName}),s.jsx("span",{className:"house-value",children:a(m.margin)})]}),s.jsx("div",{className:"house-bar",children:s.jsx("div",{className:"house-progress",style:{width:`${m.margin/Math.max(...t.contributionMargin.byHouse.map(p=>p.margin))*100}%`,backgroundColor:`hsl(${280+h*40}, 70%, 50%)`}})}),s.jsxs("div",{className:"house-details",children:[s.jsxs("div",{className:"detail-item",children:[s.jsx("span",{children:"Receita:"}),s.jsx("span",{children:a(m.totalRevenue)})]}),s.jsxs("div",{className:"detail-item",children:[s.jsx("span",{children:"Despesas:"}),s.jsx("span",{children:a(m.totalCosts)})]}),s.jsxs("div",{className:"detail-item",children:[s.jsx("span",{children:"Margem:"}),s.jsx("span",{className:"margin-percentage",children:o(m.marginPercentage)})]})]})]},h))})})]})]})]})},rz=({data:t,loading:e=!1})=>{const[r,n]=B.useState("media"),a=h=>`${h.toFixed(1)}%`,o=h=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(h),c=h=>{switch(h){case"instagram":return s.jsx(eP,{size:20});case"facebook":return s.jsx(XF,{size:20});case"google":return s.jsx(m0,{size:20});case"indicacao":return s.jsx(ux,{size:20});case"whatsapp":return s.jsx(ux,{size:20});case"site":return s.jsx(m0,{size:20});case"outros":return s.jsx(gn,{size:20});default:return s.jsx(gn,{size:20})}},d=h=>{switch(h){case"instagram":return"linear-gradient(135deg, #833ab4, #fd1d1d, #fcb045)";case"facebook":return"linear-gradient(135deg, #1877f2, #42a5f5)";case"google":return"linear-gradient(135deg, #3b82f6, #1d4ed8)";case"indicacao":return"linear-gradient(135deg, #10b981, #059669)";case"whatsapp":return"linear-gradient(135deg, #25d366, #128c7e)";case"site":return"linear-gradient(135deg, #8b5cf6, #7c3aed)";case"outros":return"linear-gradient(135deg, #f59e0b, #d97706)";default:return"linear-gradient(135deg, #6b7280, #4b5563)"}},m=h=>h==="male"?s.jsx(Io,{size:20}):s.jsx(uP,{size:20});return e?s.jsxs("div",{className:"commercial-intelligence",children:[s.jsxs("div",{className:"block-header",children:[s.jsxs("h2",{children:[s.jsx(tN,{size:24,style:{marginRight:"8px",verticalAlign:"middle"}}),"Bloco de Inteligncia Comercial"]}),s.jsxs("div",{className:"view-selector loading",children:[s.jsx("div",{className:"skeleton-button"}),s.jsx("div",{className:"skeleton-button"}),s.jsx("div",{className:"skeleton-button"})]})]}),s.jsxs("div",{className:"intelligence-content",children:[s.jsx("div",{className:"intelligence-cards loading",children:[...Array(3)].map((h,p)=>s.jsx("div",{className:"intelligence-card loading",children:s.jsxs("div",{className:"card-skeleton",children:[s.jsx("div",{className:"skeleton-icon"}),s.jsxs("div",{className:"skeleton-content",children:[s.jsx("div",{className:"skeleton-title"}),s.jsx("div",{className:"skeleton-value"})]})]})},p))}),s.jsx("div",{className:"chart-container loading",children:s.jsx("div",{className:"skeleton-chart"})})]})]}):s.jsxs("div",{className:"commercial-intelligence",children:[s.jsxs("div",{className:"block-header",children:[s.jsxs("h2",{children:[s.jsx(tN,{size:24,style:{marginRight:"8px",verticalAlign:"middle"}}),"Bloco de Inteligncia Comercial"]}),s.jsx("p",{className:"block-subtitle",children:"Anlise de vendas por origem, perfil demogrfico e ocupao"}),s.jsxs("div",{className:"view-selector",children:[s.jsxs("button",{className:`view-btn ${r==="media"?"active":""}`,onClick:()=>n("media"),children:[s.jsx(xu,{size:16}),"Vendas por Mdia"]}),s.jsxs("button",{className:`view-btn ${r==="gender"?"active":""}`,onClick:()=>n("gender"),children:[s.jsx(Hr,{size:16}),"Vendas por Gnero"]}),s.jsxs("button",{className:`view-btn ${r==="occupancy"?"active":""}`,onClick:()=>n("occupancy"),children:[s.jsx(vr,{size:16}),"Taxa de Ocupao"]})]})]}),s.jsxs("div",{className:"intelligence-content",children:[s.jsxs("div",{className:"intelligence-cards",children:[s.jsxs("div",{className:"intelligence-card media-card",children:[s.jsxs("div",{className:"card-header",children:[s.jsx("div",{className:"card-icon",children:s.jsx(gn,{size:24})}),s.jsxs("div",{className:"card-info",children:[s.jsx("h3",{children:"Vendas por Mdia"}),s.jsx("p",{className:"card-subtitle",children:"Origem das vendas"})]})]}),s.jsx("div",{className:"card-content",children:s.jsx("div",{className:"top-media",children:t.salesByMedia.slice(0,2).map((h,p)=>s.jsxs("div",{className:"media-item",children:[s.jsxs("div",{className:"media-info",children:[s.jsx("div",{className:"media-icon",style:{background:d(h.source)},children:c(h.source)}),s.jsxs("div",{className:"media-details",children:[s.jsx("span",{className:"media-name",children:h.sourceLabel}),s.jsx("span",{className:"media-percentage",children:a(h.percentage)})]})]}),s.jsx("div",{className:"media-bar",children:s.jsx("div",{className:"media-progress",style:{width:`${h.percentage}%`,background:d(h.source)}})})]},p))})})]}),s.jsxs("div",{className:"intelligence-card gender-card",children:[s.jsxs("div",{className:"card-header",children:[s.jsx("div",{className:"card-icon",children:s.jsx(Hr,{size:24})}),s.jsxs("div",{className:"card-info",children:[s.jsx("h3",{children:"Vendas por Gnero"}),s.jsx("p",{className:"card-subtitle",children:"Perfil demogrfico"})]})]}),s.jsx("div",{className:"card-content",children:s.jsx("div",{className:"gender-stats",children:t.salesByGender.map((h,p)=>s.jsxs("div",{className:"gender-item",children:[s.jsx("div",{className:"gender-icon",children:m(h.gender)}),s.jsxs("div",{className:"gender-details",children:[s.jsx("span",{className:"gender-name",children:h.gender==="male"?"Masculino":"Feminino"}),s.jsx("span",{className:"gender-percentage",children:a(h.percentage)})]}),s.jsx("div",{className:"gender-value",children:o(h.revenue)})]},p))})})]}),s.jsxs("div",{className:"intelligence-card occupancy-card",children:[s.jsxs("div",{className:"card-header",children:[s.jsx("div",{className:"card-icon",children:s.jsx(vr,{size:24})}),s.jsxs("div",{className:"card-info",children:[s.jsx("h3",{children:"Taxa de Ocupao"}),s.jsx("p",{className:"card-subtitle",children:"Eficincia operacional"})]})]}),s.jsx("div",{className:"card-content",children:s.jsxs("div",{className:"occupancy-stats",children:[s.jsxs("div",{className:"occupancy-average",children:[s.jsx("span",{className:"average-label",children:"Mdia Geral:"}),s.jsx("span",{className:"average-value",children:a(t.occupancyRate.reduce((h,p)=>h+p.rate,0)/t.occupancyRate.length)})]}),s.jsxs("div",{className:"occupancy-trend",children:[s.jsx("span",{className:"trend-label",children:"Tendncia:"}),s.jsxs("span",{className:"trend-value positive",children:[s.jsx(g1,{size:14}),"+5.2%"]})]})]})})]})]}),s.jsxs("div",{className:"chart-container",children:[r==="media"&&s.jsxs("div",{className:"chart-section",children:[s.jsxs("div",{className:"chart-header",children:[s.jsxs("h3",{children:[s.jsx(xu,{size:20}),"Distribuio de Vendas por Mdia"]}),s.jsx("div",{className:"chart-info",children:s.jsx("span",{children:"Baseado no total de vendas do perodo"})})]}),s.jsx("div",{className:"chart-content",children:s.jsxs("div",{className:"media-chart",children:[s.jsx("div",{className:"chart-legend",children:t.salesByMedia.map((h,p)=>s.jsxs("div",{className:"legend-item",children:[s.jsx("div",{className:"legend-color",style:{background:d(h.source)}}),s.jsxs("div",{className:"legend-info",children:[s.jsx("span",{className:"legend-name",children:h.sourceLabel}),s.jsxs("span",{className:"legend-stats",children:[a(h.percentage)," "," ",o(h.revenue)]})]})]},p))}),s.jsx("div",{className:"chart-visual",children:s.jsx("div",{className:"pie-chart",children:t.salesByMedia.map((h,p)=>{const v=t.salesByMedia.slice(0,p).reduce((w,N)=>w+N.percentage*3.6,0),y=v+h.percentage*3.6;return s.jsx("div",{className:"pie-segment",style:{background:`conic-gradient(${d(h.source)} ${v}deg ${y}deg)`}},p)})})})]})})]}),r==="gender"&&s.jsxs("div",{className:"chart-section",children:[s.jsxs("div",{className:"chart-header",children:[s.jsxs("h3",{children:[s.jsx(sh,{size:20}),"Vendas por Gnero - Comparativo"]}),s.jsx("div",{className:"chart-info",children:s.jsx("span",{children:"Anlise demogrfica dos clientes"})})]}),s.jsx("div",{className:"chart-content",children:s.jsx("div",{className:"gender-chart",children:s.jsx("div",{className:"gender-bars",children:t.salesByGender.map((h,p)=>s.jsxs("div",{className:"gender-bar-container",children:[s.jsxs("div",{className:"gender-bar-wrapper",children:[s.jsx("div",{className:"gender-bar",style:{height:`${h.percentage}%`,background:h.gender==="male"?"linear-gradient(135deg, #3b82f6, #1d4ed8)":"linear-gradient(135deg, #ec4899, #be185d)"}}),s.jsx("div",{className:"bar-value",children:a(h.percentage)})]}),s.jsx("div",{className:"bar-label",children:h.gender==="male"?"Masculino":"Feminino"}),s.jsx("div",{className:"bar-total",children:o(h.revenue)})]},p))})})})]}),r==="occupancy"&&s.jsxs("div",{className:"chart-section",children:[s.jsxs("div",{className:"chart-header",children:[s.jsxs("h3",{children:[s.jsx(pn,{size:20}),"Taxa de Ocupao por Ms"]}),s.jsx("div",{className:"chart-info",children:s.jsx("span",{children:"Eficincia de ocupao das casas"})})]}),s.jsx("div",{className:"chart-content",children:s.jsx("div",{className:"occupancy-chart",children:s.jsx("div",{className:"occupancy-bars",children:t.occupancyRate.map((h,p)=>s.jsxs("div",{className:"occupancy-bar-container",children:[s.jsxs("div",{className:"occupancy-bar-wrapper",children:[s.jsx("div",{className:"occupancy-bar",style:{height:`${h.rate}%`,background:h.rate>=80?"linear-gradient(135deg, #10b981, #059669)":h.rate>=60?"linear-gradient(135deg, #f59e0b, #d97706)":"linear-gradient(135deg, #ef4444, #dc2626)"}}),s.jsx("div",{className:"bar-value",children:a(h.rate)})]}),s.jsx("div",{className:"bar-label",children:h.month}),s.jsxs("div",{className:"bar-details",children:[s.jsxs("span",{children:[h.occupiedDays," dias ocupados"]}),s.jsxs("span",{children:[h.totalDays," dias totais"]})]})]},p))})})})]})]})]})]})},nz=(t,e)=>e===0?t>0?100:0:(t-e)/e*100,az=(t,e)=>{const r=e.getTime()-t.getTime(),n=new Date(t.getTime()-1);return{start:new Date(n.getTime()-r),end:n}},sz=(t,e)=>{const r=new Map;return t.forEach(n=>{let a;const o=n.checkInDate;switch(e){case"day":a=o.toISOString().split("T")[0];break;case"month":a=`${o.getFullYear()}-${String(o.getMonth()+1).padStart(2,"0")}`;break;case"quarter":{const c=Math.floor(o.getMonth()/3)+1;a=`${o.getFullYear()}-Q${c}`;break}case"year":a=o.getFullYear().toString();break;default:a=o.toISOString().split("T")[0]}r.has(a)||r.set(a,[]),r.get(a).push(n)}),r},kv={async getTopIndicators(t){try{const e=await zr.getAll();let r=this.filterSalesByPeriod(e,t);t.company!=="all"&&(r=r.filter(z=>z.company===t.company)),t.houseId&&(r=r.filter(z=>z.houseId===t.houseId));const n=t.startDate?new Date(t.startDate):new Date,a=t.endDate?new Date(t.endDate):new Date,o=az(n,a),c=this.filterSalesByPeriod(e,{...t,startDate:o.start.toISOString(),endDate:o.end.toISOString()}),d=r.filter(z=>z.status==="confirmed"||z.status==="pending").length,m=c.filter(z=>z.status==="confirmed"||z.status==="pending").length,h=r.filter(z=>z.checkInDate>new Date&&z.status!=="cancelled").map(z=>({id:z.id,clientName:z.clientName,houseName:z.houseName,checkInDate:z.checkInDate,checkOutDate:z.checkOutDate,numberOfNights:z.numberOfNights,contractValue:z.contractValue})).sort((z,Q)=>z.checkInDate.getTime()-Q.checkInDate.getTime()),p=new Date().getMonth(),v=new Date().getFullYear(),y=r.filter(z=>z.checkInDate.getMonth()===p&&z.checkInDate.getFullYear()===v),w=r.filter(z=>z.checkInDate.getFullYear()===v),N=y.reduce((z,Q)=>z+Q.netValue,0),E=w.reduce((z,Q)=>z+Q.netValue,0),T=y.filter(z=>z.status==="completed").length,j=w.filter(z=>z.status==="completed").length,O=r.reduce((z,Q)=>z+Q.totalRevenue,0),P=r.length>0?O/r.length:0;return{activeContracts:{count:d,variation:nz(d,m)},futureReservations:{count:h.length,reservations:h.slice(0,10)},totalDailyRates:{month:{value:N,variation:0},year:{value:E,variation:0}},totalContracts:{month:{count:T,variation:0},year:{count:j,variation:0}},averageTicket:{byHouse:P,bySupplier:0,byConcierge:0,total:P}}}catch(e){throw console.error("Erro ao buscar indicadores de topo:",e),new Error("Falha ao carregar indicadores de topo")}},async getFinancialData(t){try{const e=await zr.getAll();let r=this.filterSalesByPeriod(e,t);t.company!=="all"&&(r=r.filter(v=>v.company===t.company)),t.houseId&&(r=r.filter(v=>v.houseId===t.houseId));const n=r.reduce((v,y)=>v+y.totalRevenue,0),a=r.reduce((v,y)=>v+y.salesCommission+y.totalAdditionalSales,0),o=r.reduce((v,y)=>v+y.totalAdditionalSales,0),c=r.reduce((v,y)=>v+y.conciergeValue,0),d=r.reduce((v,y)=>v+y.housekeeperValue,0),m=await this.calculateContributionMarginByHouse(r),h=this.generateChartData(r,"totalRevenue"),p=this.generateChartData(r,"salesCommission");return{totalSales:{current:n,previous:0,variation:0,chartData:h},totalCommissions:{current:a,previous:0,variation:0,chartData:p},supplierCommissions:{current:o,previous:0,variation:0},concierge:{current:c,previous:0,variation:0},housekeeperPayments:{current:d,previous:0,variation:0},contributionMargin:{byHouse:m,total:{current:m.reduce((v,y)=>v+y.margin,0),previous:0,variation:0}}}}catch(e){throw console.error("Erro ao buscar dados financeiros:",e),new Error("Falha ao carregar dados financeiros")}},async getCommercialIntelligence(t){try{const e=await zr.getAll();let r=this.filterSalesByPeriod(e,t);t.company!=="all"&&(r=r.filter(c=>c.company===t.company)),t.houseId&&(r=r.filter(c=>c.houseId===t.houseId));const n=this.analyzeSalesByMedia(r),a=this.analyzeSalesByGender(r),o=await this.calculateOccupancyRate();return{salesByMedia:n,salesByGender:a,occupancyRate:o}}catch(e){throw console.error("Erro ao buscar inteligncia comercial:",e),new Error("Falha ao carregar inteligncia comercial")}},filterSalesByPeriod(t,e){return!e.startDate&&!e.endDate?t:t.filter(r=>{const n=r.checkInDate,a=e.startDate?new Date(e.startDate):null,o=e.endDate?new Date(e.endDate):null;return!(a&&n<a||o&&n>o)})},async calculateContributionMarginByHouse(t){const e=new Map;t.forEach(n=>{e.has(n.houseId)||e.set(n.houseId,[]),e.get(n.houseId).push(n)});const r=[];for(const[n,a]of e){const o=a.reduce((h,p)=>h+p.totalRevenue,0),c=a.reduce((h,p)=>h+p.salesCommission+p.housekeeperValue+p.totalAdditionalSales,0),d=o-c,m=o>0?d/o*100:0;r.push({houseId:n,houseName:a[0].houseName,totalRevenue:o,totalCosts:c,margin:d,marginPercentage:m})}return r.sort((n,a)=>a.margin-n.margin)},generateChartData(t,e){const r=sz(t,"month"),n=[];return r.forEach((a,o)=>{const c=a.reduce((d,m)=>{const h=m[e];return d+(h||0)},0);n.push({period:o,value:c,label:this.formatPeriodLabel(o,"month")})}),n.sort((a,o)=>a.period.localeCompare(o.period))},analyzeSalesByMedia(t){const e=new Map,r=t.length;t.forEach(o=>{const c=o.saleOrigin;e.has(c)||e.set(c,{count:0,revenue:0});const d=e.get(c);d.count++,d.revenue+=o.totalRevenue});const n=[],a={instagram:"Instagram",facebook:"Facebook",google:"Google",indicacao:"Indicao",whatsapp:"WhatsApp",site:"Site",outros:"Outros"};return e.forEach((o,c)=>{n.push({source:c,sourceLabel:a[c]||c,count:o.count,percentage:r>0?o.count/r*100:0,revenue:o.revenue})}),n.sort((o,c)=>c.count-o.count)},analyzeSalesByGender(t){const e=new Map,r=t.length;t.forEach(o=>{const c=o.clientGender||"not_informed";e.has(c)||e.set(c,{count:0,revenue:0});const d=e.get(c);d.count++,d.revenue+=o.totalRevenue});const n=[],a={male:"Masculino",female:"Feminino",other:"Outro",not_informed:"No informado"};return e.forEach((o,c)=>{n.push({gender:c,genderLabel:a[c]||c,count:o.count,percentage:r>0?o.count/r*100:0,revenue:o.revenue})}),n.sort((o,c)=>c.count-o.count)},async calculateOccupancyRate(){return["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"].map((e,r)=>({month:e,monthNumber:r+1,year:new Date().getFullYear(),totalDays:30,occupiedDays:Math.floor(Math.random()*30),rate:Math.floor(Math.random()*100),revenue:Math.floor(Math.random()*5e4)}))},formatPeriodLabel(t,e){if(e==="month"){const[r,n]=t.split("-");return`${["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"][parseInt(n)-1]}/${r}`}return t},async getQuickStats(t){const e=await zr.getAll(),r=this.filterSalesByPeriod(e,t),n=r.reduce((p,v)=>p+v.totalRevenue,0),a=r.length,o=a>0?n/a:0,c=new Map;r.forEach(p=>{const v=c.get(p.houseId)||0;c.set(p.houseId,v+p.totalRevenue)});const d=Array.from(c.entries()).sort((p,v)=>v[1]-p[1])[0],m=new Map;r.forEach(p=>{const v=m.get(p.saleOrigin)||0;m.set(p.saleOrigin,v+1)});const h=Array.from(m.entries()).sort((p,v)=>v[1]-p[1])[0];return{totalRevenue:n,totalContracts:a,averageTicket:o,occupancyRate:0,topPerformingHouse:d?d[0]:"",topMediaSource:h?h[0]:""}}},iz=()=>{const{user:t}=Ql(),[e,r]=B.useState(!0),[n,a]=B.useState({period:"month",company:"all",houseId:void 0,viewMode:"consolidated",comparisonMode:"previous-month",startDate:void 0,endDate:void 0}),[o,c]=B.useState(null),[d,m]=B.useState(null),[h,p]=B.useState(null),v=async()=>{try{r(!0);const[T,j,O]=await Promise.all([kv.getTopIndicators(n),kv.getFinancialData(n),kv.getCommercialIntelligence(n)]);c(T),m(j),p(O)}catch(T){console.error("Erro ao carregar dados do dashboard:",T)}finally{r(!1)}};B.useEffect(()=>{v()},[n]);const y=T=>{a(T)},w=T=>{a(T)},N=async T=>{try{console.log(`Exportando dados em formato ${T}`,{filters:n,topIndicators:o,financialData:d,commercialData:h})}catch(j){console.error("Erro ao exportar dados:",j)}},E=()=>{v()};return s.jsxs("div",{className:"dashboard-management",children:[s.jsx("div",{className:"consolidation-dashboard-header",children:s.jsxs("div",{className:"consolidation-dashboard-header-content",children:[s.jsxs("div",{className:"consolidation-dashboard-header-left",children:[s.jsx("div",{className:"consolidation-dashboard-header-icon",children:s.jsx(zs,{})}),s.jsxs("div",{className:"consolidation-dashboard-header-text",children:[s.jsx("h1",{className:"consolidation-dashboard-header-title",children:"Dashboard Consolidado"}),s.jsx("p",{className:"consolidation-dashboard-header-subtitle",children:"Viso geral completa do negcio com anlises em tempo real"})]})]}),s.jsxs("div",{className:"consolidation-dashboard-header-actions",children:[s.jsxs("div",{className:"consolidation-dashboard-header-badge",children:[s.jsx(pn,{className:"consolidation-dashboard-header-badge-icon"}),s.jsxs("span",{children:["Viso ",n.viewMode==="consolidated"?"Consolidada":"Individual"]})]}),s.jsxs("button",{className:"action-btn refresh-btn",onClick:E,disabled:e,children:[s.jsx(Bo,{size:16,className:e?"spinning":""}),"Atualizar"]}),s.jsxs("div",{className:"export-dropdown",children:[s.jsxs("button",{className:"action-btn export-btn",children:[s.jsx(v1,{size:16}),"Exportar"]}),s.jsxs("div",{className:"dropdown-menu",children:[s.jsx("button",{onClick:()=>N("excel"),children:"Exportar para Excel"}),s.jsx("button",{onClick:()=>N("pdf"),children:"Exportar para PDF"})]})]}),s.jsxs("button",{className:"action-btn settings-btn",children:[s.jsx(No,{size:16}),"Configuraes"]})]})]})}),s.jsx("div",{className:"dashboard-filters",children:s.jsx(ZU,{filters:n,onFiltersChange:y,onClearFilters:()=>w({period:"month",company:"all",houseId:void 0,viewMode:"consolidated",comparisonMode:"previous-month",startDate:void 0,endDate:void 0}),loading:e})}),s.jsx("div",{className:"dashboard-content",children:e?s.jsxs("div",{className:"dashboard-loading",children:[s.jsx("div",{className:"loading-spinner"}),s.jsx("p",{children:"Carregando dados do dashboard..."})]}):s.jsxs(s.Fragment,{children:[o&&s.jsx("div",{className:"dashboard-section",children:s.jsx(ez,{data:o,loading:!1})}),d&&s.jsx("div",{className:"dashboard-section",children:s.jsx(tz,{data:d,loading:!1})}),h&&s.jsx("div",{className:"dashboard-section",children:s.jsx(rz,{data:h,loading:!1})})]})}),s.jsx("div",{className:"dashboard-footer",children:s.jsxs("div",{className:"footer-content",children:[s.jsxs("div",{className:"footer-info",children:[s.jsxs("span",{className:"last-update",children:["ltima atualizao: ",new Date().toLocaleString("pt-BR")]}),s.jsxs("span",{className:"user-info",children:["Logado como: ",t?.email||"Usurio"]})]}),s.jsxs("div",{className:"footer-stats",children:[s.jsxs("span",{className:"stat-item",children:[s.jsx("strong",{children:"Perodo:"})," ",n.period==="month"?"Mensal":n.period==="year"?"Anual":"Trimestral"]}),s.jsxs("span",{className:"stat-item",children:[s.jsx("strong",{children:"Empresa:"})," ",n.company==="all"?"Todas":n.company]}),s.jsxs("span",{className:"stat-item",children:[s.jsx("strong",{children:"Visualizao:"})," ",n.viewMode==="consolidated"?"Consolidada":"Individual"]})]})]})})]})},oz=({filters:t,onFiltersChange:e,onClearFilters:r,loading:n=!1})=>{const[a,o]=B.useState([]),[c,d]=B.useState(!0),m=[{value:"pending",label:"Pendente",icon:s.jsx($h,{size:16})},{value:"in_progress",label:"Em Andamento",icon:s.jsx(dj,{size:16})},{value:"completed",label:"Completo",icon:s.jsx(Dn,{size:16})},{value:"cancelled",label:"Cancelado",icon:s.jsx(y1,{size:16})}],h=[{value:"low",label:"Baixa",color:"#10b981",icon:s.jsx(No,{size:14})},{value:"medium",label:"Mdia",color:"#f59e0b",icon:s.jsx(No,{size:14})},{value:"high",label:"Alta",color:"#ef4444",icon:s.jsx(No,{size:14})},{value:"urgent",label:"Urgente",color:"#dc2626",icon:s.jsx(No,{size:14})}],p=[{value:"menu_sent",label:"Cardpio Enviado"},{value:"menu_received",label:"Cardpio Recebido"},{value:"shopping_list",label:"Lista de Compras"},{value:"client_approval",label:"Aprovao do Cliente"},{value:"supplier_sent",label:"Enviado para Fornecedores"},{value:"payment_sent",label:"Notas para Pagamento"},{value:"invoices_received",label:"Notas Recebidas"},{value:"receipts_sent",label:"Comprovante Enviado"}];B.useEffect(()=>{(async()=>{try{d(!0);const P=(await os.getAll()).filter(z=>z.status==="available"||z.status==="occupied");o(P)}catch(O){console.error("Erro ao carregar casas:",O)}finally{d(!1)}})()},[]);const v=(j,O)=>{e({...t,[j]:O})},y=(j,O)=>{e({...t,dateRange:{...t.dateRange,[j]:O}})},w=()=>{r()},N=j=>j.toISOString().split("T")[0],E=j=>new Date(j+"T00:00:00"),T=()=>t.houseId||t.status||t.priority||t.step||t.showOnlyActive||t.showOnlyOverdue;return s.jsxs("div",{className:"process-filter",children:[s.jsxs("div",{className:"filter-header",children:[s.jsxs("div",{className:"filter-title",children:[s.jsx(Wh,{size:20}),s.jsx("h3",{children:"Filtros"})]}),T()&&s.jsxs("button",{className:"clear-filters-btn",onClick:w,disabled:n,title:"Limpar todos os filtros",children:[s.jsx(Rs,{size:16}),"Limpar"]})]}),s.jsxs("div",{className:"filter-content",children:[s.jsxs("div",{className:"filter-group",children:[s.jsxs("label",{className:"filter-label",children:[s.jsx(pn,{size:16}),"Perodo"]}),s.jsxs("div",{className:"date-inputs",children:[s.jsxs("div",{className:"date-input",children:[s.jsx("label",{children:"Data Inicio"}),s.jsx("input",{type:"date",value:N(t.dateRange.start),onChange:j=>y("start",E(j.target.value)),disabled:n})]}),s.jsxs("div",{className:"date-input",children:[s.jsx("label",{children:"Data Fim"}),s.jsx("input",{type:"date",value:N(t.dateRange.end),onChange:j=>y("end",E(j.target.value)),disabled:n})]})]})]}),s.jsxs("div",{className:"filter-group",children:[s.jsxs("label",{className:"filter-label",children:[s.jsx(jn,{size:16}),"Casa"]}),s.jsxs("select",{value:t.houseId||"",onChange:j=>e({...t,houseId:j.target.value}),disabled:n,className:"filter-select",children:[s.jsx("option",{value:"",children:"Todas as Casas"}),a.map(j=>s.jsx("option",{value:j.id,children:j.houseName},j.id))]}),c&&s.jsxs("div",{className:"loading-indicator",children:[s.jsx(Bo,{className:"spinning",size:16}),"Carregando casas..."]})]}),s.jsxs("div",{className:"filter-group",children:[s.jsx("label",{className:"filter-label",children:"Status"}),s.jsx("div",{className:"filter-options",children:m.map(j=>s.jsxs("button",{className:`filter-option ${t.status===j.value?"active":""}`,disabled:n,onClick:()=>v("status",t.status===j.value?void 0:j.value),title:j.label,children:[s.jsx("span",{className:"option-icon",children:j.icon}),s.jsx("span",{className:"option-label",children:j.label})]},j.value))})]}),s.jsxs("div",{className:"filter-group",children:[s.jsx("label",{className:"filter-label",children:"Prioridade"}),s.jsx("div",{className:"filter-options",children:h.map(j=>s.jsxs("button",{className:`filter-option priority-${t.priority===j.value?"active":""}`,disabled:n,onClick:()=>v("priority",t.priority===j.value?void 0:j.value),title:j.label,children:[s.jsx("span",{className:"option-icon",style:{color:j.color},children:j.icon}),s.jsx("span",{className:"option-label",children:j.label})]},j.value))})]}),s.jsxs("div",{className:"filter-group",children:[s.jsx("label",{className:"filter-label",children:"Etapa"}),s.jsxs("select",{value:t.step||"",disabled:n,className:"filter-select",onChange:j=>v("step",j.target.value||void 0),children:[s.jsx("option",{value:"",children:"Todas as Etapas"}),p.map(j=>s.jsx("option",{value:j.value,children:j.label},j.value))]})]}),s.jsxs("div",{className:"filter-group",children:[s.jsx("label",{className:"filter-label",children:"Opes"}),s.jsxs("div",{className:"filter-checkboxes",children:[s.jsxs("label",{className:"checkbox-option",children:[s.jsx("input",{type:"checkbox",checked:t.showOnlyActive,onChange:j=>v("showOnlyActive",j.target.checked),disabled:n}),s.jsx("span",{className:"checkbox-label",children:"Mostrar apenas processos ativos"})]}),s.jsxs("label",{className:"checkbox-option",children:[s.jsx("input",{type:"checkbox",checked:t.showOnlyOverdue,onChange:j=>v("showOnlyOverdue",j.target.checked),disabled:n}),s.jsx("span",{className:"checkbox-label",children:"Apenas processos atrasados"})]})]})]})]}),T()&&s.jsxs("div",{className:"active-filters",children:[s.jsx("h4",{children:"Filtros Ativos:"}),s.jsxs("div",{className:"active-filters-tags",children:[t.houseId&&s.jsxs("span",{className:"filter-tag",children:["Casa:"," ",a.find(j=>j.id===t.houseId)?.houseName||"N/A",s.jsx("button",{onClick:()=>v("houseId",void 0),children:s.jsx(Rs,{size:12})})]}),t.priority&&s.jsxs("span",{className:"filter-tag",children:["Prioridade:"," ",h.find(j=>j.value===t.priority)?.label,s.jsx("button",{onClick:()=>v("priority",void 0),children:s.jsx(Rs,{size:12})})]}),t.step&&s.jsxs("span",{className:"filter-tag",children:["Etapa:"," ",p.find(j=>j.value===t.step)?.label,s.jsx("button",{onClick:()=>v("step",void 0),children:s.jsx(Rs,{size:12})})]}),t.showOnlyActive&&s.jsxs("span",{className:"filter-tag",children:["Apenas ativos",s.jsx("button",{onClick:()=>v("showOnlyActive",!1),children:s.jsx(Rs,{size:12})})]}),t.showOnlyOverdue&&s.jsxs("span",{className:"filter-tag",children:["Apenas atrasados",s.jsx("button",{onClick:()=>v("showOnlyOverdue",!1),children:s.jsx(Rs,{size:12})})]})]})]})]})},lz=({metrics:t,loading:e=!1})=>{const r=(m,h)=>h===0?m>0?100:0:(m-h)/h*100,n=m=>{if(m<24)return`${Math.round(m)}h`;const h=Math.floor(m/24),p=Math.round(m%24);return p>0?`${h}d ${p}h`:`${h}d`},a=m=>`${Math.round(m)}%`,o=m=>m>0?s.jsx(vr,{size:16,className:"trend-up"}):m<0?s.jsx(Jn,{size:16,className:"trend-down"}):null,c=(m,h=!0)=>m>0?h?"#10b981":"#ef4444":m<0?h?"#ef4444":"#10b981":"#6b7280";if(e||!t)return s.jsx("div",{className:"top-indicators",children:s.jsx("div",{className:"indicators-grid",children:Array.from({length:6}).map((m,h)=>s.jsxs("div",{className:"indicator-card loading",children:[s.jsxs("div",{className:"card-header",children:[s.jsx("div",{className:"skeleton-icon"}),s.jsx("div",{className:"skeleton-title"})]}),s.jsxs("div",{className:"card-content",children:[s.jsx("div",{className:"skeleton-value"}),s.jsx("div",{className:"skeleton-subtitle"}),s.jsx("div",{className:"skeleton-variation"})]})]},h))})});const d=[{id:"total-reservations",title:"Total de Reservas",value:t.totalReservations,previousValue:t.lastMonth.newReservations,icon:s.jsx(pn,{size:24}),color:"blue",isGoodIncrease:!0,subtitle:"Este ms"},{id:"active-processes",title:"Processos Ativos",value:t.activeConciergeProcesses,previousValue:null,icon:s.jsx(dj,{size:24}),color:"orange",isGoodIncrease:!1,subtitle:"Em andamento"},{id:"completed-processes",title:"Processos Concludos",value:t.completedProcesses,previousValue:t.lastMonth.completedProcesses,icon:s.jsx(Dn,{size:24}),color:"green",isGoodIncrease:!0,subtitle:"Este ms"},{id:"overdue-processes",title:"Processos Atrasados",value:t.overdueProcesses,previousValue:null,icon:s.jsx(Th,{size:24}),color:"red",isGoodIncrease:!1,subtitle:"Precisam ateno"},{id:"average-time",title:"Tempo Mdio",value:n(t.averageProcessTime),previousValue:t.lastMonth.averageTime,icon:s.jsx($h,{size:24}),color:"purple",isGoodIncrease:!1,subtitle:"Por processo"},{id:"completion-rate",title:"Taxa de Concluso",value:a(t.completionRate),previousValue:null,icon:s.jsx(zs,{size:24}),color:"teal",isGoodIncrease:!0,subtitle:"Geral"}];return s.jsxs("div",{className:"top-indicators",children:[s.jsxs("div",{className:"indicators-header",children:[s.jsxs("h2",{children:[s.jsx(zs,{size:24}),"Indicadores Principais"]}),s.jsx("p",{children:" Viso geral dos processos e performance"})]}),s.jsx("div",{className:"indicators-grid",children:d.map(m=>{const h=m.previousValue!==null?r(m.value,m.previousValue):null;return s.jsxs("div",{className:`indicator-card ${m.color}`,children:[s.jsxs("div",{className:"card-header",children:[s.jsx("div",{className:"card-icon",children:m.icon}),s.jsxs("div",{className:"card-title",children:[s.jsx("h3",{children:m.title}),s.jsx("span",{className:"card-subtitle",children:m.subtitle})]})]}),s.jsxs("div",{className:"card-content",children:[s.jsx("div",{className:"card-value",children:typeof m.value=="number"?m.value.toLocaleString():m.value}),h!==null&&s.jsxs("div",{className:"card-variation",children:[s.jsxs("span",{className:"variation-value",style:{color:c(h,m.isGoodIncrease)},children:[h>0?"+":"",Math.round(h),"%"]}),s.jsx("span",{className:"variation-icon",children:o(h)}),s.jsx("span",{className:"variation-label",children:"vs mes anterior"})]})]}),m.id==="overdue-process"&&t.overdueProcesses>0&&s.jsx("div",{className:"critical-badge",children:"Ateno necessria"}),m.id==="completion-rate"&&t.completionRate>=90&&s.jsx("div",{className:"excellent-badge",children:"Excelente performance"})]},m.id)})}),s.jsx("div",{className:"executive-summary",children:s.jsxs("div",{className:"summary-card",children:[s.jsx("h3",{children:"Resumo Executivo"}),s.jsxs("div",{className:"summary-content",children:[s.jsxs("div",{className:"summary-item",children:[s.jsx("span",{className:"summary-label",children:"Status geral:"}),s.jsx("span",{className:`summary-value ${t.overdueProcesses===0&&t.completionRate>=80?"status-good":t.overdueProcesses>5||t.completionRate<60?"status-critical":"status-warning"}`,children:t.overdueProcesses===0&&t.completionRate>=80?"Excelente":t.overdueProcesses>5||t.completionRate<60?"Crtico":"Ateno"})]}),s.jsxs("div",{className:"summary-item",children:[s.jsx("span",{className:"summary-label",children:"Processos em andamento:"}),s.jsx("span",{className:"summary-value",children:t.activeConciergeProcesses})]}),s.jsxs("div",{className:"summary-item",children:[s.jsx("span",{className:"summary-label",children:"Eficicncia:"}),s.jsx("span",{className:"summary-value",children:a(t.completionRate)})]})]})]})})]})},WC=["menu_sent","menu_received","shopping_list","client_approval","supplier_sent","payment_sent","invoices_received","receipts_sent"],YC={menu_sent:"Cardpio Enviado",menu_received:"Cardpio Recebido",shopping_list:"Lista de Compras",client_approval:"Aprovao do Cliente",supplier_sent:"Enviado para Fornecedores",payment_sent:"Notas para Pagamento",invoices_received:"Notas Recebidas",receipts_sent:"Comprovante Enviado"},Qr=t=>t instanceof Date?t:t.toDate(),qs=t=>Ke.fromDate(t),cz=async t=>{try{const e=kt(et,"sales"),r=mt(e,ft("checkIn",">=",qs(t.dateRange.start)),ft("checkIn","<=",qs(t.dateRange.end)),hs("checkIn","asc")),n=await qr(r),a=[];return n.forEach(o=>{const c=o.data();if(t.houseId&&c.houseId!==t.houseId||t.status&&c.status!==t.status)return;const d={id:o.id,clientName:c.clientName||"",clientEmail:c.clientEmail||"",clientPhone:c.clientPhone||"",houseId:c.houseId||"",houseName:c.houseName||"",checkIn:Qr(c.checkIn),checkOut:Qr(c.checkOut),totalDays:c.totalDays||0,totalValue:c.totalValue||0,conciergeRequired:c.conciergeRequired||!1,conciergeProcessId:c.conciergeProcessId||void 0,status:c.status||"pending",createdAt:Qr(c.createdAt),updatedAt:Qr(c.updatedAt)};a.push(d)}),a}catch(e){throw console.error("Erro ao buscar reservas futuras:",e),new Error("Falha ao carregar reservas futuras")}},uz=async t=>{try{const e=kt(et,"conciergeProcesses");let r=mt(e,ft("createdAt",">=",qs(t.dateRange.start)),ft("createdAt","<=",qs(t.dateRange.end)),hs("createdAt","desc"));t.houseId&&(r=mt(r,ft("houseId","==",t.houseId))),t.status&&(r=mt(r,ft("status","==",t.status))),t.priority&&(r=mt(r,ft("priority","==",t.priority))),t.step&&(r=mt(r,ft("currentStep","==",t.step)));const n=await qr(r),a=[];return n.forEach(o=>{const c=o.data(),d={id:o.id,reservationId:c.reservationId||"",clientName:c.clientName||"",houseName:c.houseName||"",checkIn:Qr(c.checkIn),checkOut:Qr(c.checkOut),currentStep:c.currentStep||"menu_sent",status:c.status||"pending",priority:c.priority||"medium",createdAt:Qr(c.createdAt),updatedAt:Qr(c.updatedAt),steps:{menuSent:{completed:c.steps?.menuSent?.completed||!1,completedAt:c.steps?.menuSent?.completedAt?Qr(c.steps.menuSent.completedAt):void 0,notes:c.steps?.menuSent?.notes||void 0},menuReceived:{completed:c.steps?.menuReceived?.completed||!1,completedAt:c.steps?.menuReceived?.completedAt?Qr(c.steps.menuReceived.completedAt):void 0,notes:c.steps?.menuReceived?.notes||void 0},shoppingList:{completed:c.steps?.shoppingList?.completed||!1,completedAt:c.steps?.shoppingList?.completedAt?Qr(c.steps.shoppingList.completedAt):void 0,notes:c.steps?.shoppingList?.notes||void 0,listItems:c.steps?.shoppingList?.listItems||void 0},clientApproval:{completed:c.steps?.clientApproval?.completed||!1,completedAt:c.steps?.clientApproval?.completedAt?Qr(c.steps.clientApproval.completedAt):void 0,notes:c.steps?.clientApproval?.notes||void 0,approved:c.steps?.clientApproval?.approved||void 0},supplierSent:{completed:c.steps?.supplierSent?.completed||!1,completedAt:c.steps?.supplierSent?.completedAt?Qr(c.steps.supplierSent.completedAt):void 0,notes:c.steps?.supplierSent?.notes||void 0,suppliers:c.steps?.supplierSent?.suppliers||void 0},paymentSent:{completed:c.steps?.paymentSent?.completed||!1,completedAt:c.steps?.paymentSent?.completedAt?Qr(c.steps.paymentSent.completedAt):void 0,notes:c.steps?.paymentSent?.notes||void 0,amount:c.steps?.paymentSent?.amount||void 0},invoicesReceived:{completed:c.steps?.invoicesReceived?.completed||!1,completedAt:c.steps?.invoicesReceived?.completedAt?Qr(c.steps.invoicesReceived.completedAt):void 0,notes:c.steps?.invoicesReceived?.notes||void 0,invoiceCount:c.steps?.invoicesReceived?.invoiceCount||void 0},receiptsSent:{completed:c.steps?.receiptsSent?.completed||!1,completedAt:c.steps?.receiptsSent?.completedAt?Qr(c.steps.receiptsSent.completedAt):void 0,notes:c.steps?.receiptsSent?.notes||void 0}},metrics:{totalDuration:c.metrics?.totalDuration||0,averageStepTime:c.metrics?.averageStepTime||0,overdueSteps:c.metrics?.overdueSteps||0,completedSteps:c.metrics?.completedSteps||0,totalSteps:WC.length}};a.push(d)}),a}catch(e){throw console.error("Erro ao buscar processos de concierge:",e),new Error("Falha ao carregar processos de concierge")}},dz=async t=>{try{const e=kt(et,"notifications"),r=mt(e,ft("createdAt",">=",qs(t.dateRange.start)),ft("createdAt","<=",qs(t.dateRange.end)),hs("createdAt","desc")),n=await qr(r),a=[];return n.forEach(o=>{const c=o.data(),d={id:o.id,type:c.type||"process_update",title:c.title||"",message:c.message||"",priority:c.priority||"medium",relatedId:c.relatedId||"",relatedType:c.relatedType||"concierge_process",isRead:c.isRead||!1,isActive:c.isActive||!0,createdAt:Qr(c.createdAt),scheduledFor:c.scheduledFor?Qr(c.scheduledFor):void 0,actionRequired:c.actionRequired||!1,actionUrl:c.actionUrl||void 0,metadata:c.metadata||void 0};a.push(d)}),a}catch(e){throw console.error("Erro ao buscar notificaes:",e),new Error("Falha ao carregar notificaes")}},hz=(t,e)=>{const r=new Date,n=new Date(r.getFullYear(),r.getMonth(),1),a=new Date(r.getFullYear(),r.getMonth()-1,1),o=t.length,c=e.filter(U=>U.status==="in_progress").length,d=e.filter(U=>U.status==="completed").length,m=e.filter(U=>U.metrics.overdueSteps>0).length,h=e.filter(U=>U.status==="completed"&&U.metrics.totalDuration>0),p=h.length>0?h.reduce((U,C)=>U+C.metrics.totalDuration,0)/h.length:0,v=e.length>0?d/e.length*100:0,y=t.filter(U=>U.createdAt>=n),N=e.filter(U=>U.createdAt>=n).filter(U=>U.status==="completed"),E=N.length>0?N.reduce((U,C)=>U+C.metrics.totalDuration,0)/N.length:0,T=t.filter(U=>U.createdAt>=a&&U.createdAt<n),O=e.filter(U=>U.createdAt>=a&&U.createdAt<n).filter(U=>U.status==="completed"),P=O.length>0?O.reduce((U,C)=>U+C.metrics.totalDuration,0)/O.length:0,z=new Map;e.forEach(U=>{z.has(U.houseName)||z.set(U.houseName,{houseName:U.houseName,processes:[]}),z.get(U.houseName).processes.push(U)});const Q=Array.from(z.values()).map(U=>{const C=U.processes.length,k=U.processes.filter(M=>M.status==="completed").length,S=k>0?U.processes.filter(M=>M.status==="completed").reduce((M,A)=>M+A.metrics.totalDuration,0)/k:0,F=C>0?k/C*100:0;return{houseId:U.processes[0]?.houseName||"",houseName:U.houseName,totalProcesses:C,completedProcesses:k,averageTime:S,completionRate:F}});return{totalReservations:o,activeConciergeProcesses:c,completedProcesses:d,overdueProcesses:m,averageProcessTime:p,completionRate:v,thisMonth:{newReservations:y.length,completedProcesses:N.length,averageTime:E},lastMonth:{newReservations:T.length,completedProcesses:O.length,averageTime:P},byHouse:Q}},fz=(t,e)=>{const r=[],n=new Date;n.setDate(n.getDate()-30);for(let d=0;d<30;d++){const m=new Date(n);m.setDate(m.getDate()+d);const h=m.toISOString().split("T")[0],p=e.filter(v=>new Date(v.createdAt).toISOString().split("T")[0]===h);r.push({date:h,completed:p.filter(v=>v.status==="completed").length,pending:p.filter(v=>v.status==="pending").length,overdue:p.filter(v=>v.metrics.overdueSteps>0).length})}const a=WC.map(d=>{const m=e.filter(y=>y.currentStep===d),h=e.filter(y=>{const w=y.steps[d];return w&&w.completed}),p=h.length>0?h.reduce((y,w)=>y+w.metrics.averageStepTime,0)/h.length:0,v=m.length>0?h.length/m.length*100:0;return{step:d,stepLabel:YC[d],averageTime:p,completionRate:v,totalProcesses:m.length}}),o=new Map;e.forEach(d=>{o.has(d.houseName)||o.set(d.houseName,[]),o.get(d.houseName).push(d)});const c=Array.from(o.entries()).map(([d,m])=>{const h=m.length,p=m.filter(w=>w.status==="completed").length,v=p>0?m.filter(w=>w.status==="completed").reduce((w,N)=>w+N.metrics.totalDuration,0)/p:0,y=h>0?p/h*100:0;return{houseId:d,houseName:d,totalProcesses:h,completedProcesses:p,completionRate:y,averageTime:v}});return{processCompletion:r,stepPerformance:a,housePerformance:c}},mz=async(t,e,r,n,a,o="medium",c,d)=>{try{const m=kt(et,"notifications"),h={type:t,title:e,message:r,priority:o,relatedId:n,relatedType:a,isRead:!1,isActive:!0,createdAt:qs(new Date),scheduledFor:c?qs(c):null,actionRequired:o==="high"||o==="urgent",actionUrl:void 0,metadata:d||null};await Bs(m,h)}catch(m){throw console.error("Erro ao criar notificao:",m),new Error("Falha ao criar notificao")}},pz=async(t,e,r)=>{try{const n=Zt(et,"conciergeProcesses",t),a={currentStep:e,updatedAt:qs(new Date),[`steps.${e}.completed`]:!0,[`steps.${e}.completedAt`]:qs(new Date),...r&&{[`steps.${e}.notes`]:r}};await Vs(n,a),await mz("process_update","Processo Atualizado",`Etapa "${YC[e]}" foi concluda`,t,"concierge_process","medium")}catch(n){throw console.error("Erro ao avanar etapa do processo:",n),new Error("Falha ao atualizar processo")}},gz=({processes:t,loading:e=!1,onRefresh:r})=>{const[n,a]=B.useState(null),[o,c]=B.useState(null),[d,m]=B.useState(""),[h,p]=B.useState(!1),v={menu_sent:"Cardpio Enviado",menu_received:"Cardpio Recebido",shopping_list:"Lista de Compras",client_approval:"Aprovao do Cliente",supplier_sent:"Fornecedor Enviado",payment_sent:"Pagamento Enviado",invoices_received:"Faturas Recebidas",receipts_sent:"Recibos Enviados"},y=["menu_sent","menu_received","shopping_list","client_approval","supplier_sent","payment_sent","invoices_received","receipts_sent"],w={menu_sent:"menuSent",menu_received:"menuReceived",shopping_list:"shoppingList",client_approval:"clientApproval",supplier_sent:"supplierSent",payment_sent:"paymentSent",invoices_received:"invoicesReceived",receipts_sent:"receiptsSent"},N=S=>({low:"#10b981",medium:"#f59e0b",high:"#ef4444",urgent:"#dc2626"})[S],E=S=>({low:"Baixa",medium:"Mdia",high:"Alta",urgent:"Urgente"})[S],T=S=>new Date(S).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}),j=S=>{const F=new Date,A=new Date(S).getTime()-F.getTime();return Math.ceil(A/(1e3*60*60*24))},O=S=>{const F=y.indexOf(S);return F===-1||F===y.length-1?null:y[F+1]},P=(S,F)=>{const M=O(F);M&&(c({processId:S,step:M,stepLabel:v[M]}),m(""))},z=async()=>{if(o)try{p(!0),await pz(o.processId,o.step,d||void 0),c(null),m(""),r()}catch(S){console.error("Erro ao avanar etapa:",S)}finally{p(!1)}},Q=()=>{c(null),m("")},U=S=>{a(n===S?null:S)},C=S=>{const F=y.filter(A=>S.steps[w[A]].completed).length,M=F/y.length*100;return s.jsxs("div",{className:"step-progress",children:[s.jsx("div",{className:"progress-bar",children:s.jsx("div",{className:"progress-fill",style:{width:`${M}%`}})}),s.jsxs("span",{className:"progress-text",children:[F," de ",y.length," etapas"]})]})},k=S=>s.jsx("div",{className:"process-steps",children:y.map((F,M)=>{const A=S.steps[w[F]],D=S.currentStep===F,we=A.completed,Me=M>0&&y[M-1]===S.currentStep;return s.jsxs("div",{className:`step-item ${we?"completed":""} ${D?"current":""} ${Me?"next":""}`,children:[s.jsx("div",{className:"step-icon",children:we?s.jsx(Dn,{size:20}):D?s.jsx($h,{size:20}):s.jsx("div",{className:"step-number",children:M+1})}),s.jsxs("div",{className:"step-info",children:[s.jsx("h4",{children:v[F]}),A.completedAt&&s.jsx("span",{className:"step-date",children:T(A.completedAt)}),A.notes&&s.jsx("p",{className:"step-notes",children:A.notes})]}),M<y.length-1&&s.jsx(uj,{className:"step-arrow",size:16})]},F)})});return e?s.jsxs("div",{className:"process-block",children:[s.jsx("div",{className:"block-header",children:s.jsx("div",{className:"skeleton-title"})}),s.jsx("div",{className:"processes-list",children:Array.from({length:3}).map((S,F)=>s.jsx("div",{className:"process-card loading",children:s.jsx("div",{className:"skeleton-content"})},F))})]}):t.length===0?s.jsxs("div",{className:"process-block",children:[s.jsx("div",{className:"block-header",children:s.jsxs("h2",{children:[s.jsx(Jw,{size:20}),"Processos de Concierge"]})}),s.jsxs("div",{className:"empty-state",children:[s.jsx(Dn,{size:60}),s.jsx("h3",{children:"Nenhum processo encontrado"}),s.jsx("p",{children:"No h processos de concierge para os filtros selecionados."})]})]}):s.jsxs("div",{className:"process-block",children:[s.jsxs("div",{className:"block-header",children:[s.jsxs("h2",{children:[s.jsx(Jw,{size:24}),"Processos de Concierge"]}),s.jsxs("span",{className:"process-count",children:[t.length," ",t.length>1?"processos":"processo"]})]}),s.jsx("div",{className:"processes-list",children:t.map(S=>{const F=n===S.id,M=j(S.checkIn),A=M<=3,D=O(S.currentStep);return s.jsxs("div",{className:`process-card ${S.status} ${A?"urgent":""}`,children:[s.jsxs("div",{className:"card-header",onClick:()=>U(S.id),children:[s.jsxs("div",{className:"card-main-info",children:[s.jsxs("div",{className:"client-info",children:[s.jsx(Io,{size:18}),s.jsx("h3",{children:S.clientName})]}),s.jsxs("div",{className:"house-info",children:[s.jsx(jn,{size:18}),s.jsx("span",{children:S.houseName})]})]}),s.jsxs("div",{className:"card-meta",children:[s.jsx("div",{className:"priority-badge",style:{backgroundColor:N(S.priority),color:"white"},children:E(S.priority)}),s.jsxs("div",{className:"checkin-info",children:[s.jsx(pn,{size:14}),s.jsx("span",{children:T(S.checkIn)}),A&&s.jsxs("span",{className:"urgent-badge",children:[s.jsx(Th,{size:14}),M," dias"]})]})]})]}),s.jsxs("div",{className:"card-progress",children:[C(S),s.jsx("div",{className:"current-step-badge",children:v[S.currentStep]})]}),s.jsxs("div",{className:"card-actions",children:[D&&S.status==="in_progress"&&s.jsxs("button",{className:"advance-btn",onClick:()=>P(S.id,S.currentStep),children:[s.jsx(cx,{size:16}),"Avanar para ",v[D]]}),s.jsxs("button",{className:"details-btn",onClick:()=>U(S.id),children:[s.jsx(Ai,{size:16}),F?"Ocultar":"Ver"," Detalhes"]})]}),F&&s.jsxs("div",{className:"card-details",children:[s.jsxs("div",{className:"details-header",children:[s.jsx("h4",{children:"Etapas do Processo"}),s.jsxs("div",{className:"process-metrics",children:[s.jsxs("div",{className:"metric",children:[s.jsx("span",{className:"metric-label",children:"Tempo Total: "}),s.jsxs("span",{className:"metric-value",children:[Math.round(S.metrics.totalDuration),"h"]})]}),s.jsxs("div",{className:"metric",children:[s.jsxs("span",{className:"metric-label",children:["Etapas Concluidas:"," "]}),s.jsxs("span",{className:"metric-value",children:[S.metrics.completedSteps,"/",S.metrics.totalSteps]})]}),S.metrics.overdueSteps>0&&s.jsxs("div",{className:"metric warning",children:[s.jsx(Th,{size:14}),s.jsxs("span",{className:"metric-value",children:[S.metrics.overdueSteps," atrasadas"]})]})]})]}),k(S)]})]},S.id)})}),o&&s.jsx("div",{className:"modal-overlay-process",onClick:Q,children:s.jsxs("div",{className:"modal-content-process",onClick:S=>S.stopPropagation(),children:[s.jsxs("div",{className:"modal-header-process",children:[s.jsx("h3",{children:"Avanar Etapa"}),s.jsx("button",{className:"close-btn-process",onClick:Q,children:s.jsx(Rs,{size:20})})]}),s.jsxs("div",{className:"modal-body-process",children:[s.jsx("p",{children:"Confirma o avano para a etapa: "}),s.jsxs("div",{className:"step-highlight",children:[s.jsx(cx,{size:20}),s.jsx("strong",{children:o.stepLabel})]}),s.jsxs("div",{className:"notes-input",children:[s.jsx("label",{children:" Observaes (Opcional):"}),s.jsx("textarea",{value:d,onChange:S=>m(S.target.value),placeholder:"Adicione observaes sobre esta etapa...",rows:4,disabled:h})]})]}),s.jsxs("div",{className:"modal-footer-process",children:[s.jsx("button",{className:"cancel-btn",onClick:Q,disabled:h,children:"Cancelar"}),s.jsx("button",{className:"confirm-btn",onClick:z,disabled:h,children:h?"Avanando...":"Confirmar"})]})]})})]})},vz=()=>{const[t,e]=B.useState({dateRange:{start:new Date(new Date().setDate(1)),end:new Date(new Date().setMonth(new Date().getMonth()+1,0))},showOnlyActive:!1,showOnlyOverdue:!1}),[r,n]=B.useState(null),[a,o]=B.useState(!0),[c,d]=B.useState(null),[m,h]=B.useState(!1),p=B.useCallback(async()=>{try{d(null);const[w,N,E]=await Promise.all([cz(t),uz(t),dz(t)]),T=hz(w,N),j=fz(w,N);n({reservations:w,conciergeProcesses:N,notifications:E,metrics:T,charts:j})}catch(w){console.error("Erro ao buscar dados do dashboard:",w),d("Erro ao carregar dados do dashboard. Por favor, tente novamente.")}finally{o(!1),h(!1)}},[t]);B.useEffect(()=>{o(!0),p()},[p]);const v=w=>{e(w)},y=()=>{h(!0),p()};return s.jsxs("div",{className:"dashboard-management",children:[s.jsx("div",{className:"process-dashboard-header",children:s.jsxs("div",{className:"process-dashboard-header-content",children:[s.jsxs("div",{className:"process-dashboard-header-left",children:[s.jsx("div",{className:"process-dashboard-header-icon",children:s.jsx(g1,{})}),s.jsxs("div",{className:"process-dashboard-header-text",children:[s.jsx("h1",{className:"process-dashboard-header-title",children:"Dashboard de Processos"}),s.jsx("p",{className:"process-dashboard-header-subtitle",children:"Acompanhe reservas futuras e processos de concierge em tempo real"})]})]}),s.jsxs("div",{className:"process-dashboard-header-actions",children:[s.jsxs("div",{className:"process-dashboard-header-badge",children:[s.jsx(pn,{className:"process-dashboard-header-badge-icon"}),s.jsx("span",{children:"Perodo atual"})]}),s.jsxs("button",{className:"process-dashboard-refresh-btn",onClick:y,disabled:m,children:[s.jsx(Bo,{size:18,className:m?"spinning":""}),m?"Atualizando...":"Atualizar"]})]})]})}),s.jsx(oz,{filters:t,onFiltersChange:v,onClearFilters:()=>e({dateRange:{start:new Date(new Date().setDate(1)),end:new Date(new Date().setMonth(new Date().getMonth()+1,0))},showOnlyActive:!1,showOnlyOverdue:!1})}),c&&s.jsxs("div",{className:"error-banner",children:[s.jsx(Ul,{size:20}),s.jsx("span",{children:c}),s.jsx("button",{onClick:y,children:"Tentar novamente"})]}),s.jsxs("div",{className:"dashboard-content",children:[s.jsx(lz,{metrics:r?.metrics,loading:a}),s.jsx(gz,{processes:r?.conciergeProcesses||[],loading:a,onRefresh:y}),s.jsxs("div",{className:"reservations-block",children:[s.jsxs("div",{className:"block-header",children:[s.jsx("h2",{children:"Prximas Reservas"}),s.jsxs("span",{className:"reservation-count",children:[r?.reservations.length||0," reserva(s)"]})]}),a?s.jsx("div",{className:"reservations-list",children:Array.from({length:3}).map((w,N)=>s.jsx("div",{className:"reservation-card loading",children:s.jsx("div",{className:"skeleton-content"})},N))}):r&&r.reservations.length>0?s.jsx("div",{className:"reservations-list",children:r.reservations.map(w=>{const N=new Date(w.checkIn),E=new Date(w.checkOut),T=Math.ceil((N.getTime()-new Date().getTime())/(1e3*60*60*24)),j=T<=10;return s.jsxs("div",{className:`reservation-card ${j?"urgent":""}`,children:[s.jsxs("div",{className:"reservation-info",children:[s.jsxs("div",{className:"client-details",children:[s.jsx("h3",{children:w.clientName}),s.jsx("p",{className:"house-name",children:w.houseName})]}),s.jsxs("div",{className:"date-details",children:[s.jsxs("div",{className:"date-row",children:[s.jsx("span",{className:"date-label",children:"Check-in:"}),s.jsx("span",{className:"date-value",children:N.toLocaleDateString("pt-BR")})]}),s.jsxs("div",{className:"date-row",children:[s.jsx("span",{className:"date-label",children:"Check-out:"}),s.jsx("span",{className:"date-value",children:E.toLocaleDateString("pt-BR")})]})]}),s.jsxs("div",{className:"reservation-meta",children:[s.jsxs("span",{className:"total-days",children:[w.totalDays," diria(s)"]}),j&&s.jsxs("span",{className:"urgent-badge",children:[T," dia(s) restante(s)"]}),w.conciergeRequired&&s.jsx("span",{className:"concierge-badge",children:"Concierge necessrio"})]})]}),s.jsx("div",{className:"reservation-status",children:s.jsx("span",{className:`status-badge ${w.status}`,children:w.status==="confirmed"?"Confirmado":w.status==="pending"?"Pendente":"Cancelado"})})]},w.id)})}):s.jsx("div",{className:"empty-state",children:s.jsx("p",{children:"Nenhuma reserva futura encontrada para os filtros selecionados."})})]}),r&&r.notifications.length>0&&s.jsxs("div",{className:"notifications-block",children:[s.jsxs("div",{className:"block-header",children:[s.jsx("h2",{children:"Notificaes"}),s.jsxs("span",{className:"notification-count",children:[r.notifications.filter(w=>!w.isRead).length," ","no lida(s)"]})]}),s.jsx("div",{className:"notifications-list",children:r.notifications.slice(0,5).map(w=>s.jsxs("div",{className:`notification-card ${w.isRead?"read":"unread"} ${w.priority}`,children:[s.jsxs("div",{className:"notification-content",children:[s.jsx("h4",{children:w.title}),s.jsx("p",{children:w.message}),s.jsx("span",{className:"notification-date",children:new Date(w.createdAt).toLocaleString("pt-BR")})]}),!w.isRead&&s.jsx("div",{className:"unread-indicator"})]},w.id))})]})]})]})},xz=[{value:"rental_sales",label:"Vendas de Locaes"},{value:"contracts_quantity",label:"Quantidade de Contratos"},{value:"supplier_commission",label:"Comisso de Fornecedores"},{value:"concierge",label:"Concierge"},{value:"house_sales",label:"Vendas de Casas"}],yz=[{value:"monthly",label:"Mensal"},{value:"quarterly",label:"Trimestral"},{value:"annual",label:"Anual"}],_z=[{value:1,label:"Janeiro"},{value:2,label:"Fevereiro"},{value:3,label:"Maro"},{value:4,label:"Abril"},{value:5,label:"Maio"},{value:6,label:"Junho"},{value:7,label:"Julho"},{value:8,label:"Agosto"},{value:9,label:"Setembro"},{value:10,label:"Outubro"},{value:11,label:"Novembro"},{value:12,label:"Dezembro"}],Ez=[{value:{start:1,end:3},label:"Q1 (Jan-Mar)"},{value:{start:4,end:6},label:"Q2 (Abr-Jun)"},{value:{start:7,end:9},label:"Q3 (Jul-Set)"},{value:{start:10,end:12},label:"Q4 (Out-Dez)"}],wz=({filters:t,onFiltersChange:e,onRefresh:r,loading:n})=>{const a=v=>{e({...t,year:v})},o=v=>{const y={period:v};v==="annual"?(y.startMonth=void 0,y.endMonth=void 0):v==="monthly"?(y.startMonth=new Date().getMonth()+1,y.endMonth=void 0):v==="quarterly"&&(y.startMonth=1,y.endMonth=3),e({...t,...y})},c=v=>{e({...t,startMonth:v,endMonth:void 0})},d=(v,y)=>{e({...t,startMonth:v,endMonth:y})},m=v=>{const y=t.categories||[],N=y.includes(v)?y.filter(E=>E!==v):[...y,v];e({...t,categories:N})},h=new Date().getFullYear(),p=[h-3,h-2,h-1,h,h+1,h+2,h+3];return s.jsxs("div",{className:"goals-filters",children:[s.jsxs("div",{className:"filters-header",children:[s.jsxs("div",{className:"filters-title",children:[s.jsx(Wh,{className:"title-icon"}),s.jsx("h3",{children:"Filtros"})]}),s.jsxs("button",{className:"refresh-button",onClick:r,disabled:n,title:"Atualizar dados",children:[s.jsx(Bo,{className:n?"spinning":""}),n?"Atualizando...":"Atualizar"]})]}),s.jsxs("div",{className:"filters-content",children:[s.jsxs("div",{className:"filter-group",children:[s.jsxs("label",{className:"filter-label",children:[s.jsx(pn,{className:"label-icon"}),"Ano"]}),s.jsx("div",{className:"year-buttons",children:p.map(v=>s.jsx("button",{className:`year-btn ${t.year===v?"active":""}`,onClick:()=>a(v),children:v},v))})]}),s.jsxs("div",{className:"filter-group",children:[s.jsx("label",{className:"filter-label",children:"Perodo"}),s.jsx("div",{className:"period-buttons",children:yz.map(v=>s.jsx("button",{className:`period-btn ${t.period===v.value?"active":""}`,onClick:()=>o(v.value),children:v.label},v.value))})]}),t.period==="monthly"&&s.jsxs("div",{className:"filter-group",children:[s.jsx("label",{className:"filter-label",children:"Ms"}),s.jsx("select",{className:"month-select",value:t.startMonth||new Date().getMonth()+1,onChange:v=>c(Number(v.target.value)),children:_z.map(v=>s.jsx("option",{value:v.value,children:v.label},v.value))})]}),t.period==="quarterly"&&s.jsxs("div",{className:"filter-group",children:[s.jsx("label",{className:"filter-label",children:"Trimestre"}),s.jsx("div",{className:"quarter-buttons",children:Ez.map(v=>s.jsx("button",{className:`quarter-btn ${t.startMonth===v.value.start&&t.endMonth===v.value.end?"active":""}`,onClick:()=>d(v.value.start,v.value.end),children:v.label},v.value.start))})]}),s.jsxs("div",{className:"filter-group",children:[s.jsx("label",{className:"filter-label",children:"Categoria a exibir"}),s.jsx("div",{className:"category-checkboxes",children:xz.map(v=>s.jsxs("label",{className:"category-checkbox",children:[s.jsx("input",{type:"checkbox",checked:t.categories.includes(v.value),onChange:()=>m(v.value)}),s.jsx("span",{className:"checkbox-label",children:v.label})]},v.value))})]})]})]})},Nz=({data:t,isLoading:e=!1})=>{const r=h=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(h),n=h=>`${h.toFixed(1)}%`,a=h=>h>=100?"#10b981":h>=75?"#3b82f6":h>=50?"#f59e0b":h>=25?"#f97316":"#ef4444",o=h=>h>=100?{label:"Meta atingida",icon:gn,color:"#10b981"}:h>=75?{label:"Excelente progresso",icon:vr,color:"#3b82f6"}:h>=50?{label:"Progresso moderado",icon:g1,color:"#f59e0b"}:{label:"Ateno Necessria",icon:Th,color:"#ef4444"};if(e)return s.jsx("div",{className:"sales-thermometer",children:s.jsxs("div",{className:"thermometer-skeleton",children:[s.jsx("div",{className:"skeleton-header"}),s.jsx("div",{className:"skeleton-thermometer"}),s.jsx("div",{className:"skeleton-stats"})]})});const c=a(t.percentage),d=o(t.percentage),m=d.icon;return s.jsxs("div",{className:"sales-thermometer",children:[s.jsxs("div",{className:"thermometer-header",children:[s.jsxs("div",{className:"header-title",children:[s.jsx(Un,{className:"title-icon"}),s.jsxs("h3",{children:["Termmetro de Vendas ",t.year]})]}),s.jsxs("div",{className:"status-badge",style:{backgroundColor:d.color},children:[s.jsx(m,{className:"status-icon"}),s.jsx("span",{children:d.label})]})]}),s.jsxs("div",{className:"thermometer-content",children:[s.jsxs("div",{className:"thermometer-visual",children:[s.jsxs("div",{className:"thermometer-container",children:[s.jsx("div",{className:"thermometer-bulb",style:{borderColor:c},children:s.jsx("div",{className:"thermometer-mercury",style:{backgroundColor:c}})}),s.jsxs("div",{className:"thermometer-tube",children:[s.jsxs("div",{className:"temperature-markers",children:[s.jsxs("div",{className:"marker",children:[s.jsx("span",{className:"marker-label",children:"100%"}),s.jsx("div",{className:"marker-line"})]}),s.jsxs("div",{className:"marker",children:[s.jsx("span",{className:"marker-label",children:"75%"}),s.jsx("div",{className:"marker-line"})]}),s.jsxs("div",{className:"marker",children:[s.jsx("span",{className:"marker-label",children:"50%"}),s.jsx("div",{className:"marker-line"})]}),s.jsxs("div",{className:"marker",children:[s.jsx("span",{className:"marker-label",children:"25%"}),s.jsx("div",{className:"marker-line"})]}),s.jsxs("div",{className:"marker",children:[s.jsx("span",{className:"marker-label",children:"0%"}),s.jsx("div",{className:"marker-line"})]})]}),s.jsx("div",{className:"thermometer-fill-container",children:s.jsx("div",{className:"thermometer-fill",style:{height:`${Math.min(t.percentage,100)}%`,backgroundColor:c},children:s.jsx("div",{className:"fill-shimmer"})})})]})]}),s.jsxs("div",{className:"percentage-display",style:{color:c},children:[s.jsx("span",{className:"percentage-value",children:n(t.percentage)}),s.jsx("span",{className:"percentage-label",children:"Atingido"})]})]}),s.jsxs("div",{className:"thermometer-stats",children:[s.jsxs("div",{className:"stat-card achieved",children:[s.jsxs("div",{className:"stat-header",children:[s.jsx(vr,{className:"stat-icon"}),s.jsx("span",{className:"stat-label",children:"Vendas Realizadas"})]}),s.jsx("div",{className:"stat-value",children:r(t.totalAchieved)}),s.jsxs("div",{className:"stat-detail",children:["Faltam"," ",s.jsx("strong",{children:r(t.totalGoal-t.totalAchieved)})," ","para atingir a meta"]})]}),s.jsxs("div",{className:"stat-card target",children:[s.jsxs("div",{className:"stat-header",children:[s.jsx(gn,{className:"stat-icon"}),s.jsx("span",{className:"stat-label",children:"Meta Anual"})]}),s.jsx("div",{className:"stat-value",children:r(t.totalGoal)}),s.jsx("div",{className:"stat-detail",children:t.percentage>=100?s.jsxs("span",{className:"success-text",children:[s.jsx(gn,{style:{marginRight:"4px"}}),"Meta superada em"," ",r(t.totalAchieved-t.totalGoal),"!"]}):s.jsxs("span",{children:["Meta restante:"," ",s.jsx("strong",{children:r(t.totalGoal-t.totalAchieved)})]})})]})]})]}),s.jsxs("div",{className:"progress-bar-container",children:[s.jsx("div",{className:"progress-bar",children:s.jsx("div",{className:"progress-fill",style:{width:`${Math.min(t.percentage,100)}%`,backgroundColor:c},children:s.jsx("span",{className:"progress-text",children:n(t.percentage)})})}),s.jsxs("div",{className:"progress-labels",children:[s.jsx("span",{children:"R$ 0"}),s.jsx("span",{children:r(t.totalGoal)})]})]})]})},jl={rental_sales:{label:"Vendas de Locaes",goalKey:"rentalSalesGoal",achievedKey:"rentalSalesAchieved",color:"#3b82f6"},contracts_quantity:{label:"Quantidade de Contratos",goalKey:"contractsGoal",achievedKey:"contractsAchieved",color:"#10b981"},supplier_commission:{label:"Comisso Fornecedores",goalKey:"supplierCommissionGoal",achievedKey:"supplierCommissionAchieved",color:"#f59e0b"},concierge:{label:"Concierge",goalKey:"conciergeGoal",achievedKey:"conciergeAchieved",color:"#8b5cf6"},house_sales:{label:"Vendas de Casas",goalKey:"houseSalesGoal",achievedKey:"houseSalesAchieved",color:"#ec4899"}},Tz=({data:t,isLoading:e=!1})=>{const[r,n]=B.useState("rental_sales"),a=(p,v)=>v==="contracts_quantity"?p.toString():new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:0,maximumFractionDigits:0}).format(p),o=()=>{const p=jl[r],v=t.reduce((E,T)=>E+T[p.goalKey],0),y=t.reduce((E,T)=>E+T[p.achievedKey],0),w=v>0?y/v*100:0,N=y-v;return{totalGoal:v,totalAchieved:y,percentage:w,difference:N,status:w>=100?"exceeded":w>=75?"on_track":"below_target"}},c=()=>{const p=jl[r];return Math.max(...t.map(v=>Math.max(v[p.goalKey],v[p.achievedKey])))},d=p=>{const v=c();return v>0?p/v*100:0};if(e)return s.jsx("div",{className:"monthly-goals-chart",children:s.jsxs("div",{className:"chart-skeleton",children:[s.jsx("div",{className:"skeleton-header"}),s.jsx("div",{className:"skeleton-filters"}),s.jsx("div",{className:"skeleton-chart"}),s.jsx("div",{className:"skeleton-stats"})]})});const m=jl[r],h=o();return s.jsxs("div",{className:"monthly-goals-chart",children:[s.jsxs("div",{className:"chart-header",children:[s.jsxs("div",{className:"header-title",children:[s.jsx(zs,{className:"title-icon"}),s.jsx("h3",{children:"Evoluo Mensal de Metas"})]}),s.jsxs("div",{className:"header-stats",children:[s.jsxs("div",{className:"stat-badge",children:[s.jsx(gn,{className:"stat-icon"}),s.jsxs("span",{children:["Meta: ",a(h.totalGoal,r)]})]}),s.jsxs("div",{className:`stat-badge ${h.status}`,children:[h.percentage>=100?s.jsx(vr,{className:"stat-icon"}):s.jsx(Jn,{className:"stat-icon"}),s.jsxs("span",{children:[h.percentage.toFixed(1),"% Atingido"]})]})]})]}),s.jsx("div",{className:"category-filters",children:Object.keys(jl).map(p=>s.jsxs("button",{className:`category-btn ${r===p?"active":""}`,onClick:()=>n(p),style:{borderColor:r===p?jl[p].color:void 0},children:[s.jsx("span",{className:"category-color",style:{backgroundColor:jl[p].color}}),jl[p].label]},p))}),s.jsxs("div",{className:"chart-legend",children:[s.jsxs("div",{className:"legend-item",children:[s.jsx("div",{className:"legend-box goal"}),s.jsx("span",{children:"Meta"})]}),s.jsxs("div",{className:"legend-item",children:[s.jsx("div",{className:"legend-box achieved",style:{backgroundColor:m.color}}),s.jsx("span",{children:"Realizado"})]})]}),s.jsx("div",{className:"chart-container",children:s.jsx("div",{className:"chart-bars",children:t.map(p=>{const v=p[m.goalKey],y=p[m.achievedKey],w=v>0?y/v*100:0,N=w>=100;return s.jsxs("div",{className:"bar-group",children:[s.jsxs("div",{className:"bars",children:[s.jsx("div",{className:"bar-container",children:s.jsx("div",{className:"bar goal-bar",style:{height:`${d(v)}%`},title:`Meta: ${a(v,r)}`,children:s.jsx("span",{className:"bar-value",children:a(v,r)})})}),s.jsx("div",{className:"bar-container",children:s.jsxs("div",{className:`bar achieved-bar ${N?"exceeded":""}`,style:{height:`${d(y)}%`,backgroundColor:m.color},title:`Realizado: ${a(y,r)}`,children:[s.jsx("span",{className:"bar-value",children:a(y,r)}),N&&s.jsx("div",{className:"exceeded-badge",children:s.jsx(vr,{})})]})})]}),s.jsxs("div",{className:`month-percentage ${N?"exceeded":""}`,children:[w.toFixed(0),"%"]}),s.jsxs("div",{className:"month-label",children:[s.jsx(pn,{className:"month-icon"}),s.jsx("span",{children:p.month})]})]},p.month)})})}),s.jsxs("div",{className:"chart-summary",children:[s.jsxs("div",{className:"summary-card",children:[s.jsx("div",{className:"summary-label",children:"Total Meta"}),s.jsx("div",{className:"summary-value",children:a(h.totalGoal,r)})]}),s.jsxs("div",{className:"summary-card",children:[s.jsx("div",{className:"summary-label",children:"Total Realizado"}),s.jsx("div",{className:"summary-value achieved",children:a(h.totalAchieved,r)})]}),s.jsxs("div",{className:"summary-card",children:[s.jsx("div",{className:"summary-label",children:"Diferena"}),s.jsxs("div",{className:`summary-value ${h.difference>=0?"positive":"negative"}`,children:[h.difference>=0?"+":"",a(Math.abs(h.difference),r)]})]}),s.jsxs("div",{className:"summary-card",children:[s.jsx("div",{className:"summary-label",children:"Percentual Atingido"}),s.jsxs("div",{className:`summary-value ${h.status}`,children:[h.percentage.toFixed(1),"%"]})]})]})]})},bz={rental_sales:{label:"Vendas de Locaes",icon:Un,color:"#3b82f6",bgColor:"#dbeafe"},contracts_quantity:{label:"Quantidade de Contratos",icon:ps,color:"#10b981",bgColor:"#d1fae5"},supplier_commission:{label:"Comisso Fornecedores",icon:Hr,color:"#f59e0b",bgColor:"#fef3c7"},concierge:{label:"Concierge",icon:Is,color:"#8b5cf6",bgColor:"#ede9fe"},house_sales:{label:"Vendas de Casas",icon:jn,color:"#ec4899",bgColor:"#fce7f3"}},Sz=({data:t,isLoading:e=!1})=>{const r=(a,o)=>o.toLowerCase().includes("contratos")||o.toLowerCase().includes("contracts")?a.toString():new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:0,maximumFractionDigits:0}).format(a),n=a=>a>=100?{label:"Meta Atingida",icon:Dn,color:"#10b981",bgColor:"#d1fae5"}:a>=75?{label:"No Caminho",icon:vr,color:"#3b82f6",bgColor:"#dbeafe"}:a>=50?{label:"Ateno",icon:Th,color:"#f59e0b",bgColor:"#fef3c7"}:{label:"Abaixo da Meta",icon:y1,color:"#ef4444",bgColor:"#fee2e2"};return e?s.jsxs("div",{className:"category-breakdown",children:[s.jsx("div",{className:"breakdown-header",children:s.jsx("h3",{children:"Desempenho por Categoria"})}),s.jsx("div",{className:"breakdown-grid",children:[1,2,3,4,5].map(a=>s.jsx("div",{className:"category-card skeleton",children:s.jsx("div",{className:"skeleton-content"})},a))})]}):s.jsxs("div",{className:"category-breakdown",children:[s.jsxs("div",{className:"breakdown-header",children:[s.jsx(gn,{className:"header-icon"}),s.jsx("h3",{children:"Desempenho por Categoria"})]}),s.jsx("div",{className:"breakdown-grid",children:t.map(a=>{const o=a.category.toLowerCase().replace(/\s+/g,"_"),c=bz[o]||{label:a.category,icon:gn,color:"#6b7280",bgColor:"#f3f4f6"},d=n(a.percentage),m=c.icon,h=d.icon,p=a.achieved-a.goal,v=p>=0;return s.jsxs("div",{className:"category-card",children:[s.jsxs("div",{className:"card-header",children:[s.jsx("div",{className:"category-icon-wrapper",style:{backgroundColor:c.bgColor},children:s.jsx(m,{className:"category-icon",style:{color:c.color}})}),s.jsxs("div",{className:"category-info",children:[s.jsx("h4",{className:"category-title",children:c.label}),s.jsxs("div",{className:"status-badge",style:{backgroundColor:d.bgColor,color:d.color},children:[s.jsx(h,{className:"status-icon"}),s.jsx("span",{children:d.label})]})]})]}),s.jsxs("div",{className:"progress-section",children:[s.jsx("div",{className:"progress-bar-container",children:s.jsx("div",{className:"progress-bar-bg",children:s.jsx("div",{className:"progress-bar-fill",style:{width:`${Math.min(a.percentage,100)}%`,backgroundColor:c.color},children:s.jsx("div",{className:"progress-shimmer"})})})}),s.jsxs("div",{className:"progress-percentage",style:{color:c.color},children:[a.percentage.toFixed(1),"%"]})]}),s.jsxs("div",{className:"values-section",children:[s.jsxs("div",{className:"value-item",children:[s.jsxs("div",{className:"value-label",children:[s.jsx(gn,{className:"value-icon"}),"Meta"]}),s.jsx("div",{className:"value-amount",children:r(a.goal,a.category)})]}),s.jsxs("div",{className:"value-item achieved",children:[s.jsxs("div",{className:"value-label",children:[s.jsx(Dn,{className:"value-icon"}),"Realizado"]}),s.jsx("div",{className:"value-amount",style:{color:c.color},children:r(a.achieved,a.category)})]})]}),s.jsx("div",{className:"difference-section",children:s.jsxs("div",{className:`difference ${v?"positive":"negative"}`,children:[v?s.jsx(vr,{className:"diff-icon"}):s.jsx(Jn,{className:"diff-icon"}),s.jsxs("span",{className:"diff-label",children:[v?"Superado em":"Faltam",":"]}),s.jsx("span",{className:"diff-value",children:r(Math.abs(p),a.category)})]})}),s.jsxs("div",{className:"mini-chart",children:[s.jsx("div",{className:"chart-label",children:"Tendncia"}),s.jsx("div",{className:"chart-bars",children:[20,35,45,60,75,85,a.percentage].map((y,w)=>s.jsx("div",{className:"chart-bar-wrapper",children:s.jsx("div",{className:"chart-bar",style:{height:`${Math.min(y,100)}%`,backgroundColor:w===6?c.color:`${c.color}80`,opacity:w===6?1:.5}})},w))})]})]},a.category)})})]})},jz=["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],Cz=["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],Az={rental_sales:"Vendas de Locaes",contracts_quantity:"Quantidade de Contratos",supplier_commission:"Comisso Fornecedores",concierge:"Concierge",house_sales:"Vendas de Casas"},lT=t=>Ke.fromDate(t),KC=(t,e)=>{if(e===0)return"on_track";const r=t/e*100;return r>=100?"exceeded":r>=70?"on_track":"below_target"},XC=async t=>{try{const e=kt(et,"annualGoals"),r=mt(e,ft("year","==",t)),n=await qr(r);if(n.empty)return null;const a=n.docs[0];return{id:a.id,...a.data()}}catch(e){throw console.error("Erro ao buscar meta anual:",e),new Error("Falha ao buscar meta anual")}},Rz=async t=>{try{const e=kt(et,"monthlyGoals"),r=mt(e,ft("year","==",t));return(await qr(r)).docs.map(a=>({id:a.id,...a.data()}))}catch(e){throw console.error("Erro ao buscar metas mensais:",e),new Error("Falha ao buscar metas mensais")}},QC=async(t,e)=>{try{const r=kt(et,"sales"),n=new Date(t,e-1,1),a=new Date(t,e,0,23,59,59),o=mt(r,ft("checkInDate",">=",lT(n)),ft("checkInDate","<=",lT(a))),c=await qr(o);let d=0,m=0,h=0,p=0,v=0,y=0;return c.docs.forEach(w=>{const N=w.data(),E=N.contractValue||0;d+=E,N.status!=="cancelled"&&(m+=1);const T=N.conciergeValue||0;p+=T;const j=N.totalAdditionalSales||0;v+=j;const O=N.employeeCommission||0,P=N.salesCommission||0;h+=O+P;const z=N.totalRevenue||0;y+=z}),{year:t,month:e,rentalSalesAchieved:d,contractsQuantityAchieved:m,supplierCommissionAchieved:h,conciergeAchieved:p,houseSalesAchieved:v,totalRevenue:y}}catch(r){throw console.error("Erro ao calcular realizados mensais:",r),new Error("Falha ao calcular realizados")}},Ds=(t,e,r,n)=>{const a=e>0?r/e*100:0,o=r-e,c=KC(r,e),d={category:t,categoryLabel:Az[t],goal:e,achieved:r,percentage:a,status:c,difference:o};return t==="house_sales"&&n&&n>0&&(d.revenuePercentage=r/n*100),d},Dz=async t=>{try{const e=await XC(t);if(!e)return{year:t,totalGoal:0,totalAchieved:0,percentage:0,status:"below_target",categories:[]};let r=0;const n=[],a=[];for(let N=1;N<=12;N++){const E=await QC(t,N);a.push(E)}const o=a.reduce((N,E)=>N+E.rentalSalesAchieved,0),c=a.reduce((N,E)=>N+E.contractsQuantityAchieved,0),d=a.reduce((N,E)=>N+E.supplierCommissionAchieved,0),m=a.reduce((N,E)=>N+E.conciergeAchieved,0),h=a.reduce((N,E)=>N+E.houseSalesAchieved,0),p=a.reduce((N,E)=>N+E.totalRevenue,0);n.push(Ds("rental_sales",e.rentalSalesGoal,o)),n.push(Ds("contracts_quantity",e.contractsQuantityGoal,c)),n.push(Ds("supplier_commission",e.supplierCommissionGoal,d)),n.push(Ds("concierge",e.conciergeGoal,m)),n.push(Ds("house_sales",e.houseSalesGoal,h,p));const v=e.rentalSalesGoal+e.contractsQuantityGoal+e.supplierCommissionGoal+e.conciergeGoal+e.houseSalesGoal;r=o+c+d+m+h;const y=v>0?r/v*100:0,w=KC(r,v);return{year:t,totalGoal:v,totalAchieved:r,percentage:y,status:w,categories:n}}catch(e){return console.error("Erro ao gerar termmetro anual:",e),{year:t,totalGoal:0,totalAchieved:0,percentage:0,status:"below_target",categories:[]}}},Iz=async(t,e)=>{try{const r=await Rz(t),n=await XC(t),a=[];for(const o of e){const c=r.find(v=>v.month===o),d=await QC(t,o),m=c?{rentalSales:c.rentalSalesGoal,contractsQuantity:c.contractsQuantityGoal,supplierCommission:c.supplierCommissionGoal,concierge:c.conciergeGoal,houseSales:c.houseSalesGoal}:{rentalSales:n?n.rentalSalesGoal/12:0,contractsQuantity:n?n.contractsQuantityGoal/12:0,supplierCommission:n?n.supplierCommissionGoal/12:0,concierge:n?n.conciergeGoal/12:0,houseSales:n?n.houseSalesGoal/12:0},h={rentalSales:d.rentalSalesAchieved,contractsQuantity:d.contractsQuantityAchieved,supplierCommission:d.supplierCommissionAchieved,concierge:d.conciergeAchieved,houseSales:d.houseSalesAchieved},p=[Ds("rental_sales",m.rentalSales,h.rentalSales),Ds("contracts_quantity",m.contractsQuantity,h.contractsQuantity),Ds("supplier_commission",m.supplierCommission,h.supplierCommission),Ds("concierge",m.concierge,h.concierge),Ds("house_sales",m.houseSales,h.houseSales,d.totalRevenue)];a.push({year:t,month:o,monthLabel:jz[o-1],goals:m,achieved:h,comparisons:p,totalRevenue:d.totalRevenue})}return a}catch(r){return console.error("Erro ao gerar dados mensais:",r),[]}},kz=(t,e)=>{const r=t.map(o=>({month:Cz[o.month-1],rentalSalesGoal:o.goals.rentalSales,rentalSalesAchieved:o.achieved.rentalSales,contractsGoal:o.goals.contractsQuantity,contractsAchieved:o.achieved.contractsQuantity,supplierCommissionGoal:o.goals.supplierCommission,supplierCommissionAchieved:o.achieved.supplierCommission,conciergeGoal:o.goals.concierge,conciergeAchieved:o.achieved.concierge,houseSalesGoal:o.goals.houseSales,houseSalesAchieved:o.achieved.houseSales})),n=e.categories.map(o=>({category:o.categoryLabel,goal:o.goal,achieved:o.achieved,percentage:o.percentage})),a={percentage:e.percentage,achieved:e.totalAchieved,goal:e.totalGoal,remaining:e.totalGoal-e.totalAchieved};return{monthlyTrend:r,categoryComparison:n,thermometerData:a}},Oz=async t=>{try{const{year:e,period:r,startMonth:n,endMonth:a}=t;let o=[];if(r==="annual")o=[1,2,3,4,5,6,7,8,9,10,11,12];else if(r==="quarterly"&&n&&a)for(let h=n;h<=a;h++)o.push(h);else r==="monthly"&&n&&(o=[n]);const c=await Dz(e),d=await Iz(e,o),m=kz(d,c);return{annualThermometer:c,monthlyData:d,chartsData:m,filters:t,lastUpdate:new Date}}catch(e){console.error("Erro ao obter dados do dashboard:",e);const r=new Date().getFullYear();return{annualThermometer:{year:t?.year||r,totalGoal:0,totalAchieved:0,percentage:0,status:"below_target",categories:[]},monthlyData:[],chartsData:{monthlyTrend:[],categoryComparison:[],thermometerData:{percentage:0,achieved:0,goal:0,remaining:0}},filters:t,lastUpdate:new Date}}},Mz=()=>{const t=new Date().getFullYear(),[e,r]=B.useState({year:t,period:"annual",categories:["rental_sales","contracts_quantity","supplier_commission","concierge","house_sales"]}),[n,a]=B.useState(null),[o,c]=B.useState(!1),[d,m]=B.useState(null),h=B.useCallback(async()=>{try{c(!0),m(null);const E=await Oz(e);a(E)}catch(E){console.error("Erro ao carregar dados do dashboard:",E),m("Erro ao carregar dados do dashboard. Por favor, tente novamente.")}finally{c(!1)}},[e]);B.useEffect(()=>{h()},[h]);const p=E=>{r(E)},v=()=>{h()},y=()=>{if(!n?.chartsData.monthlyTrend)return[];let E=[...n.chartsData.monthlyTrend];return e.period==="monthly"&&e.startMonth?E=E.filter(T=>w(T.month)===e.startMonth):e.period==="quarterly"&&e.startMonth&&e.endMonth&&(E=E.filter(T=>{const j=w(T.month);return j>=e.startMonth&&j<=e.endMonth})),E},w=E=>({janeiro:1,fevereiro:2,maro:3,abril:4,maio:5,junho:6,julho:7,agosto:8,setembro:9,outubro:10,novembro:11,dezembro:12})[E.toLowerCase()]||1,N=()=>n?.chartsData.categoryComparison?n.chartsData.categoryComparison.filter(E=>{const T=E.category.toLowerCase().replace(/\s+/g,"_");return e.categories.includes(T)}):[];return s.jsxs("div",{className:"goals-dashboard-container",children:[s.jsx("div",{className:"goals-dashboard-header",children:s.jsxs("div",{className:"goals-dashboard-header-content",children:[s.jsxs("div",{className:"goals-dashboard-header-left",children:[s.jsx("div",{className:"goals-dashboard-header-icon",children:s.jsx(gn,{})}),s.jsxs("div",{className:"goals-dashboard-header-text",children:[s.jsx("h1",{className:"goals-dashboard-header-title",children:"Dashboard de Metas"}),s.jsx("p",{className:"goals-dashboard-header-subtitle",children:"Acompanhe o desempenho das metas e objetivos da empresa"})]})]}),s.jsxs("div",{className:"goals-dashboard-header-badge",children:[s.jsx(pn,{className:"goals-dashboard-header-badge-icon"}),s.jsxs("span",{children:["Ano ",e.year]})]})]})}),s.jsx(wz,{filters:e,onFiltersChange:p,onRefresh:v,loading:o}),d&&s.jsxs("div",{className:"goals-dashboard-error",children:[s.jsx(Ul,{className:"goals-dashboard-error-icon"}),s.jsx("span",{children:d})]}),!d&&s.jsxs("div",{className:"goals-dashboard-content",children:[s.jsx("section",{className:"goals-dashboard-section",children:s.jsx(Nz,{data:n?.annualThermometer||{year:e.year,totalGoal:0,totalAchieved:0,percentage:0,status:"below_target",categories:[]},isLoading:o})}),s.jsx("section",{className:"goals-dashboard-section",children:s.jsx(Tz,{data:y(),isLoading:o})}),s.jsx("section",{className:"goals-dashboard-section",children:s.jsx(Sz,{data:N(),isLoading:o})})]}),!o&&!d&&n&&n.annualThermometer.totalGoal===0&&s.jsxs("div",{className:"goals-dashboard-empty",children:[s.jsx(gn,{className:"goals-dashboard-empty-icon"}),s.jsx("h3",{className:"goals-dashboard-empty-title",children:"Nenhuma Meta Cadastrada"}),s.jsxs("p",{className:"goals-dashboard-empty-text",children:["Para visualizar o Dashboard de Metas,  necessrio cadastrar as metas anuais do ano ",e.year,". Configure as metas de vendas, contratos, comisses e concierge para acompanhar o desempenho da empresa."]})]})]})},Fz=({filters:t,onFiltersChange:e,onClearFilters:r,loading:n=!1})=>{const[a,o]=B.useState(t);B.useEffect(()=>{o(t)},[t]);const c=(h,p)=>{const v={...a,[h]:p};o(v),e(v)},d=()=>{const h={period:"month",startDate:void 0,endDate:void 0};o(h),e(h),r()},m=()=>{const h=new Date,p=h.getFullYear();return[{value:"month",label:"Mensal",description:`Ms atual (${h.toLocaleDateString("pt-BR",{month:"long",year:"numeric"})})`},{value:"year",label:"Anual",description:`Ano atual (${p})`},{value:"custom",label:"Personalizado",description:"Selecione um perodo especfico"}]};return s.jsxs("div",{className:"statistics-filters",children:[s.jsxs("div",{className:"filters-header",children:[s.jsxs("div",{className:"filters-title",children:[s.jsx(Wh,{size:24}),s.jsx("h3",{children:"Filtros de Estatsticas"})]}),s.jsx("div",{className:"filters-actions",children:s.jsxs("button",{className:"btn-clear-filters",onClick:d,disabled:n,title:"Limpar Filtros",children:[s.jsx(Bo,{size:16}),"Limpar Filtros"]})})]}),s.jsxs("div",{className:"filters-grid",children:[s.jsxs("div",{className:"filter-group",children:[s.jsxs("label",{className:"filter-label",children:[s.jsx(pn,{size:16}),"Perodo"]}),s.jsx("select",{value:a.period,onChange:h=>c("period",h.target.value),className:"filter-select",disabled:n,children:m().map(h=>s.jsx("option",{value:h.value,children:h.label},h.value))}),s.jsx("small",{className:"filter-description",children:m().find(h=>h.value===a.period)?.description})]}),a.period==="custom"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"filter-group",children:[s.jsxs("label",{className:"filter-label",children:[s.jsx(pn,{size:16}),"Data Inicial"]}),s.jsx("input",{type:"date",value:a.startDate||"",onChange:h=>c("startDate",h.target.value||void 0),className:"filter-input",disabled:n})]}),s.jsxs("div",{className:"filter-group",children:[s.jsxs("label",{className:"filter-label",children:[s.jsx(pn,{size:16}),"Data Final"]}),s.jsx("input",{type:"date",value:a.endDate||"",onChange:h=>c("endDate",h.target.value||void 0),className:"filter-input",disabled:n})]})]})]}),s.jsxs("div",{className:"active-filters-summary",children:[s.jsx("h4",{children:"Filtros Ativos:"}),s.jsxs("div",{className:"active-filters-tags",children:[s.jsxs("span",{className:"filter-tag",children:["Perodo:"," ",m().find(h=>h.value===a.period)?.label]}),a.startDate&&s.jsxs("span",{className:"filter-tag",children:["De: ",new Date(a.startDate).toLocaleDateString("pt-BR")]}),a.endDate&&s.jsxs("span",{className:"filter-tag",children:["At: ",new Date(a.endDate).toLocaleDateString("pt-BR")]})]})]}),n&&s.jsxs("div",{className:"filters-loading",children:[s.jsx("div",{className:"loading-spinner"}),s.jsx("span",{children:"Carregando filtros..."})]})]})},Pz=({data:t,loading:e=!1})=>{if(e)return s.jsx("div",{className:"jetpack-stats-block",children:s.jsx("div",{className:"loading-spinner"})});const r=m=>m>=1e6?`${(m/1e6).toFixed(1)}M`:m>=1e3?`${(m/1e3).toFixed(1)}K`:m.toString(),n=m=>{const h=m>=0;return{value:`${h?"+":""}${m.toFixed(1)}%`,isPositive:h}},a=n(t.views.variation),o=n(t.visitors.variation),c=n(t.likes.variation),d=n(t.comments.variation);return s.jsxs("div",{className:"jetpack-stats-block",children:[s.jsxs("div",{className:"stats-block-header",children:[s.jsx("div",{className:"stats-block-header-icon",children:s.jsx(m0,{})}),s.jsxs("div",{className:"stats-block-header-text",children:[s.jsx("h2",{className:"stats-block-title",children:"Jetpack Stats - Estatsticas do Site"}),s.jsx("p",{className:"stats-block-subtitle",children:"Anlise de trfego e engajamento do site"})]})]}),s.jsxs("div",{className:"jetpack-stats-grid",children:[s.jsxs("div",{className:"stat-card",children:[s.jsxs("div",{className:"stat-card-header",children:[s.jsx("div",{className:"stat-icon views-icon",children:s.jsx(ms,{})}),s.jsxs("div",{className:"stat-variation",children:[a.isPositive?s.jsx(vr,{className:"trend-up"}):s.jsx(Jn,{className:"trend-down"}),s.jsx("span",{className:a.isPositive?"positive":"negative",children:a.value})]})]}),s.jsx("div",{className:"stat-value",children:r(t.views.current)}),s.jsx("div",{className:"stat-label",children:"Visualizaes"}),s.jsxs("div",{className:"stat-previous",children:["Anterior: ",r(t.views.previous)]})]}),s.jsxs("div",{className:"stat-card",children:[s.jsxs("div",{className:"stat-card-header",children:[s.jsx("div",{className:"stat-icon visitors-icon",children:s.jsx(Hr,{})}),s.jsxs("div",{className:"stat-variation",children:[o.isPositive?s.jsx(vr,{className:"trend-up"}):s.jsx(Jn,{className:"trend-down"}),s.jsx("span",{className:o.isPositive?"positive":"negative",children:o.value})]})]}),s.jsx("div",{className:"stat-value",children:r(t.visitors.current)}),s.jsx("div",{className:"stat-label",children:"Visitantes nicos"}),s.jsxs("div",{className:"stat-previous",children:["Anterior: ",r(t.visitors.previous)]})]}),s.jsxs("div",{className:"stat-card",children:[s.jsxs("div",{className:"stat-card-header",children:[s.jsx("div",{className:"stat-icon likes-icon",children:s.jsx(JF,{})}),s.jsxs("div",{className:"stat-variation",children:[c.isPositive?s.jsx(vr,{className:"trend-up"}):s.jsx(Jn,{className:"trend-down"}),s.jsx("span",{className:c.isPositive?"positive":"negative",children:c.value})]})]}),s.jsx("div",{className:"stat-value",children:r(t.likes.current)}),s.jsx("div",{className:"stat-label",children:"Curtidas"}),s.jsxs("div",{className:"stat-previous",children:["Anterior: ",r(t.likes.previous)]})]}),s.jsxs("div",{className:"stat-card",children:[s.jsxs("div",{className:"stat-card-header",children:[s.jsx("div",{className:"stat-icon comments-icon",children:s.jsx(ux,{})}),s.jsxs("div",{className:"stat-variation",children:[d.isPositive?s.jsx(vr,{className:"trend-up"}):s.jsx(Jn,{className:"trend-down"}),s.jsx("span",{className:d.isPositive?"positive":"negative",children:d.value})]})]}),s.jsx("div",{className:"stat-value",children:r(t.comments.current)}),s.jsx("div",{className:"stat-label",children:"Comentrios"}),s.jsxs("div",{className:"stat-previous",children:["Anterior: ",r(t.comments.previous)]})]})]}),s.jsxs("div",{className:"stats-section",children:[s.jsx("h3",{className:"stats-section-title",children:"Pginas Mais Visitadas"}),s.jsx("div",{className:"top-list",children:t.topPages.map((m,h)=>s.jsxs("div",{className:"top-list-item",children:[s.jsx("div",{className:"top-list-rank",children:h+1}),s.jsxs("div",{className:"top-list-content",children:[s.jsx("div",{className:"top-list-name",children:m.page}),s.jsx("div",{className:"top-list-url",children:m.url})]}),s.jsx("div",{className:"top-list-value",children:r(m.views)})]},h))})]}),s.jsxs("div",{className:"stats-section",children:[s.jsx("h3",{className:"stats-section-title",children:"Principais Fontes de Trfego"}),s.jsx("div",{className:"top-list",children:t.topReferrers.map((m,h)=>s.jsxs("div",{className:"top-list-item",children:[s.jsx("div",{className:"top-list-rank",children:h+1}),s.jsx("div",{className:"top-list-content",children:s.jsx("div",{className:"top-list-name",children:m.referrer})}),s.jsx("div",{className:"top-list-value",children:r(m.views)})]},h))})]})]})},Lz=({data:t,loading:e=!1})=>{if(e)return s.jsx("div",{className:"instagram-stats-block",children:s.jsx("div",{className:"loading-spinner"})});const r=d=>d>=1e6?`${(d/1e6).toFixed(1)}M`:d>=1e3?`${(d/1e3).toFixed(1)}K`:d.toString(),n=d=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(d),a=d=>{const m=d>=0;return{value:`${m?"+":""}${d.toFixed(1)}%`,isPositive:m}},o=a(t.views.variation),c=a(t.followers.variation);return s.jsxs("div",{className:"instagram-stats-block",children:[s.jsxs("div",{className:"stats-block-header",children:[s.jsx("div",{className:"stats-block-header-icon instagram-icon",children:s.jsx(zs,{})}),s.jsxs("div",{className:"stats-block-header-text",children:[s.jsx("h2",{className:"stats-block-title",children:"Instagram - Estatsticas e Trfego Pago"}),s.jsx("p",{className:"stats-block-subtitle",children:"Anlise de performance e investimento em trfego pago"})]})]}),s.jsxs("div",{className:"stats-section",children:[s.jsx("h3",{className:"stats-section-title",children:"Visualizaes"}),s.jsxs("div",{className:"stat-card-large",children:[s.jsxs("div",{className:"stat-card-large-header",children:[s.jsx("div",{className:"stat-icon-large views-icon",children:s.jsx(ms,{})}),s.jsxs("div",{className:"stat-card-large-info",children:[s.jsx("div",{className:"stat-value-large",children:r(t.views.current)}),s.jsx("div",{className:"stat-label-large",children:"Visualizaes no Ms"}),s.jsxs("div",{className:"stat-variation-large",children:[o.isPositive?s.jsx(vr,{className:"trend-up"}):s.jsx(Jn,{className:"trend-down"}),s.jsxs("span",{className:o.isPositive?"positive":"negative",children:[o.value," vs. ms anterior"]})]})]})]}),s.jsx("div",{className:"stat-card-large-details",children:s.jsxs("div",{className:"stat-detail-item",children:[s.jsx("span",{className:"stat-detail-label",children:"Visualizaes de No Seguidores"}),s.jsxs("span",{className:"stat-detail-value",children:[r(t.views.nonFollowersViews)," (",t.views.nonFollowersPercentage.toFixed(1),"%)"]})]})})]})]}),s.jsxs("div",{className:"stats-section",children:[s.jsx("h3",{className:"stats-section-title",children:"Seguidores"}),s.jsxs("div",{className:"stat-card-large",children:[s.jsxs("div",{className:"stat-card-large-header",children:[s.jsx("div",{className:"stat-icon-large followers-icon",children:s.jsx(Hr,{})}),s.jsxs("div",{className:"stat-card-large-info",children:[s.jsx("div",{className:"stat-value-large",children:r(t.followers.current)}),s.jsx("div",{className:"stat-label-large",children:"Total de Seguidores"}),s.jsxs("div",{className:"stat-variation-large",children:[c.isPositive?s.jsx(vr,{className:"trend-up"}):s.jsx(Jn,{className:"trend-down"}),s.jsxs("span",{className:c.isPositive?"positive":"negative",children:[c.value," vs. ms anterior"]})]})]})]}),s.jsx("div",{className:"stat-card-large-details",children:s.jsxs("div",{className:"stat-detail-item",children:[s.jsx("span",{className:"stat-detail-label",children:"Seguidores Conquistados no Ms"}),s.jsxs("span",{className:"stat-detail-value positive",children:["+",r(t.followers.gainedThisMonth)]})]})})]})]}),s.jsxs("div",{className:"stats-section",children:[s.jsx("h3",{className:"stats-section-title",children:"Trfego Pago - Investimento e ROI"}),s.jsxs("div",{className:"paid-traffic-grid",children:[s.jsx("div",{className:"paid-traffic-card main-card",children:s.jsxs("div",{className:"paid-traffic-card-header",children:[s.jsx("div",{className:"paid-traffic-icon",children:s.jsx(Un,{})}),s.jsxs("div",{children:[s.jsx("div",{className:"paid-traffic-label",children:"Total Investido no Ms"}),s.jsx("div",{className:"paid-traffic-value",children:n(t.paidTraffic.totalInvested)})]})]})}),s.jsx("div",{className:"paid-traffic-card",children:s.jsxs("div",{className:"paid-traffic-card-header",children:[s.jsx("div",{className:"paid-traffic-icon small",children:s.jsx(ms,{})}),s.jsxs("div",{children:[s.jsx("div",{className:"paid-traffic-label",children:"Visualizaes do Trfego Pago"}),s.jsx("div",{className:"paid-traffic-value",children:r(t.paidTraffic.viewsFromPaid)}),s.jsxs("div",{className:"paid-traffic-cost",children:["Custo por visualizao: ",n(t.paidTraffic.costPerView)]})]})]})}),s.jsx("div",{className:"paid-traffic-card",children:s.jsxs("div",{className:"paid-traffic-card-header",children:[s.jsx("div",{className:"paid-traffic-icon small",children:s.jsx(Hr,{})}),s.jsxs("div",{children:[s.jsx("div",{className:"paid-traffic-label",children:"Seguidores do Trfego Pago"}),s.jsx("div",{className:"paid-traffic-value",children:r(t.paidTraffic.followersFromPaid)}),s.jsxs("div",{className:"paid-traffic-cost",children:["Custo por seguidor: ",n(t.paidTraffic.costPerFollower)]})]})]})}),s.jsx("div",{className:"paid-traffic-card",children:s.jsxs("div",{className:"paid-traffic-card-header",children:[s.jsx("div",{className:"paid-traffic-icon small",children:s.jsx(gn,{})}),s.jsxs("div",{children:[s.jsx("div",{className:"paid-traffic-label",children:"Contratos Fechados pelo Instagram"}),s.jsx("div",{className:"paid-traffic-value",children:t.paidTraffic.contractsFromInstagram}),s.jsxs("div",{className:"paid-traffic-cost",children:["Custo por contrato: ",n(t.paidTraffic.costPerContract)]})]})]})})]}),s.jsxs("div",{className:"roi-card",children:[s.jsxs("div",{className:"roi-header",children:[s.jsx("div",{className:"roi-label",children:"ROI (Retorno sobre Investimento)"}),s.jsxs("div",{className:`roi-value ${t.paidTraffic.roi>=0?"positive":"negative"}`,children:[t.paidTraffic.roi>=0?"+":"",t.paidTraffic.roi.toFixed(2),"%"]})]}),s.jsx("div",{className:"roi-description",children:t.paidTraffic.roi>=0?"O investimento est gerando retorno positivo":"O investimento est abaixo do esperado"})]})]}),s.jsxs("div",{className:"stats-section",children:[s.jsx("h3",{className:"stats-section-title",children:"Engajamento"}),s.jsxs("div",{className:"engagement-grid",children:[s.jsxs("div",{className:"engagement-card",children:[s.jsx("div",{className:"engagement-label",children:"Taxa de Engajamento"}),s.jsxs("div",{className:"engagement-value",children:[t.engagement.engagementRate.toFixed(2),"%"]})]}),s.jsxs("div",{className:"engagement-card",children:[s.jsx("div",{className:"engagement-label",children:"Curtidas"}),s.jsx("div",{className:"engagement-value",children:r(t.engagement.likes)})]}),s.jsxs("div",{className:"engagement-card",children:[s.jsx("div",{className:"engagement-label",children:"Comentrios"}),s.jsx("div",{className:"engagement-value",children:r(t.engagement.comments)})]}),s.jsxs("div",{className:"engagement-card",children:[s.jsx("div",{className:"engagement-label",children:"Salvos"}),s.jsx("div",{className:"engagement-value",children:r(t.engagement.saves)})]}),s.jsxs("div",{className:"engagement-card",children:[s.jsx("div",{className:"engagement-label",children:"Compartilhamentos"}),s.jsx("div",{className:"engagement-value",children:r(t.engagement.shares)})]})]})]}),s.jsxs("div",{className:"stats-section",children:[s.jsx("h3",{className:"stats-section-title",children:"Posts com Melhor Performance"}),s.jsx("div",{className:"top-posts-list",children:t.topPosts.map((d,m)=>s.jsxs("div",{className:"top-post-item",children:[s.jsx("div",{className:"top-post-rank",children:m+1}),s.jsxs("div",{className:"top-post-content",children:[s.jsx("div",{className:"top-post-caption",children:d.caption}),s.jsxs("div",{className:"top-post-metrics",children:[s.jsxs("span",{children:[r(d.views)," visualizaes"]}),s.jsxs("span",{children:[r(d.likes)," curtidas"]}),s.jsxs("span",{children:[r(d.comments)," comentrios"]}),s.jsxs("span",{className:"engagement-rate",children:[d.engagementRate.toFixed(1),"% engajamento"]})]})]})]},d.id))})]})]})},Im=(t,e)=>e===0?t>0?100:0:(t-e)/e*100,Gd=(t,e,r=30)=>{const n=[],a=new Date,o=t==="year"?12:r;for(let c=o-1;c>=0;c--){let d;t==="year"?d=new Date(a.getFullYear(),a.getMonth()-c,1):(d=new Date(a),d.setDate(d.getDate()-c));const m=e/o+(Math.random()*e*.2-e*.1);n.push({period:d.toISOString().split("T")[0],value:Math.max(0,Math.floor(m)),label:t==="year"?d.toLocaleDateString("pt-BR",{month:"short",year:"numeric"}):d.toLocaleDateString("pt-BR",{day:"2-digit",month:"short"})})}return n},cT={async getJetpackStats(t){await new Promise(h=>setTimeout(h,500));const e=t.period==="month",r=e?15e3:18e4,n=e?8e3:95e3,a=r+Math.floor(Math.random()*r*.2),o=r-Math.floor(Math.random()*r*.1),c=n+Math.floor(Math.random()*n*.2),d=n-Math.floor(Math.random()*n*.1),m=e?30:12;return{views:{current:a,previous:o,variation:Im(a,o),chartData:Gd(t.period,a,m)},visitors:{current:c,previous:d,variation:Im(c,d),chartData:Gd(t.period,c,m)},likes:{current:Math.floor(a*.05),previous:Math.floor(o*.04),variation:12.5},comments:{current:Math.floor(a*.01),previous:Math.floor(o*.008),variation:15},topPages:[{page:"Pgina Inicial",views:4500,url:"/"},{page:"Sobre Ns",views:3200,url:"/sobre"},{page:"Casas",views:2800,url:"/casas"},{page:"Contato",views:2100,url:"/contato"},{page:"Blog",views:1800,url:"/blog"}],topReferrers:[{referrer:"Google",views:6200},{referrer:"Instagram",views:3800},{referrer:"Facebook",views:2100},{referrer:"Direto",views:1500},{referrer:"Outros",views:1400}]}},async getInstagramStats(t){await new Promise(Q=>setTimeout(Q,500));const e=t.period==="month",r=e?25e3:3e5,n=e?5e3:4800,a=35+Math.random()*10,o=r+Math.floor(Math.random()*r*.2),c=r-Math.floor(Math.random()*r*.1),d=Math.floor(o*(a/100)),m=n+Math.floor(Math.random()*200),h=n-Math.floor(Math.random()*100),p=m-h,v=e?30:12,y=e?2500+Math.random()*500:3e4+Math.random()*5e3,w=Math.floor(y*8),N=Math.floor(y*.8),E=Math.floor(y/150),T=w>0?y/w:0,j=N>0?y/N:0,O=E>0?y/E:0,P=E*2500,z=P>0?(P-y)/y*100:0;return{views:{current:o,previous:c,variation:Im(o,c),nonFollowersPercentage:Number(a.toFixed(2)),nonFollowersViews:d,chartData:Gd(t.period,o,v)},followers:{current:m,previous:h,variation:Im(m,h),gainedThisMonth:p,chartData:Gd(t.period,m,v)},engagement:{likes:Math.floor(o*.08),comments:Math.floor(o*.015),saves:Math.floor(o*.02),shares:Math.floor(o*.005),engagementRate:3.5+Math.random()*1.5},paidTraffic:{totalInvested:Math.floor(y),viewsFromPaid:w,followersFromPaid:N,contractsFromInstagram:E,costPerView:Number(T.toFixed(2)),costPerFollower:Number(j.toFixed(2)),costPerContract:Number(O.toFixed(2)),roi:Number(z.toFixed(2)),chartData:Gd(t.period,y,v)},topPosts:[{id:"1",caption:"Casa de praia com vista incrvel...",views:5200,likes:450,comments:85,engagementRate:10.3},{id:"2",caption:"Novo lanamento disponvel!",views:4800,likes:420,comments:72,engagementRate:10.2},{id:"3",caption:"Dicas de decorao...",views:4100,likes:380,comments:65,engagementRate:10.9},{id:"4",caption:"Depoimento de cliente satisfeito",views:3900,likes:350,comments:58,engagementRate:10.5},{id:"5",caption:"Tour virtual disponvel",views:3600,likes:320,comments:52,engagementRate:10.3}]}}},Vz=()=>{const{user:t}=Ql(),[e,r]=B.useState(!0),[n,a]=B.useState({period:"month",startDate:void 0,endDate:void 0}),[o,c]=B.useState(null),[d,m]=B.useState(null),h=async()=>{try{r(!0);const[N,E]=await Promise.all([cT.getJetpackStats(n),cT.getInstagramStats(n)]);c(N),m(E)}catch(N){console.error("Erro ao carregar dados do dashboard:",N)}finally{r(!1)}};B.useEffect(()=>{h()},[n]);const p=N=>{a(N)},v=N=>{a(N)},y=async N=>{try{console.log(`Exportando dados em formato ${N}`,{filters:n,jetpackStats:o,instagramStats:d})}catch(E){console.error("Erro ao exportar dados:",E)}},w=()=>{h()};return s.jsxs("div",{className:"dashboard-statistics",children:[s.jsx("div",{className:"statistics-dashboard-header",children:s.jsxs("div",{className:"statistics-dashboard-header-content",children:[s.jsxs("div",{className:"statistics-dashboard-header-left",children:[s.jsx("div",{className:"statistics-dashboard-header-icon",children:s.jsx(zs,{})}),s.jsxs("div",{className:"statistics-dashboard-header-text",children:[s.jsx("h1",{className:"statistics-dashboard-header-title",children:"Sprint Dashboard - Estatsticas"}),s.jsx("p",{className:"statistics-dashboard-header-subtitle",children:"Integrao com Jetpack Stats e Instagram - Anlise de performance e trfego pago"})]})]}),s.jsxs("div",{className:"statistics-dashboard-header-actions",children:[s.jsxs("div",{className:"statistics-dashboard-header-badge",children:[s.jsx(pn,{className:"statistics-dashboard-header-badge-icon"}),s.jsxs("span",{children:["Perodo:"," ",n.period==="month"?"Mensal":n.period==="year"?"Anual":"Personalizado"]})]}),s.jsxs("button",{className:"action-btn refresh-btn",onClick:w,disabled:e,children:[s.jsx(Bo,{size:16,className:e?"spinning":""}),"Atualizar"]}),s.jsxs("div",{className:"export-dropdown",children:[s.jsxs("button",{className:"action-btn export-btn",children:[s.jsx(v1,{size:16}),"Exportar"]}),s.jsxs("div",{className:"dropdown-menu",children:[s.jsx("button",{onClick:()=>y("excel"),children:"Exportar para Excel"}),s.jsx("button",{onClick:()=>y("pdf"),children:"Exportar para PDF"})]})]}),s.jsxs("button",{className:"action-btn settings-btn",children:[s.jsx(No,{size:16}),"Configuraes"]})]})]})}),s.jsx("div",{className:"dashboard-filters-wrapper",children:s.jsx(Fz,{filters:n,onFiltersChange:p,onClearFilters:()=>v({period:"month",startDate:void 0,endDate:void 0}),loading:e})}),s.jsx("div",{className:"dashboard-content",children:e?s.jsxs("div",{className:"dashboard-loading",children:[s.jsx("div",{className:"loading-spinner"}),s.jsx("p",{children:"Carregando dados do dashboard..."})]}):s.jsxs(s.Fragment,{children:[o&&s.jsx("div",{className:"dashboard-section",children:s.jsx(Pz,{data:o,loading:!1})}),d&&s.jsx("div",{className:"dashboard-section",children:s.jsx(Lz,{data:d,loading:!1})})]})}),s.jsx("div",{className:"dashboard-footer",children:s.jsxs("div",{className:"footer-content",children:[s.jsxs("div",{className:"footer-info",children:[s.jsxs("span",{className:"last-update",children:["ltima atualizao: ",new Date().toLocaleString("pt-BR")]}),s.jsxs("span",{className:"user-info",children:["Logado como: ",t?.email||"Usurio"]})]}),s.jsxs("div",{className:"footer-stats",children:[s.jsxs("span",{className:"stat-item",children:[s.jsx("strong",{children:"Perodo:"})," ",n.period==="month"?"Mensal":n.period==="year"?"Anual":"Personalizado"]}),s.jsxs("span",{className:"stat-item",children:[s.jsx("strong",{children:"Fonte:"})," Jetpack Stats + Instagram API (Mock)"]})]})]})})]})},Bz=()=>s.jsx(pF,{children:s.jsxs(GM,{children:[s.jsx(Vr,{path:nr.home,element:s.jsx($w,{})}),s.jsx(Vr,{path:nr.login,element:s.jsx($w,{})}),s.jsx(Vr,{path:nr.register,element:s.jsx(LF,{})}),s.jsx(Vr,{path:nr.profile,element:s.jsx(Pn,{children:s.jsx(Ln,{children:s.jsx(pP,{})})})}),s.jsx(Vr,{path:nr.settings,element:s.jsx(Pn,{children:s.jsx(Ln,{children:s.jsx(gP,{})})})}),s.jsx(Vr,{path:nr.clients,element:s.jsx(Pn,{children:s.jsx(Ln,{children:s.jsx(EP,{})})})}),s.jsx(Vr,{path:nr.owners,element:s.jsx(Pn,{children:s.jsx(Ln,{children:s.jsx(SP,{})})})}),s.jsx(Vr,{path:nr.suppliers,element:s.jsx(Pn,{children:s.jsx(Ln,{children:s.jsx(DP,{})})})}),s.jsx(Vr,{path:nr.employees,element:s.jsx(Pn,{children:s.jsx(Ln,{children:s.jsx(FP,{})})})}),s.jsx(Vr,{path:nr.houses,element:s.jsx(Pn,{children:s.jsx(Ln,{children:s.jsx(UP,{})})})}),s.jsx(Vr,{path:nr.sales,element:s.jsx(Pn,{children:s.jsx(Ln,{children:s.jsx($P,{})})})}),s.jsx(Vr,{path:nr.financial,element:s.jsx(Pn,{children:s.jsx(Ln,{children:s.jsx(WU,{})})})}),s.jsx(Vr,{path:nr.notifications,element:s.jsx(Pn,{children:s.jsx(Ln,{children:s.jsx(YU,{})})})}),s.jsx(Vr,{path:nr.nfe,element:s.jsx(Pn,{children:s.jsx(Ln,{children:s.jsx(JU,{})})})}),s.jsx(Vr,{path:nr.dashboardConsolidacao,element:s.jsx(Pn,{children:s.jsx(Ln,{children:s.jsx(iz,{})})})}),s.jsx(Vr,{path:nr.dashboardProcessos,element:s.jsx(Pn,{children:s.jsx(Ln,{children:s.jsx(vz,{})})})}),s.jsx(Vr,{path:nr.dashboardGoals,element:s.jsx(Pn,{children:s.jsx(Ln,{children:s.jsx(Mz,{})})})}),s.jsx(Vr,{path:nr.dashboardEstatisticas,element:s.jsx(Pn,{children:s.jsx(Ln,{children:s.jsx(Vz,{})})})})]})});function Uz(t){return $e({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(t)}function zz(t){return $e({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(t)}function uT(t){return $e({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"},child:[]}]})(t)}function dT(t){return $e({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"},child:[]}]})(t)}const Hz=({id:t,type:e,title:r,message:n,duration:a=3e3,onClose:o})=>{B.useEffect(()=>{const d=setTimeout(()=>{o(t)},a);return()=>clearTimeout(d)});const c=()=>{switch(e){case"success":return s.jsx(Uz,{className:"toast-icon success"});case"error":return s.jsx(dT,{className:"toast-icon error"});case"warning":return s.jsx(zz,{className:"toast-icon warning"});case"info":return s.jsx(uT,{className:"toast-icon info"});default:return s.jsx(uT,{className:"toast-icon info"})}};return s.jsx("div",{className:`toast ${e}`,children:s.jsxs("div",{className:"toast-content",children:[c(),s.jsxs("div",{className:"toast-text",children:[s.jsx("h3",{className:"toast-title",children:r}),s.jsx("p",{className:"toast-message",children:n})]}),s.jsx("button",{className:"toast-close",onClick:()=>o(t),"aria-label":"Close toast",children:s.jsx(dT,{className:"toast-close-icon"})})]})})},qz=({children:t})=>{const[e,r]=B.useState([]),n=B.useCallback(p=>{const v=Math.random().toString(36).substr(2,9),y={...p,id:v};r(w=>[...w,y])},[]),a=B.useCallback(p=>{r(v=>v.filter(y=>y.id!==p))},[]),o=B.useCallback((p,v,y=5e3)=>{n({type:"success",title:p,message:v,duration:y})},[n]),c=B.useCallback((p,v,y=7e3)=>{n({type:"error",title:p,message:v,duration:y})},[n]),d=B.useCallback((p,v,y=6e3)=>{n({type:"warning",title:p,message:v,duration:y})},[n]),m=B.useCallback((p,v,y=5e3)=>{n({type:"info",title:p,message:v,duration:y})},[n]),h={toasts:e,showToast:n,hideToast:a,showSuccess:o,showError:c,showWarning:d,showInfo:m};return s.jsxs(ij.Provider,{value:h,children:[t,s.jsx("div",{className:"toast-container",children:e.map(p=>s.jsx(Hz,{...p,onClose:a},p.id))})]})};function Gz(){return s.jsx(qz,{children:s.jsx(W6,{children:s.jsx(Bz,{})})})}MR.createRoot(document.getElementById("root")).render(s.jsx(B.StrictMode,{children:s.jsx(Gz,{})}));
