(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();function iR(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Xg={exports:{}},Ih={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G2;function oR(){if(G2)return Ih;G2=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function r(n,a,o){var c=null;if(o!==void 0&&(c=""+o),a.key!==void 0&&(c=""+a.key),"key"in a){o={};for(var h in a)h!=="key"&&(o[h]=a[h])}else o=a;return a=o.ref,{$$typeof:t,type:n,key:c,ref:a!==void 0?a:null,props:o}}return Ih.Fragment=e,Ih.jsx=r,Ih.jsxs=r,Ih}var q2;function lR(){return q2||(q2=1,Xg.exports=oR()),Xg.exports}var i=lR(),Qg={exports:{}},dt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $2;function cR(){if($2)return dt;$2=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),x=Symbol.iterator;function y(Z){return Z===null||typeof Z!="object"?null:(Z=x&&Z[x]||Z["@@iterator"],typeof Z=="function"?Z:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,T={};function b(Z,_e,Y){this.props=Z,this.context=_e,this.refs=T,this.updater=Y||E}b.prototype.isReactComponent={},b.prototype.setState=function(Z,_e){if(typeof Z!="object"&&typeof Z!="function"&&Z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Z,_e,"setState")},b.prototype.forceUpdate=function(Z){this.updater.enqueueForceUpdate(this,Z,"forceUpdate")};function A(){}A.prototype=b.prototype;function M(Z,_e,Y){this.props=Z,this.context=_e,this.refs=T,this.updater=Y||E}var V=M.prototype=new A;V.constructor=M,w(V,b.prototype),V.isPureReactComponent=!0;var H=Array.isArray,re={H:null,A:null,T:null,S:null,V:null},q=Object.prototype.hasOwnProperty;function j(Z,_e,Y,ee,J,te){return Y=te.ref,{$$typeof:t,type:Z,key:_e,ref:Y!==void 0?Y:null,props:te}}function D(Z,_e){return j(Z.type,_e,void 0,void 0,void 0,Z.props)}function S(Z){return typeof Z=="object"&&Z!==null&&Z.$$typeof===t}function P(Z){var _e={"=":"=0",":":"=2"};return"$"+Z.replace(/[=:]/g,function(Y){return _e[Y]})}var O=/\/+/g;function C(Z,_e){return typeof Z=="object"&&Z!==null&&Z.key!=null?P(""+Z.key):_e.toString(36)}function k(){}function Ce(Z){switch(Z.status){case"fulfilled":return Z.value;case"rejected":throw Z.reason;default:switch(typeof Z.status=="string"?Z.then(k,k):(Z.status="pending",Z.then(function(_e){Z.status==="pending"&&(Z.status="fulfilled",Z.value=_e)},function(_e){Z.status==="pending"&&(Z.status="rejected",Z.reason=_e)})),Z.status){case"fulfilled":return Z.value;case"rejected":throw Z.reason}}throw Z}function ze(Z,_e,Y,ee,J){var te=typeof Z;(te==="undefined"||te==="boolean")&&(Z=null);var he=!1;if(Z===null)he=!0;else switch(te){case"bigint":case"string":case"number":he=!0;break;case"object":switch(Z.$$typeof){case t:case e:he=!0;break;case p:return he=Z._init,ze(he(Z._payload),_e,Y,ee,J)}}if(he)return J=J(Z),he=ee===""?"."+C(Z,0):ee,H(J)?(Y="",he!=null&&(Y=he.replace(O,"$&/")+"/"),ze(J,_e,Y,"",function(He){return He})):J!=null&&(S(J)&&(J=D(J,Y+(J.key==null||Z&&Z.key===J.key?"":(""+J.key).replace(O,"$&/")+"/")+he)),_e.push(J)),1;he=0;var Le=ee===""?".":ee+":";if(H(Z))for(var ke=0;ke<Z.length;ke++)ee=Z[ke],te=Le+C(ee,ke),he+=ze(ee,_e,Y,te,J);else if(ke=y(Z),typeof ke=="function")for(Z=ke.call(Z),ke=0;!(ee=Z.next()).done;)ee=ee.value,te=Le+C(ee,ke++),he+=ze(ee,_e,Y,te,J);else if(te==="object"){if(typeof Z.then=="function")return ze(Ce(Z),_e,Y,ee,J);throw _e=String(Z),Error("Objects are not valid as a React child (found: "+(_e==="[object Object]"?"object with keys {"+Object.keys(Z).join(", ")+"}":_e)+"). If you meant to render a collection of children, use an array instead.")}return he}function ge(Z,_e,Y){if(Z==null)return Z;var ee=[],J=0;return ze(Z,ee,"","",function(te){return _e.call(Y,te,J++)}),ee}function De(Z){if(Z._status===-1){var _e=Z._result;_e=_e(),_e.then(function(Y){(Z._status===0||Z._status===-1)&&(Z._status=1,Z._result=Y)},function(Y){(Z._status===0||Z._status===-1)&&(Z._status=2,Z._result=Y)}),Z._status===-1&&(Z._status=0,Z._result=_e)}if(Z._status===1)return Z._result.default;throw Z._result}var Fe=typeof reportError=="function"?reportError:function(Z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var _e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Z=="object"&&Z!==null&&typeof Z.message=="string"?String(Z.message):String(Z),error:Z});if(!window.dispatchEvent(_e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Z);return}console.error(Z)};function Xe(){}return dt.Children={map:ge,forEach:function(Z,_e,Y){ge(Z,function(){_e.apply(this,arguments)},Y)},count:function(Z){var _e=0;return ge(Z,function(){_e++}),_e},toArray:function(Z){return ge(Z,function(_e){return _e})||[]},only:function(Z){if(!S(Z))throw Error("React.Children.only expected to receive a single React element child.");return Z}},dt.Component=b,dt.Fragment=r,dt.Profiler=a,dt.PureComponent=M,dt.StrictMode=n,dt.Suspense=m,dt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=re,dt.__COMPILER_RUNTIME={__proto__:null,c:function(Z){return re.H.useMemoCache(Z)}},dt.cache=function(Z){return function(){return Z.apply(null,arguments)}},dt.cloneElement=function(Z,_e,Y){if(Z==null)throw Error("The argument must be a React element, but you passed "+Z+".");var ee=w({},Z.props),J=Z.key,te=void 0;if(_e!=null)for(he in _e.ref!==void 0&&(te=void 0),_e.key!==void 0&&(J=""+_e.key),_e)!q.call(_e,he)||he==="key"||he==="__self"||he==="__source"||he==="ref"&&_e.ref===void 0||(ee[he]=_e[he]);var he=arguments.length-2;if(he===1)ee.children=Y;else if(1<he){for(var Le=Array(he),ke=0;ke<he;ke++)Le[ke]=arguments[ke+2];ee.children=Le}return j(Z.type,J,void 0,void 0,te,ee)},dt.createContext=function(Z){return Z={$$typeof:c,_currentValue:Z,_currentValue2:Z,_threadCount:0,Provider:null,Consumer:null},Z.Provider=Z,Z.Consumer={$$typeof:o,_context:Z},Z},dt.createElement=function(Z,_e,Y){var ee,J={},te=null;if(_e!=null)for(ee in _e.key!==void 0&&(te=""+_e.key),_e)q.call(_e,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(J[ee]=_e[ee]);var he=arguments.length-2;if(he===1)J.children=Y;else if(1<he){for(var Le=Array(he),ke=0;ke<he;ke++)Le[ke]=arguments[ke+2];J.children=Le}if(Z&&Z.defaultProps)for(ee in he=Z.defaultProps,he)J[ee]===void 0&&(J[ee]=he[ee]);return j(Z,te,void 0,void 0,null,J)},dt.createRef=function(){return{current:null}},dt.forwardRef=function(Z){return{$$typeof:h,render:Z}},dt.isValidElement=S,dt.lazy=function(Z){return{$$typeof:p,_payload:{_status:-1,_result:Z},_init:De}},dt.memo=function(Z,_e){return{$$typeof:d,type:Z,compare:_e===void 0?null:_e}},dt.startTransition=function(Z){var _e=re.T,Y={};re.T=Y;try{var ee=Z(),J=re.S;J!==null&&J(Y,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(Xe,Fe)}catch(te){Fe(te)}finally{re.T=_e}},dt.unstable_useCacheRefresh=function(){return re.H.useCacheRefresh()},dt.use=function(Z){return re.H.use(Z)},dt.useActionState=function(Z,_e,Y){return re.H.useActionState(Z,_e,Y)},dt.useCallback=function(Z,_e){return re.H.useCallback(Z,_e)},dt.useContext=function(Z){return re.H.useContext(Z)},dt.useDebugValue=function(){},dt.useDeferredValue=function(Z,_e){return re.H.useDeferredValue(Z,_e)},dt.useEffect=function(Z,_e,Y){var ee=re.H;if(typeof Y=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ee.useEffect(Z,_e)},dt.useId=function(){return re.H.useId()},dt.useImperativeHandle=function(Z,_e,Y){return re.H.useImperativeHandle(Z,_e,Y)},dt.useInsertionEffect=function(Z,_e){return re.H.useInsertionEffect(Z,_e)},dt.useLayoutEffect=function(Z,_e){return re.H.useLayoutEffect(Z,_e)},dt.useMemo=function(Z,_e){return re.H.useMemo(Z,_e)},dt.useOptimistic=function(Z,_e){return re.H.useOptimistic(Z,_e)},dt.useReducer=function(Z,_e,Y){return re.H.useReducer(Z,_e,Y)},dt.useRef=function(Z){return re.H.useRef(Z)},dt.useState=function(Z){return re.H.useState(Z)},dt.useSyncExternalStore=function(Z,_e,Y){return re.H.useSyncExternalStore(Z,_e,Y)},dt.useTransition=function(){return re.H.useTransition()},dt.version="19.1.1",dt}var W2;function lx(){return W2||(W2=1,Qg.exports=cR()),Qg.exports}var B=lx();const wl=iR(B);var Jg={exports:{}},kh={},Zg={exports:{}},ev={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y2;function uR(){return Y2||(Y2=1,(function(t){function e(ge,De){var Fe=ge.length;ge.push(De);e:for(;0<Fe;){var Xe=Fe-1>>>1,Z=ge[Xe];if(0<a(Z,De))ge[Xe]=De,ge[Fe]=Z,Fe=Xe;else break e}}function r(ge){return ge.length===0?null:ge[0]}function n(ge){if(ge.length===0)return null;var De=ge[0],Fe=ge.pop();if(Fe!==De){ge[0]=Fe;e:for(var Xe=0,Z=ge.length,_e=Z>>>1;Xe<_e;){var Y=2*(Xe+1)-1,ee=ge[Y],J=Y+1,te=ge[J];if(0>a(ee,Fe))J<Z&&0>a(te,ee)?(ge[Xe]=te,ge[J]=Fe,Xe=J):(ge[Xe]=ee,ge[Y]=Fe,Xe=Y);else if(J<Z&&0>a(te,Fe))ge[Xe]=te,ge[J]=Fe,Xe=J;else break e}}return De}function a(ge,De){var Fe=ge.sortIndex-De.sortIndex;return Fe!==0?Fe:ge.id-De.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var c=Date,h=c.now();t.unstable_now=function(){return c.now()-h}}var m=[],d=[],p=1,x=null,y=3,E=!1,w=!1,T=!1,b=!1,A=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;function H(ge){for(var De=r(d);De!==null;){if(De.callback===null)n(d);else if(De.startTime<=ge)n(d),De.sortIndex=De.expirationTime,e(m,De);else break;De=r(d)}}function re(ge){if(T=!1,H(ge),!w)if(r(m)!==null)w=!0,q||(q=!0,C());else{var De=r(d);De!==null&&ze(re,De.startTime-ge)}}var q=!1,j=-1,D=5,S=-1;function P(){return b?!0:!(t.unstable_now()-S<D)}function O(){if(b=!1,q){var ge=t.unstable_now();S=ge;var De=!0;try{e:{w=!1,T&&(T=!1,M(j),j=-1),E=!0;var Fe=y;try{t:{for(H(ge),x=r(m);x!==null&&!(x.expirationTime>ge&&P());){var Xe=x.callback;if(typeof Xe=="function"){x.callback=null,y=x.priorityLevel;var Z=Xe(x.expirationTime<=ge);if(ge=t.unstable_now(),typeof Z=="function"){x.callback=Z,H(ge),De=!0;break t}x===r(m)&&n(m),H(ge)}else n(m);x=r(m)}if(x!==null)De=!0;else{var _e=r(d);_e!==null&&ze(re,_e.startTime-ge),De=!1}}break e}finally{x=null,y=Fe,E=!1}De=void 0}}finally{De?C():q=!1}}}var C;if(typeof V=="function")C=function(){V(O)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,Ce=k.port2;k.port1.onmessage=O,C=function(){Ce.postMessage(null)}}else C=function(){A(O,0)};function ze(ge,De){j=A(function(){ge(t.unstable_now())},De)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ge){ge.callback=null},t.unstable_forceFrameRate=function(ge){0>ge||125<ge?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<ge?Math.floor(1e3/ge):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_next=function(ge){switch(y){case 1:case 2:case 3:var De=3;break;default:De=y}var Fe=y;y=De;try{return ge()}finally{y=Fe}},t.unstable_requestPaint=function(){b=!0},t.unstable_runWithPriority=function(ge,De){switch(ge){case 1:case 2:case 3:case 4:case 5:break;default:ge=3}var Fe=y;y=ge;try{return De()}finally{y=Fe}},t.unstable_scheduleCallback=function(ge,De,Fe){var Xe=t.unstable_now();switch(typeof Fe=="object"&&Fe!==null?(Fe=Fe.delay,Fe=typeof Fe=="number"&&0<Fe?Xe+Fe:Xe):Fe=Xe,ge){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=Fe+Z,ge={id:p++,callback:De,priorityLevel:ge,startTime:Fe,expirationTime:Z,sortIndex:-1},Fe>Xe?(ge.sortIndex=Fe,e(d,ge),r(m)===null&&ge===r(d)&&(T?(M(j),j=-1):T=!0,ze(re,Fe-Xe))):(ge.sortIndex=Z,e(m,ge),w||E||(w=!0,q||(q=!0,C()))),ge},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(ge){var De=y;return function(){var Fe=y;y=De;try{return ge.apply(this,arguments)}finally{y=Fe}}}})(ev)),ev}var K2;function hR(){return K2||(K2=1,Zg.exports=uR()),Zg.exports}var tv={exports:{}},_n={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X2;function dR(){if(X2)return _n;X2=1;var t=lx();function e(m){var d="https://react.dev/errors/"+m;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+m+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(e(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(m,d,p){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:x==null?null:""+x,children:m,containerInfo:d,implementation:p}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(m,d){if(m==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return _n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,_n.createPortal=function(m,d){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return o(m,d,null,p)},_n.flushSync=function(m){var d=c.T,p=n.p;try{if(c.T=null,n.p=2,m)return m()}finally{c.T=d,n.p=p,n.d.f()}},_n.preconnect=function(m,d){typeof m=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,n.d.C(m,d))},_n.prefetchDNS=function(m){typeof m=="string"&&n.d.D(m)},_n.preinit=function(m,d){if(typeof m=="string"&&d&&typeof d.as=="string"){var p=d.as,x=h(p,d.crossOrigin),y=typeof d.integrity=="string"?d.integrity:void 0,E=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;p==="style"?n.d.S(m,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:x,integrity:y,fetchPriority:E}):p==="script"&&n.d.X(m,{crossOrigin:x,integrity:y,fetchPriority:E,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},_n.preinitModule=function(m,d){if(typeof m=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var p=h(d.as,d.crossOrigin);n.d.M(m,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&n.d.M(m)},_n.preload=function(m,d){if(typeof m=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var p=d.as,x=h(p,d.crossOrigin);n.d.L(m,p,{crossOrigin:x,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},_n.preloadModule=function(m,d){if(typeof m=="string")if(d){var p=h(d.as,d.crossOrigin);n.d.m(m,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else n.d.m(m)},_n.requestFormReset=function(m){n.d.r(m)},_n.unstable_batchedUpdates=function(m,d){return m(d)},_n.useFormState=function(m,d,p){return c.H.useFormState(m,d,p)},_n.useFormStatus=function(){return c.H.useHostTransitionStatus()},_n.version="19.1.1",_n}var Q2;function fR(){if(Q2)return tv.exports;Q2=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),tv.exports=dR(),tv.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J2;function mR(){if(J2)return kh;J2=1;var t=hR(),e=lx(),r=fR();function n(s){var l="https://react.dev/errors/"+s;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)l+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var l=s,u=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(u=l.return),s=l.return;while(s)}return l.tag===3?u:null}function c(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function h(s){if(o(s)!==s)throw Error(n(188))}function m(s){var l=s.alternate;if(!l){if(l=o(s),l===null)throw Error(n(188));return l!==s?null:s}for(var u=s,f=l;;){var v=u.return;if(v===null)break;var _=v.alternate;if(_===null){if(f=v.return,f!==null){u=f;continue}break}if(v.child===_.child){for(_=v.child;_;){if(_===u)return h(v),s;if(_===f)return h(v),l;_=_.sibling}throw Error(n(188))}if(u.return!==f.return)u=v,f=_;else{for(var I=!1,L=v.child;L;){if(L===u){I=!0,u=v,f=_;break}if(L===f){I=!0,f=v,u=_;break}L=L.sibling}if(!I){for(L=_.child;L;){if(L===u){I=!0,u=_,f=v;break}if(L===f){I=!0,f=_,u=v;break}L=L.sibling}if(!I)throw Error(n(189))}}if(u.alternate!==f)throw Error(n(190))}if(u.tag!==3)throw Error(n(188));return u.stateNode.current===u?s:l}function d(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s;for(s=s.child;s!==null;){if(l=d(s),l!==null)return l;s=s.sibling}return null}var p=Object.assign,x=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),M=Symbol.for("react.consumer"),V=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),re=Symbol.for("react.suspense"),q=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function C(s){return s===null||typeof s!="object"?null:(s=O&&s[O]||s["@@iterator"],typeof s=="function"?s:null)}var k=Symbol.for("react.client.reference");function Ce(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===k?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case w:return"Fragment";case b:return"Profiler";case T:return"StrictMode";case re:return"Suspense";case q:return"SuspenseList";case S:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case E:return"Portal";case V:return(s.displayName||"Context")+".Provider";case M:return(s._context.displayName||"Context")+".Consumer";case H:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case j:return l=s.displayName||null,l!==null?l:Ce(s.type)||"Memo";case D:l=s._payload,s=s._init;try{return Ce(s(l))}catch{}}return null}var ze=Array.isArray,ge=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,De=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Fe={pending:!1,data:null,method:null,action:null},Xe=[],Z=-1;function _e(s){return{current:s}}function Y(s){0>Z||(s.current=Xe[Z],Xe[Z]=null,Z--)}function ee(s,l){Z++,Xe[Z]=s.current,s.current=l}var J=_e(null),te=_e(null),he=_e(null),Le=_e(null);function ke(s,l){switch(ee(he,l),ee(te,s),ee(J,null),l.nodeType){case 9:case 11:s=(s=l.documentElement)&&(s=s.namespaceURI)?x2(s):0;break;default:if(s=l.tagName,l=l.namespaceURI)l=x2(l),s=y2(l,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}Y(J),ee(J,s)}function He(){Y(J),Y(te),Y(he)}function ae(s){s.memoizedState!==null&&ee(Le,s);var l=J.current,u=y2(l,s.type);l!==u&&(ee(te,s),ee(J,u))}function Ve(s){te.current===s&&(Y(J),Y(te)),Le.current===s&&(Y(Le),Ah._currentValue=Fe)}var Ze=Object.prototype.hasOwnProperty,Ht=t.unstable_scheduleCallback,gt=t.unstable_cancelCallback,ta=t.unstable_shouldYield,Gt=t.unstable_requestPaint,Be=t.unstable_now,en=t.unstable_getCurrentPriorityLevel,Ot=t.unstable_ImmediatePriority,Jt=t.unstable_UserBlockingPriority,vn=t.unstable_NormalPriority,Xl=t.unstable_LowPriority,Ls=t.unstable_IdlePriority,Un=t.log,ya=t.unstable_setDisableYieldValue,_a=null,Nr=null;function br(s){if(typeof Un=="function"&&ya(s),Nr&&typeof Nr.setStrictMode=="function")try{Nr.setStrictMode(_a,s)}catch{}}var tn=Math.clz32?Math.clz32:Uo,Ql=Math.log,Bo=Math.LN2;function Uo(s){return s>>>=0,s===0?32:31-(Ql(s)/Bo|0)|0}var ra=256,Va=4194304;function zn(s){var l=s&42;if(l!==0)return l;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Hn(s,l,u){var f=s.pendingLanes;if(f===0)return 0;var v=0,_=s.suspendedLanes,I=s.pingedLanes;s=s.warmLanes;var L=f&134217727;return L!==0?(f=L&~_,f!==0?v=zn(f):(I&=L,I!==0?v=zn(I):u||(u=L&~s,u!==0&&(v=zn(u))))):(L=f&~_,L!==0?v=zn(L):I!==0?v=zn(I):u||(u=f&~s,u!==0&&(v=zn(u)))),v===0?0:l!==0&&l!==v&&(l&_)===0&&(_=v&-v,u=l&-l,_>=u||_===32&&(u&4194048)!==0)?l:v}function ds(s,l){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&l)===0}function Vs(s,l){switch(s){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ai(){var s=ra;return ra<<=1,(ra&4194048)===0&&(ra=256),s}function Ba(){var s=Va;return Va<<=1,(Va&62914560)===0&&(Va=4194304),s}function Ci(s){for(var l=[],u=0;31>u;u++)l.push(s);return l}function or(s,l){s.pendingLanes|=l,l!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Bs(s,l,u,f,v,_){var I=s.pendingLanes;s.pendingLanes=u,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=u,s.entangledLanes&=u,s.errorRecoveryDisabledLanes&=u,s.shellSuspendCounter=0;var L=s.entanglements,Q=s.expirationTimes,ue=s.hiddenUpdates;for(u=I&~u;0<u;){var Ee=31-tn(u),Ne=1<<Ee;L[Ee]=0,Q[Ee]=-1;var me=ue[Ee];if(me!==null)for(ue[Ee]=null,Ee=0;Ee<me.length;Ee++){var pe=me[Ee];pe!==null&&(pe.lane&=-536870913)}u&=~Ne}f!==0&&fs(s,f,0),_!==0&&v===0&&s.tag!==0&&(s.suspendedLanes|=_&~(I&~l))}function fs(s,l,u){s.pendingLanes|=l,s.suspendedLanes&=~l;var f=31-tn(l);s.entangledLanes|=l,s.entanglements[f]=s.entanglements[f]|1073741824|u&4194090}function ms(s,l){var u=s.entangledLanes|=l;for(s=s.entanglements;u;){var f=31-tn(u),v=1<<f;v&l|s[f]&l&&(s[f]|=l),u&=~v}}function zo(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Ho(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Ua(){var s=De.p;return s!==0?s:(s=window.event,s===void 0?32:L2(s.type))}function Du(s,l){var u=De.p;try{return De.p=s,l()}finally{De.p=u}}var Ea=Math.random().toString(36).slice(2),lr="__reactFiber$"+Ea,xr="__reactProps$"+Ea,za="__reactContainer$"+Ea,Us="__reactEvents$"+Ea,zs="__reactListeners$"+Ea,F="__reactHandles$"+Ea,W="__reactResources$"+Ea,z="__reactMarker$"+Ea;function G(s){delete s[lr],delete s[xr],delete s[Us],delete s[zs],delete s[F]}function K(s){var l=s[lr];if(l)return l;for(var u=s.parentNode;u;){if(l=u[za]||u[lr]){if(u=l.alternate,l.child!==null||u!==null&&u.child!==null)for(s=w2(s);s!==null;){if(u=s[lr])return u;s=w2(s)}return l}s=u,u=s.parentNode}return null}function X(s){if(s=s[lr]||s[za]){var l=s.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return s}return null}function ce(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s.stateNode;throw Error(n(33))}function xe(s){var l=s[W];return l||(l=s[W]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function ie(s){s[z]=!0}var de=new Set,fe={};function Ae(s,l){Ie(s,l),Ie(s+"Capture",l)}function Ie(s,l){for(fe[s]=l,s=0;s<l.length;s++)de.add(l[s])}var Ge=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),je={},Ue={};function ot(s){return Ze.call(Ue,s)?!0:Ze.call(je,s)?!1:Ge.test(s)?Ue[s]=!0:(je[s]=!0,!1)}function jt(s,l,u){if(ot(l))if(u===null)s.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":s.removeAttribute(l);return;case"boolean":var f=l.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){s.removeAttribute(l);return}}s.setAttribute(l,""+u)}}function Rt(s,l,u){if(u===null)s.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttribute(l,""+u)}}function Mt(s,l,u,f){if(f===null)s.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(u);return}s.setAttributeNS(l,u,""+f)}}var na,Ta;function Cn(s){if(na===void 0)try{throw Error()}catch(u){var l=u.stack.trim().match(/\n( *(at )?)/);na=l&&l[1]||"",Ta=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+na+s+Ta}var Gn=!1;function ps(s,l){if(!s||Gn)return"";Gn=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(l){var Ne=function(){throw Error()};if(Object.defineProperty(Ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ne,[])}catch(pe){var me=pe}Reflect.construct(s,[],Ne)}else{try{Ne.call()}catch(pe){me=pe}s.call(Ne.prototype)}}else{try{throw Error()}catch(pe){me=pe}(Ne=s())&&typeof Ne.catch=="function"&&Ne.catch(function(){})}}catch(pe){if(pe&&me&&typeof pe.stack=="string")return[pe.stack,me.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=f.DetermineComponentFrameRoot(),I=_[0],L=_[1];if(I&&L){var Q=I.split(`
`),ue=L.split(`
`);for(v=f=0;f<Q.length&&!Q[f].includes("DetermineComponentFrameRoot");)f++;for(;v<ue.length&&!ue[v].includes("DetermineComponentFrameRoot");)v++;if(f===Q.length||v===ue.length)for(f=Q.length-1,v=ue.length-1;1<=f&&0<=v&&Q[f]!==ue[v];)v--;for(;1<=f&&0<=v;f--,v--)if(Q[f]!==ue[v]){if(f!==1||v!==1)do if(f--,v--,0>v||Q[f]!==ue[v]){var Ee=`
`+Q[f].replace(" at new "," at ");return s.displayName&&Ee.includes("<anonymous>")&&(Ee=Ee.replace("<anonymous>",s.displayName)),Ee}while(1<=f&&0<=v);break}}}finally{Gn=!1,Error.prepareStackTrace=u}return(u=s?s.displayName||s.name:"")?Cn(u):""}function aa(s){switch(s.tag){case 26:case 27:case 5:return Cn(s.type);case 16:return Cn("Lazy");case 13:return Cn("Suspense");case 19:return Cn("SuspenseList");case 0:case 15:return ps(s.type,!1);case 11:return ps(s.type.render,!1);case 1:return ps(s.type,!0);case 31:return Cn("Activity");default:return""}}function Ha(s){try{var l="";do l+=aa(s),s=s.return;while(s);return l}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}function cr(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function ji(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Go(s){var l=ji(s)?"checked":"value",u=Object.getOwnPropertyDescriptor(s.constructor.prototype,l),f=""+s[l];if(!s.hasOwnProperty(l)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var v=u.get,_=u.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return v.call(this)},set:function(I){f=""+I,_.call(this,I)}}),Object.defineProperty(s,l,{enumerable:u.enumerable}),{getValue:function(){return f},setValue:function(I){f=""+I},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function Ri(s){s._valueTracker||(s._valueTracker=Go(s))}function qt(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var u=l.getValue(),f="";return s&&(f=ji(s)?s.checked?"true":"false":s.value),s=f,s!==u?(l.setValue(s),!0):!1}function Hs(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var qo=/[\n"\\]/g;function Hr(s){return s.replace(qo,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Iu(s,l,u,f,v,_,I,L){s.name="",I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?s.type=I:s.removeAttribute("type"),l!=null?I==="number"?(l===0&&s.value===""||s.value!=l)&&(s.value=""+cr(l)):s.value!==""+cr(l)&&(s.value=""+cr(l)):I!=="submit"&&I!=="reset"||s.removeAttribute("value"),l!=null?Ou(s,I,cr(l)):u!=null?Ou(s,I,cr(u)):f!=null&&s.removeAttribute("value"),v==null&&_!=null&&(s.defaultChecked=!!_),v!=null&&(s.checked=v&&typeof v!="function"&&typeof v!="symbol"),L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"?s.name=""+cr(L):s.removeAttribute("name")}function ku(s,l,u,f,v,_,I,L){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(s.type=_),l!=null||u!=null){if(!(_!=="submit"&&_!=="reset"||l!=null))return;u=u!=null?""+cr(u):"",l=l!=null?""+cr(l):u,L||l===s.value||(s.value=l),s.defaultValue=l}f=f??v,f=typeof f!="function"&&typeof f!="symbol"&&!!f,s.checked=L?s.checked:!!f,s.defaultChecked=!!f,I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"&&(s.name=I)}function Ou(s,l,u){l==="number"&&Hs(s.ownerDocument)===s||s.defaultValue===""+u||(s.defaultValue=""+u)}function Di(s,l,u,f){if(s=s.options,l){l={};for(var v=0;v<u.length;v++)l["$"+u[v]]=!0;for(u=0;u<s.length;u++)v=l.hasOwnProperty("$"+s[u].value),s[u].selected!==v&&(s[u].selected=v),v&&f&&(s[u].defaultSelected=!0)}else{for(u=""+cr(u),l=null,v=0;v<s.length;v++){if(s[v].value===u){s[v].selected=!0,f&&(s[v].defaultSelected=!0);return}l!==null||s[v].disabled||(l=s[v])}l!==null&&(l.selected=!0)}}function Qd(s,l,u){if(l!=null&&(l=""+cr(l),l!==s.value&&(s.value=l),u==null)){s.defaultValue!==l&&(s.defaultValue=l);return}s.defaultValue=u!=null?""+cr(u):""}function Jd(s,l,u,f){if(l==null){if(f!=null){if(u!=null)throw Error(n(92));if(ze(f)){if(1<f.length)throw Error(n(93));f=f[0]}u=f}u==null&&(u=""),l=u}u=cr(l),s.defaultValue=u,f=s.textContent,f===u&&f!==""&&f!==null&&(s.value=f)}function wa(s,l){if(l){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=l;return}}s.textContent=l}var Gs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Mu(s,l,u){var f=l.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?f?s.setProperty(l,""):l==="float"?s.cssFloat="":s[l]="":f?s.setProperty(l,u):typeof u!="number"||u===0||Gs.has(l)?l==="float"?s.cssFloat=u:s[l]=(""+u).trim():s[l]=u+"px"}function Pu(s,l,u){if(l!=null&&typeof l!="object")throw Error(n(62));if(s=s.style,u!=null){for(var f in u)!u.hasOwnProperty(f)||l!=null&&l.hasOwnProperty(f)||(f.indexOf("--")===0?s.setProperty(f,""):f==="float"?s.cssFloat="":s[f]="");for(var v in l)f=l[v],l.hasOwnProperty(v)&&u[v]!==f&&Mu(s,v,f)}else for(var _ in l)l.hasOwnProperty(_)&&Mu(s,_,l[_])}function Jl(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ef=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ga(s){return ef.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var Fu=null;function Lu(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Ii=null,jn=null;function tf(s){var l=X(s);if(l&&(s=l.stateNode)){var u=s[xr]||null;e:switch(s=l.stateNode,l.type){case"input":if(Iu(s,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),l=u.name,u.type==="radio"&&l!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Hr(""+l)+'"][type="radio"]'),l=0;l<u.length;l++){var f=u[l];if(f!==s&&f.form===s.form){var v=f[xr]||null;if(!v)throw Error(n(90));Iu(f,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(l=0;l<u.length;l++)f=u[l],f.form===s.form&&qt(f)}break e;case"textarea":Qd(s,u.value,u.defaultValue);break e;case"select":l=u.value,l!=null&&Di(s,!!u.multiple,l,!1)}}}var $o=!1;function Wo(s,l,u){if($o)return s(l,u);$o=!0;try{var f=s(l);return f}finally{if($o=!1,(Ii!==null||jn!==null)&&(qf(),Ii&&(l=Ii,s=jn,jn=Ii=null,tf(l),s)))for(l=0;l<s.length;l++)tf(s[l])}}function ki(s,l){var u=s.stateNode;if(u===null)return null;var f=u[xr]||null;if(f===null)return null;u=f[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(s=s.type,f=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!f;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(n(231,l,typeof u));return u}var Rn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qs=!1;if(Rn)try{var Oi={};Object.defineProperty(Oi,"passive",{get:function(){qs=!0}}),window.addEventListener("test",Oi,Oi),window.removeEventListener("test",Oi,Oi)}catch{qs=!1}var Na=null,Zt=null,Zl=null;function rf(){if(Zl)return Zl;var s,l=Zt,u=l.length,f,v="value"in Na?Na.value:Na.textContent,_=v.length;for(s=0;s<u&&l[s]===v[s];s++);var I=u-s;for(f=1;f<=I&&l[u-f]===v[_-f];f++);return Zl=v.slice(s,1<f?1-f:void 0)}function Yo(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function Ko(){return!0}function Vu(){return!1}function Mr(s){function l(u,f,v,_,I){this._reactName=u,this._targetInst=v,this.type=f,this.nativeEvent=_,this.target=I,this.currentTarget=null;for(var L in s)s.hasOwnProperty(L)&&(u=s[L],this[L]=u?u(_):_[L]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Ko:Vu,this.isPropagationStopped=Vu,this}return p(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Ko)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Ko)},persist:function(){},isPersistent:Ko}),l}var xn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xo=Mr(xn),Qo=p({},xn,{view:0,detail:0}),Jo=Mr(Qo),ec,Zo,gs,el=p({},Qo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nc,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==gs&&(gs&&s.type==="mousemove"?(ec=s.screenX-gs.screenX,Zo=s.screenY-gs.screenY):Zo=ec=0,gs=s),ec)},movementY:function(s){return"movementY"in s?s.movementY:Zo}}),tl=Mr(el),sp=p({},el,{dataTransfer:0}),nf=Mr(sp),rl=p({},Qo,{relatedTarget:0}),tc=Mr(rl),af=p({},xn,{animationName:0,elapsedTime:0,pseudoElement:0}),Bu=Mr(af),Uu=p({},xn,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),sf=Mr(Uu),rc=p({},xn,{data:0}),zu=Mr(rc),of={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$s={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cf(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=lf[s])?!!l[s]:!1}function nc(){return cf}var uf=p({},Qo,{key:function(s){if(s.key){var l=of[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=Yo(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?$s[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nc,charCode:function(s){return s.type==="keypress"?Yo(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Yo(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),ac=Mr(uf),Dn=p({},el,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hu=Mr(Dn),hf=p({},Qo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nc}),Mi=Mr(hf),g=p({},xn,{propertyName:0,elapsedTime:0,pseudoElement:0}),N=Mr(g),R=p({},el,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),U=Mr(R),le=p({},xn,{newState:0,oldState:0}),ve=Mr(le),Pe=[9,13,27,32],ut=Rn&&"CompositionEvent"in window,rr=null;Rn&&"documentMode"in document&&(rr=document.documentMode);var Pt=Rn&&"TextEvent"in window&&!rr,yr=Rn&&(!ut||rr&&8<rr&&11>=rr),sa=" ",vs=!1;function qa(s,l){switch(s){case"keyup":return Pe.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $a(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Wa=!1;function Gu(s,l){switch(s){case"compositionend":return $a(l);case"keypress":return l.which!==32?null:(vs=!0,sa);case"textInput":return s=l.data,s===sa&&vs?null:s;default:return null}}function kC(s,l){if(Wa)return s==="compositionend"||!ut&&qa(s,l)?(s=rf(),Zl=Zt=Na=null,Wa=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return yr&&l.locale!=="ko"?null:l.data;default:return null}}var OC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function I1(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!OC[s.type]:l==="textarea"}function k1(s,l,u,f){Ii?jn?jn.push(f):jn=[f]:Ii=f,l=Qf(l,"onChange"),0<l.length&&(u=new Xo("onChange","change",null,u,f),s.push({event:u,listeners:l}))}var qu=null,$u=null;function MC(s){f2(s,0)}function df(s){var l=ce(s);if(qt(l))return s}function O1(s,l){if(s==="change")return l}var M1=!1;if(Rn){var ip;if(Rn){var op="oninput"in document;if(!op){var P1=document.createElement("div");P1.setAttribute("oninput","return;"),op=typeof P1.oninput=="function"}ip=op}else ip=!1;M1=ip&&(!document.documentMode||9<document.documentMode)}function F1(){qu&&(qu.detachEvent("onpropertychange",L1),$u=qu=null)}function L1(s){if(s.propertyName==="value"&&df($u)){var l=[];k1(l,$u,s,Lu(s)),Wo(MC,l)}}function PC(s,l,u){s==="focusin"?(F1(),qu=l,$u=u,qu.attachEvent("onpropertychange",L1)):s==="focusout"&&F1()}function FC(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return df($u)}function LC(s,l){if(s==="click")return df(l)}function VC(s,l){if(s==="input"||s==="change")return df(l)}function BC(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var ia=typeof Object.is=="function"?Object.is:BC;function Wu(s,l){if(ia(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var u=Object.keys(s),f=Object.keys(l);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var v=u[f];if(!Ze.call(l,v)||!ia(s[v],l[v]))return!1}return!0}function V1(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function B1(s,l){var u=V1(s);s=0;for(var f;u;){if(u.nodeType===3){if(f=s+u.textContent.length,s<=l&&f>=l)return{node:u,offset:l-s};s=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=V1(u)}}function U1(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?U1(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function z1(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var l=Hs(s.document);l instanceof s.HTMLIFrameElement;){try{var u=typeof l.contentWindow.location.href=="string"}catch{u=!1}if(u)s=l.contentWindow;else break;l=Hs(s.document)}return l}function lp(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}var UC=Rn&&"documentMode"in document&&11>=document.documentMode,sc=null,cp=null,Yu=null,up=!1;function H1(s,l,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;up||sc==null||sc!==Hs(f)||(f=sc,"selectionStart"in f&&lp(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Yu&&Wu(Yu,f)||(Yu=f,f=Qf(cp,"onSelect"),0<f.length&&(l=new Xo("onSelect","select",null,l,u),s.push({event:l,listeners:f}),l.target=sc)))}function nl(s,l){var u={};return u[s.toLowerCase()]=l.toLowerCase(),u["Webkit"+s]="webkit"+l,u["Moz"+s]="moz"+l,u}var ic={animationend:nl("Animation","AnimationEnd"),animationiteration:nl("Animation","AnimationIteration"),animationstart:nl("Animation","AnimationStart"),transitionrun:nl("Transition","TransitionRun"),transitionstart:nl("Transition","TransitionStart"),transitioncancel:nl("Transition","TransitionCancel"),transitionend:nl("Transition","TransitionEnd")},hp={},G1={};Rn&&(G1=document.createElement("div").style,"AnimationEvent"in window||(delete ic.animationend.animation,delete ic.animationiteration.animation,delete ic.animationstart.animation),"TransitionEvent"in window||delete ic.transitionend.transition);function al(s){if(hp[s])return hp[s];if(!ic[s])return s;var l=ic[s],u;for(u in l)if(l.hasOwnProperty(u)&&u in G1)return hp[s]=l[u];return s}var q1=al("animationend"),$1=al("animationiteration"),W1=al("animationstart"),zC=al("transitionrun"),HC=al("transitionstart"),GC=al("transitioncancel"),Y1=al("transitionend"),K1=new Map,dp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");dp.push("scrollEnd");function Ya(s,l){K1.set(s,l),Ae(l,[s])}var X1=new WeakMap;function ba(s,l){if(typeof s=="object"&&s!==null){var u=X1.get(s);return u!==void 0?u:(l={value:s,source:l,stack:Ha(l)},X1.set(s,l),l)}return{value:s,source:l,stack:Ha(l)}}var Sa=[],oc=0,fp=0;function ff(){for(var s=oc,l=fp=oc=0;l<s;){var u=Sa[l];Sa[l++]=null;var f=Sa[l];Sa[l++]=null;var v=Sa[l];Sa[l++]=null;var _=Sa[l];if(Sa[l++]=null,f!==null&&v!==null){var I=f.pending;I===null?v.next=v:(v.next=I.next,I.next=v),f.pending=v}_!==0&&Q1(u,v,_)}}function mf(s,l,u,f){Sa[oc++]=s,Sa[oc++]=l,Sa[oc++]=u,Sa[oc++]=f,fp|=f,s.lanes|=f,s=s.alternate,s!==null&&(s.lanes|=f)}function mp(s,l,u,f){return mf(s,l,u,f),pf(s)}function lc(s,l){return mf(s,null,null,l),pf(s)}function Q1(s,l,u){s.lanes|=u;var f=s.alternate;f!==null&&(f.lanes|=u);for(var v=!1,_=s.return;_!==null;)_.childLanes|=u,f=_.alternate,f!==null&&(f.childLanes|=u),_.tag===22&&(s=_.stateNode,s===null||s._visibility&1||(v=!0)),s=_,_=_.return;return s.tag===3?(_=s.stateNode,v&&l!==null&&(v=31-tn(u),s=_.hiddenUpdates,f=s[v],f===null?s[v]=[l]:f.push(l),l.lane=u|536870912),_):null}function pf(s){if(50<yh)throw yh=0,_g=null,Error(n(185));for(var l=s.return;l!==null;)s=l,l=s.return;return s.tag===3?s.stateNode:null}var cc={};function qC(s,l,u,f){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function oa(s,l,u,f){return new qC(s,l,u,f)}function pp(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Ws(s,l){var u=s.alternate;return u===null?(u=oa(s.tag,l,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=l,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&65011712,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,l=s.dependencies,u.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u.refCleanup=s.refCleanup,u}function J1(s,l){s.flags&=65011714;var u=s.alternate;return u===null?(s.childLanes=0,s.lanes=l,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,l=u.dependencies,s.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),s}function gf(s,l,u,f,v,_){var I=0;if(f=s,typeof s=="function")pp(s)&&(I=1);else if(typeof s=="string")I=Wj(s,u,J.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case S:return s=oa(31,u,l,v),s.elementType=S,s.lanes=_,s;case w:return sl(u.children,v,_,l);case T:I=8,v|=24;break;case b:return s=oa(12,u,l,v|2),s.elementType=b,s.lanes=_,s;case re:return s=oa(13,u,l,v),s.elementType=re,s.lanes=_,s;case q:return s=oa(19,u,l,v),s.elementType=q,s.lanes=_,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case A:case V:I=10;break e;case M:I=9;break e;case H:I=11;break e;case j:I=14;break e;case D:I=16,f=null;break e}I=29,u=Error(n(130,s===null?"null":typeof s,"")),f=null}return l=oa(I,u,l,v),l.elementType=s,l.type=f,l.lanes=_,l}function sl(s,l,u,f){return s=oa(7,s,f,l),s.lanes=u,s}function gp(s,l,u){return s=oa(6,s,null,l),s.lanes=u,s}function vp(s,l,u){return l=oa(4,s.children!==null?s.children:[],s.key,l),l.lanes=u,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}var uc=[],hc=0,vf=null,xf=0,Aa=[],Ca=0,il=null,Ys=1,Ks="";function ol(s,l){uc[hc++]=xf,uc[hc++]=vf,vf=s,xf=l}function Z1(s,l,u){Aa[Ca++]=Ys,Aa[Ca++]=Ks,Aa[Ca++]=il,il=s;var f=Ys;s=Ks;var v=32-tn(f)-1;f&=~(1<<v),u+=1;var _=32-tn(l)+v;if(30<_){var I=v-v%5;_=(f&(1<<I)-1).toString(32),f>>=I,v-=I,Ys=1<<32-tn(l)+v|u<<v|f,Ks=_+s}else Ys=1<<_|u<<v|f,Ks=s}function xp(s){s.return!==null&&(ol(s,1),Z1(s,1,0))}function yp(s){for(;s===vf;)vf=uc[--hc],uc[hc]=null,xf=uc[--hc],uc[hc]=null;for(;s===il;)il=Aa[--Ca],Aa[Ca]=null,Ks=Aa[--Ca],Aa[Ca]=null,Ys=Aa[--Ca],Aa[Ca]=null}var In=null,dr=null,Dt=!1,ll=null,xs=!1,_p=Error(n(519));function cl(s){var l=Error(n(418,""));throw Qu(ba(l,s)),_p}function ey(s){var l=s.stateNode,u=s.type,f=s.memoizedProps;switch(l[lr]=s,l[xr]=f,u){case"dialog":xt("cancel",l),xt("close",l);break;case"iframe":case"object":case"embed":xt("load",l);break;case"video":case"audio":for(u=0;u<Eh.length;u++)xt(Eh[u],l);break;case"source":xt("error",l);break;case"img":case"image":case"link":xt("error",l),xt("load",l);break;case"details":xt("toggle",l);break;case"input":xt("invalid",l),ku(l,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0),Ri(l);break;case"select":xt("invalid",l);break;case"textarea":xt("invalid",l),Jd(l,f.value,f.defaultValue,f.children),Ri(l)}u=f.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||l.textContent===""+u||f.suppressHydrationWarning===!0||v2(l.textContent,u)?(f.popover!=null&&(xt("beforetoggle",l),xt("toggle",l)),f.onScroll!=null&&xt("scroll",l),f.onScrollEnd!=null&&xt("scrollend",l),f.onClick!=null&&(l.onclick=Jf),l=!0):l=!1,l||cl(s)}function ty(s){for(In=s.return;In;)switch(In.tag){case 5:case 13:xs=!1;return;case 27:case 3:xs=!0;return;default:In=In.return}}function Ku(s){if(s!==In)return!1;if(!Dt)return ty(s),Dt=!0,!1;var l=s.tag,u;if((u=l!==3&&l!==27)&&((u=l===5)&&(u=s.type,u=!(u!=="form"&&u!=="button")||Pg(s.type,s.memoizedProps)),u=!u),u&&dr&&cl(s),ty(s),l===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));e:{for(s=s.nextSibling,l=0;s;){if(s.nodeType===8)if(u=s.data,u==="/$"){if(l===0){dr=Xa(s.nextSibling);break e}l--}else u!=="$"&&u!=="$!"&&u!=="$?"||l++;s=s.nextSibling}dr=null}}else l===27?(l=dr,Qi(s.type)?(s=Bg,Bg=null,dr=s):dr=l):dr=In?Xa(s.stateNode.nextSibling):null;return!0}function Xu(){dr=In=null,Dt=!1}function ry(){var s=ll;return s!==null&&(Wn===null?Wn=s:Wn.push.apply(Wn,s),ll=null),s}function Qu(s){ll===null?ll=[s]:ll.push(s)}var Ep=_e(null),ul=null,Xs=null;function Pi(s,l,u){ee(Ep,l._currentValue),l._currentValue=u}function Qs(s){s._currentValue=Ep.current,Y(Ep)}function Tp(s,l,u){for(;s!==null;){var f=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,f!==null&&(f.childLanes|=l)):f!==null&&(f.childLanes&l)!==l&&(f.childLanes|=l),s===u)break;s=s.return}}function wp(s,l,u,f){var v=s.child;for(v!==null&&(v.return=s);v!==null;){var _=v.dependencies;if(_!==null){var I=v.child;_=_.firstContext;e:for(;_!==null;){var L=_;_=v;for(var Q=0;Q<l.length;Q++)if(L.context===l[Q]){_.lanes|=u,L=_.alternate,L!==null&&(L.lanes|=u),Tp(_.return,u,s),f||(I=null);break e}_=L.next}}else if(v.tag===18){if(I=v.return,I===null)throw Error(n(341));I.lanes|=u,_=I.alternate,_!==null&&(_.lanes|=u),Tp(I,u,s),I=null}else I=v.child;if(I!==null)I.return=v;else for(I=v;I!==null;){if(I===s){I=null;break}if(v=I.sibling,v!==null){v.return=I.return,I=v;break}I=I.return}v=I}}function Ju(s,l,u,f){s=null;for(var v=l,_=!1;v!==null;){if(!_){if((v.flags&524288)!==0)_=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var I=v.alternate;if(I===null)throw Error(n(387));if(I=I.memoizedProps,I!==null){var L=v.type;ia(v.pendingProps.value,I.value)||(s!==null?s.push(L):s=[L])}}else if(v===Le.current){if(I=v.alternate,I===null)throw Error(n(387));I.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(s!==null?s.push(Ah):s=[Ah])}v=v.return}s!==null&&wp(l,s,u,f),l.flags|=262144}function yf(s){for(s=s.firstContext;s!==null;){if(!ia(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function hl(s){ul=s,Xs=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function yn(s){return ny(ul,s)}function _f(s,l){return ul===null&&hl(s),ny(s,l)}function ny(s,l){var u=l._currentValue;if(l={context:l,memoizedValue:u,next:null},Xs===null){if(s===null)throw Error(n(308));Xs=l,s.dependencies={lanes:0,firstContext:l},s.flags|=524288}else Xs=Xs.next=l;return u}var $C=typeof AbortController<"u"?AbortController:function(){var s=[],l=this.signal={aborted:!1,addEventListener:function(u,f){s.push(f)}};this.abort=function(){l.aborted=!0,s.forEach(function(u){return u()})}},WC=t.unstable_scheduleCallback,YC=t.unstable_NormalPriority,Pr={$$typeof:V,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Np(){return{controller:new $C,data:new Map,refCount:0}}function Zu(s){s.refCount--,s.refCount===0&&WC(YC,function(){s.controller.abort()})}var eh=null,bp=0,dc=0,fc=null;function KC(s,l){if(eh===null){var u=eh=[];bp=0,dc=Ag(),fc={status:"pending",value:void 0,then:function(f){u.push(f)}}}return bp++,l.then(ay,ay),l}function ay(){if(--bp===0&&eh!==null){fc!==null&&(fc.status="fulfilled");var s=eh;eh=null,dc=0,fc=null;for(var l=0;l<s.length;l++)(0,s[l])()}}function XC(s,l){var u=[],f={status:"pending",value:null,reason:null,then:function(v){u.push(v)}};return s.then(function(){f.status="fulfilled",f.value=l;for(var v=0;v<u.length;v++)(0,u[v])(l)},function(v){for(f.status="rejected",f.reason=v,v=0;v<u.length;v++)(0,u[v])(void 0)}),f}var sy=ge.S;ge.S=function(s,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&KC(s,l),sy!==null&&sy(s,l)};var dl=_e(null);function Sp(){var s=dl.current;return s!==null?s:er.pooledCache}function Ef(s,l){l===null?ee(dl,dl.current):ee(dl,l.pool)}function iy(){var s=Sp();return s===null?null:{parent:Pr._currentValue,pool:s}}var th=Error(n(460)),oy=Error(n(474)),Tf=Error(n(542)),Ap={then:function(){}};function ly(s){return s=s.status,s==="fulfilled"||s==="rejected"}function wf(){}function cy(s,l,u){switch(u=s[u],u===void 0?s.push(l):u!==l&&(l.then(wf,wf),l=u),l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,hy(s),s;default:if(typeof l.status=="string")l.then(wf,wf);else{if(s=er,s!==null&&100<s.shellSuspendCounter)throw Error(n(482));s=l,s.status="pending",s.then(function(f){if(l.status==="pending"){var v=l;v.status="fulfilled",v.value=f}},function(f){if(l.status==="pending"){var v=l;v.status="rejected",v.reason=f}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,hy(s),s}throw rh=l,th}}var rh=null;function uy(){if(rh===null)throw Error(n(459));var s=rh;return rh=null,s}function hy(s){if(s===th||s===Tf)throw Error(n(483))}var Fi=!1;function Cp(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function jp(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Li(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Vi(s,l,u){var f=s.updateQueue;if(f===null)return null;if(f=f.shared,(Ft&2)!==0){var v=f.pending;return v===null?l.next=l:(l.next=v.next,v.next=l),f.pending=l,l=pf(s),Q1(s,null,u),l}return mf(s,f,l,u),pf(s)}function nh(s,l,u){if(l=l.updateQueue,l!==null&&(l=l.shared,(u&4194048)!==0)){var f=l.lanes;f&=s.pendingLanes,u|=f,l.lanes=u,ms(s,u)}}function Rp(s,l){var u=s.updateQueue,f=s.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var v=null,_=null;if(u=u.firstBaseUpdate,u!==null){do{var I={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};_===null?v=_=I:_=_.next=I,u=u.next}while(u!==null);_===null?v=_=l:_=_.next=l}else v=_=l;u={baseState:f.baseState,firstBaseUpdate:v,lastBaseUpdate:_,shared:f.shared,callbacks:f.callbacks},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=l:s.next=l,u.lastBaseUpdate=l}var Dp=!1;function ah(){if(Dp){var s=fc;if(s!==null)throw s}}function sh(s,l,u,f){Dp=!1;var v=s.updateQueue;Fi=!1;var _=v.firstBaseUpdate,I=v.lastBaseUpdate,L=v.shared.pending;if(L!==null){v.shared.pending=null;var Q=L,ue=Q.next;Q.next=null,I===null?_=ue:I.next=ue,I=Q;var Ee=s.alternate;Ee!==null&&(Ee=Ee.updateQueue,L=Ee.lastBaseUpdate,L!==I&&(L===null?Ee.firstBaseUpdate=ue:L.next=ue,Ee.lastBaseUpdate=Q))}if(_!==null){var Ne=v.baseState;I=0,Ee=ue=Q=null,L=_;do{var me=L.lane&-536870913,pe=me!==L.lane;if(pe?(wt&me)===me:(f&me)===me){me!==0&&me===dc&&(Dp=!0),Ee!==null&&(Ee=Ee.next={lane:0,tag:L.tag,payload:L.payload,callback:null,next:null});e:{var it=s,tt=L;me=l;var Yt=u;switch(tt.tag){case 1:if(it=tt.payload,typeof it=="function"){Ne=it.call(Yt,Ne,me);break e}Ne=it;break e;case 3:it.flags=it.flags&-65537|128;case 0:if(it=tt.payload,me=typeof it=="function"?it.call(Yt,Ne,me):it,me==null)break e;Ne=p({},Ne,me);break e;case 2:Fi=!0}}me=L.callback,me!==null&&(s.flags|=64,pe&&(s.flags|=8192),pe=v.callbacks,pe===null?v.callbacks=[me]:pe.push(me))}else pe={lane:me,tag:L.tag,payload:L.payload,callback:L.callback,next:null},Ee===null?(ue=Ee=pe,Q=Ne):Ee=Ee.next=pe,I|=me;if(L=L.next,L===null){if(L=v.shared.pending,L===null)break;pe=L,L=pe.next,pe.next=null,v.lastBaseUpdate=pe,v.shared.pending=null}}while(!0);Ee===null&&(Q=Ne),v.baseState=Q,v.firstBaseUpdate=ue,v.lastBaseUpdate=Ee,_===null&&(v.shared.lanes=0),Wi|=I,s.lanes=I,s.memoizedState=Ne}}function dy(s,l){if(typeof s!="function")throw Error(n(191,s));s.call(l)}function fy(s,l){var u=s.callbacks;if(u!==null)for(s.callbacks=null,s=0;s<u.length;s++)dy(u[s],l)}var mc=_e(null),Nf=_e(0);function my(s,l){s=ai,ee(Nf,s),ee(mc,l),ai=s|l.baseLanes}function Ip(){ee(Nf,ai),ee(mc,mc.current)}function kp(){ai=Nf.current,Y(mc),Y(Nf)}var Bi=0,mt=null,$t=null,Sr=null,bf=!1,pc=!1,fl=!1,Sf=0,ih=0,gc=null,QC=0;function _r(){throw Error(n(321))}function Op(s,l){if(l===null)return!1;for(var u=0;u<l.length&&u<s.length;u++)if(!ia(s[u],l[u]))return!1;return!0}function Mp(s,l,u,f,v,_){return Bi=_,mt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,ge.H=s===null||s.memoizedState===null?Qy:Jy,fl=!1,_=u(f,v),fl=!1,pc&&(_=gy(l,u,f,v)),py(s),_}function py(s){ge.H=If;var l=$t!==null&&$t.next!==null;if(Bi=0,Sr=$t=mt=null,bf=!1,ih=0,gc=null,l)throw Error(n(300));s===null||Gr||(s=s.dependencies,s!==null&&yf(s)&&(Gr=!0))}function gy(s,l,u,f){mt=s;var v=0;do{if(pc&&(gc=null),ih=0,pc=!1,25<=v)throw Error(n(301));if(v+=1,Sr=$t=null,s.updateQueue!=null){var _=s.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}ge.H=aj,_=l(u,f)}while(pc);return _}function JC(){var s=ge.H,l=s.useState()[0];return l=typeof l.then=="function"?oh(l):l,s=s.useState()[0],($t!==null?$t.memoizedState:null)!==s&&(mt.flags|=1024),l}function Pp(){var s=Sf!==0;return Sf=0,s}function Fp(s,l,u){l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~u}function Lp(s){if(bf){for(s=s.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}bf=!1}Bi=0,Sr=$t=mt=null,pc=!1,ih=Sf=0,gc=null}function qn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Sr===null?mt.memoizedState=Sr=s:Sr=Sr.next=s,Sr}function Ar(){if($t===null){var s=mt.alternate;s=s!==null?s.memoizedState:null}else s=$t.next;var l=Sr===null?mt.memoizedState:Sr.next;if(l!==null)Sr=l,$t=s;else{if(s===null)throw mt.alternate===null?Error(n(467)):Error(n(310));$t=s,s={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},Sr===null?mt.memoizedState=Sr=s:Sr=Sr.next=s}return Sr}function Vp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function oh(s){var l=ih;return ih+=1,gc===null&&(gc=[]),s=cy(gc,s,l),l=mt,(Sr===null?l.memoizedState:Sr.next)===null&&(l=l.alternate,ge.H=l===null||l.memoizedState===null?Qy:Jy),s}function Af(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return oh(s);if(s.$$typeof===V)return yn(s)}throw Error(n(438,String(s)))}function Bp(s){var l=null,u=mt.updateQueue;if(u!==null&&(l=u.memoCache),l==null){var f=mt.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(l={data:f.data.map(function(v){return v.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),u===null&&(u=Vp(),mt.updateQueue=u),u.memoCache=l,u=l.data[l.index],u===void 0)for(u=l.data[l.index]=Array(s),f=0;f<s;f++)u[f]=P;return l.index++,u}function Js(s,l){return typeof l=="function"?l(s):l}function Cf(s){var l=Ar();return Up(l,$t,s)}function Up(s,l,u){var f=s.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=u;var v=s.baseQueue,_=f.pending;if(_!==null){if(v!==null){var I=v.next;v.next=_.next,_.next=I}l.baseQueue=v=_,f.pending=null}if(_=s.baseState,v===null)s.memoizedState=_;else{l=v.next;var L=I=null,Q=null,ue=l,Ee=!1;do{var Ne=ue.lane&-536870913;if(Ne!==ue.lane?(wt&Ne)===Ne:(Bi&Ne)===Ne){var me=ue.revertLane;if(me===0)Q!==null&&(Q=Q.next={lane:0,revertLane:0,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null}),Ne===dc&&(Ee=!0);else if((Bi&me)===me){ue=ue.next,me===dc&&(Ee=!0);continue}else Ne={lane:0,revertLane:ue.revertLane,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null},Q===null?(L=Q=Ne,I=_):Q=Q.next=Ne,mt.lanes|=me,Wi|=me;Ne=ue.action,fl&&u(_,Ne),_=ue.hasEagerState?ue.eagerState:u(_,Ne)}else me={lane:Ne,revertLane:ue.revertLane,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null},Q===null?(L=Q=me,I=_):Q=Q.next=me,mt.lanes|=Ne,Wi|=Ne;ue=ue.next}while(ue!==null&&ue!==l);if(Q===null?I=_:Q.next=L,!ia(_,s.memoizedState)&&(Gr=!0,Ee&&(u=fc,u!==null)))throw u;s.memoizedState=_,s.baseState=I,s.baseQueue=Q,f.lastRenderedState=_}return v===null&&(f.lanes=0),[s.memoizedState,f.dispatch]}function zp(s){var l=Ar(),u=l.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=s;var f=u.dispatch,v=u.pending,_=l.memoizedState;if(v!==null){u.pending=null;var I=v=v.next;do _=s(_,I.action),I=I.next;while(I!==v);ia(_,l.memoizedState)||(Gr=!0),l.memoizedState=_,l.baseQueue===null&&(l.baseState=_),u.lastRenderedState=_}return[_,f]}function vy(s,l,u){var f=mt,v=Ar(),_=Dt;if(_){if(u===void 0)throw Error(n(407));u=u()}else u=l();var I=!ia(($t||v).memoizedState,u);I&&(v.memoizedState=u,Gr=!0),v=v.queue;var L=_y.bind(null,f,v,s);if(lh(2048,8,L,[s]),v.getSnapshot!==l||I||Sr!==null&&Sr.memoizedState.tag&1){if(f.flags|=2048,vc(9,jf(),yy.bind(null,f,v,u,l),null),er===null)throw Error(n(349));_||(Bi&124)!==0||xy(f,l,u)}return u}function xy(s,l,u){s.flags|=16384,s={getSnapshot:l,value:u},l=mt.updateQueue,l===null?(l=Vp(),mt.updateQueue=l,l.stores=[s]):(u=l.stores,u===null?l.stores=[s]:u.push(s))}function yy(s,l,u,f){l.value=u,l.getSnapshot=f,Ey(l)&&Ty(s)}function _y(s,l,u){return u(function(){Ey(l)&&Ty(s)})}function Ey(s){var l=s.getSnapshot;s=s.value;try{var u=l();return!ia(s,u)}catch{return!0}}function Ty(s){var l=lc(s,2);l!==null&&da(l,s,2)}function Hp(s){var l=qn();if(typeof s=="function"){var u=s;if(s=u(),fl){br(!0);try{u()}finally{br(!1)}}}return l.memoizedState=l.baseState=s,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Js,lastRenderedState:s},l}function wy(s,l,u,f){return s.baseState=u,Up(s,$t,typeof f=="function"?f:Js)}function ZC(s,l,u,f,v){if(Df(s))throw Error(n(485));if(s=l.action,s!==null){var _={payload:v,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(I){_.listeners.push(I)}};ge.T!==null?u(!0):_.isTransition=!1,f(_),u=l.pending,u===null?(_.next=l.pending=_,Ny(l,_)):(_.next=u.next,l.pending=u.next=_)}}function Ny(s,l){var u=l.action,f=l.payload,v=s.state;if(l.isTransition){var _=ge.T,I={};ge.T=I;try{var L=u(v,f),Q=ge.S;Q!==null&&Q(I,L),by(s,l,L)}catch(ue){Gp(s,l,ue)}finally{ge.T=_}}else try{_=u(v,f),by(s,l,_)}catch(ue){Gp(s,l,ue)}}function by(s,l,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(f){Sy(s,l,f)},function(f){return Gp(s,l,f)}):Sy(s,l,u)}function Sy(s,l,u){l.status="fulfilled",l.value=u,Ay(l),s.state=u,l=s.pending,l!==null&&(u=l.next,u===l?s.pending=null:(u=u.next,l.next=u,Ny(s,u)))}function Gp(s,l,u){var f=s.pending;if(s.pending=null,f!==null){f=f.next;do l.status="rejected",l.reason=u,Ay(l),l=l.next;while(l!==f)}s.action=null}function Ay(s){s=s.listeners;for(var l=0;l<s.length;l++)(0,s[l])()}function Cy(s,l){return l}function jy(s,l){if(Dt){var u=er.formState;if(u!==null){e:{var f=mt;if(Dt){if(dr){t:{for(var v=dr,_=xs;v.nodeType!==8;){if(!_){v=null;break t}if(v=Xa(v.nextSibling),v===null){v=null;break t}}_=v.data,v=_==="F!"||_==="F"?v:null}if(v){dr=Xa(v.nextSibling),f=v.data==="F!";break e}}cl(f)}f=!1}f&&(l=u[0])}}return u=qn(),u.memoizedState=u.baseState=l,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cy,lastRenderedState:l},u.queue=f,u=Yy.bind(null,mt,f),f.dispatch=u,f=Hp(!1),_=Kp.bind(null,mt,!1,f.queue),f=qn(),v={state:l,dispatch:null,action:s,pending:null},f.queue=v,u=ZC.bind(null,mt,v,_,u),v.dispatch=u,f.memoizedState=s,[l,u,!1]}function Ry(s){var l=Ar();return Dy(l,$t,s)}function Dy(s,l,u){if(l=Up(s,l,Cy)[0],s=Cf(Js)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var f=oh(l)}catch(I){throw I===th?Tf:I}else f=l;l=Ar();var v=l.queue,_=v.dispatch;return u!==l.memoizedState&&(mt.flags|=2048,vc(9,jf(),ej.bind(null,v,u),null)),[f,_,s]}function ej(s,l){s.action=l}function Iy(s){var l=Ar(),u=$t;if(u!==null)return Dy(l,u,s);Ar(),l=l.memoizedState,u=Ar();var f=u.queue.dispatch;return u.memoizedState=s,[l,f,!1]}function vc(s,l,u,f){return s={tag:s,create:u,deps:f,inst:l,next:null},l=mt.updateQueue,l===null&&(l=Vp(),mt.updateQueue=l),u=l.lastEffect,u===null?l.lastEffect=s.next=s:(f=u.next,u.next=s,s.next=f,l.lastEffect=s),s}function jf(){return{destroy:void 0,resource:void 0}}function ky(){return Ar().memoizedState}function Rf(s,l,u,f){var v=qn();f=f===void 0?null:f,mt.flags|=s,v.memoizedState=vc(1|l,jf(),u,f)}function lh(s,l,u,f){var v=Ar();f=f===void 0?null:f;var _=v.memoizedState.inst;$t!==null&&f!==null&&Op(f,$t.memoizedState.deps)?v.memoizedState=vc(l,_,u,f):(mt.flags|=s,v.memoizedState=vc(1|l,_,u,f))}function Oy(s,l){Rf(8390656,8,s,l)}function My(s,l){lh(2048,8,s,l)}function Py(s,l){return lh(4,2,s,l)}function Fy(s,l){return lh(4,4,s,l)}function Ly(s,l){if(typeof l=="function"){s=s();var u=l(s);return function(){typeof u=="function"?u():l(null)}}if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function Vy(s,l,u){u=u!=null?u.concat([s]):null,lh(4,4,Ly.bind(null,l,s),u)}function qp(){}function By(s,l){var u=Ar();l=l===void 0?null:l;var f=u.memoizedState;return l!==null&&Op(l,f[1])?f[0]:(u.memoizedState=[s,l],s)}function Uy(s,l){var u=Ar();l=l===void 0?null:l;var f=u.memoizedState;if(l!==null&&Op(l,f[1]))return f[0];if(f=s(),fl){br(!0);try{s()}finally{br(!1)}}return u.memoizedState=[f,l],f}function $p(s,l,u){return u===void 0||(Bi&1073741824)!==0?s.memoizedState=l:(s.memoizedState=u,s=G_(),mt.lanes|=s,Wi|=s,u)}function zy(s,l,u,f){return ia(u,l)?u:mc.current!==null?(s=$p(s,u,f),ia(s,l)||(Gr=!0),s):(Bi&42)===0?(Gr=!0,s.memoizedState=u):(s=G_(),mt.lanes|=s,Wi|=s,l)}function Hy(s,l,u,f,v){var _=De.p;De.p=_!==0&&8>_?_:8;var I=ge.T,L={};ge.T=L,Kp(s,!1,l,u);try{var Q=v(),ue=ge.S;if(ue!==null&&ue(L,Q),Q!==null&&typeof Q=="object"&&typeof Q.then=="function"){var Ee=XC(Q,f);ch(s,l,Ee,ha(s))}else ch(s,l,f,ha(s))}catch(Ne){ch(s,l,{then:function(){},status:"rejected",reason:Ne},ha())}finally{De.p=_,ge.T=I}}function tj(){}function Wp(s,l,u,f){if(s.tag!==5)throw Error(n(476));var v=Gy(s).queue;Hy(s,v,l,Fe,u===null?tj:function(){return qy(s),u(f)})}function Gy(s){var l=s.memoizedState;if(l!==null)return l;l={memoizedState:Fe,baseState:Fe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Js,lastRenderedState:Fe},next:null};var u={};return l.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Js,lastRenderedState:u},next:null},s.memoizedState=l,s=s.alternate,s!==null&&(s.memoizedState=l),l}function qy(s){var l=Gy(s).next.queue;ch(s,l,{},ha())}function Yp(){return yn(Ah)}function $y(){return Ar().memoizedState}function Wy(){return Ar().memoizedState}function rj(s){for(var l=s.return;l!==null;){switch(l.tag){case 24:case 3:var u=ha();s=Li(u);var f=Vi(l,s,u);f!==null&&(da(f,l,u),nh(f,l,u)),l={cache:Np()},s.payload=l;return}l=l.return}}function nj(s,l,u){var f=ha();u={lane:f,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null},Df(s)?Ky(l,u):(u=mp(s,l,u,f),u!==null&&(da(u,s,f),Xy(u,l,f)))}function Yy(s,l,u){var f=ha();ch(s,l,u,f)}function ch(s,l,u,f){var v={lane:f,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null};if(Df(s))Ky(l,v);else{var _=s.alternate;if(s.lanes===0&&(_===null||_.lanes===0)&&(_=l.lastRenderedReducer,_!==null))try{var I=l.lastRenderedState,L=_(I,u);if(v.hasEagerState=!0,v.eagerState=L,ia(L,I))return mf(s,l,v,0),er===null&&ff(),!1}catch{}finally{}if(u=mp(s,l,v,f),u!==null)return da(u,s,f),Xy(u,l,f),!0}return!1}function Kp(s,l,u,f){if(f={lane:2,revertLane:Ag(),action:f,hasEagerState:!1,eagerState:null,next:null},Df(s)){if(l)throw Error(n(479))}else l=mp(s,u,f,2),l!==null&&da(l,s,2)}function Df(s){var l=s.alternate;return s===mt||l!==null&&l===mt}function Ky(s,l){pc=bf=!0;var u=s.pending;u===null?l.next=l:(l.next=u.next,u.next=l),s.pending=l}function Xy(s,l,u){if((u&4194048)!==0){var f=l.lanes;f&=s.pendingLanes,u|=f,l.lanes=u,ms(s,u)}}var If={readContext:yn,use:Af,useCallback:_r,useContext:_r,useEffect:_r,useImperativeHandle:_r,useLayoutEffect:_r,useInsertionEffect:_r,useMemo:_r,useReducer:_r,useRef:_r,useState:_r,useDebugValue:_r,useDeferredValue:_r,useTransition:_r,useSyncExternalStore:_r,useId:_r,useHostTransitionStatus:_r,useFormState:_r,useActionState:_r,useOptimistic:_r,useMemoCache:_r,useCacheRefresh:_r},Qy={readContext:yn,use:Af,useCallback:function(s,l){return qn().memoizedState=[s,l===void 0?null:l],s},useContext:yn,useEffect:Oy,useImperativeHandle:function(s,l,u){u=u!=null?u.concat([s]):null,Rf(4194308,4,Ly.bind(null,l,s),u)},useLayoutEffect:function(s,l){return Rf(4194308,4,s,l)},useInsertionEffect:function(s,l){Rf(4,2,s,l)},useMemo:function(s,l){var u=qn();l=l===void 0?null:l;var f=s();if(fl){br(!0);try{s()}finally{br(!1)}}return u.memoizedState=[f,l],f},useReducer:function(s,l,u){var f=qn();if(u!==void 0){var v=u(l);if(fl){br(!0);try{u(l)}finally{br(!1)}}}else v=l;return f.memoizedState=f.baseState=v,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:v},f.queue=s,s=s.dispatch=nj.bind(null,mt,s),[f.memoizedState,s]},useRef:function(s){var l=qn();return s={current:s},l.memoizedState=s},useState:function(s){s=Hp(s);var l=s.queue,u=Yy.bind(null,mt,l);return l.dispatch=u,[s.memoizedState,u]},useDebugValue:qp,useDeferredValue:function(s,l){var u=qn();return $p(u,s,l)},useTransition:function(){var s=Hp(!1);return s=Hy.bind(null,mt,s.queue,!0,!1),qn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,l,u){var f=mt,v=qn();if(Dt){if(u===void 0)throw Error(n(407));u=u()}else{if(u=l(),er===null)throw Error(n(349));(wt&124)!==0||xy(f,l,u)}v.memoizedState=u;var _={value:u,getSnapshot:l};return v.queue=_,Oy(_y.bind(null,f,_,s),[s]),f.flags|=2048,vc(9,jf(),yy.bind(null,f,_,u,l),null),u},useId:function(){var s=qn(),l=er.identifierPrefix;if(Dt){var u=Ks,f=Ys;u=(f&~(1<<32-tn(f)-1)).toString(32)+u,l=""+l+"R"+u,u=Sf++,0<u&&(l+="H"+u.toString(32)),l+=""}else u=QC++,l=""+l+"r"+u.toString(32)+"";return s.memoizedState=l},useHostTransitionStatus:Yp,useFormState:jy,useActionState:jy,useOptimistic:function(s){var l=qn();l.memoizedState=l.baseState=s;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=u,l=Kp.bind(null,mt,!0,u),u.dispatch=l,[s,l]},useMemoCache:Bp,useCacheRefresh:function(){return qn().memoizedState=rj.bind(null,mt)}},Jy={readContext:yn,use:Af,useCallback:By,useContext:yn,useEffect:My,useImperativeHandle:Vy,useInsertionEffect:Py,useLayoutEffect:Fy,useMemo:Uy,useReducer:Cf,useRef:ky,useState:function(){return Cf(Js)},useDebugValue:qp,useDeferredValue:function(s,l){var u=Ar();return zy(u,$t.memoizedState,s,l)},useTransition:function(){var s=Cf(Js)[0],l=Ar().memoizedState;return[typeof s=="boolean"?s:oh(s),l]},useSyncExternalStore:vy,useId:$y,useHostTransitionStatus:Yp,useFormState:Ry,useActionState:Ry,useOptimistic:function(s,l){var u=Ar();return wy(u,$t,s,l)},useMemoCache:Bp,useCacheRefresh:Wy},aj={readContext:yn,use:Af,useCallback:By,useContext:yn,useEffect:My,useImperativeHandle:Vy,useInsertionEffect:Py,useLayoutEffect:Fy,useMemo:Uy,useReducer:zp,useRef:ky,useState:function(){return zp(Js)},useDebugValue:qp,useDeferredValue:function(s,l){var u=Ar();return $t===null?$p(u,s,l):zy(u,$t.memoizedState,s,l)},useTransition:function(){var s=zp(Js)[0],l=Ar().memoizedState;return[typeof s=="boolean"?s:oh(s),l]},useSyncExternalStore:vy,useId:$y,useHostTransitionStatus:Yp,useFormState:Iy,useActionState:Iy,useOptimistic:function(s,l){var u=Ar();return $t!==null?wy(u,$t,s,l):(u.baseState=s,[s,u.queue.dispatch])},useMemoCache:Bp,useCacheRefresh:Wy},xc=null,uh=0;function kf(s){var l=uh;return uh+=1,xc===null&&(xc=[]),cy(xc,s,l)}function hh(s,l){l=l.props.ref,s.ref=l!==void 0?l:null}function Of(s,l){throw l.$$typeof===x?Error(n(525)):(s=Object.prototype.toString.call(l),Error(n(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s)))}function Zy(s){var l=s._init;return l(s._payload)}function e_(s){function l(se,ne){if(s){var oe=se.deletions;oe===null?(se.deletions=[ne],se.flags|=16):oe.push(ne)}}function u(se,ne){if(!s)return null;for(;ne!==null;)l(se,ne),ne=ne.sibling;return null}function f(se){for(var ne=new Map;se!==null;)se.key!==null?ne.set(se.key,se):ne.set(se.index,se),se=se.sibling;return ne}function v(se,ne){return se=Ws(se,ne),se.index=0,se.sibling=null,se}function _(se,ne,oe){return se.index=oe,s?(oe=se.alternate,oe!==null?(oe=oe.index,oe<ne?(se.flags|=67108866,ne):oe):(se.flags|=67108866,ne)):(se.flags|=1048576,ne)}function I(se){return s&&se.alternate===null&&(se.flags|=67108866),se}function L(se,ne,oe,Te){return ne===null||ne.tag!==6?(ne=gp(oe,se.mode,Te),ne.return=se,ne):(ne=v(ne,oe),ne.return=se,ne)}function Q(se,ne,oe,Te){var We=oe.type;return We===w?Ee(se,ne,oe.props.children,Te,oe.key):ne!==null&&(ne.elementType===We||typeof We=="object"&&We!==null&&We.$$typeof===D&&Zy(We)===ne.type)?(ne=v(ne,oe.props),hh(ne,oe),ne.return=se,ne):(ne=gf(oe.type,oe.key,oe.props,null,se.mode,Te),hh(ne,oe),ne.return=se,ne)}function ue(se,ne,oe,Te){return ne===null||ne.tag!==4||ne.stateNode.containerInfo!==oe.containerInfo||ne.stateNode.implementation!==oe.implementation?(ne=vp(oe,se.mode,Te),ne.return=se,ne):(ne=v(ne,oe.children||[]),ne.return=se,ne)}function Ee(se,ne,oe,Te,We){return ne===null||ne.tag!==7?(ne=sl(oe,se.mode,Te,We),ne.return=se,ne):(ne=v(ne,oe),ne.return=se,ne)}function Ne(se,ne,oe){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return ne=gp(""+ne,se.mode,oe),ne.return=se,ne;if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case y:return oe=gf(ne.type,ne.key,ne.props,null,se.mode,oe),hh(oe,ne),oe.return=se,oe;case E:return ne=vp(ne,se.mode,oe),ne.return=se,ne;case D:var Te=ne._init;return ne=Te(ne._payload),Ne(se,ne,oe)}if(ze(ne)||C(ne))return ne=sl(ne,se.mode,oe,null),ne.return=se,ne;if(typeof ne.then=="function")return Ne(se,kf(ne),oe);if(ne.$$typeof===V)return Ne(se,_f(se,ne),oe);Of(se,ne)}return null}function me(se,ne,oe,Te){var We=ne!==null?ne.key:null;if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return We!==null?null:L(se,ne,""+oe,Te);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case y:return oe.key===We?Q(se,ne,oe,Te):null;case E:return oe.key===We?ue(se,ne,oe,Te):null;case D:return We=oe._init,oe=We(oe._payload),me(se,ne,oe,Te)}if(ze(oe)||C(oe))return We!==null?null:Ee(se,ne,oe,Te,null);if(typeof oe.then=="function")return me(se,ne,kf(oe),Te);if(oe.$$typeof===V)return me(se,ne,_f(se,oe),Te);Of(se,oe)}return null}function pe(se,ne,oe,Te,We){if(typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint")return se=se.get(oe)||null,L(ne,se,""+Te,We);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case y:return se=se.get(Te.key===null?oe:Te.key)||null,Q(ne,se,Te,We);case E:return se=se.get(Te.key===null?oe:Te.key)||null,ue(ne,se,Te,We);case D:var pt=Te._init;return Te=pt(Te._payload),pe(se,ne,oe,Te,We)}if(ze(Te)||C(Te))return se=se.get(oe)||null,Ee(ne,se,Te,We,null);if(typeof Te.then=="function")return pe(se,ne,oe,kf(Te),We);if(Te.$$typeof===V)return pe(se,ne,oe,_f(ne,Te),We);Of(ne,Te)}return null}function it(se,ne,oe,Te){for(var We=null,pt=null,Qe=ne,rt=ne=0,$r=null;Qe!==null&&rt<oe.length;rt++){Qe.index>rt?($r=Qe,Qe=null):$r=Qe.sibling;var St=me(se,Qe,oe[rt],Te);if(St===null){Qe===null&&(Qe=$r);break}s&&Qe&&St.alternate===null&&l(se,Qe),ne=_(St,ne,rt),pt===null?We=St:pt.sibling=St,pt=St,Qe=$r}if(rt===oe.length)return u(se,Qe),Dt&&ol(se,rt),We;if(Qe===null){for(;rt<oe.length;rt++)Qe=Ne(se,oe[rt],Te),Qe!==null&&(ne=_(Qe,ne,rt),pt===null?We=Qe:pt.sibling=Qe,pt=Qe);return Dt&&ol(se,rt),We}for(Qe=f(Qe);rt<oe.length;rt++)$r=pe(Qe,se,rt,oe[rt],Te),$r!==null&&(s&&$r.alternate!==null&&Qe.delete($r.key===null?rt:$r.key),ne=_($r,ne,rt),pt===null?We=$r:pt.sibling=$r,pt=$r);return s&&Qe.forEach(function(ro){return l(se,ro)}),Dt&&ol(se,rt),We}function tt(se,ne,oe,Te){if(oe==null)throw Error(n(151));for(var We=null,pt=null,Qe=ne,rt=ne=0,$r=null,St=oe.next();Qe!==null&&!St.done;rt++,St=oe.next()){Qe.index>rt?($r=Qe,Qe=null):$r=Qe.sibling;var ro=me(se,Qe,St.value,Te);if(ro===null){Qe===null&&(Qe=$r);break}s&&Qe&&ro.alternate===null&&l(se,Qe),ne=_(ro,ne,rt),pt===null?We=ro:pt.sibling=ro,pt=ro,Qe=$r}if(St.done)return u(se,Qe),Dt&&ol(se,rt),We;if(Qe===null){for(;!St.done;rt++,St=oe.next())St=Ne(se,St.value,Te),St!==null&&(ne=_(St,ne,rt),pt===null?We=St:pt.sibling=St,pt=St);return Dt&&ol(se,rt),We}for(Qe=f(Qe);!St.done;rt++,St=oe.next())St=pe(Qe,se,rt,St.value,Te),St!==null&&(s&&St.alternate!==null&&Qe.delete(St.key===null?rt:St.key),ne=_(St,ne,rt),pt===null?We=St:pt.sibling=St,pt=St);return s&&Qe.forEach(function(sR){return l(se,sR)}),Dt&&ol(se,rt),We}function Yt(se,ne,oe,Te){if(typeof oe=="object"&&oe!==null&&oe.type===w&&oe.key===null&&(oe=oe.props.children),typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case y:e:{for(var We=oe.key;ne!==null;){if(ne.key===We){if(We=oe.type,We===w){if(ne.tag===7){u(se,ne.sibling),Te=v(ne,oe.props.children),Te.return=se,se=Te;break e}}else if(ne.elementType===We||typeof We=="object"&&We!==null&&We.$$typeof===D&&Zy(We)===ne.type){u(se,ne.sibling),Te=v(ne,oe.props),hh(Te,oe),Te.return=se,se=Te;break e}u(se,ne);break}else l(se,ne);ne=ne.sibling}oe.type===w?(Te=sl(oe.props.children,se.mode,Te,oe.key),Te.return=se,se=Te):(Te=gf(oe.type,oe.key,oe.props,null,se.mode,Te),hh(Te,oe),Te.return=se,se=Te)}return I(se);case E:e:{for(We=oe.key;ne!==null;){if(ne.key===We)if(ne.tag===4&&ne.stateNode.containerInfo===oe.containerInfo&&ne.stateNode.implementation===oe.implementation){u(se,ne.sibling),Te=v(ne,oe.children||[]),Te.return=se,se=Te;break e}else{u(se,ne);break}else l(se,ne);ne=ne.sibling}Te=vp(oe,se.mode,Te),Te.return=se,se=Te}return I(se);case D:return We=oe._init,oe=We(oe._payload),Yt(se,ne,oe,Te)}if(ze(oe))return it(se,ne,oe,Te);if(C(oe)){if(We=C(oe),typeof We!="function")throw Error(n(150));return oe=We.call(oe),tt(se,ne,oe,Te)}if(typeof oe.then=="function")return Yt(se,ne,kf(oe),Te);if(oe.$$typeof===V)return Yt(se,ne,_f(se,oe),Te);Of(se,oe)}return typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint"?(oe=""+oe,ne!==null&&ne.tag===6?(u(se,ne.sibling),Te=v(ne,oe),Te.return=se,se=Te):(u(se,ne),Te=gp(oe,se.mode,Te),Te.return=se,se=Te),I(se)):u(se,ne)}return function(se,ne,oe,Te){try{uh=0;var We=Yt(se,ne,oe,Te);return xc=null,We}catch(Qe){if(Qe===th||Qe===Tf)throw Qe;var pt=oa(29,Qe,null,se.mode);return pt.lanes=Te,pt.return=se,pt}finally{}}}var yc=e_(!0),t_=e_(!1),ja=_e(null),ys=null;function Ui(s){var l=s.alternate;ee(Fr,Fr.current&1),ee(ja,s),ys===null&&(l===null||mc.current!==null||l.memoizedState!==null)&&(ys=s)}function r_(s){if(s.tag===22){if(ee(Fr,Fr.current),ee(ja,s),ys===null){var l=s.alternate;l!==null&&l.memoizedState!==null&&(ys=s)}}else zi()}function zi(){ee(Fr,Fr.current),ee(ja,ja.current)}function Zs(s){Y(ja),ys===s&&(ys=null),Y(Fr)}var Fr=_e(0);function Mf(s){for(var l=s;l!==null;){if(l.tag===13){var u=l.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||Vg(u)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function Xp(s,l,u,f){l=s.memoizedState,u=u(f,l),u=u==null?l:p({},l,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var Qp={enqueueSetState:function(s,l,u){s=s._reactInternals;var f=ha(),v=Li(f);v.payload=l,u!=null&&(v.callback=u),l=Vi(s,v,f),l!==null&&(da(l,s,f),nh(l,s,f))},enqueueReplaceState:function(s,l,u){s=s._reactInternals;var f=ha(),v=Li(f);v.tag=1,v.payload=l,u!=null&&(v.callback=u),l=Vi(s,v,f),l!==null&&(da(l,s,f),nh(l,s,f))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var u=ha(),f=Li(u);f.tag=2,l!=null&&(f.callback=l),l=Vi(s,f,u),l!==null&&(da(l,s,u),nh(l,s,u))}};function n_(s,l,u,f,v,_,I){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(f,_,I):l.prototype&&l.prototype.isPureReactComponent?!Wu(u,f)||!Wu(v,_):!0}function a_(s,l,u,f){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(u,f),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(u,f),l.state!==s&&Qp.enqueueReplaceState(l,l.state,null)}function ml(s,l){var u=l;if("ref"in l){u={};for(var f in l)f!=="ref"&&(u[f]=l[f])}if(s=s.defaultProps){u===l&&(u=p({},u));for(var v in s)u[v]===void 0&&(u[v]=s[v])}return u}var Pf=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function s_(s){Pf(s)}function i_(s){console.error(s)}function o_(s){Pf(s)}function Ff(s,l){try{var u=s.onUncaughtError;u(l.value,{componentStack:l.stack})}catch(f){setTimeout(function(){throw f})}}function l_(s,l,u){try{var f=s.onCaughtError;f(u.value,{componentStack:u.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function Jp(s,l,u){return u=Li(u),u.tag=3,u.payload={element:null},u.callback=function(){Ff(s,l)},u}function c_(s){return s=Li(s),s.tag=3,s}function u_(s,l,u,f){var v=u.type.getDerivedStateFromError;if(typeof v=="function"){var _=f.value;s.payload=function(){return v(_)},s.callback=function(){l_(l,u,f)}}var I=u.stateNode;I!==null&&typeof I.componentDidCatch=="function"&&(s.callback=function(){l_(l,u,f),typeof v!="function"&&(Yi===null?Yi=new Set([this]):Yi.add(this));var L=f.stack;this.componentDidCatch(f.value,{componentStack:L!==null?L:""})})}function sj(s,l,u,f,v){if(u.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(l=u.alternate,l!==null&&Ju(l,u,v,!0),u=ja.current,u!==null){switch(u.tag){case 13:return ys===null?Tg():u.alternate===null&&fr===0&&(fr=3),u.flags&=-257,u.flags|=65536,u.lanes=v,f===Ap?u.flags|=16384:(l=u.updateQueue,l===null?u.updateQueue=new Set([f]):l.add(f),Ng(s,f,v)),!1;case 22:return u.flags|=65536,f===Ap?u.flags|=16384:(l=u.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([f])},u.updateQueue=l):(u=l.retryQueue,u===null?l.retryQueue=new Set([f]):u.add(f)),Ng(s,f,v)),!1}throw Error(n(435,u.tag))}return Ng(s,f,v),Tg(),!1}if(Dt)return l=ja.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=v,f!==_p&&(s=Error(n(422),{cause:f}),Qu(ba(s,u)))):(f!==_p&&(l=Error(n(423),{cause:f}),Qu(ba(l,u))),s=s.current.alternate,s.flags|=65536,v&=-v,s.lanes|=v,f=ba(f,u),v=Jp(s.stateNode,f,v),Rp(s,v),fr!==4&&(fr=2)),!1;var _=Error(n(520),{cause:f});if(_=ba(_,u),xh===null?xh=[_]:xh.push(_),fr!==4&&(fr=2),l===null)return!0;f=ba(f,u),u=l;do{switch(u.tag){case 3:return u.flags|=65536,s=v&-v,u.lanes|=s,s=Jp(u.stateNode,f,s),Rp(u,s),!1;case 1:if(l=u.type,_=u.stateNode,(u.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Yi===null||!Yi.has(_))))return u.flags|=65536,v&=-v,u.lanes|=v,v=c_(v),u_(v,s,u,f),Rp(u,v),!1}u=u.return}while(u!==null);return!1}var h_=Error(n(461)),Gr=!1;function rn(s,l,u,f){l.child=s===null?t_(l,null,u,f):yc(l,s.child,u,f)}function d_(s,l,u,f,v){u=u.render;var _=l.ref;if("ref"in f){var I={};for(var L in f)L!=="ref"&&(I[L]=f[L])}else I=f;return hl(l),f=Mp(s,l,u,I,_,v),L=Pp(),s!==null&&!Gr?(Fp(s,l,v),ei(s,l,v)):(Dt&&L&&xp(l),l.flags|=1,rn(s,l,f,v),l.child)}function f_(s,l,u,f,v){if(s===null){var _=u.type;return typeof _=="function"&&!pp(_)&&_.defaultProps===void 0&&u.compare===null?(l.tag=15,l.type=_,m_(s,l,_,f,v)):(s=gf(u.type,null,f,l,l.mode,v),s.ref=l.ref,s.return=l,l.child=s)}if(_=s.child,!ig(s,v)){var I=_.memoizedProps;if(u=u.compare,u=u!==null?u:Wu,u(I,f)&&s.ref===l.ref)return ei(s,l,v)}return l.flags|=1,s=Ws(_,f),s.ref=l.ref,s.return=l,l.child=s}function m_(s,l,u,f,v){if(s!==null){var _=s.memoizedProps;if(Wu(_,f)&&s.ref===l.ref)if(Gr=!1,l.pendingProps=f=_,ig(s,v))(s.flags&131072)!==0&&(Gr=!0);else return l.lanes=s.lanes,ei(s,l,v)}return Zp(s,l,u,f,v)}function p_(s,l,u){var f=l.pendingProps,v=f.children,_=s!==null?s.memoizedState:null;if(f.mode==="hidden"){if((l.flags&128)!==0){if(f=_!==null?_.baseLanes|u:u,s!==null){for(v=l.child=s.child,_=0;v!==null;)_=_|v.lanes|v.childLanes,v=v.sibling;l.childLanes=_&~f}else l.childLanes=0,l.child=null;return g_(s,l,f,u)}if((u&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},s!==null&&Ef(l,_!==null?_.cachePool:null),_!==null?my(l,_):Ip(),r_(l);else return l.lanes=l.childLanes=536870912,g_(s,l,_!==null?_.baseLanes|u:u,u)}else _!==null?(Ef(l,_.cachePool),my(l,_),zi(),l.memoizedState=null):(s!==null&&Ef(l,null),Ip(),zi());return rn(s,l,v,u),l.child}function g_(s,l,u,f){var v=Sp();return v=v===null?null:{parent:Pr._currentValue,pool:v},l.memoizedState={baseLanes:u,cachePool:v},s!==null&&Ef(l,null),Ip(),r_(l),s!==null&&Ju(s,l,f,!0),null}function Lf(s,l){var u=l.ref;if(u===null)s!==null&&s.ref!==null&&(l.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(n(284));(s===null||s.ref!==u)&&(l.flags|=4194816)}}function Zp(s,l,u,f,v){return hl(l),u=Mp(s,l,u,f,void 0,v),f=Pp(),s!==null&&!Gr?(Fp(s,l,v),ei(s,l,v)):(Dt&&f&&xp(l),l.flags|=1,rn(s,l,u,v),l.child)}function v_(s,l,u,f,v,_){return hl(l),l.updateQueue=null,u=gy(l,f,u,v),py(s),f=Pp(),s!==null&&!Gr?(Fp(s,l,_),ei(s,l,_)):(Dt&&f&&xp(l),l.flags|=1,rn(s,l,u,_),l.child)}function x_(s,l,u,f,v){if(hl(l),l.stateNode===null){var _=cc,I=u.contextType;typeof I=="object"&&I!==null&&(_=yn(I)),_=new u(f,_),l.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Qp,l.stateNode=_,_._reactInternals=l,_=l.stateNode,_.props=f,_.state=l.memoizedState,_.refs={},Cp(l),I=u.contextType,_.context=typeof I=="object"&&I!==null?yn(I):cc,_.state=l.memoizedState,I=u.getDerivedStateFromProps,typeof I=="function"&&(Xp(l,u,I,f),_.state=l.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(I=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),I!==_.state&&Qp.enqueueReplaceState(_,_.state,null),sh(l,f,_,v),ah(),_.state=l.memoizedState),typeof _.componentDidMount=="function"&&(l.flags|=4194308),f=!0}else if(s===null){_=l.stateNode;var L=l.memoizedProps,Q=ml(u,L);_.props=Q;var ue=_.context,Ee=u.contextType;I=cc,typeof Ee=="object"&&Ee!==null&&(I=yn(Ee));var Ne=u.getDerivedStateFromProps;Ee=typeof Ne=="function"||typeof _.getSnapshotBeforeUpdate=="function",L=l.pendingProps!==L,Ee||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(L||ue!==I)&&a_(l,_,f,I),Fi=!1;var me=l.memoizedState;_.state=me,sh(l,f,_,v),ah(),ue=l.memoizedState,L||me!==ue||Fi?(typeof Ne=="function"&&(Xp(l,u,Ne,f),ue=l.memoizedState),(Q=Fi||n_(l,u,Q,f,me,ue,I))?(Ee||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(l.flags|=4194308)):(typeof _.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=f,l.memoizedState=ue),_.props=f,_.state=ue,_.context=I,f=Q):(typeof _.componentDidMount=="function"&&(l.flags|=4194308),f=!1)}else{_=l.stateNode,jp(s,l),I=l.memoizedProps,Ee=ml(u,I),_.props=Ee,Ne=l.pendingProps,me=_.context,ue=u.contextType,Q=cc,typeof ue=="object"&&ue!==null&&(Q=yn(ue)),L=u.getDerivedStateFromProps,(ue=typeof L=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(I!==Ne||me!==Q)&&a_(l,_,f,Q),Fi=!1,me=l.memoizedState,_.state=me,sh(l,f,_,v),ah();var pe=l.memoizedState;I!==Ne||me!==pe||Fi||s!==null&&s.dependencies!==null&&yf(s.dependencies)?(typeof L=="function"&&(Xp(l,u,L,f),pe=l.memoizedState),(Ee=Fi||n_(l,u,Ee,f,me,pe,Q)||s!==null&&s.dependencies!==null&&yf(s.dependencies))?(ue||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(f,pe,Q),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(f,pe,Q)),typeof _.componentDidUpdate=="function"&&(l.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof _.componentDidUpdate!="function"||I===s.memoizedProps&&me===s.memoizedState||(l.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||I===s.memoizedProps&&me===s.memoizedState||(l.flags|=1024),l.memoizedProps=f,l.memoizedState=pe),_.props=f,_.state=pe,_.context=Q,f=Ee):(typeof _.componentDidUpdate!="function"||I===s.memoizedProps&&me===s.memoizedState||(l.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||I===s.memoizedProps&&me===s.memoizedState||(l.flags|=1024),f=!1)}return _=f,Lf(s,l),f=(l.flags&128)!==0,_||f?(_=l.stateNode,u=f&&typeof u.getDerivedStateFromError!="function"?null:_.render(),l.flags|=1,s!==null&&f?(l.child=yc(l,s.child,null,v),l.child=yc(l,null,u,v)):rn(s,l,u,v),l.memoizedState=_.state,s=l.child):s=ei(s,l,v),s}function y_(s,l,u,f){return Xu(),l.flags|=256,rn(s,l,u,f),l.child}var eg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function tg(s){return{baseLanes:s,cachePool:iy()}}function rg(s,l,u){return s=s!==null?s.childLanes&~u:0,l&&(s|=Ra),s}function __(s,l,u){var f=l.pendingProps,v=!1,_=(l.flags&128)!==0,I;if((I=_)||(I=s!==null&&s.memoizedState===null?!1:(Fr.current&2)!==0),I&&(v=!0,l.flags&=-129),I=(l.flags&32)!==0,l.flags&=-33,s===null){if(Dt){if(v?Ui(l):zi(),Dt){var L=dr,Q;if(Q=L){e:{for(Q=L,L=xs;Q.nodeType!==8;){if(!L){L=null;break e}if(Q=Xa(Q.nextSibling),Q===null){L=null;break e}}L=Q}L!==null?(l.memoizedState={dehydrated:L,treeContext:il!==null?{id:Ys,overflow:Ks}:null,retryLane:536870912,hydrationErrors:null},Q=oa(18,null,null,0),Q.stateNode=L,Q.return=l,l.child=Q,In=l,dr=null,Q=!0):Q=!1}Q||cl(l)}if(L=l.memoizedState,L!==null&&(L=L.dehydrated,L!==null))return Vg(L)?l.lanes=32:l.lanes=536870912,null;Zs(l)}return L=f.children,f=f.fallback,v?(zi(),v=l.mode,L=Vf({mode:"hidden",children:L},v),f=sl(f,v,u,null),L.return=l,f.return=l,L.sibling=f,l.child=L,v=l.child,v.memoizedState=tg(u),v.childLanes=rg(s,I,u),l.memoizedState=eg,f):(Ui(l),ng(l,L))}if(Q=s.memoizedState,Q!==null&&(L=Q.dehydrated,L!==null)){if(_)l.flags&256?(Ui(l),l.flags&=-257,l=ag(s,l,u)):l.memoizedState!==null?(zi(),l.child=s.child,l.flags|=128,l=null):(zi(),v=f.fallback,L=l.mode,f=Vf({mode:"visible",children:f.children},L),v=sl(v,L,u,null),v.flags|=2,f.return=l,v.return=l,f.sibling=v,l.child=f,yc(l,s.child,null,u),f=l.child,f.memoizedState=tg(u),f.childLanes=rg(s,I,u),l.memoizedState=eg,l=v);else if(Ui(l),Vg(L)){if(I=L.nextSibling&&L.nextSibling.dataset,I)var ue=I.dgst;I=ue,f=Error(n(419)),f.stack="",f.digest=I,Qu({value:f,source:null,stack:null}),l=ag(s,l,u)}else if(Gr||Ju(s,l,u,!1),I=(u&s.childLanes)!==0,Gr||I){if(I=er,I!==null&&(f=u&-u,f=(f&42)!==0?1:zo(f),f=(f&(I.suspendedLanes|u))!==0?0:f,f!==0&&f!==Q.retryLane))throw Q.retryLane=f,lc(s,f),da(I,s,f),h_;L.data==="$?"||Tg(),l=ag(s,l,u)}else L.data==="$?"?(l.flags|=192,l.child=s.child,l=null):(s=Q.treeContext,dr=Xa(L.nextSibling),In=l,Dt=!0,ll=null,xs=!1,s!==null&&(Aa[Ca++]=Ys,Aa[Ca++]=Ks,Aa[Ca++]=il,Ys=s.id,Ks=s.overflow,il=l),l=ng(l,f.children),l.flags|=4096);return l}return v?(zi(),v=f.fallback,L=l.mode,Q=s.child,ue=Q.sibling,f=Ws(Q,{mode:"hidden",children:f.children}),f.subtreeFlags=Q.subtreeFlags&65011712,ue!==null?v=Ws(ue,v):(v=sl(v,L,u,null),v.flags|=2),v.return=l,f.return=l,f.sibling=v,l.child=f,f=v,v=l.child,L=s.child.memoizedState,L===null?L=tg(u):(Q=L.cachePool,Q!==null?(ue=Pr._currentValue,Q=Q.parent!==ue?{parent:ue,pool:ue}:Q):Q=iy(),L={baseLanes:L.baseLanes|u,cachePool:Q}),v.memoizedState=L,v.childLanes=rg(s,I,u),l.memoizedState=eg,f):(Ui(l),u=s.child,s=u.sibling,u=Ws(u,{mode:"visible",children:f.children}),u.return=l,u.sibling=null,s!==null&&(I=l.deletions,I===null?(l.deletions=[s],l.flags|=16):I.push(s)),l.child=u,l.memoizedState=null,u)}function ng(s,l){return l=Vf({mode:"visible",children:l},s.mode),l.return=s,s.child=l}function Vf(s,l){return s=oa(22,s,null,l),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function ag(s,l,u){return yc(l,s.child,null,u),s=ng(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function E_(s,l,u){s.lanes|=l;var f=s.alternate;f!==null&&(f.lanes|=l),Tp(s.return,l,u)}function sg(s,l,u,f,v){var _=s.memoizedState;_===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:v}:(_.isBackwards=l,_.rendering=null,_.renderingStartTime=0,_.last=f,_.tail=u,_.tailMode=v)}function T_(s,l,u){var f=l.pendingProps,v=f.revealOrder,_=f.tail;if(rn(s,l,f.children,u),f=Fr.current,(f&2)!==0)f=f&1|2,l.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&E_(s,u,l);else if(s.tag===19)E_(s,u,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}f&=1}switch(ee(Fr,f),v){case"forwards":for(u=l.child,v=null;u!==null;)s=u.alternate,s!==null&&Mf(s)===null&&(v=u),u=u.sibling;u=v,u===null?(v=l.child,l.child=null):(v=u.sibling,u.sibling=null),sg(l,!1,v,u,_);break;case"backwards":for(u=null,v=l.child,l.child=null;v!==null;){if(s=v.alternate,s!==null&&Mf(s)===null){l.child=v;break}s=v.sibling,v.sibling=u,u=v,v=s}sg(l,!0,u,null,_);break;case"together":sg(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function ei(s,l,u){if(s!==null&&(l.dependencies=s.dependencies),Wi|=l.lanes,(u&l.childLanes)===0)if(s!==null){if(Ju(s,l,u,!1),(u&l.childLanes)===0)return null}else return null;if(s!==null&&l.child!==s.child)throw Error(n(153));if(l.child!==null){for(s=l.child,u=Ws(s,s.pendingProps),l.child=u,u.return=l;s.sibling!==null;)s=s.sibling,u=u.sibling=Ws(s,s.pendingProps),u.return=l;u.sibling=null}return l.child}function ig(s,l){return(s.lanes&l)!==0?!0:(s=s.dependencies,!!(s!==null&&yf(s)))}function ij(s,l,u){switch(l.tag){case 3:ke(l,l.stateNode.containerInfo),Pi(l,Pr,s.memoizedState.cache),Xu();break;case 27:case 5:ae(l);break;case 4:ke(l,l.stateNode.containerInfo);break;case 10:Pi(l,l.type,l.memoizedProps.value);break;case 13:var f=l.memoizedState;if(f!==null)return f.dehydrated!==null?(Ui(l),l.flags|=128,null):(u&l.child.childLanes)!==0?__(s,l,u):(Ui(l),s=ei(s,l,u),s!==null?s.sibling:null);Ui(l);break;case 19:var v=(s.flags&128)!==0;if(f=(u&l.childLanes)!==0,f||(Ju(s,l,u,!1),f=(u&l.childLanes)!==0),v){if(f)return T_(s,l,u);l.flags|=128}if(v=l.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),ee(Fr,Fr.current),f)break;return null;case 22:case 23:return l.lanes=0,p_(s,l,u);case 24:Pi(l,Pr,s.memoizedState.cache)}return ei(s,l,u)}function w_(s,l,u){if(s!==null)if(s.memoizedProps!==l.pendingProps)Gr=!0;else{if(!ig(s,u)&&(l.flags&128)===0)return Gr=!1,ij(s,l,u);Gr=(s.flags&131072)!==0}else Gr=!1,Dt&&(l.flags&1048576)!==0&&Z1(l,xf,l.index);switch(l.lanes=0,l.tag){case 16:e:{s=l.pendingProps;var f=l.elementType,v=f._init;if(f=v(f._payload),l.type=f,typeof f=="function")pp(f)?(s=ml(f,s),l.tag=1,l=x_(null,l,f,s,u)):(l.tag=0,l=Zp(null,l,f,s,u));else{if(f!=null){if(v=f.$$typeof,v===H){l.tag=11,l=d_(null,l,f,s,u);break e}else if(v===j){l.tag=14,l=f_(null,l,f,s,u);break e}}throw l=Ce(f)||f,Error(n(306,l,""))}}return l;case 0:return Zp(s,l,l.type,l.pendingProps,u);case 1:return f=l.type,v=ml(f,l.pendingProps),x_(s,l,f,v,u);case 3:e:{if(ke(l,l.stateNode.containerInfo),s===null)throw Error(n(387));f=l.pendingProps;var _=l.memoizedState;v=_.element,jp(s,l),sh(l,f,null,u);var I=l.memoizedState;if(f=I.cache,Pi(l,Pr,f),f!==_.cache&&wp(l,[Pr],u,!0),ah(),f=I.element,_.isDehydrated)if(_={element:f,isDehydrated:!1,cache:I.cache},l.updateQueue.baseState=_,l.memoizedState=_,l.flags&256){l=y_(s,l,f,u);break e}else if(f!==v){v=ba(Error(n(424)),l),Qu(v),l=y_(s,l,f,u);break e}else{switch(s=l.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(dr=Xa(s.firstChild),In=l,Dt=!0,ll=null,xs=!0,u=t_(l,null,f,u),l.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(Xu(),f===v){l=ei(s,l,u);break e}rn(s,l,f,u)}l=l.child}return l;case 26:return Lf(s,l),s===null?(u=A2(l.type,null,l.pendingProps,null))?l.memoizedState=u:Dt||(u=l.type,s=l.pendingProps,f=Zf(he.current).createElement(u),f[lr]=l,f[xr]=s,an(f,u,s),ie(f),l.stateNode=f):l.memoizedState=A2(l.type,s.memoizedProps,l.pendingProps,s.memoizedState),null;case 27:return ae(l),s===null&&Dt&&(f=l.stateNode=N2(l.type,l.pendingProps,he.current),In=l,xs=!0,v=dr,Qi(l.type)?(Bg=v,dr=Xa(f.firstChild)):dr=v),rn(s,l,l.pendingProps.children,u),Lf(s,l),s===null&&(l.flags|=4194304),l.child;case 5:return s===null&&Dt&&((v=f=dr)&&(f=Oj(f,l.type,l.pendingProps,xs),f!==null?(l.stateNode=f,In=l,dr=Xa(f.firstChild),xs=!1,v=!0):v=!1),v||cl(l)),ae(l),v=l.type,_=l.pendingProps,I=s!==null?s.memoizedProps:null,f=_.children,Pg(v,_)?f=null:I!==null&&Pg(v,I)&&(l.flags|=32),l.memoizedState!==null&&(v=Mp(s,l,JC,null,null,u),Ah._currentValue=v),Lf(s,l),rn(s,l,f,u),l.child;case 6:return s===null&&Dt&&((s=u=dr)&&(u=Mj(u,l.pendingProps,xs),u!==null?(l.stateNode=u,In=l,dr=null,s=!0):s=!1),s||cl(l)),null;case 13:return __(s,l,u);case 4:return ke(l,l.stateNode.containerInfo),f=l.pendingProps,s===null?l.child=yc(l,null,f,u):rn(s,l,f,u),l.child;case 11:return d_(s,l,l.type,l.pendingProps,u);case 7:return rn(s,l,l.pendingProps,u),l.child;case 8:return rn(s,l,l.pendingProps.children,u),l.child;case 12:return rn(s,l,l.pendingProps.children,u),l.child;case 10:return f=l.pendingProps,Pi(l,l.type,f.value),rn(s,l,f.children,u),l.child;case 9:return v=l.type._context,f=l.pendingProps.children,hl(l),v=yn(v),f=f(v),l.flags|=1,rn(s,l,f,u),l.child;case 14:return f_(s,l,l.type,l.pendingProps,u);case 15:return m_(s,l,l.type,l.pendingProps,u);case 19:return T_(s,l,u);case 31:return f=l.pendingProps,u=l.mode,f={mode:f.mode,children:f.children},s===null?(u=Vf(f,u),u.ref=l.ref,l.child=u,u.return=l,l=u):(u=Ws(s.child,f),u.ref=l.ref,l.child=u,u.return=l,l=u),l;case 22:return p_(s,l,u);case 24:return hl(l),f=yn(Pr),s===null?(v=Sp(),v===null&&(v=er,_=Np(),v.pooledCache=_,_.refCount++,_!==null&&(v.pooledCacheLanes|=u),v=_),l.memoizedState={parent:f,cache:v},Cp(l),Pi(l,Pr,v)):((s.lanes&u)!==0&&(jp(s,l),sh(l,null,null,u),ah()),v=s.memoizedState,_=l.memoizedState,v.parent!==f?(v={parent:f,cache:f},l.memoizedState=v,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=v),Pi(l,Pr,f)):(f=_.cache,Pi(l,Pr,f),f!==v.cache&&wp(l,[Pr],u,!0))),rn(s,l,l.pendingProps.children,u),l.child;case 29:throw l.pendingProps}throw Error(n(156,l.tag))}function ti(s){s.flags|=4}function N_(s,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!I2(l)){if(l=ja.current,l!==null&&((wt&4194048)===wt?ys!==null:(wt&62914560)!==wt&&(wt&536870912)===0||l!==ys))throw rh=Ap,oy;s.flags|=8192}}function Bf(s,l){l!==null&&(s.flags|=4),s.flags&16384&&(l=s.tag!==22?Ba():536870912,s.lanes|=l,wc|=l)}function dh(s,l){if(!Dt)switch(s.tailMode){case"hidden":l=s.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:f.sibling=null}}function ur(s){var l=s.alternate!==null&&s.alternate.child===s.child,u=0,f=0;if(l)for(var v=s.child;v!==null;)u|=v.lanes|v.childLanes,f|=v.subtreeFlags&65011712,f|=v.flags&65011712,v.return=s,v=v.sibling;else for(v=s.child;v!==null;)u|=v.lanes|v.childLanes,f|=v.subtreeFlags,f|=v.flags,v.return=s,v=v.sibling;return s.subtreeFlags|=f,s.childLanes=u,l}function oj(s,l,u){var f=l.pendingProps;switch(yp(l),l.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ur(l),null;case 1:return ur(l),null;case 3:return u=l.stateNode,f=null,s!==null&&(f=s.memoizedState.cache),l.memoizedState.cache!==f&&(l.flags|=2048),Qs(Pr),He(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(s===null||s.child===null)&&(Ku(l)?ti(l):s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,ry())),ur(l),null;case 26:return u=l.memoizedState,s===null?(ti(l),u!==null?(ur(l),N_(l,u)):(ur(l),l.flags&=-16777217)):u?u!==s.memoizedState?(ti(l),ur(l),N_(l,u)):(ur(l),l.flags&=-16777217):(s.memoizedProps!==f&&ti(l),ur(l),l.flags&=-16777217),null;case 27:Ve(l),u=he.current;var v=l.type;if(s!==null&&l.stateNode!=null)s.memoizedProps!==f&&ti(l);else{if(!f){if(l.stateNode===null)throw Error(n(166));return ur(l),null}s=J.current,Ku(l)?ey(l):(s=N2(v,f,u),l.stateNode=s,ti(l))}return ur(l),null;case 5:if(Ve(l),u=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==f&&ti(l);else{if(!f){if(l.stateNode===null)throw Error(n(166));return ur(l),null}if(s=J.current,Ku(l))ey(l);else{switch(v=Zf(he.current),s){case 1:s=v.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:s=v.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":s=v.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":s=v.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":s=v.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof f.is=="string"?v.createElement("select",{is:f.is}):v.createElement("select"),f.multiple?s.multiple=!0:f.size&&(s.size=f.size);break;default:s=typeof f.is=="string"?v.createElement(u,{is:f.is}):v.createElement(u)}}s[lr]=l,s[xr]=f;e:for(v=l.child;v!==null;){if(v.tag===5||v.tag===6)s.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===l)break e;for(;v.sibling===null;){if(v.return===null||v.return===l)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}l.stateNode=s;e:switch(an(s,u,f),u){case"button":case"input":case"select":case"textarea":s=!!f.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&ti(l)}}return ur(l),l.flags&=-16777217,null;case 6:if(s&&l.stateNode!=null)s.memoizedProps!==f&&ti(l);else{if(typeof f!="string"&&l.stateNode===null)throw Error(n(166));if(s=he.current,Ku(l)){if(s=l.stateNode,u=l.memoizedProps,f=null,v=In,v!==null)switch(v.tag){case 27:case 5:f=v.memoizedProps}s[lr]=l,s=!!(s.nodeValue===u||f!==null&&f.suppressHydrationWarning===!0||v2(s.nodeValue,u)),s||cl(l)}else s=Zf(s).createTextNode(f),s[lr]=l,l.stateNode=s}return ur(l),null;case 13:if(f=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(v=Ku(l),f!==null&&f.dehydrated!==null){if(s===null){if(!v)throw Error(n(318));if(v=l.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(n(317));v[lr]=l}else Xu(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;ur(l),v=!1}else v=ry(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=v),v=!0;if(!v)return l.flags&256?(Zs(l),l):(Zs(l),null)}if(Zs(l),(l.flags&128)!==0)return l.lanes=u,l;if(u=f!==null,s=s!==null&&s.memoizedState!==null,u){f=l.child,v=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(v=f.alternate.memoizedState.cachePool.pool);var _=null;f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(_=f.memoizedState.cachePool.pool),_!==v&&(f.flags|=2048)}return u!==s&&u&&(l.child.flags|=8192),Bf(l,l.updateQueue),ur(l),null;case 4:return He(),s===null&&Dg(l.stateNode.containerInfo),ur(l),null;case 10:return Qs(l.type),ur(l),null;case 19:if(Y(Fr),v=l.memoizedState,v===null)return ur(l),null;if(f=(l.flags&128)!==0,_=v.rendering,_===null)if(f)dh(v,!1);else{if(fr!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(_=Mf(s),_!==null){for(l.flags|=128,dh(v,!1),s=_.updateQueue,l.updateQueue=s,Bf(l,s),l.subtreeFlags=0,s=u,u=l.child;u!==null;)J1(u,s),u=u.sibling;return ee(Fr,Fr.current&1|2),l.child}s=s.sibling}v.tail!==null&&Be()>Hf&&(l.flags|=128,f=!0,dh(v,!1),l.lanes=4194304)}else{if(!f)if(s=Mf(_),s!==null){if(l.flags|=128,f=!0,s=s.updateQueue,l.updateQueue=s,Bf(l,s),dh(v,!0),v.tail===null&&v.tailMode==="hidden"&&!_.alternate&&!Dt)return ur(l),null}else 2*Be()-v.renderingStartTime>Hf&&u!==536870912&&(l.flags|=128,f=!0,dh(v,!1),l.lanes=4194304);v.isBackwards?(_.sibling=l.child,l.child=_):(s=v.last,s!==null?s.sibling=_:l.child=_,v.last=_)}return v.tail!==null?(l=v.tail,v.rendering=l,v.tail=l.sibling,v.renderingStartTime=Be(),l.sibling=null,s=Fr.current,ee(Fr,f?s&1|2:s&1),l):(ur(l),null);case 22:case 23:return Zs(l),kp(),f=l.memoizedState!==null,s!==null?s.memoizedState!==null!==f&&(l.flags|=8192):f&&(l.flags|=8192),f?(u&536870912)!==0&&(l.flags&128)===0&&(ur(l),l.subtreeFlags&6&&(l.flags|=8192)):ur(l),u=l.updateQueue,u!==null&&Bf(l,u.retryQueue),u=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),f=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==u&&(l.flags|=2048),s!==null&&Y(dl),null;case 24:return u=null,s!==null&&(u=s.memoizedState.cache),l.memoizedState.cache!==u&&(l.flags|=2048),Qs(Pr),ur(l),null;case 25:return null;case 30:return null}throw Error(n(156,l.tag))}function lj(s,l){switch(yp(l),l.tag){case 1:return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return Qs(Pr),He(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 26:case 27:case 5:return Ve(l),null;case 13:if(Zs(l),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(n(340));Xu()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return Y(Fr),null;case 4:return He(),null;case 10:return Qs(l.type),null;case 22:case 23:return Zs(l),kp(),s!==null&&Y(dl),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 24:return Qs(Pr),null;case 25:return null;default:return null}}function b_(s,l){switch(yp(l),l.tag){case 3:Qs(Pr),He();break;case 26:case 27:case 5:Ve(l);break;case 4:He();break;case 13:Zs(l);break;case 19:Y(Fr);break;case 10:Qs(l.type);break;case 22:case 23:Zs(l),kp(),s!==null&&Y(dl);break;case 24:Qs(Pr)}}function fh(s,l){try{var u=l.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var v=f.next;u=v;do{if((u.tag&s)===s){f=void 0;var _=u.create,I=u.inst;f=_(),I.destroy=f}u=u.next}while(u!==v)}}catch(L){Xt(l,l.return,L)}}function Hi(s,l,u){try{var f=l.updateQueue,v=f!==null?f.lastEffect:null;if(v!==null){var _=v.next;f=_;do{if((f.tag&s)===s){var I=f.inst,L=I.destroy;if(L!==void 0){I.destroy=void 0,v=l;var Q=u,ue=L;try{ue()}catch(Ee){Xt(v,Q,Ee)}}}f=f.next}while(f!==_)}}catch(Ee){Xt(l,l.return,Ee)}}function S_(s){var l=s.updateQueue;if(l!==null){var u=s.stateNode;try{fy(l,u)}catch(f){Xt(s,s.return,f)}}}function A_(s,l,u){u.props=ml(s.type,s.memoizedProps),u.state=s.memoizedState;try{u.componentWillUnmount()}catch(f){Xt(s,l,f)}}function mh(s,l){try{var u=s.ref;if(u!==null){switch(s.tag){case 26:case 27:case 5:var f=s.stateNode;break;case 30:f=s.stateNode;break;default:f=s.stateNode}typeof u=="function"?s.refCleanup=u(f):u.current=f}}catch(v){Xt(s,l,v)}}function _s(s,l){var u=s.ref,f=s.refCleanup;if(u!==null)if(typeof f=="function")try{f()}catch(v){Xt(s,l,v)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(v){Xt(s,l,v)}else u.current=null}function C_(s){var l=s.type,u=s.memoizedProps,f=s.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":u.autoFocus&&f.focus();break e;case"img":u.src?f.src=u.src:u.srcSet&&(f.srcset=u.srcSet)}}catch(v){Xt(s,s.return,v)}}function og(s,l,u){try{var f=s.stateNode;jj(f,s.type,u,l),f[xr]=l}catch(v){Xt(s,s.return,v)}}function j_(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Qi(s.type)||s.tag===4}function lg(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||j_(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Qi(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function cg(s,l,u){var f=s.tag;if(f===5||f===6)s=s.stateNode,l?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(s,l):(l=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,l.appendChild(s),u=u._reactRootContainer,u!=null||l.onclick!==null||(l.onclick=Jf));else if(f!==4&&(f===27&&Qi(s.type)&&(u=s.stateNode,l=null),s=s.child,s!==null))for(cg(s,l,u),s=s.sibling;s!==null;)cg(s,l,u),s=s.sibling}function Uf(s,l,u){var f=s.tag;if(f===5||f===6)s=s.stateNode,l?u.insertBefore(s,l):u.appendChild(s);else if(f!==4&&(f===27&&Qi(s.type)&&(u=s.stateNode),s=s.child,s!==null))for(Uf(s,l,u),s=s.sibling;s!==null;)Uf(s,l,u),s=s.sibling}function R_(s){var l=s.stateNode,u=s.memoizedProps;try{for(var f=s.type,v=l.attributes;v.length;)l.removeAttributeNode(v[0]);an(l,f,u),l[lr]=s,l[xr]=u}catch(_){Xt(s,s.return,_)}}var ri=!1,Er=!1,ug=!1,D_=typeof WeakSet=="function"?WeakSet:Set,qr=null;function cj(s,l){if(s=s.containerInfo,Og=sm,s=z1(s),lp(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var v=f.anchorOffset,_=f.focusNode;f=f.focusOffset;try{u.nodeType,_.nodeType}catch{u=null;break e}var I=0,L=-1,Q=-1,ue=0,Ee=0,Ne=s,me=null;t:for(;;){for(var pe;Ne!==u||v!==0&&Ne.nodeType!==3||(L=I+v),Ne!==_||f!==0&&Ne.nodeType!==3||(Q=I+f),Ne.nodeType===3&&(I+=Ne.nodeValue.length),(pe=Ne.firstChild)!==null;)me=Ne,Ne=pe;for(;;){if(Ne===s)break t;if(me===u&&++ue===v&&(L=I),me===_&&++Ee===f&&(Q=I),(pe=Ne.nextSibling)!==null)break;Ne=me,me=Ne.parentNode}Ne=pe}u=L===-1||Q===-1?null:{start:L,end:Q}}else u=null}u=u||{start:0,end:0}}else u=null;for(Mg={focusedElem:s,selectionRange:u},sm=!1,qr=l;qr!==null;)if(l=qr,s=l.child,(l.subtreeFlags&1024)!==0&&s!==null)s.return=l,qr=s;else for(;qr!==null;){switch(l=qr,_=l.alternate,s=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&_!==null){s=void 0,u=l,v=_.memoizedProps,_=_.memoizedState,f=u.stateNode;try{var it=ml(u.type,v,u.elementType===u.type);s=f.getSnapshotBeforeUpdate(it,_),f.__reactInternalSnapshotBeforeUpdate=s}catch(tt){Xt(u,u.return,tt)}}break;case 3:if((s&1024)!==0){if(s=l.stateNode.containerInfo,u=s.nodeType,u===9)Lg(s);else if(u===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Lg(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(n(163))}if(s=l.sibling,s!==null){s.return=l.return,qr=s;break}qr=l.return}}function I_(s,l,u){var f=u.flags;switch(u.tag){case 0:case 11:case 15:Gi(s,u),f&4&&fh(5,u);break;case 1:if(Gi(s,u),f&4)if(s=u.stateNode,l===null)try{s.componentDidMount()}catch(I){Xt(u,u.return,I)}else{var v=ml(u.type,l.memoizedProps);l=l.memoizedState;try{s.componentDidUpdate(v,l,s.__reactInternalSnapshotBeforeUpdate)}catch(I){Xt(u,u.return,I)}}f&64&&S_(u),f&512&&mh(u,u.return);break;case 3:if(Gi(s,u),f&64&&(s=u.updateQueue,s!==null)){if(l=null,u.child!==null)switch(u.child.tag){case 27:case 5:l=u.child.stateNode;break;case 1:l=u.child.stateNode}try{fy(s,l)}catch(I){Xt(u,u.return,I)}}break;case 27:l===null&&f&4&&R_(u);case 26:case 5:Gi(s,u),l===null&&f&4&&C_(u),f&512&&mh(u,u.return);break;case 12:Gi(s,u);break;case 13:Gi(s,u),f&4&&M_(s,u),f&64&&(s=u.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(u=xj.bind(null,u),Pj(s,u))));break;case 22:if(f=u.memoizedState!==null||ri,!f){l=l!==null&&l.memoizedState!==null||Er,v=ri;var _=Er;ri=f,(Er=l)&&!_?qi(s,u,(u.subtreeFlags&8772)!==0):Gi(s,u),ri=v,Er=_}break;case 30:break;default:Gi(s,u)}}function k_(s){var l=s.alternate;l!==null&&(s.alternate=null,k_(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&G(l)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var ar=null,$n=!1;function ni(s,l,u){for(u=u.child;u!==null;)O_(s,l,u),u=u.sibling}function O_(s,l,u){if(Nr&&typeof Nr.onCommitFiberUnmount=="function")try{Nr.onCommitFiberUnmount(_a,u)}catch{}switch(u.tag){case 26:Er||_s(u,l),ni(s,l,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Er||_s(u,l);var f=ar,v=$n;Qi(u.type)&&(ar=u.stateNode,$n=!1),ni(s,l,u),wh(u.stateNode),ar=f,$n=v;break;case 5:Er||_s(u,l);case 6:if(f=ar,v=$n,ar=null,ni(s,l,u),ar=f,$n=v,ar!==null)if($n)try{(ar.nodeType===9?ar.body:ar.nodeName==="HTML"?ar.ownerDocument.body:ar).removeChild(u.stateNode)}catch(_){Xt(u,l,_)}else try{ar.removeChild(u.stateNode)}catch(_){Xt(u,l,_)}break;case 18:ar!==null&&($n?(s=ar,T2(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,u.stateNode),Dh(s)):T2(ar,u.stateNode));break;case 4:f=ar,v=$n,ar=u.stateNode.containerInfo,$n=!0,ni(s,l,u),ar=f,$n=v;break;case 0:case 11:case 14:case 15:Er||Hi(2,u,l),Er||Hi(4,u,l),ni(s,l,u);break;case 1:Er||(_s(u,l),f=u.stateNode,typeof f.componentWillUnmount=="function"&&A_(u,l,f)),ni(s,l,u);break;case 21:ni(s,l,u);break;case 22:Er=(f=Er)||u.memoizedState!==null,ni(s,l,u),Er=f;break;default:ni(s,l,u)}}function M_(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Dh(s)}catch(u){Xt(l,l.return,u)}}function uj(s){switch(s.tag){case 13:case 19:var l=s.stateNode;return l===null&&(l=s.stateNode=new D_),l;case 22:return s=s.stateNode,l=s._retryCache,l===null&&(l=s._retryCache=new D_),l;default:throw Error(n(435,s.tag))}}function hg(s,l){var u=uj(s);l.forEach(function(f){var v=yj.bind(null,s,f);u.has(f)||(u.add(f),f.then(v,v))})}function la(s,l){var u=l.deletions;if(u!==null)for(var f=0;f<u.length;f++){var v=u[f],_=s,I=l,L=I;e:for(;L!==null;){switch(L.tag){case 27:if(Qi(L.type)){ar=L.stateNode,$n=!1;break e}break;case 5:ar=L.stateNode,$n=!1;break e;case 3:case 4:ar=L.stateNode.containerInfo,$n=!0;break e}L=L.return}if(ar===null)throw Error(n(160));O_(_,I,v),ar=null,$n=!1,_=v.alternate,_!==null&&(_.return=null),v.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)P_(l,s),l=l.sibling}var Ka=null;function P_(s,l){var u=s.alternate,f=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:la(l,s),ca(s),f&4&&(Hi(3,s,s.return),fh(3,s),Hi(5,s,s.return));break;case 1:la(l,s),ca(s),f&512&&(Er||u===null||_s(u,u.return)),f&64&&ri&&(s=s.updateQueue,s!==null&&(f=s.callbacks,f!==null&&(u=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=u===null?f:u.concat(f))));break;case 26:var v=Ka;if(la(l,s),ca(s),f&512&&(Er||u===null||_s(u,u.return)),f&4){var _=u!==null?u.memoizedState:null;if(f=s.memoizedState,u===null)if(f===null)if(s.stateNode===null){e:{f=s.type,u=s.memoizedProps,v=v.ownerDocument||v;t:switch(f){case"title":_=v.getElementsByTagName("title")[0],(!_||_[z]||_[lr]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=v.createElement(f),v.head.insertBefore(_,v.querySelector("head > title"))),an(_,f,u),_[lr]=s,ie(_),f=_;break e;case"link":var I=R2("link","href",v).get(f+(u.href||""));if(I){for(var L=0;L<I.length;L++)if(_=I[L],_.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&_.getAttribute("rel")===(u.rel==null?null:u.rel)&&_.getAttribute("title")===(u.title==null?null:u.title)&&_.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){I.splice(L,1);break t}}_=v.createElement(f),an(_,f,u),v.head.appendChild(_);break;case"meta":if(I=R2("meta","content",v).get(f+(u.content||""))){for(L=0;L<I.length;L++)if(_=I[L],_.getAttribute("content")===(u.content==null?null:""+u.content)&&_.getAttribute("name")===(u.name==null?null:u.name)&&_.getAttribute("property")===(u.property==null?null:u.property)&&_.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&_.getAttribute("charset")===(u.charSet==null?null:u.charSet)){I.splice(L,1);break t}}_=v.createElement(f),an(_,f,u),v.head.appendChild(_);break;default:throw Error(n(468,f))}_[lr]=s,ie(_),f=_}s.stateNode=f}else D2(v,s.type,s.stateNode);else s.stateNode=j2(v,f,s.memoizedProps);else _!==f?(_===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):_.count--,f===null?D2(v,s.type,s.stateNode):j2(v,f,s.memoizedProps)):f===null&&s.stateNode!==null&&og(s,s.memoizedProps,u.memoizedProps)}break;case 27:la(l,s),ca(s),f&512&&(Er||u===null||_s(u,u.return)),u!==null&&f&4&&og(s,s.memoizedProps,u.memoizedProps);break;case 5:if(la(l,s),ca(s),f&512&&(Er||u===null||_s(u,u.return)),s.flags&32){v=s.stateNode;try{wa(v,"")}catch(pe){Xt(s,s.return,pe)}}f&4&&s.stateNode!=null&&(v=s.memoizedProps,og(s,v,u!==null?u.memoizedProps:v)),f&1024&&(ug=!0);break;case 6:if(la(l,s),ca(s),f&4){if(s.stateNode===null)throw Error(n(162));f=s.memoizedProps,u=s.stateNode;try{u.nodeValue=f}catch(pe){Xt(s,s.return,pe)}}break;case 3:if(rm=null,v=Ka,Ka=em(l.containerInfo),la(l,s),Ka=v,ca(s),f&4&&u!==null&&u.memoizedState.isDehydrated)try{Dh(l.containerInfo)}catch(pe){Xt(s,s.return,pe)}ug&&(ug=!1,F_(s));break;case 4:f=Ka,Ka=em(s.stateNode.containerInfo),la(l,s),ca(s),Ka=f;break;case 12:la(l,s),ca(s);break;case 13:la(l,s),ca(s),s.child.flags&8192&&s.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(vg=Be()),f&4&&(f=s.updateQueue,f!==null&&(s.updateQueue=null,hg(s,f)));break;case 22:v=s.memoizedState!==null;var Q=u!==null&&u.memoizedState!==null,ue=ri,Ee=Er;if(ri=ue||v,Er=Ee||Q,la(l,s),Er=Ee,ri=ue,ca(s),f&8192)e:for(l=s.stateNode,l._visibility=v?l._visibility&-2:l._visibility|1,v&&(u===null||Q||ri||Er||pl(s)),u=null,l=s;;){if(l.tag===5||l.tag===26){if(u===null){Q=u=l;try{if(_=Q.stateNode,v)I=_.style,typeof I.setProperty=="function"?I.setProperty("display","none","important"):I.display="none";else{L=Q.stateNode;var Ne=Q.memoizedProps.style,me=Ne!=null&&Ne.hasOwnProperty("display")?Ne.display:null;L.style.display=me==null||typeof me=="boolean"?"":(""+me).trim()}}catch(pe){Xt(Q,Q.return,pe)}}}else if(l.tag===6){if(u===null){Q=l;try{Q.stateNode.nodeValue=v?"":Q.memoizedProps}catch(pe){Xt(Q,Q.return,pe)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===s)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break e;for(;l.sibling===null;){if(l.return===null||l.return===s)break e;u===l&&(u=null),l=l.return}u===l&&(u=null),l.sibling.return=l.return,l=l.sibling}f&4&&(f=s.updateQueue,f!==null&&(u=f.retryQueue,u!==null&&(f.retryQueue=null,hg(s,u))));break;case 19:la(l,s),ca(s),f&4&&(f=s.updateQueue,f!==null&&(s.updateQueue=null,hg(s,f)));break;case 30:break;case 21:break;default:la(l,s),ca(s)}}function ca(s){var l=s.flags;if(l&2){try{for(var u,f=s.return;f!==null;){if(j_(f)){u=f;break}f=f.return}if(u==null)throw Error(n(160));switch(u.tag){case 27:var v=u.stateNode,_=lg(s);Uf(s,_,v);break;case 5:var I=u.stateNode;u.flags&32&&(wa(I,""),u.flags&=-33);var L=lg(s);Uf(s,L,I);break;case 3:case 4:var Q=u.stateNode.containerInfo,ue=lg(s);cg(s,ue,Q);break;default:throw Error(n(161))}}catch(Ee){Xt(s,s.return,Ee)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function F_(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var l=s;F_(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),s=s.sibling}}function Gi(s,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)I_(s,l.alternate,l),l=l.sibling}function pl(s){for(s=s.child;s!==null;){var l=s;switch(l.tag){case 0:case 11:case 14:case 15:Hi(4,l,l.return),pl(l);break;case 1:_s(l,l.return);var u=l.stateNode;typeof u.componentWillUnmount=="function"&&A_(l,l.return,u),pl(l);break;case 27:wh(l.stateNode);case 26:case 5:_s(l,l.return),pl(l);break;case 22:l.memoizedState===null&&pl(l);break;case 30:pl(l);break;default:pl(l)}s=s.sibling}}function qi(s,l,u){for(u=u&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var f=l.alternate,v=s,_=l,I=_.flags;switch(_.tag){case 0:case 11:case 15:qi(v,_,u),fh(4,_);break;case 1:if(qi(v,_,u),f=_,v=f.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(ue){Xt(f,f.return,ue)}if(f=_,v=f.updateQueue,v!==null){var L=f.stateNode;try{var Q=v.shared.hiddenCallbacks;if(Q!==null)for(v.shared.hiddenCallbacks=null,v=0;v<Q.length;v++)dy(Q[v],L)}catch(ue){Xt(f,f.return,ue)}}u&&I&64&&S_(_),mh(_,_.return);break;case 27:R_(_);case 26:case 5:qi(v,_,u),u&&f===null&&I&4&&C_(_),mh(_,_.return);break;case 12:qi(v,_,u);break;case 13:qi(v,_,u),u&&I&4&&M_(v,_);break;case 22:_.memoizedState===null&&qi(v,_,u),mh(_,_.return);break;case 30:break;default:qi(v,_,u)}l=l.sibling}}function dg(s,l){var u=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),s=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(s=l.memoizedState.cachePool.pool),s!==u&&(s!=null&&s.refCount++,u!=null&&Zu(u))}function fg(s,l){s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&Zu(s))}function Es(s,l,u,f){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)L_(s,l,u,f),l=l.sibling}function L_(s,l,u,f){var v=l.flags;switch(l.tag){case 0:case 11:case 15:Es(s,l,u,f),v&2048&&fh(9,l);break;case 1:Es(s,l,u,f);break;case 3:Es(s,l,u,f),v&2048&&(s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&Zu(s)));break;case 12:if(v&2048){Es(s,l,u,f),s=l.stateNode;try{var _=l.memoizedProps,I=_.id,L=_.onPostCommit;typeof L=="function"&&L(I,l.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(Q){Xt(l,l.return,Q)}}else Es(s,l,u,f);break;case 13:Es(s,l,u,f);break;case 23:break;case 22:_=l.stateNode,I=l.alternate,l.memoizedState!==null?_._visibility&2?Es(s,l,u,f):ph(s,l):_._visibility&2?Es(s,l,u,f):(_._visibility|=2,_c(s,l,u,f,(l.subtreeFlags&10256)!==0)),v&2048&&dg(I,l);break;case 24:Es(s,l,u,f),v&2048&&fg(l.alternate,l);break;default:Es(s,l,u,f)}}function _c(s,l,u,f,v){for(v=v&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var _=s,I=l,L=u,Q=f,ue=I.flags;switch(I.tag){case 0:case 11:case 15:_c(_,I,L,Q,v),fh(8,I);break;case 23:break;case 22:var Ee=I.stateNode;I.memoizedState!==null?Ee._visibility&2?_c(_,I,L,Q,v):ph(_,I):(Ee._visibility|=2,_c(_,I,L,Q,v)),v&&ue&2048&&dg(I.alternate,I);break;case 24:_c(_,I,L,Q,v),v&&ue&2048&&fg(I.alternate,I);break;default:_c(_,I,L,Q,v)}l=l.sibling}}function ph(s,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var u=s,f=l,v=f.flags;switch(f.tag){case 22:ph(u,f),v&2048&&dg(f.alternate,f);break;case 24:ph(u,f),v&2048&&fg(f.alternate,f);break;default:ph(u,f)}l=l.sibling}}var gh=8192;function Ec(s){if(s.subtreeFlags&gh)for(s=s.child;s!==null;)V_(s),s=s.sibling}function V_(s){switch(s.tag){case 26:Ec(s),s.flags&gh&&s.memoizedState!==null&&Kj(Ka,s.memoizedState,s.memoizedProps);break;case 5:Ec(s);break;case 3:case 4:var l=Ka;Ka=em(s.stateNode.containerInfo),Ec(s),Ka=l;break;case 22:s.memoizedState===null&&(l=s.alternate,l!==null&&l.memoizedState!==null?(l=gh,gh=16777216,Ec(s),gh=l):Ec(s));break;default:Ec(s)}}function B_(s){var l=s.alternate;if(l!==null&&(s=l.child,s!==null)){l.child=null;do l=s.sibling,s.sibling=null,s=l;while(s!==null)}}function vh(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var u=0;u<l.length;u++){var f=l[u];qr=f,z_(f,s)}B_(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)U_(s),s=s.sibling}function U_(s){switch(s.tag){case 0:case 11:case 15:vh(s),s.flags&2048&&Hi(9,s,s.return);break;case 3:vh(s);break;case 12:vh(s);break;case 22:var l=s.stateNode;s.memoizedState!==null&&l._visibility&2&&(s.return===null||s.return.tag!==13)?(l._visibility&=-3,zf(s)):vh(s);break;default:vh(s)}}function zf(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var u=0;u<l.length;u++){var f=l[u];qr=f,z_(f,s)}B_(s)}for(s=s.child;s!==null;){switch(l=s,l.tag){case 0:case 11:case 15:Hi(8,l,l.return),zf(l);break;case 22:u=l.stateNode,u._visibility&2&&(u._visibility&=-3,zf(l));break;default:zf(l)}s=s.sibling}}function z_(s,l){for(;qr!==null;){var u=qr;switch(u.tag){case 0:case 11:case 15:Hi(8,u,l);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var f=u.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:Zu(u.memoizedState.cache)}if(f=u.child,f!==null)f.return=u,qr=f;else e:for(u=s;qr!==null;){f=qr;var v=f.sibling,_=f.return;if(k_(f),f===u){qr=null;break e}if(v!==null){v.return=_,qr=v;break e}qr=_}}}var hj={getCacheForType:function(s){var l=yn(Pr),u=l.data.get(s);return u===void 0&&(u=s(),l.data.set(s,u)),u}},dj=typeof WeakMap=="function"?WeakMap:Map,Ft=0,er=null,vt=null,wt=0,Lt=0,ua=null,$i=!1,Tc=!1,mg=!1,ai=0,fr=0,Wi=0,gl=0,pg=0,Ra=0,wc=0,xh=null,Wn=null,gg=!1,vg=0,Hf=1/0,Gf=null,Yi=null,nn=0,Ki=null,Nc=null,bc=0,xg=0,yg=null,H_=null,yh=0,_g=null;function ha(){if((Ft&2)!==0&&wt!==0)return wt&-wt;if(ge.T!==null){var s=dc;return s!==0?s:Ag()}return Ua()}function G_(){Ra===0&&(Ra=(wt&536870912)===0||Dt?Ai():536870912);var s=ja.current;return s!==null&&(s.flags|=32),Ra}function da(s,l,u){(s===er&&(Lt===2||Lt===9)||s.cancelPendingCommit!==null)&&(Sc(s,0),Xi(s,wt,Ra,!1)),or(s,u),((Ft&2)===0||s!==er)&&(s===er&&((Ft&2)===0&&(gl|=u),fr===4&&Xi(s,wt,Ra,!1)),Ts(s))}function q_(s,l,u){if((Ft&6)!==0)throw Error(n(327));var f=!u&&(l&124)===0&&(l&s.expiredLanes)===0||ds(s,l),v=f?pj(s,l):wg(s,l,!0),_=f;do{if(v===0){Tc&&!f&&Xi(s,l,0,!1);break}else{if(u=s.current.alternate,_&&!fj(u)){v=wg(s,l,!1),_=!1;continue}if(v===2){if(_=l,s.errorRecoveryDisabledLanes&_)var I=0;else I=s.pendingLanes&-536870913,I=I!==0?I:I&536870912?536870912:0;if(I!==0){l=I;e:{var L=s;v=xh;var Q=L.current.memoizedState.isDehydrated;if(Q&&(Sc(L,I).flags|=256),I=wg(L,I,!1),I!==2){if(mg&&!Q){L.errorRecoveryDisabledLanes|=_,gl|=_,v=4;break e}_=Wn,Wn=v,_!==null&&(Wn===null?Wn=_:Wn.push.apply(Wn,_))}v=I}if(_=!1,v!==2)continue}}if(v===1){Sc(s,0),Xi(s,l,0,!0);break}e:{switch(f=s,_=v,_){case 0:case 1:throw Error(n(345));case 4:if((l&4194048)!==l)break;case 6:Xi(f,l,Ra,!$i);break e;case 2:Wn=null;break;case 3:case 5:break;default:throw Error(n(329))}if((l&62914560)===l&&(v=vg+300-Be(),10<v)){if(Xi(f,l,Ra,!$i),Hn(f,0,!0)!==0)break e;f.timeoutHandle=_2($_.bind(null,f,u,Wn,Gf,gg,l,Ra,gl,wc,$i,_,2,-0,0),v);break e}$_(f,u,Wn,Gf,gg,l,Ra,gl,wc,$i,_,0,-0,0)}}break}while(!0);Ts(s)}function $_(s,l,u,f,v,_,I,L,Q,ue,Ee,Ne,me,pe){if(s.timeoutHandle=-1,Ne=l.subtreeFlags,(Ne&8192||(Ne&16785408)===16785408)&&(Sh={stylesheets:null,count:0,unsuspend:Yj},V_(l),Ne=Xj(),Ne!==null)){s.cancelPendingCommit=Ne(Z_.bind(null,s,l,_,u,f,v,I,L,Q,Ee,1,me,pe)),Xi(s,_,I,!ue);return}Z_(s,l,_,u,f,v,I,L,Q)}function fj(s){for(var l=s;;){var u=l.tag;if((u===0||u===11||u===15)&&l.flags&16384&&(u=l.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var f=0;f<u.length;f++){var v=u[f],_=v.getSnapshot;v=v.value;try{if(!ia(_(),v))return!1}catch{return!1}}if(u=l.child,l.subtreeFlags&16384&&u!==null)u.return=l,l=u;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Xi(s,l,u,f){l&=~pg,l&=~gl,s.suspendedLanes|=l,s.pingedLanes&=~l,f&&(s.warmLanes|=l),f=s.expirationTimes;for(var v=l;0<v;){var _=31-tn(v),I=1<<_;f[_]=-1,v&=~I}u!==0&&fs(s,u,l)}function qf(){return(Ft&6)===0?(_h(0),!1):!0}function Eg(){if(vt!==null){if(Lt===0)var s=vt.return;else s=vt,Xs=ul=null,Lp(s),xc=null,uh=0,s=vt;for(;s!==null;)b_(s.alternate,s),s=s.return;vt=null}}function Sc(s,l){var u=s.timeoutHandle;u!==-1&&(s.timeoutHandle=-1,Dj(u)),u=s.cancelPendingCommit,u!==null&&(s.cancelPendingCommit=null,u()),Eg(),er=s,vt=u=Ws(s.current,null),wt=l,Lt=0,ua=null,$i=!1,Tc=ds(s,l),mg=!1,wc=Ra=pg=gl=Wi=fr=0,Wn=xh=null,gg=!1,(l&8)!==0&&(l|=l&32);var f=s.entangledLanes;if(f!==0)for(s=s.entanglements,f&=l;0<f;){var v=31-tn(f),_=1<<v;l|=s[v],f&=~_}return ai=l,ff(),u}function W_(s,l){mt=null,ge.H=If,l===th||l===Tf?(l=uy(),Lt=3):l===oy?(l=uy(),Lt=4):Lt=l===h_?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,ua=l,vt===null&&(fr=1,Ff(s,ba(l,s.current)))}function Y_(){var s=ge.H;return ge.H=If,s===null?If:s}function K_(){var s=ge.A;return ge.A=hj,s}function Tg(){fr=4,$i||(wt&4194048)!==wt&&ja.current!==null||(Tc=!0),(Wi&134217727)===0&&(gl&134217727)===0||er===null||Xi(er,wt,Ra,!1)}function wg(s,l,u){var f=Ft;Ft|=2;var v=Y_(),_=K_();(er!==s||wt!==l)&&(Gf=null,Sc(s,l)),l=!1;var I=fr;e:do try{if(Lt!==0&&vt!==null){var L=vt,Q=ua;switch(Lt){case 8:Eg(),I=6;break e;case 3:case 2:case 9:case 6:ja.current===null&&(l=!0);var ue=Lt;if(Lt=0,ua=null,Ac(s,L,Q,ue),u&&Tc){I=0;break e}break;default:ue=Lt,Lt=0,ua=null,Ac(s,L,Q,ue)}}mj(),I=fr;break}catch(Ee){W_(s,Ee)}while(!0);return l&&s.shellSuspendCounter++,Xs=ul=null,Ft=f,ge.H=v,ge.A=_,vt===null&&(er=null,wt=0,ff()),I}function mj(){for(;vt!==null;)X_(vt)}function pj(s,l){var u=Ft;Ft|=2;var f=Y_(),v=K_();er!==s||wt!==l?(Gf=null,Hf=Be()+500,Sc(s,l)):Tc=ds(s,l);e:do try{if(Lt!==0&&vt!==null){l=vt;var _=ua;t:switch(Lt){case 1:Lt=0,ua=null,Ac(s,l,_,1);break;case 2:case 9:if(ly(_)){Lt=0,ua=null,Q_(l);break}l=function(){Lt!==2&&Lt!==9||er!==s||(Lt=7),Ts(s)},_.then(l,l);break e;case 3:Lt=7;break e;case 4:Lt=5;break e;case 7:ly(_)?(Lt=0,ua=null,Q_(l)):(Lt=0,ua=null,Ac(s,l,_,7));break;case 5:var I=null;switch(vt.tag){case 26:I=vt.memoizedState;case 5:case 27:var L=vt;if(!I||I2(I)){Lt=0,ua=null;var Q=L.sibling;if(Q!==null)vt=Q;else{var ue=L.return;ue!==null?(vt=ue,$f(ue)):vt=null}break t}}Lt=0,ua=null,Ac(s,l,_,5);break;case 6:Lt=0,ua=null,Ac(s,l,_,6);break;case 8:Eg(),fr=6;break e;default:throw Error(n(462))}}gj();break}catch(Ee){W_(s,Ee)}while(!0);return Xs=ul=null,ge.H=f,ge.A=v,Ft=u,vt!==null?0:(er=null,wt=0,ff(),fr)}function gj(){for(;vt!==null&&!ta();)X_(vt)}function X_(s){var l=w_(s.alternate,s,ai);s.memoizedProps=s.pendingProps,l===null?$f(s):vt=l}function Q_(s){var l=s,u=l.alternate;switch(l.tag){case 15:case 0:l=v_(u,l,l.pendingProps,l.type,void 0,wt);break;case 11:l=v_(u,l,l.pendingProps,l.type.render,l.ref,wt);break;case 5:Lp(l);default:b_(u,l),l=vt=J1(l,ai),l=w_(u,l,ai)}s.memoizedProps=s.pendingProps,l===null?$f(s):vt=l}function Ac(s,l,u,f){Xs=ul=null,Lp(l),xc=null,uh=0;var v=l.return;try{if(sj(s,v,l,u,wt)){fr=1,Ff(s,ba(u,s.current)),vt=null;return}}catch(_){if(v!==null)throw vt=v,_;fr=1,Ff(s,ba(u,s.current)),vt=null;return}l.flags&32768?(Dt||f===1?s=!0:Tc||(wt&536870912)!==0?s=!1:($i=s=!0,(f===2||f===9||f===3||f===6)&&(f=ja.current,f!==null&&f.tag===13&&(f.flags|=16384))),J_(l,s)):$f(l)}function $f(s){var l=s;do{if((l.flags&32768)!==0){J_(l,$i);return}s=l.return;var u=oj(l.alternate,l,ai);if(u!==null){vt=u;return}if(l=l.sibling,l!==null){vt=l;return}vt=l=s}while(l!==null);fr===0&&(fr=5)}function J_(s,l){do{var u=lj(s.alternate,s);if(u!==null){u.flags&=32767,vt=u;return}if(u=s.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!l&&(s=s.sibling,s!==null)){vt=s;return}vt=s=u}while(s!==null);fr=6,vt=null}function Z_(s,l,u,f,v,_,I,L,Q){s.cancelPendingCommit=null;do Wf();while(nn!==0);if((Ft&6)!==0)throw Error(n(327));if(l!==null){if(l===s.current)throw Error(n(177));if(_=l.lanes|l.childLanes,_|=fp,Bs(s,u,_,I,L,Q),s===er&&(vt=er=null,wt=0),Nc=l,Ki=s,bc=u,xg=_,yg=v,H_=f,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,_j(vn,function(){return a2(),null})):(s.callbackNode=null,s.callbackPriority=0),f=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||f){f=ge.T,ge.T=null,v=De.p,De.p=2,I=Ft,Ft|=4;try{cj(s,l,u)}finally{Ft=I,De.p=v,ge.T=f}}nn=1,e2(),t2(),r2()}}function e2(){if(nn===1){nn=0;var s=Ki,l=Nc,u=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||u){u=ge.T,ge.T=null;var f=De.p;De.p=2;var v=Ft;Ft|=4;try{P_(l,s);var _=Mg,I=z1(s.containerInfo),L=_.focusedElem,Q=_.selectionRange;if(I!==L&&L&&L.ownerDocument&&U1(L.ownerDocument.documentElement,L)){if(Q!==null&&lp(L)){var ue=Q.start,Ee=Q.end;if(Ee===void 0&&(Ee=ue),"selectionStart"in L)L.selectionStart=ue,L.selectionEnd=Math.min(Ee,L.value.length);else{var Ne=L.ownerDocument||document,me=Ne&&Ne.defaultView||window;if(me.getSelection){var pe=me.getSelection(),it=L.textContent.length,tt=Math.min(Q.start,it),Yt=Q.end===void 0?tt:Math.min(Q.end,it);!pe.extend&&tt>Yt&&(I=Yt,Yt=tt,tt=I);var se=B1(L,tt),ne=B1(L,Yt);if(se&&ne&&(pe.rangeCount!==1||pe.anchorNode!==se.node||pe.anchorOffset!==se.offset||pe.focusNode!==ne.node||pe.focusOffset!==ne.offset)){var oe=Ne.createRange();oe.setStart(se.node,se.offset),pe.removeAllRanges(),tt>Yt?(pe.addRange(oe),pe.extend(ne.node,ne.offset)):(oe.setEnd(ne.node,ne.offset),pe.addRange(oe))}}}}for(Ne=[],pe=L;pe=pe.parentNode;)pe.nodeType===1&&Ne.push({element:pe,left:pe.scrollLeft,top:pe.scrollTop});for(typeof L.focus=="function"&&L.focus(),L=0;L<Ne.length;L++){var Te=Ne[L];Te.element.scrollLeft=Te.left,Te.element.scrollTop=Te.top}}sm=!!Og,Mg=Og=null}finally{Ft=v,De.p=f,ge.T=u}}s.current=l,nn=2}}function t2(){if(nn===2){nn=0;var s=Ki,l=Nc,u=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||u){u=ge.T,ge.T=null;var f=De.p;De.p=2;var v=Ft;Ft|=4;try{I_(s,l.alternate,l)}finally{Ft=v,De.p=f,ge.T=u}}nn=3}}function r2(){if(nn===4||nn===3){nn=0,Gt();var s=Ki,l=Nc,u=bc,f=H_;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?nn=5:(nn=0,Nc=Ki=null,n2(s,s.pendingLanes));var v=s.pendingLanes;if(v===0&&(Yi=null),Ho(u),l=l.stateNode,Nr&&typeof Nr.onCommitFiberRoot=="function")try{Nr.onCommitFiberRoot(_a,l,void 0,(l.current.flags&128)===128)}catch{}if(f!==null){l=ge.T,v=De.p,De.p=2,ge.T=null;try{for(var _=s.onRecoverableError,I=0;I<f.length;I++){var L=f[I];_(L.value,{componentStack:L.stack})}}finally{ge.T=l,De.p=v}}(bc&3)!==0&&Wf(),Ts(s),v=s.pendingLanes,(u&4194090)!==0&&(v&42)!==0?s===_g?yh++:(yh=0,_g=s):yh=0,_h(0)}}function n2(s,l){(s.pooledCacheLanes&=l)===0&&(l=s.pooledCache,l!=null&&(s.pooledCache=null,Zu(l)))}function Wf(s){return e2(),t2(),r2(),a2()}function a2(){if(nn!==5)return!1;var s=Ki,l=xg;xg=0;var u=Ho(bc),f=ge.T,v=De.p;try{De.p=32>u?32:u,ge.T=null,u=yg,yg=null;var _=Ki,I=bc;if(nn=0,Nc=Ki=null,bc=0,(Ft&6)!==0)throw Error(n(331));var L=Ft;if(Ft|=4,U_(_.current),L_(_,_.current,I,u),Ft=L,_h(0,!1),Nr&&typeof Nr.onPostCommitFiberRoot=="function")try{Nr.onPostCommitFiberRoot(_a,_)}catch{}return!0}finally{De.p=v,ge.T=f,n2(s,l)}}function s2(s,l,u){l=ba(u,l),l=Jp(s.stateNode,l,2),s=Vi(s,l,2),s!==null&&(or(s,2),Ts(s))}function Xt(s,l,u){if(s.tag===3)s2(s,s,u);else for(;l!==null;){if(l.tag===3){s2(l,s,u);break}else if(l.tag===1){var f=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Yi===null||!Yi.has(f))){s=ba(u,s),u=c_(2),f=Vi(l,u,2),f!==null&&(u_(u,f,l,s),or(f,2),Ts(f));break}}l=l.return}}function Ng(s,l,u){var f=s.pingCache;if(f===null){f=s.pingCache=new dj;var v=new Set;f.set(l,v)}else v=f.get(l),v===void 0&&(v=new Set,f.set(l,v));v.has(u)||(mg=!0,v.add(u),s=vj.bind(null,s,l,u),l.then(s,s))}function vj(s,l,u){var f=s.pingCache;f!==null&&f.delete(l),s.pingedLanes|=s.suspendedLanes&u,s.warmLanes&=~u,er===s&&(wt&u)===u&&(fr===4||fr===3&&(wt&62914560)===wt&&300>Be()-vg?(Ft&2)===0&&Sc(s,0):pg|=u,wc===wt&&(wc=0)),Ts(s)}function i2(s,l){l===0&&(l=Ba()),s=lc(s,l),s!==null&&(or(s,l),Ts(s))}function xj(s){var l=s.memoizedState,u=0;l!==null&&(u=l.retryLane),i2(s,u)}function yj(s,l){var u=0;switch(s.tag){case 13:var f=s.stateNode,v=s.memoizedState;v!==null&&(u=v.retryLane);break;case 19:f=s.stateNode;break;case 22:f=s.stateNode._retryCache;break;default:throw Error(n(314))}f!==null&&f.delete(l),i2(s,u)}function _j(s,l){return Ht(s,l)}var Yf=null,Cc=null,bg=!1,Kf=!1,Sg=!1,vl=0;function Ts(s){s!==Cc&&s.next===null&&(Cc===null?Yf=Cc=s:Cc=Cc.next=s),Kf=!0,bg||(bg=!0,Tj())}function _h(s,l){if(!Sg&&Kf){Sg=!0;do for(var u=!1,f=Yf;f!==null;){if(s!==0){var v=f.pendingLanes;if(v===0)var _=0;else{var I=f.suspendedLanes,L=f.pingedLanes;_=(1<<31-tn(42|s)+1)-1,_&=v&~(I&~L),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(u=!0,u2(f,_))}else _=wt,_=Hn(f,f===er?_:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(_&3)===0||ds(f,_)||(u=!0,u2(f,_));f=f.next}while(u);Sg=!1}}function Ej(){o2()}function o2(){Kf=bg=!1;var s=0;vl!==0&&(Rj()&&(s=vl),vl=0);for(var l=Be(),u=null,f=Yf;f!==null;){var v=f.next,_=l2(f,l);_===0?(f.next=null,u===null?Yf=v:u.next=v,v===null&&(Cc=u)):(u=f,(s!==0||(_&3)!==0)&&(Kf=!0)),f=v}_h(s)}function l2(s,l){for(var u=s.suspendedLanes,f=s.pingedLanes,v=s.expirationTimes,_=s.pendingLanes&-62914561;0<_;){var I=31-tn(_),L=1<<I,Q=v[I];Q===-1?((L&u)===0||(L&f)!==0)&&(v[I]=Vs(L,l)):Q<=l&&(s.expiredLanes|=L),_&=~L}if(l=er,u=wt,u=Hn(s,s===l?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),f=s.callbackNode,u===0||s===l&&(Lt===2||Lt===9)||s.cancelPendingCommit!==null)return f!==null&&f!==null&&gt(f),s.callbackNode=null,s.callbackPriority=0;if((u&3)===0||ds(s,u)){if(l=u&-u,l===s.callbackPriority)return l;switch(f!==null&&gt(f),Ho(u)){case 2:case 8:u=Jt;break;case 32:u=vn;break;case 268435456:u=Ls;break;default:u=vn}return f=c2.bind(null,s),u=Ht(u,f),s.callbackPriority=l,s.callbackNode=u,l}return f!==null&&f!==null&&gt(f),s.callbackPriority=2,s.callbackNode=null,2}function c2(s,l){if(nn!==0&&nn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var u=s.callbackNode;if(Wf()&&s.callbackNode!==u)return null;var f=wt;return f=Hn(s,s===er?f:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),f===0?null:(q_(s,f,l),l2(s,Be()),s.callbackNode!=null&&s.callbackNode===u?c2.bind(null,s):null)}function u2(s,l){if(Wf())return null;q_(s,l,!0)}function Tj(){Ij(function(){(Ft&6)!==0?Ht(Ot,Ej):o2()})}function Ag(){return vl===0&&(vl=Ai()),vl}function h2(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Ga(""+s)}function d2(s,l){var u=l.ownerDocument.createElement("input");return u.name=l.name,u.value=l.value,s.id&&u.setAttribute("form",s.id),l.parentNode.insertBefore(u,l),s=new FormData(s),u.parentNode.removeChild(u),s}function wj(s,l,u,f,v){if(l==="submit"&&u&&u.stateNode===v){var _=h2((v[xr]||null).action),I=f.submitter;I&&(l=(l=I[xr]||null)?h2(l.formAction):I.getAttribute("formAction"),l!==null&&(_=l,I=null));var L=new Xo("action","action",null,f,v);s.push({event:L,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(vl!==0){var Q=I?d2(v,I):new FormData(v);Wp(u,{pending:!0,data:Q,method:v.method,action:_},null,Q)}}else typeof _=="function"&&(L.preventDefault(),Q=I?d2(v,I):new FormData(v),Wp(u,{pending:!0,data:Q,method:v.method,action:_},_,Q))},currentTarget:v}]})}}for(var Cg=0;Cg<dp.length;Cg++){var jg=dp[Cg],Nj=jg.toLowerCase(),bj=jg[0].toUpperCase()+jg.slice(1);Ya(Nj,"on"+bj)}Ya(q1,"onAnimationEnd"),Ya($1,"onAnimationIteration"),Ya(W1,"onAnimationStart"),Ya("dblclick","onDoubleClick"),Ya("focusin","onFocus"),Ya("focusout","onBlur"),Ya(zC,"onTransitionRun"),Ya(HC,"onTransitionStart"),Ya(GC,"onTransitionCancel"),Ya(Y1,"onTransitionEnd"),Ie("onMouseEnter",["mouseout","mouseover"]),Ie("onMouseLeave",["mouseout","mouseover"]),Ie("onPointerEnter",["pointerout","pointerover"]),Ie("onPointerLeave",["pointerout","pointerover"]),Ae("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ae("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ae("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ae("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ae("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ae("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Eh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sj=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Eh));function f2(s,l){l=(l&4)!==0;for(var u=0;u<s.length;u++){var f=s[u],v=f.event;f=f.listeners;e:{var _=void 0;if(l)for(var I=f.length-1;0<=I;I--){var L=f[I],Q=L.instance,ue=L.currentTarget;if(L=L.listener,Q!==_&&v.isPropagationStopped())break e;_=L,v.currentTarget=ue;try{_(v)}catch(Ee){Pf(Ee)}v.currentTarget=null,_=Q}else for(I=0;I<f.length;I++){if(L=f[I],Q=L.instance,ue=L.currentTarget,L=L.listener,Q!==_&&v.isPropagationStopped())break e;_=L,v.currentTarget=ue;try{_(v)}catch(Ee){Pf(Ee)}v.currentTarget=null,_=Q}}}}function xt(s,l){var u=l[Us];u===void 0&&(u=l[Us]=new Set);var f=s+"__bubble";u.has(f)||(m2(l,s,2,!1),u.add(f))}function Rg(s,l,u){var f=0;l&&(f|=4),m2(u,s,f,l)}var Xf="_reactListening"+Math.random().toString(36).slice(2);function Dg(s){if(!s[Xf]){s[Xf]=!0,de.forEach(function(u){u!=="selectionchange"&&(Sj.has(u)||Rg(u,!1,s),Rg(u,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[Xf]||(l[Xf]=!0,Rg("selectionchange",!1,l))}}function m2(s,l,u,f){switch(L2(l)){case 2:var v=Zj;break;case 8:v=eR;break;default:v=qg}u=v.bind(null,l,u,s),v=void 0,!qs||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(v=!0),f?v!==void 0?s.addEventListener(l,u,{capture:!0,passive:v}):s.addEventListener(l,u,!0):v!==void 0?s.addEventListener(l,u,{passive:v}):s.addEventListener(l,u,!1)}function Ig(s,l,u,f,v){var _=f;if((l&1)===0&&(l&2)===0&&f!==null)e:for(;;){if(f===null)return;var I=f.tag;if(I===3||I===4){var L=f.stateNode.containerInfo;if(L===v)break;if(I===4)for(I=f.return;I!==null;){var Q=I.tag;if((Q===3||Q===4)&&I.stateNode.containerInfo===v)return;I=I.return}for(;L!==null;){if(I=K(L),I===null)return;if(Q=I.tag,Q===5||Q===6||Q===26||Q===27){f=_=I;continue e}L=L.parentNode}}f=f.return}Wo(function(){var ue=_,Ee=Lu(u),Ne=[];e:{var me=K1.get(s);if(me!==void 0){var pe=Xo,it=s;switch(s){case"keypress":if(Yo(u)===0)break e;case"keydown":case"keyup":pe=ac;break;case"focusin":it="focus",pe=tc;break;case"focusout":it="blur",pe=tc;break;case"beforeblur":case"afterblur":pe=tc;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pe=tl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pe=nf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pe=Mi;break;case q1:case $1:case W1:pe=Bu;break;case Y1:pe=N;break;case"scroll":case"scrollend":pe=Jo;break;case"wheel":pe=U;break;case"copy":case"cut":case"paste":pe=sf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pe=Hu;break;case"toggle":case"beforetoggle":pe=ve}var tt=(l&4)!==0,Yt=!tt&&(s==="scroll"||s==="scrollend"),se=tt?me!==null?me+"Capture":null:me;tt=[];for(var ne=ue,oe;ne!==null;){var Te=ne;if(oe=Te.stateNode,Te=Te.tag,Te!==5&&Te!==26&&Te!==27||oe===null||se===null||(Te=ki(ne,se),Te!=null&&tt.push(Th(ne,Te,oe))),Yt)break;ne=ne.return}0<tt.length&&(me=new pe(me,it,null,u,Ee),Ne.push({event:me,listeners:tt}))}}if((l&7)===0){e:{if(me=s==="mouseover"||s==="pointerover",pe=s==="mouseout"||s==="pointerout",me&&u!==Fu&&(it=u.relatedTarget||u.fromElement)&&(K(it)||it[za]))break e;if((pe||me)&&(me=Ee.window===Ee?Ee:(me=Ee.ownerDocument)?me.defaultView||me.parentWindow:window,pe?(it=u.relatedTarget||u.toElement,pe=ue,it=it?K(it):null,it!==null&&(Yt=o(it),tt=it.tag,it!==Yt||tt!==5&&tt!==27&&tt!==6)&&(it=null)):(pe=null,it=ue),pe!==it)){if(tt=tl,Te="onMouseLeave",se="onMouseEnter",ne="mouse",(s==="pointerout"||s==="pointerover")&&(tt=Hu,Te="onPointerLeave",se="onPointerEnter",ne="pointer"),Yt=pe==null?me:ce(pe),oe=it==null?me:ce(it),me=new tt(Te,ne+"leave",pe,u,Ee),me.target=Yt,me.relatedTarget=oe,Te=null,K(Ee)===ue&&(tt=new tt(se,ne+"enter",it,u,Ee),tt.target=oe,tt.relatedTarget=Yt,Te=tt),Yt=Te,pe&&it)t:{for(tt=pe,se=it,ne=0,oe=tt;oe;oe=jc(oe))ne++;for(oe=0,Te=se;Te;Te=jc(Te))oe++;for(;0<ne-oe;)tt=jc(tt),ne--;for(;0<oe-ne;)se=jc(se),oe--;for(;ne--;){if(tt===se||se!==null&&tt===se.alternate)break t;tt=jc(tt),se=jc(se)}tt=null}else tt=null;pe!==null&&p2(Ne,me,pe,tt,!1),it!==null&&Yt!==null&&p2(Ne,Yt,it,tt,!0)}}e:{if(me=ue?ce(ue):window,pe=me.nodeName&&me.nodeName.toLowerCase(),pe==="select"||pe==="input"&&me.type==="file")var We=O1;else if(I1(me))if(M1)We=VC;else{We=FC;var pt=PC}else pe=me.nodeName,!pe||pe.toLowerCase()!=="input"||me.type!=="checkbox"&&me.type!=="radio"?ue&&Jl(ue.elementType)&&(We=O1):We=LC;if(We&&(We=We(s,ue))){k1(Ne,We,u,Ee);break e}pt&&pt(s,me,ue),s==="focusout"&&ue&&me.type==="number"&&ue.memoizedProps.value!=null&&Ou(me,"number",me.value)}switch(pt=ue?ce(ue):window,s){case"focusin":(I1(pt)||pt.contentEditable==="true")&&(sc=pt,cp=ue,Yu=null);break;case"focusout":Yu=cp=sc=null;break;case"mousedown":up=!0;break;case"contextmenu":case"mouseup":case"dragend":up=!1,H1(Ne,u,Ee);break;case"selectionchange":if(UC)break;case"keydown":case"keyup":H1(Ne,u,Ee)}var Qe;if(ut)e:{switch(s){case"compositionstart":var rt="onCompositionStart";break e;case"compositionend":rt="onCompositionEnd";break e;case"compositionupdate":rt="onCompositionUpdate";break e}rt=void 0}else Wa?qa(s,u)&&(rt="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(rt="onCompositionStart");rt&&(yr&&u.locale!=="ko"&&(Wa||rt!=="onCompositionStart"?rt==="onCompositionEnd"&&Wa&&(Qe=rf()):(Na=Ee,Zt="value"in Na?Na.value:Na.textContent,Wa=!0)),pt=Qf(ue,rt),0<pt.length&&(rt=new zu(rt,s,null,u,Ee),Ne.push({event:rt,listeners:pt}),Qe?rt.data=Qe:(Qe=$a(u),Qe!==null&&(rt.data=Qe)))),(Qe=Pt?Gu(s,u):kC(s,u))&&(rt=Qf(ue,"onBeforeInput"),0<rt.length&&(pt=new zu("onBeforeInput","beforeinput",null,u,Ee),Ne.push({event:pt,listeners:rt}),pt.data=Qe)),wj(Ne,s,ue,u,Ee)}f2(Ne,l)})}function Th(s,l,u){return{instance:s,listener:l,currentTarget:u}}function Qf(s,l){for(var u=l+"Capture",f=[];s!==null;){var v=s,_=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||_===null||(v=ki(s,u),v!=null&&f.unshift(Th(s,v,_)),v=ki(s,l),v!=null&&f.push(Th(s,v,_))),s.tag===3)return f;s=s.return}return[]}function jc(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function p2(s,l,u,f,v){for(var _=l._reactName,I=[];u!==null&&u!==f;){var L=u,Q=L.alternate,ue=L.stateNode;if(L=L.tag,Q!==null&&Q===f)break;L!==5&&L!==26&&L!==27||ue===null||(Q=ue,v?(ue=ki(u,_),ue!=null&&I.unshift(Th(u,ue,Q))):v||(ue=ki(u,_),ue!=null&&I.push(Th(u,ue,Q)))),u=u.return}I.length!==0&&s.push({event:l,listeners:I})}var Aj=/\r\n?/g,Cj=/\u0000|\uFFFD/g;function g2(s){return(typeof s=="string"?s:""+s).replace(Aj,`
`).replace(Cj,"")}function v2(s,l){return l=g2(l),g2(s)===l}function Jf(){}function Wt(s,l,u,f,v,_){switch(u){case"children":typeof f=="string"?l==="body"||l==="textarea"&&f===""||wa(s,f):(typeof f=="number"||typeof f=="bigint")&&l!=="body"&&wa(s,""+f);break;case"className":Rt(s,"class",f);break;case"tabIndex":Rt(s,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":Rt(s,u,f);break;case"style":Pu(s,f,_);break;case"data":if(l!=="object"){Rt(s,"data",f);break}case"src":case"href":if(f===""&&(l!=="a"||u!=="href")){s.removeAttribute(u);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){s.removeAttribute(u);break}f=Ga(""+f),s.setAttribute(u,f);break;case"action":case"formAction":if(typeof f=="function"){s.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(u==="formAction"?(l!=="input"&&Wt(s,l,"name",v.name,v,null),Wt(s,l,"formEncType",v.formEncType,v,null),Wt(s,l,"formMethod",v.formMethod,v,null),Wt(s,l,"formTarget",v.formTarget,v,null)):(Wt(s,l,"encType",v.encType,v,null),Wt(s,l,"method",v.method,v,null),Wt(s,l,"target",v.target,v,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){s.removeAttribute(u);break}f=Ga(""+f),s.setAttribute(u,f);break;case"onClick":f!=null&&(s.onclick=Jf);break;case"onScroll":f!=null&&xt("scroll",s);break;case"onScrollEnd":f!=null&&xt("scrollend",s);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(n(61));if(u=f.__html,u!=null){if(v.children!=null)throw Error(n(60));s.innerHTML=u}}break;case"multiple":s.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":s.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){s.removeAttribute("xlink:href");break}u=Ga(""+f),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?s.setAttribute(u,""+f):s.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?s.setAttribute(u,""):s.removeAttribute(u);break;case"capture":case"download":f===!0?s.setAttribute(u,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?s.setAttribute(u,f):s.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?s.setAttribute(u,f):s.removeAttribute(u);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?s.removeAttribute(u):s.setAttribute(u,f);break;case"popover":xt("beforetoggle",s),xt("toggle",s),jt(s,"popover",f);break;case"xlinkActuate":Mt(s,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":Mt(s,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":Mt(s,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":Mt(s,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":Mt(s,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":Mt(s,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":Mt(s,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":Mt(s,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":Mt(s,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":jt(s,"is",f);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=Zd.get(u)||u,jt(s,u,f))}}function kg(s,l,u,f,v,_){switch(u){case"style":Pu(s,f,_);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(n(61));if(u=f.__html,u!=null){if(v.children!=null)throw Error(n(60));s.innerHTML=u}}break;case"children":typeof f=="string"?wa(s,f):(typeof f=="number"||typeof f=="bigint")&&wa(s,""+f);break;case"onScroll":f!=null&&xt("scroll",s);break;case"onScrollEnd":f!=null&&xt("scrollend",s);break;case"onClick":f!=null&&(s.onclick=Jf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!fe.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(v=u.endsWith("Capture"),l=u.slice(2,v?u.length-7:void 0),_=s[xr]||null,_=_!=null?_[u]:null,typeof _=="function"&&s.removeEventListener(l,_,v),typeof f=="function")){typeof _!="function"&&_!==null&&(u in s?s[u]=null:s.hasAttribute(u)&&s.removeAttribute(u)),s.addEventListener(l,f,v);break e}u in s?s[u]=f:f===!0?s.setAttribute(u,""):jt(s,u,f)}}}function an(s,l,u){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":xt("error",s),xt("load",s);var f=!1,v=!1,_;for(_ in u)if(u.hasOwnProperty(_)){var I=u[_];if(I!=null)switch(_){case"src":f=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,l));default:Wt(s,l,_,I,u,null)}}v&&Wt(s,l,"srcSet",u.srcSet,u,null),f&&Wt(s,l,"src",u.src,u,null);return;case"input":xt("invalid",s);var L=_=I=v=null,Q=null,ue=null;for(f in u)if(u.hasOwnProperty(f)){var Ee=u[f];if(Ee!=null)switch(f){case"name":v=Ee;break;case"type":I=Ee;break;case"checked":Q=Ee;break;case"defaultChecked":ue=Ee;break;case"value":_=Ee;break;case"defaultValue":L=Ee;break;case"children":case"dangerouslySetInnerHTML":if(Ee!=null)throw Error(n(137,l));break;default:Wt(s,l,f,Ee,u,null)}}ku(s,_,L,Q,ue,I,v,!1),Ri(s);return;case"select":xt("invalid",s),f=I=_=null;for(v in u)if(u.hasOwnProperty(v)&&(L=u[v],L!=null))switch(v){case"value":_=L;break;case"defaultValue":I=L;break;case"multiple":f=L;default:Wt(s,l,v,L,u,null)}l=_,u=I,s.multiple=!!f,l!=null?Di(s,!!f,l,!1):u!=null&&Di(s,!!f,u,!0);return;case"textarea":xt("invalid",s),_=v=f=null;for(I in u)if(u.hasOwnProperty(I)&&(L=u[I],L!=null))switch(I){case"value":f=L;break;case"defaultValue":v=L;break;case"children":_=L;break;case"dangerouslySetInnerHTML":if(L!=null)throw Error(n(91));break;default:Wt(s,l,I,L,u,null)}Jd(s,f,v,_),Ri(s);return;case"option":for(Q in u)if(u.hasOwnProperty(Q)&&(f=u[Q],f!=null))switch(Q){case"selected":s.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:Wt(s,l,Q,f,u,null)}return;case"dialog":xt("beforetoggle",s),xt("toggle",s),xt("cancel",s),xt("close",s);break;case"iframe":case"object":xt("load",s);break;case"video":case"audio":for(f=0;f<Eh.length;f++)xt(Eh[f],s);break;case"image":xt("error",s),xt("load",s);break;case"details":xt("toggle",s);break;case"embed":case"source":case"link":xt("error",s),xt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ue in u)if(u.hasOwnProperty(ue)&&(f=u[ue],f!=null))switch(ue){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,l));default:Wt(s,l,ue,f,u,null)}return;default:if(Jl(l)){for(Ee in u)u.hasOwnProperty(Ee)&&(f=u[Ee],f!==void 0&&kg(s,l,Ee,f,u,void 0));return}}for(L in u)u.hasOwnProperty(L)&&(f=u[L],f!=null&&Wt(s,l,L,f,u,null))}function jj(s,l,u,f){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,_=null,I=null,L=null,Q=null,ue=null,Ee=null;for(pe in u){var Ne=u[pe];if(u.hasOwnProperty(pe)&&Ne!=null)switch(pe){case"checked":break;case"value":break;case"defaultValue":Q=Ne;default:f.hasOwnProperty(pe)||Wt(s,l,pe,null,f,Ne)}}for(var me in f){var pe=f[me];if(Ne=u[me],f.hasOwnProperty(me)&&(pe!=null||Ne!=null))switch(me){case"type":_=pe;break;case"name":v=pe;break;case"checked":ue=pe;break;case"defaultChecked":Ee=pe;break;case"value":I=pe;break;case"defaultValue":L=pe;break;case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(n(137,l));break;default:pe!==Ne&&Wt(s,l,me,pe,f,Ne)}}Iu(s,I,L,Q,ue,Ee,_,v);return;case"select":pe=I=L=me=null;for(_ in u)if(Q=u[_],u.hasOwnProperty(_)&&Q!=null)switch(_){case"value":break;case"multiple":pe=Q;default:f.hasOwnProperty(_)||Wt(s,l,_,null,f,Q)}for(v in f)if(_=f[v],Q=u[v],f.hasOwnProperty(v)&&(_!=null||Q!=null))switch(v){case"value":me=_;break;case"defaultValue":L=_;break;case"multiple":I=_;default:_!==Q&&Wt(s,l,v,_,f,Q)}l=L,u=I,f=pe,me!=null?Di(s,!!u,me,!1):!!f!=!!u&&(l!=null?Di(s,!!u,l,!0):Di(s,!!u,u?[]:"",!1));return;case"textarea":pe=me=null;for(L in u)if(v=u[L],u.hasOwnProperty(L)&&v!=null&&!f.hasOwnProperty(L))switch(L){case"value":break;case"children":break;default:Wt(s,l,L,null,f,v)}for(I in f)if(v=f[I],_=u[I],f.hasOwnProperty(I)&&(v!=null||_!=null))switch(I){case"value":me=v;break;case"defaultValue":pe=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(n(91));break;default:v!==_&&Wt(s,l,I,v,f,_)}Qd(s,me,pe);return;case"option":for(var it in u)if(me=u[it],u.hasOwnProperty(it)&&me!=null&&!f.hasOwnProperty(it))switch(it){case"selected":s.selected=!1;break;default:Wt(s,l,it,null,f,me)}for(Q in f)if(me=f[Q],pe=u[Q],f.hasOwnProperty(Q)&&me!==pe&&(me!=null||pe!=null))switch(Q){case"selected":s.selected=me&&typeof me!="function"&&typeof me!="symbol";break;default:Wt(s,l,Q,me,f,pe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var tt in u)me=u[tt],u.hasOwnProperty(tt)&&me!=null&&!f.hasOwnProperty(tt)&&Wt(s,l,tt,null,f,me);for(ue in f)if(me=f[ue],pe=u[ue],f.hasOwnProperty(ue)&&me!==pe&&(me!=null||pe!=null))switch(ue){case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(n(137,l));break;default:Wt(s,l,ue,me,f,pe)}return;default:if(Jl(l)){for(var Yt in u)me=u[Yt],u.hasOwnProperty(Yt)&&me!==void 0&&!f.hasOwnProperty(Yt)&&kg(s,l,Yt,void 0,f,me);for(Ee in f)me=f[Ee],pe=u[Ee],!f.hasOwnProperty(Ee)||me===pe||me===void 0&&pe===void 0||kg(s,l,Ee,me,f,pe);return}}for(var se in u)me=u[se],u.hasOwnProperty(se)&&me!=null&&!f.hasOwnProperty(se)&&Wt(s,l,se,null,f,me);for(Ne in f)me=f[Ne],pe=u[Ne],!f.hasOwnProperty(Ne)||me===pe||me==null&&pe==null||Wt(s,l,Ne,me,f,pe)}var Og=null,Mg=null;function Zf(s){return s.nodeType===9?s:s.ownerDocument}function x2(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function y2(s,l){if(s===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&l==="foreignObject"?0:s}function Pg(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Fg=null;function Rj(){var s=window.event;return s&&s.type==="popstate"?s===Fg?!1:(Fg=s,!0):(Fg=null,!1)}var _2=typeof setTimeout=="function"?setTimeout:void 0,Dj=typeof clearTimeout=="function"?clearTimeout:void 0,E2=typeof Promise=="function"?Promise:void 0,Ij=typeof queueMicrotask=="function"?queueMicrotask:typeof E2<"u"?function(s){return E2.resolve(null).then(s).catch(kj)}:_2;function kj(s){setTimeout(function(){throw s})}function Qi(s){return s==="head"}function T2(s,l){var u=l,f=0,v=0;do{var _=u.nextSibling;if(s.removeChild(u),_&&_.nodeType===8)if(u=_.data,u==="/$"){if(0<f&&8>f){u=f;var I=s.ownerDocument;if(u&1&&wh(I.documentElement),u&2&&wh(I.body),u&4)for(u=I.head,wh(u),I=u.firstChild;I;){var L=I.nextSibling,Q=I.nodeName;I[z]||Q==="SCRIPT"||Q==="STYLE"||Q==="LINK"&&I.rel.toLowerCase()==="stylesheet"||u.removeChild(I),I=L}}if(v===0){s.removeChild(_),Dh(l);return}v--}else u==="$"||u==="$?"||u==="$!"?v++:f=u.charCodeAt(0)-48;else f=0;u=_}while(u);Dh(l)}function Lg(s){var l=s.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var u=l;switch(l=l.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Lg(u),G(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}s.removeChild(u)}}function Oj(s,l,u,f){for(;s.nodeType===1;){var v=u;if(s.nodeName.toLowerCase()!==l.toLowerCase()){if(!f&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(f){if(!s[z])switch(l){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(_=s.getAttribute("rel"),_==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(_!==v.rel||s.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||s.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||s.getAttribute("title")!==(v.title==null?null:v.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(_=s.getAttribute("src"),(_!==(v.src==null?null:v.src)||s.getAttribute("type")!==(v.type==null?null:v.type)||s.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&_&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(l==="input"&&s.type==="hidden"){var _=v.name==null?null:""+v.name;if(v.type==="hidden"&&s.getAttribute("name")===_)return s}else return s;if(s=Xa(s.nextSibling),s===null)break}return null}function Mj(s,l,u){if(l==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!u||(s=Xa(s.nextSibling),s===null))return null;return s}function Vg(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function Pj(s,l){var u=s.ownerDocument;if(s.data!=="$?"||u.readyState==="complete")l();else{var f=function(){l(),u.removeEventListener("DOMContentLoaded",f)};u.addEventListener("DOMContentLoaded",f),s._reactRetry=f}}function Xa(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return s}var Bg=null;function w2(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"){if(l===0)return s;l--}else u==="/$"&&l++}s=s.previousSibling}return null}function N2(s,l,u){switch(l=Zf(u),s){case"html":if(s=l.documentElement,!s)throw Error(n(452));return s;case"head":if(s=l.head,!s)throw Error(n(453));return s;case"body":if(s=l.body,!s)throw Error(n(454));return s;default:throw Error(n(451))}}function wh(s){for(var l=s.attributes;l.length;)s.removeAttributeNode(l[0]);G(s)}var Da=new Map,b2=new Set;function em(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var si=De.d;De.d={f:Fj,r:Lj,D:Vj,C:Bj,L:Uj,m:zj,X:Gj,S:Hj,M:qj};function Fj(){var s=si.f(),l=qf();return s||l}function Lj(s){var l=X(s);l!==null&&l.tag===5&&l.type==="form"?qy(l):si.r(s)}var Rc=typeof document>"u"?null:document;function S2(s,l,u){var f=Rc;if(f&&typeof l=="string"&&l){var v=Hr(l);v='link[rel="'+s+'"][href="'+v+'"]',typeof u=="string"&&(v+='[crossorigin="'+u+'"]'),b2.has(v)||(b2.add(v),s={rel:s,crossOrigin:u,href:l},f.querySelector(v)===null&&(l=f.createElement("link"),an(l,"link",s),ie(l),f.head.appendChild(l)))}}function Vj(s){si.D(s),S2("dns-prefetch",s,null)}function Bj(s,l){si.C(s,l),S2("preconnect",s,l)}function Uj(s,l,u){si.L(s,l,u);var f=Rc;if(f&&s&&l){var v='link[rel="preload"][as="'+Hr(l)+'"]';l==="image"&&u&&u.imageSrcSet?(v+='[imagesrcset="'+Hr(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(v+='[imagesizes="'+Hr(u.imageSizes)+'"]')):v+='[href="'+Hr(s)+'"]';var _=v;switch(l){case"style":_=Dc(s);break;case"script":_=Ic(s)}Da.has(_)||(s=p({rel:"preload",href:l==="image"&&u&&u.imageSrcSet?void 0:s,as:l},u),Da.set(_,s),f.querySelector(v)!==null||l==="style"&&f.querySelector(Nh(_))||l==="script"&&f.querySelector(bh(_))||(l=f.createElement("link"),an(l,"link",s),ie(l),f.head.appendChild(l)))}}function zj(s,l){si.m(s,l);var u=Rc;if(u&&s){var f=l&&typeof l.as=="string"?l.as:"script",v='link[rel="modulepreload"][as="'+Hr(f)+'"][href="'+Hr(s)+'"]',_=v;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Ic(s)}if(!Da.has(_)&&(s=p({rel:"modulepreload",href:s},l),Da.set(_,s),u.querySelector(v)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(bh(_)))return}f=u.createElement("link"),an(f,"link",s),ie(f),u.head.appendChild(f)}}}function Hj(s,l,u){si.S(s,l,u);var f=Rc;if(f&&s){var v=xe(f).hoistableStyles,_=Dc(s);l=l||"default";var I=v.get(_);if(!I){var L={loading:0,preload:null};if(I=f.querySelector(Nh(_)))L.loading=5;else{s=p({rel:"stylesheet",href:s,"data-precedence":l},u),(u=Da.get(_))&&Ug(s,u);var Q=I=f.createElement("link");ie(Q),an(Q,"link",s),Q._p=new Promise(function(ue,Ee){Q.onload=ue,Q.onerror=Ee}),Q.addEventListener("load",function(){L.loading|=1}),Q.addEventListener("error",function(){L.loading|=2}),L.loading|=4,tm(I,l,f)}I={type:"stylesheet",instance:I,count:1,state:L},v.set(_,I)}}}function Gj(s,l){si.X(s,l);var u=Rc;if(u&&s){var f=xe(u).hoistableScripts,v=Ic(s),_=f.get(v);_||(_=u.querySelector(bh(v)),_||(s=p({src:s,async:!0},l),(l=Da.get(v))&&zg(s,l),_=u.createElement("script"),ie(_),an(_,"link",s),u.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},f.set(v,_))}}function qj(s,l){si.M(s,l);var u=Rc;if(u&&s){var f=xe(u).hoistableScripts,v=Ic(s),_=f.get(v);_||(_=u.querySelector(bh(v)),_||(s=p({src:s,async:!0,type:"module"},l),(l=Da.get(v))&&zg(s,l),_=u.createElement("script"),ie(_),an(_,"link",s),u.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},f.set(v,_))}}function A2(s,l,u,f){var v=(v=he.current)?em(v):null;if(!v)throw Error(n(446));switch(s){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(l=Dc(u.href),u=xe(v).hoistableStyles,f=u.get(l),f||(f={type:"style",instance:null,count:0,state:null},u.set(l,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){s=Dc(u.href);var _=xe(v).hoistableStyles,I=_.get(s);if(I||(v=v.ownerDocument||v,I={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(s,I),(_=v.querySelector(Nh(s)))&&!_._p&&(I.instance=_,I.state.loading=5),Da.has(s)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},Da.set(s,u),_||$j(v,s,u,I.state))),l&&f===null)throw Error(n(528,""));return I}if(l&&f!==null)throw Error(n(529,""));return null;case"script":return l=u.async,u=u.src,typeof u=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Ic(u),u=xe(v).hoistableScripts,f=u.get(l),f||(f={type:"script",instance:null,count:0,state:null},u.set(l,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,s))}}function Dc(s){return'href="'+Hr(s)+'"'}function Nh(s){return'link[rel="stylesheet"]['+s+"]"}function C2(s){return p({},s,{"data-precedence":s.precedence,precedence:null})}function $j(s,l,u,f){s.querySelector('link[rel="preload"][as="style"]['+l+"]")?f.loading=1:(l=s.createElement("link"),f.preload=l,l.addEventListener("load",function(){return f.loading|=1}),l.addEventListener("error",function(){return f.loading|=2}),an(l,"link",u),ie(l),s.head.appendChild(l))}function Ic(s){return'[src="'+Hr(s)+'"]'}function bh(s){return"script[async]"+s}function j2(s,l,u){if(l.count++,l.instance===null)switch(l.type){case"style":var f=s.querySelector('style[data-href~="'+Hr(u.href)+'"]');if(f)return l.instance=f,ie(f),f;var v=p({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return f=(s.ownerDocument||s).createElement("style"),ie(f),an(f,"style",v),tm(f,u.precedence,s),l.instance=f;case"stylesheet":v=Dc(u.href);var _=s.querySelector(Nh(v));if(_)return l.state.loading|=4,l.instance=_,ie(_),_;f=C2(u),(v=Da.get(v))&&Ug(f,v),_=(s.ownerDocument||s).createElement("link"),ie(_);var I=_;return I._p=new Promise(function(L,Q){I.onload=L,I.onerror=Q}),an(_,"link",f),l.state.loading|=4,tm(_,u.precedence,s),l.instance=_;case"script":return _=Ic(u.src),(v=s.querySelector(bh(_)))?(l.instance=v,ie(v),v):(f=u,(v=Da.get(_))&&(f=p({},u),zg(f,v)),s=s.ownerDocument||s,v=s.createElement("script"),ie(v),an(v,"link",f),s.head.appendChild(v),l.instance=v);case"void":return null;default:throw Error(n(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(f=l.instance,l.state.loading|=4,tm(f,u.precedence,s));return l.instance}function tm(s,l,u){for(var f=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=f.length?f[f.length-1]:null,_=v,I=0;I<f.length;I++){var L=f[I];if(L.dataset.precedence===l)_=L;else if(_!==v)break}_?_.parentNode.insertBefore(s,_.nextSibling):(l=u.nodeType===9?u.head:u,l.insertBefore(s,l.firstChild))}function Ug(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.title==null&&(s.title=l.title)}function zg(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.integrity==null&&(s.integrity=l.integrity)}var rm=null;function R2(s,l,u){if(rm===null){var f=new Map,v=rm=new Map;v.set(u,f)}else v=rm,f=v.get(u),f||(f=new Map,v.set(u,f));if(f.has(s))return f;for(f.set(s,null),u=u.getElementsByTagName(s),v=0;v<u.length;v++){var _=u[v];if(!(_[z]||_[lr]||s==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var I=_.getAttribute(l)||"";I=s+I;var L=f.get(I);L?L.push(_):f.set(I,[_])}}return f}function D2(s,l,u){s=s.ownerDocument||s,s.head.insertBefore(u,l==="title"?s.querySelector("head > title"):null)}function Wj(s,l,u){if(u===1||l.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return s=l.disabled,typeof l.precedence=="string"&&s==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function I2(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var Sh=null;function Yj(){}function Kj(s,l,u){if(Sh===null)throw Error(n(475));var f=Sh;if(l.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var v=Dc(u.href),_=s.querySelector(Nh(v));if(_){s=_._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(f.count++,f=nm.bind(f),s.then(f,f)),l.state.loading|=4,l.instance=_,ie(_);return}_=s.ownerDocument||s,u=C2(u),(v=Da.get(v))&&Ug(u,v),_=_.createElement("link"),ie(_);var I=_;I._p=new Promise(function(L,Q){I.onload=L,I.onerror=Q}),an(_,"link",u),l.instance=_}f.stylesheets===null&&(f.stylesheets=new Map),f.stylesheets.set(l,s),(s=l.state.preload)&&(l.state.loading&3)===0&&(f.count++,l=nm.bind(f),s.addEventListener("load",l),s.addEventListener("error",l))}}function Xj(){if(Sh===null)throw Error(n(475));var s=Sh;return s.stylesheets&&s.count===0&&Hg(s,s.stylesheets),0<s.count?function(l){var u=setTimeout(function(){if(s.stylesheets&&Hg(s,s.stylesheets),s.unsuspend){var f=s.unsuspend;s.unsuspend=null,f()}},6e4);return s.unsuspend=l,function(){s.unsuspend=null,clearTimeout(u)}}:null}function nm(){if(this.count--,this.count===0){if(this.stylesheets)Hg(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var am=null;function Hg(s,l){s.stylesheets=null,s.unsuspend!==null&&(s.count++,am=new Map,l.forEach(Qj,s),am=null,nm.call(s))}function Qj(s,l){if(!(l.state.loading&4)){var u=am.get(s);if(u)var f=u.get(null);else{u=new Map,am.set(s,u);for(var v=s.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<v.length;_++){var I=v[_];(I.nodeName==="LINK"||I.getAttribute("media")!=="not all")&&(u.set(I.dataset.precedence,I),f=I)}f&&u.set(null,f)}v=l.instance,I=v.getAttribute("data-precedence"),_=u.get(I)||f,_===f&&u.set(null,v),u.set(I,v),this.count++,f=nm.bind(this),v.addEventListener("load",f),v.addEventListener("error",f),_?_.parentNode.insertBefore(v,_.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(v,s.firstChild)),l.state.loading|=4}}var Ah={$$typeof:V,Provider:null,Consumer:null,_currentValue:Fe,_currentValue2:Fe,_threadCount:0};function Jj(s,l,u,f,v,_,I,L){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ci(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ci(0),this.hiddenUpdates=Ci(null),this.identifierPrefix=f,this.onUncaughtError=v,this.onCaughtError=_,this.onRecoverableError=I,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function k2(s,l,u,f,v,_,I,L,Q,ue,Ee,Ne){return s=new Jj(s,l,u,I,L,Q,ue,Ne),l=1,_===!0&&(l|=24),_=oa(3,null,null,l),s.current=_,_.stateNode=s,l=Np(),l.refCount++,s.pooledCache=l,l.refCount++,_.memoizedState={element:f,isDehydrated:u,cache:l},Cp(_),s}function O2(s){return s?(s=cc,s):cc}function M2(s,l,u,f,v,_){v=O2(v),f.context===null?f.context=v:f.pendingContext=v,f=Li(l),f.payload={element:u},_=_===void 0?null:_,_!==null&&(f.callback=_),u=Vi(s,f,l),u!==null&&(da(u,s,l),nh(u,s,l))}function P2(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<l?u:l}}function Gg(s,l){P2(s,l),(s=s.alternate)&&P2(s,l)}function F2(s){if(s.tag===13){var l=lc(s,67108864);l!==null&&da(l,s,67108864),Gg(s,67108864)}}var sm=!0;function Zj(s,l,u,f){var v=ge.T;ge.T=null;var _=De.p;try{De.p=2,qg(s,l,u,f)}finally{De.p=_,ge.T=v}}function eR(s,l,u,f){var v=ge.T;ge.T=null;var _=De.p;try{De.p=8,qg(s,l,u,f)}finally{De.p=_,ge.T=v}}function qg(s,l,u,f){if(sm){var v=$g(f);if(v===null)Ig(s,l,f,im,u),V2(s,f);else if(rR(v,s,l,u,f))f.stopPropagation();else if(V2(s,f),l&4&&-1<tR.indexOf(s)){for(;v!==null;){var _=X(v);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var I=zn(_.pendingLanes);if(I!==0){var L=_;for(L.pendingLanes|=2,L.entangledLanes|=2;I;){var Q=1<<31-tn(I);L.entanglements[1]|=Q,I&=~Q}Ts(_),(Ft&6)===0&&(Hf=Be()+500,_h(0))}}break;case 13:L=lc(_,2),L!==null&&da(L,_,2),qf(),Gg(_,2)}if(_=$g(f),_===null&&Ig(s,l,f,im,u),_===v)break;v=_}v!==null&&f.stopPropagation()}else Ig(s,l,f,null,u)}}function $g(s){return s=Lu(s),Wg(s)}var im=null;function Wg(s){if(im=null,s=K(s),s!==null){var l=o(s);if(l===null)s=null;else{var u=l.tag;if(u===13){if(s=c(l),s!==null)return s;s=null}else if(u===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null)}}return im=s,null}function L2(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(en()){case Ot:return 2;case Jt:return 8;case vn:case Xl:return 32;case Ls:return 268435456;default:return 32}default:return 32}}var Yg=!1,Ji=null,Zi=null,eo=null,Ch=new Map,jh=new Map,to=[],tR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function V2(s,l){switch(s){case"focusin":case"focusout":Ji=null;break;case"dragenter":case"dragleave":Zi=null;break;case"mouseover":case"mouseout":eo=null;break;case"pointerover":case"pointerout":Ch.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":jh.delete(l.pointerId)}}function Rh(s,l,u,f,v,_){return s===null||s.nativeEvent!==_?(s={blockedOn:l,domEventName:u,eventSystemFlags:f,nativeEvent:_,targetContainers:[v]},l!==null&&(l=X(l),l!==null&&F2(l)),s):(s.eventSystemFlags|=f,l=s.targetContainers,v!==null&&l.indexOf(v)===-1&&l.push(v),s)}function rR(s,l,u,f,v){switch(l){case"focusin":return Ji=Rh(Ji,s,l,u,f,v),!0;case"dragenter":return Zi=Rh(Zi,s,l,u,f,v),!0;case"mouseover":return eo=Rh(eo,s,l,u,f,v),!0;case"pointerover":var _=v.pointerId;return Ch.set(_,Rh(Ch.get(_)||null,s,l,u,f,v)),!0;case"gotpointercapture":return _=v.pointerId,jh.set(_,Rh(jh.get(_)||null,s,l,u,f,v)),!0}return!1}function B2(s){var l=K(s.target);if(l!==null){var u=o(l);if(u!==null){if(l=u.tag,l===13){if(l=c(u),l!==null){s.blockedOn=l,Du(s.priority,function(){if(u.tag===13){var f=ha();f=zo(f);var v=lc(u,f);v!==null&&da(v,u,f),Gg(u,f)}});return}}else if(l===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function om(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var u=$g(s.nativeEvent);if(u===null){u=s.nativeEvent;var f=new u.constructor(u.type,u);Fu=f,u.target.dispatchEvent(f),Fu=null}else return l=X(u),l!==null&&F2(l),s.blockedOn=u,!1;l.shift()}return!0}function U2(s,l,u){om(s)&&u.delete(l)}function nR(){Yg=!1,Ji!==null&&om(Ji)&&(Ji=null),Zi!==null&&om(Zi)&&(Zi=null),eo!==null&&om(eo)&&(eo=null),Ch.forEach(U2),jh.forEach(U2)}function lm(s,l){s.blockedOn===l&&(s.blockedOn=null,Yg||(Yg=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,nR)))}var cm=null;function z2(s){cm!==s&&(cm=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){cm===s&&(cm=null);for(var l=0;l<s.length;l+=3){var u=s[l],f=s[l+1],v=s[l+2];if(typeof f!="function"){if(Wg(f||u)===null)continue;break}var _=X(u);_!==null&&(s.splice(l,3),l-=3,Wp(_,{pending:!0,data:v,method:u.method,action:f},f,v))}}))}function Dh(s){function l(Q){return lm(Q,s)}Ji!==null&&lm(Ji,s),Zi!==null&&lm(Zi,s),eo!==null&&lm(eo,s),Ch.forEach(l),jh.forEach(l);for(var u=0;u<to.length;u++){var f=to[u];f.blockedOn===s&&(f.blockedOn=null)}for(;0<to.length&&(u=to[0],u.blockedOn===null);)B2(u),u.blockedOn===null&&to.shift();if(u=(s.ownerDocument||s).$$reactFormReplay,u!=null)for(f=0;f<u.length;f+=3){var v=u[f],_=u[f+1],I=v[xr]||null;if(typeof _=="function")I||z2(u);else if(I){var L=null;if(_&&_.hasAttribute("formAction")){if(v=_,I=_[xr]||null)L=I.formAction;else if(Wg(v)!==null)continue}else L=I.action;typeof L=="function"?u[f+1]=L:(u.splice(f,3),f-=3),z2(u)}}}function Kg(s){this._internalRoot=s}um.prototype.render=Kg.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(n(409));var u=l.current,f=ha();M2(u,f,s,l,null,null)},um.prototype.unmount=Kg.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;M2(s.current,2,null,s,null,null),qf(),l[za]=null}};function um(s){this._internalRoot=s}um.prototype.unstable_scheduleHydration=function(s){if(s){var l=Ua();s={blockedOn:null,target:s,priority:l};for(var u=0;u<to.length&&l!==0&&l<to[u].priority;u++);to.splice(u,0,s),u===0&&B2(s)}};var H2=e.version;if(H2!=="19.1.1")throw Error(n(527,H2,"19.1.1"));De.findDOMNode=function(s){var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(n(188)):(s=Object.keys(s).join(","),Error(n(268,s)));return s=m(l),s=s!==null?d(s):null,s=s===null?null:s.stateNode,s};var aR={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:ge,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hm.isDisabled&&hm.supportsFiber)try{_a=hm.inject(aR),Nr=hm}catch{}}return kh.createRoot=function(s,l){if(!a(s))throw Error(n(299));var u=!1,f="",v=s_,_=i_,I=o_,L=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(f=l.identifierPrefix),l.onUncaughtError!==void 0&&(v=l.onUncaughtError),l.onCaughtError!==void 0&&(_=l.onCaughtError),l.onRecoverableError!==void 0&&(I=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(L=l.unstable_transitionCallbacks)),l=k2(s,1,!1,null,null,u,f,v,_,I,L,null),s[za]=l.current,Dg(s),new Kg(l)},kh.hydrateRoot=function(s,l,u){if(!a(s))throw Error(n(299));var f=!1,v="",_=s_,I=i_,L=o_,Q=null,ue=null;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onUncaughtError!==void 0&&(_=u.onUncaughtError),u.onCaughtError!==void 0&&(I=u.onCaughtError),u.onRecoverableError!==void 0&&(L=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(Q=u.unstable_transitionCallbacks),u.formState!==void 0&&(ue=u.formState)),l=k2(s,1,!0,l,u??null,f,v,_,I,L,Q,ue),l.context=O2(null),u=l.current,f=ha(),f=zo(f),v=Li(f),v.callback=null,Vi(u,v,f),u=f,l.current.lanes=u,or(l,u),Ts(l),s[za]=l.current,Dg(s),new um(l)},kh.version="19.1.1",kh}var Z2;function pR(){if(Z2)return Jg.exports;Z2=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Jg.exports=mR(),Jg.exports}var gR=pR();const vR=()=>{};var eE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qw=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let a=t.charCodeAt(n);a<128?e[r++]=a:a<2048?(e[r++]=a>>6|192,e[r++]=a&63|128):(a&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=a>>18|240,e[r++]=a>>12&63|128,e[r++]=a>>6&63|128,e[r++]=a&63|128):(e[r++]=a>>12|224,e[r++]=a>>6&63|128,e[r++]=a&63|128)}return e},xR=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const a=t[r++];if(a<128)e[n++]=String.fromCharCode(a);else if(a>191&&a<224){const o=t[r++];e[n++]=String.fromCharCode((a&31)<<6|o&63)}else if(a>239&&a<365){const o=t[r++],c=t[r++],h=t[r++],m=((a&7)<<18|(o&63)<<12|(c&63)<<6|h&63)-65536;e[n++]=String.fromCharCode(55296+(m>>10)),e[n++]=String.fromCharCode(56320+(m&1023))}else{const o=t[r++],c=t[r++];e[n++]=String.fromCharCode((a&15)<<12|(o&63)<<6|c&63)}}return e.join("")},Jw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<t.length;a+=3){const o=t[a],c=a+1<t.length,h=c?t[a+1]:0,m=a+2<t.length,d=m?t[a+2]:0,p=o>>2,x=(o&3)<<4|h>>4;let y=(h&15)<<2|d>>6,E=d&63;m||(E=64,c||(y=64)),n.push(r[p],r[x],r[y],r[E])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Qw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):xR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<t.length;){const o=r[t.charAt(a++)],h=a<t.length?r[t.charAt(a)]:0;++a;const d=a<t.length?r[t.charAt(a)]:64;++a;const x=a<t.length?r[t.charAt(a)]:64;if(++a,o==null||h==null||d==null||x==null)throw new yR;const y=o<<2|h>>4;if(n.push(y),d!==64){const E=h<<4&240|d>>2;if(n.push(E),x!==64){const w=d<<6&192|x;n.push(w)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class yR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _R=function(t){const e=Qw(t);return Jw.encodeByteArray(e,!0)},Um=function(t){return _R(t).replace(/\./g,"")},Zw=function(t){try{return Jw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ER(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR=()=>ER().__FIREBASE_DEFAULTS__,wR=()=>{if(typeof process>"u"||typeof eE>"u")return;const t=eE.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},NR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Zw(t[1]);return e&&JSON.parse(e)},N0=()=>{try{return vR()||TR()||wR()||NR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},eN=t=>N0()?.emulatorHosts?.[t],bR=t=>{const e=eN(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},tN=()=>N0()?.config,rN=t=>N0()?.[`_${t}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hu(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function nN(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AR(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",a=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Um(JSON.stringify(r)),Um(JSON.stringify(c)),""].join(".")}const Wh={};function CR(){const t={prod:[],emulator:[]};for(const e of Object.keys(Wh))Wh[e]?t.emulator.push(e):t.prod.push(e);return t}function jR(t){let e=document.getElementById(t),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),r=!0),{created:r,element:e}}let tE=!1;function aN(t,e){if(typeof window>"u"||typeof document>"u"||!hu(window.location.host)||Wh[t]===e||Wh[t]||tE)return;Wh[t]=e;function r(y){return`__firebase__banner__${y}`}const n="__firebase__banner",o=CR().prod.length>0;function c(){const y=document.getElementById(n);y&&y.remove()}function h(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function m(y,E){y.setAttribute("width","24"),y.setAttribute("id",E),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function d(){const y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{tE=!0,c()},y}function p(y,E){y.setAttribute("id",E),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function x(){const y=jR(n),E=r("text"),w=document.getElementById(E)||document.createElement("span"),T=r("learnmore"),b=document.getElementById(T)||document.createElement("a"),A=r("preprendIcon"),M=document.getElementById(A)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){const V=y.element;h(V),p(b,T);const H=d();m(M,A),V.append(M,w,b,H),document.body.appendChild(V)}o?(w.innerText="Preview backend disconnected.",M.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(M.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",x):x()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function RR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(An())}function DR(){const t=N0()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function IR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function kR(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function OR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function MR(){const t=An();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function PR(){return!DR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function FR(){try{return typeof indexedDB=="object"}catch{return!1}}function LR(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR="FirebaseError";class wi extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=VR,Object.setPrototypeOf(this,wi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ad.prototype.create)}}class Ad{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},a=`${this.service}/${e}`,o=this.errors[e],c=o?BR(o,n):"Error",h=`${this.serviceName}: ${c} (${a}).`;return new wi(a,h,n)}}function BR(t,e){return t.replace(UR,(r,n)=>{const a=e[n];return a!=null?String(a):`<${n}?>`})}const UR=/\{\$([^}]+)}/g;function zR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Cl(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const a of r){if(!n.includes(a))return!1;const o=t[a],c=e[a];if(rE(o)&&rE(c)){if(!Cl(o,c))return!1}else if(o!==c)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function rE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cd(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(a=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Bh(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[a,o]=n.split("=");e[decodeURIComponent(a)]=decodeURIComponent(o)}}),e}function Uh(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function HR(t,e){const r=new GR(t,e);return r.subscribe.bind(r)}class GR{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let a;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");qR(e,["next","error","complete"])?a=e:a={next:e,error:r,complete:n},a.next===void 0&&(a.next=rv),a.error===void 0&&(a.error=rv),a.complete===void 0&&(a.complete=rv);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function qR(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function rv(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zr(t){return t&&t._delegate?t._delegate:t}class jl{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new SR;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){const r=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(n)return null;throw a}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(YR(e))try{this.getOrInitializeService({instanceIdentifier:yl})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const o=this.getOrInitializeService({instanceIdentifier:a});n.resolve(o)}catch{}}}}clearInstance(e=yl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=yl){return this.instances.has(e)}getOptions(e=yl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[o,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);n===h&&c.resolve(a)}return a}onInit(e,r){const n=this.normalizeInstanceIdentifier(r),a=this.onInitCallbacks.get(n)??new Set;a.add(e),this.onInitCallbacks.set(n,a);const o=this.instances.get(n);return o&&e(o,n),()=>{a.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:WR(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=yl){return this.component?this.component.multipleInstances?e:yl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function WR(t){return t===yl?void 0:t}function YR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new $R(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(yt||(yt={}));const XR={debug:yt.DEBUG,verbose:yt.VERBOSE,info:yt.INFO,warn:yt.WARN,error:yt.ERROR,silent:yt.SILENT},QR=yt.INFO,JR={[yt.DEBUG]:"log",[yt.VERBOSE]:"log",[yt.INFO]:"info",[yt.WARN]:"warn",[yt.ERROR]:"error"},ZR=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),a=JR[e];if(a)console[a](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class cx{constructor(e){this.name=e,this._logLevel=QR,this._logHandler=ZR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in yt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?XR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,yt.DEBUG,...e),this._logHandler(this,yt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,yt.VERBOSE,...e),this._logHandler(this,yt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,yt.INFO,...e),this._logHandler(this,yt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,yt.WARN,...e),this._logHandler(this,yt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,yt.ERROR,...e),this._logHandler(this,yt.ERROR,...e)}}const e4=(t,e)=>e.some(r=>t instanceof r);let nE,aE;function t4(){return nE||(nE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function r4(){return aE||(aE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const sN=new WeakMap,Sv=new WeakMap,iN=new WeakMap,nv=new WeakMap,ux=new WeakMap;function n4(t){const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("success",o),t.removeEventListener("error",c)},o=()=>{r(xo(t.result)),a()},c=()=>{n(t.error),a()};t.addEventListener("success",o),t.addEventListener("error",c)});return e.then(r=>{r instanceof IDBCursor&&sN.set(r,t)}).catch(()=>{}),ux.set(e,t),e}function a4(t){if(Sv.has(t))return;const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",c),t.removeEventListener("abort",c)},o=()=>{r(),a()},c=()=>{n(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",o),t.addEventListener("error",c),t.addEventListener("abort",c)});Sv.set(t,e)}let Av={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return Sv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||iN.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return xo(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function s4(t){Av=t(Av)}function i4(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(av(this),e,...r);return iN.set(n,e.sort?e.sort():[e]),xo(n)}:r4().includes(t)?function(...e){return t.apply(av(this),e),xo(sN.get(this))}:function(...e){return xo(t.apply(av(this),e))}}function o4(t){return typeof t=="function"?i4(t):(t instanceof IDBTransaction&&a4(t),e4(t,t4())?new Proxy(t,Av):t)}function xo(t){if(t instanceof IDBRequest)return n4(t);if(nv.has(t))return nv.get(t);const e=o4(t);return e!==t&&(nv.set(t,e),ux.set(e,t)),e}const av=t=>ux.get(t);function l4(t,e,{blocked:r,upgrade:n,blocking:a,terminated:o}={}){const c=indexedDB.open(t,e),h=xo(c);return n&&c.addEventListener("upgradeneeded",m=>{n(xo(c.result),m.oldVersion,m.newVersion,xo(c.transaction),m)}),r&&c.addEventListener("blocked",m=>r(m.oldVersion,m.newVersion,m)),h.then(m=>{o&&m.addEventListener("close",()=>o()),a&&m.addEventListener("versionchange",d=>a(d.oldVersion,d.newVersion,d))}).catch(()=>{}),h}const c4=["get","getKey","getAll","getAllKeys","count"],u4=["put","add","delete","clear"],sv=new Map;function sE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(sv.get(e))return sv.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,a=u4.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||c4.includes(r)))return;const o=async function(c,...h){const m=this.transaction(c,a?"readwrite":"readonly");let d=m.store;return n&&(d=d.index(h.shift())),(await Promise.all([d[r](...h),a&&m.done]))[0]};return sv.set(e,o),o}s4(t=>({...t,get:(e,r,n)=>sE(e,r)||t.get(e,r,n),has:(e,r)=>!!sE(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(d4(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function d4(t){return t.getComponent()?.type==="VERSION"}const Cv="@firebase/app",iE="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pi=new cx("@firebase/app"),f4="@firebase/app-compat",m4="@firebase/analytics-compat",p4="@firebase/analytics",g4="@firebase/app-check-compat",v4="@firebase/app-check",x4="@firebase/auth",y4="@firebase/auth-compat",_4="@firebase/database",E4="@firebase/data-connect",T4="@firebase/database-compat",w4="@firebase/functions",N4="@firebase/functions-compat",b4="@firebase/installations",S4="@firebase/installations-compat",A4="@firebase/messaging",C4="@firebase/messaging-compat",j4="@firebase/performance",R4="@firebase/performance-compat",D4="@firebase/remote-config",I4="@firebase/remote-config-compat",k4="@firebase/storage",O4="@firebase/storage-compat",M4="@firebase/firestore",P4="@firebase/ai",F4="@firebase/firestore-compat",L4="firebase",V4="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv="[DEFAULT]",B4={[Cv]:"fire-core",[f4]:"fire-core-compat",[p4]:"fire-analytics",[m4]:"fire-analytics-compat",[v4]:"fire-app-check",[g4]:"fire-app-check-compat",[x4]:"fire-auth",[y4]:"fire-auth-compat",[_4]:"fire-rtdb",[E4]:"fire-data-connect",[T4]:"fire-rtdb-compat",[w4]:"fire-fn",[N4]:"fire-fn-compat",[b4]:"fire-iid",[S4]:"fire-iid-compat",[A4]:"fire-fcm",[C4]:"fire-fcm-compat",[j4]:"fire-perf",[R4]:"fire-perf-compat",[D4]:"fire-rc",[I4]:"fire-rc-compat",[k4]:"fire-gcs",[O4]:"fire-gcs-compat",[M4]:"fire-fst",[F4]:"fire-fst-compat",[P4]:"fire-vertex","fire-js":"fire-js",[L4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm=new Map,U4=new Map,Rv=new Map;function oE(t,e){try{t.container.addComponent(e)}catch(r){pi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function ru(t){const e=t.name;if(Rv.has(e))return pi.debug(`There were multiple attempts to register component ${e}.`),!1;Rv.set(e,t);for(const r of zm.values())oE(r,t);for(const r of U4.values())oE(r,t);return!0}function hx(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function Ma(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},yo=new Ad("app","Firebase",z4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{constructor(e,r,n){this._isDeleted=!1,this._options={...e},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new jl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw yo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const du=V4;function oN(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n={name:jv,automaticDataCollectionEnabled:!0,...e},a=n.name;if(typeof a!="string"||!a)throw yo.create("bad-app-name",{appName:String(a)});if(r||(r=tN()),!r)throw yo.create("no-options");const o=zm.get(a);if(o){if(Cl(r,o.options)&&Cl(n,o.config))return o;throw yo.create("duplicate-app",{appName:a})}const c=new KR(a);for(const m of Rv.values())c.addComponent(m);const h=new H4(r,n,c);return zm.set(a,h),h}function lN(t=jv){const e=zm.get(t);if(!e&&t===jv&&tN())return oN();if(!e)throw yo.create("no-app",{appName:t});return e}function _o(t,e,r){let n=B4[t]??t;r&&(n+=`-${r}`);const a=n.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const c=[`Unable to register library "${n}" with version "${e}":`];a&&c.push(`library name "${n}" contains illegal characters (whitespace or "/")`),a&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),pi.warn(c.join(" "));return}ru(new jl(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G4="firebase-heartbeat-database",q4=1,ld="firebase-heartbeat-store";let iv=null;function cN(){return iv||(iv=l4(G4,q4,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ld)}catch(r){console.warn(r)}}}}).catch(t=>{throw yo.create("idb-open",{originalErrorMessage:t.message})})),iv}async function $4(t){try{const r=(await cN()).transaction(ld),n=await r.objectStore(ld).get(uN(t));return await r.done,n}catch(e){if(e instanceof wi)pi.warn(e.message);else{const r=yo.create("idb-get",{originalErrorMessage:e?.message});pi.warn(r.message)}}}async function lE(t,e){try{const n=(await cN()).transaction(ld,"readwrite");await n.objectStore(ld).put(e,uN(t)),await n.done}catch(r){if(r instanceof wi)pi.warn(r.message);else{const n=yo.create("idb-set",{originalErrorMessage:r?.message});pi.warn(n.message)}}}function uN(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W4=1024,Y4=30;class K4{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new Q4(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=cE();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(a=>a.date===n))return;if(this._heartbeatsCache.heartbeats.push({date:n,agent:r}),this._heartbeatsCache.heartbeats.length>Y4){const a=J4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){pi.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=cE(),{heartbeatsToSend:r,unsentEntries:n}=X4(this._heartbeatsCache.heartbeats),a=Um(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return pi.warn(e),""}}}function cE(){return new Date().toISOString().substring(0,10)}function X4(t,e=W4){const r=[];let n=t.slice();for(const a of t){const o=r.find(c=>c.agent===a.agent);if(o){if(o.dates.push(a.date),uE(r)>e){o.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),uE(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class Q4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return FR()?LR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await $4(this.app);return r?.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return lE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return lE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function uE(t){return Um(JSON.stringify({version:2,heartbeats:t})).length}function J4(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let n=1;n<t.length;n++)t[n].date<r&&(r=t[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z4(t){ru(new jl("platform-logger",e=>new h4(e),"PRIVATE")),ru(new jl("heartbeat",e=>new K4(e),"PRIVATE")),_o(Cv,iE,t),_o(Cv,iE,"esm2020"),_o("fire-js","")}Z4("");var eD="firebase",tD="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_o(eD,tD,"app");function hN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const rD=hN,dN=new Ad("auth","Firebase",hN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm=new cx("@firebase/auth");function nD(t,...e){Hm.logLevel<=yt.WARN&&Hm.warn(`Auth (${du}): ${t}`,...e)}function jm(t,...e){Hm.logLevel<=yt.ERROR&&Hm.error(`Auth (${du}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function is(t,...e){throw dx(t,...e)}function As(t,...e){return dx(t,...e)}function fN(t,e,r){const n={...rD(),[e]:r};return new Ad("auth","Firebase",n).create(e,{appName:t.name})}function ci(t){return fN(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function dx(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return dN.create(t,...e)}function at(t,e,...r){if(!t)throw dx(e,...r)}function oi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw jm(e),new Error(e)}function gi(t,e){t||oi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dv(){return typeof self<"u"&&self.location?.href||""}function aD(){return hE()==="http:"||hE()==="https:"}function hE(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(aD()||kR()||"connection"in navigator)?navigator.onLine:!0}function iD(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e,r){this.shortDelay=e,this.longDelay=r,gi(r>e,"Short delay should be less than long delay!"),this.isMobile=RR()||OR()}get(){return sD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fx(t,e){gi(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;oi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;oi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;oi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],cD=new jd(3e4,6e4);function Mo(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Po(t,e,r,n,a={}){return pN(t,a,async()=>{let o={},c={};n&&(e==="GET"?c=n:o={body:JSON.stringify(n)});const h=Cd({key:t.config.apiKey,...c}).slice(1),m=await t._getAdditionalHeaders();m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:m,...o};return IR()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&hu(t.emulatorConfig.host)&&(d.credentials="include"),mN.fetch()(await gN(t,t.config.apiHost,r,h),d)})}async function pN(t,e,r){t._canInitEmulator=!1;const n={...oD,...e};try{const a=new hD(t),o=await Promise.race([r(),a.promise]);a.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw dm(t,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const h=o.ok?c.errorMessage:c.error.message,[m,d]=h.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw dm(t,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw dm(t,"email-already-in-use",c);if(m==="USER_DISABLED")throw dm(t,"user-disabled",c);const p=n[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw fN(t,p,d);is(t,p)}}catch(a){if(a instanceof wi)throw a;is(t,"network-request-failed",{message:String(a)})}}async function Rd(t,e,r,n,a={}){const o=await Po(t,e,r,n,a);return"mfaPendingCredential"in o&&is(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function gN(t,e,r,n){const a=`${e}${r}?${n}`,o=t,c=o.config.emulator?fx(t.config,a):`${t.config.apiScheme}://${a}`;return lD.includes(r)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}function uD(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class hD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(As(this.auth,"network-request-failed")),cD.get())})}}function dm(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const a=As(t,e,n);return a.customData._tokenResponse=r,a}function dE(t){return t!==void 0&&t.enterprise!==void 0}class dD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return uD(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function fD(t,e){return Po(t,"GET","/v2/recaptchaConfig",Mo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mD(t,e){return Po(t,"POST","/v1/accounts:delete",e)}async function Gm(t,e){return Po(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function pD(t,e=!1){const r=Zr(t),n=await r.getIdToken(e),a=mx(n);at(a&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error");const o=typeof a.firebase=="object"?a.firebase:void 0,c=o?.sign_in_provider;return{claims:a,token:n,authTime:Yh(ov(a.auth_time)),issuedAtTime:Yh(ov(a.iat)),expirationTime:Yh(ov(a.exp)),signInProvider:c||null,signInSecondFactor:o?.sign_in_second_factor||null}}function ov(t){return Number(t)*1e3}function mx(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return jm("JWT malformed, contained fewer than 3 sections"),null;try{const a=Zw(r);return a?JSON.parse(a):(jm("Failed to decode base64 JWT payload"),null)}catch(a){return jm("Caught error parsing JWT payload as JSON",a?.toString()),null}}function fE(t){const e=mx(t);return at(e,"internal-error"),at(typeof e.exp<"u","internal-error"),at(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cd(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof wi&&gD(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function gD({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yh(this.lastLoginAt),this.creationTime=Yh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qm(t){const e=t.auth,r=await t.getIdToken(),n=await cd(t,Gm(e,{idToken:r}));at(n?.users.length,e,"internal-error");const a=n.users[0];t._notifyReloadListener(a);const o=a.providerUserInfo?.length?vN(a.providerUserInfo):[],c=yD(t.providerData,o),h=t.isAnonymous,m=!(t.email&&a.passwordHash)&&!c?.length,d=h?m:!1,p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new Iv(a.createdAt,a.lastLoginAt),isAnonymous:d};Object.assign(t,p)}async function xD(t){const e=Zr(t);await qm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function yD(t,e){return[...t.filter(n=>!e.some(a=>a.providerId===n.providerId)),...e]}function vN(t){return t.map(({providerId:e,...r})=>({providerId:e,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _D(t,e){const r=await pN(t,{},async()=>{const n=Cd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:o}=t.config,c=await gN(t,a,"/v1/token",`key=${o}`),h=await t._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:h,body:n};return t.emulatorConfig&&hu(t.emulatorConfig.host)&&(m.credentials="include"),mN.fetch()(c,m)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function ED(t,e){return Po(t,"POST","/v2/accounts:revokeToken",Mo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){at(e.idToken,"internal-error"),at(typeof e.idToken<"u","internal-error"),at(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):fE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){at(e.length!==0,"internal-error");const r=fE(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(at(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:a,expiresIn:o}=await _D(e,r);this.updateTokensAndExpiration(n,a,Number(o))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:a,expirationTime:o}=r,c=new $c;return n&&(at(typeof n=="string","internal-error",{appName:e}),c.refreshToken=n),a&&(at(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),o&&(at(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new $c,this.toJSON())}_performRefresh(){return oi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function no(t,e){at(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class rs{constructor({uid:e,auth:r,stsTokenManager:n,...a}){this.providerId="firebase",this.proactiveRefresh=new vD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Iv(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const r=await cd(this,this.stsTokenManager.getToken(this.auth,e));return at(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return pD(this,e)}reload(){return xD(this)}_assign(e){this!==e&&(at(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>({...r})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new rs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(e){at(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await qm(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ma(this.auth.app))return Promise.reject(ci(this.auth));const e=await this.getIdToken();return await cd(this,mD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){const n=r.displayName??void 0,a=r.email??void 0,o=r.phoneNumber??void 0,c=r.photoURL??void 0,h=r.tenantId??void 0,m=r._redirectEventId??void 0,d=r.createdAt??void 0,p=r.lastLoginAt??void 0,{uid:x,emailVerified:y,isAnonymous:E,providerData:w,stsTokenManager:T}=r;at(x&&T,e,"internal-error");const b=$c.fromJSON(this.name,T);at(typeof x=="string",e,"internal-error"),no(n,e.name),no(a,e.name),at(typeof y=="boolean",e,"internal-error"),at(typeof E=="boolean",e,"internal-error"),no(o,e.name),no(c,e.name),no(h,e.name),no(m,e.name),no(d,e.name),no(p,e.name);const A=new rs({uid:x,auth:e,email:a,emailVerified:y,displayName:n,isAnonymous:E,photoURL:c,phoneNumber:o,tenantId:h,stsTokenManager:b,createdAt:d,lastLoginAt:p});return w&&Array.isArray(w)&&(A.providerData=w.map(M=>({...M}))),m&&(A._redirectEventId=m),A}static async _fromIdTokenResponse(e,r,n=!1){const a=new $c;a.updateFromServerResponse(r);const o=new rs({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:n});return await qm(o),o}static async _fromGetAccountInfoResponse(e,r,n){const a=r.users[0];at(a.localId!==void 0,"internal-error");const o=a.providerUserInfo!==void 0?vN(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!o?.length,h=new $c;h.updateFromIdToken(n);const m=new rs({uid:a.localId,auth:e,stsTokenManager:h,isAnonymous:c}),d={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new Iv(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!o?.length};return Object.assign(m,d),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mE=new Map;function li(t){gi(t instanceof Function,"Expected a class definition");let e=mE.get(t);return e?(gi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,mE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}xN.type="NONE";const pE=xN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rm(t,e,r){return`firebase:${t}:${e}:${r}`}class Wc{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:a,name:o}=this.auth;this.fullUserKey=Rm(this.userKey,a.apiKey,o),this.fullPersistenceKey=Rm("persistence",a.apiKey,o),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const r=await Gm(this.auth,{idToken:e}).catch(()=>{});return r?rs._fromGetAccountInfoResponse(this.auth,r,e):null}return rs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new Wc(li(pE),e,n);const a=(await Promise.all(r.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let o=a[0]||li(pE);const c=Rm(n,e.config.apiKey,e.name);let h=null;for(const d of r)try{const p=await d._get(c);if(p){let x;if(typeof p=="string"){const y=await Gm(e,{idToken:p}).catch(()=>{});if(!y)break;x=await rs._fromGetAccountInfoResponse(e,y,p)}else x=rs._fromJSON(e,p);d!==o&&(h=x),o=d;break}}catch{}const m=a.filter(d=>d._shouldAllowMigration);return!o._shouldAllowMigration||!m.length?new Wc(o,e,n):(o=m[0],h&&await o._set(c,h.toJSON()),await Promise.all(r.map(async d=>{if(d!==o)try{await d._remove(c)}catch{}})),new Wc(o,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(TN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(yN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(NN(e))return"Blackberry";if(bN(e))return"Webos";if(_N(e))return"Safari";if((e.includes("chrome/")||EN(e))&&!e.includes("edge/"))return"Chrome";if(wN(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if(n?.length===2)return n[1]}return"Other"}function yN(t=An()){return/firefox\//i.test(t)}function _N(t=An()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function EN(t=An()){return/crios\//i.test(t)}function TN(t=An()){return/iemobile/i.test(t)}function wN(t=An()){return/android/i.test(t)}function NN(t=An()){return/blackberry/i.test(t)}function bN(t=An()){return/webos/i.test(t)}function px(t=An()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function TD(t=An()){return px(t)&&!!window.navigator?.standalone}function wD(){return MR()&&document.documentMode===10}function SN(t=An()){return px(t)||wN(t)||bN(t)||NN(t)||/windows phone/i.test(t)||TN(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AN(t,e=[]){let r;switch(t){case"Browser":r=gE(An());break;case"Worker":r=`${gE(An())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${du}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=o=>new Promise((c,h)=>{try{const m=e(o);c(m)}catch(m){h(m)}});n.onAbort=r,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const a of r)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bD(t,e={}){return Po(t,"GET","/v2/passwordPolicy",Mo(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SD=6;class AD{constructor(e){const r=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??SD,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,r),this.validatePasswordCharacterOptions(e,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),a&&(r.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let a=0;a<e.length;a++)n=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,a,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(e,r,n,a){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vE(this),this.idTokenSubscription=new vE(this),this.beforeStateQueue=new ND(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=li(r)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Wc.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await Gm(this,{idToken:e}),n=await rs._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Ma(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,c=n?._redirectEventId,h=await this.tryRedirectSignIn(e);(!o||o===c)&&h?.user&&(n=h.user,a=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(n)}catch(o){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return at(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await qm(e)}catch(r){if(r?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=iD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ma(this.app))return Promise.reject(ci(this));const r=e?Zr(e):null;return r&&at(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&at(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ma(this.app)?Promise.reject(ci(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ma(this.app)?Promise.reject(ci(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(li(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await bD(this),r=new AD(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ad("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await ED(this,n)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&li(e)||this._popupRedirectResolver;at(r,this,"argument-error"),this.redirectPersistenceManager=await Wc.create(this,[li(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,a){if(this._deleted)return()=>{};const o=typeof r=="function"?r:r.next.bind(r);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(at(h,this,"internal-error"),h.then(()=>{c||o(this.currentUser)}),typeof r=="function"){const m=e.addObserver(r,n,a);return()=>{c=!0,m()}}else{const m=e.addObserver(r);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return at(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=AN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const r=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();r&&(e["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){if(Ma(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&nD(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Fl(t){return Zr(t)}class vE{constructor(e){this.auth=e,this.observer=null,this.addObserver=HR(r=>this.observer=r)}get next(){return at(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let b0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function jD(t){b0=t}function CN(t){return b0.loadJS(t)}function RD(){return b0.recaptchaEnterpriseScript}function DD(){return b0.gapiScript}function ID(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class kD{constructor(){this.enterprise=new OD}ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}class OD{ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}const MD="recaptcha-enterprise",jN="NO_RECAPTCHA";class PD{constructor(e){this.type=MD,this.auth=Fl(e)}async verify(e="verify",r=!1){async function n(o){if(!r){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(c,h)=>{fD(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const d=new dD(m);return o.tenantId==null?o._agentRecaptchaConfig=d:o._tenantRecaptchaConfigs[o.tenantId]=d,c(d.siteKey)}}).catch(m=>{h(m)})})}function a(o,c,h){const m=window.grecaptcha;dE(m)?m.enterprise.ready(()=>{m.enterprise.execute(o,{action:e}).then(d=>{c(d)}).catch(()=>{c(jN)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new kD().execute("siteKey",{action:"verify"}):new Promise((o,c)=>{n(this.auth).then(h=>{if(!r&&dE(window.grecaptcha))a(h,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let m=RD();m.length!==0&&(m+=h),CN(m).then(()=>{a(h,o,c)}).catch(d=>{c(d)})}}).catch(h=>{c(h)})})}}async function xE(t,e,r,n=!1,a=!1){const o=new PD(t);let c;if(a)c=jN;else try{c=await o.verify(r)}catch{c=await o.verify(r,!0)}const h={...e};if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const m=h.phoneEnrollmentInfo.phoneNumber,d=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:d,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const m=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return n?Object.assign(h,{captchaResp:c}):Object.assign(h,{captchaResponse:c}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function kv(t,e,r,n,a){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await xE(t,e,r,r==="getOobCode");return n(t,o)}else return n(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await xE(t,e,r,r==="getOobCode");return n(t,c)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FD(t,e){const r=hx(t,"auth");if(r.isInitialized()){const a=r.getImmediate(),o=r.getOptions();if(Cl(o,e??{}))return a;is(a,"already-initialized")}return r.initialize({options:e})}function LD(t,e){const r=e?.persistence||[],n=(Array.isArray(r)?r:[r]).map(li);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e?.popupRedirectResolver)}function VD(t,e,r){const n=Fl(t);at(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const a=!1,o=RN(e),{host:c,port:h}=BD(e),m=h===null?"":`:${h}`,d={url:`${o}//${c}${m}/`},p=Object.freeze({host:c,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!n._canInitEmulator){at(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),at(Cl(d,n.config.emulator)&&Cl(p,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=d,n.emulatorConfig=p,n.settings.appVerificationDisabledForTesting=!0,hu(c)?(nN(`${o}//${c}${m}`),aN("Auth",!0)):UD()}function RN(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function BD(t){const e=RN(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const o=a[1];return{host:o,port:yE(n.substr(o.length+1))}}else{const[o,c]=n.split(":");return{host:o,port:yE(c)}}}function yE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function UD(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return oi("not implemented")}_getIdTokenResponse(e){return oi("not implemented")}_linkToIdToken(e,r){return oi("not implemented")}_getReauthenticationResolver(e){return oi("not implemented")}}async function zD(t,e){return Po(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HD(t,e){return Rd(t,"POST","/v1/accounts:signInWithPassword",Mo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GD(t,e){return Rd(t,"POST","/v1/accounts:signInWithEmailLink",Mo(t,e))}async function qD(t,e){return Rd(t,"POST","/v1/accounts:signInWithEmailLink",Mo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud extends gx{constructor(e,r,n,a=null){super("password",n),this._email=e,this._password=r,this._tenantId=a}static _fromEmailAndPassword(e,r){return new ud(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new ud(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r?.email&&r?.password){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return kv(e,r,"signInWithPassword",HD);case"emailLink":return GD(e,{email:this._email,oobCode:this._password});default:is(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return kv(e,n,"signUpPassword",zD);case"emailLink":return qD(e,{idToken:r,email:this._email,oobCode:this._password});default:is(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yc(t,e){return Rd(t,"POST","/v1/accounts:signInWithIdp",Mo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $D="http://localhost";class Rl extends gx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Rl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):is("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:a,...o}=r;if(!n||!a)return null;const c=new Rl(n,a);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){const r=this.buildRequest();return Yc(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,Yc(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Yc(e,r)}buildRequest(){const e={requestUri:$D,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Cd(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WD(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function YD(t){const e=Bh(Uh(t)).link,r=e?Bh(Uh(e)).deep_link_id:null,n=Bh(Uh(t)).deep_link_id;return(n?Bh(Uh(n)).link:null)||n||r||e||t}class vx{constructor(e){const r=Bh(Uh(e)),n=r.apiKey??null,a=r.oobCode??null,o=WD(r.mode??null);at(n&&a&&o,"argument-error"),this.apiKey=n,this.operation=o,this.code=a,this.continueUrl=r.continueUrl??null,this.languageCode=r.lang??null,this.tenantId=r.tenantId??null}static parseLink(e){const r=YD(e);try{return new vx(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(){this.providerId=fu.PROVIDER_ID}static credential(e,r){return ud._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=vx.parseLink(r);return at(n,"argument-error"),ud._fromEmailAndCode(e,n.code,n.tenantId)}}fu.PROVIDER_ID="password";fu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";fu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd extends DN{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo extends Dd{constructor(){super("facebook.com")}static credential(e){return Rl._fromParams({providerId:uo.PROVIDER_ID,signInMethod:uo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return uo.credentialFromTaggedObject(e)}static credentialFromError(e){return uo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return uo.credential(e.oauthAccessToken)}catch{return null}}}uo.FACEBOOK_SIGN_IN_METHOD="facebook.com";uo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho extends Dd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Rl._fromParams({providerId:ho.PROVIDER_ID,signInMethod:ho.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return ho.credentialFromTaggedObject(e)}static credentialFromError(e){return ho.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return ho.credential(r,n)}catch{return null}}}ho.GOOGLE_SIGN_IN_METHOD="google.com";ho.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo extends Dd{constructor(){super("github.com")}static credential(e){return Rl._fromParams({providerId:fo.PROVIDER_ID,signInMethod:fo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fo.credentialFromTaggedObject(e)}static credentialFromError(e){return fo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fo.credential(e.oauthAccessToken)}catch{return null}}}fo.GITHUB_SIGN_IN_METHOD="github.com";fo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo extends Dd{constructor(){super("twitter.com")}static credential(e,r){return Rl._fromParams({providerId:mo.PROVIDER_ID,signInMethod:mo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return mo.credentialFromTaggedObject(e)}static credentialFromError(e){return mo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return mo.credential(r,n)}catch{return null}}}mo.TWITTER_SIGN_IN_METHOD="twitter.com";mo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KD(t,e){return Rd(t,"POST","/v1/accounts:signUp",Mo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,a=!1){const o=await rs._fromIdTokenResponse(e,n,a),c=_E(n);return new Dl({user:o,providerId:c,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const a=_E(n);return new Dl({user:e,providerId:a,_tokenResponse:n,operationType:r})}}function _E(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m extends wi{constructor(e,r,n,a){super(r.code,r.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,$m.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,a){return new $m(e,r,n,a)}}function IN(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?$m._fromErrorAndOperation(t,o,e,n):o})}async function XD(t,e,r=!1){const n=await cd(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Dl._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QD(t,e,r=!1){const{auth:n}=t;if(Ma(n.app))return Promise.reject(ci(n));const a="reauthenticate";try{const o=await cd(t,IN(n,a,e,t),r);at(o.idToken,n,"internal-error");const c=mx(o.idToken);at(c,n,"internal-error");const{sub:h}=c;return at(t.uid===h,n,"user-mismatch"),Dl._forOperation(t,a,o)}catch(o){throw o?.code==="auth/user-not-found"&&is(n,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kN(t,e,r=!1){if(Ma(t.app))return Promise.reject(ci(t));const n="signIn",a=await IN(t,n,e),o=await Dl._fromIdTokenResponse(t,n,a);return r||await t._updateCurrentUser(o.user),o}async function JD(t,e){return kN(Fl(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ON(t){const e=Fl(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function ZD(t,e,r){if(Ma(t.app))return Promise.reject(ci(t));const n=Fl(t),c=await kv(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",KD).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&ON(t),m}),h=await Dl._fromIdTokenResponse(n,"signIn",c);return await n._updateCurrentUser(h.user),h}function eI(t,e,r){return Ma(t.app)?Promise.reject(ci(t)):JD(Zr(t),fu.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&ON(t),n})}function tI(t,e,r,n){return Zr(t).onIdTokenChanged(e,r,n)}function rI(t,e,r){return Zr(t).beforeAuthStateChanged(e,r)}function nI(t,e,r,n){return Zr(t).onAuthStateChanged(e,r,n)}function aI(t){return Zr(t).signOut()}const Wm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Wm,"1"),this.storage.removeItem(Wm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI=1e3,iI=10;class PN extends MN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=SN(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),a=this.localCache[r];n!==a&&e(r,a,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((c,h,m)=>{this.notifyListeners(c,m)});return}const n=e.key;r?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(n);!r&&this.localCache[n]===c||this.notifyListeners(n,c)},o=this.storage.getItem(n);wD()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,iI):a()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},sI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}PN.type="LOCAL";const oI=PN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN extends MN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}FN.type="SESSION";const LN=FN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lI(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(a=>a.isListeningto(e));if(r)return r;const n=new S0(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:a,data:o}=r.data,c=this.handlersMap[a];if(!c?.size)return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const h=Array.from(c).map(async d=>d(r.origin,o)),m=await lI(h);r.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:m})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}S0.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xx(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let o,c;return new Promise((h,m)=>{const d=xx("",20);a.port1.start();const p=setTimeout(()=>{m(new Error("unsupported_event"))},n);c={messageChannel:a,onMessage(x){const y=x;if(y.data.eventId===d)switch(y.data.status){case"ack":clearTimeout(p),o=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(y.data.response);break;default:clearTimeout(p),clearTimeout(o),m(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:d,data:r},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cs(){return window}function uI(t){Cs().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VN(){return typeof Cs().WorkerGlobalScope<"u"&&typeof Cs().importScripts=="function"}async function hI(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function dI(){return navigator?.serviceWorker?.controller||null}function fI(){return VN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN="firebaseLocalStorageDb",mI=1,Ym="firebaseLocalStorage",UN="fbase_key";class Id{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function A0(t,e){return t.transaction([Ym],e?"readwrite":"readonly").objectStore(Ym)}function pI(){const t=indexedDB.deleteDatabase(BN);return new Id(t).toPromise()}function Ov(){const t=indexedDB.open(BN,mI);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(Ym,{keyPath:UN})}catch(a){r(a)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(Ym)?e(n):(n.close(),await pI(),e(await Ov()))})})}async function EE(t,e,r){const n=A0(t,!0).put({[UN]:e,value:r});return new Id(n).toPromise()}async function gI(t,e){const r=A0(t,!1).get(e),n=await new Id(r).toPromise();return n===void 0?null:n.value}function TE(t,e){const r=A0(t,!0).delete(e);return new Id(r).toPromise()}const vI=800,xI=3;class zN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ov(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>xI)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return VN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=S0._getInstance(fI()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await hI(),!this.activeServiceWorker)return;this.sender=new cI(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||dI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ov();return await EE(e,Wm,"1"),await TE(e,Wm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>EE(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>gI(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>TE(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const o=A0(a,!1).getAll();return new Id(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:a,value:o}of e)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(o)&&(this.notifyListeners(a,o),r.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),r.push(a));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),vI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}zN.type="LOCAL";const yI=zN;new jd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _I(t,e){return e?li(e):(at(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx extends gx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Yc(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Yc(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Yc(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function EI(t){return kN(t.auth,new yx(t),t.bypassAuthState)}function TI(t){const{auth:e,user:r}=t;return at(r,e,"internal-error"),QD(r,new yx(t),t.bypassAuthState)}async function wI(t){const{auth:e,user:r}=t;return at(r,e,"internal-error"),XD(r,new yx(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(e,r,n,a,o=!1){this.auth=e,this.resolver=n,this.user=a,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:a,tenantId:o,error:c,type:h}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:r,sessionId:n,tenantId:o||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(m))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return EI;case"linkViaPopup":case"linkViaRedirect":return wI;case"reauthViaPopup":case"reauthViaRedirect":return TI;default:is(this.auth,"internal-error")}}resolve(e){gi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){gi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI=new jd(2e3,1e4);class Gc extends HN{constructor(e,r,n,a,o){super(e,r,a,o),this.provider=n,this.authWindow=null,this.pollId=null,Gc.currentPopupAction&&Gc.currentPopupAction.cancel(),Gc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return at(e,this.auth,"internal-error"),e}async onExecution(){gi(this.filter.length===1,"Popup operations only handle one event");const e=xx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(As(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(As(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Gc.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(As(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,NI.get())};e()}}Gc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI="pendingRedirect",Dm=new Map;class SI extends HN{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=Dm.get(this.auth._key());if(!e){try{const n=await AI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}Dm.set(this.auth._key(),e)}return this.bypassAuthState||Dm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function AI(t,e){const r=RI(e),n=jI(t);if(!await n._isAvailable())return!1;const a=await n._get(r)==="true";return await n._remove(r),a}function CI(t,e){Dm.set(t._key(),e)}function jI(t){return li(t._redirectPersistence)}function RI(t){return Rm(bI,t.config.apiKey,t.name)}async function DI(t,e,r=!1){if(Ma(t.app))return Promise.reject(ci(t));const n=Fl(t),a=_I(n,e),c=await new SI(n,a,r).execute();return c&&!r&&(delete c.user._redirectEventId,await n._persistUserIfCurrent(c.user),await n._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II=600*1e3;class kI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!OI(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){if(e.error&&!GN(e)){const n=e.error.code?.split("auth/")[1]||"internal-error";r.onError(As(this.auth,n))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=II&&this.cachedEventUids.clear(),this.cachedEventUids.has(wE(e))}saveEventToCache(e){this.cachedEventUids.add(wE(e)),this.lastProcessedEventTime=Date.now()}}function wE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function GN({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function OI(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return GN(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MI(t,e={}){return Po(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,FI=/^https?/;async function LI(t){if(t.config.emulator)return;const{authorizedDomains:e}=await MI(t);for(const r of e)try{if(VI(r))return}catch{}is(t,"unauthorized-domain")}function VI(t){const e=Dv(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const c=new URL(t);return c.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&c.hostname===n}if(!FI.test(r))return!1;if(PI.test(t))return n===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BI=new jd(3e4,6e4);function NE(){const t=Cs().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function UI(t){return new Promise((e,r)=>{function n(){NE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{NE(),r(As(t,"network-request-failed"))},timeout:BI.get()})}if(Cs().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Cs().gapi?.load)n();else{const a=ID("iframefcb");return Cs()[a]=()=>{gapi.load?n():r(As(t,"network-request-failed"))},CN(`${DD()}?onload=${a}`).catch(o=>r(o))}}).catch(e=>{throw Im=null,e})}let Im=null;function zI(t){return Im=Im||UI(t),Im}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HI=new jd(5e3,15e3),GI="__/auth/iframe",qI="emulator/auth/iframe",$I={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},WI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function YI(t){const e=t.config;at(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?fx(e,qI):`https://${t.config.authDomain}/${GI}`,n={apiKey:e.apiKey,appName:t.name,v:du},a=WI.get(t.config.apiHost);a&&(n.eid=a);const o=t._getFrameworks();return o.length&&(n.fw=o.join(",")),`${r}?${Cd(n).slice(1)}`}async function KI(t){const e=await zI(t),r=Cs().gapi;return at(r,t,"internal-error"),e.open({where:document.body,url:YI(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$I,dontclear:!0},n=>new Promise(async(a,o)=>{await n.restyle({setHideOnLeave:!1});const c=As(t,"network-request-failed"),h=Cs().setTimeout(()=>{o(c)},HI.get());function m(){Cs().clearTimeout(h),a(n)}n.ping(m).then(m,()=>{o(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},QI=500,JI=600,ZI="_blank",e3="http://localhost";class bE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function t3(t,e,r,n=QI,a=JI){const o=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-n)/2,0).toString();let h="";const m={...XI,width:n.toString(),height:a.toString(),top:o,left:c},d=An().toLowerCase();r&&(h=EN(d)?ZI:r),yN(d)&&(e=e||e3,m.scrollbars="yes");const p=Object.entries(m).reduce((y,[E,w])=>`${y}${E}=${w},`,"");if(TD(d)&&h!=="_self")return r3(e||"",h),new bE(null);const x=window.open(e||"",h,p);at(x,t,"popup-blocked");try{x.focus()}catch{}return new bE(x)}function r3(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n3="__/auth/handler",a3="emulator/auth/handler",s3=encodeURIComponent("fac");async function SE(t,e,r,n,a,o){at(t.config.authDomain,t,"auth-domain-config-required"),at(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:du,eventId:a};if(e instanceof DN){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",zR(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,x]of Object.entries({}))c[p]=x}if(e instanceof Dd){const p=e.getScopes().filter(x=>x!=="");p.length>0&&(c.scopes=p.join(","))}t.tenantId&&(c.tid=t.tenantId);const h=c;for(const p of Object.keys(h))h[p]===void 0&&delete h[p];const m=await t._getAppCheckToken(),d=m?`#${s3}=${encodeURIComponent(m)}`:"";return`${i3(t)}?${Cd(h).slice(1)}${d}`}function i3({config:t}){return t.emulator?fx(t,a3):`https://${t.authDomain}/${n3}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lv="webStorageSupport";class o3{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=LN,this._completeRedirectFn=DI,this._overrideRedirectResult=CI}async _openPopup(e,r,n,a){gi(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await SE(e,r,n,Dv(),a);return t3(e,o,xx())}async _openRedirect(e,r,n,a){await this._originValidation(e);const o=await SE(e,r,n,Dv(),a);return uI(o),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:a,promise:o}=this.eventManagers[r];return a?Promise.resolve(a):(gi(o,"If manager is not set, promise should be"),o)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await KI(e),n=new kI(e);return r.register("authEvent",a=>(at(a?.authEvent,e,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(lv,{type:lv},a=>{const o=a?.[0]?.[lv];o!==void 0&&r(!!o),is(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=LI(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return SN()||_N()||px()}}const l3=o3;var AE="@firebase/auth",CE="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c3{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e(n?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){at(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u3(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function h3(t){ru(new jl("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=n.options;at(c&&!c.includes(":"),"invalid-api-key",{appName:n.name});const m={apiKey:c,authDomain:h,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:AN(t)},d=new CD(n,a,o,m);return LD(d,r),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),ru(new jl("auth-internal",e=>{const r=Fl(e.getProvider("auth").getImmediate());return(n=>new c3(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),_o(AE,CE,u3(t)),_o(AE,CE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d3=300,f3=rN("authIdTokenMaxAge")||d3;let jE=null;const m3=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>f3)return;const a=r?.token;jE!==a&&(jE=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function p3(t=lN()){const e=hx(t,"auth");if(e.isInitialized())return e.getImmediate();const r=FD(t,{popupRedirectResolver:l3,persistence:[yI,oI,LN]}),n=rN("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(n,location.origin);if(location.origin===o.origin){const c=m3(o.toString());rI(r,c,()=>c(r.currentUser)),tI(r,h=>c(h))}}const a=eN("auth");return a&&VD(r,`http://${a}`),r}function g3(){return document.getElementsByTagName("head")?.[0]??document}jD({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=a=>{const o=As("internal-error");o.customData=a,r(o)},n.type="text/javascript",n.charset="UTF-8",g3().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});h3("Browser");var RE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Eo,qN;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(j,D){function S(){}S.prototype=D.prototype,j.F=D.prototype,j.prototype=new S,j.prototype.constructor=j,j.D=function(P,O,C){for(var k=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)k[Ce-2]=arguments[Ce];return D.prototype[O].apply(P,k)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,r),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(j,D,S){S||(S=0);const P=Array(16);if(typeof D=="string")for(var O=0;O<16;++O)P[O]=D.charCodeAt(S++)|D.charCodeAt(S++)<<8|D.charCodeAt(S++)<<16|D.charCodeAt(S++)<<24;else for(O=0;O<16;++O)P[O]=D[S++]|D[S++]<<8|D[S++]<<16|D[S++]<<24;D=j.g[0],S=j.g[1],O=j.g[2];let C=j.g[3],k;k=D+(C^S&(O^C))+P[0]+3614090360&4294967295,D=S+(k<<7&4294967295|k>>>25),k=C+(O^D&(S^O))+P[1]+3905402710&4294967295,C=D+(k<<12&4294967295|k>>>20),k=O+(S^C&(D^S))+P[2]+606105819&4294967295,O=C+(k<<17&4294967295|k>>>15),k=S+(D^O&(C^D))+P[3]+3250441966&4294967295,S=O+(k<<22&4294967295|k>>>10),k=D+(C^S&(O^C))+P[4]+4118548399&4294967295,D=S+(k<<7&4294967295|k>>>25),k=C+(O^D&(S^O))+P[5]+1200080426&4294967295,C=D+(k<<12&4294967295|k>>>20),k=O+(S^C&(D^S))+P[6]+2821735955&4294967295,O=C+(k<<17&4294967295|k>>>15),k=S+(D^O&(C^D))+P[7]+4249261313&4294967295,S=O+(k<<22&4294967295|k>>>10),k=D+(C^S&(O^C))+P[8]+1770035416&4294967295,D=S+(k<<7&4294967295|k>>>25),k=C+(O^D&(S^O))+P[9]+2336552879&4294967295,C=D+(k<<12&4294967295|k>>>20),k=O+(S^C&(D^S))+P[10]+4294925233&4294967295,O=C+(k<<17&4294967295|k>>>15),k=S+(D^O&(C^D))+P[11]+2304563134&4294967295,S=O+(k<<22&4294967295|k>>>10),k=D+(C^S&(O^C))+P[12]+1804603682&4294967295,D=S+(k<<7&4294967295|k>>>25),k=C+(O^D&(S^O))+P[13]+4254626195&4294967295,C=D+(k<<12&4294967295|k>>>20),k=O+(S^C&(D^S))+P[14]+2792965006&4294967295,O=C+(k<<17&4294967295|k>>>15),k=S+(D^O&(C^D))+P[15]+1236535329&4294967295,S=O+(k<<22&4294967295|k>>>10),k=D+(O^C&(S^O))+P[1]+4129170786&4294967295,D=S+(k<<5&4294967295|k>>>27),k=C+(S^O&(D^S))+P[6]+3225465664&4294967295,C=D+(k<<9&4294967295|k>>>23),k=O+(D^S&(C^D))+P[11]+643717713&4294967295,O=C+(k<<14&4294967295|k>>>18),k=S+(C^D&(O^C))+P[0]+3921069994&4294967295,S=O+(k<<20&4294967295|k>>>12),k=D+(O^C&(S^O))+P[5]+3593408605&4294967295,D=S+(k<<5&4294967295|k>>>27),k=C+(S^O&(D^S))+P[10]+38016083&4294967295,C=D+(k<<9&4294967295|k>>>23),k=O+(D^S&(C^D))+P[15]+3634488961&4294967295,O=C+(k<<14&4294967295|k>>>18),k=S+(C^D&(O^C))+P[4]+3889429448&4294967295,S=O+(k<<20&4294967295|k>>>12),k=D+(O^C&(S^O))+P[9]+568446438&4294967295,D=S+(k<<5&4294967295|k>>>27),k=C+(S^O&(D^S))+P[14]+3275163606&4294967295,C=D+(k<<9&4294967295|k>>>23),k=O+(D^S&(C^D))+P[3]+4107603335&4294967295,O=C+(k<<14&4294967295|k>>>18),k=S+(C^D&(O^C))+P[8]+1163531501&4294967295,S=O+(k<<20&4294967295|k>>>12),k=D+(O^C&(S^O))+P[13]+2850285829&4294967295,D=S+(k<<5&4294967295|k>>>27),k=C+(S^O&(D^S))+P[2]+4243563512&4294967295,C=D+(k<<9&4294967295|k>>>23),k=O+(D^S&(C^D))+P[7]+1735328473&4294967295,O=C+(k<<14&4294967295|k>>>18),k=S+(C^D&(O^C))+P[12]+2368359562&4294967295,S=O+(k<<20&4294967295|k>>>12),k=D+(S^O^C)+P[5]+4294588738&4294967295,D=S+(k<<4&4294967295|k>>>28),k=C+(D^S^O)+P[8]+2272392833&4294967295,C=D+(k<<11&4294967295|k>>>21),k=O+(C^D^S)+P[11]+1839030562&4294967295,O=C+(k<<16&4294967295|k>>>16),k=S+(O^C^D)+P[14]+4259657740&4294967295,S=O+(k<<23&4294967295|k>>>9),k=D+(S^O^C)+P[1]+2763975236&4294967295,D=S+(k<<4&4294967295|k>>>28),k=C+(D^S^O)+P[4]+1272893353&4294967295,C=D+(k<<11&4294967295|k>>>21),k=O+(C^D^S)+P[7]+4139469664&4294967295,O=C+(k<<16&4294967295|k>>>16),k=S+(O^C^D)+P[10]+3200236656&4294967295,S=O+(k<<23&4294967295|k>>>9),k=D+(S^O^C)+P[13]+681279174&4294967295,D=S+(k<<4&4294967295|k>>>28),k=C+(D^S^O)+P[0]+3936430074&4294967295,C=D+(k<<11&4294967295|k>>>21),k=O+(C^D^S)+P[3]+3572445317&4294967295,O=C+(k<<16&4294967295|k>>>16),k=S+(O^C^D)+P[6]+76029189&4294967295,S=O+(k<<23&4294967295|k>>>9),k=D+(S^O^C)+P[9]+3654602809&4294967295,D=S+(k<<4&4294967295|k>>>28),k=C+(D^S^O)+P[12]+3873151461&4294967295,C=D+(k<<11&4294967295|k>>>21),k=O+(C^D^S)+P[15]+530742520&4294967295,O=C+(k<<16&4294967295|k>>>16),k=S+(O^C^D)+P[2]+3299628645&4294967295,S=O+(k<<23&4294967295|k>>>9),k=D+(O^(S|~C))+P[0]+4096336452&4294967295,D=S+(k<<6&4294967295|k>>>26),k=C+(S^(D|~O))+P[7]+1126891415&4294967295,C=D+(k<<10&4294967295|k>>>22),k=O+(D^(C|~S))+P[14]+2878612391&4294967295,O=C+(k<<15&4294967295|k>>>17),k=S+(C^(O|~D))+P[5]+4237533241&4294967295,S=O+(k<<21&4294967295|k>>>11),k=D+(O^(S|~C))+P[12]+1700485571&4294967295,D=S+(k<<6&4294967295|k>>>26),k=C+(S^(D|~O))+P[3]+2399980690&4294967295,C=D+(k<<10&4294967295|k>>>22),k=O+(D^(C|~S))+P[10]+4293915773&4294967295,O=C+(k<<15&4294967295|k>>>17),k=S+(C^(O|~D))+P[1]+2240044497&4294967295,S=O+(k<<21&4294967295|k>>>11),k=D+(O^(S|~C))+P[8]+1873313359&4294967295,D=S+(k<<6&4294967295|k>>>26),k=C+(S^(D|~O))+P[15]+4264355552&4294967295,C=D+(k<<10&4294967295|k>>>22),k=O+(D^(C|~S))+P[6]+2734768916&4294967295,O=C+(k<<15&4294967295|k>>>17),k=S+(C^(O|~D))+P[13]+1309151649&4294967295,S=O+(k<<21&4294967295|k>>>11),k=D+(O^(S|~C))+P[4]+4149444226&4294967295,D=S+(k<<6&4294967295|k>>>26),k=C+(S^(D|~O))+P[11]+3174756917&4294967295,C=D+(k<<10&4294967295|k>>>22),k=O+(D^(C|~S))+P[2]+718787259&4294967295,O=C+(k<<15&4294967295|k>>>17),k=S+(C^(O|~D))+P[9]+3951481745&4294967295,j.g[0]=j.g[0]+D&4294967295,j.g[1]=j.g[1]+(O+(k<<21&4294967295|k>>>11))&4294967295,j.g[2]=j.g[2]+O&4294967295,j.g[3]=j.g[3]+C&4294967295}n.prototype.v=function(j,D){D===void 0&&(D=j.length);const S=D-this.blockSize,P=this.C;let O=this.h,C=0;for(;C<D;){if(O==0)for(;C<=S;)a(this,j,C),C+=this.blockSize;if(typeof j=="string"){for(;C<D;)if(P[O++]=j.charCodeAt(C++),O==this.blockSize){a(this,P),O=0;break}}else for(;C<D;)if(P[O++]=j[C++],O==this.blockSize){a(this,P),O=0;break}}this.h=O,this.o+=D},n.prototype.A=function(){var j=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);j[0]=128;for(var D=1;D<j.length-8;++D)j[D]=0;D=this.o*8;for(var S=j.length-8;S<j.length;++S)j[S]=D&255,D/=256;for(this.v(j),j=Array(16),D=0,S=0;S<4;++S)for(let P=0;P<32;P+=8)j[D++]=this.g[S]>>>P&255;return j};function o(j,D){var S=h;return Object.prototype.hasOwnProperty.call(S,j)?S[j]:S[j]=D(j)}function c(j,D){this.h=D;const S=[];let P=!0;for(let O=j.length-1;O>=0;O--){const C=j[O]|0;P&&C==D||(S[O]=C,P=!1)}this.g=S}var h={};function m(j){return-128<=j&&j<128?o(j,function(D){return new c([D|0],D<0?-1:0)}):new c([j|0],j<0?-1:0)}function d(j){if(isNaN(j)||!isFinite(j))return x;if(j<0)return b(d(-j));const D=[];let S=1;for(let P=0;j>=S;P++)D[P]=j/S|0,S*=4294967296;return new c(D,0)}function p(j,D){if(j.length==0)throw Error("number format error: empty string");if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(j.charAt(0)=="-")return b(p(j.substring(1),D));if(j.indexOf("-")>=0)throw Error('number format error: interior "-" character');const S=d(Math.pow(D,8));let P=x;for(let C=0;C<j.length;C+=8){var O=Math.min(8,j.length-C);const k=parseInt(j.substring(C,C+O),D);O<8?(O=d(Math.pow(D,O)),P=P.j(O).add(d(k))):(P=P.j(S),P=P.add(d(k)))}return P}var x=m(0),y=m(1),E=m(16777216);t=c.prototype,t.m=function(){if(T(this))return-b(this).m();let j=0,D=1;for(let S=0;S<this.g.length;S++){const P=this.i(S);j+=(P>=0?P:4294967296+P)*D,D*=4294967296}return j},t.toString=function(j){if(j=j||10,j<2||36<j)throw Error("radix out of range: "+j);if(w(this))return"0";if(T(this))return"-"+b(this).toString(j);const D=d(Math.pow(j,6));var S=this;let P="";for(;;){const O=H(S,D).g;S=A(S,O.j(D));let C=((S.g.length>0?S.g[0]:S.h)>>>0).toString(j);if(S=O,w(S))return C+P;for(;C.length<6;)C="0"+C;P=C+P}},t.i=function(j){return j<0?0:j<this.g.length?this.g[j]:this.h};function w(j){if(j.h!=0)return!1;for(let D=0;D<j.g.length;D++)if(j.g[D]!=0)return!1;return!0}function T(j){return j.h==-1}t.l=function(j){return j=A(this,j),T(j)?-1:w(j)?0:1};function b(j){const D=j.g.length,S=[];for(let P=0;P<D;P++)S[P]=~j.g[P];return new c(S,~j.h).add(y)}t.abs=function(){return T(this)?b(this):this},t.add=function(j){const D=Math.max(this.g.length,j.g.length),S=[];let P=0;for(let O=0;O<=D;O++){let C=P+(this.i(O)&65535)+(j.i(O)&65535),k=(C>>>16)+(this.i(O)>>>16)+(j.i(O)>>>16);P=k>>>16,C&=65535,k&=65535,S[O]=k<<16|C}return new c(S,S[S.length-1]&-2147483648?-1:0)};function A(j,D){return j.add(b(D))}t.j=function(j){if(w(this)||w(j))return x;if(T(this))return T(j)?b(this).j(b(j)):b(b(this).j(j));if(T(j))return b(this.j(b(j)));if(this.l(E)<0&&j.l(E)<0)return d(this.m()*j.m());const D=this.g.length+j.g.length,S=[];for(var P=0;P<2*D;P++)S[P]=0;for(P=0;P<this.g.length;P++)for(let O=0;O<j.g.length;O++){const C=this.i(P)>>>16,k=this.i(P)&65535,Ce=j.i(O)>>>16,ze=j.i(O)&65535;S[2*P+2*O]+=k*ze,M(S,2*P+2*O),S[2*P+2*O+1]+=C*ze,M(S,2*P+2*O+1),S[2*P+2*O+1]+=k*Ce,M(S,2*P+2*O+1),S[2*P+2*O+2]+=C*Ce,M(S,2*P+2*O+2)}for(j=0;j<D;j++)S[j]=S[2*j+1]<<16|S[2*j];for(j=D;j<2*D;j++)S[j]=0;return new c(S,0)};function M(j,D){for(;(j[D]&65535)!=j[D];)j[D+1]+=j[D]>>>16,j[D]&=65535,D++}function V(j,D){this.g=j,this.h=D}function H(j,D){if(w(D))throw Error("division by zero");if(w(j))return new V(x,x);if(T(j))return D=H(b(j),D),new V(b(D.g),b(D.h));if(T(D))return D=H(j,b(D)),new V(b(D.g),D.h);if(j.g.length>30){if(T(j)||T(D))throw Error("slowDivide_ only works with positive integers.");for(var S=y,P=D;P.l(j)<=0;)S=re(S),P=re(P);var O=q(S,1),C=q(P,1);for(P=q(P,2),S=q(S,2);!w(P);){var k=C.add(P);k.l(j)<=0&&(O=O.add(S),C=k),P=q(P,1),S=q(S,1)}return D=A(j,O.j(D)),new V(O,D)}for(O=x;j.l(D)>=0;){for(S=Math.max(1,Math.floor(j.m()/D.m())),P=Math.ceil(Math.log(S)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),C=d(S),k=C.j(D);T(k)||k.l(j)>0;)S-=P,C=d(S),k=C.j(D);w(C)&&(C=y),O=O.add(C),j=A(j,k)}return new V(O,j)}t.B=function(j){return H(this,j).h},t.and=function(j){const D=Math.max(this.g.length,j.g.length),S=[];for(let P=0;P<D;P++)S[P]=this.i(P)&j.i(P);return new c(S,this.h&j.h)},t.or=function(j){const D=Math.max(this.g.length,j.g.length),S=[];for(let P=0;P<D;P++)S[P]=this.i(P)|j.i(P);return new c(S,this.h|j.h)},t.xor=function(j){const D=Math.max(this.g.length,j.g.length),S=[];for(let P=0;P<D;P++)S[P]=this.i(P)^j.i(P);return new c(S,this.h^j.h)};function re(j){const D=j.g.length+1,S=[];for(let P=0;P<D;P++)S[P]=j.i(P)<<1|j.i(P-1)>>>31;return new c(S,j.h)}function q(j,D){const S=D>>5;D%=32;const P=j.g.length-S,O=[];for(let C=0;C<P;C++)O[C]=D>0?j.i(C+S)>>>D|j.i(C+S+1)<<32-D:j.i(C+S);return new c(O,j.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,qN=n,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=d,c.fromString=p,Eo=c}).apply(typeof RE<"u"?RE:typeof self<"u"?self:typeof window<"u"?window:{});var fm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $N,zh,WN,km,Mv,YN,KN,XN;(function(){var t,e=Object.defineProperty;function r(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof fm=="object"&&fm];for(var N=0;N<g.length;++N){var R=g[N];if(R&&R.Math==Math)return R}throw Error("Cannot find global object")}var n=r(this);function a(g,N){if(N)e:{var R=n;g=g.split(".");for(var U=0;U<g.length-1;U++){var le=g[U];if(!(le in R))break e;R=R[le]}g=g[g.length-1],U=R[g],N=N(U),N!=U&&N!=null&&e(R,g,{configurable:!0,writable:!0,value:N})}}a("Symbol.dispose",function(g){return g||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(g){return g||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(g){return g||function(N){var R=[],U;for(U in N)Object.prototype.hasOwnProperty.call(N,U)&&R.push([U,N[U]]);return R}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function h(g){var N=typeof g;return N=="object"&&g!=null||N=="function"}function m(g,N,R){return g.call.apply(g.bind,arguments)}function d(g,N,R){return d=m,d.apply(null,arguments)}function p(g,N){var R=Array.prototype.slice.call(arguments,1);return function(){var U=R.slice();return U.push.apply(U,arguments),g.apply(this,U)}}function x(g,N){function R(){}R.prototype=N.prototype,g.Z=N.prototype,g.prototype=new R,g.prototype.constructor=g,g.Ob=function(U,le,ve){for(var Pe=Array(arguments.length-2),ut=2;ut<arguments.length;ut++)Pe[ut-2]=arguments[ut];return N.prototype[le].apply(U,Pe)}}var y=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?g=>g&&AsyncContext.Snapshot.wrap(g):g=>g;function E(g){const N=g.length;if(N>0){const R=Array(N);for(let U=0;U<N;U++)R[U]=g[U];return R}return[]}function w(g,N){for(let U=1;U<arguments.length;U++){const le=arguments[U];var R=typeof le;if(R=R!="object"?R:le?Array.isArray(le)?"array":R:"null",R=="array"||R=="object"&&typeof le.length=="number"){R=g.length||0;const ve=le.length||0;g.length=R+ve;for(let Pe=0;Pe<ve;Pe++)g[R+Pe]=le[Pe]}else g.push(le)}}class T{constructor(N,R){this.i=N,this.j=R,this.h=0,this.g=null}get(){let N;return this.h>0?(this.h--,N=this.g,this.g=N.next,N.next=null):N=this.i(),N}}function b(g){c.setTimeout(()=>{throw g},0)}function A(){var g=j;let N=null;return g.g&&(N=g.g,g.g=g.g.next,g.g||(g.h=null),N.next=null),N}class M{constructor(){this.h=this.g=null}add(N,R){const U=V.get();U.set(N,R),this.h?this.h.next=U:this.g=U,this.h=U}}var V=new T(()=>new H,g=>g.reset());class H{constructor(){this.next=this.g=this.h=null}set(N,R){this.h=N,this.g=R,this.next=null}reset(){this.next=this.g=this.h=null}}let re,q=!1,j=new M,D=()=>{const g=Promise.resolve(void 0);re=()=>{g.then(S)}};function S(){for(var g;g=A();){try{g.h.call(g.g)}catch(R){b(R)}var N=V;N.j(g),N.h<100&&(N.h++,g.next=N.g,N.g=g)}q=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(g,N){this.type=g,this.g=this.target=N,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var C=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var g=!1,N=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const R=()=>{};c.addEventListener("test",R,N),c.removeEventListener("test",R,N)}catch{}return g})();function k(g){return/^[\s\xa0]*$/.test(g)}function Ce(g,N){O.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g&&this.init(g,N)}x(Ce,O),Ce.prototype.init=function(g,N){const R=this.type=g.type,U=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;this.target=g.target||g.srcElement,this.g=N,N=g.relatedTarget,N||(R=="mouseover"?N=g.fromElement:R=="mouseout"&&(N=g.toElement)),this.relatedTarget=N,U?(this.clientX=U.clientX!==void 0?U.clientX:U.pageX,this.clientY=U.clientY!==void 0?U.clientY:U.pageY,this.screenX=U.screenX||0,this.screenY=U.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=g.pointerType,this.state=g.state,this.i=g,g.defaultPrevented&&Ce.Z.h.call(this)},Ce.prototype.h=function(){Ce.Z.h.call(this);const g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var ze="closure_listenable_"+(Math.random()*1e6|0),ge=0;function De(g,N,R,U,le){this.listener=g,this.proxy=null,this.src=N,this.type=R,this.capture=!!U,this.ha=le,this.key=++ge,this.da=this.fa=!1}function Fe(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function Xe(g,N,R){for(const U in g)N.call(R,g[U],U,g)}function Z(g,N){for(const R in g)N.call(void 0,g[R],R,g)}function _e(g){const N={};for(const R in g)N[R]=g[R];return N}const Y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ee(g,N){let R,U;for(let le=1;le<arguments.length;le++){U=arguments[le];for(R in U)g[R]=U[R];for(let ve=0;ve<Y.length;ve++)R=Y[ve],Object.prototype.hasOwnProperty.call(U,R)&&(g[R]=U[R])}}function J(g){this.src=g,this.g={},this.h=0}J.prototype.add=function(g,N,R,U,le){const ve=g.toString();g=this.g[ve],g||(g=this.g[ve]=[],this.h++);const Pe=he(g,N,U,le);return Pe>-1?(N=g[Pe],R||(N.fa=!1)):(N=new De(N,this.src,ve,!!U,le),N.fa=R,g.push(N)),N};function te(g,N){const R=N.type;if(R in g.g){var U=g.g[R],le=Array.prototype.indexOf.call(U,N,void 0),ve;(ve=le>=0)&&Array.prototype.splice.call(U,le,1),ve&&(Fe(N),g.g[R].length==0&&(delete g.g[R],g.h--))}}function he(g,N,R,U){for(let le=0;le<g.length;++le){const ve=g[le];if(!ve.da&&ve.listener==N&&ve.capture==!!R&&ve.ha==U)return le}return-1}var Le="closure_lm_"+(Math.random()*1e6|0),ke={};function He(g,N,R,U,le){if(Array.isArray(N)){for(let ve=0;ve<N.length;ve++)He(g,N[ve],R,U,le);return null}return R=en(R),g&&g[ze]?g.J(N,R,h(U)?!!U.capture:!1,le):ae(g,N,R,!1,U,le)}function ae(g,N,R,U,le,ve){if(!N)throw Error("Invalid event type");const Pe=h(le)?!!le.capture:!!le;let ut=Gt(g);if(ut||(g[Le]=ut=new J(g)),R=ut.add(N,R,U,Pe,ve),R.proxy)return R;if(U=Ve(),R.proxy=U,U.src=g,U.listener=R,g.addEventListener)C||(le=Pe),le===void 0&&(le=!1),g.addEventListener(N.toString(),U,le);else if(g.attachEvent)g.attachEvent(gt(N.toString()),U);else if(g.addListener&&g.removeListener)g.addListener(U);else throw Error("addEventListener and attachEvent are unavailable.");return R}function Ve(){function g(R){return N.call(g.src,g.listener,R)}const N=ta;return g}function Ze(g,N,R,U,le){if(Array.isArray(N))for(var ve=0;ve<N.length;ve++)Ze(g,N[ve],R,U,le);else U=h(U)?!!U.capture:!!U,R=en(R),g&&g[ze]?(g=g.i,ve=String(N).toString(),ve in g.g&&(N=g.g[ve],R=he(N,R,U,le),R>-1&&(Fe(N[R]),Array.prototype.splice.call(N,R,1),N.length==0&&(delete g.g[ve],g.h--)))):g&&(g=Gt(g))&&(N=g.g[N.toString()],g=-1,N&&(g=he(N,R,U,le)),(R=g>-1?N[g]:null)&&Ht(R))}function Ht(g){if(typeof g!="number"&&g&&!g.da){var N=g.src;if(N&&N[ze])te(N.i,g);else{var R=g.type,U=g.proxy;N.removeEventListener?N.removeEventListener(R,U,g.capture):N.detachEvent?N.detachEvent(gt(R),U):N.addListener&&N.removeListener&&N.removeListener(U),(R=Gt(N))?(te(R,g),R.h==0&&(R.src=null,N[Le]=null)):Fe(g)}}}function gt(g){return g in ke?ke[g]:ke[g]="on"+g}function ta(g,N){if(g.da)g=!0;else{N=new Ce(N,this);const R=g.listener,U=g.ha||g.src;g.fa&&Ht(g),g=R.call(U,N)}return g}function Gt(g){return g=g[Le],g instanceof J?g:null}var Be="__closure_events_fn_"+(Math.random()*1e9>>>0);function en(g){return typeof g=="function"?g:(g[Be]||(g[Be]=function(N){return g.handleEvent(N)}),g[Be])}function Ot(){P.call(this),this.i=new J(this),this.M=this,this.G=null}x(Ot,P),Ot.prototype[ze]=!0,Ot.prototype.removeEventListener=function(g,N,R,U){Ze(this,g,N,R,U)};function Jt(g,N){var R,U=g.G;if(U)for(R=[];U;U=U.G)R.push(U);if(g=g.M,U=N.type||N,typeof N=="string")N=new O(N,g);else if(N instanceof O)N.target=N.target||g;else{var le=N;N=new O(U,g),ee(N,le)}le=!0;let ve,Pe;if(R)for(Pe=R.length-1;Pe>=0;Pe--)ve=N.g=R[Pe],le=vn(ve,U,!0,N)&&le;if(ve=N.g=g,le=vn(ve,U,!0,N)&&le,le=vn(ve,U,!1,N)&&le,R)for(Pe=0;Pe<R.length;Pe++)ve=N.g=R[Pe],le=vn(ve,U,!1,N)&&le}Ot.prototype.N=function(){if(Ot.Z.N.call(this),this.i){var g=this.i;for(const N in g.g){const R=g.g[N];for(let U=0;U<R.length;U++)Fe(R[U]);delete g.g[N],g.h--}}this.G=null},Ot.prototype.J=function(g,N,R,U){return this.i.add(String(g),N,!1,R,U)},Ot.prototype.K=function(g,N,R,U){return this.i.add(String(g),N,!0,R,U)};function vn(g,N,R,U){if(N=g.i.g[String(N)],!N)return!0;N=N.concat();let le=!0;for(let ve=0;ve<N.length;++ve){const Pe=N[ve];if(Pe&&!Pe.da&&Pe.capture==R){const ut=Pe.listener,rr=Pe.ha||Pe.src;Pe.fa&&te(g.i,Pe),le=ut.call(rr,U)!==!1&&le}}return le&&!U.defaultPrevented}function Xl(g,N){if(typeof g!="function")if(g&&typeof g.handleEvent=="function")g=d(g.handleEvent,g);else throw Error("Invalid listener argument");return Number(N)>2147483647?-1:c.setTimeout(g,N||0)}function Ls(g){g.g=Xl(()=>{g.g=null,g.i&&(g.i=!1,Ls(g))},g.l);const N=g.h;g.h=null,g.m.apply(null,N)}class Un extends P{constructor(N,R){super(),this.m=N,this.l=R,this.h=null,this.i=!1,this.g=null}j(N){this.h=arguments,this.g?this.i=!0:Ls(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ya(g){P.call(this),this.h=g,this.g={}}x(ya,P);var _a=[];function Nr(g){Xe(g.g,function(N,R){this.g.hasOwnProperty(R)&&Ht(N)},g),g.g={}}ya.prototype.N=function(){ya.Z.N.call(this),Nr(this)},ya.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var br=c.JSON.stringify,tn=c.JSON.parse,Ql=class{stringify(g){return c.JSON.stringify(g,void 0)}parse(g){return c.JSON.parse(g,void 0)}};function Bo(){}function Uo(){}var ra={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Va(){O.call(this,"d")}x(Va,O);function zn(){O.call(this,"c")}x(zn,O);var Hn={},ds=null;function Vs(){return ds=ds||new Ot}Hn.Ia="serverreachability";function Ai(g){O.call(this,Hn.Ia,g)}x(Ai,O);function Ba(g){const N=Vs();Jt(N,new Ai(N))}Hn.STAT_EVENT="statevent";function Ci(g,N){O.call(this,Hn.STAT_EVENT,g),this.stat=N}x(Ci,O);function or(g){const N=Vs();Jt(N,new Ci(N,g))}Hn.Ja="timingevent";function Bs(g,N){O.call(this,Hn.Ja,g),this.size=N}x(Bs,O);function fs(g,N){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){g()},N)}function ms(){this.g=!0}ms.prototype.ua=function(){this.g=!1};function zo(g,N,R,U,le,ve){g.info(function(){if(g.g)if(ve){var Pe="",ut=ve.split("&");for(let Pt=0;Pt<ut.length;Pt++){var rr=ut[Pt].split("=");if(rr.length>1){const yr=rr[0];rr=rr[1];const sa=yr.split("_");Pe=sa.length>=2&&sa[1]=="type"?Pe+(yr+"="+rr+"&"):Pe+(yr+"=redacted&")}}}else Pe=null;else Pe=ve;return"XMLHTTP REQ ("+U+") [attempt "+le+"]: "+N+`
`+R+`
`+Pe})}function Ho(g,N,R,U,le,ve,Pe){g.info(function(){return"XMLHTTP RESP ("+U+") [ attempt "+le+"]: "+N+`
`+R+`
`+ve+" "+Pe})}function Ua(g,N,R,U){g.info(function(){return"XMLHTTP TEXT ("+N+"): "+Ea(g,R)+(U?" "+U:"")})}function Du(g,N){g.info(function(){return"TIMEOUT: "+N})}ms.prototype.info=function(){};function Ea(g,N){if(!g.g)return N;if(!N)return null;try{const ve=JSON.parse(N);if(ve){for(g=0;g<ve.length;g++)if(Array.isArray(ve[g])){var R=ve[g];if(!(R.length<2)){var U=R[1];if(Array.isArray(U)&&!(U.length<1)){var le=U[0];if(le!="noop"&&le!="stop"&&le!="close")for(let Pe=1;Pe<U.length;Pe++)U[Pe]=""}}}}return br(ve)}catch{return N}}var lr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},xr={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},za;function Us(){}x(Us,Bo),Us.prototype.g=function(){return new XMLHttpRequest},za=new Us;function zs(g){return encodeURIComponent(String(g))}function F(g){var N=1;g=g.split(":");const R=[];for(;N>0&&g.length;)R.push(g.shift()),N--;return g.length&&R.push(g.join(":")),R}function W(g,N,R,U){this.j=g,this.i=N,this.l=R,this.S=U||1,this.V=new ya(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new z}function z(){this.i=null,this.g="",this.h=!1}var G={},K={};function X(g,N,R){g.M=1,g.A=Hs(cr(N)),g.u=R,g.R=!0,ce(g,null)}function ce(g,N){g.F=Date.now(),fe(g),g.B=cr(g.A);var R=g.B,U=g.S;Array.isArray(U)||(U=[String(U)]),Zd(R.i,"t",U),g.C=0,R=g.j.L,g.h=new z,g.g=nc(g.j,R?N:null,!g.u),g.P>0&&(g.O=new Un(d(g.Y,g,g.g),g.P)),N=g.V,R=g.g,U=g.ba;var le="readystatechange";Array.isArray(le)||(le&&(_a[0]=le.toString()),le=_a);for(let ve=0;ve<le.length;ve++){const Pe=He(R,le[ve],U||N.handleEvent,!1,N.h||N);if(!Pe)break;N.g[Pe.key]=Pe}N=g.J?_e(g.J):{},g.u?(g.v||(g.v="POST"),N["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.B,g.v,g.u,N)):(g.v="GET",g.g.ea(g.B,g.v,null,N)),Ba(),zo(g.i,g.v,g.B,g.l,g.S,g.u)}W.prototype.ba=function(g){g=g.target;const N=this.O;N&&xn(g)==3?N.j():this.Y(g)},W.prototype.Y=function(g){try{if(g==this.g)e:{const ut=xn(this.g),rr=this.g.ya(),Pt=this.g.ca();if(!(ut<3)&&(ut!=3||this.g&&(this.h.h||this.g.la()||Xo(this.g)))){this.K||ut!=4||rr==7||(rr==8||Pt<=0?Ba(3):Ba(2)),Ie(this);var N=this.g.ca();this.X=N;var R=xe(this);if(this.o=N==200,Ho(this.i,this.v,this.B,this.l,this.S,ut,N),this.o){if(this.U&&!this.L){t:{if(this.g){var U,le=this.g;if((U=le.g?le.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(U)){var ve=U;break t}}ve=null}if(g=ve)Ua(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ue(this,g);else{this.o=!1,this.m=3,or(12),je(this),Ge(this);break e}}if(this.R){g=!0;let yr;for(;!this.K&&this.C<R.length;)if(yr=de(this,R),yr==K){ut==4&&(this.m=4,or(14),g=!1),Ua(this.i,this.l,null,"[Incomplete Response]");break}else if(yr==G){this.m=4,or(15),Ua(this.i,this.l,R,"[Invalid Chunk]"),g=!1;break}else Ua(this.i,this.l,yr,null),Ue(this,yr);if(ie(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ut!=4||R.length!=0||this.h.h||(this.m=1,or(16),g=!1),this.o=this.o&&g,!g)Ua(this.i,this.l,R,"[Invalid Chunked Response]"),je(this),Ge(this);else if(R.length>0&&!this.W){this.W=!0;var Pe=this.j;Pe.g==this&&Pe.aa&&!Pe.P&&(Pe.j.info("Great, no buffering proxy detected. Bytes received: "+R.length),Uu(Pe),Pe.P=!0,or(11))}}else Ua(this.i,this.l,R,null),Ue(this,R);ut==4&&je(this),this.o&&!this.K&&(ut==4?zu(this.j,this):(this.o=!1,fe(this)))}else Qo(this.g),N==400&&R.indexOf("Unknown SID")>0?(this.m=3,or(12)):(this.m=0,or(13)),je(this),Ge(this)}}}catch{}finally{}};function xe(g){if(!ie(g))return g.g.la();const N=Xo(g.g);if(N==="")return"";let R="";const U=N.length,le=xn(g.g)==4;if(!g.h.i){if(typeof TextDecoder>"u")return je(g),Ge(g),"";g.h.i=new c.TextDecoder}for(let ve=0;ve<U;ve++)g.h.h=!0,R+=g.h.i.decode(N[ve],{stream:!(le&&ve==U-1)});return N.length=0,g.h.g+=R,g.C=0,g.h.g}function ie(g){return g.g?g.v=="GET"&&g.M!=2&&g.j.Aa:!1}function de(g,N){var R=g.C,U=N.indexOf(`
`,R);return U==-1?K:(R=Number(N.substring(R,U)),isNaN(R)?G:(U+=1,U+R>N.length?K:(N=N.slice(U,U+R),g.C=U+R,N)))}W.prototype.cancel=function(){this.K=!0,je(this)};function fe(g){g.T=Date.now()+g.H,Ae(g,g.H)}function Ae(g,N){if(g.D!=null)throw Error("WatchDog timer not null");g.D=fs(d(g.aa,g),N)}function Ie(g){g.D&&(c.clearTimeout(g.D),g.D=null)}W.prototype.aa=function(){this.D=null;const g=Date.now();g-this.T>=0?(Du(this.i,this.B),this.M!=2&&(Ba(),or(17)),je(this),this.m=2,Ge(this)):Ae(this,this.T-g)};function Ge(g){g.j.I==0||g.K||zu(g.j,g)}function je(g){Ie(g);var N=g.O;N&&typeof N.dispose=="function"&&N.dispose(),g.O=null,Nr(g.V),g.g&&(N=g.g,g.g=null,N.abort(),N.dispose())}function Ue(g,N){try{var R=g.j;if(R.I!=0&&(R.g==g||na(R.h,g))){if(!g.L&&na(R.h,g)&&R.I==3){try{var U=R.Ba.g.parse(N)}catch{U=null}if(Array.isArray(U)&&U.length==3){var le=U;if(le[0]==0){e:if(!R.v){if(R.g)if(R.g.F+3e3<g.F)rc(R),gs(R);else break e;Bu(R),or(18)}}else R.xa=le[1],0<R.xa-R.K&&le[2]<37500&&R.F&&R.A==0&&!R.C&&(R.C=fs(d(R.Va,R),6e3));Mt(R.h)<=1&&R.ta&&(R.ta=void 0)}else $s(R,11)}else if((g.L||R.g==g)&&rc(R),!k(N))for(le=R.Ba.g.parse(N),N=0;N<le.length;N++){let Pt=le[N];const yr=Pt[0];if(!(yr<=R.K))if(R.K=yr,Pt=Pt[1],R.I==2)if(Pt[0]=="c"){R.M=Pt[1],R.ba=Pt[2];const sa=Pt[3];sa!=null&&(R.ka=sa,R.j.info("VER="+R.ka));const vs=Pt[4];vs!=null&&(R.za=vs,R.j.info("SVER="+R.za));const qa=Pt[5];qa!=null&&typeof qa=="number"&&qa>0&&(U=1.5*qa,R.O=U,R.j.info("backChannelRequestTimeoutMs_="+U)),U=R;const $a=g.g;if($a){const Wa=$a.g?$a.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Wa){var ve=U.h;ve.g||Wa.indexOf("spdy")==-1&&Wa.indexOf("quic")==-1&&Wa.indexOf("h2")==-1||(ve.j=ve.l,ve.g=new Set,ve.h&&(Ta(ve,ve.h),ve.h=null))}if(U.G){const Gu=$a.g?$a.g.getResponseHeader("X-HTTP-Session-Id"):null;Gu&&(U.wa=Gu,qt(U.J,U.G,Gu))}}R.I=3,R.l&&R.l.ra(),R.aa&&(R.T=Date.now()-g.F,R.j.info("Handshake RTT: "+R.T+"ms")),U=R;var Pe=g;if(U.na=cf(U,U.L?U.ba:null,U.W),Pe.L){Cn(U.h,Pe);var ut=Pe,rr=U.O;rr&&(ut.H=rr),ut.D&&(Ie(ut),fe(ut)),U.g=Pe}else af(U);R.i.length>0&&tl(R)}else Pt[0]!="stop"&&Pt[0]!="close"||$s(R,7);else R.I==3&&(Pt[0]=="stop"||Pt[0]=="close"?Pt[0]=="stop"?$s(R,7):Zo(R):Pt[0]!="noop"&&R.l&&R.l.qa(Pt),R.A=0)}}Ba(4)}catch{}}var ot=class{constructor(g,N){this.g=g,this.map=N}};function jt(g){this.l=g||10,c.PerformanceNavigationTiming?(g=c.performance.getEntriesByType("navigation"),g=g.length>0&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Rt(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function Mt(g){return g.h?1:g.g?g.g.size:0}function na(g,N){return g.h?g.h==N:g.g?g.g.has(N):!1}function Ta(g,N){g.g?g.g.add(N):g.h=N}function Cn(g,N){g.h&&g.h==N?g.h=null:g.g&&g.g.has(N)&&g.g.delete(N)}jt.prototype.cancel=function(){if(this.i=Gn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function Gn(g){if(g.h!=null)return g.i.concat(g.h.G);if(g.g!=null&&g.g.size!==0){let N=g.i;for(const R of g.g.values())N=N.concat(R.G);return N}return E(g.i)}var ps=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function aa(g,N){if(g){g=g.split("&");for(let R=0;R<g.length;R++){const U=g[R].indexOf("=");let le,ve=null;U>=0?(le=g[R].substring(0,U),ve=g[R].substring(U+1)):le=g[R],N(le,ve?decodeURIComponent(ve.replace(/\+/g," ")):"")}}}function Ha(g){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let N;g instanceof Ha?(this.l=g.l,ji(this,g.j),this.o=g.o,this.g=g.g,Go(this,g.u),this.h=g.h,Ri(this,ef(g.i)),this.m=g.m):g&&(N=String(g).match(ps))?(this.l=!1,ji(this,N[1]||"",!0),this.o=qo(N[2]||""),this.g=qo(N[3]||"",!0),Go(this,N[4]),this.h=qo(N[5]||"",!0),Ri(this,N[6]||"",!0),this.m=qo(N[7]||"")):(this.l=!1,this.i=new wa(null,this.l))}Ha.prototype.toString=function(){const g=[];var N=this.j;N&&g.push(Hr(N,ku,!0),":");var R=this.g;return(R||N=="file")&&(g.push("//"),(N=this.o)&&g.push(Hr(N,ku,!0),"@"),g.push(zs(R).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),R=this.u,R!=null&&g.push(":",String(R))),(R=this.h)&&(this.g&&R.charAt(0)!="/"&&g.push("/"),g.push(Hr(R,R.charAt(0)=="/"?Di:Ou,!0))),(R=this.i.toString())&&g.push("?",R),(R=this.m)&&g.push("#",Hr(R,Jd)),g.join("")},Ha.prototype.resolve=function(g){const N=cr(this);let R=!!g.j;R?ji(N,g.j):R=!!g.o,R?N.o=g.o:R=!!g.g,R?N.g=g.g:R=g.u!=null;var U=g.h;if(R)Go(N,g.u);else if(R=!!g.h){if(U.charAt(0)!="/")if(this.g&&!this.h)U="/"+U;else{var le=N.h.lastIndexOf("/");le!=-1&&(U=N.h.slice(0,le+1)+U)}if(le=U,le==".."||le==".")U="";else if(le.indexOf("./")!=-1||le.indexOf("/.")!=-1){U=le.lastIndexOf("/",0)==0,le=le.split("/");const ve=[];for(let Pe=0;Pe<le.length;){const ut=le[Pe++];ut=="."?U&&Pe==le.length&&ve.push(""):ut==".."?((ve.length>1||ve.length==1&&ve[0]!="")&&ve.pop(),U&&Pe==le.length&&ve.push("")):(ve.push(ut),U=!0)}U=ve.join("/")}else U=le}return R?N.h=U:R=g.i.toString()!=="",R?Ri(N,ef(g.i)):R=!!g.m,R&&(N.m=g.m),N};function cr(g){return new Ha(g)}function ji(g,N,R){g.j=R?qo(N,!0):N,g.j&&(g.j=g.j.replace(/:$/,""))}function Go(g,N){if(N){if(N=Number(N),isNaN(N)||N<0)throw Error("Bad port number "+N);g.u=N}else g.u=null}function Ri(g,N,R){N instanceof wa?(g.i=N,Fu(g.i,g.l)):(R||(N=Hr(N,Qd)),g.i=new wa(N,g.l))}function qt(g,N,R){g.i.set(N,R)}function Hs(g){return qt(g,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),g}function qo(g,N){return g?N?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function Hr(g,N,R){return typeof g=="string"?(g=encodeURI(g).replace(N,Iu),R&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function Iu(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var ku=/[#\/\?@]/g,Ou=/[#\?:]/g,Di=/[#\?]/g,Qd=/[#\?@]/g,Jd=/#/g;function wa(g,N){this.h=this.g=null,this.i=g||null,this.j=!!N}function Gs(g){g.g||(g.g=new Map,g.h=0,g.i&&aa(g.i,function(N,R){g.add(decodeURIComponent(N.replace(/\+/g," ")),R)}))}t=wa.prototype,t.add=function(g,N){Gs(this),this.i=null,g=Ga(this,g);let R=this.g.get(g);return R||this.g.set(g,R=[]),R.push(N),this.h+=1,this};function Mu(g,N){Gs(g),N=Ga(g,N),g.g.has(N)&&(g.i=null,g.h-=g.g.get(N).length,g.g.delete(N))}function Pu(g,N){return Gs(g),N=Ga(g,N),g.g.has(N)}t.forEach=function(g,N){Gs(this),this.g.forEach(function(R,U){R.forEach(function(le){g.call(N,le,U,this)},this)},this)};function Jl(g,N){Gs(g);let R=[];if(typeof N=="string")Pu(g,N)&&(R=R.concat(g.g.get(Ga(g,N))));else for(g=Array.from(g.g.values()),N=0;N<g.length;N++)R=R.concat(g[N]);return R}t.set=function(g,N){return Gs(this),this.i=null,g=Ga(this,g),Pu(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[N]),this.h+=1,this},t.get=function(g,N){return g?(g=Jl(this,g),g.length>0?String(g[0]):N):N};function Zd(g,N,R){Mu(g,N),R.length>0&&(g.i=null,g.g.set(Ga(g,N),E(R)),g.h+=R.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],N=Array.from(this.g.keys());for(let U=0;U<N.length;U++){var R=N[U];const le=zs(R);R=Jl(this,R);for(let ve=0;ve<R.length;ve++){let Pe=le;R[ve]!==""&&(Pe+="="+zs(R[ve])),g.push(Pe)}}return this.i=g.join("&")};function ef(g){const N=new wa;return N.i=g.i,g.g&&(N.g=new Map(g.g),N.h=g.h),N}function Ga(g,N){return N=String(N),g.j&&(N=N.toLowerCase()),N}function Fu(g,N){N&&!g.j&&(Gs(g),g.i=null,g.g.forEach(function(R,U){const le=U.toLowerCase();U!=le&&(Mu(this,U),Zd(this,le,R))},g)),g.j=N}function Lu(g,N){const R=new ms;if(c.Image){const U=new Image;U.onload=p(jn,R,"TestLoadImage: loaded",!0,N,U),U.onerror=p(jn,R,"TestLoadImage: error",!1,N,U),U.onabort=p(jn,R,"TestLoadImage: abort",!1,N,U),U.ontimeout=p(jn,R,"TestLoadImage: timeout",!1,N,U),c.setTimeout(function(){U.ontimeout&&U.ontimeout()},1e4),U.src=g}else N(!1)}function Ii(g,N){const R=new ms,U=new AbortController,le=setTimeout(()=>{U.abort(),jn(R,"TestPingServer: timeout",!1,N)},1e4);fetch(g,{signal:U.signal}).then(ve=>{clearTimeout(le),ve.ok?jn(R,"TestPingServer: ok",!0,N):jn(R,"TestPingServer: server error",!1,N)}).catch(()=>{clearTimeout(le),jn(R,"TestPingServer: error",!1,N)})}function jn(g,N,R,U,le){try{le&&(le.onload=null,le.onerror=null,le.onabort=null,le.ontimeout=null),U(R)}catch{}}function tf(){this.g=new Ql}function $o(g){this.i=g.Sb||null,this.h=g.ab||!1}x($o,Bo),$o.prototype.g=function(){return new Wo(this.i,this.h)};function Wo(g,N){Ot.call(this),this.H=g,this.o=N,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}x(Wo,Ot),t=Wo.prototype,t.open=function(g,N){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=g,this.D=N,this.readyState=1,qs(this)},t.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const N={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};g&&(N.body=g),(this.H||c).fetch(new Request(this.D,N)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Rn(this)),this.readyState=0},t.Pa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,qs(this)),this.g&&(this.readyState=3,qs(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ki(this)}else g.text().then(this.Oa.bind(this),this.ga.bind(this))};function ki(g){g.j.read().then(g.Ma.bind(g)).catch(g.ga.bind(g))}t.Ma=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var N=g.value?g.value:new Uint8Array(0);(N=this.B.decode(N,{stream:!g.done}))&&(this.response=this.responseText+=N)}g.done?Rn(this):qs(this),this.readyState==3&&ki(this)}},t.Oa=function(g){this.g&&(this.response=this.responseText=g,Rn(this))},t.Na=function(g){this.g&&(this.response=g,Rn(this))},t.ga=function(){this.g&&Rn(this)};function Rn(g){g.readyState=4,g.l=null,g.j=null,g.B=null,qs(g)}t.setRequestHeader=function(g,N){this.A.append(g,N)},t.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],N=this.h.entries();for(var R=N.next();!R.done;)R=R.value,g.push(R[0]+": "+R[1]),R=N.next();return g.join(`\r
`)};function qs(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(Wo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function Oi(g){let N="";return Xe(g,function(R,U){N+=U,N+=":",N+=R,N+=`\r
`}),N}function Na(g,N,R){e:{for(U in R){var U=!1;break e}U=!0}U||(R=Oi(R),typeof g=="string"?R!=null&&zs(R):qt(g,N,R))}function Zt(g){Ot.call(this),this.headers=new Map,this.L=g||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}x(Zt,Ot);var Zl=/^https?$/i,rf=["POST","PUT"];t=Zt.prototype,t.Fa=function(g){this.H=g},t.ea=function(g,N,R,U){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);N=N?N.toUpperCase():"GET",this.D=g,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():za.g(),this.g.onreadystatechange=y(d(this.Ca,this));try{this.B=!0,this.g.open(N,String(g),!0),this.B=!1}catch(ve){Yo(this,ve);return}if(g=R||"",R=new Map(this.headers),U)if(Object.getPrototypeOf(U)===Object.prototype)for(var le in U)R.set(le,U[le]);else if(typeof U.keys=="function"&&typeof U.get=="function")for(const ve of U.keys())R.set(ve,U.get(ve));else throw Error("Unknown input type for opt_headers: "+String(U));U=Array.from(R.keys()).find(ve=>ve.toLowerCase()=="content-type"),le=c.FormData&&g instanceof c.FormData,!(Array.prototype.indexOf.call(rf,N,void 0)>=0)||U||le||R.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ve,Pe]of R)this.g.setRequestHeader(ve,Pe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(g),this.v=!1}catch(ve){Yo(this,ve)}};function Yo(g,N){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=N,g.o=5,Ko(g),Mr(g)}function Ko(g){g.A||(g.A=!0,Jt(g,"complete"),Jt(g,"error"))}t.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=g||7,Jt(this,"complete"),Jt(this,"abort"),Mr(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Mr(this,!0)),Zt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Vu(this):this.Xa())},t.Xa=function(){Vu(this)};function Vu(g){if(g.h&&typeof o<"u"){if(g.v&&xn(g)==4)setTimeout(g.Ca.bind(g),0);else if(Jt(g,"readystatechange"),xn(g)==4){g.h=!1;try{const ve=g.ca();e:switch(ve){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var N=!0;break e;default:N=!1}var R;if(!(R=N)){var U;if(U=ve===0){let Pe=String(g.D).match(ps)[1]||null;!Pe&&c.self&&c.self.location&&(Pe=c.self.location.protocol.slice(0,-1)),U=!Zl.test(Pe?Pe.toLowerCase():"")}R=U}if(R)Jt(g,"complete"),Jt(g,"success");else{g.o=6;try{var le=xn(g)>2?g.g.statusText:""}catch{le=""}g.l=le+" ["+g.ca()+"]",Ko(g)}}finally{Mr(g)}}}}function Mr(g,N){if(g.g){g.m&&(clearTimeout(g.m),g.m=null);const R=g.g;g.g=null,N||Jt(g,"ready");try{R.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function xn(g){return g.g?g.g.readyState:0}t.ca=function(){try{return xn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(g){if(this.g){var N=this.g.responseText;return g&&N.indexOf(g)==0&&(N=N.substring(g.length)),tn(N)}};function Xo(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.F){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function Qo(g){const N={};g=(g.g&&xn(g)>=2&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let U=0;U<g.length;U++){if(k(g[U]))continue;var R=F(g[U]);const le=R[0];if(R=R[1],typeof R!="string")continue;R=R.trim();const ve=N[le]||[];N[le]=ve,ve.push(R)}Z(N,function(U){return U.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Jo(g,N,R){return R&&R.internalChannelParams&&R.internalChannelParams[g]||N}function ec(g){this.za=0,this.i=[],this.j=new ms,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Jo("failFast",!1,g),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Jo("baseRetryDelayMs",5e3,g),this.Za=Jo("retryDelaySeedMs",1e4,g),this.Ta=Jo("forwardChannelMaxRetries",2,g),this.va=Jo("forwardChannelRequestTimeoutMs",2e4,g),this.ma=g&&g.xmlHttpFactory||void 0,this.Ua=g&&g.Rb||void 0,this.Aa=g&&g.useFetchStreams||!1,this.O=void 0,this.L=g&&g.supportsCrossDomainXhr||!1,this.M="",this.h=new jt(g&&g.concurrentRequestLimit),this.Ba=new tf,this.S=g&&g.fastHandshake||!1,this.R=g&&g.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=g&&g.Pb||!1,g&&g.ua&&this.j.ua(),g&&g.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&g&&g.detectBufferingProxy||!1,this.ia=void 0,g&&g.longPollingTimeout&&g.longPollingTimeout>0&&(this.ia=g.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=ec.prototype,t.ka=8,t.I=1,t.connect=function(g,N,R,U){or(0),this.W=g,this.H=N||{},R&&U!==void 0&&(this.H.OSID=R,this.H.OAID=U),this.F=this.X,this.J=cf(this,null,this.W),tl(this)};function Zo(g){if(el(g),g.I==3){var N=g.V++,R=cr(g.J);if(qt(R,"SID",g.M),qt(R,"RID",N),qt(R,"TYPE","terminate"),rl(g,R),N=new W(g,g.j,N),N.M=2,N.A=Hs(cr(R)),R=!1,c.navigator&&c.navigator.sendBeacon)try{R=c.navigator.sendBeacon(N.A.toString(),"")}catch{}!R&&c.Image&&(new Image().src=N.A,R=!0),R||(N.g=nc(N.j,null),N.g.ea(N.A)),N.F=Date.now(),fe(N)}lf(g)}function gs(g){g.g&&(Uu(g),g.g.cancel(),g.g=null)}function el(g){gs(g),g.v&&(c.clearTimeout(g.v),g.v=null),rc(g),g.h.cancel(),g.m&&(typeof g.m=="number"&&c.clearTimeout(g.m),g.m=null)}function tl(g){if(!Rt(g.h)&&!g.m){g.m=!0;var N=g.Ea;re||D(),q||(re(),q=!0),j.add(N,g),g.D=0}}function sp(g,N){return Mt(g.h)>=g.h.j-(g.m?1:0)?!1:g.m?(g.i=N.G.concat(g.i),!0):g.I==1||g.I==2||g.D>=(g.Sa?0:g.Ta)?!1:(g.m=fs(d(g.Ea,g,N),of(g,g.D)),g.D++,!0)}t.Ea=function(g){if(this.m)if(this.m=null,this.I==1){if(!g){this.V=Math.floor(Math.random()*1e5),g=this.V++;const le=new W(this,this.j,g);let ve=this.o;if(this.U&&(ve?(ve=_e(ve),ee(ve,this.U)):ve=this.U),this.u!==null||this.R||(le.J=ve,ve=null),this.S)e:{for(var N=0,R=0;R<this.i.length;R++){t:{var U=this.i[R];if("__data__"in U.map&&(U=U.map.__data__,typeof U=="string")){U=U.length;break t}U=void 0}if(U===void 0)break;if(N+=U,N>4096){N=R;break e}if(N===4096||R===this.i.length-1){N=R+1;break e}}N=1e3}else N=1e3;N=tc(this,le,N),R=cr(this.J),qt(R,"RID",g),qt(R,"CVER",22),this.G&&qt(R,"X-HTTP-Session-Id",this.G),rl(this,R),ve&&(this.R?N="headers="+zs(Oi(ve))+"&"+N:this.u&&Na(R,this.u,ve)),Ta(this.h,le),this.Ra&&qt(R,"TYPE","init"),this.S?(qt(R,"$req",N),qt(R,"SID","null"),le.U=!0,X(le,R,null)):X(le,R,N),this.I=2}}else this.I==3&&(g?nf(this,g):this.i.length==0||Rt(this.h)||nf(this))};function nf(g,N){var R;N?R=N.l:R=g.V++;const U=cr(g.J);qt(U,"SID",g.M),qt(U,"RID",R),qt(U,"AID",g.K),rl(g,U),g.u&&g.o&&Na(U,g.u,g.o),R=new W(g,g.j,R,g.D+1),g.u===null&&(R.J=g.o),N&&(g.i=N.G.concat(g.i)),N=tc(g,R,1e3),R.H=Math.round(g.va*.5)+Math.round(g.va*.5*Math.random()),Ta(g.h,R),X(R,U,N)}function rl(g,N){g.H&&Xe(g.H,function(R,U){qt(N,U,R)}),g.l&&Xe({},function(R,U){qt(N,U,R)})}function tc(g,N,R){R=Math.min(g.i.length,R);const U=g.l?d(g.l.Ka,g.l,g):null;e:{var le=g.i;let ut=-1;for(;;){const rr=["count="+R];ut==-1?R>0?(ut=le[0].g,rr.push("ofs="+ut)):ut=0:rr.push("ofs="+ut);let Pt=!0;for(let yr=0;yr<R;yr++){var ve=le[yr].g;const sa=le[yr].map;if(ve-=ut,ve<0)ut=Math.max(0,le[yr].g-100),Pt=!1;else try{ve="req"+ve+"_"||"";try{var Pe=sa instanceof Map?sa:Object.entries(sa);for(const[vs,qa]of Pe){let $a=qa;h(qa)&&($a=br(qa)),rr.push(ve+vs+"="+encodeURIComponent($a))}}catch(vs){throw rr.push(ve+"type="+encodeURIComponent("_badmap")),vs}}catch{U&&U(sa)}}if(Pt){Pe=rr.join("&");break e}}Pe=void 0}return g=g.i.splice(0,R),N.G=g,Pe}function af(g){if(!g.g&&!g.v){g.Y=1;var N=g.Da;re||D(),q||(re(),q=!0),j.add(N,g),g.A=0}}function Bu(g){return g.g||g.v||g.A>=3?!1:(g.Y++,g.v=fs(d(g.Da,g),of(g,g.A)),g.A++,!0)}t.Da=function(){if(this.v=null,sf(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var g=4*this.T;this.j.info("BP detection timer enabled: "+g),this.B=fs(d(this.Wa,this),g)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,or(10),gs(this),sf(this))};function Uu(g){g.B!=null&&(c.clearTimeout(g.B),g.B=null)}function sf(g){g.g=new W(g,g.j,"rpc",g.Y),g.u===null&&(g.g.J=g.o),g.g.P=0;var N=cr(g.na);qt(N,"RID","rpc"),qt(N,"SID",g.M),qt(N,"AID",g.K),qt(N,"CI",g.F?"0":"1"),!g.F&&g.ia&&qt(N,"TO",g.ia),qt(N,"TYPE","xmlhttp"),rl(g,N),g.u&&g.o&&Na(N,g.u,g.o),g.O&&(g.g.H=g.O);var R=g.g;g=g.ba,R.M=1,R.A=Hs(cr(N)),R.u=null,R.R=!0,ce(R,g)}t.Va=function(){this.C!=null&&(this.C=null,gs(this),Bu(this),or(19))};function rc(g){g.C!=null&&(c.clearTimeout(g.C),g.C=null)}function zu(g,N){var R=null;if(g.g==N){rc(g),Uu(g),g.g=null;var U=2}else if(na(g.h,N))R=N.G,Cn(g.h,N),U=1;else return;if(g.I!=0){if(N.o)if(U==1){R=N.u?N.u.length:0,N=Date.now()-N.F;var le=g.D;U=Vs(),Jt(U,new Bs(U,R)),tl(g)}else af(g);else if(le=N.m,le==3||le==0&&N.X>0||!(U==1&&sp(g,N)||U==2&&Bu(g)))switch(R&&R.length>0&&(N=g.h,N.i=N.i.concat(R)),le){case 1:$s(g,5);break;case 4:$s(g,10);break;case 3:$s(g,6);break;default:$s(g,2)}}}function of(g,N){let R=g.Qa+Math.floor(Math.random()*g.Za);return g.isActive()||(R*=2),R*N}function $s(g,N){if(g.j.info("Error code "+N),N==2){var R=d(g.bb,g),U=g.Ua;const le=!U;U=new Ha(U||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||ji(U,"https"),Hs(U),le?Lu(U.toString(),R):Ii(U.toString(),R)}else or(2);g.I=0,g.l&&g.l.pa(N),lf(g),el(g)}t.bb=function(g){g?(this.j.info("Successfully pinged google.com"),or(2)):(this.j.info("Failed to ping google.com"),or(1))};function lf(g){if(g.I=0,g.ja=[],g.l){const N=Gn(g.h);(N.length!=0||g.i.length!=0)&&(w(g.ja,N),w(g.ja,g.i),g.h.i.length=0,E(g.i),g.i.length=0),g.l.oa()}}function cf(g,N,R){var U=R instanceof Ha?cr(R):new Ha(R);if(U.g!="")N&&(U.g=N+"."+U.g),Go(U,U.u);else{var le=c.location;U=le.protocol,N=N?N+"."+le.hostname:le.hostname,le=+le.port;const ve=new Ha(null);U&&ji(ve,U),N&&(ve.g=N),le&&Go(ve,le),R&&(ve.h=R),U=ve}return R=g.G,N=g.wa,R&&N&&qt(U,R,N),qt(U,"VER",g.ka),rl(g,U),U}function nc(g,N,R){if(N&&!g.L)throw Error("Can't create secondary domain capable XhrIo object.");return N=g.Aa&&!g.ma?new Zt(new $o({ab:R})):new Zt(g.ma),N.Fa(g.L),N}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function uf(){}t=uf.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function ac(){}ac.prototype.g=function(g,N){return new Dn(g,N)};function Dn(g,N){Ot.call(this),this.g=new ec(N),this.l=g,this.h=N&&N.messageUrlParams||null,g=N&&N.messageHeaders||null,N&&N.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=N&&N.initMessageHeaders||null,N&&N.messageContentType&&(g?g["X-WebChannel-Content-Type"]=N.messageContentType:g={"X-WebChannel-Content-Type":N.messageContentType}),N&&N.sa&&(g?g["X-WebChannel-Client-Profile"]=N.sa:g={"X-WebChannel-Client-Profile":N.sa}),this.g.U=g,(g=N&&N.Qb)&&!k(g)&&(this.g.u=g),this.A=N&&N.supportsCrossDomainXhr||!1,this.v=N&&N.sendRawJson||!1,(N=N&&N.httpSessionIdParam)&&!k(N)&&(this.g.G=N,g=this.h,g!==null&&N in g&&(g=this.h,N in g&&delete g[N])),this.j=new Mi(this)}x(Dn,Ot),Dn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Dn.prototype.close=function(){Zo(this.g)},Dn.prototype.o=function(g){var N=this.g;if(typeof g=="string"){var R={};R.__data__=g,g=R}else this.v&&(R={},R.__data__=br(g),g=R);N.i.push(new ot(N.Ya++,g)),N.I==3&&tl(N)},Dn.prototype.N=function(){this.g.l=null,delete this.j,Zo(this.g),delete this.g,Dn.Z.N.call(this)};function Hu(g){Va.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var N=g.__sm__;if(N){e:{for(const R in N){g=R;break e}g=void 0}(this.i=g)&&(g=this.i,N=N!==null&&g in N?N[g]:void 0),this.data=N}else this.data=g}x(Hu,Va);function hf(){zn.call(this),this.status=1}x(hf,zn);function Mi(g){this.g=g}x(Mi,uf),Mi.prototype.ra=function(){Jt(this.g,"a")},Mi.prototype.qa=function(g){Jt(this.g,new Hu(g))},Mi.prototype.pa=function(g){Jt(this.g,new hf)},Mi.prototype.oa=function(){Jt(this.g,"b")},ac.prototype.createWebChannel=ac.prototype.g,Dn.prototype.send=Dn.prototype.o,Dn.prototype.open=Dn.prototype.m,Dn.prototype.close=Dn.prototype.close,XN=function(){return new ac},KN=function(){return Vs()},YN=Hn,Mv={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},lr.NO_ERROR=0,lr.TIMEOUT=8,lr.HTTP_ERROR=6,km=lr,xr.COMPLETE="complete",WN=xr,Uo.EventType=ra,ra.OPEN="a",ra.CLOSE="b",ra.ERROR="c",ra.MESSAGE="d",Ot.prototype.listen=Ot.prototype.J,zh=Uo,Zt.prototype.listenOnce=Zt.prototype.K,Zt.prototype.getLastError=Zt.prototype.Ha,Zt.prototype.getLastErrorCode=Zt.prototype.ya,Zt.prototype.getStatus=Zt.prototype.ca,Zt.prototype.getResponseJson=Zt.prototype.La,Zt.prototype.getResponseText=Zt.prototype.la,Zt.prototype.send=Zt.prototype.ea,Zt.prototype.setWithCredentials=Zt.prototype.Fa,$N=Zt}).apply(typeof fm<"u"?fm:typeof self<"u"?self:typeof window<"u"?window:{});const DE="@firebase/firestore",IE="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Tn.UNAUTHENTICATED=new Tn(null),Tn.GOOGLE_CREDENTIALS=new Tn("google-credentials-uid"),Tn.FIRST_PARTY=new Tn("first-party-uid"),Tn.MOCK_USER=new Tn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mu="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Il=new cx("@firebase/firestore");function Vc(){return Il.logLevel}function $e(t,...e){if(Il.logLevel<=yt.DEBUG){const r=e.map(_x);Il.debug(`Firestore (${mu}): ${t}`,...r)}}function vi(t,...e){if(Il.logLevel<=yt.ERROR){const r=e.map(_x);Il.error(`Firestore (${mu}): ${t}`,...r)}}function nu(t,...e){if(Il.logLevel<=yt.WARN){const r=e.map(_x);Il.warn(`Firestore (${mu}): ${t}`,...r)}}function _x(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(r){return JSON.stringify(r)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function st(t,e,r){let n="Unexpected state";typeof e=="string"?n=e:r=e,QN(t,n,r)}function QN(t,e,r){let n=`FIRESTORE (${mu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw vi(n),new Error(n)}function kt(t,e,r,n){let a="Unexpected state";typeof r=="string"?a=r:n=r,t||QN(e,a,n)}function ht(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const we={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class qe extends wi{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(){this.promise=new Promise(((e,r)=>{this.resolve=e,this.reject=r}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class v3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable((()=>r(Tn.UNAUTHENTICATED)))}shutdown(){}}class x3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable((()=>r(this.token.user)))}shutdown(){this.changeListener=null}}class y3{constructor(e){this.t=e,this.currentUser=Tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){kt(this.o===void 0,42304);let n=this.i;const a=m=>this.i!==n?(n=this.i,r(m)):Promise.resolve();let o=new ui;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ui,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const m=o;e.enqueueRetryable((async()=>{await m.promise,await a(this.currentUser)}))},h=m=>{$e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((m=>h(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?h(m):($e("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ui)}}),0),c()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then((n=>this.i!==e?($e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(kt(typeof n.accessToken=="string",31837,{l:n}),new JN(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return kt(e===null||typeof e=="string",2055,{h:e}),new Tn(e)}}class _3{constructor(e,r,n){this.P=e,this.T=r,this.I=n,this.type="FirstParty",this.user=Tn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class E3{constructor(e,r,n){this.P=e,this.T=r,this.I=n}getToken(){return Promise.resolve(new _3(this.P,this.T,this.I))}start(e,r){e.enqueueRetryable((()=>r(Tn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class kE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class T3{constructor(e,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ma(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,r){kt(this.o===void 0,3512);const n=o=>{o.error!=null&&$e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,$e("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?r(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>n(o)))};const a=o=>{$e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>a(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?a(o):$e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new kE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((r=>r?(kt(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new kE(r.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w3(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const a=w3(40);for(let o=0;o<a.length;++o)n.length<20&&a[o]<r&&(n+=e.charAt(a[o]%62))}return n}}function _t(t,e){return t<e?-1:t>e?1:0}function Pv(t,e){const r=Math.min(t.length,e.length);for(let n=0;n<r;n++){const a=t.charAt(n),o=e.charAt(n);if(a!==o)return cv(a)===cv(o)?_t(a,o):cv(a)?1:-1}return _t(t.length,e.length)}const N3=55296,b3=57343;function cv(t){const e=t.charCodeAt(0);return e>=N3&&e<=b3}function au(t,e,r){return t.length===e.length&&t.every(((n,a)=>r(n,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE="__name__";class bs{constructor(e,r,n){r===void 0?r=0:r>e.length&&st(637,{offset:r,range:e.length}),n===void 0?n=e.length-r:n>e.length-r&&st(1746,{length:n,range:e.length-r}),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return bs.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof bs?e.forEach((n=>{r.push(n)})):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let a=0;a<n;a++){const o=bs.compareSegments(e.get(a),r.get(a));if(o!==0)return o}return _t(e.length,r.length)}static compareSegments(e,r){const n=bs.isNumericId(e),a=bs.isNumericId(r);return n&&!a?-1:!n&&a?1:n&&a?bs.extractNumericId(e).compare(bs.extractNumericId(r)):Pv(e,r)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Eo.fromString(e.substring(4,e.length-2))}}class tr extends bs{construct(e,r,n){return new tr(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new qe(we.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter((a=>a.length>0)))}return new tr(r)}static emptyPath(){return new tr([])}}const S3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class cn extends bs{construct(e,r,n){return new cn(e,r,n)}static isValidIdentifier(e){return S3.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),cn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===OE}static keyField(){return new cn([OE])}static fromServerFormat(e){const r=[];let n="",a=0;const o=()=>{if(n.length===0)throw new qe(we.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let c=!1;for(;a<e.length;){const h=e[a];if(h==="\\"){if(a+1===e.length)throw new qe(we.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new qe(we.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=m,a+=2}else h==="`"?(c=!c,a++):h!=="."||c?(n+=h,a++):(o(),a++)}if(o(),c)throw new qe(we.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new cn(r)}static emptyPath(){return new cn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.path=e}static fromPath(e){return new et(tr.fromString(e))}static fromName(e){return new et(tr.fromString(e).popFirst(5))}static empty(){return new et(tr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&tr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return tr.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new et(new tr(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZN(t,e,r){if(!r)throw new qe(we.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function A3(t,e,r,n){if(e===!0&&n===!0)throw new qe(we.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function ME(t){if(!et.isDocumentKey(t))throw new qe(we.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function PE(t){if(et.isDocumentKey(t))throw new qe(we.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function eb(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function C0(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":st(12329,{type:typeof t})}function os(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new qe(we.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=C0(t);throw new qe(we.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dr(t,e){const r={typeString:t};return e&&(r.value=e),r}function kd(t,e){if(!eb(t))throw new qe(we.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in e)if(e[n]){const a=e[n].typeString,o="value"in e[n]?{value:e[n].value}:void 0;if(!(n in t)){r=`JSON missing required field: '${n}'`;break}const c=t[n];if(a&&typeof c!==a){r=`JSON field '${n}' must be a ${a}.`;break}if(o!==void 0&&c!==o.value){r=`Expected '${n}' field to equal '${o.value}'`;break}}if(r)throw new qe(we.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FE=-62135596800,LE=1e6;class nt{static now(){return nt.fromMillis(Date.now())}static fromDate(e){return nt.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor((e-1e3*r)*LE);return new nt(r,n)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new qe(we.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new qe(we.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<FE)throw new qe(we.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new qe(we.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/LE}_compareTo(e){return this.seconds===e.seconds?_t(this.nanoseconds,e.nanoseconds):_t(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:nt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(kd(e,nt._jsonSchema))return new nt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-FE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}nt._jsonSchemaVersion="firestore/timestamp/1.0",nt._jsonSchema={type:Dr("string",nt._jsonSchemaVersion),seconds:Dr("number"),nanoseconds:Dr("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{static fromTimestamp(e){return new lt(e)}static min(){return new lt(new nt(0,0))}static max(){return new lt(new nt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hd=-1;function C3(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,a=lt.fromTimestamp(n===1e9?new nt(r+1,0):new nt(r,n));return new No(a,et.empty(),e)}function j3(t){return new No(t.readTime,t.key,hd)}class No{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new No(lt.min(),et.empty(),hd)}static max(){return new No(lt.max(),et.empty(),hd)}}function R3(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=et.comparator(t.documentKey,e.documentKey),r!==0?r:_t(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class I3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pu(t){if(t.code!==we.FAILED_PRECONDITION||t.message!==D3)throw t;$e("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)}),(r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)}))}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&st(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new be(((n,a)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(n,a)},this.catchCallback=o=>{this.wrapFailure(r,o).next(n,a)}}))}toPromise(){return new Promise(((e,r)=>{this.next(e,r)}))}wrapUserFunction(e){try{const r=e();return r instanceof be?r:be.resolve(r)}catch(r){return be.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction((()=>e(r))):be.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction((()=>e(r))):be.reject(r)}static resolve(e){return new be(((r,n)=>{r(e)}))}static reject(e){return new be(((r,n)=>{n(e)}))}static waitFor(e){return new be(((r,n)=>{let a=0,o=0,c=!1;e.forEach((h=>{++a,h.next((()=>{++o,c&&o===a&&r()}),(m=>n(m)))})),c=!0,o===a&&r()}))}static or(e){let r=be.resolve(!1);for(const n of e)r=r.next((a=>a?be.resolve(a):n()));return r}static forEach(e,r){const n=[];return e.forEach(((a,o)=>{n.push(r.call(this,a,o))})),this.waitFor(n)}static mapArray(e,r){return new be(((n,a)=>{const o=e.length,c=new Array(o);let h=0;for(let m=0;m<o;m++){const d=m;r(e[d]).next((p=>{c[d]=p,++h,h===o&&n(c)}),(p=>a(p)))}}))}static doWhile(e,r){return new be(((n,a)=>{const o=()=>{e()===!0?r().next((()=>{o()}),a):n()};o()}))}}function k3(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function gu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>r.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}j0.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx=-1;function R0(t){return t==null}function Km(t){return t===0&&1/t==-1/0}function O3(t){return typeof t=="number"&&Number.isInteger(t)&&!Km(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tb="";function M3(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=VE(e)),e=P3(t.get(r),e);return VE(e)}function P3(t,e){let r=e;const n=t.length;for(let a=0;a<n;a++){const o=t.charAt(a);switch(o){case"\0":r+="";break;case tb:r+="";break;default:r+=o}}return r}function VE(t){return t+tb+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BE(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Fo(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function rb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e,r){this.comparator=e,this.root=r||ln.EMPTY}insert(e,r){return new hr(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,ln.BLACK,null,null))}remove(e){return new hr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ln.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return r+n.left.size;a<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((r,n)=>(e(r,n),!1)))}toString(){const e=[];return this.inorderTraversal(((r,n)=>(e.push(`${r}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new mm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new mm(this.root,e,this.comparator,!1)}getReverseIterator(){return new mm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new mm(this.root,e,this.comparator,!0)}}class mm{constructor(e,r,n,a){this.isReverse=a,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=r?n(e.key,r):1,r&&a&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ln{constructor(e,r,n,a,o){this.key=e,this.value=r,this.color=n??ln.RED,this.left=a??ln.EMPTY,this.right=o??ln.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,a,o){return new ln(e??this.key,r??this.value,n??this.color,a??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let a=this;const o=n(e,a.key);return a=o<0?a.copy(null,null,null,a.left.insert(e,r,n),null):o===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(e,r,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return ln.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,a=this;if(r(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(e,a.key)===0){if(a.right.isEmpty())return ln.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ln.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ln.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw st(43730,{key:this.key,value:this.value});if(this.right.isRed())throw st(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw st(27949);return e+(this.isRed()?0:1)}}ln.EMPTY=null,ln.RED=!0,ln.BLACK=!1;ln.EMPTY=new class{constructor(){this.size=0}get key(){throw st(57766)}get value(){throw st(16141)}get color(){throw st(16727)}get left(){throw st(29726)}get right(){throw st(36894)}copy(e,r,n,a,o){return this}insert(e,r,n){return new ln(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e){this.comparator=e,this.data=new hr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((r,n)=>(e(r),!1)))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,e[1])>=0)return;r(a.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new UE(this.data.getIterator())}getIteratorFrom(e){return new UE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach((n=>{r=r.add(n)})),r}isEqual(e){if(!(e instanceof zr)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,o=n.getNext().key;if(this.comparator(a,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((r=>{e.push(r)})),e}toString(){const e=[];return this.forEach((r=>e.push(r))),"SortedSet("+e.toString()+")"}copy(e){const r=new zr(this.comparator);return r.data=e,r}}class UE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e){this.fields=e,e.sort(cn.comparator)}static empty(){return new va([])}unionWith(e){let r=new zr(cn.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new va(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return au(this.fields,e.fields,((r,n)=>r.isEqual(n)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.binaryString=e}static fromBase64String(e){const r=(function(a){try{return atob(a)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new nb("Invalid base64 string: "+o):o}})(e);return new pn(r)}static fromUint8Array(e){const r=(function(a){let o="";for(let c=0;c<a.length;++c)o+=String.fromCharCode(a[c]);return o})(e);return new pn(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(r){return btoa(r)})(this.binaryString)}toUint8Array(){return(function(r){const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return _t(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pn.EMPTY_BYTE_STRING=new pn("");const F3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bo(t){if(kt(!!t,39018),typeof t=="string"){let e=0;const r=F3.exec(t);if(kt(!!r,46558,{timestamp:t}),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),e=Number(a)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Tr(t.seconds),nanos:Tr(t.nanos)}}function Tr(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function So(t){return typeof t=="string"?pn.fromBase64String(t):pn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab="server_timestamp",sb="__type__",ib="__previous_value__",ob="__local_write_time__";function wx(t){return(t?.mapValue?.fields||{})[sb]?.stringValue===ab}function D0(t){const e=t.mapValue.fields[ib];return wx(e)?D0(e):e}function dd(t){const e=bo(t.mapValue.fields[ob].timestampValue);return new nt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{constructor(e,r,n,a,o,c,h,m,d,p){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=a,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=m,this.useFetchStreams=d,this.isUsingEmulator=p}}const Xm="(default)";class fd{constructor(e,r){this.projectId=e,this.database=r||Xm}static empty(){return new fd("","")}get isDefaultDatabase(){return this.database===Xm}isEqual(e){return e instanceof fd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lb="__type__",V3="__max__",pm={mapValue:{}},cb="__vector__",Qm="value";function Ao(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?wx(t)?4:U3(t)?9007199254740991:B3(t)?10:11:st(28295,{value:t})}function ks(t,e){if(t===e)return!0;const r=Ao(t);if(r!==Ao(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return dd(t).isEqual(dd(e));case 3:return(function(a,o){if(typeof a.timestampValue=="string"&&typeof o.timestampValue=="string"&&a.timestampValue.length===o.timestampValue.length)return a.timestampValue===o.timestampValue;const c=bo(a.timestampValue),h=bo(o.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(a,o){return So(a.bytesValue).isEqual(So(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(a,o){return Tr(a.geoPointValue.latitude)===Tr(o.geoPointValue.latitude)&&Tr(a.geoPointValue.longitude)===Tr(o.geoPointValue.longitude)})(t,e);case 2:return(function(a,o){if("integerValue"in a&&"integerValue"in o)return Tr(a.integerValue)===Tr(o.integerValue);if("doubleValue"in a&&"doubleValue"in o){const c=Tr(a.doubleValue),h=Tr(o.doubleValue);return c===h?Km(c)===Km(h):isNaN(c)&&isNaN(h)}return!1})(t,e);case 9:return au(t.arrayValue.values||[],e.arrayValue.values||[],ks);case 10:case 11:return(function(a,o){const c=a.mapValue.fields||{},h=o.mapValue.fields||{};if(BE(c)!==BE(h))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(h[m]===void 0||!ks(c[m],h[m])))return!1;return!0})(t,e);default:return st(52216,{left:t})}}function md(t,e){return(t.values||[]).find((r=>ks(r,e)))!==void 0}function su(t,e){if(t===e)return 0;const r=Ao(t),n=Ao(e);if(r!==n)return _t(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return _t(t.booleanValue,e.booleanValue);case 2:return(function(o,c){const h=Tr(o.integerValue||o.doubleValue),m=Tr(c.integerValue||c.doubleValue);return h<m?-1:h>m?1:h===m?0:isNaN(h)?isNaN(m)?0:-1:1})(t,e);case 3:return zE(t.timestampValue,e.timestampValue);case 4:return zE(dd(t),dd(e));case 5:return Pv(t.stringValue,e.stringValue);case 6:return(function(o,c){const h=So(o),m=So(c);return h.compareTo(m)})(t.bytesValue,e.bytesValue);case 7:return(function(o,c){const h=o.split("/"),m=c.split("/");for(let d=0;d<h.length&&d<m.length;d++){const p=_t(h[d],m[d]);if(p!==0)return p}return _t(h.length,m.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,c){const h=_t(Tr(o.latitude),Tr(c.latitude));return h!==0?h:_t(Tr(o.longitude),Tr(c.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return HE(t.arrayValue,e.arrayValue);case 10:return(function(o,c){const h=o.fields||{},m=c.fields||{},d=h[Qm]?.arrayValue,p=m[Qm]?.arrayValue,x=_t(d?.values?.length||0,p?.values?.length||0);return x!==0?x:HE(d,p)})(t.mapValue,e.mapValue);case 11:return(function(o,c){if(o===pm.mapValue&&c===pm.mapValue)return 0;if(o===pm.mapValue)return 1;if(c===pm.mapValue)return-1;const h=o.fields||{},m=Object.keys(h),d=c.fields||{},p=Object.keys(d);m.sort(),p.sort();for(let x=0;x<m.length&&x<p.length;++x){const y=Pv(m[x],p[x]);if(y!==0)return y;const E=su(h[m[x]],d[p[x]]);if(E!==0)return E}return _t(m.length,p.length)})(t.mapValue,e.mapValue);default:throw st(23264,{he:r})}}function zE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return _t(t,e);const r=bo(t),n=bo(e),a=_t(r.seconds,n.seconds);return a!==0?a:_t(r.nanos,n.nanos)}function HE(t,e){const r=t.values||[],n=e.values||[];for(let a=0;a<r.length&&a<n.length;++a){const o=su(r[a],n[a]);if(o)return o}return _t(r.length,n.length)}function iu(t){return Fv(t)}function Fv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(r){const n=bo(r);return`time(${n.seconds},${n.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(r){return So(r).toBase64()})(t.bytesValue):"referenceValue"in t?(function(r){return et.fromName(r).toString()})(t.referenceValue):"geoPointValue"in t?(function(r){return`geo(${r.latitude},${r.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(r){let n="[",a=!0;for(const o of r.values||[])a?a=!1:n+=",",n+=Fv(o);return n+"]"})(t.arrayValue):"mapValue"in t?(function(r){const n=Object.keys(r.fields||{}).sort();let a="{",o=!0;for(const c of n)o?o=!1:a+=",",a+=`${c}:${Fv(r.fields[c])}`;return a+"}"})(t.mapValue):st(61005,{value:t})}function Om(t){switch(Ao(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=D0(t);return e?16+Om(e):16;case 5:return 2*t.stringValue.length;case 6:return So(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((a,o)=>a+Om(o)),0)})(t.arrayValue);case 10:case 11:return(function(n){let a=0;return Fo(n.fields,((o,c)=>{a+=o.length+Om(c)})),a})(t.mapValue);default:throw st(13486,{value:t})}}function GE(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Lv(t){return!!t&&"integerValue"in t}function Nx(t){return!!t&&"arrayValue"in t}function qE(t){return!!t&&"nullValue"in t}function $E(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Mm(t){return!!t&&"mapValue"in t}function B3(t){return(t?.mapValue?.fields||{})[lb]?.stringValue===cb}function Kh(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Fo(t.mapValue.fields,((r,n)=>e.mapValue.fields[r]=Kh(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Kh(t.arrayValue.values[r]);return e}return{...t}}function U3(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===V3}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this.value=e}static empty(){return new Kn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!Mm(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Kh(r)}setAll(e){let r=cn.emptyPath(),n={},a=[];e.forEach(((c,h)=>{if(!r.isImmediateParentOf(h)){const m=this.getFieldsMap(r);this.applyChanges(m,n,a),n={},a=[],r=h.popLast()}c?n[h.lastSegment()]=Kh(c):a.push(h.lastSegment())}));const o=this.getFieldsMap(r);this.applyChanges(o,n,a)}delete(e){const r=this.field(e.popLast());Mm(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return ks(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let a=r.mapValue.fields[e.get(n)];Mm(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=a),r=a}return r.mapValue.fields}applyChanges(e,r,n){Fo(r,((a,o)=>e[a]=o));for(const a of n)delete e[a]}clone(){return new Kn(Kh(this.value))}}function ub(t){const e=[];return Fo(t.fields,((r,n)=>{const a=new cn([r]);if(Mm(n)){const o=ub(n.mapValue).fields;if(o.length===0)e.push(a);else for(const c of o)e.push(a.child(c))}else e.push(a)})),new va(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e,r,n,a,o,c,h){this.key=e,this.documentType=r,this.version=n,this.readTime=a,this.createTime=o,this.data=c,this.documentState=h}static newInvalidDocument(e){return new wn(e,0,lt.min(),lt.min(),lt.min(),Kn.empty(),0)}static newFoundDocument(e,r,n,a){return new wn(e,1,r,lt.min(),n,a,0)}static newNoDocument(e,r){return new wn(e,2,r,lt.min(),lt.min(),Kn.empty(),0)}static newUnknownDocument(e,r){return new wn(e,3,r,lt.min(),lt.min(),Kn.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(lt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=lt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof wn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(e,r){this.position=e,this.inclusive=r}}function WE(t,e,r){let n=0;for(let a=0;a<t.position.length;a++){const o=e[a],c=t.position[a];if(o.field.isKeyField()?n=et.comparator(et.fromName(c.referenceValue),r.key):n=su(c,r.data.field(o.field)),o.dir==="desc"&&(n*=-1),n!==0)break}return n}function YE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!ks(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e,r="asc"){this.field=e,this.dir=r}}function z3(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hb=class{};class Rr extends hb{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new G3(e,r,n):r==="array-contains"?new W3(e,n):r==="in"?new Y3(e,n):r==="not-in"?new K3(e,n):r==="array-contains-any"?new X3(e,n):new Rr(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new q3(e,n):new $3(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(su(r,this.value)):r!==null&&Ao(this.value)===Ao(r)&&this.matchesComparison(su(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return st(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ls extends hb{constructor(e,r){super(),this.filters=e,this.op=r,this.Pe=null}static create(e,r){return new ls(e,r)}matches(e){return db(this)?this.filters.find((r=>!r.matches(e)))===void 0:this.filters.find((r=>r.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,r)=>e.concat(r.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function db(t){return t.op==="and"}function fb(t){return H3(t)&&db(t)}function H3(t){for(const e of t.filters)if(e instanceof ls)return!1;return!0}function Vv(t){if(t instanceof Rr)return t.field.canonicalString()+t.op.toString()+iu(t.value);if(fb(t))return t.filters.map((e=>Vv(e))).join(",");{const e=t.filters.map((r=>Vv(r))).join(",");return`${t.op}(${e})`}}function mb(t,e){return t instanceof Rr?(function(n,a){return a instanceof Rr&&n.op===a.op&&n.field.isEqual(a.field)&&ks(n.value,a.value)})(t,e):t instanceof ls?(function(n,a){return a instanceof ls&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce(((o,c,h)=>o&&mb(c,a.filters[h])),!0):!1})(t,e):void st(19439)}function pb(t){return t instanceof Rr?(function(r){return`${r.field.canonicalString()} ${r.op} ${iu(r.value)}`})(t):t instanceof ls?(function(r){return r.op.toString()+" {"+r.getFilters().map(pb).join(" ,")+"}"})(t):"Filter"}class G3 extends Rr{constructor(e,r,n){super(e,r,n),this.key=et.fromName(n.referenceValue)}matches(e){const r=et.comparator(e.key,this.key);return this.matchesComparison(r)}}class q3 extends Rr{constructor(e,r){super(e,"in",r),this.keys=gb("in",r)}matches(e){return this.keys.some((r=>r.isEqual(e.key)))}}class $3 extends Rr{constructor(e,r){super(e,"not-in",r),this.keys=gb("not-in",r)}matches(e){return!this.keys.some((r=>r.isEqual(e.key)))}}function gb(t,e){return(e.arrayValue?.values||[]).map((r=>et.fromName(r.referenceValue)))}class W3 extends Rr{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return Nx(r)&&md(r.arrayValue,this.value)}}class Y3 extends Rr{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&md(this.value.arrayValue,r)}}class K3 extends Rr{constructor(e,r){super(e,"not-in",r)}matches(e){if(md(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&r.nullValue===void 0&&!md(this.value.arrayValue,r)}}class X3 extends Rr{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!Nx(r)||!r.arrayValue.values)&&r.arrayValue.values.some((n=>md(this.value.arrayValue,n)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{constructor(e,r=null,n=[],a=[],o=null,c=null,h=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=a,this.limit=o,this.startAt=c,this.endAt=h,this.Te=null}}function KE(t,e=null,r=[],n=[],a=null,o=null,c=null){return new Q3(t,e,r,n,a,o,c)}function bx(t){const e=ht(t);if(e.Te===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map((n=>Vv(n))).join(","),r+="|ob:",r+=e.orderBy.map((n=>(function(o){return o.field.canonicalString()+o.dir})(n))).join(","),R0(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map((n=>iu(n))).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map((n=>iu(n))).join(",")),e.Te=r}return e.Te}function Sx(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!z3(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!mb(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!YE(t.startAt,e.startAt)&&YE(t.endAt,e.endAt)}function Bv(t){return et.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e,r=null,n=[],a=[],o=null,c="F",h=null,m=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=a,this.limit=o,this.limitType=c,this.startAt=h,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function J3(t,e,r,n,a,o,c,h){return new vu(t,e,r,n,a,o,c,h)}function Ax(t){return new vu(t)}function XE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function vb(t){return t.collectionGroup!==null}function Xh(t){const e=ht(t);if(e.Ie===null){e.Ie=[];const r=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),r.add(o.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new zr(cn.comparator);return c.filters.forEach((m=>{m.getFlattenedFilters().forEach((d=>{d.isInequality()&&(h=h.add(d.field))}))})),h})(e).forEach((o=>{r.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new pd(o,n))})),r.has(cn.keyField().canonicalString())||e.Ie.push(new pd(cn.keyField(),n))}return e.Ie}function js(t){const e=ht(t);return e.Ee||(e.Ee=Z3(e,Xh(t))),e.Ee}function Z3(t,e){if(t.limitType==="F")return KE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((a=>{const o=a.dir==="desc"?"asc":"desc";return new pd(a.field,o)}));const r=t.endAt?new Jm(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new Jm(t.startAt.position,t.startAt.inclusive):null;return KE(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function Uv(t,e){const r=t.filters.concat([e]);return new vu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function zv(t,e,r){return new vu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function I0(t,e){return Sx(js(t),js(e))&&t.limitType===e.limitType}function xb(t){return`${bx(js(t))}|lt:${t.limitType}`}function Bc(t){return`Query(target=${(function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map((a=>pb(a))).join(", ")}]`),R0(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map((a=>iu(a))).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map((a=>iu(a))).join(",")),`Target(${n})`})(js(t))}; limitType=${t.limitType})`}function k0(t,e){return e.isFoundDocument()&&(function(n,a){const o=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(o):et.isDocumentKey(n.path)?n.path.isEqual(o):n.path.isImmediateParentOf(o)})(t,e)&&(function(n,a){for(const o of Xh(n))if(!o.field.isKeyField()&&a.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(n,a){for(const o of n.filters)if(!o.matches(a))return!1;return!0})(t,e)&&(function(n,a){return!(n.startAt&&!(function(c,h,m){const d=WE(c,h,m);return c.inclusive?d<=0:d<0})(n.startAt,Xh(n),a)||n.endAt&&!(function(c,h,m){const d=WE(c,h,m);return c.inclusive?d>=0:d>0})(n.endAt,Xh(n),a))})(t,e)}function ek(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function yb(t){return(e,r)=>{let n=!1;for(const a of Xh(t)){const o=tk(a,e,r);if(o!==0)return o;n=n||a.field.isKeyField()}return 0}}function tk(t,e,r){const n=t.field.isKeyField()?et.comparator(e.key,r.key):(function(o,c,h){const m=c.data.field(o),d=h.data.field(o);return m!==null&&d!==null?su(m,d):st(42886)})(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return st(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[a,o]of n)if(this.equalsFn(a,e))return o}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],e))return void(a[o]=[e,r]);a.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],e))return n.length===1?delete this.inner[r]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Fo(this.inner,((r,n)=>{for(const[a,o]of n)e(a,o)}))}isEmpty(){return rb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rk=new hr(et.comparator);function xi(){return rk}const _b=new hr(et.comparator);function Hh(...t){let e=_b;for(const r of t)e=e.insert(r.key,r);return e}function Eb(t){let e=_b;return t.forEach(((r,n)=>e=e.insert(r,n.overlayedDocument))),e}function El(){return Qh()}function Tb(){return Qh()}function Qh(){return new Ll((t=>t.toString()),((t,e)=>t.isEqual(e)))}const nk=new hr(et.comparator),ak=new zr(et.comparator);function Et(...t){let e=ak;for(const r of t)e=e.add(r);return e}const sk=new zr(_t);function ik(){return sk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cx(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Km(e)?"-0":e}}function wb(t){return{integerValue:""+t}}function ok(t,e){return O3(e)?wb(e):Cx(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(){this._=void 0}}function lk(t,e,r){return t instanceof Zm?(function(a,o){const c={fields:{[sb]:{stringValue:ab},[ob]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return o&&wx(o)&&(o=D0(o)),o&&(c.fields[ib]=o),{mapValue:c}})(r,e):t instanceof gd?bb(t,e):t instanceof vd?Sb(t,e):(function(a,o){const c=Nb(a,o),h=QE(c)+QE(a.Ae);return Lv(c)&&Lv(a.Ae)?wb(h):Cx(a.serializer,h)})(t,e)}function ck(t,e,r){return t instanceof gd?bb(t,e):t instanceof vd?Sb(t,e):r}function Nb(t,e){return t instanceof e0?(function(n){return Lv(n)||(function(o){return!!o&&"doubleValue"in o})(n)})(e)?e:{integerValue:0}:null}class Zm extends O0{}class gd extends O0{constructor(e){super(),this.elements=e}}function bb(t,e){const r=Ab(e);for(const n of t.elements)r.some((a=>ks(a,n)))||r.push(n);return{arrayValue:{values:r}}}class vd extends O0{constructor(e){super(),this.elements=e}}function Sb(t,e){let r=Ab(e);for(const n of t.elements)r=r.filter((a=>!ks(a,n)));return{arrayValue:{values:r}}}class e0 extends O0{constructor(e,r){super(),this.serializer=e,this.Ae=r}}function QE(t){return Tr(t.integerValue||t.doubleValue)}function Ab(t){return Nx(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function uk(t,e){return t.field.isEqual(e.field)&&(function(n,a){return n instanceof gd&&a instanceof gd||n instanceof vd&&a instanceof vd?au(n.elements,a.elements,ks):n instanceof e0&&a instanceof e0?ks(n.Ae,a.Ae):n instanceof Zm&&a instanceof Zm})(t.transform,e.transform)}class hk{constructor(e,r){this.version=e,this.transformResults=r}}class Fa{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Fa}static exists(e){return new Fa(void 0,e)}static updateTime(e){return new Fa(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Pm(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class M0{}function Cb(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new jx(t.key,Fa.none()):new Od(t.key,t.data,Fa.none());{const r=t.data,n=Kn.empty();let a=new zr(cn.comparator);for(let o of e.fields)if(!a.has(o)){let c=r.field(o);c===null&&o.length>1&&(o=o.popLast(),c=r.field(o)),c===null?n.delete(o):n.set(o,c),a=a.add(o)}return new Lo(t.key,n,new va(a.toArray()),Fa.none())}}function dk(t,e,r){t instanceof Od?(function(a,o,c){const h=a.value.clone(),m=ZE(a.fieldTransforms,o,c.transformResults);h.setAll(m),o.convertToFoundDocument(c.version,h).setHasCommittedMutations()})(t,e,r):t instanceof Lo?(function(a,o,c){if(!Pm(a.precondition,o))return void o.convertToUnknownDocument(c.version);const h=ZE(a.fieldTransforms,o,c.transformResults),m=o.data;m.setAll(jb(a)),m.setAll(h),o.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(t,e,r):(function(a,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,r)}function Jh(t,e,r,n){return t instanceof Od?(function(o,c,h,m){if(!Pm(o.precondition,c))return h;const d=o.value.clone(),p=eT(o.fieldTransforms,m,c);return d.setAll(p),c.convertToFoundDocument(c.version,d).setHasLocalMutations(),null})(t,e,r,n):t instanceof Lo?(function(o,c,h,m){if(!Pm(o.precondition,c))return h;const d=eT(o.fieldTransforms,m,c),p=c.data;return p.setAll(jb(o)),p.setAll(d),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((x=>x.field)))})(t,e,r,n):(function(o,c,h){return Pm(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h})(t,e,r)}function fk(t,e){let r=null;for(const n of t.fieldTransforms){const a=e.data.field(n.field),o=Nb(n.transform,a||null);o!=null&&(r===null&&(r=Kn.empty()),r.set(n.field,o))}return r||null}function JE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&au(n,a,((o,c)=>uk(o,c)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Od extends M0{constructor(e,r,n,a=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Lo extends M0{constructor(e,r,n,a,o=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=a,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function jb(t){const e=new Map;return t.fieldMask.fields.forEach((r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}})),e}function ZE(t,e,r){const n=new Map;kt(t.length===r.length,32656,{Re:r.length,Ve:t.length});for(let a=0;a<r.length;a++){const o=t[a],c=o.transform,h=e.data.field(o.field);n.set(o.field,ck(c,h,r[a]))}return n}function eT(t,e,r){const n=new Map;for(const a of t){const o=a.transform,c=r.data.field(a.field);n.set(a.field,lk(o,c,e))}return n}class jx extends M0{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class mk extends M0{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(e,r,n,a){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const o=this.mutations[a];o.key.isEqual(e.key)&&dk(o,e,n[a])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=Jh(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=Jh(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=Tb();return this.mutations.forEach((a=>{const o=e.get(a.key),c=o.overlayedDocument;let h=this.applyToLocalView(c,o.mutatedFields);h=r.has(a.key)?null:h;const m=Cb(c,h);m!==null&&n.set(a.key,m),c.isValidDocument()||c.convertToNoDocument(lt.min())})),n}keys(){return this.mutations.reduce(((e,r)=>e.add(r.key)),Et())}isEqual(e){return this.batchId===e.batchId&&au(this.mutations,e.mutations,((r,n)=>JE(r,n)))&&au(this.baseMutations,e.baseMutations,((r,n)=>JE(r,n)))}}class Rx{constructor(e,r,n,a){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=a}static from(e,r,n){kt(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let a=(function(){return nk})();const o=e.mutations;for(let c=0;c<o.length;c++)a=a.insert(o[c].key,n[c].version);return new Rx(e,r,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jr,Nt;function xk(t){switch(t){case we.OK:return st(64938);case we.CANCELLED:case we.UNKNOWN:case we.DEADLINE_EXCEEDED:case we.RESOURCE_EXHAUSTED:case we.INTERNAL:case we.UNAVAILABLE:case we.UNAUTHENTICATED:return!1;case we.INVALID_ARGUMENT:case we.NOT_FOUND:case we.ALREADY_EXISTS:case we.PERMISSION_DENIED:case we.FAILED_PRECONDITION:case we.ABORTED:case we.OUT_OF_RANGE:case we.UNIMPLEMENTED:case we.DATA_LOSS:return!0;default:return st(15467,{code:t})}}function Rb(t){if(t===void 0)return vi("GRPC error has no .code"),we.UNKNOWN;switch(t){case jr.OK:return we.OK;case jr.CANCELLED:return we.CANCELLED;case jr.UNKNOWN:return we.UNKNOWN;case jr.DEADLINE_EXCEEDED:return we.DEADLINE_EXCEEDED;case jr.RESOURCE_EXHAUSTED:return we.RESOURCE_EXHAUSTED;case jr.INTERNAL:return we.INTERNAL;case jr.UNAVAILABLE:return we.UNAVAILABLE;case jr.UNAUTHENTICATED:return we.UNAUTHENTICATED;case jr.INVALID_ARGUMENT:return we.INVALID_ARGUMENT;case jr.NOT_FOUND:return we.NOT_FOUND;case jr.ALREADY_EXISTS:return we.ALREADY_EXISTS;case jr.PERMISSION_DENIED:return we.PERMISSION_DENIED;case jr.FAILED_PRECONDITION:return we.FAILED_PRECONDITION;case jr.ABORTED:return we.ABORTED;case jr.OUT_OF_RANGE:return we.OUT_OF_RANGE;case jr.UNIMPLEMENTED:return we.UNIMPLEMENTED;case jr.DATA_LOSS:return we.DATA_LOSS;default:return st(39323,{code:t})}}(Nt=jr||(jr={}))[Nt.OK=0]="OK",Nt[Nt.CANCELLED=1]="CANCELLED",Nt[Nt.UNKNOWN=2]="UNKNOWN",Nt[Nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Nt[Nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Nt[Nt.NOT_FOUND=5]="NOT_FOUND",Nt[Nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Nt[Nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Nt[Nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Nt[Nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Nt[Nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Nt[Nt.ABORTED=10]="ABORTED",Nt[Nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Nt[Nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Nt[Nt.INTERNAL=13]="INTERNAL",Nt[Nt.UNAVAILABLE=14]="UNAVAILABLE",Nt[Nt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _k=new Eo([4294967295,4294967295],0);function tT(t){const e=yk().encode(t),r=new qN;return r.update(e),new Uint8Array(r.digest())}function rT(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),a=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Eo([r,n],0),new Eo([a,o],0)]}class Dx{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Gh(`Invalid padding: ${r}`);if(n<0)throw new Gh(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Gh(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new Gh(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*e.length-r,this.pe=Eo.fromNumber(this.ge)}ye(e,r,n){let a=e.add(r.multiply(Eo.fromNumber(n)));return a.compare(_k)===1&&(a=new Eo([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const r=tT(e),[n,a]=rT(r);for(let o=0;o<this.hashCount;o++){const c=this.ye(n,a,o);if(!this.we(c))return!1}return!0}static create(e,r,n){const a=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),c=new Dx(o,a,r);return n.forEach((h=>c.insert(h))),c}insert(e){if(this.ge===0)return;const r=tT(e),[n,a]=rT(r);for(let o=0;o<this.hashCount;o++){const c=this.ye(n,a,o);this.Se(c)}}Se(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class Gh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e,r,n,a,o){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const a=new Map;return a.set(e,Md.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new P0(lt.min(),a,new hr(_t),xi(),Et())}}class Md{constructor(e,r,n,a,o){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Md(n,r,Et(),Et(),Et())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(e,r,n,a){this.be=e,this.removedTargetIds=r,this.key=n,this.De=a}}class Db{constructor(e,r){this.targetId=e,this.Ce=r}}class Ib{constructor(e,r,n=pn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=a}}class nT{constructor(){this.ve=0,this.Fe=aT(),this.Me=pn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Et(),r=Et(),n=Et();return this.Fe.forEach(((a,o)=>{switch(o){case 0:e=e.add(a);break;case 2:r=r.add(a);break;case 1:n=n.add(a);break;default:st(38017,{changeType:o})}})),new Md(this.Me,this.xe,e,r,n)}qe(){this.Oe=!1,this.Fe=aT()}Qe(e,r){this.Oe=!0,this.Fe=this.Fe.insert(e,r)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,kt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Ek{constructor(e){this.Ge=e,this.ze=new Map,this.je=xi(),this.Je=gm(),this.He=gm(),this.Ye=new hr(_t)}Ze(e){for(const r of e.be)e.De&&e.De.isFoundDocument()?this.Xe(r,e.De):this.et(r,e.key,e.De);for(const r of e.removedTargetIds)this.et(r,e.key,e.De)}tt(e){this.forEachTarget(e,(r=>{const n=this.nt(r);switch(e.state){case 0:this.rt(r)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(r)&&(this.it(r),n.Le(e.resumeToken));break;default:st(56790,{state:e.state})}}))}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.ze.forEach(((n,a)=>{this.rt(a)&&r(a)}))}st(e){const r=e.targetId,n=e.Ce.count,a=this.ot(r);if(a){const o=a.target;if(Bv(o))if(n===0){const c=new et(o.path);this.et(r,c,wn.newNoDocument(c,lt.min()))}else kt(n===1,20013,{expectedCount:n});else{const c=this._t(r);if(c!==n){const h=this.ut(e),m=h?this.ct(h,e,c):1;if(m!==0){this.it(r);const d=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,d)}}}}}ut(e){const r=e.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:o=0}=r;let c,h;try{c=So(n).toUint8Array()}catch(m){if(m instanceof nb)return nu("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{h=new Dx(c,a,o)}catch(m){return nu(m instanceof Gh?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return h.ge===0?null:h}ct(e,r,n){return r.Ce.count===n-this.Pt(e,r.targetId)?0:2}Pt(e,r){const n=this.Ge.getRemoteKeysForTarget(r);let a=0;return n.forEach((o=>{const c=this.Ge.ht(),h=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.et(r,o,null),a++)})),a}Tt(e){const r=new Map;this.ze.forEach(((o,c)=>{const h=this.ot(c);if(h){if(o.current&&Bv(h.target)){const m=new et(h.target.path);this.It(m).has(c)||this.Et(c,m)||this.et(c,m,wn.newNoDocument(m,e))}o.Be&&(r.set(c,o.ke()),o.qe())}}));let n=Et();this.He.forEach(((o,c)=>{let h=!0;c.forEachWhile((m=>{const d=this.ot(m);return!d||d.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(n=n.add(o))})),this.je.forEach(((o,c)=>c.setReadTime(e)));const a=new P0(e,r,this.Ye,this.je,n);return this.je=xi(),this.Je=gm(),this.He=gm(),this.Ye=new hr(_t),a}Xe(e,r){if(!this.rt(e))return;const n=this.Et(e,r.key)?2:0;this.nt(e).Qe(r.key,n),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(e)),this.He=this.He.insert(r.key,this.dt(r.key).add(e))}et(e,r,n){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,r)?a.Qe(r,1):a.$e(r),this.He=this.He.insert(r,this.dt(r).delete(e)),this.He=this.He.insert(r,this.dt(r).add(e)),n&&(this.je=this.je.insert(r,n))}removeTarget(e){this.ze.delete(e)}_t(e){const r=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let r=this.ze.get(e);return r||(r=new nT,this.ze.set(e,r)),r}dt(e){let r=this.He.get(e);return r||(r=new zr(_t),this.He=this.He.insert(e,r)),r}It(e){let r=this.Je.get(e);return r||(r=new zr(_t),this.Je=this.Je.insert(e,r)),r}rt(e){const r=this.ot(e)!==null;return r||$e("WatchChangeAggregator","Detected inactive target",e),r}ot(e){const r=this.ze.get(e);return r&&r.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new nT),this.Ge.getRemoteKeysForTarget(e).forEach((r=>{this.et(e,r,null)}))}Et(e,r){return this.Ge.getRemoteKeysForTarget(e).has(r)}}function gm(){return new hr(et.comparator)}function aT(){return new hr(et.comparator)}const Tk={asc:"ASCENDING",desc:"DESCENDING"},wk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Nk={and:"AND",or:"OR"};class bk{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function Hv(t,e){return t.useProto3Json||R0(e)?e:{value:e}}function t0(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kb(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Sk(t,e){return t0(t,e.toTimestamp())}function Rs(t){return kt(!!t,49232),lt.fromTimestamp((function(r){const n=bo(r);return new nt(n.seconds,n.nanos)})(t))}function Ix(t,e){return Gv(t,e).canonicalString()}function Gv(t,e){const r=(function(a){return new tr(["projects",a.projectId,"databases",a.database])})(t).child("documents");return e===void 0?r:r.child(e)}function Ob(t){const e=tr.fromString(t);return kt(Vb(e),10190,{key:e.toString()}),e}function qv(t,e){return Ix(t.databaseId,e.path)}function uv(t,e){const r=Ob(e);if(r.get(1)!==t.databaseId.projectId)throw new qe(we.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new qe(we.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new et(Pb(r))}function Mb(t,e){return Ix(t.databaseId,e)}function Ak(t){const e=Ob(t);return e.length===4?tr.emptyPath():Pb(e)}function $v(t){return new tr(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Pb(t){return kt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function sT(t,e,r){return{name:qv(t,e),fields:r.value.mapValue.fields}}function Ck(t,e){let r;if("targetChange"in e){e.targetChange;const n=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:st(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],o=(function(d,p){return d.useProto3Json?(kt(p===void 0||typeof p=="string",58123),pn.fromBase64String(p||"")):(kt(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),pn.fromUint8Array(p||new Uint8Array))})(t,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&(function(d){const p=d.code===void 0?we.UNKNOWN:Rb(d.code);return new qe(p,d.message||"")})(c);r=new Ib(n,a,o,h||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const a=uv(t,n.document.name),o=Rs(n.document.updateTime),c=n.document.createTime?Rs(n.document.createTime):lt.min(),h=new Kn({mapValue:{fields:n.document.fields}}),m=wn.newFoundDocument(a,o,c,h),d=n.targetIds||[],p=n.removedTargetIds||[];r=new Fm(d,p,m.key,m)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const a=uv(t,n.document),o=n.readTime?Rs(n.readTime):lt.min(),c=wn.newNoDocument(a,o),h=n.removedTargetIds||[];r=new Fm([],h,c.key,c)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const a=uv(t,n.document),o=n.removedTargetIds||[];r=new Fm([],o,a,null)}else{if(!("filter"in e))return st(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:a=0,unchangedNames:o}=n,c=new vk(a,o),h=n.targetId;r=new Db(h,c)}}return r}function jk(t,e){let r;if(e instanceof Od)r={update:sT(t,e.key,e.value)};else if(e instanceof jx)r={delete:qv(t,e.key)};else if(e instanceof Lo)r={update:sT(t,e.key,e.data),updateMask:Lk(e.fieldMask)};else{if(!(e instanceof mk))return st(16599,{Vt:e.type});r={verify:qv(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map((n=>(function(o,c){const h=c.transform;if(h instanceof Zm)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof gd)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof vd)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof e0)return{fieldPath:c.field.canonicalString(),increment:h.Ae};throw st(20930,{transform:c.transform})})(0,n)))),e.precondition.isNone||(r.currentDocument=(function(a,o){return o.updateTime!==void 0?{updateTime:Sk(a,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:st(27497)})(t,e.precondition)),r}function Rk(t,e){return t&&t.length>0?(kt(e!==void 0,14353),t.map((r=>(function(a,o){let c=a.updateTime?Rs(a.updateTime):Rs(o);return c.isEqual(lt.min())&&(c=Rs(o)),new hk(c,a.transformResults||[])})(r,e)))):[]}function Dk(t,e){return{documents:[Mb(t,e.path)]}}function Ik(t,e){const r={structuredQuery:{}},n=e.path;let a;e.collectionGroup!==null?(a=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=Mb(t,a);const o=(function(d){if(d.length!==0)return Lb(ls.create(d,"and"))})(e.filters);o&&(r.structuredQuery.where=o);const c=(function(d){if(d.length!==0)return d.map((p=>(function(y){return{field:Uc(y.field),direction:Mk(y.dir)}})(p)))})(e.orderBy);c&&(r.structuredQuery.orderBy=c);const h=Hv(t,e.limit);return h!==null&&(r.structuredQuery.limit=h),e.startAt&&(r.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(r.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{ft:r,parent:a}}function kk(t){let e=Ak(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let a=null;if(n>0){kt(n===1,65062);const p=r.from[0];p.allDescendants?a=p.collectionId:e=e.child(p.collectionId)}let o=[];r.where&&(o=(function(x){const y=Fb(x);return y instanceof ls&&fb(y)?y.getFilters():[y]})(r.where));let c=[];r.orderBy&&(c=(function(x){return x.map((y=>(function(w){return new pd(zc(w.field),(function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(w.direction))})(y)))})(r.orderBy));let h=null;r.limit&&(h=(function(x){let y;return y=typeof x=="object"?x.value:x,R0(y)?null:y})(r.limit));let m=null;r.startAt&&(m=(function(x){const y=!!x.before,E=x.values||[];return new Jm(E,y)})(r.startAt));let d=null;return r.endAt&&(d=(function(x){const y=!x.before,E=x.values||[];return new Jm(E,y)})(r.endAt)),J3(e,a,c,o,h,"F",m,d)}function Ok(t,e){const r=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return st(28987,{purpose:a})}})(e.purpose);return r==null?null:{"goog-listen-tags":r}}function Fb(t){return t.unaryFilter!==void 0?(function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=zc(r.unaryFilter.field);return Rr.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=zc(r.unaryFilter.field);return Rr.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=zc(r.unaryFilter.field);return Rr.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=zc(r.unaryFilter.field);return Rr.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return st(61313);default:return st(60726)}})(t):t.fieldFilter!==void 0?(function(r){return Rr.create(zc(r.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return st(58110);default:return st(50506)}})(r.fieldFilter.op),r.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(r){return ls.create(r.compositeFilter.filters.map((n=>Fb(n))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return st(1026)}})(r.compositeFilter.op))})(t):st(30097,{filter:t})}function Mk(t){return Tk[t]}function Pk(t){return wk[t]}function Fk(t){return Nk[t]}function Uc(t){return{fieldPath:t.canonicalString()}}function zc(t){return cn.fromServerFormat(t.fieldPath)}function Lb(t){return t instanceof Rr?(function(r){if(r.op==="=="){if($E(r.value))return{unaryFilter:{field:Uc(r.field),op:"IS_NAN"}};if(qE(r.value))return{unaryFilter:{field:Uc(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if($E(r.value))return{unaryFilter:{field:Uc(r.field),op:"IS_NOT_NAN"}};if(qE(r.value))return{unaryFilter:{field:Uc(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Uc(r.field),op:Pk(r.op),value:r.value}}})(t):t instanceof ls?(function(r){const n=r.getFilters().map((a=>Lb(a)));return n.length===1?n[0]:{compositeFilter:{op:Fk(r.op),filters:n}}})(t):st(54877,{filter:t})}function Lk(t){const e=[];return t.fields.forEach((r=>e.push(r.canonicalString()))),{fieldPaths:e}}function Vb(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e,r,n,a,o=lt.min(),c=lt.min(),h=pn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=m}withSequenceNumber(e){return new po(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new po(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new po(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new po(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(e){this.yt=e}}function Bk(t){const e=kk({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?zv(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(){this.Cn=new zk}addToCollectionParentIndex(e,r){return this.Cn.add(r),be.resolve()}getCollectionParents(e,r){return be.resolve(this.Cn.getEntries(r))}addFieldIndex(e,r){return be.resolve()}deleteFieldIndex(e,r){return be.resolve()}deleteAllFieldIndexes(e){return be.resolve()}createTargetIndexes(e,r){return be.resolve()}getDocumentsMatchingTarget(e,r){return be.resolve(null)}getIndexType(e,r){return be.resolve(0)}getFieldIndexes(e,r){return be.resolve([])}getNextCollectionGroupToUpdate(e){return be.resolve(null)}getMinOffset(e,r){return be.resolve(No.min())}getMinOffsetFromCollectionGroup(e,r){return be.resolve(No.min())}updateCollectionGroup(e,r,n){return be.resolve()}updateIndexEntries(e,r){return be.resolve()}}class zk{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r]||new zr(tr.comparator),o=!a.has(n);return this.index[r]=a.add(n),o}has(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r];return a&&a.has(n)}getEntries(e){return(this.index[e]||new zr(tr.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Bb=41943040;class Yn{static withCacheSize(e){return new Yn(e,Yn.DEFAULT_COLLECTION_PERCENTILE,Yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yn.DEFAULT_COLLECTION_PERCENTILE=10,Yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yn.DEFAULT=new Yn(Bb,Yn.DEFAULT_COLLECTION_PERCENTILE,Yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yn.DISABLED=new Yn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ou(0)}static cr(){return new ou(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT="LruGarbageCollector",Hk=1048576;function lT([t,e],[r,n]){const a=_t(t,r);return a===0?_t(e,n):a}class Gk{constructor(e){this.Ir=e,this.buffer=new zr(lT),this.Er=0}dr(){return++this.Er}Ar(e){const r=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();lT(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class qk{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){$e(oT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){gu(r)?$e(oT,"Ignoring IndexedDB error during garbage collection: ",r):await pu(r)}await this.Vr(3e5)}))}}class $k{constructor(e,r){this.mr=e,this.params=r}calculateTargetCount(e,r){return this.mr.gr(e).next((n=>Math.floor(r/100*n)))}nthSequenceNumber(e,r){if(r===0)return be.resolve(j0.ce);const n=new Gk(r);return this.mr.forEachTarget(e,(a=>n.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>n.Ar(a))))).next((()=>n.maxValue))}removeTargets(e,r,n){return this.mr.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.mr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?($e("LruGarbageCollector","Garbage collection skipped; disabled"),be.resolve(iT)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),iT):this.yr(e,r)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,r){let n,a,o,c,h,m,d;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((x=>(x>this.params.maximumSequenceNumbersToCollect?($e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),a=this.params.maximumSequenceNumbersToCollect):a=x,c=Date.now(),this.nthSequenceNumber(e,a)))).next((x=>(n=x,h=Date.now(),this.removeTargets(e,n,r)))).next((x=>(o=x,m=Date.now(),this.removeOrphanedDocuments(e,n)))).next((x=>(d=Date.now(),Vc()<=yt.DEBUG&&$e("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-p}ms
	Determined least recently used ${a} in `+(h-c)+`ms
	Removed ${o} targets in `+(m-h)+`ms
	Removed ${x} documents in `+(d-m)+`ms
Total Duration: ${d-p}ms`),be.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:o,documentsRemoved:x}))))}}function Wk(t,e){return new $k(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(){this.changes=new Ll((e=>e.toString()),((e,r)=>e.isEqual(r))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,wn.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?be.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(e,r,n,a){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=a}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next((a=>(n=a,this.remoteDocumentCache.getEntry(e,r)))).next((a=>(n!==null&&Jh(n.mutation,a,va.empty(),nt.now()),a)))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next((n=>this.getLocalViewOfDocuments(e,n,Et()).next((()=>n))))}getLocalViewOfDocuments(e,r,n=Et()){const a=El();return this.populateOverlays(e,a,r).next((()=>this.computeViews(e,r,a,n).next((o=>{let c=Hh();return o.forEach(((h,m)=>{c=c.insert(h,m.overlayedDocument)})),c}))))}getOverlayedDocuments(e,r){const n=El();return this.populateOverlays(e,n,r).next((()=>this.computeViews(e,r,n,Et())))}populateOverlays(e,r,n){const a=[];return n.forEach((o=>{r.has(o)||a.push(o)})),this.documentOverlayCache.getOverlays(e,a).next((o=>{o.forEach(((c,h)=>{r.set(c,h)}))}))}computeViews(e,r,n,a){let o=xi();const c=Qh(),h=(function(){return Qh()})();return r.forEach(((m,d)=>{const p=n.get(d.key);a.has(d.key)&&(p===void 0||p.mutation instanceof Lo)?o=o.insert(d.key,d):p!==void 0?(c.set(d.key,p.mutation.getFieldMask()),Jh(p.mutation,d,p.mutation.getFieldMask(),nt.now())):c.set(d.key,va.empty())})),this.recalculateAndSaveOverlays(e,o).next((m=>(m.forEach(((d,p)=>c.set(d,p))),r.forEach(((d,p)=>h.set(d,new Kk(p,c.get(d)??null)))),h)))}recalculateAndSaveOverlays(e,r){const n=Qh();let a=new hr(((c,h)=>c-h)),o=Et();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next((c=>{for(const h of c)h.keys().forEach((m=>{const d=r.get(m);if(d===null)return;let p=n.get(m)||va.empty();p=h.applyToLocalView(d,p),n.set(m,p);const x=(a.get(h.batchId)||Et()).add(m);a=a.insert(h.batchId,x)}))})).next((()=>{const c=[],h=a.getReverseIterator();for(;h.hasNext();){const m=h.getNext(),d=m.key,p=m.value,x=Tb();p.forEach((y=>{if(!o.has(y)){const E=Cb(r.get(y),n.get(y));E!==null&&x.set(y,E),o=o.add(y)}})),c.push(this.documentOverlayCache.saveOverlays(e,d,x))}return be.waitFor(c)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,r,n,a){return(function(c){return et.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):vb(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,a):this.getDocumentsMatchingCollectionQuery(e,r,n,a)}getNextDocuments(e,r,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,a).next((o=>{const c=a-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,a-o.size):be.resolve(El());let h=hd,m=o;return c.next((d=>be.forEach(d,((p,x)=>(h<x.largestBatchId&&(h=x.largestBatchId),o.get(p)?be.resolve():this.remoteDocumentCache.getEntry(e,p).next((y=>{m=m.insert(p,y)}))))).next((()=>this.populateOverlays(e,d,o))).next((()=>this.computeViews(e,m,d,Et()))).next((p=>({batchId:h,changes:Eb(p)})))))}))}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new et(r)).next((n=>{let a=Hh();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a}))}getDocumentsMatchingCollectionGroupQuery(e,r,n,a){const o=r.collectionGroup;let c=Hh();return this.indexManager.getCollectionParents(e,o).next((h=>be.forEach(h,(m=>{const d=(function(x,y){return new vu(y,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)})(r,m.child(o));return this.getDocumentsMatchingCollectionQuery(e,d,n,a).next((p=>{p.forEach(((x,y)=>{c=c.insert(x,y)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,r,n,a){let o;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next((c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,o,a)))).next((c=>{o.forEach(((m,d)=>{const p=d.getKey();c.get(p)===null&&(c=c.insert(p,wn.newInvalidDocument(p)))}));let h=Hh();return c.forEach(((m,d)=>{const p=o.get(m);p!==void 0&&Jh(p.mutation,d,va.empty(),nt.now()),k0(r,d)&&(h=h.insert(m,d))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,r){return be.resolve(this.Lr.get(r))}saveBundleMetadata(e,r){return this.Lr.set(r.id,(function(a){return{id:a.id,version:a.version,createTime:Rs(a.createTime)}})(r)),be.resolve()}getNamedQuery(e,r){return be.resolve(this.kr.get(r))}saveNamedQuery(e,r){return this.kr.set(r.name,(function(a){return{name:a.name,query:Bk(a.bundledQuery),readTime:Rs(a.readTime)}})(r)),be.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(){this.overlays=new hr(et.comparator),this.qr=new Map}getOverlay(e,r){return be.resolve(this.overlays.get(r))}getOverlays(e,r){const n=El();return be.forEach(r,(a=>this.getOverlay(e,a).next((o=>{o!==null&&n.set(a,o)})))).next((()=>n))}saveOverlays(e,r,n){return n.forEach(((a,o)=>{this.St(e,r,o)})),be.resolve()}removeOverlaysForBatchId(e,r,n){const a=this.qr.get(n);return a!==void 0&&(a.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(n)),be.resolve()}getOverlaysForCollection(e,r,n){const a=El(),o=r.length+1,c=new et(r.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const m=h.getNext().value,d=m.getKey();if(!r.isPrefixOf(d.path))break;d.path.length===o&&m.largestBatchId>n&&a.set(m.getKey(),m)}return be.resolve(a)}getOverlaysForCollectionGroup(e,r,n,a){let o=new hr(((d,p)=>d-p));const c=this.overlays.getIterator();for(;c.hasNext();){const d=c.getNext().value;if(d.getKey().getCollectionGroup()===r&&d.largestBatchId>n){let p=o.get(d.largestBatchId);p===null&&(p=El(),o=o.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}const h=El(),m=o.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((d,p)=>h.set(d,p))),!(h.size()>=a)););return be.resolve(h)}St(e,r,n){const a=this.overlays.get(n.key);if(a!==null){const c=this.qr.get(a.largestBatchId).delete(n.key);this.qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(n.key,new gk(r,n));let o=this.qr.get(r);o===void 0&&(o=Et(),this.qr.set(r,o)),this.qr.set(r,o.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(){this.sessionToken=pn.EMPTY_BYTE_STRING}getSessionToken(e){return be.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,be.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(){this.Qr=new zr(Yr.$r),this.Ur=new zr(Yr.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,r){const n=new Yr(e,r);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,r){e.forEach((n=>this.addReference(n,r)))}removeReference(e,r){this.Gr(new Yr(e,r))}zr(e,r){e.forEach((n=>this.removeReference(n,r)))}jr(e){const r=new et(new tr([])),n=new Yr(r,e),a=new Yr(r,e+1),o=[];return this.Ur.forEachInRange([n,a],(c=>{this.Gr(c),o.push(c.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const r=new et(new tr([])),n=new Yr(r,e),a=new Yr(r,e+1);let o=Et();return this.Ur.forEachInRange([n,a],(c=>{o=o.add(c.key)})),o}containsKey(e){const r=new Yr(e,0),n=this.Qr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Yr{constructor(e,r){this.key=e,this.Yr=r}static $r(e,r){return et.comparator(e.key,r.key)||_t(e.Yr,r.Yr)}static Kr(e,r){return _t(e.Yr,r.Yr)||et.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new zr(Yr.$r)}checkEmpty(e){return be.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,a){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new pk(o,r,n,a);this.mutationQueue.push(c);for(const h of a)this.Zr=this.Zr.add(new Yr(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return be.resolve(c)}lookupMutationBatch(e,r){return be.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=this.ei(n),o=a<0?0:a;return be.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return be.resolve(this.mutationQueue.length===0?Tx:this.tr-1)}getAllMutationBatches(e){return be.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Yr(r,0),a=new Yr(r,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([n,a],(c=>{const h=this.Xr(c.Yr);o.push(h)})),be.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new zr(_t);return r.forEach((a=>{const o=new Yr(a,0),c=new Yr(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,c],(h=>{n=n.add(h.Yr)}))})),be.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1;let o=n;et.isDocumentKey(o)||(o=o.child(""));const c=new Yr(new et(o),0);let h=new zr(_t);return this.Zr.forEachWhile((m=>{const d=m.key.path;return!!n.isPrefixOf(d)&&(d.length===a&&(h=h.add(m.Yr)),!0)}),c),be.resolve(this.ti(h))}ti(e){const r=[];return e.forEach((n=>{const a=this.Xr(n);a!==null&&r.push(a)})),r}removeMutationBatch(e,r){kt(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return be.forEach(r.mutations,(a=>{const o=new Yr(a.key,r.batchId);return n=n.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=n}))}ir(e){}containsKey(e,r){const n=new Yr(r,0),a=this.Zr.firstAfterOrEqual(n);return be.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,be.resolve()}ni(e,r){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const r=this.ei(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e){this.ri=e,this.docs=(function(){return new hr(et.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,a=this.docs.get(n),o=a?a.size:0,c=this.ri(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return be.resolve(n?n.document.mutableCopy():wn.newInvalidDocument(r))}getEntries(e,r){let n=xi();return r.forEach((a=>{const o=this.docs.get(a);n=n.insert(a,o?o.document.mutableCopy():wn.newInvalidDocument(a))})),be.resolve(n)}getDocumentsMatchingQuery(e,r,n,a){let o=xi();const c=r.path,h=new et(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(h);for(;m.hasNext();){const{key:d,value:{document:p}}=m.getNext();if(!c.isPrefixOf(d.path))break;d.path.length>c.length+1||R3(j3(p),n)<=0||(a.has(p.key)||k0(r,p))&&(o=o.insert(p.key,p.mutableCopy()))}return be.resolve(o)}getAllFromCollectionGroup(e,r,n,a){st(9500)}ii(e,r){return be.forEach(this.docs,(n=>r(n)))}newChangeBuffer(e){return new rO(this)}getSize(e){return be.resolve(this.size)}}class rO extends Yk{constructor(e){super(),this.Nr=e}applyChanges(e){const r=[];return this.changes.forEach(((n,a)=>{a.isValidDocument()?r.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(n)})),be.waitFor(r)}getFromCache(e,r){return this.Nr.getEntry(e,r)}getAllFromCache(e,r){return this.Nr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(e){this.persistence=e,this.si=new Ll((r=>bx(r)),Sx),this.lastRemoteSnapshotVersion=lt.min(),this.highestTargetId=0,this.oi=0,this._i=new kx,this.targetCount=0,this.ai=ou.ur()}forEachTarget(e,r){return this.si.forEach(((n,a)=>r(a))),be.resolve()}getLastRemoteSnapshotVersion(e){return be.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return be.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),be.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.oi&&(this.oi=r),be.resolve()}Pr(e){this.si.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.ai=new ou(r),this.highestTargetId=r),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,r){return this.Pr(r),this.targetCount+=1,be.resolve()}updateTargetData(e,r){return this.Pr(r),be.resolve()}removeTargetData(e,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,be.resolve()}removeTargets(e,r,n){let a=0;const o=[];return this.si.forEach(((c,h)=>{h.sequenceNumber<=r&&n.get(h.targetId)===null&&(this.si.delete(c),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),a++)})),be.waitFor(o).next((()=>a))}getTargetCount(e){return be.resolve(this.targetCount)}getTargetData(e,r){const n=this.si.get(r)||null;return be.resolve(n)}addMatchingKeys(e,r,n){return this._i.Wr(r,n),be.resolve()}removeMatchingKeys(e,r,n){this._i.zr(r,n);const a=this.persistence.referenceDelegate,o=[];return a&&r.forEach((c=>{o.push(a.markPotentiallyOrphaned(e,c))})),be.waitFor(o)}removeMatchingKeysForTargetId(e,r){return this._i.jr(r),be.resolve()}getMatchingKeysForTargetId(e,r){const n=this._i.Hr(r);return be.resolve(n)}containsKey(e,r){return be.resolve(this._i.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(e,r){this.ui={},this.overlays={},this.ci=new j0(0),this.li=!1,this.li=!0,this.hi=new Zk,this.referenceDelegate=e(this),this.Pi=new nO(this),this.indexManager=new Uk,this.remoteDocumentCache=(function(a){return new tO(a)})((n=>this.referenceDelegate.Ti(n))),this.serializer=new Vk(r),this.Ii=new Qk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new Jk,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.ui[e.toKey()];return n||(n=new eO(r,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,r,n){$e("MemoryPersistence","Starting transaction:",e);const a=new aO(this.ci.next());return this.referenceDelegate.Ei(),n(a).next((o=>this.referenceDelegate.di(a).next((()=>o)))).toPromise().then((o=>(a.raiseOnCommittedEvent(),o)))}Ai(e,r){return be.or(Object.values(this.ui).map((n=>()=>n.containsKey(e,r))))}}class aO extends I3{constructor(e){super(),this.currentSequenceNumber=e}}class Ox{constructor(e){this.persistence=e,this.Ri=new kx,this.Vi=null}static mi(e){return new Ox(e)}get fi(){if(this.Vi)return this.Vi;throw st(60996)}addReference(e,r,n){return this.Ri.addReference(n,r),this.fi.delete(n.toString()),be.resolve()}removeReference(e,r,n){return this.Ri.removeReference(n,r),this.fi.add(n.toString()),be.resolve()}markPotentiallyOrphaned(e,r){return this.fi.add(r.toString()),be.resolve()}removeTarget(e,r){this.Ri.jr(r.targetId).forEach((a=>this.fi.add(a.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next((a=>{a.forEach((o=>this.fi.add(o.toString())))})).next((()=>n.removeTargetData(e,r)))}Ei(){this.Vi=new Set}di(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return be.forEach(this.fi,(n=>{const a=et.fromPath(n);return this.gi(e,a).next((o=>{o||r.removeEntry(a,lt.min())}))})).next((()=>(this.Vi=null,r.apply(e))))}updateLimboDocument(e,r){return this.gi(e,r).next((n=>{n?this.fi.delete(r.toString()):this.fi.add(r.toString())}))}Ti(e){return 0}gi(e,r){return be.or([()=>be.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ai(e,r)])}}class r0{constructor(e,r){this.persistence=e,this.pi=new Ll((n=>M3(n.path)),((n,a)=>n.isEqual(a))),this.garbageCollector=Wk(this,r)}static mi(e,r){return new r0(e,r)}Ei(){}di(e){return be.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}gr(e){const r=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((n=>r.next((a=>n+a))))}wr(e){let r=0;return this.pr(e,(n=>{r++})).next((()=>r))}pr(e,r){return be.forEach(this.pi,((n,a)=>this.br(e,n,a).next((o=>o?be.resolve():r(a)))))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const a=this.persistence.getRemoteDocumentCache(),o=a.newChangeBuffer();return a.ii(e,(c=>this.br(e,c,r).next((h=>{h||(n++,o.removeEntry(c,lt.min()))})))).next((()=>o.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,r){return this.pi.set(r,e.currentSequenceNumber),be.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),be.resolve()}removeReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),be.resolve()}updateLimboDocument(e,r){return this.pi.set(r,e.currentSequenceNumber),be.resolve()}Ti(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=Om(e.data.value)),r}br(e,r,n){return be.or([()=>this.persistence.Ai(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const a=this.pi.get(r);return be.resolve(a!==void 0&&a>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(e,r,n,a){this.targetId=e,this.fromCache=r,this.Es=n,this.ds=a}static As(e,r){let n=Et(),a=Et();for(const o of r.docChanges)switch(o.type){case 0:n=n.add(o.doc.key);break;case 1:a=a.add(o.doc.key)}return new Mx(e,r.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return PR()?8:k3(An())>0?6:4})()}initialize(e,r){this.ps=e,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(e,r,n,a){const o={result:null};return this.ys(e,r).next((c=>{o.result=c})).next((()=>{if(!o.result)return this.ws(e,r,a,n).next((c=>{o.result=c}))})).next((()=>{if(o.result)return;const c=new sO;return this.Ss(e,r,c).next((h=>{if(o.result=h,this.Vs)return this.bs(e,r,c,h.size)}))})).next((()=>o.result))}bs(e,r,n,a){return n.documentReadCount<this.fs?(Vc()<=yt.DEBUG&&$e("QueryEngine","SDK will not create cache indexes for query:",Bc(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),be.resolve()):(Vc()<=yt.DEBUG&&$e("QueryEngine","Query:",Bc(r),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.gs*a?(Vc()<=yt.DEBUG&&$e("QueryEngine","The SDK decides to create cache indexes for query:",Bc(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,js(r))):be.resolve())}ys(e,r){if(XE(r))return be.resolve(null);let n=js(r);return this.indexManager.getIndexType(e,n).next((a=>a===0?null:(r.limit!==null&&a===1&&(r=zv(r,null,"F"),n=js(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next((o=>{const c=Et(...o);return this.ps.getDocuments(e,c).next((h=>this.indexManager.getMinOffset(e,n).next((m=>{const d=this.Ds(r,h);return this.Cs(r,d,c,m.readTime)?this.ys(e,zv(r,null,"F")):this.vs(e,d,r,m)}))))})))))}ws(e,r,n,a){return XE(r)||a.isEqual(lt.min())?be.resolve(null):this.ps.getDocuments(e,n).next((o=>{const c=this.Ds(r,o);return this.Cs(r,c,n,a)?be.resolve(null):(Vc()<=yt.DEBUG&&$e("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Bc(r)),this.vs(e,c,r,C3(a,hd)).next((h=>h)))}))}Ds(e,r){let n=new zr(yb(e));return r.forEach(((a,o)=>{k0(e,o)&&(n=n.add(o))})),n}Cs(e,r,n,a){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const o=e.limitType==="F"?r.last():r.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(a)>0)}Ss(e,r,n){return Vc()<=yt.DEBUG&&$e("QueryEngine","Using full collection scan to execute query:",Bc(r)),this.ps.getDocumentsMatchingQuery(e,r,No.min(),n)}vs(e,r,n,a){return this.ps.getDocumentsMatchingQuery(e,n,a).next((o=>(r.forEach((c=>{o=o.insert(c.key,c)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px="LocalStore",oO=3e8;class lO{constructor(e,r,n,a){this.persistence=e,this.Fs=r,this.serializer=a,this.Ms=new hr(_t),this.xs=new Ll((o=>bx(o)),Sx),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Xk(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(r=>e.collect(r,this.Ms)))}}function cO(t,e,r,n){return new lO(t,e,r,n)}async function zb(t,e){const r=ht(t);return await r.persistence.runTransaction("Handle user change","readonly",(n=>{let a;return r.mutationQueue.getAllMutationBatches(n).next((o=>(a=o,r.Bs(e),r.mutationQueue.getAllMutationBatches(n)))).next((o=>{const c=[],h=[];let m=Et();for(const d of a){c.push(d.batchId);for(const p of d.mutations)m=m.add(p.key)}for(const d of o){h.push(d.batchId);for(const p of d.mutations)m=m.add(p.key)}return r.localDocuments.getDocuments(n,m).next((d=>({Ls:d,removedBatchIds:c,addedBatchIds:h})))}))}))}function uO(t,e){const r=ht(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const a=e.batch.keys(),o=r.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,m,d,p){const x=d.batch,y=x.keys();let E=be.resolve();return y.forEach((w=>{E=E.next((()=>p.getEntry(m,w))).next((T=>{const b=d.docVersions.get(w);kt(b!==null,48541),T.version.compareTo(b)<0&&(x.applyToRemoteDocument(T,d),T.isValidDocument()&&(T.setReadTime(d.commitVersion),p.addEntry(T)))}))})),E.next((()=>h.mutationQueue.removeMutationBatch(m,x)))})(r,n,e,o).next((()=>o.apply(n))).next((()=>r.mutationQueue.performConsistencyCheck(n))).next((()=>r.documentOverlayCache.removeOverlaysForBatchId(n,a,e.batch.batchId))).next((()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(h){let m=Et();for(let d=0;d<h.mutationResults.length;++d)h.mutationResults[d].transformResults.length>0&&(m=m.add(h.batch.mutations[d].key));return m})(e)))).next((()=>r.localDocuments.getDocuments(n,a)))}))}function Hb(t){const e=ht(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(r=>e.Pi.getLastRemoteSnapshotVersion(r)))}function hO(t,e){const r=ht(t),n=e.snapshotVersion;let a=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const c=r.Ns.newChangeBuffer({trackRemovals:!0});a=r.Ms;const h=[];e.targetChanges.forEach(((p,x)=>{const y=a.get(x);if(!y)return;h.push(r.Pi.removeMatchingKeys(o,p.removedDocuments,x).next((()=>r.Pi.addMatchingKeys(o,p.addedDocuments,x))));let E=y.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(x)!==null?E=E.withResumeToken(pn.EMPTY_BYTE_STRING,lt.min()).withLastLimboFreeSnapshotVersion(lt.min()):p.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(p.resumeToken,n)),a=a.insert(x,E),(function(T,b,A){return T.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=oO?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0})(y,E,p)&&h.push(r.Pi.updateTargetData(o,E))}));let m=xi(),d=Et();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&h.push(r.persistence.referenceDelegate.updateLimboDocument(o,p))})),h.push(dO(o,c,e.documentUpdates).next((p=>{m=p.ks,d=p.qs}))),!n.isEqual(lt.min())){const p=r.Pi.getLastRemoteSnapshotVersion(o).next((x=>r.Pi.setTargetsMetadata(o,o.currentSequenceNumber,n)));h.push(p)}return be.waitFor(h).next((()=>c.apply(o))).next((()=>r.localDocuments.getLocalViewOfDocuments(o,m,d))).next((()=>m))})).then((o=>(r.Ms=a,o)))}function dO(t,e,r){let n=Et(),a=Et();return r.forEach((o=>n=n.add(o))),e.getEntries(t,n).next((o=>{let c=xi();return r.forEach(((h,m)=>{const d=o.get(h);m.isFoundDocument()!==d.isFoundDocument()&&(a=a.add(h)),m.isNoDocument()&&m.version.isEqual(lt.min())?(e.removeEntry(h,m.readTime),c=c.insert(h,m)):!d.isValidDocument()||m.version.compareTo(d.version)>0||m.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(m),c=c.insert(h,m)):$e(Px,"Ignoring outdated watch update for ",h,". Current version:",d.version," Watch version:",m.version)})),{ks:c,qs:a}}))}function fO(t,e){const r=ht(t);return r.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=Tx),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function mO(t,e){const r=ht(t);return r.persistence.runTransaction("Allocate target","readwrite",(n=>{let a;return r.Pi.getTargetData(n,e).next((o=>o?(a=o,be.resolve(a)):r.Pi.allocateTargetId(n).next((c=>(a=new po(e,c,"TargetPurposeListen",n.currentSequenceNumber),r.Pi.addTargetData(n,a).next((()=>a)))))))})).then((n=>{const a=r.Ms.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(n.targetId,n),r.xs.set(e,n.targetId)),n}))}async function Wv(t,e,r){const n=ht(t),a=n.Ms.get(e),o=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",o,(c=>n.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!gu(c))throw c;$e(Px,`Failed to update sequence numbers for target ${e}: ${c}`)}n.Ms=n.Ms.remove(e),n.xs.delete(a.target)}function cT(t,e,r){const n=ht(t);let a=lt.min(),o=Et();return n.persistence.runTransaction("Execute query","readwrite",(c=>(function(m,d,p){const x=ht(m),y=x.xs.get(p);return y!==void 0?be.resolve(x.Ms.get(y)):x.Pi.getTargetData(d,p)})(n,c,js(e)).next((h=>{if(h)return a=h.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(c,h.targetId).next((m=>{o=m}))})).next((()=>n.Fs.getDocumentsMatchingQuery(c,e,r?a:lt.min(),r?o:Et()))).next((h=>(pO(n,ek(e),h),{documents:h,Qs:o})))))}function pO(t,e,r){let n=t.Os.get(e)||lt.min();r.forEach(((a,o)=>{o.readTime.compareTo(n)>0&&(n=o.readTime)})),t.Os.set(e,n)}class uT{constructor(){this.activeTargetIds=ik()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class gO{constructor(){this.Mo=new uT,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,r,n){this.xo[e]=r}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new uT,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hT="ConnectivityMonitor";class dT{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){$e(hT,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){$e(hT,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vm=null;function Yv(){return vm===null?vm=(function(){return 268435456+Math.round(2147483648*Math.random())})():vm++,"0x"+vm.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hv="RestConnection",xO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class yO{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+e.host,this.Ko=`projects/${n}/databases/${a}`,this.Wo=this.databaseId.database===Xm?`project_id=${n}`:`project_id=${n}&database_id=${a}`}Go(e,r,n,a,o){const c=Yv(),h=this.zo(e,r.toUriEncodedString());$e(hv,`Sending RPC '${e}' ${c}:`,h,n);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,a,o);const{host:d}=new URL(h),p=hu(d);return this.Jo(e,h,m,n,p).then((x=>($e(hv,`Received RPC '${e}' ${c}: `,x),x)),(x=>{throw nu(hv,`RPC '${e}' ${c} failed with error: `,x,"url: ",h,"request:",n),x}))}Ho(e,r,n,a,o,c){return this.Go(e,r,n,a,o)}jo(e,r,n){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+mu})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach(((a,o)=>e[o]=a)),n&&n.headers.forEach(((a,o)=>e[o]=a))}zo(e,r){const n=xO[e];return`${this.Uo}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const En="WebChannelConnection";class EO extends yO{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,r,n,a,o){const c=Yv();return new Promise(((h,m)=>{const d=new $N;d.setWithCredentials(!0),d.listenOnce(WN.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case km.NO_ERROR:const x=d.getResponseJson();$e(En,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(x)),h(x);break;case km.TIMEOUT:$e(En,`RPC '${e}' ${c} timed out`),m(new qe(we.DEADLINE_EXCEEDED,"Request time out"));break;case km.HTTP_ERROR:const y=d.getStatus();if($e(En,`RPC '${e}' ${c} failed with status:`,y,"response text:",d.getResponseText()),y>0){let E=d.getResponseJson();Array.isArray(E)&&(E=E[0]);const w=E?.error;if(w&&w.status&&w.message){const T=(function(A){const M=A.toLowerCase().replace(/_/g,"-");return Object.values(we).indexOf(M)>=0?M:we.UNKNOWN})(w.status);m(new qe(T,w.message))}else m(new qe(we.UNKNOWN,"Server responded with status "+d.getStatus()))}else m(new qe(we.UNAVAILABLE,"Connection failed."));break;default:st(9055,{l_:e,streamId:c,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{$e(En,`RPC '${e}' ${c} completed.`)}}));const p=JSON.stringify(a);$e(En,`RPC '${e}' ${c} sending request:`,a),d.send(r,"POST",p,n,15)}))}T_(e,r,n){const a=Yv(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=XN(),h=KN(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(m.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,r,n),m.encodeInitMessageHeaders=!0;const p=o.join("");$e(En,`Creating RPC '${e}' stream ${a}: ${p}`,m);const x=c.createWebChannel(p,m);this.I_(x);let y=!1,E=!1;const w=new _O({Yo:b=>{E?$e(En,`Not sending because RPC '${e}' stream ${a} is closed:`,b):(y||($e(En,`Opening RPC '${e}' stream ${a} transport.`),x.open(),y=!0),$e(En,`RPC '${e}' stream ${a} sending:`,b),x.send(b))},Zo:()=>x.close()}),T=(b,A,M)=>{b.listen(A,(V=>{try{M(V)}catch(H){setTimeout((()=>{throw H}),0)}}))};return T(x,zh.EventType.OPEN,(()=>{E||($e(En,`RPC '${e}' stream ${a} transport opened.`),w.o_())})),T(x,zh.EventType.CLOSE,(()=>{E||(E=!0,$e(En,`RPC '${e}' stream ${a} transport closed`),w.a_(),this.E_(x))})),T(x,zh.EventType.ERROR,(b=>{E||(E=!0,nu(En,`RPC '${e}' stream ${a} transport errored. Name:`,b.name,"Message:",b.message),w.a_(new qe(we.UNAVAILABLE,"The operation could not be completed")))})),T(x,zh.EventType.MESSAGE,(b=>{if(!E){const A=b.data[0];kt(!!A,16349);const M=A,V=M?.error||M[0]?.error;if(V){$e(En,`RPC '${e}' stream ${a} received error:`,V);const H=V.status;let re=(function(D){const S=jr[D];if(S!==void 0)return Rb(S)})(H),q=V.message;re===void 0&&(re=we.INTERNAL,q="Unknown error status: "+H+" with message "+V.message),E=!0,w.a_(new qe(re,q)),x.close()}else $e(En,`RPC '${e}' stream ${a} received:`,A),w.u_(A)}})),T(h,YN.STAT_EVENT,(b=>{b.stat===Mv.PROXY?$e(En,`RPC '${e}' stream ${a} detected buffering proxy`):b.stat===Mv.NOPROXY&&$e(En,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{w.__()}),0),w}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((r=>r===e))}}function dv(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F0(t){return new bk(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(e,r,n=1e3,a=1.5,o=6e4){this.Mi=e,this.timerId=r,this.d_=n,this.A_=a,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const r=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),a=Math.max(0,r-n);a>0&&$e("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT="PersistentStream";class qb{constructor(e,r,n,a,o,c,h,m){this.Mi=e,this.S_=n,this.b_=a,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Gb(e,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():r&&r.code===we.RESOURCE_EXHAUSTED?(vi(r.toString()),vi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===we.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(r)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,a])=>{this.D_===r&&this.G_(n,a)}),(n=>{e((()=>{const a=new qe(we.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(a)}))}))}G_(e,r){const n=this.W_(this.D_);this.stream=this.j_(e,r),this.stream.Xo((()=>{n((()=>this.listener.Xo()))})),this.stream.t_((()=>{n((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{n((()=>this.z_(a)))})),this.stream.onMessage((a=>{n((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return $e(fT,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return r=>{this.Mi.enqueueAndForget((()=>this.D_===e?r():($e(fT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class TO extends qb{constructor(e,r,n,a,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,a,c),this.serializer=o}j_(e,r){return this.connection.T_("Listen",e,r)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const r=Ck(this.serializer,e),n=(function(o){if(!("targetChange"in o))return lt.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?lt.min():c.readTime?Rs(c.readTime):lt.min()})(e);return this.listener.H_(r,n)}Y_(e){const r={};r.database=$v(this.serializer),r.addTarget=(function(o,c){let h;const m=c.target;if(h=Bv(m)?{documents:Dk(o,m)}:{query:Ik(o,m).ft},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=kb(o,c.resumeToken);const d=Hv(o,c.expectedCount);d!==null&&(h.expectedCount=d)}else if(c.snapshotVersion.compareTo(lt.min())>0){h.readTime=t0(o,c.snapshotVersion.toTimestamp());const d=Hv(o,c.expectedCount);d!==null&&(h.expectedCount=d)}return h})(this.serializer,e);const n=Ok(this.serializer,e);n&&(r.labels=n),this.q_(r)}Z_(e){const r={};r.database=$v(this.serializer),r.removeTarget=e,this.q_(r)}}class wO extends qb{constructor(e,r,n,a,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,a,c),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,r){return this.connection.T_("Write",e,r)}J_(e){return kt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,kt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){kt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const r=Rk(e.writeResults,e.commitTime),n=Rs(e.commitTime);return this.listener.na(n,r)}ra(){const e={};e.database=$v(this.serializer),this.q_(e)}ea(e){const r={streamToken:this.lastStreamToken,writes:e.map((n=>jk(this.serializer,n)))};this.q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NO{}class bO extends NO{constructor(e,r,n,a){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new qe(we.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,r,n,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Go(e,Gv(r,n),a,o,c))).catch((o=>{throw o.name==="FirebaseError"?(o.code===we.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new qe(we.UNKNOWN,o.toString())}))}Ho(e,r,n,a,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,h])=>this.connection.Ho(e,Gv(r,n),a,c,h,o))).catch((c=>{throw c.name==="FirebaseError"?(c.code===we.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new qe(we.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class SO{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(vi(r),this.aa=!1):$e("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kl="RemoteStore";class AO{constructor(e,r,n,a,o){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((c=>{n.enqueueAndForget((async()=>{Vl(this)&&($e(kl,"Restarting streams for network reachability change."),await(async function(m){const d=ht(m);d.Ea.add(4),await Pd(d),d.Ra.set("Unknown"),d.Ea.delete(4),await L0(d)})(this))}))})),this.Ra=new SO(n,a)}}async function L0(t){if(Vl(t))for(const e of t.da)await e(!0)}async function Pd(t){for(const e of t.da)await e(!1)}function $b(t,e){const r=ht(t);r.Ia.has(e.targetId)||(r.Ia.set(e.targetId,e),Bx(r)?Vx(r):xu(r).O_()&&Lx(r,e))}function Fx(t,e){const r=ht(t),n=xu(r);r.Ia.delete(e),n.O_()&&Wb(r,e),r.Ia.size===0&&(n.O_()?n.L_():Vl(r)&&r.Ra.set("Unknown"))}function Lx(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(lt.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}xu(t).Y_(e)}function Wb(t,e){t.Va.Ue(e),xu(t).Z_(e)}function Vx(t){t.Va=new Ek({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),xu(t).start(),t.Ra.ua()}function Bx(t){return Vl(t)&&!xu(t).x_()&&t.Ia.size>0}function Vl(t){return ht(t).Ea.size===0}function Yb(t){t.Va=void 0}async function CO(t){t.Ra.set("Online")}async function jO(t){t.Ia.forEach(((e,r)=>{Lx(t,e)}))}async function RO(t,e){Yb(t),Bx(t)?(t.Ra.ha(e),Vx(t)):t.Ra.set("Unknown")}async function DO(t,e,r){if(t.Ra.set("Online"),e instanceof Ib&&e.state===2&&e.cause)try{await(async function(a,o){const c=o.cause;for(const h of o.targetIds)a.Ia.has(h)&&(await a.remoteSyncer.rejectListen(h,c),a.Ia.delete(h),a.Va.removeTarget(h))})(t,e)}catch(n){$e(kl,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await n0(t,n)}else if(e instanceof Fm?t.Va.Ze(e):e instanceof Db?t.Va.st(e):t.Va.tt(e),!r.isEqual(lt.min()))try{const n=await Hb(t.localStore);r.compareTo(n)>=0&&await(function(o,c){const h=o.Va.Tt(c);return h.targetChanges.forEach(((m,d)=>{if(m.resumeToken.approximateByteSize()>0){const p=o.Ia.get(d);p&&o.Ia.set(d,p.withResumeToken(m.resumeToken,c))}})),h.targetMismatches.forEach(((m,d)=>{const p=o.Ia.get(m);if(!p)return;o.Ia.set(m,p.withResumeToken(pn.EMPTY_BYTE_STRING,p.snapshotVersion)),Wb(o,m);const x=new po(p.target,m,d,p.sequenceNumber);Lx(o,x)})),o.remoteSyncer.applyRemoteEvent(h)})(t,r)}catch(n){$e(kl,"Failed to raise snapshot:",n),await n0(t,n)}}async function n0(t,e,r){if(!gu(e))throw e;t.Ea.add(1),await Pd(t),t.Ra.set("Offline"),r||(r=()=>Hb(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{$e(kl,"Retrying IndexedDB access"),await r(),t.Ea.delete(1),await L0(t)}))}function Kb(t,e){return e().catch((r=>n0(t,r,e)))}async function V0(t){const e=ht(t),r=Co(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Tx;for(;IO(e);)try{const a=await fO(e.localStore,n);if(a===null){e.Ta.length===0&&r.L_();break}n=a.batchId,kO(e,a)}catch(a){await n0(e,a)}Xb(e)&&Qb(e)}function IO(t){return Vl(t)&&t.Ta.length<10}function kO(t,e){t.Ta.push(e);const r=Co(t);r.O_()&&r.X_&&r.ea(e.mutations)}function Xb(t){return Vl(t)&&!Co(t).x_()&&t.Ta.length>0}function Qb(t){Co(t).start()}async function OO(t){Co(t).ra()}async function MO(t){const e=Co(t);for(const r of t.Ta)e.ea(r.mutations)}async function PO(t,e,r){const n=t.Ta.shift(),a=Rx.from(n,e,r);await Kb(t,(()=>t.remoteSyncer.applySuccessfulWrite(a))),await V0(t)}async function FO(t,e){e&&Co(t).X_&&await(async function(n,a){if((function(c){return xk(c)&&c!==we.ABORTED})(a.code)){const o=n.Ta.shift();Co(n).B_(),await Kb(n,(()=>n.remoteSyncer.rejectFailedWrite(o.batchId,a))),await V0(n)}})(t,e),Xb(t)&&Qb(t)}async function mT(t,e){const r=ht(t);r.asyncQueue.verifyOperationInProgress(),$e(kl,"RemoteStore received new credentials");const n=Vl(r);r.Ea.add(3),await Pd(r),n&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.Ea.delete(3),await L0(r)}async function LO(t,e){const r=ht(t);e?(r.Ea.delete(2),await L0(r)):e||(r.Ea.add(2),await Pd(r),r.Ra.set("Unknown"))}function xu(t){return t.ma||(t.ma=(function(r,n,a){const o=ht(r);return o.sa(),new TO(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,a)})(t.datastore,t.asyncQueue,{Xo:CO.bind(null,t),t_:jO.bind(null,t),r_:RO.bind(null,t),H_:DO.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),Bx(t)?Vx(t):t.Ra.set("Unknown")):(await t.ma.stop(),Yb(t))}))),t.ma}function Co(t){return t.fa||(t.fa=(function(r,n,a){const o=ht(r);return o.sa(),new wO(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,a)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:OO.bind(null,t),r_:FO.bind(null,t),ta:MO.bind(null,t),na:PO.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await V0(t)):(await t.fa.stop(),t.Ta.length>0&&($e(kl,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(e,r,n,a,o){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=a,this.removalCallback=o,this.deferred=new ui,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,a,o){const c=Date.now()+n,h=new Ux(e,r,c,a,o);return h.start(n),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new qe(we.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zx(t,e){if(vi("AsyncQueue",`${e}: ${t}`),gu(t))return new qe(we.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{static emptySet(e){return new Kc(e.comparator)}constructor(e){this.comparator=e?(r,n)=>e(r,n)||et.comparator(r.key,n.key):(r,n)=>et.comparator(r.key,n.key),this.keyedMap=Hh(),this.sortedSet=new hr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((r,n)=>(e(r),!1)))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Kc)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,o=n.getNext().key;if(!a.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((r=>{e.push(r.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new Kc;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(){this.ga=new hr(et.comparator)}track(e){const r=e.doc.key,n=this.ga.get(r);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(r,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(r):e.type===1&&n.type===2?this.ga=this.ga.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):st(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(r,e)}ya(){const e=[];return this.ga.inorderTraversal(((r,n)=>{e.push(n)})),e}}class lu{constructor(e,r,n,a,o,c,h,m,d){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=m,this.hasCachedResults=d}static fromInitialDocuments(e,r,n,a,o){const c=[];return r.forEach((h=>{c.push({type:0,doc:h})})),new lu(e,r,Kc.emptySet(r),c,n,a,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&I0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==n[a].type||!r[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class BO{constructor(){this.queries=gT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const a=ht(r),o=a.queries;a.queries=gT(),o.forEach(((c,h)=>{for(const m of h.Sa)m.onError(n)}))})(this,new qe(we.ABORTED,"Firestore shutting down"))}}function gT(){return new Ll((t=>xb(t)),I0)}async function Jb(t,e){const r=ht(t);let n=3;const a=e.query;let o=r.queries.get(a);o?!o.ba()&&e.Da()&&(n=2):(o=new VO,n=e.Da()?0:1);try{switch(n){case 0:o.wa=await r.onListen(a,!0);break;case 1:o.wa=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(c){const h=zx(c,`Initialization of query '${Bc(e.query)}' failed`);return void e.onError(h)}r.queries.set(a,o),o.Sa.push(e),e.va(r.onlineState),o.wa&&e.Fa(o.wa)&&Hx(r)}async function Zb(t,e){const r=ht(t),n=e.query;let a=3;const o=r.queries.get(n);if(o){const c=o.Sa.indexOf(e);c>=0&&(o.Sa.splice(c,1),o.Sa.length===0?a=e.Da()?0:1:!o.ba()&&e.Da()&&(a=2))}switch(a){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function UO(t,e){const r=ht(t);let n=!1;for(const a of e){const o=a.query,c=r.queries.get(o);if(c){for(const h of c.Sa)h.Fa(a)&&(n=!0);c.wa=a}}n&&Hx(r)}function zO(t,e,r){const n=ht(t),a=n.queries.get(e);if(a)for(const o of a.Sa)o.onError(r);n.queries.delete(e)}function Hx(t){t.Ca.forEach((e=>{e.next()}))}var Kv,vT;(vT=Kv||(Kv={})).Ma="default",vT.Cache="cache";class eS{constructor(e,r,n){this.query=e,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const a of e.docChanges)a.type!==3&&n.push(a);e=new lu(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),r=!0):this.La(e,this.onlineState)&&(this.ka(e),r=!0),this.Na=e,r}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),r=!0),r}La(e,r){if(!e.fromCache||!this.Da())return!0;const n=r!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(e){e=lu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Kv.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(e){this.key=e}}class rS{constructor(e){this.key=e}}class HO{constructor(e,r){this.query=e,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Et(),this.mutatedKeys=Et(),this.eu=yb(e),this.tu=new Kc(this.eu)}get nu(){return this.Ya}ru(e,r){const n=r?r.iu:new pT,a=r?r.tu:this.tu;let o=r?r.mutatedKeys:this.mutatedKeys,c=a,h=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,d=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((p,x)=>{const y=a.get(p),E=k0(this.query,x)?x:null,w=!!y&&this.mutatedKeys.has(y.key),T=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let b=!1;y&&E?y.data.isEqual(E.data)?w!==T&&(n.track({type:3,doc:E}),b=!0):this.su(y,E)||(n.track({type:2,doc:E}),b=!0,(m&&this.eu(E,m)>0||d&&this.eu(E,d)<0)&&(h=!0)):!y&&E?(n.track({type:0,doc:E}),b=!0):y&&!E&&(n.track({type:1,doc:y}),b=!0,(m||d)&&(h=!0)),b&&(E?(c=c.add(E),o=T?o.add(p):o.delete(p)):(c=c.delete(p),o=o.delete(p)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const p=this.query.limitType==="F"?c.last():c.first();c=c.delete(p.key),o=o.delete(p.key),n.track({type:1,doc:p})}return{tu:c,iu:n,Cs:h,mutatedKeys:o}}su(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,a){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((p,x)=>(function(E,w){const T=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return st(20277,{Rt:b})}};return T(E)-T(w)})(p.type,x.type)||this.eu(p.doc,x.doc))),this.ou(n),a=a??!1;const h=r&&!a?this._u():[],m=this.Xa.size===0&&this.current&&!a?1:0,d=m!==this.Za;return this.Za=m,c.length!==0||d?{snapshot:new lu(this.query,e.tu,o,c,e.mutatedKeys,m===0,d,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new pT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((r=>this.Ya=this.Ya.add(r))),e.modifiedDocuments.forEach((r=>{})),e.removedDocuments.forEach((r=>this.Ya=this.Ya.delete(r))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Et(),this.tu.forEach((n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))}));const r=[];return e.forEach((n=>{this.Xa.has(n)||r.push(new rS(n))})),this.Xa.forEach((n=>{e.has(n)||r.push(new tS(n))})),r}cu(e){this.Ya=e.Qs,this.Xa=Et();const r=this.ru(e.documents);return this.applyChanges(r,!0)}lu(){return lu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Gx="SyncEngine";class GO{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class qO{constructor(e){this.key=e,this.hu=!1}}class $O{constructor(e,r,n,a,o,c){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=a,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Ll((h=>xb(h)),I0),this.Iu=new Map,this.Eu=new Set,this.du=new hr(et.comparator),this.Au=new Map,this.Ru=new kx,this.Vu={},this.mu=new Map,this.fu=ou.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function WO(t,e,r=!0){const n=lS(t);let a;const o=n.Tu.get(e);return o?(n.sharedClientState.addLocalQueryTarget(o.targetId),a=o.view.lu()):a=await nS(n,e,r,!0),a}async function YO(t,e){const r=lS(t);await nS(r,e,!0,!1)}async function nS(t,e,r,n){const a=await mO(t.localStore,js(e)),o=a.targetId,c=t.sharedClientState.addLocalQueryTarget(o,r);let h;return n&&(h=await KO(t,e,o,c==="current",a.resumeToken)),t.isPrimaryClient&&r&&$b(t.remoteStore,a),h}async function KO(t,e,r,n,a){t.pu=(x,y,E)=>(async function(T,b,A,M){let V=b.view.ru(A);V.Cs&&(V=await cT(T.localStore,b.query,!1).then((({documents:j})=>b.view.ru(j,V))));const H=M&&M.targetChanges.get(b.targetId),re=M&&M.targetMismatches.get(b.targetId)!=null,q=b.view.applyChanges(V,T.isPrimaryClient,H,re);return yT(T,b.targetId,q.au),q.snapshot})(t,x,y,E);const o=await cT(t.localStore,e,!0),c=new HO(e,o.Qs),h=c.ru(o.documents),m=Md.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",a),d=c.applyChanges(h,t.isPrimaryClient,m);yT(t,r,d.au);const p=new GO(e,r,c);return t.Tu.set(e,p),t.Iu.has(r)?t.Iu.get(r).push(e):t.Iu.set(r,[e]),d.snapshot}async function XO(t,e,r){const n=ht(t),a=n.Tu.get(e),o=n.Iu.get(a.targetId);if(o.length>1)return n.Iu.set(a.targetId,o.filter((c=>!I0(c,e)))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await Wv(n.localStore,a.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(a.targetId),r&&Fx(n.remoteStore,a.targetId),Xv(n,a.targetId)})).catch(pu)):(Xv(n,a.targetId),await Wv(n.localStore,a.targetId,!0))}async function QO(t,e){const r=ht(t),n=r.Tu.get(e),a=r.Iu.get(n.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),Fx(r.remoteStore,n.targetId))}async function JO(t,e,r){const n=s6(t);try{const a=await(function(c,h){const m=ht(c),d=nt.now(),p=h.reduce(((E,w)=>E.add(w.key)),Et());let x,y;return m.persistence.runTransaction("Locally write mutations","readwrite",(E=>{let w=xi(),T=Et();return m.Ns.getEntries(E,p).next((b=>{w=b,w.forEach(((A,M)=>{M.isValidDocument()||(T=T.add(A))}))})).next((()=>m.localDocuments.getOverlayedDocuments(E,w))).next((b=>{x=b;const A=[];for(const M of h){const V=fk(M,x.get(M.key).overlayedDocument);V!=null&&A.push(new Lo(M.key,V,ub(V.value.mapValue),Fa.exists(!0)))}return m.mutationQueue.addMutationBatch(E,d,A,h)})).next((b=>{y=b;const A=b.applyToLocalDocumentSet(x,T);return m.documentOverlayCache.saveOverlays(E,b.batchId,A)}))})).then((()=>({batchId:y.batchId,changes:Eb(x)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(a.batchId),(function(c,h,m){let d=c.Vu[c.currentUser.toKey()];d||(d=new hr(_t)),d=d.insert(h,m),c.Vu[c.currentUser.toKey()]=d})(n,a.batchId,r),await Fd(n,a.changes),await V0(n.remoteStore)}catch(a){const o=zx(a,"Failed to persist write");r.reject(o)}}async function aS(t,e){const r=ht(t);try{const n=await hO(r.localStore,e);e.targetChanges.forEach(((a,o)=>{const c=r.Au.get(o);c&&(kt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?kt(c.hu,14607):a.removedDocuments.size>0&&(kt(c.hu,42227),c.hu=!1))})),await Fd(r,n,e)}catch(n){await pu(n)}}function xT(t,e,r){const n=ht(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const a=[];n.Tu.forEach(((o,c)=>{const h=c.view.va(e);h.snapshot&&a.push(h.snapshot)})),(function(c,h){const m=ht(c);m.onlineState=h;let d=!1;m.queries.forEach(((p,x)=>{for(const y of x.Sa)y.va(h)&&(d=!0)})),d&&Hx(m)})(n.eventManager,e),a.length&&n.Pu.H_(a),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function ZO(t,e,r){const n=ht(t);n.sharedClientState.updateQueryState(e,"rejected",r);const a=n.Au.get(e),o=a&&a.key;if(o){let c=new hr(et.comparator);c=c.insert(o,wn.newNoDocument(o,lt.min()));const h=Et().add(o),m=new P0(lt.min(),new Map,new hr(_t),c,h);await aS(n,m),n.du=n.du.remove(o),n.Au.delete(e),qx(n)}else await Wv(n.localStore,e,!1).then((()=>Xv(n,e,r))).catch(pu)}async function e6(t,e){const r=ht(t),n=e.batch.batchId;try{const a=await uO(r.localStore,e);iS(r,n,null),sS(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Fd(r,a)}catch(a){await pu(a)}}async function t6(t,e,r){const n=ht(t);try{const a=await(function(c,h){const m=ht(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",(d=>{let p;return m.mutationQueue.lookupMutationBatch(d,h).next((x=>(kt(x!==null,37113),p=x.keys(),m.mutationQueue.removeMutationBatch(d,x)))).next((()=>m.mutationQueue.performConsistencyCheck(d))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(d,p,h))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p))).next((()=>m.localDocuments.getDocuments(d,p)))}))})(n.localStore,e);iS(n,e,r),sS(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Fd(n,a)}catch(a){await pu(a)}}function sS(t,e){(t.mu.get(e)||[]).forEach((r=>{r.resolve()})),t.mu.delete(e)}function iS(t,e,r){const n=ht(t);let a=n.Vu[n.currentUser.toKey()];if(a){const o=a.get(e);o&&(r?o.reject(r):o.resolve(),a=a.remove(e)),n.Vu[n.currentUser.toKey()]=a}}function Xv(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Iu.get(e))t.Tu.delete(n),r&&t.Pu.yu(n,r);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((n=>{t.Ru.containsKey(n)||oS(t,n)}))}function oS(t,e){t.Eu.delete(e.path.canonicalString());const r=t.du.get(e);r!==null&&(Fx(t.remoteStore,r),t.du=t.du.remove(e),t.Au.delete(r),qx(t))}function yT(t,e,r){for(const n of r)n instanceof tS?(t.Ru.addReference(n.key,e),r6(t,n)):n instanceof rS?($e(Gx,"Document no longer in limbo: "+n.key),t.Ru.removeReference(n.key,e),t.Ru.containsKey(n.key)||oS(t,n.key)):st(19791,{wu:n})}function r6(t,e){const r=e.key,n=r.path.canonicalString();t.du.get(r)||t.Eu.has(n)||($e(Gx,"New document in limbo: "+r),t.Eu.add(n),qx(t))}function qx(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const r=new et(tr.fromString(e)),n=t.fu.next();t.Au.set(n,new qO(r)),t.du=t.du.insert(r,n),$b(t.remoteStore,new po(js(Ax(r.path)),n,"TargetPurposeLimboResolution",j0.ce))}}async function Fd(t,e,r){const n=ht(t),a=[],o=[],c=[];n.Tu.isEmpty()||(n.Tu.forEach(((h,m)=>{c.push(n.pu(m,e,r).then((d=>{if((d||r)&&n.isPrimaryClient){const p=d?!d.fromCache:r?.targetChanges.get(m.targetId)?.current;n.sharedClientState.updateQueryState(m.targetId,p?"current":"not-current")}if(d){a.push(d);const p=Mx.As(m.targetId,d);o.push(p)}})))})),await Promise.all(c),n.Pu.H_(a),await(async function(m,d){const p=ht(m);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(x=>be.forEach(d,(y=>be.forEach(y.Es,(E=>p.persistence.referenceDelegate.addReference(x,y.targetId,E))).next((()=>be.forEach(y.ds,(E=>p.persistence.referenceDelegate.removeReference(x,y.targetId,E)))))))))}catch(x){if(!gu(x))throw x;$e(Px,"Failed to update sequence numbers: "+x)}for(const x of d){const y=x.targetId;if(!x.fromCache){const E=p.Ms.get(y),w=E.snapshotVersion,T=E.withLastLimboFreeSnapshotVersion(w);p.Ms=p.Ms.insert(y,T)}}})(n.localStore,o))}async function n6(t,e){const r=ht(t);if(!r.currentUser.isEqual(e)){$e(Gx,"User change. New user:",e.toKey());const n=await zb(r.localStore,e);r.currentUser=e,(function(o,c){o.mu.forEach((h=>{h.forEach((m=>{m.reject(new qe(we.CANCELLED,c))}))})),o.mu.clear()})(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Fd(r,n.Ls)}}function a6(t,e){const r=ht(t),n=r.Au.get(e);if(n&&n.hu)return Et().add(n.key);{let a=Et();const o=r.Iu.get(e);if(!o)return a;for(const c of o){const h=r.Tu.get(c);a=a.unionWith(h.view.nu)}return a}}function lS(t){const e=ht(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=aS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=a6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ZO.bind(null,e),e.Pu.H_=UO.bind(null,e.eventManager),e.Pu.yu=zO.bind(null,e.eventManager),e}function s6(t){const e=ht(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=e6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=t6.bind(null,e),e}class a0{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=F0(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,r){return null}Mu(e,r){return null}vu(e){return cO(this.persistence,new iO,e.initialUser,this.serializer)}Cu(e){return new Ub(Ox.mi,this.serializer)}Du(e){return new gO}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}a0.provider={build:()=>new a0};class i6 extends a0{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,r){kt(this.persistence.referenceDelegate instanceof r0,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new qk(n,e.asyncQueue,r)}Cu(e){const r=this.cacheSizeBytes!==void 0?Yn.withCacheSize(this.cacheSizeBytes):Yn.DEFAULT;return new Ub((n=>r0.mi(n,r)),this.serializer)}}class Qv{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>xT(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=n6.bind(null,this.syncEngine),await LO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new BO})()}createDatastore(e){const r=F0(e.databaseInfo.databaseId),n=(function(o){return new EO(o)})(e.databaseInfo);return(function(o,c,h,m){return new bO(o,c,h,m)})(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return(function(n,a,o,c,h){return new AO(n,a,o,c,h)})(this.localStore,this.datastore,e.asyncQueue,(r=>xT(this.syncEngine,r,0)),(function(){return dT.v()?new dT:new vO})())}createSyncEngine(e,r){return(function(a,o,c,h,m,d,p){const x=new $O(a,o,c,h,m,d);return p&&(x.gu=!0),x})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){await(async function(r){const n=ht(r);$e(kl,"RemoteStore shutting down."),n.Ea.add(5),await Pd(n),n.Aa.shutdown(),n.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Qv.provider={build:()=>new Qv};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):vi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,r){setTimeout((()=>{this.muted||e(r)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jo="FirestoreClient";class o6{constructor(e,r,n,a,o){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=a,this.user=Tn.UNAUTHENTICATED,this.clientId=Ex.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(n,(async c=>{$e(jo,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(n,(c=>($e(jo,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ui;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=zx(r,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function fv(t,e){t.asyncQueue.verifyOperationInProgress(),$e(jo,"Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener((async a=>{n.isEqual(a)||(await zb(e.localStore,a),n=a)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function _T(t,e){t.asyncQueue.verifyOperationInProgress();const r=await l6(t);$e(jo,"Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener((n=>mT(e.remoteStore,n))),t.setAppCheckTokenChangeListener(((n,a)=>mT(e.remoteStore,a))),t._onlineComponents=e}async function l6(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){$e(jo,"Using user provided OfflineComponentProvider");try{await fv(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!(function(a){return a.name==="FirebaseError"?a.code===we.FAILED_PRECONDITION||a.code===we.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(r))throw r;nu("Error using user provided cache. Falling back to memory cache: "+r),await fv(t,new a0)}}else $e(jo,"Using default OfflineComponentProvider"),await fv(t,new i6(void 0));return t._offlineComponents}async function uS(t){return t._onlineComponents||(t._uninitializedComponentsProvider?($e(jo,"Using user provided OnlineComponentProvider"),await _T(t,t._uninitializedComponentsProvider._online)):($e(jo,"Using default OnlineComponentProvider"),await _T(t,new Qv))),t._onlineComponents}function c6(t){return uS(t).then((e=>e.syncEngine))}async function hS(t){const e=await uS(t),r=e.eventManager;return r.onListen=WO.bind(null,e.syncEngine),r.onUnlisten=XO.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=YO.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=QO.bind(null,e.syncEngine),r}function u6(t,e,r={}){const n=new ui;return t.asyncQueue.enqueueAndForget((async()=>(function(o,c,h,m,d){const p=new cS({next:y=>{p.Nu(),c.enqueueAndForget((()=>Zb(o,x)));const E=y.docs.has(h);!E&&y.fromCache?d.reject(new qe(we.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&y.fromCache&&m&&m.source==="server"?d.reject(new qe(we.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(y)},error:y=>d.reject(y)}),x=new eS(Ax(h.path),p,{includeMetadataChanges:!0,qa:!0});return Jb(o,x)})(await hS(t),t.asyncQueue,e,r,n))),n.promise}function h6(t,e,r={}){const n=new ui;return t.asyncQueue.enqueueAndForget((async()=>(function(o,c,h,m,d){const p=new cS({next:y=>{p.Nu(),c.enqueueAndForget((()=>Zb(o,x))),y.fromCache&&m.source==="server"?d.reject(new qe(we.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(y)},error:y=>d.reject(y)}),x=new eS(h,p,{includeMetadataChanges:!0,qa:!0});return Jb(o,x)})(await hS(t),t.asyncQueue,e,r,n))),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS="firestore.googleapis.com",TT=!0;class wT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new qe(we.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=fS,this.ssl=TT}else this.host=e.host,this.ssl=e.ssl??TT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Bb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Hk)throw new qe(we.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}A3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=dS(e.experimentalLongPollingOptions??{}),(function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new qe(we.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new qe(we.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new qe(we.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,a){return n.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class B0{constructor(e,r,n,a){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new qe(we.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new qe(we.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new v3;switch(n.type){case"firstParty":return new E3(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new qe(we.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(r){const n=ET.get(r);n&&($e("ComponentProvider","Removing Datastore"),ET.delete(r),n.terminate())})(this),Promise.resolve()}}function d6(t,e,r,n={}){t=os(t,B0);const a=hu(e),o=t._getSettings(),c={...o,emulatorOptions:t._getEmulatorOptions()},h=`${e}:${r}`;a&&(nN(`https://${h}`),aN("Firestore",!0)),o.host!==fS&&o.host!==h&&nu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...o,host:h,ssl:a,emulatorOptions:n};if(!Cl(m,c)&&(t._setSettings(m),n.mockUserToken)){let d,p;if(typeof n.mockUserToken=="string")d=n.mockUserToken,p=Tn.MOCK_USER;else{d=AR(n.mockUserToken,t._app?.options.projectId);const x=n.mockUserToken.sub||n.mockUserToken.user_id;if(!x)throw new qe(we.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Tn(x)}t._authCredentials=new x3(new JN(d,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Bl(this.firestore,e,this._query)}}class wr{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new To(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wr(this.firestore,e,this._key)}toJSON(){return{type:wr._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,r,n){if(kd(r,wr._jsonSchema))return new wr(e,n||null,new et(tr.fromString(r.referencePath)))}}wr._jsonSchemaVersion="firestore/documentReference/1.0",wr._jsonSchema={type:Dr("string",wr._jsonSchemaVersion),referencePath:Dr("string")};class To extends Bl{constructor(e,r,n){super(e,r,Ax(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wr(this.firestore,null,new et(e))}withConverter(e){return new To(this.firestore,e,this._path)}}function gr(t,e,...r){if(t=Zr(t),ZN("collection","path",e),t instanceof B0){const n=tr.fromString(e,...r);return PE(n),new To(t,null,n)}{if(!(t instanceof wr||t instanceof To))throw new qe(we.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(tr.fromString(e,...r));return PE(n),new To(t.firestore,null,n)}}function sr(t,e,...r){if(t=Zr(t),arguments.length===1&&(e=Ex.newId()),ZN("doc","path",e),t instanceof B0){const n=tr.fromString(e,...r);return ME(n),new wr(t,null,new et(n))}{if(!(t instanceof wr||t instanceof To))throw new qe(we.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(tr.fromString(e,...r));return ME(n),new wr(t.firestore,t instanceof To?t.converter:null,new et(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT="AsyncQueue";class bT{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Gb(this,"async_queue_retry"),this._c=()=>{const n=dv();n&&$e(NT,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const r=dv();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const r=dv();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const r=new ui;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise))).then((()=>r.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!gu(e))throw e;$e(NT,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const r=this.ac.then((()=>(this.rc=!0,e().catch((n=>{throw this.nc=n,this.rc=!1,vi("INTERNAL UNHANDLED ERROR: ",ST(n)),n})).then((n=>(this.rc=!1,n))))));return this.ac=r,r}enqueueAfterDelay(e,r,n){this.uc(),this.oc.indexOf(e)>-1&&(r=0);const a=Ux.createAndSchedule(this,e,r,n,(o=>this.hc(o)));return this.tc.push(a),a}uc(){this.nc&&st(47125,{Pc:ST(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const r of this.tc)if(r.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((r,n)=>r.targetTimeMs-n.targetTimeMs));for(const r of this.tc)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const r=this.tc.indexOf(e);this.tc.splice(r,1)}}function ST(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Ul extends B0{constructor(e,r,n,a){super(e,r,n,a),this.type="firestore",this._queue=new bT,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new bT(e),this._firestoreClient=void 0,await e}}}function f6(t,e){const r=typeof t=="object"?t:lN(),n=typeof t=="string"?t:Xm,a=hx(r,"firestore").getImmediate({identifier:n});if(!a._initialized){const o=bR("firestore");o&&d6(a,...o)}return a}function $x(t){if(t._terminated)throw new qe(we.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||m6(t),t._firestoreClient}function m6(t){const e=t._freezeSettings(),r=(function(a,o,c,h){return new L3(a,o,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,dS(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new o6(t._authCredentials,t._appCheckCredentials,t._queue,r,t._componentsProvider&&(function(a){const o=a?._online.build();return{_offline:a?._offline.build(o),_online:o}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pa(pn.fromBase64String(e))}catch(r){throw new qe(we.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Pa(pn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Pa._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(kd(e,Pa._jsonSchema))return Pa.fromBase64String(e.bytes)}}Pa._jsonSchemaVersion="firestore/bytes/1.0",Pa._jsonSchema={type:Dr("string",Pa._jsonSchemaVersion),bytes:Dr("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new qe(we.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new cn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new qe(we.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new qe(we.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return _t(this._lat,e._lat)||_t(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ds._jsonSchemaVersion}}static fromJSON(e){if(kd(e,Ds._jsonSchema))return new Ds(e.latitude,e.longitude)}}Ds._jsonSchemaVersion="firestore/geoPoint/1.0",Ds._jsonSchema={type:Dr("string",Ds._jsonSchemaVersion),latitude:Dr("number"),longitude:Dr("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e){this._values=(e||[]).map((r=>r))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,a){if(n.length!==a.length)return!1;for(let o=0;o<n.length;++o)if(n[o]!==a[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Is._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(kd(e,Is._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((r=>typeof r=="number")))return new Is(e.vectorValues);throw new qe(we.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Is._jsonSchemaVersion="firestore/vectorValue/1.0",Is._jsonSchema={type:Dr("string",Is._jsonSchemaVersion),vectorValues:Dr("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p6=/^__.*__$/;class g6{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new Lo(e,this.data,this.fieldMask,r,this.fieldTransforms):new Od(e,this.data,r,this.fieldTransforms)}}class mS{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new Lo(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function pS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw st(40011,{Ac:t})}}class Yx{constructor(e,r,n,a,o,c){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=a,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Yx({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const r=this.path?.child(e),n=this.Vc({path:r,fc:!1});return n.gc(e),n}yc(e){const r=this.path?.child(e),n=this.Vc({path:r,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return s0(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((r=>e.isPrefixOf(r)))!==void 0||this.fieldTransforms.find((r=>e.isPrefixOf(r.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(pS(this.Ac)&&p6.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class v6{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||F0(e)}Cc(e,r,n,a=!1){return new Yx({Ac:e,methodName:r,Dc:n,path:cn.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function z0(t){const e=t._freezeSettings(),r=F0(t._databaseId);return new v6(t._databaseId,!!e.ignoreUndefinedProperties,r)}function gS(t,e,r,n,a,o={}){const c=t.Cc(o.merge||o.mergeFields?2:0,e,r,a);Kx("Data must be an object, but it was:",c,n);const h=vS(n,c);let m,d;if(o.merge)m=new va(c.fieldMask),d=c.fieldTransforms;else if(o.mergeFields){const p=[];for(const x of o.mergeFields){const y=Jv(e,x,r);if(!c.contains(y))throw new qe(we.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);yS(p,y)||p.push(y)}m=new va(p),d=c.fieldTransforms.filter((x=>m.covers(x.field)))}else m=null,d=c.fieldTransforms;return new g6(new Kn(h),m,d)}class H0 extends Wx{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof H0}}function x6(t,e,r,n){const a=t.Cc(1,e,r);Kx("Data must be an object, but it was:",a,n);const o=[],c=Kn.empty();Fo(n,((m,d)=>{const p=Xx(e,m,r);d=Zr(d);const x=a.yc(p);if(d instanceof H0)o.push(p);else{const y=Ld(d,x);y!=null&&(o.push(p),c.set(p,y))}}));const h=new va(o);return new mS(c,h,a.fieldTransforms)}function y6(t,e,r,n,a,o){const c=t.Cc(1,e,r),h=[Jv(e,n,r)],m=[a];if(o.length%2!=0)throw new qe(we.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<o.length;y+=2)h.push(Jv(e,o[y])),m.push(o[y+1]);const d=[],p=Kn.empty();for(let y=h.length-1;y>=0;--y)if(!yS(d,h[y])){const E=h[y];let w=m[y];w=Zr(w);const T=c.yc(E);if(w instanceof H0)d.push(E);else{const b=Ld(w,T);b!=null&&(d.push(E),p.set(E,b))}}const x=new va(d);return new mS(p,x,c.fieldTransforms)}function _6(t,e,r,n=!1){return Ld(r,t.Cc(n?4:3,e))}function Ld(t,e){if(xS(t=Zr(t)))return Kx("Unsupported field value:",e,t),vS(t,e);if(t instanceof Wx)return(function(n,a){if(!pS(a.Ac))throw a.Sc(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${n._methodName}() is not currently supported inside arrays`);const o=n._toFieldTransform(a);o&&a.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(n,a){const o=[];let c=0;for(const h of n){let m=Ld(h,a.wc(c));m==null&&(m={nullValue:"NULL_VALUE"}),o.push(m),c++}return{arrayValue:{values:o}}})(t,e)}return(function(n,a){if((n=Zr(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return ok(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const o=nt.fromDate(n);return{timestampValue:t0(a.serializer,o)}}if(n instanceof nt){const o=new nt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:t0(a.serializer,o)}}if(n instanceof Ds)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Pa)return{bytesValue:kb(a.serializer,n._byteString)};if(n instanceof wr){const o=a.databaseId,c=n.firestore._databaseId;if(!c.isEqual(o))throw a.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Ix(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof Is)return(function(c,h){return{mapValue:{fields:{[lb]:{stringValue:cb},[Qm]:{arrayValue:{values:c.toArray().map((d=>{if(typeof d!="number")throw h.Sc("VectorValues must only contain numeric values.");return Cx(h.serializer,d)}))}}}}}})(n,a);throw a.Sc(`Unsupported field value: ${C0(n)}`)})(t,e)}function vS(t,e){const r={};return rb(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fo(t,((n,a)=>{const o=Ld(a,e.mc(n));o!=null&&(r[n]=o)})),{mapValue:{fields:r}}}function xS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof nt||t instanceof Ds||t instanceof Pa||t instanceof wr||t instanceof Wx||t instanceof Is)}function Kx(t,e,r){if(!xS(r)||!eb(r)){const n=C0(r);throw n==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+n)}}function Jv(t,e,r){if((e=Zr(e))instanceof U0)return e._internalPath;if(typeof e=="string")return Xx(t,e);throw s0("Field path arguments must be of type string or ",t,!1,void 0,r)}const E6=new RegExp("[~\\*/\\[\\]]");function Xx(t,e,r){if(e.search(E6)>=0)throw s0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new U0(...e.split("."))._internalPath}catch{throw s0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function s0(t,e,r,n,a){const o=n&&!n.isEmpty(),c=a!==void 0;let h=`Function ${e}() called with invalid data`;r&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(o||c)&&(m+=" (found",o&&(m+=` in field ${n}`),c&&(m+=` in document ${a}`),m+=")"),new qe(we.INVALID_ARGUMENT,h+t+m)}function yS(t,e){return t.some((r=>r.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e,r,n,a,o){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=a,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new wr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new T6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(G0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class T6 extends _S{data(){return super.data()}}function G0(t,e){return typeof e=="string"?Xx(t,e):e instanceof U0?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w6(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new qe(we.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Qx{}class ES extends Qx{}function Tt(t,e,...r){let n=[];e instanceof Qx&&n.push(e),n=n.concat(r),(function(o){const c=o.filter((m=>m instanceof Jx)).length,h=o.filter((m=>m instanceof q0)).length;if(c>1||c>0&&h>0)throw new qe(we.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const a of n)t=a._apply(t);return t}class q0 extends ES{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new q0(e,r,n)}_apply(e){const r=this._parse(e);return TS(e._query,r),new Bl(e.firestore,e.converter,Uv(e._query,r))}_parse(e){const r=z0(e.firestore);return(function(o,c,h,m,d,p,x){let y;if(d.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new qe(we.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){CT(x,p);const w=[];for(const T of x)w.push(AT(m,o,T));y={arrayValue:{values:w}}}else y=AT(m,o,x)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||CT(x,p),y=_6(h,c,x,p==="in"||p==="not-in");return Rr.create(d,p,y)})(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function bt(t,e,r){const n=e,a=G0("where",t);return q0._create(a,n,r)}class Jx extends Qx{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new Jx(e,r)}_parse(e){const r=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return r.length===1?r[0]:ls.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:((function(a,o){let c=a;const h=o.getFlattenedFilters();for(const m of h)TS(c,m),c=Uv(c,m)})(e._query,r),new Bl(e.firestore,e.converter,Uv(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Zx extends ES{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new Zx(e,r)}_apply(e){const r=(function(a,o,c){if(a.startAt!==null)throw new qe(we.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new qe(we.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new pd(o,c)})(e._query,this._field,this._direction);return new Bl(e.firestore,e.converter,(function(a,o){const c=a.explicitOrderBy.concat([o]);return new vu(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,r))}}function Ni(t,e="asc"){const r=e,n=G0("orderBy",t);return Zx._create(n,r)}function AT(t,e,r){if(typeof(r=Zr(r))=="string"){if(r==="")throw new qe(we.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!vb(e)&&r.indexOf("/")!==-1)throw new qe(we.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(tr.fromString(r));if(!et.isDocumentKey(n))throw new qe(we.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return GE(t,new et(n))}if(r instanceof wr)return GE(t,r._key);throw new qe(we.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${C0(r)}.`)}function CT(t,e){if(!Array.isArray(t)||t.length===0)throw new qe(we.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function TS(t,e){const r=(function(a,o){for(const c of a)for(const h of c.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null})(t.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(r!==null)throw r===e.op?new qe(we.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new qe(we.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class N6{convertValue(e,r="none"){switch(Ao(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(So(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw st(62114,{value:e})}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return Fo(e,((a,o)=>{n[a]=this.convertValue(o,r)})),n}convertVectorValue(e){const r=e.fields?.[Qm].arrayValue?.values?.map((n=>Tr(n.doubleValue)));return new Is(r)}convertGeoPoint(e){return new Ds(Tr(e.latitude),Tr(e.longitude))}convertArray(e,r){return(e.values||[]).map((n=>this.convertValue(n,r)))}convertServerTimestamp(e,r){switch(r){case"previous":const n=D0(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(dd(e));default:return null}}convertTimestamp(e){const r=bo(e);return new nt(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=tr.fromString(e);kt(Vb(n),9688,{name:e});const a=new fd(n.get(1),n.get(3)),o=new et(n.popFirst(5));return a.isEqual(r)||vi(`Document ${o} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wS(t,e,r){let n;return n=t?t.toFirestore(e):e,n}class qh{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Nl extends _S{constructor(e,r,n,a,o,c){super(e,r,n,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Lm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(G0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new qe(we.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,r={};return r.type=Nl._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}Nl._jsonSchemaVersion="firestore/documentSnapshot/1.0",Nl._jsonSchema={type:Dr("string",Nl._jsonSchemaVersion),bundleSource:Dr("string","DocumentSnapshot"),bundleName:Dr("string"),bundle:Dr("string")};class Lm extends Nl{data(e={}){return super.data(e)}}class Xc{constructor(e,r,n,a){this._firestore=e,this._userDataWriter=r,this._snapshot=a,this.metadata=new qh(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const e=[];return this.forEach((r=>e.push(r))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach((n=>{e.call(r,new Lm(this._firestore,this._userDataWriter,n.key,n,new qh(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new qe(we.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=(function(a,o){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((h=>{const m=new Lm(a._firestore,a._userDataWriter,h.doc.key,h.doc,new qh(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);return h.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((h=>o||h.type!==3)).map((h=>{const m=new Lm(a._firestore,a._userDataWriter,h.doc.key,h.doc,new qh(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);let d=-1,p=-1;return h.type!==0&&(d=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),p=c.indexOf(h.doc.key)),{type:b6(h.type),doc:m,oldIndex:d,newIndex:p}}))}})(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new qe(we.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Xc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ex.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],a=[];return this.docs.forEach((o=>{o._document!==null&&(r.push(o._document),n.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),a.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function b6(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return st(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ro(t){t=os(t,wr);const e=os(t.firestore,Ul);return u6($x(e),t._key).then((r=>S6(e,t,r)))}Xc._jsonSchemaVersion="firestore/querySnapshot/1.0",Xc._jsonSchema={type:Dr("string",Xc._jsonSchemaVersion),bundleSource:Dr("string","QuerySnapshot"),bundleName:Dr("string"),bundle:Dr("string")};class NS extends N6{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pa(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new wr(this.firestore,null,r)}}function Ln(t){t=os(t,Bl);const e=os(t.firestore,Ul),r=$x(e),n=new NS(e);return w6(t._query),h6(r,t._query).then((a=>new Xc(e,n,t,a)))}function jT(t,e,r){t=os(t,wr);const n=os(t.firestore,Ul),a=wS(t.converter,e);return $0(n,[gS(z0(n),"setDoc",t._key,a,t.converter!==null,r).toMutation(t._key,Fa.none())])}function zl(t,e,r,...n){t=os(t,wr);const a=os(t.firestore,Ul),o=z0(a);let c;return c=typeof(e=Zr(e))=="string"||e instanceof U0?y6(o,"updateDoc",t._key,e,r,n):x6(o,"updateDoc",t._key,e),$0(a,[c.toMutation(t._key,Fa.exists(!0))])}function yu(t){return $0(os(t.firestore,Ul),[new jx(t._key,Fa.none())])}function Hl(t,e){const r=os(t.firestore,Ul),n=sr(t),a=wS(t.converter,e);return $0(r,[gS(z0(t.firestore),"addDoc",n._key,a,t.converter!==null,{}).toMutation(n._key,Fa.exists(!1))]).then((()=>n))}function $0(t,e){return(function(n,a){const o=new ui;return n.asyncQueue.enqueueAndForget((async()=>JO(await c6(n),a,o))),o.promise})($x(t),e)}function S6(t,e,r){const n=r.docs.get(e._key),a=new NS(t);return new Nl(t,a,e._key,n,new qh(r.hasPendingWrites,r.fromCache),e.converter)}(function(e,r=!0){(function(a){mu=a})(du),ru(new jl("firestore",((n,{instanceIdentifier:a,options:o})=>{const c=n.getProvider("app").getImmediate(),h=new Ul(new y3(n.getProvider("auth-internal")),new T3(c,n.getProvider("app-check-internal")),(function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new qe(we.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fd(d.options.projectId,p)})(c,a),c);return o={useFetchStreams:r,...o},h._setSettings(o),h}),"PUBLIC").setMultipleInstances(!0)),_o(DE,IE,e),_o(DE,IE,"esm2020")})();const A6={apiKey:"AIzaSyCuHqkq6JPf8nlBxPMOI14cq7bV46W_5DY",authDomain:"giogio-158b6.firebaseapp.com",projectId:"giogio-158b6",storageBucket:"giogio-158b6.firebasestorage.app",messagingSenderId:"47400008227",appId:"1:47400008227:web:bfb519bd74346697adcf96"},bS=oN(A6),xm=p3(bS),ct=f6(bS);function Qc(t){if(typeof t=="string")return t;switch(t?.code||""){case"auth/user-not-found":return"Usurio no encontrado. Verifique seu email.";case"auth/wrong-password":return"Senha incorreta. Tente novamente.";case"auth/invalid-email":return"Email invlido. Verifique o formato.";case"auth/too-many-requests":return"Muitas tentativas. Tente novamente em alguns minutos.";case"auth/user-disabled":return"Conta desabilitada. Entre em contato com o suporte.";case"auth/network-request-failed":return"Erro de conexo. Verifique sua internet.";case"auth/invalid-api-key":return"Erro de configurao. Entre em contato com o suporte.";default:return"Erro inesperado. Tente novamente."}}const mv={async logOut(){try{await aI(xm)}catch(t){const e=Qc(t);throw new Error(e)}},async login(t){try{const r=(await eI(xm,t.email,t.password)).user,n=await Ro(sr(ct,"users",r.uid));if(!n.exists())throw new Error("User not found");const o={...n.data(),lastLogin:new Date};return await jT(sr(ct,"users",r.uid),o),o}catch(e){const r=Qc(e);throw new Error(r)}},async register(t){try{if(!t.email||!t.password||!t.name)throw new Error("Todos os campos so obrigatrios");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.email))throw new Error("Email invlido");if(t.password.length<6)throw new Error("A senha deve ter pelo menos 6 caracteres");const n=(await ZD(xm,t.email.trim(),t.password)).user,a={uid:n.uid,email:t.email.trim(),name:t.name.trim(),phone:t.phone||"",role:t.role||"admin",createdAt:new Date,updatedAt:new Date};return await jT(sr(ct,"users",n.uid),a),a}catch(e){if(e instanceof Error)if(e.message.includes("auth/email-already-in-use"))try{return await this.login({email:t.email,password:t.password})}catch{throw new Error("Este email j est em uso. Verifique suas credenciais ou use outro email.")}else throw e.message.includes("auth/weak-password")?new Error("A senha  muito fraca. Use pelo menos 6 caracteres."):e.message.includes("auth/invalid-email")?new Error("Email invlido. Verifique o formato do email."):e.message.includes("auth/operation-not-allowed")?new Error("Operao no permitida. Contate o administrador."):new Error(e.message);const r=Qc(e);throw new Error(r)}},observeAuthState(t){try{return nI(xm,async e=>{if(e)try{const r=await Ro(sr(ct,"users",e.uid));if(r.exists()){const n=r.data();t(n)}else t(null)}catch{t(null)}else t(null)})}catch(e){throw new Error("Erro ao observar estado de autenticao: "+e)}}},SS=B.createContext(void 0);function C6({children:t}){const[e,r]=B.useState(null),[n,a]=B.useState(!0),[o,c]=B.useState(null);B.useEffect(()=>{r(null),a(!1)},[]);const x={user:e,loading:n,error:o,login:async y=>{try{a(!0),c(null);const E=await mv.login(y);r(E),a(!1)}catch(E){const w=Qc(E);c(w),a(!1),r(null)}},register:async y=>{try{a(!0),c(null);const E=await mv.register(y);r(E),a(!1)}catch(E){const w=Qc(E);throw c(w),a(!1),r(null),E}},logout:async()=>{try{a(!0),c(null),await mv.logOut(),r(null),a(!1)}catch(y){const E=Qc(y);c(E),a(!1)}},clearError:()=>{c(null)}};return i.jsx(SS.Provider,{value:x,children:t})}/**
 * react-router v7.9.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var RT="popstate";function j6(t={}){function e(n,a){let{pathname:o,search:c,hash:h}=n.location;return Zv("",{pathname:o,search:c,hash:h},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:xd(a)}return D6(e,r,null,t)}function ir(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function cs(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function R6(){return Math.random().toString(36).substring(2,10)}function DT(t,e){return{usr:t.state,key:t.key,idx:e}}function Zv(t,e,r=null,n){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?_u(e):e,state:r,key:e&&e.key||n||R6()}}function xd({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function _u(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substring(n),t=t.substring(0,n)),t&&(e.pathname=t)}return e}function D6(t,e,r,n={}){let{window:a=document.defaultView,v5Compat:o=!1}=n,c=a.history,h="POP",m=null,d=p();d==null&&(d=0,c.replaceState({...c.state,idx:d},""));function p(){return(c.state||{idx:null}).idx}function x(){h="POP";let b=p(),A=b==null?null:b-d;d=b,m&&m({action:h,location:T.location,delta:A})}function y(b,A){h="PUSH";let M=Zv(T.location,b,A);d=p()+1;let V=DT(M,d),H=T.createHref(M);try{c.pushState(V,"",H)}catch(re){if(re instanceof DOMException&&re.name==="DataCloneError")throw re;a.location.assign(H)}o&&m&&m({action:h,location:T.location,delta:1})}function E(b,A){h="REPLACE";let M=Zv(T.location,b,A);d=p();let V=DT(M,d),H=T.createHref(M);c.replaceState(V,"",H),o&&m&&m({action:h,location:T.location,delta:0})}function w(b){return I6(b)}let T={get action(){return h},get location(){return t(a,c)},listen(b){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(RT,x),m=b,()=>{a.removeEventListener(RT,x),m=null}},createHref(b){return e(a,b)},createURL:w,encodeLocation(b){let A=w(b);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:y,replace:E,go(b){return c.go(b)}};return T}function I6(t,e=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),ir(r,"No window.location.(origin|href) available to create URL");let n=typeof t=="string"?t:xd(t);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function AS(t,e,r="/"){return k6(t,e,r,!1)}function k6(t,e,r,n){let a=typeof e=="string"?_u(e):e,o=yi(a.pathname||"/",r);if(o==null)return null;let c=CS(t);O6(c);let h=null;for(let m=0;h==null&&m<c.length;++m){let d=q6(o);h=H6(c[m],d,n)}return h}function CS(t,e=[],r=[],n="",a=!1){let o=(c,h,m=a,d)=>{let p={relativePath:d===void 0?c.path||"":d,caseSensitive:c.caseSensitive===!0,childrenIndex:h,route:c};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(n)&&m)return;ir(p.relativePath.startsWith(n),`Absolute route path "${p.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(n.length)}let x=hi([n,p.relativePath]),y=r.concat(p);c.children&&c.children.length>0&&(ir(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${x}".`),CS(c.children,e,y,x,m)),!(c.path==null&&!c.index)&&e.push({path:x,score:U6(x,c.index),routesMeta:y})};return t.forEach((c,h)=>{if(c.path===""||!c.path?.includes("?"))o(c,h);else for(let m of jS(c.path))o(c,h,!0,m)}),e}function jS(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,a=r.endsWith("?"),o=r.replace(/\?$/,"");if(n.length===0)return a?[o,""]:[o];let c=jS(n.join("/")),h=[];return h.push(...c.map(m=>m===""?o:[o,m].join("/"))),a&&h.push(...c),h.map(m=>t.startsWith("/")&&m===""?"/":m)}function O6(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:z6(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var M6=/^:[\w-]+$/,P6=3,F6=2,L6=1,V6=10,B6=-2,IT=t=>t==="*";function U6(t,e){let r=t.split("/"),n=r.length;return r.some(IT)&&(n+=B6),e&&(n+=F6),r.filter(a=>!IT(a)).reduce((a,o)=>a+(M6.test(o)?P6:o===""?L6:V6),n)}function z6(t,e){return t.length===e.length&&t.slice(0,-1).every((n,a)=>n===e[a])?t[t.length-1]-e[e.length-1]:0}function H6(t,e,r=!1){let{routesMeta:n}=t,a={},o="/",c=[];for(let h=0;h<n.length;++h){let m=n[h],d=h===n.length-1,p=o==="/"?e:e.slice(o.length)||"/",x=i0({path:m.relativePath,caseSensitive:m.caseSensitive,end:d},p),y=m.route;if(!x&&d&&r&&!n[n.length-1].route.index&&(x=i0({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},p)),!x)return null;Object.assign(a,x.params),c.push({params:a,pathname:hi([o,x.pathname]),pathnameBase:K6(hi([o,x.pathnameBase])),route:y}),x.pathnameBase!=="/"&&(o=hi([o,x.pathnameBase]))}return c}function i0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=G6(t.path,t.caseSensitive,t.end),a=e.match(r);if(!a)return null;let o=a[0],c=o.replace(/(.)\/+$/,"$1"),h=a.slice(1);return{params:n.reduce((d,{paramName:p,isOptional:x},y)=>{if(p==="*"){let w=h[y]||"";c=o.slice(0,o.length-w.length).replace(/(.)\/+$/,"$1")}const E=h[y];return x&&!E?d[p]=void 0:d[p]=(E||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:c,pattern:t}}function G6(t,e=!1,r=!0){cs(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,h,m)=>(n.push({paramName:h,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(n.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),n]}function q6(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return cs(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function yi(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function $6(t,e="/"){let{pathname:r,search:n="",hash:a=""}=typeof t=="string"?_u(t):t;return{pathname:r?r.startsWith("/")?r:W6(r,e):e,search:X6(n),hash:Q6(a)}}function W6(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function pv(t,e,r,n){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Y6(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function e1(t){let e=Y6(t);return e.map((r,n)=>n===e.length-1?r.pathname:r.pathnameBase)}function t1(t,e,r,n=!1){let a;typeof t=="string"?a=_u(t):(a={...t},ir(!a.pathname||!a.pathname.includes("?"),pv("?","pathname","search",a)),ir(!a.pathname||!a.pathname.includes("#"),pv("#","pathname","hash",a)),ir(!a.search||!a.search.includes("#"),pv("#","search","hash",a)));let o=t===""||a.pathname==="",c=o?"/":a.pathname,h;if(c==null)h=r;else{let x=e.length-1;if(!n&&c.startsWith("..")){let y=c.split("/");for(;y[0]==="..";)y.shift(),x-=1;a.pathname=y.join("/")}h=x>=0?e[x]:"/"}let m=$6(a,h),d=c&&c!=="/"&&c.endsWith("/"),p=(o||c===".")&&r.endsWith("/");return!m.pathname.endsWith("/")&&(d||p)&&(m.pathname+="/"),m}var hi=t=>t.join("/").replace(/\/\/+/g,"/"),K6=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),X6=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Q6=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function J6(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var RS=["POST","PUT","PATCH","DELETE"];new Set(RS);var Z6=["GET",...RS];new Set(Z6);var Eu=B.createContext(null);Eu.displayName="DataRouter";var W0=B.createContext(null);W0.displayName="DataRouterState";B.createContext(!1);var DS=B.createContext({isTransitioning:!1});DS.displayName="ViewTransition";var eM=B.createContext(new Map);eM.displayName="Fetchers";var tM=B.createContext(null);tM.displayName="Await";var hs=B.createContext(null);hs.displayName="Navigation";var Vd=B.createContext(null);Vd.displayName="Location";var Fs=B.createContext({outlet:null,matches:[],isDataRoute:!1});Fs.displayName="Route";var r1=B.createContext(null);r1.displayName="RouteError";function rM(t,{relative:e}={}){ir(Tu(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=B.useContext(hs),{hash:a,pathname:o,search:c}=Bd(t,{relative:e}),h=o;return r!=="/"&&(h=o==="/"?r:hi([r,o])),n.createHref({pathname:h,search:c,hash:a})}function Tu(){return B.useContext(Vd)!=null}function bi(){return ir(Tu(),"useLocation() may be used only in the context of a <Router> component."),B.useContext(Vd).location}var IS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function kS(t){B.useContext(hs).static||B.useLayoutEffect(t)}function wu(){let{isDataRoute:t}=B.useContext(Fs);return t?pM():nM()}function nM(){ir(Tu(),"useNavigate() may be used only in the context of a <Router> component.");let t=B.useContext(Eu),{basename:e,navigator:r}=B.useContext(hs),{matches:n}=B.useContext(Fs),{pathname:a}=bi(),o=JSON.stringify(e1(n)),c=B.useRef(!1);return kS(()=>{c.current=!0}),B.useCallback((m,d={})=>{if(cs(c.current,IS),!c.current)return;if(typeof m=="number"){r.go(m);return}let p=t1(m,JSON.parse(o),a,d.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:hi([e,p.pathname])),(d.replace?r.replace:r.push)(p,d.state,d)},[e,r,o,a,t])}B.createContext(null);function Bd(t,{relative:e}={}){let{matches:r}=B.useContext(Fs),{pathname:n}=bi(),a=JSON.stringify(e1(r));return B.useMemo(()=>t1(t,JSON.parse(a),n,e==="path"),[t,a,n,e])}function aM(t,e){return OS(t,e)}function OS(t,e,r,n,a){ir(Tu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=B.useContext(hs),{matches:c}=B.useContext(Fs),h=c[c.length-1],m=h?h.params:{},d=h?h.pathname:"/",p=h?h.pathnameBase:"/",x=h&&h.route;{let M=x&&x.path||"";MS(d,!x||M.endsWith("*")||M.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${M}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${M}"> to <Route path="${M==="/"?"*":`${M}/*`}">.`)}let y=bi(),E;if(e){let M=typeof e=="string"?_u(e):e;ir(p==="/"||M.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${M.pathname}" was given in the \`location\` prop.`),E=M}else E=y;let w=E.pathname||"/",T=w;if(p!=="/"){let M=p.replace(/^\//,"").split("/");T="/"+w.replace(/^\//,"").split("/").slice(M.length).join("/")}let b=AS(t,{pathname:T});cs(x||b!=null,`No routes matched location "${E.pathname}${E.search}${E.hash}" `),cs(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${E.pathname}${E.search}${E.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let A=cM(b&&b.map(M=>Object.assign({},M,{params:Object.assign({},m,M.params),pathname:hi([p,o.encodeLocation?o.encodeLocation(M.pathname).pathname:M.pathname]),pathnameBase:M.pathnameBase==="/"?p:hi([p,o.encodeLocation?o.encodeLocation(M.pathnameBase).pathname:M.pathnameBase])})),c,r,n,a);return e&&A?B.createElement(Vd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...E},navigationType:"POP"}},A):A}function sM(){let t=mM(),e=J6(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},o={padding:"2px 4px",backgroundColor:n},c=null;return console.error("Error handled by React Router default ErrorBoundary:",t),c=B.createElement(B.Fragment,null,B.createElement("p",null," Hey developer "),B.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",B.createElement("code",{style:o},"ErrorBoundary")," or"," ",B.createElement("code",{style:o},"errorElement")," prop on your route.")),B.createElement(B.Fragment,null,B.createElement("h2",null,"Unexpected Application Error!"),B.createElement("h3",{style:{fontStyle:"italic"}},e),r?B.createElement("pre",{style:a},r):null,c)}var iM=B.createElement(sM,null),oM=class extends B.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?B.createElement(Fs.Provider,{value:this.props.routeContext},B.createElement(r1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function lM({routeContext:t,match:e,children:r}){let n=B.useContext(Eu);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),B.createElement(Fs.Provider,{value:t},r)}function cM(t,e=[],r=null,n=null,a=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let o=t,c=r?.errors;if(c!=null){let d=o.findIndex(p=>p.route.id&&c?.[p.route.id]!==void 0);ir(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),o=o.slice(0,Math.min(o.length,d+1))}let h=!1,m=-1;if(r)for(let d=0;d<o.length;d++){let p=o[d];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(m=d),p.route.id){let{loaderData:x,errors:y}=r,E=p.route.loader&&!x.hasOwnProperty(p.route.id)&&(!y||y[p.route.id]===void 0);if(p.route.lazy||E){h=!0,m>=0?o=o.slice(0,m+1):o=[o[0]];break}}}return o.reduceRight((d,p,x)=>{let y,E=!1,w=null,T=null;r&&(y=c&&p.route.id?c[p.route.id]:void 0,w=p.route.errorElement||iM,h&&(m<0&&x===0?(MS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,T=null):m===x&&(E=!0,T=p.route.hydrateFallbackElement||null)));let b=e.concat(o.slice(0,x+1)),A=()=>{let M;return y?M=w:E?M=T:p.route.Component?M=B.createElement(p.route.Component,null):p.route.element?M=p.route.element:M=d,B.createElement(lM,{match:p,routeContext:{outlet:d,matches:b,isDataRoute:r!=null},children:M})};return r&&(p.route.ErrorBoundary||p.route.errorElement||x===0)?B.createElement(oM,{location:r.location,revalidation:r.revalidation,component:w,error:y,children:A(),routeContext:{outlet:null,matches:b,isDataRoute:!0},unstable_onError:n}):A()},null)}function n1(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function uM(t){let e=B.useContext(Eu);return ir(e,n1(t)),e}function hM(t){let e=B.useContext(W0);return ir(e,n1(t)),e}function dM(t){let e=B.useContext(Fs);return ir(e,n1(t)),e}function a1(t){let e=dM(t),r=e.matches[e.matches.length-1];return ir(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function fM(){return a1("useRouteId")}function mM(){let t=B.useContext(r1),e=hM("useRouteError"),r=a1("useRouteError");return t!==void 0?t:e.errors?.[r]}function pM(){let{router:t}=uM("useNavigate"),e=a1("useNavigate"),r=B.useRef(!1);return kS(()=>{r.current=!0}),B.useCallback(async(a,o={})=>{cs(r.current,IS),r.current&&(typeof a=="number"?t.navigate(a):await t.navigate(a,{fromRouteId:e,...o}))},[t,e])}var kT={};function MS(t,e,r){!e&&!kT[t]&&(kT[t]=!0,cs(!1,r))}B.memo(gM);function gM({routes:t,future:e,state:r,unstable_onError:n}){return OS(t,void 0,r,n,e)}function vM({to:t,replace:e,state:r,relative:n}){ir(Tu(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=B.useContext(hs);cs(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=B.useContext(Fs),{pathname:c}=bi(),h=wu(),m=t1(t,e1(o),c,n==="path"),d=JSON.stringify(m);return B.useEffect(()=>{h(JSON.parse(d),{replace:e,state:r,relative:n})},[h,d,n,e,r]),null}function kn(t){ir(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function xM({basename:t="/",children:e=null,location:r,navigationType:n="POP",navigator:a,static:o=!1}){ir(!Tu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),h=B.useMemo(()=>({basename:c,navigator:a,static:o,future:{}}),[c,a,o]);typeof r=="string"&&(r=_u(r));let{pathname:m="/",search:d="",hash:p="",state:x=null,key:y="default"}=r,E=B.useMemo(()=>{let w=yi(m,c);return w==null?null:{location:{pathname:w,search:d,hash:p,state:x,key:y},navigationType:n}},[c,m,d,p,x,y,n]);return cs(E!=null,`<Router basename="${c}"> is not able to match the URL "${m}${d}${p}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:B.createElement(hs.Provider,{value:h},B.createElement(Vd.Provider,{children:e,value:E}))}function yM({children:t,location:e}){return aM(ex(t),e)}function ex(t,e=[]){let r=[];return B.Children.forEach(t,(n,a)=>{if(!B.isValidElement(n))return;let o=[...e,a];if(n.type===B.Fragment){r.push.apply(r,ex(n.props.children,o));return}ir(n.type===kn,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ir(!n.props.index||!n.props.children,"An index route cannot have child routes.");let c={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(c.children=ex(n.props.children,o)),r.push(c)}),r}var Vm="get",Bm="application/x-www-form-urlencoded";function Y0(t){return t!=null&&typeof t.tagName=="string"}function _M(t){return Y0(t)&&t.tagName.toLowerCase()==="button"}function EM(t){return Y0(t)&&t.tagName.toLowerCase()==="form"}function TM(t){return Y0(t)&&t.tagName.toLowerCase()==="input"}function wM(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function NM(t,e){return t.button===0&&(!e||e==="_self")&&!wM(t)}var ym=null;function bM(){if(ym===null)try{new FormData(document.createElement("form"),0),ym=!1}catch{ym=!0}return ym}var SM=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function gv(t){return t!=null&&!SM.has(t)?(cs(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Bm}"`),null):t}function AM(t,e){let r,n,a,o,c;if(EM(t)){let h=t.getAttribute("action");n=h?yi(h,e):null,r=t.getAttribute("method")||Vm,a=gv(t.getAttribute("enctype"))||Bm,o=new FormData(t)}else if(_M(t)||TM(t)&&(t.type==="submit"||t.type==="image")){let h=t.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=t.getAttribute("formaction")||h.getAttribute("action");if(n=m?yi(m,e):null,r=t.getAttribute("formmethod")||h.getAttribute("method")||Vm,a=gv(t.getAttribute("formenctype"))||gv(h.getAttribute("enctype"))||Bm,o=new FormData(h,t),!bM()){let{name:d,type:p,value:x}=t;if(p==="image"){let y=d?`${d}.`:"";o.append(`${y}x`,"0"),o.append(`${y}y`,"0")}else d&&o.append(d,x)}}else{if(Y0(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Vm,n=null,a=Bm,c=t}return o&&a==="text/plain"&&(c=o,o=void 0),{action:n,method:r.toLowerCase(),encType:a,formData:o,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function s1(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function CM(t,e,r){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname=`_root.${r}`:e&&yi(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function jM(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function RM(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function DM(t,e,r){let n=await Promise.all(t.map(async a=>{let o=e.routes[a.route.id];if(o){let c=await jM(o,r);return c.links?c.links():[]}return[]}));return MM(n.flat(1).filter(RM).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function OT(t,e,r,n,a,o){let c=(m,d)=>r[d]?m.route.id!==r[d].route.id:!0,h=(m,d)=>r[d].pathname!==m.pathname||r[d].route.path?.endsWith("*")&&r[d].params["*"]!==m.params["*"];return o==="assets"?e.filter((m,d)=>c(m,d)||h(m,d)):o==="data"?e.filter((m,d)=>{let p=n.routes[m.route.id];if(!p||!p.hasLoader)return!1;if(c(m,d)||h(m,d))return!0;if(m.route.shouldRevalidate){let x=m.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function IM(t,e,{includeHydrateFallback:r}={}){return kM(t.map(n=>{let a=e.routes[n.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),r&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1))}function kM(t){return[...new Set(t)]}function OM(t){let e={},r=Object.keys(t).sort();for(let n of r)e[n]=t[n];return e}function MM(t,e){let r=new Set;return new Set(e),t.reduce((n,a)=>{let o=JSON.stringify(OM(a));return r.has(o)||(r.add(o),n.push({key:o,link:a})),n},[])}function PS(){let t=B.useContext(Eu);return s1(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function PM(){let t=B.useContext(W0);return s1(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var i1=B.createContext(void 0);i1.displayName="FrameworkContext";function FS(){let t=B.useContext(i1);return s1(t,"You must render this element inside a <HydratedRouter> element"),t}function FM(t,e){let r=B.useContext(i1),[n,a]=B.useState(!1),[o,c]=B.useState(!1),{onFocus:h,onBlur:m,onMouseEnter:d,onMouseLeave:p,onTouchStart:x}=e,y=B.useRef(null);B.useEffect(()=>{if(t==="render"&&c(!0),t==="viewport"){let T=A=>{A.forEach(M=>{c(M.isIntersecting)})},b=new IntersectionObserver(T,{threshold:.5});return y.current&&b.observe(y.current),()=>{b.disconnect()}}},[t]),B.useEffect(()=>{if(n){let T=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(T)}}},[n]);let E=()=>{a(!0)},w=()=>{a(!1),c(!1)};return r?t!=="intent"?[o,y,{}]:[o,y,{onFocus:Oh(h,E),onBlur:Oh(m,w),onMouseEnter:Oh(d,E),onMouseLeave:Oh(p,w),onTouchStart:Oh(x,E)}]:[!1,y,{}]}function Oh(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function LM({page:t,...e}){let{router:r}=PS(),n=B.useMemo(()=>AS(r.routes,t,r.basename),[r.routes,t,r.basename]);return n?B.createElement(BM,{page:t,matches:n,...e}):null}function VM(t){let{manifest:e,routeModules:r}=FS(),[n,a]=B.useState([]);return B.useEffect(()=>{let o=!1;return DM(t,e,r).then(c=>{o||a(c)}),()=>{o=!0}},[t,e,r]),n}function BM({page:t,matches:e,...r}){let n=bi(),{manifest:a,routeModules:o}=FS(),{basename:c}=PS(),{loaderData:h,matches:m}=PM(),d=B.useMemo(()=>OT(t,e,m,a,n,"data"),[t,e,m,a,n]),p=B.useMemo(()=>OT(t,e,m,a,n,"assets"),[t,e,m,a,n]),x=B.useMemo(()=>{if(t===n.pathname+n.search+n.hash)return[];let w=new Set,T=!1;if(e.forEach(A=>{let M=a.routes[A.route.id];!M||!M.hasLoader||(!d.some(V=>V.route.id===A.route.id)&&A.route.id in h&&o[A.route.id]?.shouldRevalidate||M.hasClientLoader?T=!0:w.add(A.route.id))}),w.size===0)return[];let b=CM(t,c,"data");return T&&w.size>0&&b.searchParams.set("_routes",e.filter(A=>w.has(A.route.id)).map(A=>A.route.id).join(",")),[b.pathname+b.search]},[c,h,n,a,d,e,t,o]),y=B.useMemo(()=>IM(p,a),[p,a]),E=VM(p);return B.createElement(B.Fragment,null,x.map(w=>B.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...r})),y.map(w=>B.createElement("link",{key:w,rel:"modulepreload",href:w,...r})),E.map(({key:w,link:T})=>B.createElement("link",{key:w,nonce:r.nonce,...T})))}function UM(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var LS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{LS&&(window.__reactRouterVersion="7.9.1")}catch{}function zM({basename:t,children:e,window:r}){let n=B.useRef();n.current==null&&(n.current=j6({window:r,v5Compat:!0}));let a=n.current,[o,c]=B.useState({action:a.action,location:a.location}),h=B.useCallback(m=>{B.startTransition(()=>c(m))},[c]);return B.useLayoutEffect(()=>a.listen(h),[a,h]),B.createElement(xM,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:a})}var VS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,K0=B.forwardRef(function({onClick:e,discover:r="render",prefetch:n="none",relative:a,reloadDocument:o,replace:c,state:h,target:m,to:d,preventScrollReset:p,viewTransition:x,...y},E){let{basename:w}=B.useContext(hs),T=typeof d=="string"&&VS.test(d),b,A=!1;if(typeof d=="string"&&T&&(b=d,LS))try{let S=new URL(window.location.href),P=d.startsWith("//")?new URL(S.protocol+d):new URL(d),O=yi(P.pathname,w);P.origin===S.origin&&O!=null?d=O+P.search+P.hash:A=!0}catch{cs(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let M=rM(d,{relative:a}),[V,H,re]=FM(n,y),q=$M(d,{replace:c,state:h,target:m,preventScrollReset:p,relative:a,viewTransition:x});function j(S){e&&e(S),S.defaultPrevented||q(S)}let D=B.createElement("a",{...y,...re,href:b||M,onClick:A||o?e:j,ref:UM(E,H),target:m,"data-discover":!T&&r==="render"?"true":void 0});return V&&!T?B.createElement(B.Fragment,null,D,B.createElement(LM,{page:M})):D});K0.displayName="Link";var HM=B.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:n="",end:a=!1,style:o,to:c,viewTransition:h,children:m,...d},p){let x=Bd(c,{relative:d.relative}),y=bi(),E=B.useContext(W0),{navigator:w,basename:T}=B.useContext(hs),b=E!=null&&QM(x)&&h===!0,A=w.encodeLocation?w.encodeLocation(x).pathname:x.pathname,M=y.pathname,V=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;r||(M=M.toLowerCase(),V=V?V.toLowerCase():null,A=A.toLowerCase()),V&&T&&(V=yi(V,T)||V);const H=A!=="/"&&A.endsWith("/")?A.length-1:A.length;let re=M===A||!a&&M.startsWith(A)&&M.charAt(H)==="/",q=V!=null&&(V===A||!a&&V.startsWith(A)&&V.charAt(A.length)==="/"),j={isActive:re,isPending:q,isTransitioning:b},D=re?e:void 0,S;typeof n=="function"?S=n(j):S=[n,re?"active":null,q?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let P=typeof o=="function"?o(j):o;return B.createElement(K0,{...d,"aria-current":D,className:S,ref:p,style:P,to:c,viewTransition:h},typeof m=="function"?m(j):m)});HM.displayName="NavLink";var GM=B.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:n,replace:a,state:o,method:c=Vm,action:h,onSubmit:m,relative:d,preventScrollReset:p,viewTransition:x,...y},E)=>{let w=KM(),T=XM(h,{relative:d}),b=c.toLowerCase()==="get"?"get":"post",A=typeof h=="string"&&VS.test(h),M=V=>{if(m&&m(V),V.defaultPrevented)return;V.preventDefault();let H=V.nativeEvent.submitter,re=H?.getAttribute("formmethod")||c;w(H||V.currentTarget,{fetcherKey:e,method:re,navigate:r,replace:a,state:o,relative:d,preventScrollReset:p,viewTransition:x})};return B.createElement("form",{ref:E,method:b,action:T,onSubmit:n?m:M,...y,"data-discover":!A&&t==="render"?"true":void 0})});GM.displayName="Form";function qM(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function BS(t){let e=B.useContext(Eu);return ir(e,qM(t)),e}function $M(t,{target:e,replace:r,state:n,preventScrollReset:a,relative:o,viewTransition:c}={}){let h=wu(),m=bi(),d=Bd(t,{relative:o});return B.useCallback(p=>{if(NM(p,e)){p.preventDefault();let x=r!==void 0?r:xd(m)===xd(d);h(t,{replace:x,state:n,preventScrollReset:a,relative:o,viewTransition:c})}},[m,h,d,r,n,e,t,a,o,c])}var WM=0,YM=()=>`__${String(++WM)}__`;function KM(){let{router:t}=BS("useSubmit"),{basename:e}=B.useContext(hs),r=fM();return B.useCallback(async(n,a={})=>{let{action:o,method:c,encType:h,formData:m,body:d}=AM(n,e);if(a.navigate===!1){let p=a.fetcherKey||YM();await t.fetch(p,r,a.action||o,{preventScrollReset:a.preventScrollReset,formData:m,body:d,formMethod:a.method||c,formEncType:a.encType||h,flushSync:a.flushSync})}else await t.navigate(a.action||o,{preventScrollReset:a.preventScrollReset,formData:m,body:d,formMethod:a.method||c,formEncType:a.encType||h,replace:a.replace,state:a.state,fromRouteId:r,flushSync:a.flushSync,viewTransition:a.viewTransition})},[t,e,r])}function XM(t,{relative:e}={}){let{basename:r}=B.useContext(hs),n=B.useContext(Fs);ir(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),o={...Bd(t||".",{relative:e})},c=bi();if(t==null){o.search=c.search;let h=new URLSearchParams(o.search),m=h.getAll("index");if(m.some(p=>p==="")){h.delete("index"),m.filter(x=>x).forEach(x=>h.append("index",x));let p=h.toString();o.search=p?`?${p}`:""}}return(!t||t===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(o.pathname=o.pathname==="/"?r:hi([r,o.pathname])),xd(o)}function QM(t,{relative:e}={}){let r=B.useContext(DS);ir(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=BS("useViewTransitionState"),a=Bd(t,{relative:e});if(!r.isTransitioning)return!1;let o=yi(r.currentLocation.pathname,n)||r.currentLocation.pathname,c=yi(r.nextLocation.pathname,n)||r.nextLocation.pathname;return i0(a.pathname,c)!=null||i0(a.pathname,o)!=null}const Vr={home:"/",login:"/login",register:"/register",clients:"/clients",owners:"/owners",suppliers:"/suppliers",employees:"/employees",houses:"/houses",sales:"/sales",financial:"/financial",dashboardConsolidacao:"/dashboard-consolidacao",dashboardProcessos:"/dashboard-processos",dashboardGoals:"/dashboard-metas",dashboardEstatisticas:"/dashboard-estatisticas"},Nu=()=>{const t=B.useContext(SS);if(t===void 0)throw new Error("useAuth deve ser usado dentro de um AuthProvider");return t},Qa=({children:t})=>{const{user:e,loading:r}=Nu();return r?i.jsx("div",{children:"Loading..."}):e?i.jsx(i.Fragment,{children:t}):i.jsx(vM,{to:Vr.login,replace:!0})},Je=({children:t,variant:e="primary",size:r="medium",fullWidth:n=!1,disabled:a=!1,type:o="button",className:c="",onClick:h})=>{const m=["button",`button--${e}`,r!=="medium"&&`button--${r}`,n&&"button--full",c].filter(Boolean).join(" ");return i.jsx("button",{type:o,className:m,disabled:a,onClick:h,children:t})},ea=t=>t.replace(/\D/g,""),JM=t=>{const e=ea(t);return e.length<=3?e:e.length<=6?`${e.slice(0,3)}.${e.slice(3)}`:e.length<=9?`${e.slice(0,3)}.${e.slice(3,6)}.${e.slice(6)}`:`${e.slice(0,3)}.${e.slice(3,6)}.${e.slice(6,9)}-${e.slice(9,11)}`},ZM=t=>{const e=ea(t);return e.length<=2?e:e.length<=5?`${e.slice(0,2)}.${e.slice(2)}`:e.length<=8?`${e.slice(0,2)}.${e.slice(2,5)}.${e.slice(5)}`:e.length<=12?`${e.slice(0,2)}.${e.slice(2,5)}.${e.slice(5,8)}/${e.slice(8)}`:`${e.slice(0,2)}.${e.slice(2,5)}.${e.slice(5,8)}/${e.slice(8,12)}-${e.slice(12,14)}`},eP=t=>{const e=ea(t);return e.length<=5?e:`${e.slice(0,5)}-${e.slice(5,8)}`},tP=t=>{const e=ea(t);return e.length===0?"":e.length<=2?`(${e}`:e.length<=6?`(${e.slice(0,2)}) ${e.slice(2)}`:e.length<=10?`(${e.slice(0,2)}) ${e.slice(2,6)}-${e.slice(6)}`:`(${e.slice(0,2)}) ${e.slice(2,7)}-${e.slice(7,11)}`},rP=t=>{const e=ea(t);if(e.length===0)return"";const r=parseInt(e,10)/100;return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:2,maximumFractionDigits:2}).format(r)},nP=t=>ea(t),aP=t=>{const e=ea(t);return e.length===0?0:parseInt(e,10)/100},sP=t=>{const e=ea(t);return e.length===0?"":`${(parseInt(e,10)/100).toFixed(2).replace(".",",")}%`},iP=t=>ea(t),oP=t=>{const e=ea(t);return e.length===0?0:parseFloat(e)/100},lP=t=>ea(t).slice(0,4),cP=t=>{const e=ea(t);return e.length<=5?e:`${e.slice(0,5)}-${e.slice(5,6)}`},MT=(t,e)=>{if(!t)return"";switch(e){case"cpf":return JM(t);case"cnpj":return ZM(t);case"cep":return eP(t);case"phone":return tP(t);case"currency":return rP(t);case"percentage":return sP(t);case"bankAgency":return lP(t);case"bankAccount":return cP(t);case"date":return t;case"none":default:return t}},uP=(t,e)=>{if(!t)return"";switch(e){case"currency":return nP(t);case"percentage":return iP(t);default:return ea(t)}},Br=(t,e)=>{if(!t)return 0;switch(e){case"currency":return aP(t);case"percentage":return oP(t);default:const r=ea(t);return r?parseFloat(r):0}};function Re({label:t,type:e="text",value:r,onChange:n,placeholder:a,error:o,required:c=!1,disabled:h=!1,min:m,max:d,step:p,mask:x,returnUnmasked:y=!1}){const[E,w]=B.useState(r);B.useEffect(()=>{w(x&&r?MT(r,x):r)},[r,x]);const T=A=>{const M=A.target.value;if(x){const V=MT(M,x);if(w(V),y){const H=uP(V,x);n(H)}else n(V)}else w(M),n(M)},b=()=>x==="currency"||x==="percentage"?"text":e;return i.jsxs("div",{className:"input-field",children:[i.jsxs("label",{className:"input-field__label",children:[t,c&&i.jsx("span",{className:"input-field__required",children:"*"})]}),i.jsx("input",{type:b(),value:E,onChange:T,placeholder:a,className:`input-field__input ${o?"input-field__input--error":""}`,disabled:h,min:m,max:d,step:p}),o&&i.jsx("span",{className:"input-field__error",children:o})]})}const US=B.createContext(void 0),Bn=()=>{const t=B.useContext(US);if(!t)throw new Error("useToast must be used within a ToastProvider");return t};function hP(){const[t,e]=B.useState(""),[r,n]=B.useState(""),[a,o]=B.useState(!1),{user:c,login:h,error:m,clearError:d}=Nu(),p=wu(),{showError:x,showSuccess:y}=Bn(),E=async b=>{b.preventDefault(),o(!0),d();try{await h({email:t,password:r})}catch{}finally{o(!1)}};B.useEffect(()=>{c&&(y("Login realizado",c?.email?`Bem-vindo(a), ${c.email}!`:"Bem-vindo(a)!"),p(Vr.clients))},[c,p,y]),B.useEffect(()=>{m&&x("Falha no login",m)},[m,x]);const w=b=>{e(b),m&&d()},T=b=>{n(b),m&&d()};return i.jsxs("div",{className:"login-form",children:[i.jsxs("div",{className:"login-form__header",children:[i.jsx("h1",{className:"login-form__title",children:"Bem-Vindo de volta!"}),i.jsx("p",{className:"login-form__subtitle",children:"Bem-vindo ao Exclusive Homes, sua plataforma de gesto de aluguis e imveis"})]}),i.jsxs("form",{onSubmit:E,className:"login-form__form",children:[i.jsx(Re,{label:"Email",type:"text",value:t,onChange:w,placeholder:"Digite seu email",required:!0}),i.jsx(Re,{label:"Senha",type:"password",value:r,onChange:T,placeholder:"Digite sua senha",required:!0}),i.jsxs(Je,{type:"submit",variant:"primary",disabled:a,className:"login-form__submit-btn",children:["x",a?"Entrando...":"Entrar"]}),i.jsx("a",{href:"#",className:"login-form__forgot-password",children:"Esqueceu sua senha?"}),i.jsx("div",{className:"login-form__divider",children:i.jsx("span",{children:"ou"})}),i.jsxs("div",{className:"login-form__register-link",children:[i.jsx("p",{children:"No tem uma conta?"}),i.jsx(K0,{to:Vr.register,className:"login-form__register-btn",children:"Faa o registro"})]})]})]})}function PT(){return i.jsx("div",{className:"login-page",children:i.jsxs("div",{className:"login-page__container",children:[i.jsx("div",{className:"login-page__form-section",children:i.jsx(hP,{})}),i.jsx("div",{className:"login-page__brand-section",children:i.jsxs("div",{className:"login-page__brand-content",children:[i.jsxs("div",{className:"login-page__logo",children:[i.jsx("div",{className:"login-page__logo-icon",children:i.jsxs("svg",{viewBox:"0 0 100 100",className:"logo-svg",children:[i.jsx("defs",{children:i.jsxs("linearGradient",{id:"logoGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[i.jsx("stop",{offset:"0%",stopColor:"#ffffff"}),i.jsx("stop",{offset:"100%",stopColor:"#e5e7eb"})]})}),i.jsx("rect",{x:"15",y:"25",width:"70",height:"50",rx:"6",fill:"url(#logoGradient)"}),i.jsx("rect",{x:"20",y:"35",width:"60",height:"6",rx:"3",fill:"#1f2937",opacity:"0.9"}),i.jsx("rect",{x:"20",y:"45",width:"45",height:"4",rx:"2",fill:"#1f2937",opacity:"0.7"}),i.jsx("rect",{x:"20",y:"52",width:"55",height:"4",rx:"2",fill:"#1f2937",opacity:"0.7"}),i.jsx("rect",{x:"20",y:"59",width:"40",height:"4",rx:"2",fill:"#1f2937",opacity:"0.7"}),i.jsx("circle",{cx:"75",cy:"40",r:"6",fill:"#1f2937"}),i.jsx("text",{x:"75",y:"44",textAnchor:"middle",fill:"white",fontSize:"6",fontWeight:"bold",children:"R"})]})}),i.jsx("h2",{className:"login-page__brand-name",children:"Exclusive Homes"})]}),i.jsxs("div",{className:"login-page__brand-description",children:[i.jsxs("h3",{className:"login-page__tagline",children:["Gesto Inteligente de Aluguis"," "]}),i.jsx("p",{className:"login-page__description",children:"Plataforma completa para gerenciamento de imveis, contratos de locao, clientes e fornecedores com mtricas financeiras detalhadas"}),i.jsxs("div",{className:"login-page__features",children:[i.jsxs("div",{className:"feature-item",children:[i.jsx("div",{className:"feature-icon",children:i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"})})}),i.jsx("span",{children:"Gesto de Imveis"})]}),i.jsxs("div",{className:"feature-item",children:[i.jsx("div",{className:"feature-icon",children:i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"})})}),i.jsx("span",{children:"Contratos de Locao"})]}),i.jsxs("div",{className:"feature-item",children:[i.jsx("div",{className:"feature-icon",children:i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M16,6L18.29,8.29L13.41,13.17L9.41,9.17L2,16.59L3.41,18L9.41,12L13.41,16L19.71,9.71L22,12V6H16Z"})})}),i.jsx("span",{children:"Mtricas Financeiras"})]})]})]})]})})]})})}const dP=()=>{const{register:t}=Nu(),e=wu(),[r,n]=B.useState({displayName:"",email:"",password:"",cpf:"",phone:""}),[a,o]=B.useState({}),[c,h]=B.useState(!1),[m,d]=B.useState(""),{showError:p,showSuccess:x}=Bn(),y=b=>{const A=b.replace(/\D/g,"");return A.length<=11?A.replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d{1,2})/,"$1-$2"):A.slice(0,11).replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4")},E=()=>{const b={};r.displayName.trim()?r.displayName.trim().length<2&&(b.displayName="Nome deve ter pelo menos 2 caracteres"):b.displayName="Nome  obrigatrio";const A=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;r.email.trim()?A.test(r.email)||(b.email="Email invlido"):b.email="Email  obrigatrio",r.password?r.password.length<6&&(b.password="Senha deve ter pelo menos 6 caracteres"):b.password="Senha  obrigatria";const M=r.cpf.replace(/\D/g,"");return r.cpf.trim()?M.length!==11&&(b.cpf="CPF deve ter 11 dgitos"):b.cpf="CPF  obrigatrio",o(b),Object.keys(b).length===0},w=b=>A=>{b==="cpf"&&(A=y(A)),n(M=>({...M,[b]:A})),a[b]&&o(M=>({...M,[b]:void 0}))},T=async b=>{if(b.preventDefault(),!!E()){h(!0),d("");try{const A={name:r.displayName,email:r.email,password:r.password,phone:r.phone};await t(A),n({displayName:"",email:"",password:"",cpf:"",phone:""}),x("Usurio cadastrado","Cadastro concludo com sucesso. Redirecionando para login."),setTimeout(()=>{e(Vr.login)},1e3)}catch(A){A instanceof Error?(d(A.message),p("Falha no cadastro",A.message)):(d("Erro inesperado ao registrar usurio"),p("Falha no cadastro","Erro inesperado ao registrar usurio"))}finally{h(!1)}}};return i.jsxs("div",{className:"user-register-form",children:[i.jsxs("div",{className:"user-register-form__header",children:[i.jsx("h1",{className:"user-register-form__title",children:"Cadastro de Usurio - Exclusive Homes"}),i.jsx("p",{className:"user-register-form__subtitle",children:"Preencha os dados abaixo para cadastrar um novo usurio no sistema de gesto de aluguis"})]}),i.jsxs("form",{className:"user-register-form__form",onSubmit:T,children:[i.jsxs("div",{className:"user-register-form__fields",children:[i.jsx(Re,{label:"Nome completo",type:"text",value:r.displayName,onChange:w("displayName"),placeholder:"Digite o nome completo",error:a.displayName,required:!0}),i.jsx(Re,{label:"Email",type:"email",value:r.email,onChange:w("email"),placeholder:"Digite o email",error:a.email,required:!0}),i.jsx(Re,{label:"Senha",type:"password",value:r.password,onChange:w("password"),placeholder:"Digite a senha",error:a.password,required:!0}),i.jsx(Re,{label:"CPF",type:"text",value:r.cpf,onChange:w("cpf"),placeholder:"000.000.000-00",error:a.cpf,required:!0}),i.jsx(Re,{label:"Telefone",type:"text",value:r.phone,onChange:w("phone"),placeholder:"(00) 00000-0000"})]}),m&&i.jsx("div",{className:"user-register-form__error",children:i.jsx("p",{children:m})}),i.jsx("div",{className:"user-register-form__actions",children:i.jsx(Je,{type:"submit",variant:"primary",disabled:c,className:"user-register-form__submit-btn",children:c?"Cadastrando...":"Cadastrar Usurio"})}),i.jsx("div",{className:"user-register-form__divider",children:i.jsx("span",{children:"ou"})}),i.jsxs("div",{className:"user-register-form__login-link",children:[i.jsx("p",{children:"J tem uma conta?"}),i.jsx(K0,{to:Vr.login,className:"user-register-form__login-btn",children:"Faa o login"})]})]})]})},fP=()=>i.jsx("div",{className:"register-user-page",children:i.jsx("main",{className:"register-user-page__main",children:i.jsx("div",{className:"register-user-page__content",children:i.jsx(dP,{})})})});var zS={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},FT=wl.createContext&&wl.createContext(zS),mP=["attr","size","title"];function pP(t,e){if(t==null)return{};var r=gP(t,e),n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(a=0;a<o.length;a++)n=o[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function gP(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function o0(){return o0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},o0.apply(this,arguments)}function LT(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function l0(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?LT(Object(r),!0).forEach(function(n){vP(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):LT(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function vP(t,e,r){return e=xP(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xP(t){var e=yP(t,"string");return typeof e=="symbol"?e:e+""}function yP(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function HS(t){return t&&t.map((e,r)=>wl.createElement(e.tag,l0({key:r},e.attr),HS(e.child)))}function Ke(t){return e=>wl.createElement(_P,o0({attr:l0({},t.attr)},e),HS(t.child))}function _P(t){var e=r=>{var{attr:n,size:a,title:o}=t,c=pP(t,mP),h=a||r.size||"1em",m;return r.className&&(m=r.className),t.className&&(m=(m?m+" ":"")+t.className),wl.createElement("svg",o0({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,c,{className:m,style:l0(l0({color:t.color||r.color},r.style),t.style),height:h,width:h,xmlns:"http://www.w3.org/2000/svg"}),o&&wl.createElement("title",null,o),t.children)};return FT!==void 0?wl.createElement(FT.Consumer,null,r=>e(r)):e(zS)}function o1(t){return Ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 18 12 15 21 9 3 6 12 2 12"},child:[]}]})(t)}function Ud(t){return Ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(t)}function yd(t){return Ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"},child:[]},{tag:"line",attr:{x1:"12",y1:"9",x2:"12",y2:"13"},child:[]},{tag:"line",attr:{x1:"12",y1:"17",x2:"12.01",y2:"17"},child:[]}]})(t)}function tx(t){return Ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 5 19 12 12 19"},child:[]}]})(t)}function EP(t){return Ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"16 12 12 8 8 12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12",y2:"8"},child:[]}]})(t)}function GS(t){return Ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"8",r:"7"},child:[]},{tag:"polyline",attr:{points:"8.21 13.89 7 23 12 20 17 23 15.79 13.88"},child:[]}]})(t)}function Os(t){return Ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"4"},child:[]},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"14"},child:[]}]})(t)}function Zh(t){return Ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"10"},child:[]},{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"4"},child:[]},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"16"},child:[]}]})(t)}function X0(t){return Ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"},child:[]},{tag:"path",attr:{d:"M13.73 21a2 2 0 0 1-3.46 0"},child:[]}]})(t)}function dn(t){return Ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"},child:[]}]})(t)}function Vn(t){return Ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},child:[]},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"},child:[]}]})(t)}function TP(t){return Ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(t)}function qS(t){return Ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 18 15 12 9 6"},child:[]}]})(t)}function zd(t){return Ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(t)}function wP(t){return Ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"1",y:"4",width:"22",height:"16",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"1",y1:"10",x2:"23",y2:"10"},child:[]}]})(t)}function Pn(t){return Ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"},child:[]},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"},child:[]}]})(t)}function l1(t){return Ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"7 10 12 15 17 10"},child:[]},{tag:"line",attr:{x1:"12",y1:"15",x2:"12",y2:"3"},child:[]}]})(t)}function Gl(t){return Ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 20h9"},child:[]},{tag:"path",attr:{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"},child:[]}]})(t)}function NP(t){return Ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},child:[]},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},child:[]}]})(t)}function us(t){return Ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(t)}function bP(t){return Ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"},child:[]}]})(t)}function _i(t){return Ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},child:[]},{tag:"polyline",attr:{points:"14 2 14 8 20 8"},child:[]},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"},child:[]},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"},child:[]},{tag:"polyline",attr:{points:"10 9 9 9 8 9"},child:[]}]})(t)}function Hd(t){return Ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"},child:[]}]})(t)}function SP(t){return Ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"},child:[]},{tag:"line",attr:{x1:"4",y1:"22",x2:"4",y2:"15"},child:[]}]})(t)}function rx(t){return Ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"path",attr:{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"},child:[]}]})(t)}function VT(t){return Ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"14",y:"3",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"14",y:"14",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"3",y:"14",width:"7",height:"7"},child:[]}]})(t)}function AP(t){return Ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"},child:[]}]})(t)}function Nn(t){return Ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},child:[]},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"},child:[]}]})(t)}function CP(t){return Ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"2",width:"20",height:"20",rx:"5",ry:"5"},child:[]},{tag:"path",attr:{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"},child:[]},{tag:"line",attr:{x1:"17.5",y1:"6.5",x2:"17.51",y2:"6.5"},child:[]}]})(t)}function BT(t){return Ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"8",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"8",y1:"18",x2:"21",y2:"18"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"3.01",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"12",x2:"3.01",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"3.01",y2:"18"},child:[]}]})(t)}function jP(t){return Ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"},child:[]},{tag:"polyline",attr:{points:"16 17 21 12 16 7"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"9",y2:"12"},child:[]}]})(t)}function RP(t){return Ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(t)}function DP(t){return Ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"},child:[]}]})(t)}function nx(t){return Ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"},child:[]}]})(t)}function IP(t){return Ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(t)}function Gd(t){return Ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"6",y:"4",width:"4",height:"16"},child:[]},{tag:"rect",attr:{x:"14",y:"4",width:"4",height:"16"},child:[]}]})(t)}function kP(t){return Ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"5",x2:"5",y2:"19"},child:[]},{tag:"circle",attr:{cx:"6.5",cy:"6.5",r:"2.5"},child:[]},{tag:"circle",attr:{cx:"17.5",cy:"17.5",r:"2.5"},child:[]}]})(t)}function cu(t){return Ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21.21 15.89A10 10 0 1 1 8 2.83"},child:[]},{tag:"path",attr:{d:"M22 12A10 10 0 0 0 12 2v10z"},child:[]}]})(t)}function $S(t){return Ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"5 3 19 12 5 21 5 3"},child:[]}]})(t)}function UT(t){return Ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18.36 6.64a9 9 0 1 1-12.73 0"},child:[]},{tag:"line",attr:{x1:"12",y1:"2",x2:"12",y2:"12"},child:[]}]})(t)}function Do(t){return Ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"},child:[]},{tag:"polyline",attr:{points:"1 20 1 14 7 14"},child:[]},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"},child:[]}]})(t)}function Tl(t){return Ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},child:[]}]})(t)}function c1(t){return Ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"9",cy:"21",r:"1"},child:[]},{tag:"circle",attr:{cx:"20",cy:"21",r:"1"},child:[]},{tag:"path",attr:{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"},child:[]}]})(t)}function fn(t){return Ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"6"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"2"},child:[]}]})(t)}function OP(t){return Ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"},child:[]}]})(t)}function bu(t){return Ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(t)}function Xn(t){return Ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 18 13.5 8.5 8.5 13.5 1 6"},child:[]},{tag:"polyline",attr:{points:"17 18 23 18 23 12"},child:[]}]})(t)}function pr(t){return Ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 6 13.5 15.5 8.5 10.5 1 18"},child:[]},{tag:"polyline",attr:{points:"17 6 23 6 23 12"},child:[]}]})(t)}function MP(t){return Ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"1",y:"3",width:"15",height:"13"},child:[]},{tag:"polygon",attr:{points:"16 8 20 8 23 11 23 16 16 16 16 8"},child:[]},{tag:"circle",attr:{cx:"5.5",cy:"18.5",r:"2.5"},child:[]},{tag:"circle",attr:{cx:"18.5",cy:"18.5",r:"2.5"},child:[]}]})(t)}function PP(t){return Ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"polyline",attr:{points:"17 11 19 13 23 9"},child:[]}]})(t)}function ed(t){return Ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(t)}function Ur(t){return Ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(t)}function u1(t){return Ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"15",y1:"9",x2:"9",y2:"15"},child:[]},{tag:"line",attr:{x1:"9",y1:"9",x2:"15",y2:"15"},child:[]}]})(t)}function co(t){return Ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(t)}function zT(t){return Ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"},child:[]}]})(t)}const FP=({onToggleSidebar:t})=>{const{user:e,logout:r}=Nu(),[n,a]=B.useState(!1),o=wu(),c=async()=>{try{await r(),o("/login")}catch(h){console.error("Erro ao fazer logout:",h)}};return i.jsxs("header",{className:"app-header",children:[i.jsx("div",{className:"header-left",children:i.jsx(Je,{variant:"ghost",className:"sidebar-toggle",onClick:t,children:i.jsx(DP,{size:20})})}),i.jsxs("div",{className:"header-right",children:[i.jsxs(Je,{variant:"ghost",className:"notification-btn",children:[i.jsx(X0,{size:18}),i.jsx("span",{className:"notification-badge",children:"9+"})]}),i.jsxs("div",{className:"user-menu-container",children:[i.jsxs(Je,{variant:"ghost",className:"user-menu-trigger",onClick:()=>a(!n),children:[i.jsx("div",{className:"user-avatar",children:i.jsx(ed,{size:16})}),i.jsxs("div",{className:"user-info",children:[i.jsx("span",{className:"user-name",children:e?.name||"Usurio"}),i.jsx("span",{className:"user-email",children:e?.email||"usurio@email.com"})]}),i.jsx(TP,{size:16,className:`chevron ${n?"rotated":""}`})]}),n&&i.jsxs("div",{className:"user-dropdown",children:[i.jsxs("div",{className:"dropdown-header",children:[i.jsx("div",{className:"user-avatar large",children:i.jsx(ed,{size:20})}),i.jsxs("div",{className:"user-details",children:[i.jsx("span",{className:"name",children:e?.name||"Usurio"}),i.jsx("span",{className:"email",children:e?.email||"email@exemplo.com"})]})]}),i.jsx("div",{className:"dropdown-divider"}),i.jsxs("div",{className:"dropdown-items",children:[i.jsxs("button",{className:"dropdown-item",children:[i.jsx(ed,{size:16}),i.jsx("span",{children:"Meu Perfil"})]}),i.jsxs("button",{className:"dropdown-item",children:[i.jsx(Tl,{size:16}),i.jsx("span",{children:"Configuraes"})]})]}),i.jsx("div",{className:"dropdown-divider"}),i.jsxs("button",{className:"dropdown-item logout",onClick:c,children:[i.jsx(jP,{size:16}),i.jsx("span",{children:"Sair"})]})]})]})]})]})},LP="/assets/logo-BFOBQZYZ.png",VP=[{id:"cadastros",label:"Cadastros",icon:Ur,items:[{id:"clientes",label:"Clientes",icon:Ur,path:"/clients"},{id:"proprietarios",label:"Proprietrios",icon:Ur,path:"/owners"},{id:"fornecedores",label:"Fornecedores",icon:Ur,path:"/suppliers"},{id:"colaboradores",label:"Colaboradores",icon:Ur,path:"/employees"},{id:"casas",label:"Casas",icon:Nn,path:"/houses"}]},{id:"vendas",label:"Vendas",icon:c1,path:"/sales"},{id:"financeiro",label:"Financeiro",icon:wP,path:"/financial"},{id:"dashboard-consolidacao",label:"Dashboard Consolidao",icon:UT,path:"/dashboard-consolidacao"},{id:"dashboard-processos",label:"Dashboard Processos",icon:UT,path:"/dashboard-processos"},{id:"dashboard-metas",label:"Dashboard Metas",icon:EP,path:"/dashboard-metas"},{id:"dashboard-estatisticas",label:"Dashboard Estatsticas",icon:Zh,path:"/dashboard-estatisticas"}],BP=({collapsed:t,items:e=VP})=>{const r=wu(),n=bi(),[a,o]=B.useState(new Set),c=x=>{t||o(y=>{const E=new Set(y);return E.has(x)?E.delete(x):E.add(x),E})},h=x=>{x.path?r(x.path):x.items&&c(x.id)},m=x=>x?n.pathname===x||n.pathname.startsWith(x+"/"):!1,d=x=>x.path&&m(x.path)?!0:x.items?x.items.some(y=>m(y.path||"")):!1,p=(x,y=0)=>{const E=x.items&&x.items.length>0,w=a.has(x.id),T=m(x.path||""),b=d(x);return i.jsxs("div",{className:"menu-item-container",children:[i.jsx("button",{className:`menu-item ${T?"active":""} ${b?"parent-active":""} ${y>0?"sub-item":""}`,onClick:()=>h(x),title:t?x.label:void 0,children:i.jsxs("div",{className:"menu-item-content",children:[i.jsx("div",{className:"menu-icon",children:i.jsx(x.icon,{size:18})}),!t&&i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"menu-label",children:x.label}),i.jsxs("div",{className:"menu-item-end",children:[x.badge&&i.jsx("span",{className:"menu-badge",children:x.badge}),E&&i.jsx(qS,{size:14,className:`chevron ${w?"expanded":""}`})]})]})]})}),E&&!t&&w&&i.jsx("div",{className:"sub-menu",children:x.items.map(A=>p(A,y+1))})]},x.id)};return i.jsxs("aside",{className:`sidebar ${t?"collapsed":""}`,children:[i.jsx("div",{className:"sidebar-header",children:i.jsx("div",{className:"logo",children:!t&&i.jsx("div",{className:"logo-image",children:i.jsx("img",{src:LP,alt:"Logo"})})})}),i.jsx("nav",{className:"sidebar-nav",children:i.jsx("div",{className:"nav-section",children:e.map(x=>p(x))})}),!t&&i.jsx("div",{className:"sidebar-footer",children:i.jsx("div",{className:"footer-content",children:i.jsx("div",{className:"version-info",children:i.jsx("span",{children:"Verso 1.0.0"})})})})]})},Ja=({children:t,sidebarItems:e})=>{const[r,n]=B.useState(!1),[a,o]=B.useState(!1),[c,h]=B.useState(!1);B.useEffect(()=>{const p=()=>{const x=window.innerWidth<1024;o(x),x&&(n(!1),h(!1))};return p(),window.addEventListener("resize",p),()=>window.removeEventListener("resize",p)},[]);const m=()=>{a?h(!c):n(!r)},d=()=>{a&&h(!1)};return i.jsxs("div",{className:"app-layout",children:[i.jsx("div",{className:`sidebar-container ${a&&c?"open":""}`,children:i.jsx(BP,{collapsed:!a&&r,items:e})}),a&&c&&i.jsx("div",{className:"sidebar-overlay",onClick:d}),i.jsxs("div",{className:`main-content ${r&&!a?"sidebar-collapsed":""}`,children:[i.jsx(FP,{onToggleSidebar:m,sidebarCollapsed:r}),i.jsx("main",{className:"content-area",children:i.jsx("div",{className:"content-wrapper",children:t})})]})]})},kc="clients",HT=t=>{const e=t.data();if(!e)throw new Error("Document data is undefined");return{id:t.id,code:e.code||"",name:e.name||"",cpf:e.cpf||"",birthDate:e.birthDate?.toDate()||new Date,instagram:e.instagram||"",address:e.address||{street:"",number:"",complement:"",neighborhood:"",city:"",state:"",zipCode:""},profession:e.profession||"",maritalStatus:e.maritalStatus||"single",phone:e.phone||"",email:e.email||"",status:e.status||"active",createdAt:e.createdAt?.toDate()||new Date,updatedAt:e.updatedAt?.toDate()||new Date}},GT=t=>{const e={...t};return"birthDate"in e&&e.birthDate&&(e.birthDate=nt.fromDate(e.birthDate)),e},wo={async getAll(t){try{let e=Tt(gr(ct,kc),Ni("name"));t?.status&&(e=Tt(e,bt("status","==",t.status))),t?.city&&(e=Tt(e,bt("address.city","==",t.city))),t?.state&&(e=Tt(e,bt("address.state","==",t.state)));let n=(await Ln(e)).docs.map(HT);if(t?.search){const a=t.search.toLowerCase();n=n.filter(o=>o.name.toLowerCase().includes(a)||o.email.toLowerCase().includes(a)||o.phone.includes(a)||o.cpf.includes(a)||o.instagram.toLowerCase().includes(a)||o.profession.toLowerCase().includes(a))}return n}catch(e){throw console.error("Erro ao buscar clientes:",e),new Error("Falha ao carregar lista de clientes")}},async getById(t){try{const e=sr(ct,kc,t),r=await Ro(e);return r.exists()?HT(r):null}catch(e){throw console.error("Erro ao buscar cliente:",e),new Error("Falha ao carregar dados do cliente")}},async create(t){try{const e=await this.generateClientCode(),r={...GT(t),code:e,createdAt:nt.now(),updatedAt:nt.now()};return(await Hl(gr(ct,kc),r)).id}catch(e){throw console.error("Erro ao criar cliente:",e),new Error("Falha ao criar cliente")}},async update(t){try{const{id:e,...r}=t,n=sr(ct,kc,e),a={...GT(r),updatedAt:nt.now()};await zl(n,a)}catch(e){throw console.error("Erro ao atualizar cliente:",e),new Error("Falha ao atualizar cliente")}},async delete(t){try{const e=sr(ct,kc,t);await yu(e)}catch(e){throw console.error("Erro ao deletar cliente:",e),new Error("Falha ao deletar cliente")}},async searchByName(t,e=10){try{return(await this.getAll()).filter(a=>a.name.toLowerCase().includes(t.toLowerCase())).slice(0,e)}catch(r){throw console.error("Erro ao buscar clientes por nome:",r),new Error("Falha na busca de clientes")}},async emailExists(t,e){try{const r=Tt(gr(ct,kc),bt("email","==",t)),n=await Ln(r);return e?n.docs.some(a=>a.id!==e):!n.empty}catch(r){return console.error("Erro ao verificar email:",r),!1}},async generateClientCode(){try{const e=(await this.getAll()).sort((a,o)=>o.createdAt.getTime()-a.createdAt.getTime())[0];return!e||!e.code?"CLI001":`CLI${(parseInt(e.code.replace("CLI",""))+1).toString().padStart(3,"0")}`}catch(t){return console.error("Erro ao gerar cdigo:",t),"CLI001"}},async getStats(){try{const t=await this.getAll();return{total:t.length,active:t.filter(e=>e.status==="active").length,inactive:t.filter(e=>e.status==="inactive").length,prospects:t.filter(e=>e.status==="prospect").length}}catch(t){throw console.error("Erro ao obter estatsticas:",t),new Error("Falha ao carregar estatsticas")}}},kr=({size:t="medium",text:e,fullScreen:r=!1})=>{const n=r?"loading-spinner-container full-screen":"loading-spinner-container";return i.jsxs("div",{className:n,children:[i.jsx("div",{className:`loading-spinner ${t}`,children:i.jsx("div",{className:"spinner"})}),e&&i.jsx("p",{className:"loading-text",children:e})]})},UP=({clients:t,loading:e,onEdit:r,onView:n,onDelete:a})=>{const[o,c]=B.useState("name"),[h,m]=B.useState("asc"),d=T=>{o===T?m(h==="asc"?"desc":"asc"):(c(T),m("asc"))},p=[...t].sort((T,b)=>{let A=T[o],M=b[o];return o==="address"&&(A=T.address.city,M=b.address.city),A instanceof Date&&M instanceof Date?h==="asc"?A.getTime()-M.getTime():M.getTime()-A.getTime():typeof A=="string"&&typeof M=="string"?h==="asc"?A.localeCompare(M):M.localeCompare(A):0}),x=T=>new Intl.DateTimeFormat("pt-BR").format(T),y=T=>{const b=T.replace(/\D/g,"");return b.length===11?`(${b.slice(0,2)}) ${b.slice(2,7)}-${b.slice(7)}`:b.length===10?`(${b.slice(0,2)}) ${b.slice(2,6)}-${b.slice(6)}`:T},E=T=>{const A={active:{label:"Ativo",class:"status-active"},inactive:{label:"Inativo",class:"status-inactive"},prospect:{label:"Prospect",class:"status-prospect"}}[T]||{label:T,class:"status-default"};return i.jsx("span",{className:`status-badge ${A.class}`,children:A.label})},w=({field:T,children:b})=>i.jsxs("button",{className:`sort-button ${o===T?"active":""}`,onClick:()=>d(T),children:[b,o===T&&i.jsx("span",{className:"sort-indicator",children:h==="asc"?"":""})]});return e?i.jsx("div",{className:"client-list-loading",children:i.jsx(kr,{text:"Carregando clientes..."})}):t.length===0?i.jsx("div",{className:"client-list-empty",children:i.jsxs("div",{className:"empty-state",children:[i.jsx("div",{className:"empty-icon",children:i.jsx(_i,{size:48})}),i.jsx("h3",{children:"Nenhum cliente encontrado"}),i.jsx("p",{children:"No h clientes cadastrados ou que correspondam aos filtros aplicados."})]})}):i.jsxs("div",{className:"client-list",children:[i.jsx("div",{className:"client-list-header",children:i.jsxs("h3",{children:["Lista de Clientes (",t.length,")"]})}),i.jsx("div",{className:"client-table-container",children:i.jsxs("table",{className:"client-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:i.jsx(w,{field:"name",children:"Nome"})}),i.jsx("th",{children:i.jsx(w,{field:"email",children:"Contato"})}),i.jsx("th",{children:i.jsx(w,{field:"profession",children:"Profisso"})}),i.jsx("th",{children:i.jsx(w,{field:"status",children:"Status"})}),i.jsx("th",{children:i.jsx(w,{field:"address",children:"Cidade"})}),i.jsx("th",{children:i.jsx(w,{field:"createdAt",children:"Data Cadastro"})}),i.jsx("th",{className:"actions-column",children:"Aes"})]})}),i.jsx("tbody",{children:p.map(T=>i.jsxs("tr",{className:"client-row",children:[i.jsx("td",{className:"client-name",children:i.jsxs("div",{className:"name-info",children:[i.jsx("span",{className:"name",children:T.name}),i.jsxs("span",{className:"code",children:["Cdigo: ",T.code]})]})}),i.jsx("td",{className:"client-contact",children:i.jsxs("div",{className:"contact-info",children:[i.jsx("span",{className:"email",children:T.email}),i.jsx("span",{className:"phone",children:y(T.phone)})]})}),i.jsx("td",{className:"client-profession",children:i.jsx("span",{className:"profession",children:T.profession})}),i.jsx("td",{className:"client-status",children:E(T.status)}),i.jsx("td",{className:"client-location",children:i.jsxs("div",{className:"location-info",children:[i.jsx("span",{className:"city",children:T.address.city}),i.jsx("span",{className:"state",children:T.address.state})]})}),i.jsx("td",{className:"client-date",children:x(T.createdAt)}),i.jsx("td",{className:"client-actions",children:i.jsxs("div",{className:"action-buttons",children:[i.jsx(Je,{onClick:()=>n(T),variant:"secondary",size:"small",className:"action-btn view-btn",children:i.jsx(us,{size:16})}),i.jsx(Je,{onClick:()=>r(T),variant:"secondary",size:"small",className:"action-btn edit-btn",children:i.jsx(Gl,{size:16})}),i.jsx(Je,{onClick:()=>a(T.id),variant:"secondary",size:"small",className:"action-btn delete-btn",children:i.jsx(bu,{size:16})})]})})]},T.id))})]})})]})},Su=({isOpen:t,onClose:e,title:r,children:n,size:a="medium",className:o=""})=>(B.useEffect(()=>{const c=h=>{h.key==="Escape"&&t&&e()};return t&&(document.addEventListener("keydown",c),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",c),document.body.style.overflow="unset"}},[t,e]),t?i.jsx("div",{className:"modal-overlay",onClick:e,children:i.jsxs("div",{className:`modal-content modal-${a} ${o}`,onClick:c=>c.stopPropagation(),children:[i.jsxs("div",{className:"modal-header",children:[i.jsx("h2",{className:"modal-title",children:r}),i.jsx("button",{className:"modal-close-button",onClick:e,"aria-label":"Fechar modal",children:""})]}),i.jsx("div",{className:"modal-body",children:n})]})}):null),Qt=({label:t,value:e,onChange:r,options:n,placeholder:a="Selecione uma opo",error:o,required:c=!1,disabled:h=!1,className:m=""})=>{const d=p=>{r(p.target.value)};return i.jsxs("div",{className:`select-field ${m}`,children:[i.jsxs("label",{className:"select-field__label",children:[t,c&&i.jsx("span",{className:"select-field__required",children:"*"})]}),i.jsxs("select",{className:`select-field__select ${o?"select-field__select--error":""}`,value:e,onChange:d,disabled:h,required:c,children:[i.jsx("option",{value:"",disabled:!0,children:a}),n.map(p=>i.jsx("option",{value:p.value,children:p.label},p.value))]}),o&&i.jsx("span",{className:"select-field__error",children:o})]})},qT={name:"",cpf:"",birthDate:new Date,instagram:"",address:{street:"",number:"",complement:"",neighborhood:"",city:"",state:"",zipCode:""},profession:"",maritalStatus:"single",phone:"",email:"",status:"active"},zP=({isOpen:t,onClose:e,onSave:r,client:n,mode:a})=>{const[o,c]=B.useState(qT),[h,m]=B.useState(!1),[d,p]=B.useState({}),{showError:x}=Bn(),y=a==="view",E=a==="edit",w=a==="create";B.useEffect(()=>{t&&(c(n&&(E||a==="view")?{name:n.name,cpf:n.cpf,birthDate:n.birthDate,instagram:n.instagram,address:{street:n.address.street,number:n.address.number,complement:n.address.complement||"",neighborhood:n.address.neighborhood,city:n.address.city,state:n.address.state,zipCode:n.address.zipCode},profession:n.profession,maritalStatus:n.maritalStatus,phone:n.phone,email:n.email,status:n.status}:qT),p({}))},[t,n,E,a]);const T=()=>{const j={};return o.name.trim()||(j.name="Nome  obrigatrio"),o.cpf.trim()||(j.cpf="CPF  obrigatrio"),o.instagram.trim()||(j.instagram="Instagram  obrigatrio"),o.birthDate||(j.birthDate="Data de nascimento  obrigatria"),o.profession.trim()||(j.profession="Profisso  obrigatria"),o.phone.trim()||(j.phone="Telefone  obrigatrio"),o.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.email)||(j.email="Email invlido"):j.email="Email  obrigatrio",o.address.street.trim()||(j["address.street"]="Rua  obrigatria"),o.address.number.trim()||(j["address.number"]="Nmero  obrigatrio"),o.address.neighborhood.trim()||(j["address.neighborhood"]="Bairro  obrigatrio"),o.address.city.trim()||(j["address.city"]="Cidade  obrigatria"),o.address.state.trim()||(j["address.state"]="Estado  obrigatrio"),o.address.zipCode.trim()||(j["address.zipCode"]="CEP  obrigatrio"),p(j),Object.keys(j).length===0},b=async j=>{if(j.preventDefault(),!y&&T())try{m(!0);let D="create";w?(await wo.create(o),D="create"):E&&n&&(await wo.update({id:n.id,...o}),D="edit"),r(D)}catch(D){const S=D instanceof Error?D.message:"Erro ao salvar cliente";p({submit:S}),x("Erro ao salvar cliente",S)}finally{m(!1)}},A=(j,D)=>{y||(c(S=>{if(j.includes(".")){const[P,O]=j.split(".");return P==="address"?{...S,address:{...S.address,[O]:D}}:S}return{...S,[j]:D}}),d[j]&&p(S=>{const P={...S};return delete P[j],P}))},M=j=>j.toISOString().split("T")[0],V=j=>j?new Date(j):void 0,H=[{value:"active",label:"Ativo"},{value:"inactive",label:"Inativo"},{value:"prospect",label:"Prospect"}],re=[{value:"single",label:"Solteiro(a)"},{value:"married",label:"Casado(a)"},{value:"divorced",label:"Divorciado(a)"},{value:"widowed",label:"Vivo(a)"},{value:"separated",label:"Separado(a)"}],q=()=>{switch(a){case"create":return"Novo Cliente";case"edit":return"Editar Cliente";case"view":return"Visualizar Cliente";default:return"Cliente"}};return i.jsx(Su,{isOpen:t,onClose:e,title:q(),size:"large",className:"client-modal",children:i.jsxs("form",{onSubmit:b,className:"client-form",children:[h&&i.jsx(kr,{text:"Salvando cliente..."}),d.submit&&i.jsx("div",{className:"error-message",children:d.submit}),i.jsxs("div",{className:"form-sections",children:[i.jsxs("div",{className:"form-section",children:[i.jsx("h3",{children:"Informaes Bsicas"}),i.jsxs("div",{className:"form-row",children:[i.jsx("div",{className:"form-group",children:i.jsx(Qt,{label:"Status",value:o.status,onChange:j=>A("status",j),options:H,disabled:y,error:d.status})}),i.jsx("div",{className:"form-group",children:i.jsx(Re,{label:"Cdigo",value:n?.code||"Gerado automaticamente",placeholder:"Cdigo ser gerado automaticamente",onChange:()=>{}})})]}),i.jsx("div",{className:"form-row",children:i.jsx("div",{className:"form-group full-width",children:i.jsx(Re,{label:"Nome Completo",value:o.name,onChange:j=>A("name",j),placeholder:"Digite o nome completo",error:d.name,required:!0})})}),i.jsxs("div",{className:"form-row",children:[i.jsx("div",{className:"form-group",children:i.jsx(Re,{label:"CPF",value:o.cpf,onChange:j=>A("cpf",j),placeholder:"000.000.000-00",error:d.cpf,required:!0,mask:"cpf"})}),i.jsx("div",{className:"form-group",children:i.jsx(Re,{label:"Instagram",value:o.instagram,onChange:j=>A("instagram",j),placeholder:"Digite o Instagram",error:d.instagram,required:!0})}),i.jsx("div",{className:"form-group",children:i.jsx(Re,{label:"Data de Nascimento",type:"date",value:o.birthDate?M(o.birthDate):"",onChange:j=>A("birthDate",V(j)),error:d.birthDate,required:!0})})]}),i.jsxs("div",{className:"form-row",children:[i.jsx("div",{className:"form-group",children:i.jsx(Re,{label:"Profisso",value:o.profession,onChange:j=>A("profession",j),placeholder:"Digite a profisso",error:d.profession,required:!0})}),i.jsx("div",{className:"form-group",children:i.jsx(Qt,{label:"Estado Civil",value:o.maritalStatus,onChange:j=>A("maritalStatus",j),options:re,disabled:y,error:d.maritalStatus})})]}),i.jsxs("div",{className:"form-row",children:[i.jsx("div",{className:"form-group",children:i.jsx(Re,{label:"Telefone",value:o.phone,onChange:j=>A("phone",j),placeholder:"(00) 00000-0000",error:d.phone,required:!0,mask:"phone"})}),i.jsx("div",{className:"form-group",children:i.jsx(Re,{label:"Email",type:"email",value:o.email,onChange:j=>A("email",j),placeholder:"Digite o email",error:d.email,required:!0})})]})]}),i.jsxs("div",{className:"form-section",children:[i.jsx("h3",{children:"Endereo"}),i.jsxs("div",{className:"form-row",children:[i.jsx("div",{className:"form-group",children:i.jsx(Re,{label:"CEP",value:o.address.zipCode,onChange:j=>A("address.zipCode",j),placeholder:"00000-000",error:d["address.zipCode"],required:!0,mask:"cep"})}),i.jsx("div",{className:"form-group flex-2",children:i.jsx(Re,{label:"Rua",value:o.address.street,onChange:j=>A("address.street",j),placeholder:"Digite o nome da rua",error:d["address.street"],required:!0})}),i.jsx("div",{className:"form-group",children:i.jsx(Re,{label:"Nmero",value:o.address.number,onChange:j=>A("address.number",j),placeholder:"123",error:d["address.number"],required:!0})})]}),i.jsxs("div",{className:"form-row",children:[i.jsx("div",{className:"form-group",children:i.jsx(Re,{label:"Complemento",value:o.address.complement||"",onChange:j=>A("address.complement",j),placeholder:"Apto, sala, etc. (opcional)",error:d["address.complement"]})}),i.jsx("div",{className:"form-group",children:i.jsx(Re,{label:"Bairro",value:o.address.neighborhood,onChange:j=>A("address.neighborhood",j),placeholder:"Digite o bairro",error:d["address.neighborhood"],required:!0})})]}),i.jsxs("div",{className:"form-row",children:[i.jsx("div",{className:"form-group flex-2",children:i.jsx(Re,{label:"Cidade",value:o.address.city,onChange:j=>A("address.city",j),placeholder:"Digite a cidade",error:d["address.city"],required:!0})}),i.jsx("div",{className:"form-group",children:i.jsx(Re,{label:"Estado",value:o.address.state,onChange:j=>A("address.state",j),placeholder:"SP",error:d["address.state"],required:!0})})]})]})]}),!y&&i.jsxs("div",{className:"form-actions",children:[i.jsx(Je,{type:"button",variant:"secondary",onClick:e,disabled:h,children:"Cancelar"}),i.jsx(Je,{type:"submit",disabled:h,children:h?"Salvando...":w?"Criar Cliente":"Salvar Alteraes"})]}),y&&i.jsx("div",{className:"form-actions",children:i.jsx(Je,{type:"button",onClick:e,children:"Fechar"})})]})})},HP=({filters:t,onFiltersChange:e,onClearFilters:r,clientCount:n,totalCount:a})=>{const[o,c]=B.useState(!1),h=(x,y)=>{const E={...t,[x]:y||void 0};Object.keys(E).forEach(w=>{E[w]||delete E[w]}),e(E)},m=Object.keys(t).length>0,d=[{value:"",label:"Todos os status"},{value:"active",label:"Ativo"},{value:"inactive",label:"Inativo"},{value:"prospect",label:"Prospect"}],p=[{value:"",label:"Todos os estados civis"},{value:"single",label:"Solteiro(a)"},{value:"married",label:"Casado(a)"},{value:"divorced",label:"Divorciado(a)"},{value:"widowed",label:"Vivo(a)"},{value:"separated",label:"Separado(a)"}];return i.jsxs("div",{className:"client-filters",children:[i.jsxs("div",{className:"filters-header",children:[i.jsxs("div",{className:"filters-info",children:[i.jsx("h3",{children:"Filtros"}),i.jsx("span",{className:"results-count",children:n===a?`${a} clientes`:`${n} de ${a} clientes`})]}),i.jsxs("div",{className:"filters-actions",children:[m&&i.jsx(Je,{onClick:r,variant:"secondary",size:"small",children:"Limpar Filtros"}),i.jsx(Je,{onClick:()=>c(!o),variant:"secondary",size:"small",className:"toggle-filters-btn",children:o?" Ocultar":" Expandir"})]})]}),i.jsxs("div",{className:`filters-content ${o?"expanded":""}`,children:[i.jsxs("div",{className:"filters-row",children:[i.jsx("div",{className:"filter-group",children:i.jsx(Re,{label:"Buscar",placeholder:"Nome, email, telefone, CPF, CNPJ...",value:t.search||"",onChange:x=>h("search",x)})}),i.jsx("div",{className:"filter-group",children:i.jsx(Qt,{label:"Status",value:t.status||"",onChange:x=>h("status",x),options:d})}),i.jsx("div",{className:"filter-group",children:i.jsx(Re,{label:"Profisso",placeholder:"Digite a profisso",value:t.profession||"",onChange:x=>h("profession",x)})})]}),o&&i.jsxs("div",{className:"filters-row",children:[i.jsx("div",{className:"filter-group",children:i.jsx(Re,{label:"Cidade",placeholder:"Digite a cidade",value:t.city||"",onChange:x=>h("city",x)})}),i.jsx("div",{className:"filter-group",children:i.jsx(Re,{label:"Estado",placeholder:"Digite o estado",value:t.state||"",onChange:x=>h("state",x)})}),i.jsx("div",{className:"filter-group",children:i.jsx(Qt,{label:"Estado Civil",value:t.maritalStatus||"",onChange:x=>h("maritalStatus",x),options:p})})]})]}),m&&i.jsxs("div",{className:"active-filters",children:[i.jsx("span",{className:"active-filters-label",children:"Filtros ativos:"}),i.jsxs("div",{className:"filter-tags",children:[t.search&&i.jsxs("span",{className:"filter-tag",children:['Busca: "',t.search,'"',i.jsx("button",{onClick:()=>h("search",""),children:""})]}),t.status&&i.jsxs("span",{className:"filter-tag",children:["Status:"," ",d.find(x=>x.value===t.status)?.label,i.jsx("button",{onClick:()=>h("status",""),children:""})]}),t.profession&&i.jsxs("span",{className:"filter-tag",children:["Profisso: ",t.profession,i.jsx("button",{onClick:()=>h("profession",""),children:""})]}),t.city&&i.jsxs("span",{className:"filter-tag",children:["Cidade: ",t.city,i.jsx("button",{onClick:()=>h("city",""),children:""})]}),t.state&&i.jsxs("span",{className:"filter-tag",children:["Estado: ",t.state,i.jsx("button",{onClick:()=>h("state",""),children:""})]}),t.maritalStatus&&i.jsxs("span",{className:"filter-tag",children:["Estado Civil:"," ",p.find(x=>x.value===t.maritalStatus)?.label,i.jsx("button",{onClick:()=>h("maritalStatus",""),children:""})]})]})]})]})},GP=({stats:t})=>{const e=[{title:"Total de Clientes",value:t.total,icon:Ur,color:"blue",description:"Total de clientes cadastrados"},{title:"Clientes Ativos",value:t.active,icon:Vn,color:"green",description:"Clientes com status ativo"},{title:"Prospects",value:t.prospects,icon:fn,color:"yellow",description:"Clientes em prospeco"},{title:"Inativos",value:t.inactive,icon:Gd,color:"gray",description:"Clientes inativos"}];return i.jsx("div",{className:"client-stats",children:i.jsx("div",{className:"stats-grid",children:e.map(r=>{const n=r.icon;return i.jsxs("div",{className:`stat-card stat-card-${r.color}`,children:[i.jsx("div",{className:"stat-icon",children:i.jsx(n,{size:24})}),i.jsxs("div",{className:"stat-content",children:[i.jsx("div",{className:"stat-value",children:r.value}),i.jsx("div",{className:"stat-title",children:r.title}),i.jsx("div",{className:"stat-description",children:r.description})]})]},r.title)})})})},qP=()=>{const[t,e]=B.useState([]),[r,n]=B.useState(!0),[a,o]=B.useState(!1),[c,h]=B.useState(null),[m,d]=B.useState("create"),[p,x]=B.useState({}),[y,E]=B.useState({total:0,active:0,inactive:0,prospects:0}),{showError:w,showSuccess:T,showWarning:b}=Bn(),A=async()=>{try{n(!0);const C=await wo.getAll(p);e(C)}catch(C){const k=C instanceof Error?C.message:"Erro ao carregar clientes";w("Erro ao carregar clientes",k)}finally{n(!1)}},M=async()=>{try{const C=await wo.getStats();E(C)}catch(C){const k=C instanceof Error?C.message:"Erro ao carregar estatsticas";b("Estatsticas indisponveis",k)}},V=B.useMemo(()=>{let C=[...t];if(p.search){const k=p.search.toLowerCase();C=C.filter(Ce=>Ce.name.toLowerCase().includes(k)||Ce.email.toLowerCase().includes(k)||Ce.phone.includes(k)||Ce.cpf.includes(k)||Ce.profession.toLowerCase().includes(k))}return p.status&&(C=C.filter(k=>k.status===p.status)),p.profession&&(C=C.filter(k=>k.profession.toLowerCase().includes(p.profession.toLowerCase()))),p.maritalStatus&&(C=C.filter(k=>k.maritalStatus===p.maritalStatus)),p.city&&(C=C.filter(k=>k.address.city.toLowerCase().includes(p.city.toLowerCase()))),p.state&&(C=C.filter(k=>k.address.state.toLowerCase().includes(p.state.toLowerCase()))),C},[t,p]);B.useEffect(()=>{A(),M()},[]),B.useEffect(()=>{Object.keys(p).length>0&&A()},[p]);const H=()=>{h(null),d("create"),o(!0)},re=C=>{h(C),d("edit"),o(!0)},q=C=>{h(C),d("view"),o(!0)},j=async C=>{if(confirm("Tem certeza que deseja excluir este cliente?"))try{await wo.delete(C),e(t.filter(k=>k.id!==C)),M(),T("Cliente excludo","O cliente foi excludo com sucesso.")}catch(k){const Ce=k instanceof Error?k.message:"Erro ao excluir cliente";w("Erro ao excluir cliente",Ce)}},D=()=>{o(!1),h(null)},S=C=>{A(),M(),D(),T(C==="create"?"Cliente criado":"Cliente atualizado",C==="create"?"O cliente foi cadastrado com sucesso.":"As informaes do cliente foram atualizadas.")},P=C=>{x(C)},O=()=>{x({})};return r&&t.length===0?i.jsx(kr,{text:"Carregando clientes...",fullScreen:!0}):i.jsxs("div",{className:"client-management",children:[i.jsx("div",{className:"client-management-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("h1",{children:"Gesto de Clientes"}),i.jsx(Je,{onClick:H,className:"create-client-btn",children:"+ Novo Cliente"})]})}),i.jsx(GP,{stats:y}),i.jsxs("div",{className:"client-management-content",children:[i.jsx(HP,{filters:p,onFiltersChange:P,onClearFilters:O,clientCount:V.length,totalCount:t.length}),i.jsx(UP,{clients:V,loading:r,onEdit:re,onView:q,onDelete:j})]}),i.jsx(zP,{isOpen:a,onClose:D,onSave:S,client:c,mode:m})]})},Oc="owners",$T=t=>{const e=t.data();if(!e)throw new Error("Document data is undefined");return{id:t.id,code:e.code||"",name:e.name||"",cpf:e.cpf||"",address:e.address||{street:"",number:"",complement:"",neighborhood:"",city:"",state:"",zipCode:""},profession:e.profession||"",maritalStatus:e.maritalStatus||"single",phone:e.phone||"",bankData:e.bankData||{bank:"",agency:"",account:"",accountType:"checking"},pix:e.pix||"",commission:e.commission||0,status:e.status||"active",createdAt:e.createdAt?.toDate()||new Date,updatedAt:e.updatedAt?.toDate()||new Date}},WT=t=>{const e={...t};return"birthDate"in e&&e.birthDate&&(e.birthDate=nt.fromDate(e.birthDate)),e},bl={async getAll(t){try{let e=Tt(gr(ct,Oc),Ni("name","asc"));t?.status&&(e=Tt(e,bt("status","==",t.status))),t?.city&&(e=Tt(e,bt("address.city","==",t.city))),t?.state&&(e=Tt(e,bt("address.state","==",t.state))),t?.bank&&(e=Tt(e,bt("bankData.bank","==",t.bank)));let n=(await Ln(e)).docs.map($T);if(t?.search){const a=t.search.toLowerCase();n=n.filter(o=>o.name.toLowerCase().includes(a)||o.phone.includes(a)||o.cpf.includes(a)||o.pix.toLowerCase().includes(a)||o.profession.toLowerCase().includes(a))}return n}catch(e){throw console.error("Erro ao buscar proprietrios:",e),new Error("Falha ao carregar lista de proprietrios")}},async getById(t){try{const e=sr(ct,Oc,t),r=await Ro(e);return r.exists()?$T(r):null}catch(e){throw console.error("Erro ao buscar proprietrio:",e),new Error("Falha ao carregar dados do proprietrio")}},async create(t){try{const e=await this.generateOwnerCode(),r={...WT(t),code:e,createdAt:nt.now(),updatedAt:nt.now()};return(await Hl(gr(ct,Oc),r)).id}catch(e){throw console.error("Erro ao criar proprietrio:",e),new Error("Falha ao criar proprietrio")}},async update(t){try{const{id:e,...r}=t,n=sr(ct,Oc,e);await zl(n,{...WT(r),updatedAt:nt.now()})}catch(e){throw console.error("Erro ao atualizar proprietrio:",e),new Error("Falha ao atualizar proprietrio")}},async delete(t){try{const e=sr(ct,Oc,t);await yu(e)}catch(e){throw console.error("Erro ao deletar proprietrio:",e),new Error("Falha ao deletar proprietrio")}},async checkCpfExists(t,e){try{const r=Tt(gr(ct,Oc),bt("cpf","==",t)),n=await Ln(r);return e?n.docs.some(a=>a.id!==e):!n.empty}catch(r){return console.error("Erro ao verificar CPF:",r),!1}},async generateOwnerCode(){try{const e=(await this.getAll()).sort((a,o)=>o.createdAt.getTime()-a.createdAt.getTime())[0];return!e||!e.code?"PRO001":`PRO${(parseInt(e.code.replace("PRO",""))+1).toString().padStart(3,"0")}`}catch(t){return console.error("Erro ao gerar cdigo:",t),"PRO001"}},async getStats(){try{const t=await this.getAll();return{total:t.length,active:t.filter(e=>e.status==="active").length,inactive:t.filter(e=>e.status==="inactive").length,suspended:t.filter(e=>e.status==="suspended").length}}catch(t){throw console.error("Erro ao obter estatsticas:",t),new Error("Falha ao carregar estatsticas")}}},$P=({owners:t,loading:e,onEdit:r,onView:n,onDelete:a})=>{const[o,c]=B.useState("name"),[h,m]=B.useState("asc"),d=M=>{o===M?m(h==="asc"?"desc":"asc"):(c(M),m("asc"))},p=[...t].sort((M,V)=>{let H=M[o],re=V[o];return o==="address"&&(H=M.address.city,re=V.address.city),o==="bankData"&&(H=M.bankData.bank,re=V.bankData.bank),H instanceof Date&&re instanceof Date?h==="asc"?H.getTime()-re.getTime():re.getTime()-H.getTime():typeof H=="number"&&typeof re=="number"?h==="asc"?H-re:re-H:typeof H=="string"&&typeof re=="string"?h==="asc"?H.localeCompare(re):re.localeCompare(H):0}),x=M=>new Intl.DateTimeFormat("pt-BR").format(M),y=M=>{const V=M.replace(/\D/g,"");return V.length===11?`(${V.slice(0,2)}) ${V.slice(2,7)}-${V.slice(7)}`:V.length===10?`(${V.slice(0,2)}) ${V.slice(2,6)}-${V.slice(6)}`:M},E=M=>{const V=M.replace(/\D/g,"");return V.length===11?`${V.slice(0,3)}.${V.slice(3,6)}.${V.slice(6,9)}-${V.slice(9)}`:M},w=M=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(M),T=M=>{const H={active:{label:"Ativo",class:"status-active"},inactive:{label:"Inativo",class:"status-inactive"},suspended:{label:"Suspenso",class:"status-suspended"}}[M]||{label:M,class:"status-default"};return i.jsx("span",{className:`status-badge ${H.class}`,children:H.label})},b=M=>({checking:"Conta Corrente",savings:"Poupana",business:"Empresarial"})[M]||M,A=({field:M,children:V})=>i.jsxs("button",{className:`sort-button ${o===M?"active":""}`,onClick:()=>d(M),children:[V,o===M&&i.jsx("span",{className:"sort-indicator",children:h==="asc"?"":""})]});return e?i.jsx("div",{className:"owner-list-loading",children:i.jsx(kr,{text:"Carregando proprietrios..."})}):t.length===0?i.jsx("div",{className:"owner-list-empty",children:i.jsxs("div",{className:"empty-state",children:[i.jsx("div",{className:"empty-icon",children:i.jsx(_i,{size:48})}),i.jsx("h3",{children:"Nenhum proprietrio encontrado"}),i.jsx("p",{children:"No h proprietrios cadastrados ou que correspondam aos filtros aplicados."})]})}):i.jsxs("div",{className:"owner-list",children:[i.jsx("div",{className:"owner-list-header",children:i.jsxs("h3",{children:["Lista de Proprietrios (",t.length,")"]})}),i.jsx("div",{className:"owner-table-container",children:i.jsxs("table",{className:"owner-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:i.jsx(A,{field:"name",children:"Nome"})}),i.jsx("th",{children:i.jsx(A,{field:"phone",children:"Contato"})}),i.jsx("th",{children:i.jsx(A,{field:"profession",children:"Profisso"})}),i.jsx("th",{children:i.jsx(A,{field:"status",children:"Status"})}),i.jsx("th",{children:i.jsx(A,{field:"address",children:"Cidade"})}),i.jsx("th",{children:i.jsx(A,{field:"commission",children:"Comisso"})}),i.jsx("th",{children:i.jsx(A,{field:"bankData",children:"Banco"})}),i.jsx("th",{children:i.jsx(A,{field:"createdAt",children:"Data Cadastro"})}),i.jsx("th",{className:"actions-column",children:"Aes"})]})}),i.jsx("tbody",{children:p.map(M=>i.jsxs("tr",{className:"owner-row",children:[i.jsx("td",{className:"owner-name",children:i.jsxs("div",{className:"name-info",children:[i.jsx("span",{className:"name",children:M.name}),i.jsxs("span",{className:"code",children:["Cdigo: ",M.code]})]})}),i.jsx("td",{className:"owner-contact",children:i.jsxs("div",{className:"contact-info",children:[i.jsx("span",{className:"phone",children:y(M.phone)}),i.jsxs("span",{className:"cpf",children:["CPF: ",E(M.cpf)]})]})}),i.jsx("td",{className:"owner-profession",children:i.jsx("span",{className:"profession",children:M.profession})}),i.jsx("td",{className:"owner-status",children:T(M.status)}),i.jsx("td",{className:"owner-location",children:i.jsxs("div",{className:"location-info",children:[i.jsx("span",{className:"city",children:M.address.city}),i.jsx("span",{className:"state",children:M.address.state})]})}),i.jsx("td",{className:"owner-commission",children:i.jsxs("div",{className:"commission-info",children:[i.jsx("span",{className:"commission-value",children:w(M.commission)}),i.jsx("span",{className:"commission-label",children:"por venda"})]})}),i.jsx("td",{className:"owner-bank",children:i.jsxs("div",{className:"bank-info",children:[i.jsx("span",{className:"bank-name",children:M.bankData.bank}),i.jsx("span",{className:"account-type",children:b(M.bankData.accountType)})]})}),i.jsx("td",{className:"owner-date",children:x(M.createdAt)}),i.jsx("td",{className:"owner-actions",children:i.jsxs("div",{className:"action-buttons",children:[i.jsx(Je,{onClick:()=>n(M),variant:"secondary",size:"small",className:"action-btn view-btn",children:i.jsx(us,{size:16})}),i.jsx(Je,{onClick:()=>r(M),variant:"secondary",size:"small",className:"action-btn edit-btn",children:i.jsx(Gl,{size:16})}),i.jsx(Je,{onClick:()=>a(M.id),variant:"secondary",size:"small",className:"action-btn delete-btn",children:i.jsx(bu,{size:16})})]})})]},M.id))})]})})]})},YT={name:"",cpf:"",address:{street:"",number:"",complement:"",neighborhood:"",city:"",state:"",zipCode:""},profession:"",maritalStatus:"single",phone:"",bankData:{bank:"",agency:"",account:"",accountType:"checking"},pix:"",commission:0,status:"active"},WP=({isOpen:t,onClose:e,onSave:r,owner:n,mode:a})=>{const[o,c]=B.useState(YT),[h,m]=B.useState(!1),[d,p]=B.useState({}),{showError:x}=Bn(),y=a==="view",E=a==="edit",w=a==="create";B.useEffect(()=>{t&&(c(n&&(E||a==="view")?{name:n.name,cpf:n.cpf,address:{street:n.address.street,number:n.address.number,complement:n.address.complement||"",neighborhood:n.address.neighborhood,city:n.address.city,state:n.address.state,zipCode:n.address.zipCode},profession:n.profession,maritalStatus:n.maritalStatus,phone:n.phone,bankData:{bank:n.bankData.bank,agency:n.bankData.agency,account:n.bankData.account,accountType:n.bankData.accountType},pix:n.pix,commission:n.commission,status:n.status}:YT),p({}))},[t,n,E,a]);const T=()=>{const q={};return o.name.trim()||(q.name="Nome  obrigatrio"),o.cpf.trim()||(q.cpf="CPF  obrigatrio"),o.profession.trim()||(q.profession="Profisso  obrigatria"),o.phone.trim()||(q.phone="Telefone  obrigatrio"),o.pix.trim()||(q.pix="PIX  obrigatrio"),o.commission<=0&&(q.commission="Comisso deve ser maior que zero"),o.address.street.trim()||(q["address.street"]="Rua  obrigatria"),o.address.number.trim()||(q["address.number"]="Nmero  obrigatrio"),o.address.neighborhood.trim()||(q["address.neighborhood"]="Bairro  obrigatrio"),o.address.city.trim()||(q["address.city"]="Cidade  obrigatria"),o.address.state.trim()||(q["address.state"]="Estado  obrigatrio"),o.address.zipCode.trim()||(q["address.zipCode"]="CEP  obrigatrio"),o.bankData.bank.trim()||(q["bankData.bank"]="Banco  obrigatrio"),o.bankData.agency.trim()||(q["bankData.agency"]="Agncia  obrigatria"),o.bankData.account.trim()||(q["bankData.account"]="Conta  obrigatria"),p(q),Object.keys(q).length===0},b=async q=>{if(q.preventDefault(),!y&&T())try{m(!0);let j="create";w?(await bl.create(o),j="create"):E&&n&&(await bl.update({id:n.id,...o}),j="edit"),r(j)}catch(j){const D=j instanceof Error?j.message:"Erro ao salvar proprietrio";p({submit:D}),x("Erro ao salvar proprietrio",D)}finally{m(!1)}},A=(q,j)=>{y||(c(D=>{if(q.includes(".")){const[S,P]=q.split(".");return S==="address"?{...D,address:{...D.address,[P]:j}}:S==="bankData"?{...D,bankData:{...D.bankData,[P]:j}}:D}return{...D,[q]:j}}),d[q]&&p(D=>{const S={...D};return delete S[q],S}))},M=[{value:"active",label:"Ativo"},{value:"inactive",label:"Inativo"},{value:"suspended",label:"Suspenso"}],V=[{value:"single",label:"Solteiro(a)"},{value:"married",label:"Casado(a)"},{value:"divorced",label:"Divorciado(a)"},{value:"widowed",label:"Vivo(a)"},{value:"separated",label:"Separado(a)"}],H=[{value:"checking",label:"Conta Corrente"},{value:"savings",label:"Poupana"},{value:"business",label:"Conta Empresarial"}],re=()=>{switch(a){case"create":return"Novo Proprietrio";case"edit":return"Editar Proprietrio";case"view":return"Visualizar Proprietrio";default:return"Proprietrio"}};return i.jsx(Su,{isOpen:t,onClose:e,title:re(),size:"large",className:"owner-modal",children:i.jsxs("form",{onSubmit:b,className:"owner-form",children:[h&&i.jsx(kr,{text:"Salvando proprietrio..."}),d.submit&&i.jsx("div",{className:"error-message",children:d.submit}),i.jsxs("div",{className:"form-sections",children:[i.jsxs("div",{className:"form-section",children:[i.jsx("h3",{children:"Informaes Bsicas"}),i.jsxs("div",{className:"form-row",children:[i.jsx("div",{className:"form-group",children:i.jsx(Qt,{label:"Status",value:o.status,onChange:q=>A("status",q),options:M,disabled:y,error:d.status})}),i.jsx("div",{className:"form-group",children:i.jsx(Re,{label:"Cdigo",value:n?.code||"Gerado automaticamente",placeholder:"Cdigo ser gerado automaticamente",onChange:()=>{}})})]}),i.jsx("div",{className:"form-row",children:i.jsx("div",{className:"form-group full-width",children:i.jsx(Re,{label:"Nome Completo",value:o.name,onChange:q=>A("name",q),placeholder:"Digite o nome completo",error:d.name,required:!0})})}),i.jsxs("div",{className:"form-row",children:[i.jsx("div",{className:"form-group",children:i.jsx(Re,{label:"CPF",value:o.cpf,onChange:q=>A("cpf",q),placeholder:"000.000.000-00",error:d.cpf,required:!0,mask:"cpf"})}),i.jsx("div",{className:"form-group",children:i.jsx(Re,{label:"Profisso",value:o.profession,onChange:q=>A("profession",q),placeholder:"Digite a profisso",error:d.profession,required:!0})}),i.jsx("div",{className:"form-group",children:i.jsx(Qt,{label:"Estado Civil",value:o.maritalStatus,onChange:q=>A("maritalStatus",q),options:V,disabled:y,error:d.maritalStatus})})]}),i.jsxs("div",{className:"form-row",children:[i.jsx("div",{className:"form-group",children:i.jsx(Re,{label:"Telefone",value:o.phone,onChange:q=>A("phone",q),placeholder:"(00) 00000-0000",error:d.phone,required:!0,mask:"phone"})}),i.jsx("div",{className:"form-group",children:i.jsx(Re,{label:"PIX",value:o.pix,onChange:q=>A("pix",q),placeholder:"Digite a chave PIX",error:d.pix,required:!0})}),i.jsx("div",{className:"form-group",children:i.jsx(Re,{label:"Comisso (R$)",value:String(Math.round(o.commission*100)),onChange:q=>{const j=Br(q,"currency");A("commission",j)},placeholder:"R$ 0,00",error:d.commission,required:!0,mask:"currency",returnUnmasked:!0})})]})]}),i.jsxs("div",{className:"form-section",children:[i.jsx("h3",{children:"Endereo"}),i.jsxs("div",{className:"form-row",children:[i.jsx("div",{className:"form-group",children:i.jsx(Re,{label:"CEP",value:o.address.zipCode,onChange:q=>A("address.zipCode",q),placeholder:"00000-000",error:d["address.zipCode"],required:!0,mask:"cep"})}),i.jsx("div",{className:"form-group flex-2",children:i.jsx(Re,{label:"Rua",value:o.address.street,onChange:q=>A("address.street",q),placeholder:"Digite o nome da rua",error:d["address.street"],required:!0})}),i.jsx("div",{className:"form-group",children:i.jsx(Re,{label:"Nmero",value:o.address.number,onChange:q=>A("address.number",q),placeholder:"123",error:d["address.number"],required:!0})})]}),i.jsxs("div",{className:"form-row",children:[i.jsx("div",{className:"form-group",children:i.jsx(Re,{label:"Complemento",value:o.address.complement||"",onChange:q=>A("address.complement",q),placeholder:"Apto, sala, etc. (opcional)",error:d["address.complement"]})}),i.jsx("div",{className:"form-group",children:i.jsx(Re,{label:"Bairro",value:o.address.neighborhood,onChange:q=>A("address.neighborhood",q),placeholder:"Digite o bairro",error:d["address.neighborhood"],required:!0})})]}),i.jsxs("div",{className:"form-row",children:[i.jsx("div",{className:"form-group flex-2",children:i.jsx(Re,{label:"Cidade",value:o.address.city,onChange:q=>A("address.city",q),placeholder:"Digite a cidade",error:d["address.city"],required:!0})}),i.jsx("div",{className:"form-group",children:i.jsx(Re,{label:"Estado",value:o.address.state,onChange:q=>A("address.state",q),placeholder:"SP",error:d["address.state"],required:!0})})]})]}),i.jsxs("div",{className:"form-section",children:[i.jsx("h3",{children:"Dados Bancrios"}),i.jsxs("div",{className:"form-row",children:[i.jsx("div",{className:"form-group",children:i.jsx(Re,{label:"Banco",value:o.bankData.bank,onChange:q=>A("bankData.bank",q),placeholder:"Nome do banco",error:d["bankData.bank"],required:!0})}),i.jsx("div",{className:"form-group",children:i.jsx(Re,{label:"Agncia",value:o.bankData.agency,onChange:q=>A("bankData.agency",q),placeholder:"0000",error:d["bankData.agency"],required:!0,mask:"bankAgency"})}),i.jsx("div",{className:"form-group",children:i.jsx(Re,{label:"Conta",value:o.bankData.account,onChange:q=>A("bankData.account",q),placeholder:"00000-0",error:d["bankData.account"],required:!0,mask:"bankAccount"})}),i.jsx("div",{className:"form-group",children:i.jsx(Qt,{label:"Tipo de Conta",value:o.bankData.accountType,onChange:q=>A("bankData.accountType",q),options:H,disabled:y,error:d["bankData.accountType"]})})]})]})]}),!y&&i.jsxs("div",{className:"form-actions",children:[i.jsx(Je,{type:"button",variant:"secondary",onClick:e,disabled:h,children:"Cancelar"}),i.jsx(Je,{type:"submit",disabled:h,children:h?"Salvando...":w?"Criar Proprietrio":"Salvar Alteraes"})]}),y&&i.jsx("div",{className:"form-actions",children:i.jsx(Je,{type:"button",onClick:e,children:"Fechar"})})]})})},YP=({filters:t,onFiltersChange:e,onClearFilters:r,ownerCount:n,totalCount:a})=>{const[o,c]=B.useState(!1),h=(x,y)=>{const E={...t,[x]:y||void 0};Object.keys(E).forEach(w=>{E[w]||delete E[w]}),e(E)},m=Object.keys(t).length>0,d=[{value:"",label:"Todos os status"},{value:"active",label:"Ativo"},{value:"inactive",label:"Inativo"},{value:"suspended",label:"Suspenso"}],p=[{value:"",label:"Todos os estados civis"},{value:"single",label:"Solteiro(a)"},{value:"married",label:"Casado(a)"},{value:"divorced",label:"Divorciado(a)"},{value:"widowed",label:"Vivo(a)"}];return i.jsxs("div",{className:"owner-filters",children:[i.jsxs("div",{className:"filters-header",children:[i.jsxs("div",{className:"filters-info",children:[i.jsx("h3",{children:"Filtros"}),i.jsx("span",{className:"results-count",children:n===a?`${a} proprietrios`:`${n} de ${a} proprietrios`})]}),i.jsxs("div",{className:"filters-actions",children:[m&&i.jsx(Je,{onClick:r,variant:"secondary",size:"small",children:"Limpar filtros"}),i.jsx(Je,{onClick:()=>c(!o),variant:"secondary",size:"small",children:o?" Ocultar":" Expandir"})]})]}),i.jsxs("div",{className:`filters-content ${o?"expanded":""}`,children:[i.jsxs("div",{className:"filters-row",children:[i.jsx("div",{className:"filter-group",children:i.jsx(Re,{label:"Buscar",placeholder:"Nome, CPF, telefone, banco...",value:t.search||"",onChange:x=>h("search",x)})}),i.jsx("div",{className:"filter-group",children:i.jsx(Qt,{label:"Status",value:t.status||"",onChange:x=>h("status",x),options:d})}),i.jsx("div",{className:"filter-group",children:i.jsx(Re,{label:"Profisso",placeholder:"Digite a profisso",value:t.profession||"",onChange:x=>h("profession",x)})})]}),o&&i.jsxs("div",{className:"filters-row",children:[i.jsx("div",{className:"filter-group",children:i.jsx(Re,{label:"Cidade",placeholder:"Digite a cidade",value:t.city||"",onChange:x=>h("city",x)})}),i.jsx("div",{className:"filter-group",children:i.jsx(Re,{label:"Estado",placeholder:"Digite o estado",value:t.state||"",onChange:x=>h("state",x)})}),i.jsx("div",{className:"filter-group",children:i.jsx(Qt,{label:"Estado Civil",value:t.maritalStatus||"",onChange:x=>h("maritalStatus",x),options:p})})]}),o&&i.jsx("div",{className:"filters-row",children:i.jsx("div",{className:"filter-group",children:i.jsx(Re,{label:"Banco",placeholder:"Digite o banco",value:t.bank||"",onChange:x=>h("bank",x)})})})]}),m&&i.jsxs("div",{className:"active-filters",children:[i.jsx("span",{className:"active-filters-label",children:"Filtros ativos:"}),i.jsxs("div",{className:"filter-tags",children:[t.search&&i.jsxs("span",{className:"filter-tag",children:['Busca: "',t.search,'"',i.jsx("button",{onClick:()=>h("search",""),children:""})]}),t.status&&i.jsxs("span",{className:"filter-tag",children:["Status:"," ",d.find(x=>x.value===t.status)?.label,i.jsx("button",{onClick:()=>h("status",""),children:""})]}),t.profession&&i.jsxs("span",{className:"filter-tag",children:["Profisso: ",t.profession,i.jsx("button",{onClick:()=>h("profession",""),children:""})]}),t.city&&i.jsxs("span",{className:"filter-tag",children:["Cidade: ",t.city,i.jsx("button",{onClick:()=>h("city",""),children:""})]}),t.state&&i.jsxs("span",{className:"filter-tag",children:["Estado: ",t.state,i.jsx("button",{onClick:()=>h("state",""),children:""})]}),t.maritalStatus&&i.jsxs("span",{className:"filter-tag",children:["Estado Civil:"," ",p.find(x=>x.value===t.maritalStatus)?.label,i.jsx("button",{onClick:()=>h("maritalStatus",""),children:""})]}),t.bank&&i.jsxs("span",{className:"filter-tag",children:["Banco: ",t.bank,i.jsx("button",{onClick:()=>h("bank",""),children:""})]})]})]})]})},KP=({stats:t})=>{const e=[{title:"Total de Proprietrios",value:t.total,icon:Ur,color:"blue",description:"Total de proprietrios cadastrados"},{title:"Proprietrios Ativos",value:t.active,icon:Vn,color:"green",description:"Total de proprietrios ativos"},{title:"Suspensos",value:t.suspended,icon:fn,color:"yellow",description:"Total de proprietrios suspensos"},{title:"Inativos",value:t.inactive,icon:Gd,color:"red",description:"Total de proprietrios inativos"}];return i.jsx("div",{className:"owner-stats",children:i.jsx("div",{className:"stats-grid",children:e.map(r=>{const n=r.icon;return i.jsxs("div",{className:`stat-card stat-card-${r.color}`,children:[i.jsx("div",{className:"stat-icon",children:i.jsx(n,{size:24})}),i.jsxs("div",{className:"stat-content",children:[i.jsx("div",{className:"stat-value",children:r.value}),i.jsx("div",{className:"stat-title",children:r.title}),i.jsx("div",{className:"stat-description",children:r.description})]})]},r.title)})})})},XP=()=>{const[t,e]=B.useState([]),[r,n]=B.useState(!0),[a,o]=B.useState(!1),[c,h]=B.useState(null),[m,d]=B.useState("create"),[p,x]=B.useState({}),[y,E]=B.useState({total:0,active:0,inactive:0,suspended:0}),{showError:w,showSuccess:T,showWarning:b}=Bn(),A=async()=>{try{n(!0);const C=await bl.getAll(p);e(C)}catch(C){const k=C instanceof Error?C.message:"Erro ao carregar proprietrios";w("Erro ao carregar proprietrios",k)}finally{n(!1)}},M=async()=>{try{const C=await bl.getStats();E(C)}catch(C){const k=C instanceof Error?C.message:"Erro ao carregar estatsticas";b("Estatsticas indisponveis",k)}},V=B.useMemo(()=>{let C=[...t];if(p.search){const k=p.search.toLowerCase();C=C.filter(Ce=>Ce.name.toLowerCase().includes(k)||Ce.cpf.includes(k)||Ce.phone.includes(k)||Ce.bankData.bank.toLowerCase().includes(k)||Ce.profession.toLowerCase().includes(k))}return p.status&&(C=C.filter(k=>k.status===p.status)),p.profession&&(C=C.filter(k=>k.profession.toLowerCase().includes(p.profession.toLowerCase()))),p.maritalStatus&&(C=C.filter(k=>k.maritalStatus===p.maritalStatus)),p.city&&(C=C.filter(k=>k.address.city.toLowerCase().includes(p.city.toLowerCase()))),p.state&&(C=C.filter(k=>k.address.state.toLowerCase().includes(p.state.toLowerCase()))),p.bank&&(C=C.filter(k=>k.bankData.bank.toLowerCase().includes(p.bank.toLowerCase()))),C},[t,p]);B.useEffect(()=>{A(),M()},[]),B.useEffect(()=>{Object.keys(p).length>0&&A()},[p]);const H=()=>{h(null),d("create"),o(!0)},re=C=>{h(C),d("edit"),o(!0)},q=C=>{h(C),d("view"),o(!0)},j=async C=>{if(confirm("Tem certeza que deseja excluir este proprietrio?"))try{await bl.delete(C),e(t.filter(k=>k.id!==C)),M(),T("Proprietrio excludo","O proprietrio foi excludo com sucesso.")}catch(k){const Ce=k instanceof Error?k.message:"Erro ao excluir proprietrio";w("Erro ao excluir proprietrio",Ce)}},D=()=>{o(!1),h(null)},S=C=>{A(),M(),D(),T(C==="create"?"Proprietrio criado":"Proprietrio atualizado",C==="create"?"O proprietrio foi cadastrado com sucesso.":"As informaes do proprietrio foram atualizadas.")},P=C=>{x(C)},O=()=>{x({})};return r&&t.length===0?i.jsx(kr,{text:"Carregando proprietrios...",fullScreen:!0}):i.jsxs("div",{className:"owner-management",children:[i.jsx("div",{className:"owner-management-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("h1",{children:"Gesto de Proprietrios"}),i.jsx(Je,{onClick:H,className:"create-owner-btn",children:"+ Novo Proprietrio"})]})}),i.jsx(KP,{stats:y}),i.jsxs("div",{className:"owner-management-content",children:[i.jsx(YP,{filters:p,onFiltersChange:P,onClearFilters:O,ownerCount:V.length,totalCount:t.length}),i.jsx($P,{owners:V,loading:r,onEdit:re,onView:q,onDelete:j})]}),i.jsx(WP,{isOpen:a,onClose:D,onSave:S,onDelete:()=>j(c?.id||""),owner:c||void 0,mode:m})]})},Mc="suppliers",KT=t=>{const e=t.data();if(!e)throw new Error("Document data is undefined");return{id:t.id,code:e.code||"",establishmentName:e.establishmentName||"",serviceType:e.serviceType||"",bankData:e.bankData||{bank:"",agency:"",account:"",accountType:"checking"},pix:e.pix||"",commissionPercentage:e.commissionPercentage||0,status:e.status||"active",createdAt:e.createdAt?.toDate()||new Date,updatedAt:e.updatedAt?.toDate()||new Date}},XT=t=>({...t}),td={async getAll(t){try{let e=Tt(gr(ct,Mc),Ni("establishmentName"));t?.status&&(e=Tt(e,bt("status","==",t.status))),t?.serviceType&&(e=Tt(e,bt("serviceType","==",t.serviceType))),t?.bank&&(e=Tt(e,bt("bankData.bank","==",t.bank)));let n=(await Ln(e)).docs.map(KT);if(t?.search){const a=t.search.toLowerCase();n=n.filter(o=>o.establishmentName.toLowerCase().includes(a)||o.serviceType.toLowerCase().includes(a)||o.bankData.bank.toLowerCase().includes(a))}return n}catch(e){throw console.error("Erro ao buscar fornecedores:",e),new Error("Falha ao carregar lista de fornecedores")}},async getById(t){try{const e=sr(ct,Mc,t),r=await Ro(e);return r.exists()?KT(r):null}catch(e){throw console.error("Erro ao buscar fornecedor:",e),new Error("Falha ao carregar dados do fornecedor")}},async create(t){try{const e=await this.generateSupplierCode(),r={...XT(t),code:e,createdAt:nt.now(),updatedAt:nt.now()};return(await Hl(gr(ct,Mc),r)).id}catch(e){throw console.error("Erro ao criar fornecedor:",e),new Error("Falha ao criar fornecedor")}},async update(t){try{const{id:e,...r}=t,n=sr(ct,Mc,e),a={...XT(r),updatedAt:nt.now()};await zl(n,a)}catch(e){throw console.error("Erro ao atualizar fornecedor:",e),new Error("Falha ao atualizar fornecedor")}},async delete(t){try{const e=sr(ct,Mc,t);await yu(e)}catch(e){throw console.error("Erro ao deletar fornecedor:",e),new Error("Falha ao deletar fornecedor")}},async searchByName(t,e=10){try{return(await this.getAll()).filter(a=>a.establishmentName.toLowerCase().includes(t.toLowerCase())).slice(0,e)}catch(r){throw console.error("Erro ao buscar fornecedores por nome:",r),new Error("Falha na busca de fornecedores")}},async pixExists(t,e){try{const r=Tt(gr(ct,Mc),bt("pix","==",t)),n=await Ln(r);return e?n.docs.some(a=>a.id!==e):!n.empty}catch(r){return console.error("Erro ao verificar PIX:",r),!1}},async generateSupplierCode(){try{const e=(await this.getAll()).sort((a,o)=>o.createdAt.getTime()-a.createdAt.getTime())[0];return!e||!e.code?"FOR001":`FOR${(parseInt(e.code.replace("FOR",""))+1).toString().padStart(3,"0")}`}catch(t){return console.error("Erro ao gerar cdigo:",t),"FOR001"}},async getStats(){try{const t=await this.getAll();return{total:t.length,active:t.filter(e=>e.status==="active").length,inactive:t.filter(e=>e.status==="inactive").length,suspended:t.filter(e=>e.status==="suspended").length}}catch(t){throw console.error("Erro ao obter estatsticas:",t),new Error("Falha ao carregar estatsticas")}}},QP=({suppliers:t,loading:e,onEdit:r,onView:n,onDelete:a})=>{const[o,c]=B.useState("establishmentName"),[h,m]=B.useState("asc"),d=A=>{o===A?m(h==="asc"?"desc":"asc"):(c(A),m("asc"))},p=[...t].sort((A,M)=>{let V=A[o],H=M[o];return o==="bankData"&&(V=A.bankData.bank,H=M.bankData.bank),V instanceof Date&&H instanceof Date?h==="asc"?V.getTime()-H.getTime():H.getTime()-V.getTime():typeof V=="number"&&typeof H=="number"?h==="asc"?V-H:H-V:typeof V=="string"&&typeof H=="string"?h==="asc"?V.localeCompare(H):H.localeCompare(V):0}),x=A=>new Intl.DateTimeFormat("pt-BR").format(A),y=A=>`${A}%`,E=A=>{const V={active:{label:"Ativo",class:"status-active"},inactive:{label:"Inativo",class:"status-inactive"},suspended:{label:"Suspenso",class:"status-suspended"}}[A]||{label:A,class:"status-default"};return i.jsx("span",{className:`status-badge ${V.class}`,children:V.label})},w=A=>({catering:"Buffet/Catering",decoration:"Decorao",photography:"Fotografia",music:"Msica/Som",transport:"Transporte",cleaning:"Limpeza",security:"Segurana",flowers:"Flores",other:"Outros"})[A]||A,T=A=>({checking:"Conta Corrente",savings:"Poupana",business:"Empresarial"})[A]||A,b=({field:A,children:M})=>i.jsxs("button",{className:`sort-button ${o===A?"active":""}`,onClick:()=>d(A),children:[M,o===A&&i.jsx("span",{className:"sort-indicator",children:h==="asc"?"":""})]});return e?i.jsx("div",{className:"supplier-list-loading",children:i.jsx(kr,{text:"Carregando fornecedores..."})}):t.length===0?i.jsx("div",{className:"supplier-list-empty",children:i.jsxs("div",{className:"empty-state",children:[i.jsx("div",{className:"empty-icon",children:i.jsx(_i,{size:48})}),i.jsx("h3",{children:"Nenhum fornecedor encontrado"}),i.jsx("p",{children:"No h fornecedores cadastrados ou que correspondam aos filtros aplicados."})]})}):i.jsxs("div",{className:"supplier-list",children:[i.jsx("div",{className:"supplier-list-header",children:i.jsxs("h3",{children:["Lista de Fornecedores (",t.length,")"]})}),i.jsx("div",{className:"supplier-table-container",children:i.jsxs("table",{className:"supplier-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:i.jsx(b,{field:"establishmentName",children:"Nome do Estabelecimento"})}),i.jsx("th",{children:i.jsx(b,{field:"serviceType",children:"Tipo de Servio"})}),i.jsx("th",{children:i.jsx(b,{field:"status",children:"Status"})}),i.jsx("th",{children:i.jsx(b,{field:"commissionPercentage",children:"Comisso"})}),i.jsx("th",{children:i.jsx(b,{field:"bankData",children:"Banco"})}),i.jsx("th",{children:i.jsx(b,{field:"createdAt",children:"Data Cadastro"})}),i.jsx("th",{className:"actions-column",children:"Aes"})]})}),i.jsx("tbody",{children:p.map(A=>i.jsxs("tr",{className:"supplier-row",children:[i.jsx("td",{className:"supplier-name",children:i.jsxs("div",{className:"name-info",children:[i.jsx("span",{className:"name",children:A.establishmentName}),i.jsxs("span",{className:"code",children:["Cdigo: ",A.code]})]})}),i.jsx("td",{className:"supplier-service",children:i.jsx("span",{className:"service-type",children:w(A.serviceType)})}),i.jsx("td",{className:"supplier-status",children:E(A.status)}),i.jsx("td",{className:"supplier-commission",children:i.jsxs("div",{className:"commission-info",children:[i.jsx("span",{className:"commission-value",children:y(A.commissionPercentage)}),i.jsx("span",{className:"commission-label",children:"comisso"})]})}),i.jsx("td",{className:"supplier-bank",children:i.jsxs("div",{className:"bank-info",children:[i.jsx("span",{className:"bank-name",children:A.bankData.bank}),i.jsx("span",{className:"account-type",children:T(A.bankData.accountType)})]})}),i.jsx("td",{className:"supplier-date",children:x(A.createdAt)}),i.jsx("td",{className:"supplier-actions",children:i.jsxs("div",{className:"action-buttons",children:[i.jsx(Je,{onClick:()=>n(A),variant:"secondary",size:"small",className:"action-btn view-btn",children:i.jsx(us,{size:16})}),i.jsx(Je,{onClick:()=>r(A),variant:"secondary",size:"small",className:"action-btn edit-btn",children:i.jsx(Gl,{size:16})}),i.jsx(Je,{onClick:()=>a(A.id),variant:"secondary",size:"small",className:"action-btn delete-btn",children:i.jsx(bu,{size:16})})]})})]},A.id))})]})})]})},QT={establishmentName:"",serviceType:"",bankData:{bank:"",agency:"",account:"",accountType:"checking"},pix:"",commissionPercentage:0,status:"active"},JP=({isOpen:t,onClose:e,onSave:r,supplier:n,mode:a})=>{const[o,c]=B.useState(QT),[h,m]=B.useState(!1),[d,p]=B.useState({}),{showError:x}=Bn(),y=a==="view",E=a==="edit",w=a==="create";B.useEffect(()=>{t&&(c(n&&(E||a==="view")?{establishmentName:n.establishmentName,serviceType:n.serviceType,bankData:{bank:n.bankData.bank,agency:n.bankData.agency,account:n.bankData.account,accountType:n.bankData.accountType},pix:n.pix,commissionPercentage:n.commissionPercentage,status:n.status}:QT),p({}))},[t,n,E,a]);const T=()=>{const q={};return o.establishmentName.trim()||(q.establishmentName="Nome do estabelecimento  obrigatrio"),o.serviceType.trim()||(q.serviceType="Tipo de servio  obrigatrio"),o.pix.trim()||(q.pix="PIX  obrigatrio"),o.commissionPercentage<=0&&(q.commissionPercentage="Percentual de comisso deve ser maior que zero"),o.commissionPercentage>100&&(q.commissionPercentage="Percentual de comisso no pode ser maior que 100%"),o.bankData.bank.trim()||(q["bankData.bank"]="Banco  obrigatrio"),o.bankData.agency.trim()||(q["bankData.agency"]="Agncia  obrigatria"),o.bankData.account.trim()||(q["bankData.account"]="Conta  obrigatria"),p(q),Object.keys(q).length===0},b=async q=>{if(q.preventDefault(),!y&&T())try{m(!0);let j="create";w?(await td.create(o),j="create"):E&&n&&(await td.update({id:n.id,...o}),j="edit"),r(j)}catch(j){const D=j instanceof Error?j.message:"Erro ao salvar fornecedor";p({submit:D}),x("Erro ao salvar fornecedor",D)}finally{m(!1)}},A=(q,j)=>{y||(c(D=>{if(q.includes(".")){const[S,P]=q.split(".");return S==="bankData"?{...D,bankData:{...D.bankData,[P]:j}}:D}return{...D,[q]:j}}),d[q]&&p(D=>{const S={...D};return delete S[q],S}))},M=[{value:"active",label:"Ativo"},{value:"inactive",label:"Inativo"},{value:"suspended",label:"Suspenso"}],V=[{value:"catering",label:"Buffet/Catering"},{value:"decoration",label:"Decorao"},{value:"photography",label:"Fotografia"},{value:"music",label:"Msica/Som"},{value:"transport",label:"Transporte"},{value:"cleaning",label:"Limpeza"},{value:"security",label:"Segurana"},{value:"flowers",label:"Flores"},{value:"other",label:"Outros"}],H=[{value:"checking",label:"Conta Corrente"},{value:"savings",label:"Poupana"},{value:"business",label:"Conta Empresarial"}],re=()=>{switch(a){case"create":return"Novo Fornecedor";case"edit":return"Editar Fornecedor";case"view":return"Visualizar Fornecedor";default:return"Fornecedor"}};return i.jsx(Su,{isOpen:t,onClose:e,title:re(),size:"large",className:"supplier-modal",children:i.jsxs("form",{onSubmit:b,className:"supplier-form",children:[h&&i.jsx(kr,{text:"Salvando fornecedor..."}),d.submit&&i.jsx("div",{className:"error-message",children:d.submit}),i.jsxs("div",{className:"form-sections",children:[i.jsxs("div",{className:"form-section",children:[i.jsx("h3",{children:"Informaes Bsicas"}),i.jsxs("div",{className:"form-row",children:[i.jsx("div",{className:"form-group",children:i.jsx(Qt,{label:"Status",value:o.status,onChange:q=>A("status",q),options:M,disabled:y,error:d.status})}),i.jsx("div",{className:"form-group",children:i.jsx(Re,{label:"Cdigo",value:n?.code||"Gerado automaticamente",placeholder:"Cdigo ser gerado automaticamente",onChange:()=>{}})})]}),i.jsx("div",{className:"form-row",children:i.jsx("div",{className:"form-group full-width",children:i.jsx(Re,{label:"Nome do Estabelecimento",value:o.establishmentName,onChange:q=>A("establishmentName",q),placeholder:"Digite o nome do estabelecimento",error:d.establishmentName,required:!0})})}),i.jsxs("div",{className:"form-row",children:[i.jsx("div",{className:"form-group",children:i.jsx(Qt,{label:"Tipo de Servio",value:o.serviceType,onChange:q=>A("serviceType",q),options:V,disabled:y,error:d.serviceType,required:!0})}),i.jsx("div",{className:"form-group",children:i.jsx(Re,{label:"PIX",value:o.pix,onChange:q=>A("pix",q),placeholder:"Digite a chave PIX",error:d.pix,required:!0})}),i.jsx("div",{className:"form-group",children:i.jsx(Re,{label:"Percentual de Comisso (%)",value:String(Math.round(o.commissionPercentage*100)),onChange:q=>{const j=Br(q,"percentage");A("commissionPercentage",j)},placeholder:"0,00%",error:d.commissionPercentage,required:!0,mask:"percentage",returnUnmasked:!0})})]})]}),i.jsxs("div",{className:"form-section",children:[i.jsx("h3",{children:"Dados Bancrios"}),i.jsxs("div",{className:"form-row",children:[i.jsx("div",{className:"form-group",children:i.jsx(Re,{label:"Banco",value:o.bankData.bank,onChange:q=>A("bankData.bank",q),placeholder:"Nome do banco",error:d["bankData.bank"],required:!0})}),i.jsx("div",{className:"form-group",children:i.jsx(Re,{label:"Agncia",value:o.bankData.agency,onChange:q=>A("bankData.agency",q),placeholder:"0000",error:d["bankData.agency"],required:!0,mask:"bankAgency"})}),i.jsx("div",{className:"form-group",children:i.jsx(Re,{label:"Conta",value:o.bankData.account,onChange:q=>A("bankData.account",q),placeholder:"00000-0",error:d["bankData.account"],required:!0,mask:"bankAccount"})}),i.jsx("div",{className:"form-group",children:i.jsx(Qt,{label:"Tipo de Conta",value:o.bankData.accountType,onChange:q=>A("bankData.accountType",q),options:H,disabled:y,error:d["bankData.accountType"]})})]})]})]}),!y&&i.jsxs("div",{className:"form-actions",children:[i.jsx(Je,{type:"button",variant:"secondary",onClick:e,disabled:h,children:"Cancelar"}),i.jsx(Je,{type:"submit",disabled:h,children:h?"Salvando...":w?"Criar Fornecedor":"Salvar Alteraes"})]}),y&&i.jsx("div",{className:"form-actions",children:i.jsx(Je,{type:"button",onClick:e,children:"Fechar"})})]})})},ZP=({filters:t,onFiltersChange:e,onClearFilters:r,supplierCount:n,totalCount:a})=>{const[o,c]=B.useState(!1),h=(x,y)=>{const E={...t,[x]:y||void 0};Object.keys(E).forEach(w=>{E[w]||delete E[w]}),e(E)},m=Object.keys(t).length>0,d=[{value:"",label:"Todos os status"},{value:"active",label:"Ativo"},{value:"inactive",label:"Inativo"},{value:"suspended",label:"Suspenso"}],p=[{value:"",label:"Todos os tipos de servio"},{value:"catering",label:"Buffet/Catering"},{value:"decoration",label:"Decorao"},{value:"photography",label:"Fotografia"},{value:"music",label:"Msica/Som"},{value:"transport",label:"Transporte"},{value:"cleaning",label:"Limpeza"},{value:"security",label:"Segurana"},{value:"flowers",label:"Flores"},{value:"other",label:"Outros"}];return i.jsxs("div",{className:"supplier-filters",children:[i.jsxs("div",{className:"filters-header",children:[i.jsxs("div",{className:"filters-info",children:[i.jsx("h3",{children:"Filtros"}),i.jsx("span",{className:"results-count",children:n===a?`${a} fornecedores`:`${n} de ${a} fornecedores`})]}),i.jsxs("div",{className:"filters-actions",children:[m&&i.jsx(Je,{onClick:r,variant:"secondary",size:"small",children:"Limpar Filtros"}),i.jsx(Je,{onClick:()=>c(!o),variant:"secondary",size:"small",className:"toggle-filters-btn",children:o?" Ocultar":" Expandir"})]})]}),i.jsxs("div",{className:`filters-content ${o?"expanded":""}`,children:[i.jsxs("div",{className:"filters-row",children:[i.jsx("div",{className:"filter-group",children:i.jsx(Re,{label:"Buscar",placeholder:"Nome, tipo de servio, banco...",value:t.search||"",onChange:x=>h("search",x)})}),i.jsx("div",{className:"filter-group",children:i.jsx(Qt,{label:"Status",value:t.status||"",onChange:x=>h("status",x),options:d})}),i.jsx("div",{className:"filter-group",children:i.jsx(Qt,{label:"Tipo de Servio",value:t.serviceType||"",onChange:x=>h("serviceType",x),options:p})})]}),o&&i.jsx("div",{className:"filters-row",children:i.jsx("div",{className:"filter-group",children:i.jsx(Re,{label:"Banco",placeholder:"Digite o banco",value:t.bank||"",onChange:x=>h("bank",x)})})})]}),m&&i.jsxs("div",{className:"active-filters",children:[i.jsx("span",{className:"active-filters-label",children:"Filtros ativos:"}),i.jsxs("div",{className:"filter-tags",children:[t.search&&i.jsxs("span",{className:"filter-tag",children:['Busca: "',t.search,'"',i.jsx("button",{onClick:()=>h("search",""),children:""})]}),t.status&&i.jsxs("span",{className:"filter-tag",children:["Status:"," ",d.find(x=>x.value===t.status)?.label,i.jsx("button",{onClick:()=>h("status",""),children:""})]}),t.serviceType&&i.jsxs("span",{className:"filter-tag",children:["Tipo:"," ",p.find(x=>x.value===t.serviceType)?.label,i.jsx("button",{onClick:()=>h("serviceType",""),children:""})]}),t.bank&&i.jsxs("span",{className:"filter-tag",children:["Banco: ",t.bank,i.jsx("button",{onClick:()=>h("bank",""),children:""})]})]})]})]})},eF=({stats:t})=>{const e=[{title:"Total de Fornecedores",value:t.total,icon:MP,color:"blue",description:"Total de fornecedores cadastrados"},{title:"Fornecedores Ativos",value:t.active,icon:Vn,color:"green",description:"Fornecedores com status ativo"},{title:"Suspensos",value:t.suspended,icon:Ud,color:"yellow",description:"Fornecedores suspensos"},{title:"Inativos",value:t.inactive,icon:Gd,color:"gray",description:"Fornecedores inativos"}];return i.jsx("div",{className:"supplier-stats",children:i.jsx("div",{className:"stats-grid",children:e.map(r=>{const n=r.icon;return i.jsxs("div",{className:`stat-card stat-card-${r.color}`,children:[i.jsx("div",{className:"stat-icon",children:i.jsx(n,{size:24})}),i.jsxs("div",{className:"stat-content",children:[i.jsx("div",{className:"stat-value",children:r.value}),i.jsx("div",{className:"stat-title",children:r.title}),i.jsx("div",{className:"stat-description",children:r.description})]})]},r.title)})})})},tF=()=>{const[t,e]=B.useState([]),[r,n]=B.useState(!0),[a,o]=B.useState(!1),[c,h]=B.useState(null),[m,d]=B.useState("create"),[p,x]=B.useState({}),[y,E]=B.useState({total:0,active:0,inactive:0,suspended:0}),{showError:w,showSuccess:T,showWarning:b}=Bn(),A=async()=>{try{n(!0);const C=await td.getAll(p);e(C)}catch(C){const k=C instanceof Error?C.message:"Erro ao carregar fornecedores";w("Erro ao carregar fornecedores",k)}finally{n(!1)}},M=async()=>{try{const C=await td.getStats();E(C)}catch(C){const k=C instanceof Error?C.message:"Erro ao carregar estatsticas";b("Estatsticas indisponveis",k)}},V=B.useMemo(()=>{let C=[...t];if(p.search){const k=p.search.toLowerCase();C=C.filter(Ce=>Ce.establishmentName.toLowerCase().includes(k)||Ce.serviceType.toLowerCase().includes(k)||Ce.bankData.bank.toLowerCase().includes(k))}return p.status&&(C=C.filter(k=>k.status===p.status)),p.serviceType&&(C=C.filter(k=>k.serviceType===p.serviceType)),p.bank&&(C=C.filter(k=>k.bankData.bank.toLowerCase().includes(p.bank.toLowerCase()))),C},[t,p]);B.useEffect(()=>{A(),M()},[]),B.useEffect(()=>{Object.keys(p).length>0&&A()},[p]);const H=()=>{h(null),d("create"),o(!0)},re=C=>{h(C),d("edit"),o(!0)},q=C=>{h(C),d("view"),o(!0)},j=async C=>{if(confirm("Tem certeza que deseja excluir este fornecedor?"))try{await td.delete(C),e(t.filter(k=>k.id!==C)),M(),T("Fornecedor excludo","O fornecedor foi excludo com sucesso.")}catch(k){const Ce=k instanceof Error?k.message:"Erro ao excluir fornecedor";w("Erro ao excluir fornecedor",Ce)}},D=()=>{o(!1),h(null)},S=C=>{A(),M(),D(),T(C==="create"?"Fornecedor criado":"Fornecedor atualizado",C==="create"?"O fornecedor foi cadastrado com sucesso.":"As informaes do fornecedor foram atualizadas.")},P=C=>{x(C)},O=()=>{x({})};return r&&t.length===0?i.jsx(kr,{text:"Carregando fornecedores...",fullScreen:!0}):i.jsxs("div",{className:"supplier-management",children:[i.jsx("div",{className:"supplier-management-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("h1",{children:"Gesto de Fornecedores"}),i.jsx(Je,{onClick:H,className:"create-supplier-btn",children:"+ Novo Fornecedor"})]})}),i.jsx(eF,{stats:y}),i.jsxs("div",{className:"supplier-management-content",children:[i.jsx(ZP,{filters:p,onFiltersChange:P,onClearFilters:O,supplierCount:V.length,totalCount:t.length}),i.jsx(QP,{suppliers:V,loading:r,onEdit:re,onView:q,onDelete:j})]}),i.jsx(JP,{isOpen:a,onClose:D,onSave:S,supplier:c,mode:m})]})},Mh="employees",JT=t=>{const e=t.data();if(!e)throw new Error("Document data is undefined");return{id:t.id,name:e.name||"",rentalCommissionPercentage:e.rentalCommissionPercentage||0,supplierCommissionPercentage:e.supplierCommissionPercentage||0,status:e.status||"active",createdAt:e.createdAt?.toDate()||new Date,updatedAt:e.updatedAt?.toDate()||new Date}},ZT=t=>({...t}),Sl={async getAll(t){try{let e=Tt(gr(ct,Mh),Ni("name"));t?.status&&(e=Tt(e,bt("status","==",t.status)));let n=(await Ln(e)).docs.map(JT);if(t?.search){const a=t.search.toLowerCase();n=n.filter(o=>o.name.toLowerCase().includes(a))}return n}catch(e){throw console.error("Erro ao buscar colaboradores:",e),new Error("Falha ao carregar lista de colaboradores")}},async getById(t){try{const e=sr(ct,Mh,t),r=await Ro(e);return r.exists()?JT(r):null}catch(e){throw console.error("Erro ao buscar colaborador:",e),new Error("Falha ao carregar dados do colaborador")}},async create(t){try{const e={...ZT(t),createdAt:nt.now(),updatedAt:nt.now()};return(await Hl(gr(ct,Mh),e)).id}catch(e){throw console.error("Erro ao criar colaborador:",e),new Error("Falha ao criar colaborador")}},async update(t){try{const{id:e,...r}=t,n=sr(ct,Mh,e),a={...ZT(r),updatedAt:nt.now()};await zl(n,a)}catch(e){throw console.error("Erro ao atualizar colaborador:",e),new Error("Falha ao atualizar colaborador")}},async delete(t){try{const e=sr(ct,Mh,t);await yu(e)}catch(e){throw console.error("Erro ao deletar colaborador:",e),new Error("Falha ao deletar colaborador")}},async searchByName(t,e=10){try{return(await this.getAll()).filter(a=>a.name.toLowerCase().includes(t.toLowerCase())).slice(0,e)}catch(r){throw console.error("Erro ao buscar colaboradores por nome:",r),new Error("Falha na busca de colaboradores")}},async getStats(){try{const t=await this.getAll();return{total:t.length,active:t.filter(e=>e.status==="active").length,inactive:t.filter(e=>e.status==="inactive").length,suspended:t.filter(e=>e.status==="suspended").length}}catch(t){throw console.error("Erro ao obter estatsticas:",t),new Error("Falha ao carregar estatsticas")}}},rF=({employees:t,loading:e,onEdit:r,onView:n,onDelete:a})=>{const[o,c]=B.useState("name"),[h,m]=B.useState("asc"),d=T=>{o===T?m(h==="asc"?"desc":"asc"):(c(T),m("asc"))},p=[...t].sort((T,b)=>{const A=T[o],M=b[o];return A instanceof Date&&M instanceof Date?h==="asc"?A.getTime()-M.getTime():M.getTime()-A.getTime():typeof A=="number"&&typeof M=="number"?h==="asc"?A-M:M-A:typeof A=="string"&&typeof M=="string"?h==="asc"?A.localeCompare(M):M.localeCompare(A):0}),x=T=>new Intl.DateTimeFormat("pt-BR").format(T),y=T=>`${T}%`,E=T=>{const A={active:{label:"Ativo",class:"status-active"},inactive:{label:"Inativo",class:"status-inactive"},suspended:{label:"Suspenso",class:"status-suspended"}}[T]||{label:T,class:"status-default"};return i.jsx("span",{className:`status-badge ${A.class}`,children:A.label})},w=({field:T,children:b})=>i.jsxs("button",{className:`sort-button ${o===T?"active":""}`,onClick:()=>d(T),children:[b,o===T&&i.jsx("span",{className:"sort-indicator",children:h==="asc"?"":""})]});return e?i.jsx("div",{className:"employee-list-loading",children:i.jsx(kr,{text:"Carregando colaboradores..."})}):t.length===0?i.jsx("div",{className:"employee-list-empty",children:i.jsxs("div",{className:"empty-state",children:[i.jsx("div",{className:"empty-icon",children:i.jsx(_i,{size:48})}),i.jsx("h3",{children:"Nenhum colaborador encontrado"}),i.jsx("p",{children:"No h colaboradores cadastrados ou que correspondam aos filtros aplicados."})]})}):i.jsxs("div",{className:"employee-list",children:[i.jsx("div",{className:"employee-list-header",children:i.jsxs("h3",{children:["Lista de Colaboradores (",t.length,")"]})}),i.jsx("div",{className:"employee-table-container",children:i.jsxs("table",{className:"employee-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:i.jsx(w,{field:"name",children:"Nome"})}),i.jsx("th",{children:i.jsx(w,{field:"rentalCommissionPercentage",children:"Comisso Locaes"})}),i.jsx("th",{children:i.jsx(w,{field:"supplierCommissionPercentage",children:"Comisso Fornecedores"})}),i.jsx("th",{children:i.jsx(w,{field:"status",children:"Status"})}),i.jsx("th",{children:i.jsx(w,{field:"createdAt",children:"Data Cadastro"})}),i.jsx("th",{className:"actions-column",children:"Aes"})]})}),i.jsx("tbody",{children:p.map(T=>i.jsxs("tr",{className:"employee-row",children:[i.jsx("td",{className:"employee-name",children:i.jsx("span",{className:"name",children:T.name})}),i.jsx("td",{className:"employee-commission",children:i.jsxs("div",{className:"commission-info",children:[i.jsx("span",{className:"commission-value",children:y(T.rentalCommissionPercentage)}),i.jsx("span",{className:"commission-label",children:"do lquido"}),i.jsx("span",{className:"commission-description",children:"(Faturamento - Despesas)"})]})}),i.jsx("td",{className:"employee-commission",children:i.jsxs("div",{className:"commission-info",children:[i.jsx("span",{className:"commission-value",children:y(T.supplierCommissionPercentage)}),i.jsx("span",{className:"commission-label",children:"do lquido"}),i.jsx("span",{className:"commission-description",children:"(Faturamento - Impostos)"})]})}),i.jsx("td",{className:"employee-status",children:E(T.status)}),i.jsx("td",{className:"employee-date",children:x(T.createdAt)}),i.jsx("td",{className:"employee-actions",children:i.jsxs("div",{className:"action-buttons",children:[i.jsx(Je,{onClick:()=>n(T),variant:"secondary",size:"small",className:"action-btn view-btn",children:i.jsx(us,{size:16})}),i.jsx(Je,{onClick:()=>r(T),variant:"secondary",size:"small",className:"action-btn edit-btn",children:i.jsx(Gl,{size:16})}),i.jsx(Je,{onClick:()=>a(T.id),variant:"secondary",size:"small",className:"action-btn delete-btn",children:i.jsx(bu,{size:16})})]})})]},T.id))})]})})]})},ew={name:"",rentalCommissionPercentage:10,supplierCommissionPercentage:10,status:"active"},nF=({isOpen:t,onClose:e,onSave:r,employee:n,mode:a})=>{const[o,c]=B.useState(ew),[h,m]=B.useState(!1),[d,p]=B.useState({}),{showError:x}=Bn(),y=a==="view",E=a==="edit",w=a==="create";B.useEffect(()=>{t&&(c(n&&(E||a==="view")?{name:n.name,rentalCommissionPercentage:n.rentalCommissionPercentage,supplierCommissionPercentage:n.supplierCommissionPercentage,status:n.status}:ew),p({}))},[t,n,E,a]);const T=()=>{const H={};return o.name.trim()||(H.name="Nome  obrigatrio"),o.rentalCommissionPercentage<=0&&(H.rentalCommissionPercentage="Percentual de comisso de locaes deve ser maior que zero"),o.rentalCommissionPercentage>100&&(H.rentalCommissionPercentage="Percentual de comisso de locaes no pode ser maior que 100%"),o.supplierCommissionPercentage<=0&&(H.supplierCommissionPercentage="Percentual de comisso de fornecedores deve ser maior que zero"),o.supplierCommissionPercentage>100&&(H.supplierCommissionPercentage="Percentual de comisso de fornecedores no pode ser maior que 100%"),p(H),Object.keys(H).length===0},b=async H=>{if(H.preventDefault(),!y&&T())try{m(!0);let re="create";w?(await Sl.create(o),re="create"):E&&n&&(await Sl.update({id:n.id,...o}),re="edit"),r(re)}catch(re){const q=re instanceof Error?re.message:"Erro ao salvar colaborador";p({submit:q}),x("Erro ao salvar colaborador",q)}finally{m(!1)}},A=(H,re)=>{y||(c(q=>({...q,[H]:re})),d[H]&&p(q=>{const j={...q};return delete j[H],j}))},M=[{value:"active",label:"Ativo"},{value:"inactive",label:"Inativo"},{value:"suspended",label:"Suspenso"}],V=()=>{switch(a){case"create":return"Novo Colaborador";case"edit":return"Editar Colaborador";case"view":return"Visualizar Colaborador";default:return"Colaborador"}};return i.jsx(Su,{isOpen:t,onClose:e,title:V(),size:"medium",className:"employee-modal",children:i.jsxs("form",{onSubmit:b,className:"employee-form",children:[h&&i.jsx(kr,{text:"Salvando colaborador..."}),d.submit&&i.jsx("div",{className:"error-message",children:d.submit}),i.jsxs("div",{className:"form-sections",children:[i.jsxs("div",{className:"form-section",children:[i.jsx("h3",{children:"Informaes Bsicas"}),i.jsx("div",{className:"form-row",children:i.jsx("div",{className:"form-group",children:i.jsx(Qt,{label:"Status",value:o.status,onChange:H=>A("status",H),options:M,disabled:y,error:d.status})})}),i.jsx("div",{className:"form-row",children:i.jsx("div",{className:"form-group full-width",children:i.jsx(Re,{label:"Nome do Colaborador",value:o.name,onChange:H=>A("name",H),placeholder:"Digite o nome completo",error:d.name,required:!0})})})]}),i.jsxs("div",{className:"form-section",children:[i.jsx("h3",{children:"Percentuais de Comisso"}),i.jsx("div",{className:"commission-info",children:i.jsx("p",{className:"info-text",children:"Os percentuais so aplicados sobre o valor lquido (faturamento - despesas/impostos)"})}),i.jsxs("div",{className:"form-row",children:[i.jsxs("div",{className:"form-group",children:[i.jsx(Re,{label:"Comisso Locaes (%)",value:String(Math.round(o.rentalCommissionPercentage*100)),onChange:H=>{const re=Br(H,"percentage");A("rentalCommissionPercentage",re)},placeholder:"10,00%",error:d.rentalCommissionPercentage,required:!0,mask:"percentage",returnUnmasked:!0}),i.jsx("div",{className:"field-description",children:i.jsx("small",{children:"10% do lquido (Faturamento - Despesas)"})})]}),i.jsxs("div",{className:"form-group",children:[i.jsx(Re,{label:"Comisso Fornecedores (%)",value:String(Math.round(o.supplierCommissionPercentage*100)),onChange:H=>{const re=Br(H,"percentage");A("supplierCommissionPercentage",re)},placeholder:"10,00%",error:d.supplierCommissionPercentage,required:!0,mask:"percentage",returnUnmasked:!0}),i.jsx("div",{className:"field-description",children:i.jsx("small",{children:"10% do lquido (Faturamento - Impostos)"})})]})]})]})]}),!y&&i.jsxs("div",{className:"form-actions",children:[i.jsx(Je,{type:"button",variant:"secondary",onClick:e,disabled:h,children:"Cancelar"}),i.jsx(Je,{type:"submit",disabled:h,children:h?"Salvando...":w?"Criar Colaborador":"Salvar Alteraes"})]}),y&&i.jsx("div",{className:"form-actions",children:i.jsx(Je,{type:"button",onClick:e,children:"Fechar"})})]})})},aF=({filters:t,onFiltersChange:e,onClearFilters:r,employeeCount:n,totalCount:a})=>{const[o,c]=B.useState(!1),h=(p,x)=>{const y={...t,[p]:x||void 0};Object.keys(y).forEach(E=>{y[E]||delete y[E]}),e(y)},m=Object.keys(t).length>0,d=[{value:"",label:"Todos os status"},{value:"active",label:"Ativo"},{value:"inactive",label:"Inativo"},{value:"suspended",label:"Suspenso"}];return i.jsxs("div",{className:"employee-filters",children:[i.jsxs("div",{className:"filters-header",children:[i.jsxs("div",{className:"filters-info",children:[i.jsx("h3",{children:"Filtros"}),i.jsx("span",{className:"results-count",children:n===a?`${a} colaboradores`:`${n} de ${a} colaboradores`})]}),i.jsxs("div",{className:"filters-actions",children:[m&&i.jsx(Je,{onClick:r,variant:"secondary",size:"small",children:"Limpar Filtros"}),i.jsx(Je,{onClick:()=>c(!o),variant:"secondary",size:"small",className:"toggle-filters-btn",children:o?" Ocultar":" Expandir"})]})]}),i.jsx("div",{className:`filters-content ${o?"expanded":""}`,children:i.jsxs("div",{className:"filters-row",children:[i.jsx("div",{className:"filter-group",children:i.jsx(Re,{label:"Buscar",placeholder:"Nome do colaborador...",value:t.search||"",onChange:p=>h("search",p)})}),i.jsx("div",{className:"filter-group",children:i.jsx(Qt,{label:"Status",value:t.status||"",onChange:p=>h("status",p),options:d})})]})}),m&&i.jsxs("div",{className:"active-filters",children:[i.jsx("span",{className:"active-filters-label",children:"Filtros ativos:"}),i.jsxs("div",{className:"filter-tags",children:[t.search&&i.jsxs("span",{className:"filter-tag",children:['Busca: "',t.search,'"',i.jsx("button",{onClick:()=>h("search",""),children:""})]}),t.status&&i.jsxs("span",{className:"filter-tag",children:["Status:"," ",d.find(p=>p.value===t.status)?.label,i.jsx("button",{onClick:()=>h("status",""),children:""})]})]})]})]})},sF=({stats:t})=>{const e=[{title:"Total de Colaboradores",value:t.total,icon:Ur,color:"blue",description:"Total de colaboradores cadastrados"},{title:"Colaboradores Ativos",value:t.active,icon:Vn,color:"green",description:"Colaboradores com status ativo"},{title:"Suspensos",value:t.suspended,icon:Ud,color:"yellow",description:"Colaboradores suspensos"},{title:"Inativos",value:t.inactive,icon:Gd,color:"gray",description:"Colaboradores inativos"}];return i.jsx("div",{className:"employee-stats",children:i.jsx("div",{className:"stats-grid",children:e.map(r=>{const n=r.icon;return i.jsxs("div",{className:`stat-card stat-card-${r.color}`,children:[i.jsx("div",{className:"stat-icon",children:i.jsx(n,{size:24})}),i.jsxs("div",{className:"stat-content",children:[i.jsx("div",{className:"stat-value",children:r.value}),i.jsx("div",{className:"stat-title",children:r.title}),i.jsx("div",{className:"stat-description",children:r.description})]})]},r.title)})})})},iF=()=>{const[t,e]=B.useState([]),[r,n]=B.useState(!0),[a,o]=B.useState(!1),[c,h]=B.useState(null),[m,d]=B.useState("create"),[p,x]=B.useState({}),[y,E]=B.useState({total:0,active:0,inactive:0,suspended:0}),{showError:w,showSuccess:T,showWarning:b}=Bn(),A=async()=>{try{n(!0);const C=await Sl.getAll(p);e(C)}catch(C){const k=C instanceof Error?C.message:"Erro ao carregar colaboradores";w("Erro ao carregar colaboradores",k)}finally{n(!1)}},M=async()=>{try{const C=await Sl.getStats();E(C)}catch(C){const k=C instanceof Error?C.message:"Erro ao carregar estatsticas";b("Estatsticas indisponveis",k)}},V=B.useMemo(()=>{let C=[...t];if(p.search){const k=p.search.toLowerCase();C=C.filter(Ce=>Ce.name.toLowerCase().includes(k))}return p.status&&(C=C.filter(k=>k.status===p.status)),C},[t,p]);B.useEffect(()=>{A(),M()},[]),B.useEffect(()=>{Object.keys(p).length>0&&A()},[p]);const H=()=>{h(null),d("create"),o(!0)},re=C=>{h(C),d("edit"),o(!0)},q=C=>{h(C),d("view"),o(!0)},j=async C=>{if(confirm("Tem certeza que deseja excluir este colaborador?"))try{await Sl.delete(C),e(t.filter(k=>k.id!==C)),M(),T("Colaborador excludo","O colaborador foi excludo com sucesso.")}catch(k){const Ce=k instanceof Error?k.message:"Erro ao excluir colaborador";w("Erro ao excluir colaborador",Ce)}},D=()=>{o(!1),h(null)},S=C=>{A(),M(),D(),T(C==="create"?"Colaborador criado":"Colaborador atualizado",C==="create"?"O colaborador foi cadastrado com sucesso.":"As informaes do colaborador foram atualizadas.")},P=C=>{x(C)},O=()=>{x({})};return r&&t.length===0?i.jsx(kr,{text:"Carregando colaboradores...",fullScreen:!0}):i.jsxs("div",{className:"employee-management",children:[i.jsx("div",{className:"employee-management-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("h1",{children:"Gesto de Colaboradores"}),i.jsx(Je,{onClick:H,className:"create-employee-btn",children:"+ Novo Colaborador"})]})}),i.jsx(sF,{stats:y}),i.jsxs("div",{className:"employee-management-content",children:[i.jsx(aF,{filters:p,onFiltersChange:P,onClearFilters:O,employeeCount:V.length,totalCount:t.length}),i.jsx(rF,{employees:V,loading:r,onEdit:re,onView:q,onDelete:j})]}),i.jsx(nF,{isOpen:a,onClose:D,onSave:S,employee:c,mode:m})]})},Ph="houses",tw=t=>{const e=t.data();if(!e)throw new Error("Data not found");return{id:t.id,code:e.code||"",houseName:e.houseName||"",address:e.address||{street:"",number:"",complement:"",neighborhood:"",city:"",state:""},internetPassword:e.internetPassword||"",photos:e.photos||[],description:e.description||"",observations:e.observations||"",pricing:e.pricing||{lowSeason:0,midSeason:0,highSeason:0,carnivalPackage:0,newYearPackage:0},status:e.status||"available",occupiedDates:Array.isArray(e.occupiedDates)?e.occupiedDates.map(r=>r.toDate()):[],createdAt:e.createdAt?.toDate()||new Date,updatedAt:e.updatedAt?.toDate()||new Date}},rw=t=>{const e={...t};return"occupiedDates"in e&&e.occupiedDates&&(Array.isArray(e.occupiedDates)&&e.occupiedDates.length>0?e.occupiedDates=e.occupiedDates.map(r=>nt.fromDate(r)):e.occupiedDates=[]),e},as={async getAll(t){try{let e=Tt(gr(ct,Ph),Ni("houseName"));t?.status&&(e=Tt(e,bt("status","==",t.status))),t?.city&&(e=Tt(e,bt("address.city","==",t.city))),t?.state&&(e=Tt(e,bt("address.state","==",t.state)));let n=(await Ln(e)).docs.map(tw);if(t?.search){const a=t.search.toLowerCase();n=n.filter(o=>o.houseName.toLowerCase().includes(a)||o.address.city.toLowerCase().includes(a)||o.address.neighborhood.toLowerCase().includes(a)||o.description.toLowerCase().includes(a))}return t?.priceRange&&(n=n.filter(a=>{const o=t.priceRange.min,c=t.priceRange.max;return a.pricing.lowSeason>=o&&a.pricing.lowSeason<=c})),n}catch(e){throw console.error("Erro ao buscar casas:",e),new Error("Falha ao carregar lista de casas")}},async getById(t){try{const e=sr(ct,Ph,t),r=await Ro(e);return r.exists()?tw(r):null}catch(e){throw console.error("Erro ao buscar casa:",e),new Error("Falha ao carregar dados da casa")}},async create(t){try{const e=await this.generateHouseCode(),r={...rw(t),code:e,createdAt:nt.now(),updatedAt:nt.now()};return(await Hl(gr(ct,Ph),r)).id}catch(e){throw console.error("Erro ao criar casa:",e),new Error("Falha ao criar casa")}},async update(t){try{const{id:e,...r}=t,n=sr(ct,Ph,e),a={...rw(r),updatedAt:nt.now()};await zl(n,a)}catch(e){throw console.error("Erro ao atualizar casa:",e),new Error("Falha ao atualizar casa")}},async delete(t){try{const e=sr(ct,Ph,t);await yu(e)}catch(e){throw console.error("Erro ao deletar casa:",e),new Error("Falha ao deletar casa")}},async generateHouseCode(){try{const e=(await this.getAll()).sort((a,o)=>o.createdAt.getTime()-a.createdAt.getTime())[0];return!e||!e.code?"CASA001":`CASA${(parseInt(e.code.replace("CASA",""))+1).toString().padStart(3,"0")}`}catch(t){return console.error("Erro ao gerar cdigo:",t),"CASA001"}},async getStats(){try{const t=await this.getAll();return{total:t.length,available:t.filter(e=>e.status==="available").length,occupied:t.filter(e=>e.status==="occupied").length,maintenance:t.filter(e=>e.status==="maintenance").length,inactive:t.filter(e=>e.status==="inactive").length}}catch(t){throw console.error("Erro ao obter estatsticas:",t),new Error("Falha ao carregar estatsticas")}}},oF=({houses:t,loading:e,onEdit:r,onDelete:n,onView:a})=>{const[o,c]=B.useState(""),[h,m]=B.useState("asc"),d=T=>{o===T?m(h==="asc"?"desc":"asc"):(c(T),m("asc"))},p=[...t].sort((T,b)=>{let A=T[o],M=b[o];return o==="address"&&(A=T.address.city,M=b.address.city),o==="pricing"&&(A=T.pricing.lowSeason,M=b.pricing.lowSeason),A instanceof Date&&M instanceof Date?h==="asc"?A.getTime()-M.getTime():M.getTime()-A.getTime():typeof A=="number"&&typeof M=="number"?h==="asc"?A-M:M-A:typeof A=="string"&&typeof M=="string"?h==="asc"?A.localeCompare(M):M.localeCompare(A):0}),x=T=>new Intl.DateTimeFormat("pt-BR").format(T),y=T=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(T),E=T=>{const A={available:{label:"Disponvel",class:"status-available"},occupied:{label:"Ocupada",class:"status-occupied"},maintenance:{label:"Manuteno",class:"status-maintenance"},inactive:{label:"Inativa",class:"status-inactive"}}[T]||{label:T,class:"status-default"};return i.jsx("span",{className:`status-badge ${A.class}`,children:A.label})},w=({field:T,children:b})=>i.jsxs("button",{className:`sort-button ${o===T?"active":""}`,onClick:()=>d(T),children:[b,o===T&&i.jsx("span",{className:"sort-indicator",children:h==="asc"?"":""})]});return e?i.jsx("div",{className:"house-list-loading",children:i.jsx(kr,{text:"Carregando casas..."})}):t.length===0?i.jsx("div",{className:"house-list-empty",children:i.jsxs("div",{className:"empty-state",children:[i.jsx("div",{className:"empty-icon",children:i.jsx(Nn,{size:48})}),i.jsx("h3",{children:"Nenhuma casa encontrada"}),i.jsx("p",{children:"No h casas cadastradas ou que correspondam aos filtros aplicados."})]})}):i.jsxs("div",{className:"house-list",children:[i.jsx("div",{className:"house-list-header",children:i.jsxs("h3",{children:["Lista de Casas (",t.length,")"]})}),i.jsx("div",{className:"house-table-container",children:i.jsxs("table",{className:"house-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:i.jsx(w,{field:"houseName",children:"Nome da Casa"})}),i.jsx("th",{children:i.jsx(w,{field:"address",children:"Localizao"})}),i.jsx("th",{children:i.jsx(w,{field:"status",children:"Status"})}),i.jsx("th",{children:i.jsx(w,{field:"pricing",children:"Preo (Baixa temporada)"})}),i.jsx("th",{children:i.jsx(w,{field:"createdAt",children:"Data Cadastro"})}),i.jsx("th",{className:"actions-column",children:"Aes"})]})}),i.jsx("tbody",{children:p.map(T=>i.jsxs("tr",{className:"house-row",children:[i.jsx("td",{className:"house-name",children:i.jsxs("div",{className:"name-info",children:[i.jsx("span",{className:"name",children:T.houseName}),i.jsxs("span",{className:"code",children:["Cdigo: ",T.code]})]})}),i.jsx("td",{className:"house-location",children:i.jsxs("div",{className:"location-info",children:[i.jsx("span",{className:"neighborhood",children:T.address.neighborhood}),i.jsxs("span",{className:"city-state",children:[T.address.city," - ",T.address.state]})]})}),i.jsx("td",{className:"house-status",children:E(T.status)}),i.jsx("td",{className:"house-pricing",children:i.jsxs("div",{className:"pricing-info",children:[i.jsx("span",{className:"main-price",children:y(T.pricing.lowSeason)}),i.jsx("span",{className:"price-label",children:"baixa temporada"})]})}),i.jsx("td",{className:"house-date",children:x(T.createdAt)}),i.jsx("td",{className:"house-actions",children:i.jsxs("div",{className:"action-buttons",children:[i.jsx(Je,{onClick:()=>a(T),variant:"secondary",size:"small",className:"action-btn view-btn",children:i.jsx(us,{size:16})}),i.jsx(Je,{onClick:()=>r(T),variant:"secondary",size:"small",className:"action-btn edit-btn",children:i.jsx(Gl,{size:16})}),i.jsx(Je,{onClick:()=>n(T.id),variant:"secondary",size:"small",className:"action-btn delete-btn",children:i.jsx(bu,{size:16})})]})})]},T.id))})]})})]})},nw={houseName:"",ownerId:"",address:{street:"",number:"",complement:"",neighborhood:"",city:"",state:"",zipCode:""},internetPassword:"",photos:[],description:"",observations:"",pricing:{lowSeason:0,midSeason:0,highSeason:0,carnivalPackage:0,newYearPackage:0},status:"available"},lF=({isOpen:t,onClose:e,onSave:r,house:n,mode:a})=>{const[o,c]=B.useState(nw),[h,m]=B.useState(!1),[d,p]=B.useState({}),[x,y]=B.useState([]),{showError:E}=Bn(),w=a==="view",T=a==="edit",b=a==="create";B.useEffect(()=>{t&&(n&&(T||a==="view")?(c({houseName:n.houseName,ownerId:n.ownerId||"",address:{street:n.address.street,number:n.address.number,complement:n.address.complement||"",neighborhood:n.address.neighborhood,city:n.address.city,state:n.address.state,zipCode:n.address.zipCode||""},internetPassword:n.internetPassword,photos:n.photos,description:n.description,observations:n.observations,pricing:{lowSeason:n.pricing.lowSeason,midSeason:n.pricing.midSeason,highSeason:n.pricing.highSeason,carnivalPackage:n.pricing.carnivalPackage,newYearPackage:n.pricing.newYearPackage},status:n.status}),y(n.photos)):(c(nw),y([])),p({}))},[t,n,T,a]);const A=()=>{const S={};return o.houseName.trim()||(S.houseName="Nome da casa  obrigatrio"),o.internetPassword.trim()||(S.internetPassword="Senha da internet  obrigatria"),o.description.trim()||(S.description="Descrio  obrigatria"),o.address.street.trim()||(S["address.street"]="Rua  obrigatria"),o.address.number.trim()||(S["address.number"]="Nmero  obrigatrio"),o.address.neighborhood.trim()||(S["address.neighborhood"]="Bairro  obrigatrio"),o.address.city.trim()||(S["address.city"]="Cidade  obrigatria"),o.address.state.trim()||(S["address.state"]="Estado  obrigatrio"),o.address.zipCode.trim()||(S["address.zipCode"]="CEP  obrigatrio"),o.pricing.lowSeason<=0&&(S["pricing.lowSeason"]="Preo da baixa temporada deve ser maior que zero"),o.pricing.midSeason<=0&&(S["pricing.midSeason"]="Preo da mdia temporada deve ser maior que zero"),o.pricing.highSeason<=0&&(S["pricing.highSeason"]="Preo da alta temporada deve ser maior que zero"),o.pricing.carnivalPackage<=0&&(S["pricing.carnivalPackage"]="Preo do pacote de carnaval deve ser maior que zero"),o.pricing.newYearPackage<=0&&(S["pricing.newYearPackage"]="Preo do pacote de rveillon deve ser maior que zero"),p(S),Object.keys(S).length===0},M=async S=>{if(S.preventDefault(),!w&&A())try{m(!0);const P={...o,photos:x};let O="create";b?(await as.create(P),O="create"):T&&n&&(await as.update({id:n.id,...P}),O="edit"),r(O)}catch(P){const O=P instanceof Error?P.message:"Erro ao salvar casa";p({submit:O}),E("Erro ao salvar casa",O)}finally{m(!1)}},V=(S,P)=>{w||(c(O=>{if(S.includes(".")){const[C,k]=S.split(".");return C==="address"?{...O,address:{...O.address,[k]:P}}:C==="pricing"?{...O,pricing:{...O.pricing,[k]:P}}:O}return{...O,[S]:P}}),d[S]&&p(O=>{const C={...O};return delete C[S],C}))},H=(S,P)=>{const O=[...x];O[S]=P,y(O)},re=()=>{y([...x,""])},q=S=>{const P=x.filter((O,C)=>C!==S);y(P)},j=[{value:"available",label:"Disponvel"},{value:"occupied",label:"Ocupada"},{value:"maintenance",label:"Em Manuteno"},{value:"inactive",label:"Inativa"}],D=()=>{switch(a){case"create":return"Nova Casa";case"edit":return"Editar Casa";case"view":return"Visualizar Casa";default:return"Casa"}};return i.jsx(Su,{isOpen:t,onClose:e,title:D(),size:"large",className:"house-modal",children:i.jsxs("form",{onSubmit:M,className:"house-form",children:[h&&i.jsx(kr,{text:"Salvando casa..."}),d.submit&&i.jsx("div",{className:"error-message",children:d.submit}),i.jsxs("div",{className:"form-sections",children:[i.jsxs("div",{className:"form-section",children:[i.jsx("h3",{children:"Informaes Bsicas"}),i.jsxs("div",{className:"form-row",children:[i.jsx("div",{className:"form-group",children:i.jsx(Qt,{label:"Status",value:o.status,onChange:S=>V("status",S),options:j,disabled:w,error:d.status})}),i.jsx("div",{className:"form-group",children:i.jsx(Re,{label:"Cdigo",value:n?.code||"Gerado automaticamente",placeholder:"Cdigo ser gerado automaticamente",onChange:()=>{}})})]}),i.jsx("div",{className:"form-row",children:i.jsx("div",{className:"form-group full-width",children:i.jsx(Re,{label:"Nome da Casa",value:o.houseName,onChange:S=>V("houseName",S),placeholder:"Digite o nome da casa",error:d.houseName,required:!0})})}),i.jsx("div",{className:"form-row",children:i.jsx("div",{className:"form-group",children:i.jsx(Re,{label:"Senha da Internet",value:o.internetPassword,onChange:S=>V("internetPassword",S),placeholder:"Digite a senha da internet",error:d.internetPassword,required:!0})})})]}),i.jsxs("div",{className:"form-section",children:[i.jsx("h3",{children:"Endereo"}),i.jsxs("div",{className:"form-row",children:[i.jsx("div",{className:"form-group",children:i.jsx(Re,{label:"CEP",value:o.address.zipCode,onChange:S=>V("address.zipCode",S),placeholder:"00000-000",error:d["address.zipCode"],required:!0,mask:"cep"})}),i.jsx("div",{className:"form-group flex-2",children:i.jsx(Re,{label:"Rua",value:o.address.street,onChange:S=>V("address.street",S),placeholder:"Digite o nome da rua",error:d["address.street"],required:!0})}),i.jsx("div",{className:"form-group",children:i.jsx(Re,{label:"Nmero",value:o.address.number,onChange:S=>V("address.number",S),placeholder:"123",error:d["address.number"],required:!0})})]}),i.jsxs("div",{className:"form-row",children:[i.jsx("div",{className:"form-group",children:i.jsx(Re,{label:"Complemento",value:o.address.complement||"",onChange:S=>V("address.complement",S),placeholder:"Apto, sala, etc. (opcional)",error:d["address.complement"]})}),i.jsx("div",{className:"form-group",children:i.jsx(Re,{label:"Bairro",value:o.address.neighborhood,onChange:S=>V("address.neighborhood",S),placeholder:"Digite o bairro",error:d["address.neighborhood"],required:!0})})]}),i.jsxs("div",{className:"form-row",children:[i.jsx("div",{className:"form-group flex-2",children:i.jsx(Re,{label:"Cidade",value:o.address.city,onChange:S=>V("address.city",S),placeholder:"Digite a cidade",error:d["address.city"],required:!0})}),i.jsx("div",{className:"form-group",children:i.jsx(Re,{label:"Estado",value:o.address.state,onChange:S=>V("address.state",S),placeholder:"SP",error:d["address.state"],required:!0})})]})]}),i.jsxs("div",{className:"form-section",children:[i.jsx("h3",{children:"Valores das Dirias"}),i.jsxs("div",{className:"form-row",children:[i.jsx("div",{className:"form-group",children:i.jsx(Re,{label:"Baixa Temporada (R$)",value:String(Math.round(o.pricing.lowSeason*100)),onChange:S=>{const P=Br(S,"currency");V("pricing.lowSeason",P)},placeholder:"R$ 0,00",error:d["pricing.lowSeason"],required:!0,mask:"currency",returnUnmasked:!0})}),i.jsx("div",{className:"form-group",children:i.jsx(Re,{label:"Mdia Temporada (R$)",value:String(Math.round(o.pricing.midSeason*100)),onChange:S=>{const P=Br(S,"currency");V("pricing.midSeason",P)},placeholder:"R$ 0,00",error:d["pricing.midSeason"],required:!0,mask:"currency",returnUnmasked:!0})}),i.jsx("div",{className:"form-group",children:i.jsx(Re,{label:"Alta Temporada (R$)",value:String(Math.round(o.pricing.highSeason*100)),onChange:S=>{const P=Br(S,"currency");V("pricing.highSeason",P)},placeholder:"R$ 0,00",error:d["pricing.highSeason"],required:!0,mask:"currency",returnUnmasked:!0})})]}),i.jsxs("div",{className:"form-row",children:[i.jsx("div",{className:"form-group",children:i.jsx(Re,{label:"Pacote de Carnaval (R$)",value:String(Math.round(o.pricing.carnivalPackage*100)),onChange:S=>{const P=Br(S,"currency");V("pricing.carnivalPackage",P)},placeholder:"R$ 0,00",error:d["pricing.carnivalPackage"],required:!0,mask:"currency",returnUnmasked:!0})}),i.jsx("div",{className:"form-group",children:i.jsx(Re,{label:"Pacote de Rveillon (R$)",value:String(Math.round(o.pricing.newYearPackage*100)),onChange:S=>{const P=Br(S,"currency");V("pricing.newYearPackage",P)},placeholder:"R$ 0,00",error:d["pricing.newYearPackage"],required:!0,mask:"currency",returnUnmasked:!0})})]})]}),i.jsxs("div",{className:"form-section",children:[i.jsx("h3",{children:"Fotos"}),i.jsxs("div",{className:"photos-container",children:[x.map((S,P)=>i.jsxs("div",{className:"photo-input-group",children:[i.jsx(Re,{label:`Foto ${P+1}`,value:S,onChange:O=>H(P,O),placeholder:"URL da foto",disabled:w}),!w&&i.jsx(Je,{type:"button",variant:"secondary",size:"small",onClick:()=>q(P),className:"remove-photo-btn",children:"Remover"})]},P)),!w&&i.jsx(Je,{type:"button",variant:"secondary",onClick:re,className:"add-photo-btn",children:"+ Adicionar Foto"})]})]}),i.jsxs("div",{className:"form-section",children:[i.jsx("h3",{children:"Descrio e Observaes"}),i.jsx("div",{className:"form-row",children:i.jsx("div",{className:"form-group full-width",children:i.jsx(Re,{label:"Descrio da Casa",value:o.description,onChange:S=>V("description",S),placeholder:"Descreva a casa, comodidades, etc.",error:d.description,required:!0})})}),i.jsx("div",{className:"form-row",children:i.jsx("div",{className:"form-group full-width",children:i.jsx(Re,{label:"Observaes",value:o.observations,onChange:S=>V("observations",S),placeholder:"Observaes adicionais (opcional)",error:d.observations})})})]})]}),!w&&i.jsxs("div",{className:"form-actions",children:[i.jsx(Je,{type:"button",variant:"secondary",onClick:e,disabled:h,children:"Cancelar"}),i.jsx(Je,{type:"submit",disabled:h,children:h?"Salvando...":b?"Criar Casa":"Salvar Alteraes"})]}),w&&i.jsx("div",{className:"form-actions",children:i.jsx(Je,{type:"button",onClick:e,children:"Fechar"})})]})})},cF=({filters:t,onFiltersChange:e,onClearFilters:r,houseCount:n,totalCount:a})=>{const[o,c]=B.useState(!1),h=(x,y)=>{const E={...t,[x]:y||void 0};Object.keys(E).forEach(w=>{E[w]||delete E[w]}),e(E)},m=(x,y)=>{const E=parseFloat(y)||0,w={...t.priceRange,[x]:E};if(!w.min&&!w.max){const{priceRange:T,...b}=t;e(b)}else e({...t,priceRange:{min:w.min||0,max:w.max||0}})},d=Object.keys(t).length>0,p=[{value:"",label:"Todos os status"},{value:"available",label:"Disponveis"},{value:"occupied",label:"Ocupadas"},{value:"maintenance",label:"Em manuteno"},{value:"inactive",label:"Inativas"}];return i.jsxs("div",{className:"house-filters",children:[i.jsxs("div",{className:"filters-header",children:[i.jsxs("div",{className:"filters-info",children:[i.jsx("h3",{children:"Filtros"}),i.jsx("span",{className:"results-count",children:n===a?`${a} casas`:`${n} de ${a} casas`})]}),i.jsxs("div",{className:"filters-actions",children:[d&&i.jsx(Je,{onClick:r,variant:"secondary",size:"small",children:"Limpar Filtros"}),i.jsx(Je,{onClick:()=>c(!o),variant:"secondary",size:"small",className:"toggle-filters-btn",children:o?" Ocultar":" Expandir"})]})]}),i.jsxs("div",{className:`filters-content ${o?"expanded":""}`,children:[i.jsxs("div",{className:"filters-row",children:[i.jsx("div",{className:"filter-group",children:i.jsx(Re,{label:"Buscar",placeholder:"Nome da casa, cidade, bairro, descrio...",value:t.search||"",onChange:x=>h("search",x)})}),i.jsx("div",{className:"filter-group",children:i.jsx(Qt,{label:"Status",value:t.status||"",onChange:x=>h("status",x),options:p})}),i.jsx("div",{className:"filter-group",children:i.jsx(Re,{label:"Cidade",placeholder:"Digite a cidade",value:t.city||"",onChange:x=>h("city",x)})})]}),o&&i.jsxs("div",{className:"filters-row",children:[i.jsx("div",{className:"filter-group",children:i.jsx(Re,{label:"Estado",placeholder:"Digite o estado",value:t.state||"",onChange:x=>h("state",x)})}),i.jsx("div",{className:"filter-group",children:i.jsx(Re,{label:"Preo Mnimo (R$)",type:"number",placeholder:"0",value:t.priceRange?.min?.toString()||"",onChange:x=>m("min",x)})}),i.jsx("div",{className:"filter-group",children:i.jsx(Re,{label:"Preo Mximo (R$)",type:"number",placeholder:"999999",value:t.priceRange?.max?.toString()||"",onChange:x=>m("max",x)})})]})]}),d&&i.jsxs("div",{className:"active-filters",children:[i.jsx("span",{className:"active-filters-label",children:"Filtros ativos:"}),i.jsxs("div",{className:"filter-tags",children:[t.search&&i.jsxs("span",{className:"filter-tag",children:['Busca: "',t.search,'"',i.jsx("button",{onClick:()=>h("search",""),children:""})]}),t.status&&i.jsxs("span",{className:"filter-tag",children:["Status:"," ",p.find(x=>x.value===t.status)?.label,i.jsx("button",{onClick:()=>h("status",""),children:""})]}),t.city&&i.jsxs("span",{className:"filter-tag",children:["Cidade: ",t.city,i.jsx("button",{onClick:()=>h("city",""),children:""})]}),t.state&&i.jsxs("span",{className:"filter-tag",children:["Estado: ",t.state,i.jsx("button",{onClick:()=>h("state",""),children:""})]}),t.priceRange&&i.jsxs("span",{className:"filter-tag",children:["Preo: R$ ",t.priceRange.min," - R$ ",t.priceRange.max,i.jsx("button",{onClick:()=>h("priceRange",""),children:""})]})]})]})]})},uF=({stats:t})=>{const e=[{title:"Total de Casas",value:t.total,icon:Nn,color:"blue",description:"Total de casas cadastradas"},{title:"Disponveis",value:t.available,icon:Vn,color:"green",description:"Casas disponveis para alocao"},{title:"Ocupadas",value:t.occupied,icon:Ur,color:"orange",description:"Casas atualmente ocupadas"},{title:"Em Manuteno",value:t.maintenance,icon:OP,color:"yellow",description:"Casas em manuteno"},{title:"Inativas",value:t.inactive,icon:Gd,color:"red",description:"Casas inativas"}];return i.jsx("div",{className:"house-stats",children:i.jsx("div",{className:"stats-grid",children:e.map(r=>{const n=r.icon;return i.jsxs("div",{className:`stat-card stat-card-${r.color}`,children:[i.jsx("div",{className:"stat-icon",children:i.jsx(n,{size:24})}),i.jsxs("div",{className:"stat-content",children:[i.jsx("div",{className:"stat-value",children:r.value}),i.jsx("div",{className:"stat-title",children:r.title}),i.jsx("div",{className:"stat-description",children:r.description})]})]},r.title)})})})},hF=()=>{const[t,e]=B.useState([]),[r,n]=B.useState(!0),[a,o]=B.useState(!1),[c,h]=B.useState("create"),[m,d]=B.useState(null),[p,x]=B.useState({}),[y,E]=B.useState({total:0,available:0,occupied:0,maintenance:0,inactive:0}),{showError:w,showSuccess:T,showWarning:b}=Bn(),A=async()=>{try{n(!0);const C=await as.getAll(p);e(C)}catch(C){const k=C instanceof Error?C.message:"Erro ao carregar casas";w("Erro ao carregar casas",k)}finally{n(!1)}},M=async()=>{try{const C=await as.getStats();E(C)}catch(C){const k=C instanceof Error?C.message:"Erro ao carregar estatsticas";b("Estatsticas indisponveis",k)}},V=B.useMemo(()=>{let C=[...t];if(p.search){const k=p.search.toLowerCase();C=C.filter(Ce=>Ce.houseName.toLowerCase().includes(k)||Ce.address.neighborhood.toLowerCase().includes(k)||Ce.address.city.toLowerCase().includes(k)||Ce.description.toLowerCase().includes(k))}return p.status&&(C=C.filter(k=>k.status===p.status)),p.city&&(C=C.filter(k=>k.address.city.toLowerCase().includes(p.city.toLowerCase()))),p.state&&(C=C.filter(k=>k.address.state.toLowerCase().includes(p.state.toLowerCase()))),p.priceRange&&(C=C.filter(k=>{const Ce=p.priceRange.min,ze=p.priceRange.max;return k.pricing.lowSeason>=Ce&&k.pricing.lowSeason<=ze})),C},[t,p]);B.useEffect(()=>{A(),M()},[]),B.useEffect(()=>{A()},[p]);const H=()=>{d(null),h("create"),o(!0)},re=C=>{d(C),h("edit"),o(!0)},q=C=>{d(C),h("view"),o(!0)},j=async C=>{if(confirm("Tem certeza que deseja excluir esta casa?"))try{await as.delete(C),e(t.filter(k=>k.id!==C)),M(),T("Casa excluda","A casa foi excluda com sucesso.")}catch(k){const Ce=k instanceof Error?k.message:"Erro ao excluir casa";w("Erro ao excluir casa",Ce)}},D=()=>{o(!1),d(null)},S=C=>{A(),M(),D(),T(C==="create"?"Casa criada":"Casa atualizada",C==="create"?"A casa foi cadastrada com sucesso.":"As informaes da casa foram atualizadas.")},P=C=>{x(C)},O=()=>{x({})};return r&&t.length===0?i.jsx(kr,{text:"Carregando casas...",fullScreen:!0}):i.jsxs("div",{className:"house-management",children:[i.jsx("div",{className:"house-management-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("h1",{children:"Gesto de Casas"}),i.jsx(Je,{onClick:H,className:"create-house-btn",children:"+ Nova Casa"})]})}),i.jsx(uF,{stats:y}),i.jsxs("div",{className:"house-management-content",children:[i.jsx(cF,{filters:p,onFiltersChange:P,onClearFilters:O,houseCount:V.length,totalCount:t.length}),i.jsx(oF,{houses:V,loading:r,onEdit:re,onView:q,onDelete:j})]}),i.jsx(lF,{isOpen:a,onClose:D,onSave:S,house:m,mode:c})]})},Fh="sales",dF=(t,e)=>{const r=Math.abs(e.getTime()-t.getTime());return Math.ceil(r/(1e3*60*60*24))},WS=(t,e,r,n=0,a=0,o=0,c={})=>{const h=dF(t,e),m=r-n,d=m*.1,p=(c.supermarket||0)+(c.seafood||0)+(c.seafoodMeat||0)+(c.transfer||0)+(c.vegetables||0)+(c.coconuts||0),x=m+o+p,y=m-d-a-p;return{numberOfNights:h,netValue:m,salesCommission:d,totalAdditionalSales:p,totalRevenue:x,contributionMargin:y}},aw=t=>{const e=t.data();if(!e)throw new Error("Document data is undefined");return{id:t.id,code:e.code||"",company:e.company||"exclusive",clientId:e.clientId||"",clientName:e.clientName||"",clientCpf:e.clientCpf||"",clientPhone:e.clientPhone||"",clientEmail:e.clientEmail||"",clientGender:e.clientGender||"",employeeId:e.employeeId||"",employeeName:e.employeeName||"",employeeCommission:e.employeeCommission||0,saleOrigin:e.saleOrigin||"instagram",houseId:e.houseId||"",houseName:e.houseName||"",houseAddress:e.houseAddress||"",ownerId:e.ownerId||"",ownerName:e.ownerName||"",ownerPhone:e.ownerPhone||"",checkInDate:e.checkInDate?.toDate()||new Date,checkOutDate:e.checkOutDate?.toDate()||new Date,numberOfNights:e.numberOfNights||0,numberOfGuests:e.numberOfGuests||0,contractValue:e.contractValue||0,discount:e.discount||0,netValue:e.netValue||0,salesCommission:e.salesCommission||0,housekeeperValue:e.housekeeperValue||0,conciergeValue:e.conciergeValue||0,additionalSales:e.additionalSales||{supermarket:0,seafood:0,seafoodMeat:0,transfer:0,vegetables:0,coconuts:0},totalAdditionalSales:e.totalAdditionalSales||0,totalRevenue:e.totalRevenue||0,contributionMargin:e.contributionMargin||0,status:e.status||"pending",createdAt:e.createdAt?.toDate()||new Date,updatedAt:e.updatedAt?.toDate()||new Date}},sw=async t=>{const e={...t};if("clientId"in e&&e.clientId){const r=await wo.getById(e.clientId);r&&(e.clientName=r.name,e.clientCpf=r.cpf,e.clientPhone=r.phone,e.clientEmail=r.email,e.clientGender="")}if("employeeId"in e&&e.employeeId){const r=await Sl.getById(e.employeeId);r&&(e.employeeName=r.name,e.employeeCommission=r.rentalCommissionPercentage)}if("houseId"in e&&e.houseId){const r=await as.getById(e.houseId);if(r&&(e.houseName=r.houseName,e.houseAddress=`${r.address.street}, ${r.address.number} - ${r.address.city}/${r.address.state}`,r.ownerId)){const n=await bl.getById(r.ownerId);n&&(e.ownerName=n.name,e.ownerId=n.id)}}if("checkInDate"in e&&"checkOutDate"in e&&"contractValue"in e){const r=WS(e.checkInDate,e.checkOutDate,e.contractValue,e.discount||0,e.housekeeperValue||0,e.conciergeValue||0,e.additionalSales||{});e.numberOfNights=r.numberOfNights,e.netValue=r.netValue,e.salesCommission=r.salesCommission,e.totalAdditionalSales=r.totalAdditionalSales,e.totalRevenue=r.totalRevenue,e.contributionMargin=r.contributionMargin}return"checkInDate"in e&&e.checkInDate&&(e.checkInDate=nt.fromDate(e.checkInDate)),"checkOutDate"in e&&e.checkOutDate&&(e.checkOutDate=nt.fromDate(e.checkOutDate)),e.additionalSales||(e.additionalSales={supermarket:0,seafood:0,seafoodMeat:0,transfer:0,vegetables:0,coconuts:0}),e},Kr={async getAll(t){try{let e=Tt(gr(ct,Fh),Ni("createdAt","desc"));t?.company&&(e=Tt(e,bt("company","==",t.company))),t?.status&&(e=Tt(e,bt("status","==",t.status))),t?.saleOrigin&&(e=Tt(e,bt("saleOrigin","==",t.saleOrigin)));let n=(await Ln(e)).docs.map(aw);if(t?.search){const a=t.search.toLowerCase();n=n.filter(o=>o.code.toLowerCase().includes(a)||o.clientName.toLowerCase().includes(a)||o.houseName.toLowerCase().includes(a)||o.clientCpf.includes(a))}return t?.dateRange&&(n=n.filter(a=>a.checkInDate>=t.dateRange.start&&a.checkInDate<=t.dateRange.end)),n}catch(e){throw console.error("Erro ao buscar vendas:",e),new Error("Falha ao carregar lista de vendas")}},async getById(t){try{const e=sr(ct,Fh,t),r=await Ro(e);return r.exists()?aw(r):null}catch(e){throw console.error("Erro ao buscar venda:",e),new Error("Falha ao carregar dados da venda")}},async create(t){try{const e=await this.generateSaleCode(),n={...await sw(t),code:e,status:t.status||"pending",createdAt:nt.now(),updatedAt:nt.now()};return(await Hl(gr(ct,Fh),n)).id}catch(e){throw console.error("Erro ao criar venda:",e),new Error("Falha ao criar venda")}},async update(t){try{const{id:e,...r}=t,n=sr(ct,Fh,e),o={...await sw(r),updatedAt:nt.now()};await zl(n,o)}catch(e){throw console.error("Erro ao atualizar venda:",e),new Error("Falha ao atualizar venda")}},async delete(t){try{const e=sr(ct,Fh,t);await yu(e)}catch(e){throw console.error("Erro ao deletar venda:",e),new Error("Falha ao deletar venda")}},async generateSaleCode(){try{const e=(await this.getAll()).sort((a,o)=>o.createdAt.getTime()-a.createdAt.getTime())[0];return!e||!e.code?"VND001":`VND${(parseInt(e.code.replace("VND",""))+1).toString().padStart(3,"0")}`}catch(t){return console.error("Erro ao gerar cdigo:",t),"VND001"}},async getStats(){try{const t=await this.getAll(),e=t.reduce((a,o)=>a+o.totalRevenue,0),r=t.reduce((a,o)=>a+o.salesCommission+o.totalAdditionalSales,0),n=t.reduce((a,o)=>a+o.contributionMargin,0);return{total:t.length,totalRevenue:e,pending:t.filter(a=>a.status==="pending").length,confirmed:t.filter(a=>a.status==="confirmed").length,cancelled:t.filter(a=>a.status==="cancelled").length,completed:t.filter(a=>a.status==="completed").length,averageTicket:t.length>0?e/t.length:0,totalCommissions:r,totalMargin:n}}catch(t){throw console.error("Erro ao obter estatsticas:",t),new Error("Falha ao carregar estatsticas")}},async checkHouseAvailability(t,e,r,n){try{return(await this.getAll()).filter(c=>n&&c.id===n||c.houseId!==t||c.status==="cancelled"?!1:e>=c.checkInDate&&e<c.checkOutDate||r>c.checkInDate&&r<=c.checkOutDate||e<=c.checkInDate&&r>=c.checkOutDate).length===0}catch(a){return console.error("Erro ao verificar disponibilidade:",a),!1}}},fF=({sales:t,loading:e,onEdit:r,onView:n,onDelete:a,filters:o,onFiltersChange:c,onClearFilters:h})=>{const[m,d]=B.useState("createdAt"),[p,x]=B.useState("desc"),[y,E]=B.useState(!1),w=D=>{m===D?x(p==="asc"?"desc":"asc"):(d(D),x("asc"))},T=[...t].sort((D,S)=>{const P=D[m],O=S[m];return P instanceof Date&&O instanceof Date?p==="asc"?P.getTime()-O.getTime():O.getTime()-P.getTime():typeof P=="string"&&typeof O=="string"?p==="asc"?P.localeCompare(O):O.localeCompare(P):typeof P=="number"&&typeof O=="number"?p==="asc"?P-O:O-P:0}),b=D=>new Intl.DateTimeFormat("pt-BR").format(D),A=D=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(D),M=D=>{const P={pending:{label:"Pendente",class:"status-pending"},confirmed:{label:"Confirmada",class:"status-confirmed"},cancelled:{label:"Cancelada",class:"status-cancelled"},completed:{label:"Concluda",class:"status-completed"}}[D];return i.jsx("span",{className:`status-badge ${P.class}`,children:P.label})},V=D=>{const P={exclusive:{label:"Exclusive",class:"company-exclusive"},giogio:{label:"Giogio",class:"company-giogio"},direta:{label:"Direta",class:"company-direta"}}[D];return i.jsx("span",{className:`company-badge ${P.class}`,children:P.label})},H=(D,S)=>{c({...o,[D]:S||void 0})},re=[{value:"",label:"Todas"},{value:"exclusive",label:"Exclusive"},{value:"giogio",label:"Giogio"},{value:"direta",label:"Direta"}],q=[{value:"",label:"Todos"},{value:"pending",label:"Pendente"},{value:"confirmed",label:"Confirmada"},{value:"completed",label:"Concluda"},{value:"cancelled",label:"Cancelada"}],j=[{value:"",label:"Todas"},{value:"instagram",label:"Instagram"},{value:"facebook",label:"Facebook"},{value:"google",label:"Google"},{value:"indicacao",label:"Indicao"},{value:"whatsapp",label:"WhatsApp"},{value:"site",label:"Site"},{value:"outros",label:"Outros"}];return e&&t.length===0?i.jsx(kr,{text:"Carregando vendas..."}):i.jsxs("div",{className:"sale-list",children:[i.jsxs("div",{className:"sale-list-header",children:[i.jsxs("div",{className:"list-info",children:[i.jsx("h2",{children:"Lista de Vendas"}),i.jsxs("span",{className:"list-count",children:[t.length," ",t.length===1?"venda":"vendas"]})]}),i.jsxs(Je,{onClick:()=>E(!y),className:"filter-toggle-btn",children:[i.jsx(Hd,{size:16}),y?"Ocultar Filtros":"Mostrar Filtros"]})]}),y&&i.jsxs("div",{className:"sale-filters",children:[i.jsx(Re,{label:"Buscar",type:"text",placeholder:"Buscar por cdigo, cliente, casa...",value:o.search||"",onChange:D=>H("search",D)}),i.jsx(Qt,{label:"Empresa",value:o.company||"",onChange:D=>H("company",D),options:re}),i.jsx(Qt,{label:"Status",value:o.status||"",onChange:D=>H("status",D),options:q}),i.jsx(Qt,{label:"Origem da Venda",value:o.saleOrigin||"",onChange:D=>H("saleOrigin",D),options:j}),i.jsxs(Je,{onClick:h,className:"clear-filters-btn",children:[i.jsx(co,{size:16}),"Limpar Filtros"]})]}),t.length===0?i.jsxs("div",{className:"empty-state",children:[i.jsx(dn,{size:48}),i.jsx("h3",{children:"Nenhuma venda encontrada"}),i.jsx("p",{children:"Comece criando sua primeira venda ou ajuste os filtros."})]}):i.jsx("div",{className:"sale-table-container",children:i.jsxs("table",{className:"sale-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsxs("th",{onClick:()=>w("code"),children:["Cdigo"," ",m==="code"&&(p==="asc"?"":"")]}),i.jsxs("th",{onClick:()=>w("company"),children:["Empresa"," ",m==="company"&&(p==="asc"?"":"")]}),i.jsxs("th",{onClick:()=>w("clientName"),children:["Cliente"," ",m==="clientName"&&(p==="asc"?"":"")]}),i.jsxs("th",{onClick:()=>w("employeeName"),children:["Vendedor/Colaborador"," ",m==="employeeName"&&(p==="asc"?"":"")]}),i.jsxs("th",{onClick:()=>w("houseName"),children:["Casa"," ",m==="houseName"&&(p==="asc"?"":"")]}),i.jsxs("th",{onClick:()=>w("checkInDate"),children:["Check-in"," ",m==="checkInDate"&&(p==="asc"?"":"")]}),i.jsxs("th",{onClick:()=>w("numberOfNights"),children:["Noites"," ",m==="numberOfNights"&&(p==="asc"?"":"")]}),i.jsxs("th",{onClick:()=>w("totalRevenue"),children:["Faturamento"," ",m==="totalRevenue"&&(p==="asc"?"":"")]}),i.jsxs("th",{onClick:()=>w("status"),children:["Status"," ",m==="status"&&(p==="asc"?"":"")]}),i.jsx("th",{children:"Aes"})]})}),i.jsx("tbody",{children:T.map(D=>i.jsxs("tr",{children:[i.jsx("td",{children:i.jsx("strong",{children:D.code})}),i.jsx("td",{children:V(D.company)}),i.jsx("td",{children:i.jsxs("div",{className:"client-info",children:[i.jsx("span",{className:"client-name",children:D.clientName}),i.jsx("span",{className:"client-details",children:D.clientPhone})]})}),i.jsx("td",{children:i.jsx("div",{className:"employee-info",children:i.jsx("span",{className:"employee-name",children:D.employeeName})})}),i.jsx("td",{children:i.jsxs("div",{className:"house-info",children:[i.jsx(Nn,{size:14}),i.jsx("span",{children:D.houseName})]})}),i.jsx("td",{children:i.jsxs("div",{className:"date-info",children:[i.jsx(dn,{size:14}),i.jsx("span",{children:b(D.checkInDate)})]})}),i.jsx("td",{children:i.jsxs("span",{className:"nights-badge",children:[D.numberOfNights," noites"]})}),i.jsx("td",{children:i.jsx("strong",{className:"revenue-value",children:A(D.totalRevenue)})}),i.jsx("td",{children:M(D.status)}),i.jsx("td",{children:i.jsxs("div",{className:"action-buttons",children:[i.jsx("button",{className:"action-btn view-btn",onClick:()=>n(D),title:"Visualizar",children:i.jsx(us,{size:16})}),i.jsx("button",{className:"action-btn edit-btn",onClick:()=>r(D),title:"Editar",children:i.jsx(Gl,{size:16})}),i.jsx("button",{className:"action-btn delete-btn",onClick:()=>a(D.id),title:"Excluir",children:i.jsx(bu,{size:16})})]})})]},D.id))})]})}),e&&t.length>0&&i.jsx("div",{className:"loading-overlay",children:i.jsx(kr,{text:"Atualizando..."})})]})},iw={company:"exclusive",clientId:"",saleOrigin:"instagram",houseId:"",checkInDate:new Date,checkOutDate:new Date,numberOfGuests:1,contractValue:0,discount:0,housekeeperValue:0,conciergeValue:0,additionalSales:{supermarket:0,seafood:0,seafoodMeat:0,transfer:0,vegetables:0,coconuts:0},status:"pending",employeeId:""},mF=({isOpen:t,onClose:e,onSave:r,sale:n,mode:a})=>{const[o,c]=B.useState(iw),[h,m]=B.useState(!1),[d,p]=B.useState({}),[x,y]=B.useState([]),[E,w]=B.useState([]),[T,b]=B.useState(null),[A,M]=B.useState(null),[V,H]=B.useState([]),[re,q]=B.useState(null),{showError:j,showWarning:D}=Bn(),[S,P]=B.useState({numberOfNights:0,netValue:0,salesCommission:0,totalAdditionalSales:0,totalRevenue:0,contributionMargin:0}),O=a==="view",C=a==="edit";B.useEffect(()=>{t&&(k(),ze(),Ce())},[t]);const k=async()=>{try{const ae=await wo.getAll();y(ae)}catch(ae){const Ve=ae instanceof Error?ae.message:"Erro ao carregar clientes";j("Erro ao carregar clientes",Ve)}},Ce=async()=>{try{const ae=await Sl.getAll();H(ae)}catch(ae){const Ve=ae instanceof Error?ae.message:"Erro ao carregar colaboradores";j("Erro ao carregar colaboradores",Ve)}},ze=async()=>{try{const ae=await as.getAll();w(ae)}catch(ae){const Ve=ae instanceof Error?ae.message:"Erro ao carregar casas";j("Erro ao carregar casas",Ve)}};B.useEffect(()=>{t&&(n&&(C||a==="view")?(c({company:n.company,clientId:n.clientId,saleOrigin:n.saleOrigin,houseId:n.houseId,checkInDate:n.checkInDate,checkOutDate:n.checkOutDate,numberOfGuests:n.numberOfGuests,contractValue:n.contractValue,discount:n.discount,housekeeperValue:n.housekeeperValue,conciergeValue:n.conciergeValue,additionalSales:n.additionalSales,status:n.status,employeeId:n.employeeId}),wo.getById(n.clientId).then(b),as.getById(n.houseId).then(M)):(c(iw),b(null),M(null)),p({}))},[t,n,C,a]),B.useEffect(()=>{const ae=WS(o.checkInDate,o.checkOutDate,o.contractValue,o.discount||0,o.housekeeperValue||0,o.conciergeValue||0,o.additionalSales||{});P(ae)},[o.checkInDate,o.checkOutDate,o.contractValue,o.discount,o.housekeeperValue,o.conciergeValue,o.additionalSales]),B.useEffect(()=>{if(o.clientId){const ae=x.find(Ve=>Ve.id===o.clientId);b(ae||null)}else b(null)},[o.clientId,x]),B.useEffect(()=>{if(o.employeeId){const ae=V.find(Ve=>Ve.id===o.employeeId);q(ae||null)}else q(null)},[o.employeeId,V]),B.useEffect(()=>{if(o.houseId){const ae=E.find(Ve=>Ve.id===o.houseId);M(ae||null)}else M(null)},[o.houseId,E]),B.useEffect(()=>{A?.ownerId&&bl.getById(A.ownerId).then(ae=>{ae&&c(Ve=>({...Ve,ownerId:ae.id,ownerName:ae.name,ownerPhone:ae.phone}))})},[A]);const ge=()=>{const ae={};return o.clientId||(ae.clientId="Cliente  obrigatrio"),o.employeeId||(ae.employeeId="Funcionrio  obrigatrio"),o.houseId||(ae.houseId="Casa  obrigatria"),o.checkInDate>=o.checkOutDate&&(ae.checkOutDate="Data de sada deve ser aps a data de entrada"),o.contractValue<=0&&(ae.contractValue="Valor do contrato deve ser maior que zero"),o.numberOfGuests<=0&&(ae.numberOfGuests="Nmero de hspedes deve ser maior que zero"),p(ae),Object.keys(ae).length===0},De=async ae=>{if(ae.preventDefault(),O){e();return}if(ge())try{if(m(!0),!await Kr.checkHouseAvailability(o.houseId,o.checkInDate,o.checkOutDate,n?.id)){D("Casa indisponvel","Esta casa j possui uma reserva para as datas selecionadas.");return}let Ze="create";C&&n?(await Kr.update({id:n.id,...o}),Ze="edit"):(await Kr.create(o),Ze="create"),r(Ze),e()}catch(Ve){const Ze=Ve instanceof Error?Ve.message:"Erro ao salvar venda. Tente novamente.";j("Erro ao salvar venda",Ze)}finally{m(!1)}},Fe=(ae,Ve)=>{c(Ze=>({...Ze,[ae]:Ve})),d[ae]&&p(Ze=>{const Ht={...Ze};return delete Ht[ae],Ht})},Xe=(ae,Ve)=>{c(Ze=>({...Ze,additionalSales:{...Ze.additionalSales||{},[ae]:Ve}}))},Z=ae=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(ae),_e=ae=>{const Ve=ae.getFullYear(),Ze=String(ae.getMonth()+1).padStart(2,"0"),Ht=String(ae.getDate()).padStart(2,"0");return`${Ve}-${Ze}-${Ht}`},Y=ae=>new Date(ae+"T00:00:00"),ee=()=>a==="view"?"Visualizar Venda":a==="edit"?"Editar Venda":"Nova Venda",J=[{value:"exclusive",label:"Exclusive"},{value:"giogio",label:"Giogio"},{value:"direta",label:"Direta"}],te=[{value:"instagram",label:"Instagram"},{value:"facebook",label:"Facebook"},{value:"google",label:"Google"},{value:"indicacao",label:"Indicao"},{value:"whatsapp",label:"WhatsApp"},{value:"site",label:"Site"},{value:"outros",label:"Outros"}],he=[{value:"pending",label:"Pendente"},{value:"confirmed",label:"Confirmada"},{value:"completed",label:"Concluda"},{value:"cancelled",label:"Cancelada"}],Le=x.map(ae=>({value:ae.id,label:`${ae.name} - ${ae.cpf}`})),ke=V.map(ae=>({value:ae.id,label:ae.name})),He=E.map(ae=>({value:ae.id,label:`${ae.houseName} - ${ae.address.city}`}));return i.jsx(Su,{isOpen:t,onClose:e,title:ee(),size:"large",children:i.jsxs("form",{onSubmit:De,className:"sale-modal-form",children:[h&&i.jsx(kr,{text:"Salvando..."}),i.jsxs("div",{className:"form-grid",children:[i.jsxs("div",{className:"form-section",children:[i.jsx("h3",{className:"section-title",children:"Informaes Bsicas"}),i.jsx(Qt,{label:"Empresa",value:o.company,onChange:ae=>Fe("company",ae),options:J,disabled:O,error:d.company,required:!0}),i.jsx(Qt,{label:"Origem da Venda",value:o.saleOrigin,onChange:ae=>Fe("saleOrigin",ae),options:te,disabled:O,error:d.saleOrigin,required:!0}),i.jsx(Qt,{label:"Status",value:o.status||"pending",onChange:ae=>Fe("status",ae),options:he,disabled:O})]}),i.jsxs("div",{className:"form-section",children:[i.jsx("h3",{className:"section-title",children:"Cliente"}),i.jsx(Qt,{label:"Cliente",value:o.clientId,onChange:ae=>Fe("clientId",ae),options:[{value:"",label:"Selecione um cliente"},...Le],disabled:O,error:d.clientId,required:!0}),T&&i.jsxs("div",{className:"client-info-display",children:[i.jsxs("div",{className:"info-row",children:[i.jsx("span",{className:"info-label",children:"CPF:"}),i.jsx("span",{className:"info-value",children:T.cpf})]}),i.jsxs("div",{className:"info-row",children:[i.jsx("span",{className:"info-label",children:"Telefone:"}),i.jsx("span",{className:"info-value",children:T.phone})]}),i.jsxs("div",{className:"info-row",children:[i.jsx("span",{className:"info-label",children:"Email:"}),i.jsx("span",{className:"info-value",children:T.email})]})]})]}),i.jsxs("div",{className:"form-section",children:[i.jsx("h3",{className:"section-title",children:"Casa"}),i.jsx(Qt,{label:"Casa",value:o.houseId,onChange:ae=>Fe("houseId",ae),options:[{value:"",label:"Selecione uma casa"},...He],disabled:O,error:d.houseId,required:!0}),A&&i.jsxs("div",{className:"house-info-display",children:[i.jsxs("div",{className:"info-row",children:[i.jsx("span",{className:"info-label",children:"Endereo:"}),i.jsxs("span",{className:"info-value",children:[A.address.street,","," ",A.address.number," -"," ",A.address.city,"/",A.address.state]})]}),A.ownerId&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"info-divider"}),i.jsx("div",{className:"info-subtitle",children:"Proprietrio"}),i.jsxs("div",{className:"info-row",children:[i.jsx("span",{className:"info-label",children:"Nome:"}),i.jsx("span",{className:"info-value",children:A.ownerName})]}),i.jsxs("div",{className:"info-row",children:[i.jsx("span",{className:"info-label",children:"Telefone:"}),i.jsx("span",{className:"info-value",children:A.ownerPhone})]})]})]})]}),i.jsxs("div",{className:"form-section",children:[i.jsx("h3",{className:"section-title",children:"Colaborador Responsvel"}),i.jsx(Qt,{label:"Vendedor/Colaborador",value:o.employeeId||"",onChange:ae=>Fe("employeeId",ae),options:[{value:"",label:"Selecione um vendedor/colaborador"},...ke],disabled:O,error:d.employeeId,required:!0}),re&&i.jsxs("div",{className:"employee-info-display",children:[i.jsxs("div",{className:"info-row",children:[i.jsx("span",{className:"info-label",children:"Nome:"}),i.jsx("span",{className:"info-value",children:re.name})]}),i.jsxs("div",{className:"info-row",children:[i.jsx("span",{className:"info-label",children:"Comisso:"}),i.jsxs("span",{className:"info-value",children:[re.rentalCommissionPercentage,"%"]})]})]})]}),i.jsxs("div",{className:"form-section",children:[i.jsx("h3",{className:"section-title",children:"Informaes de Estadia"}),i.jsxs("div",{className:"form-row",children:[i.jsx(Re,{label:"Data de Check-in",type:"date",value:_e(o.checkInDate),onChange:ae=>Fe("checkInDate",Y(ae)),disabled:O,error:d.checkInDate}),i.jsx(Re,{label:"Data de Check-out",type:"date",value:_e(o.checkOutDate),onChange:ae=>Fe("checkOutDate",Y(ae)),disabled:O,error:d.checkOutDate})]}),i.jsxs("div",{className:"calculated-value",children:[i.jsx("span",{className:"calc-label",children:"Nmero de Pernoites:"}),i.jsxs("span",{className:"calc-value",children:[S.numberOfNights," noites"]})]}),i.jsx(Re,{label:"Nmero de Hspedes",type:"number",value:String(o.numberOfGuests),onChange:ae=>Fe("numberOfGuests",parseInt(ae)||1),disabled:O,error:d.numberOfGuests})]}),i.jsxs("div",{className:"form-section",children:[i.jsx("h3",{className:"section-title",children:"Valores Financeiros"}),i.jsx(Re,{label:"Valor do Contrato",value:String(Math.round(o.contractValue*100)),onChange:ae=>{const Ve=Br(ae,"currency");Fe("contractValue",Ve)},placeholder:"R$ 0,00",disabled:O,error:d.contractValue,mask:"currency",returnUnmasked:!0}),i.jsx(Re,{label:"Desconto",value:String(Math.round((o.discount||0)*100)),onChange:ae=>{const Ve=Br(ae,"currency");Fe("discount",Ve)},placeholder:"R$ 0,00",disabled:O,mask:"currency",returnUnmasked:!0}),i.jsxs("div",{className:"calculated-value",children:[i.jsx("span",{className:"calc-label",children:"Valor Lquido:"}),i.jsx("span",{className:"calc-value highlight",children:Z(S.netValue)})]}),i.jsxs("div",{className:"calculated-value",children:[i.jsx("span",{className:"calc-label",children:"Comisso de Venda (10%):"}),i.jsx("span",{className:"calc-value",children:Z(S.salesCommission)})]}),i.jsx(Re,{label:"Valor da Governanta",value:String(Math.round((o.housekeeperValue||0)*100)),onChange:ae=>{const Ve=Br(ae,"currency");Fe("housekeeperValue",Ve)},placeholder:"R$ 0,00",disabled:O,mask:"currency",returnUnmasked:!0}),i.jsx(Re,{label:"Valor do Concierge",value:String(Math.round((o.conciergeValue||0)*100)),onChange:ae=>{const Ve=Br(ae,"currency");Fe("conciergeValue",Ve)},placeholder:"R$ 0,00",disabled:O,mask:"currency",returnUnmasked:!0})]}),i.jsxs("div",{className:"form-section full-width",children:[i.jsx("h3",{className:"section-title",children:"Vendas Adicionais (Comisses de Fornecedores)"}),i.jsxs("div",{className:"additional-sales-grid",children:[i.jsx(Re,{label:"Supermercado",value:String(Math.round((o.additionalSales?.supermarket||0)*100)),onChange:ae=>{const Ve=Br(ae,"currency");Xe("supermarket",Ve)},placeholder:"R$ 0,00",disabled:O,mask:"currency",returnUnmasked:!0}),i.jsx(Re,{label:"Pescados",value:String(Math.round((o.additionalSales?.seafood||0)*100)),onChange:ae=>{const Ve=Br(ae,"currency");Xe("seafood",Ve)},placeholder:"R$ 0,00",disabled:O,mask:"currency",returnUnmasked:!0}),i.jsx(Re,{label:"Pescados/Carne",value:String(Math.round((o.additionalSales?.seafoodMeat||0)*100)),onChange:ae=>{const Ve=Br(ae,"currency");Xe("seafoodMeat",Ve)},placeholder:"R$ 0,00",disabled:O,mask:"currency",returnUnmasked:!0}),i.jsx(Re,{label:"Transfer",value:String(Math.round((o.additionalSales?.transfer||0)*100)),onChange:ae=>{const Ve=Br(ae,"currency");Xe("transfer",Ve)},placeholder:"R$ 0,00",disabled:O,mask:"currency",returnUnmasked:!0}),i.jsx(Re,{label:"Hortalias",value:String(Math.round((o.additionalSales?.vegetables||0)*100)),onChange:ae=>{const Ve=Br(ae,"currency");Xe("vegetables",Ve)},placeholder:"R$ 0,00",disabled:O,mask:"currency",returnUnmasked:!0}),i.jsx(Re,{label:"Cocos",value:String(Math.round((o.additionalSales?.coconuts||0)*100)),onChange:ae=>{const Ve=Br(ae,"currency");Xe("coconuts",Ve)},placeholder:"R$ 0,00",disabled:O,mask:"currency",returnUnmasked:!0})]}),i.jsxs("div",{className:"calculated-value",children:[i.jsx("span",{className:"calc-label",children:"Total de Vendas Adicionais:"}),i.jsx("span",{className:"calc-value",children:Z(S.totalAdditionalSales)})]})]}),i.jsxs("div",{className:"form-section full-width totals-section",children:[i.jsx("h3",{className:"section-title",children:"Resumo Financeiro"}),i.jsxs("div",{className:"totals-grid",children:[i.jsxs("div",{className:"total-card",children:[i.jsx("span",{className:"total-label",children:"Total de Faturamento"}),i.jsx("span",{className:"total-value primary",children:Z(S.totalRevenue)})]}),i.jsxs("div",{className:"total-card",children:[i.jsx("span",{className:"total-label",children:"Margem de Contribuio"}),i.jsx("span",{className:"total-value success",children:Z(S.contributionMargin)})]})]})]})]}),i.jsxs("div",{className:"modal-actions",children:[i.jsx(Je,{type:"button",onClick:e,className:"cancel-btn",children:O?"Fechar":"Cancelar"}),!O&&i.jsx(Je,{type:"submit",disabled:h,className:"save-btn",children:h?"Salvando...":C?"Salvar Alteraes":"Criar Venda"})]})]})})},pF=({stats:t})=>{const e=a=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(a),r=[{title:"Total de Vendas",value:t.total,icon:c1,color:"blue",description:"Nmero total de contratos",format:"number"},{title:"Faturamento Total",value:t.totalRevenue,icon:Pn,color:"green",description:"Receita total gerada",format:"currency"},{title:"Ticket Mdio",value:t.averageTicket,icon:fn,color:"purple",description:"Valor mdio por venda",format:"currency"},{title:"Margem de Contribuio",value:t.totalMargin,icon:pr,color:"cyan",description:"Margem total aps custos",format:"currency"},{title:"Vendas Confirmadas",value:t.confirmed,icon:Vn,color:"success",description:"Contratos confirmados",format:"number"},{title:"Vendas Pendentes",value:t.pending,icon:zd,color:"yellow",description:"Aguardando confirmao",format:"number"},{title:"Vendas Concludas",value:t.completed,icon:Vn,color:"green",description:"Contratos finalizados",format:"number"},{title:"Total de Comisses",value:t.totalCommissions,icon:kP,color:"orange",description:"Comisses pagas",format:"currency"}],n=(a,o)=>o==="currency"?e(a):a;return i.jsx("div",{className:"sale-stats",children:i.jsx("div",{className:"stats-grid",children:r.map(a=>{const o=a.icon;return i.jsxs("div",{className:`stat-card stat-card-${a.color}`,children:[i.jsx("div",{className:"stat-icon",children:i.jsx(o,{size:24})}),i.jsxs("div",{className:"stat-content",children:[i.jsx("div",{className:"stat-value",children:n(a.value,a.format)}),i.jsx("div",{className:"stat-title",children:a.title}),i.jsx("div",{className:"stat-description",children:a.description})]})]},a.title)})})})},gF=()=>{const[t,e]=B.useState([]),[r,n]=B.useState(!0),[a,o]=B.useState(!1),[c,h]=B.useState(null),[m,d]=B.useState("create"),[p,x]=B.useState({}),[y,E]=B.useState({total:0,totalRevenue:0,pending:0,confirmed:0,cancelled:0,completed:0,averageTicket:0,totalCommissions:0,totalMargin:0}),{showError:w,showSuccess:T,showWarning:b}=Bn(),A=async()=>{try{n(!0);const C=await Kr.getAll(p);e(C)}catch(C){const k=C instanceof Error?C.message:"Erro ao carregar vendas";w("Erro ao carregar vendas",k)}finally{n(!1)}},M=async()=>{try{const C=await Kr.getStats();E(C)}catch(C){const k=C instanceof Error?C.message:"Erro ao carregar estatsticas";b("Estatsticas indisponveis",k)}},V=B.useMemo(()=>{let C=[...t];if(p.search){const k=p.search.toLowerCase();C=C.filter(Ce=>Ce.code.toLowerCase().includes(k)||Ce.clientName.toLowerCase().includes(k)||Ce.houseName.toLowerCase().includes(k)||Ce.clientCpf.includes(k))}return p.company&&(C=C.filter(k=>k.company===p.company)),p.status&&(C=C.filter(k=>k.status===p.status)),p.saleOrigin&&(C=C.filter(k=>k.saleOrigin===p.saleOrigin)),p.dateRange&&(C=C.filter(k=>k.checkInDate>=p.dateRange.start&&k.checkInDate<=p.dateRange.end)),C},[t,p]);B.useEffect(()=>{A(),M()},[]),B.useEffect(()=>{Object.keys(p).length>0&&A()},[p]);const H=()=>{h(null),d("create"),o(!0)},re=C=>{h(C),d("edit"),o(!0)},q=C=>{h(C),d("view"),o(!0)},j=async C=>{if(confirm("Tem certeza que deseja excluir esta venda?"))try{await Kr.delete(C),e(t.filter(k=>k.id!==C)),M(),T("Venda excluda","A venda foi excluda com sucesso.")}catch(k){const Ce=k instanceof Error?k.message:"Erro ao excluir venda";w("Erro ao excluir venda",Ce)}},D=()=>{o(!1),h(null)},S=C=>{A(),M(),D(),T(C==="create"?"Venda criada":"Venda atualizada",C==="create"?"A venda foi registrada com sucesso.":"As informaes da venda foram atualizadas.")},P=C=>{x(C)},O=()=>{x({})};return r&&t.length===0?i.jsx(kr,{text:"Carregando vendas...",fullScreen:!0}):i.jsxs("div",{className:"sales-management",children:[i.jsx("div",{className:"sales-header",children:i.jsxs("div",{className:"sales-header-content",children:[i.jsxs("div",{className:"sales-header-left",children:[i.jsx("div",{className:"sales-header-icon",children:i.jsx(c1,{})}),i.jsxs("div",{className:"sales-header-text",children:[i.jsx("h1",{className:"sales-header-title",children:"Gesto de Vendas e Contratos"}),i.jsx("p",{className:"sales-header-subtitle",children:"Gerencie vendas, contratos e desempenho comercial"})]})]}),i.jsx(Je,{onClick:H,className:"create-sale-btn",children:"+ Nova Venda"})]})}),i.jsx(pF,{stats:y}),i.jsx("div",{className:"sales-management-content",children:i.jsx(fF,{sales:V,loading:r,onEdit:re,onView:q,onDelete:j,filters:p,onFiltersChange:P,onClearFilters:O})}),i.jsx(mF,{isOpen:a,onClose:D,onSave:S,sale:c,mode:m})]})},vF=({onFilterChange:t,onExport:e})=>{const[r,n]=B.useState([]),[a,o]=B.useState({startDate:"",endDate:"",company:"all",houseId:"",reportType:"summary",groupBy:"month",demographicType:"house"});B.useEffect(()=>{c()},[]);const c=async()=>{try{const p=await as.getAll();n(p)}catch(p){console.error("Erro ao carregar casas:",p)}},h=(p,x)=>{const y={...a,[p]:x};o(y),t(y)},m=()=>{const p={startDate:"",endDate:"",company:"all",houseId:"",reportType:"summary",groupBy:"month",demographicType:"house"};o(p),t(p)},d=()=>{switch(a.reportType){case"summary":return"Exportar Resumo";case"revenue-by-house":return"Exportar Receitas";case"cash-flow":return"Exportar Fluxo de Caixa";case"contracts":return"Exportar Contratos";case"breakdown":return"Exportar Breakdown";case"demographic":return"Exportar Demogrfico";case"comparative":return"Exportar Comparativo";case"tax":return"Exportar Impostos";default:return"Exportar Excel"}};return i.jsxs("div",{className:"financial-filters",children:[i.jsxs("div",{className:"filters-header",children:[i.jsx("h3",{children:"Filtros de Relatrio"}),i.jsxs("div",{className:"filters-actions",children:[i.jsx("button",{className:"btn-clear-filters",onClick:m,title:"Limpar filtros",children:"Limpar Filtros"}),i.jsxs("button",{className:"btn-export-excel",onClick:()=>e(a.reportType),title:"Exportar para Excel",children:[i.jsx(l1,{size:18})," ",d()]})]})]}),i.jsxs("div",{className:"filters-grid",children:[i.jsxs("div",{className:"filter-group",children:[i.jsx("label",{htmlFor:"reportType",children:"Tipo de Relatrio"}),i.jsxs("select",{id:"reportType",value:a.reportType,onChange:p=>h("reportType",p.target.value),children:[i.jsx("option",{value:"summary",children:"Resumo Geral"}),i.jsx("option",{value:"revenue-by-house",children:"Receitas por Casa"}),i.jsx("option",{value:"cash-flow",children:"Fluxo de Caixa"}),i.jsx("option",{value:"contracts",children:"Contratos Ativos/Concludos"}),i.jsx("option",{value:"breakdown",children:"Breakdown de Receitas"}),i.jsx("option",{value:"demographic",children:"Anlise Demogrfica"}),i.jsx("option",{value:"comparative",children:"Comparativo entre Perodos"}),i.jsx("option",{value:"tax",children:"Impostos por Empresa"})]})]}),i.jsxs("div",{className:"filter-group",children:[i.jsx("label",{htmlFor:"startDate",children:"Data Incio"}),i.jsx("input",{id:"startDate",type:"date",value:a.startDate,onChange:p=>h("startDate",p.target.value)})]}),i.jsxs("div",{className:"filter-group",children:[i.jsx("label",{htmlFor:"endDate",children:"Data Fim"}),i.jsx("input",{id:"endDate",type:"date",value:a.endDate,onChange:p=>h("endDate",p.target.value)})]}),i.jsxs("div",{className:"filter-group",children:[i.jsx("label",{htmlFor:"company",children:"Empresa"}),i.jsxs("select",{id:"company",value:a.company,onChange:p=>h("company",p.target.value),children:[i.jsx("option",{value:"all",children:"Todas"}),i.jsx("option",{value:"exclusive",children:"Exclusive Imveis"}),i.jsx("option",{value:"giogio",children:"Gio Gio Temporadas"}),i.jsx("option",{value:"direta",children:"Venda Direta"})]})]}),(a.reportType==="revenue-by-house"||a.reportType==="summary")&&i.jsxs("div",{className:"filter-group",children:[i.jsx("label",{htmlFor:"houseId",children:"Casa Especfica (opcional)"}),i.jsxs("select",{id:"houseId",value:a.houseId,onChange:p=>h("houseId",p.target.value),children:[i.jsx("option",{value:"",children:"Todas as casas"}),r.map(p=>i.jsx("option",{value:p.id,children:p.houseName},p.id))]})]}),a.reportType==="cash-flow"&&i.jsxs("div",{className:"filter-group",children:[i.jsx("label",{htmlFor:"groupBy",children:"Agrupar por"}),i.jsxs("select",{id:"groupBy",value:a.groupBy,onChange:p=>h("groupBy",p.target.value),children:[i.jsx("option",{value:"day",children:"Dia"}),i.jsx("option",{value:"month",children:"Ms"}),i.jsx("option",{value:"quarter",children:"Trimestre"}),i.jsx("option",{value:"year",children:"Ano"})]})]}),a.reportType==="demographic"&&i.jsxs("div",{className:"filter-group",children:[i.jsx("label",{htmlFor:"demographicType",children:"Analisar por"}),i.jsxs("select",{id:"demographicType",value:a.demographicType,onChange:p=>h("demographicType",p.target.value),children:[i.jsx("option",{value:"house",children:"Casa"}),i.jsx("option",{value:"gender",children:"Gnero"}),i.jsx("option",{value:"location",children:"Localidade"}),i.jsx("option",{value:"origin",children:"Origem da Venda"})]})]})]}),a.reportType==="comparative"&&i.jsx("div",{className:"comparative-notice",children:i.jsxs("p",{children:[i.jsx("strong",{children:"Relatrio Comparativo:"})," Ser comparado o perodo selecionado com o perodo anterior de mesma durao."]})})]})},xF=({data:t})=>{const e=n=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(n),r=n=>`${n.toFixed(2)}%`;return i.jsxs("div",{className:"financial-summary",children:[i.jsx("h2",{children:"Resumo Financeiro"}),i.jsxs("div",{className:"summary-cards",children:[i.jsxs("div",{className:"summary-card main-card",children:[i.jsx("div",{className:"card-icon",children:i.jsx(Pn,{size:40,style:{color:"#667eea"}})}),i.jsxs("div",{className:"card-content",children:[i.jsx("h3",{children:"Receita Total"}),i.jsx("p",{className:"card-value",children:e(t.totalRevenue)})]})]}),i.jsxs("div",{className:"summary-card expense-card",children:[i.jsx("div",{className:"card-icon",children:i.jsx(Xn,{size:40,style:{color:"#667eea"}})}),i.jsxs("div",{className:"card-content",children:[i.jsx("h3",{children:"Despesas Totais"}),i.jsx("p",{className:"card-value",children:e(t.totalExpenses)})]})]}),i.jsxs("div",{className:"summary-card profit-card",children:[i.jsx("div",{className:"card-icon",children:i.jsx(pr,{size:40,style:{color:"#667eea"}})}),i.jsxs("div",{className:"card-content",children:[i.jsx("h3",{children:"Lucro Lquido"}),i.jsx("p",{className:"card-value profit",children:e(t.netProfit)})]})]}),i.jsxs("div",{className:"summary-card margin-card",children:[i.jsx("div",{className:"card-icon",children:i.jsx(cu,{size:40,style:{color:"#667eea"}})}),i.jsxs("div",{className:"card-content",children:[i.jsx("h3",{children:"Margem de Lucro"}),i.jsx("p",{className:"card-value",children:r(t.profitMargin)})]})]})]}),i.jsxs("div",{className:"revenue-breakdown",children:[i.jsx("h3",{children:"Breakdown de Receitas (Trs Fontes)"}),i.jsxs("div",{className:"breakdown-grid",children:[i.jsxs("div",{className:"breakdown-item",children:[i.jsxs("div",{className:"breakdown-header",children:[i.jsx("span",{className:"breakdown-icon",children:i.jsx(Nn,{size:28,style:{color:"#667eea"}})}),i.jsx("h4",{children:"Dirias"})]}),i.jsx("p",{className:"breakdown-value",children:e(t.dailyRatesRevenue)}),i.jsxs("p",{className:"breakdown-percentage",children:[(t.dailyRatesRevenue/t.totalRevenue*100).toFixed(1),"% do total"]})]}),i.jsxs("div",{className:"breakdown-item",children:[i.jsxs("div",{className:"breakdown-header",children:[i.jsx("span",{className:"breakdown-icon",children:i.jsx(X0,{size:28})}),i.jsx("h4",{children:"Concierge"})]}),i.jsx("p",{className:"breakdown-value",children:e(t.conciergeRevenue)}),i.jsxs("p",{className:"breakdown-percentage",children:[(t.conciergeRevenue/t.totalRevenue*100).toFixed(1),"% do total"]})]}),i.jsxs("div",{className:"breakdown-item",children:[i.jsxs("div",{className:"breakdown-header",children:[i.jsx("span",{className:"breakdown-icon",children:i.jsx(Ur,{size:28})}),i.jsx("h4",{children:"Comisses Fornecedores"})]}),i.jsx("p",{className:"breakdown-value",children:e(t.suppliersCommissionRevenue)}),i.jsxs("p",{className:"breakdown-percentage",children:[(t.suppliersCommissionRevenue/t.totalRevenue*100).toFixed(1),"% do total"]})]})]})]}),i.jsxs("div",{className:"additional-metrics",children:[i.jsxs("div",{className:"metric-item",children:[i.jsx("span",{className:"metric-label",children:"Nmero de Vendas"}),i.jsx("span",{className:"metric-value",children:t.numberOfSales})]}),i.jsxs("div",{className:"metric-item",children:[i.jsx("span",{className:"metric-label",children:"Ticket Mdio"}),i.jsx("span",{className:"metric-value",children:e(t.averageTicket)})]})]})]})},yF=({data:t})=>{const e=a=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(a),n=t.reduce((a,o)=>({dailyRatesRevenue:a.dailyRatesRevenue+o.dailyRatesRevenue,conciergeRevenue:a.conciergeRevenue+o.conciergeRevenue,suppliersCommission:a.suppliersCommission+o.suppliersCommission,grossRevenue:a.grossRevenue+o.grossRevenue,expenses:a.expenses+o.expenses,netRevenue:a.netRevenue+o.netRevenue,numberOfSales:a.numberOfSales+o.numberOfSales,numberOfNights:a.numberOfNights+o.numberOfNights}),{dailyRatesRevenue:0,conciergeRevenue:0,suppliersCommission:0,grossRevenue:0,expenses:0,netRevenue:0,numberOfSales:0,numberOfNights:0});return t.length===0?i.jsxs("div",{className:"revenue-by-house-report",children:[i.jsx("h2",{children:"Receitas e Despesas por Casa"}),i.jsx("div",{className:"no-data",children:i.jsx("p",{children:"Nenhum dado encontrado para o perodo selecionado."})})]}):i.jsxs("div",{className:"revenue-by-house-report",children:[i.jsx("h2",{children:"Receitas e Despesas por Casa"}),i.jsx("p",{className:"report-subtitle",children:"Anlise detalhada das trs fontes de receita por propriedade"}),i.jsx("div",{className:"table-container",children:i.jsxs("table",{className:"revenue-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:"Casa"}),i.jsx("th",{children:"Vendas"}),i.jsx("th",{children:"Noites"}),i.jsx("th",{children:"Dirias"}),i.jsx("th",{children:"Concierge"}),i.jsx("th",{children:"Comisses"}),i.jsx("th",{children:"Receita Bruta"}),i.jsx("th",{children:"Despesas"}),i.jsx("th",{children:"Receita Lquida"})]})}),i.jsx("tbody",{children:t.map(a=>i.jsxs("tr",{children:[i.jsx("td",{children:i.jsxs("div",{className:"house-cell",children:[i.jsx("strong",{children:a.houseName}),i.jsx("small",{children:a.houseAddress})]})}),i.jsx("td",{className:"text-center",children:a.numberOfSales}),i.jsx("td",{className:"text-center",children:a.numberOfNights}),i.jsx("td",{className:"text-right revenue-daily",children:e(a.dailyRatesRevenue)}),i.jsx("td",{className:"text-right revenue-concierge",children:e(a.conciergeRevenue)}),i.jsx("td",{className:"text-right revenue-suppliers",children:e(a.suppliersCommission)}),i.jsx("td",{className:"text-right gross-revenue",children:e(a.grossRevenue)}),i.jsx("td",{className:"text-right expenses",children:e(a.expenses)}),i.jsx("td",{className:"text-right net-revenue",children:e(a.netRevenue)})]},a.houseId))}),i.jsx("tfoot",{children:i.jsxs("tr",{className:"totals-row",children:[i.jsx("td",{children:i.jsx("strong",{children:"TOTAL GERAL"})}),i.jsx("td",{className:"text-center",children:i.jsx("strong",{children:n.numberOfSales})}),i.jsx("td",{className:"text-center",children:i.jsx("strong",{children:n.numberOfNights})}),i.jsx("td",{className:"text-right",children:i.jsx("strong",{children:e(n.dailyRatesRevenue)})}),i.jsx("td",{className:"text-right",children:i.jsx("strong",{children:e(n.conciergeRevenue)})}),i.jsx("td",{className:"text-right",children:i.jsx("strong",{children:e(n.suppliersCommission)})}),i.jsx("td",{className:"text-right",children:i.jsx("strong",{children:e(n.grossRevenue)})}),i.jsx("td",{className:"text-right",children:i.jsx("strong",{children:e(n.expenses)})}),i.jsx("td",{className:"text-right",children:i.jsx("strong",{children:e(n.netRevenue)})})]})})]})}),i.jsxs("div",{className:"revenue-sources-legend",children:[i.jsx("h3",{children:"Trs Fontes de Receita"}),i.jsxs("div",{className:"legend-items",children:[i.jsxs("div",{className:"legend-item",children:[i.jsx("span",{className:"legend-color daily"}),i.jsxs("div",{children:[i.jsx("strong",{children:"Dirias"}),i.jsx("p",{children:"Valor lquido das dirias (aps descontos)"})]})]}),i.jsxs("div",{className:"legend-item",children:[i.jsx("span",{className:"legend-color concierge"}),i.jsxs("div",{children:[i.jsx("strong",{children:"Concierge"}),i.jsx("p",{children:"Servios de concierge prestados"})]})]}),i.jsxs("div",{className:"legend-item",children:[i.jsx("span",{className:"legend-color suppliers"}),i.jsxs("div",{children:[i.jsx("strong",{children:"Comisses Fornecedores"}),i.jsx("p",{children:"Comisses de mercado, frutos do mar, transfer, verduras, cocos, etc."})]})]})]})]})]})},_F=({data:t})=>{const e=a=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(a),r=a=>a>0?"positive":a<0?"negative":"neutral";if(t.length===0)return i.jsxs("div",{className:"cash-flow-report",children:[i.jsx("h2",{children:"Fluxo de Caixa"}),i.jsx("div",{className:"no-data",children:i.jsx("p",{children:"Nenhum dado encontrado para o perodo selecionado."})})]});const n=t[t.length-1]?.accumulatedBalance||0;return i.jsxs("div",{className:"cash-flow-report",children:[i.jsxs("div",{className:"report-header",children:[i.jsxs("div",{children:[i.jsx("h2",{children:"Fluxo de Caixa"}),i.jsx("p",{className:"report-subtitle",children:"Entradas e sadas financeiras por perodo"})]}),i.jsxs("div",{className:"final-balance-card",children:[i.jsx("span",{className:"balance-label",children:"Saldo Final"}),i.jsx("span",{className:`balance-value ${r(n)}`,children:e(n)})]})]}),i.jsx("div",{className:"table-container",children:i.jsxs("table",{className:"cash-flow-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:"Perodo"}),i.jsx("th",{children:"Entradas"}),i.jsx("th",{children:"Sadas"}),i.jsx("th",{children:"Saldo do Perodo"}),i.jsx("th",{children:"Saldo Acumulado"})]})}),i.jsx("tbody",{children:t.map((a,o)=>i.jsxs("tr",{children:[i.jsx("td",{children:i.jsx("strong",{children:a.period})}),i.jsx("td",{className:"cash-in",children:e(a.cashIn)}),i.jsx("td",{className:"cash-out",children:e(a.cashOut)}),i.jsx("td",{className:`balance ${r(a.balance)}`,children:e(a.balance)}),i.jsx("td",{className:`accumulated ${r(a.accumulatedBalance)}`,children:e(a.accumulatedBalance)})]},o))})]})}),i.jsxs("div",{className:"cash-flow-summary",children:[i.jsxs("div",{className:"summary-item in",children:[i.jsx("div",{className:"summary-icon",children:i.jsx(pr,{size:40})}),i.jsxs("div",{className:"summary-content",children:[i.jsx("span",{className:"summary-label",children:"Total de Entradas"}),i.jsx("span",{className:"summary-value",children:e(t.reduce((a,o)=>a+o.cashIn,0))})]})]}),i.jsxs("div",{className:"summary-item out",children:[i.jsx("div",{className:"summary-icon",children:i.jsx(Xn,{size:40})}),i.jsxs("div",{className:"summary-content",children:[i.jsx("span",{className:"summary-label",children:"Total de Sadas"}),i.jsx("span",{className:"summary-value",children:e(t.reduce((a,o)=>a+o.cashOut,0))})]})]}),i.jsxs("div",{className:"summary-item balance",children:[i.jsx("div",{className:"summary-icon",children:i.jsx(Pn,{size:40})}),i.jsxs("div",{className:"summary-content",children:[i.jsx("span",{className:"summary-label",children:"Saldo Total"}),i.jsx("span",{className:`summary-value ${r(t.reduce((a,o)=>a+o.balance,0))}`,children:e(t.reduce((a,o)=>a+o.balance,0))})]})]})]})]})},EF=({data:t})=>{const e=a=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(a),r=t.active.count+t.completed.count+t.pending.count,n=t.active.totalRevenue+t.completed.totalRevenue+t.pending.totalRevenue;return i.jsxs("div",{className:"contracts-report",children:[i.jsx("h2",{children:"Relatrio de Contratos"}),i.jsx("p",{className:"report-subtitle",children:"Anlise de contratos ativos, concludos, pendentes e cancelados"}),i.jsxs("div",{className:"contracts-grid",children:[i.jsxs("div",{className:"contract-card active",children:[i.jsxs("div",{className:"card-header",children:[i.jsx("span",{className:"card-icon",children:i.jsx(Vn,{size:28})}),i.jsx("h3",{children:"Ativos/Confirmados"})]}),i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"metric",children:[i.jsx("span",{className:"metric-label",children:"Quantidade"}),i.jsx("span",{className:"metric-value",children:t.active.count})]}),i.jsxs("div",{className:"metric",children:[i.jsx("span",{className:"metric-label",children:"Receita Total"}),i.jsx("span",{className:"metric-value",children:e(t.active.totalRevenue)})]}),i.jsxs("div",{className:"metric",children:[i.jsx("span",{className:"metric-label",children:"Ticket Mdio"}),i.jsx("span",{className:"metric-value",children:e(t.active.averageValue)})]})]}),i.jsxs("div",{className:"card-footer",children:[i.jsx("div",{className:"percentage-bar",children:i.jsx("div",{className:"percentage-fill active-fill",style:{width:`${r>0?t.active.count/r*100:0}%`}})}),i.jsxs("span",{className:"percentage-text",children:[r>0?(t.active.count/r*100).toFixed(1):0,"% do total"]})]})]}),i.jsxs("div",{className:"contract-card completed",children:[i.jsxs("div",{className:"card-header",children:[i.jsx("span",{className:"card-icon",children:i.jsx(SP,{size:28})}),i.jsx("h3",{children:"Concludos"})]}),i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"metric",children:[i.jsx("span",{className:"metric-label",children:"Quantidade"}),i.jsx("span",{className:"metric-value",children:t.completed.count})]}),i.jsxs("div",{className:"metric",children:[i.jsx("span",{className:"metric-label",children:"Receita Total"}),i.jsx("span",{className:"metric-value",children:e(t.completed.totalRevenue)})]}),i.jsxs("div",{className:"metric",children:[i.jsx("span",{className:"metric-label",children:"Ticket Mdio"}),i.jsx("span",{className:"metric-value",children:e(t.completed.averageValue)})]})]}),i.jsxs("div",{className:"card-footer",children:[i.jsx("div",{className:"percentage-bar",children:i.jsx("div",{className:"percentage-fill completed-fill",style:{width:`${r>0?t.completed.count/r*100:0}%`}})}),i.jsxs("span",{className:"percentage-text",children:[r>0?(t.completed.count/r*100).toFixed(1):0,"% do total"]})]})]}),i.jsxs("div",{className:"contract-card pending",children:[i.jsxs("div",{className:"card-header",children:[i.jsx("span",{className:"card-icon",children:i.jsx(zd,{size:28})}),i.jsx("h3",{children:"Pendentes"})]}),i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"metric",children:[i.jsx("span",{className:"metric-label",children:"Quantidade"}),i.jsx("span",{className:"metric-value",children:t.pending.count})]}),i.jsxs("div",{className:"metric",children:[i.jsx("span",{className:"metric-label",children:"Receita Potencial"}),i.jsx("span",{className:"metric-value",children:e(t.pending.totalRevenue)})]})]}),i.jsxs("div",{className:"card-footer",children:[i.jsx("div",{className:"percentage-bar",children:i.jsx("div",{className:"percentage-fill pending-fill",style:{width:`${r>0?t.pending.count/r*100:0}%`}})}),i.jsxs("span",{className:"percentage-text",children:[r>0?(t.pending.count/r*100).toFixed(1):0,"% do total"]})]})]}),i.jsxs("div",{className:"contract-card cancelled",children:[i.jsxs("div",{className:"card-header",children:[i.jsx("span",{className:"card-icon",children:i.jsx(u1,{size:28})}),i.jsx("h3",{children:"Cancelados"})]}),i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"metric",children:[i.jsx("span",{className:"metric-label",children:"Quantidade"}),i.jsx("span",{className:"metric-value",children:t.cancelled.count})]}),i.jsxs("div",{className:"metric",children:[i.jsx("span",{className:"metric-label",children:"Receita Perdida"}),i.jsx("span",{className:"metric-value",children:e(t.cancelled.lostRevenue)})]})]})]})]}),i.jsxs("div",{className:"contracts-summary",children:[i.jsx("h3",{children:"Resumo Geral"}),i.jsxs("div",{className:"summary-grid",children:[i.jsxs("div",{className:"summary-item",children:[i.jsx("span",{className:"summary-label",children:"Total de Contratos"}),i.jsx("span",{className:"summary-value",children:r})]}),i.jsxs("div",{className:"summary-item",children:[i.jsx("span",{className:"summary-label",children:"Receita Total (Efetiva)"}),i.jsx("span",{className:"summary-value",children:e(n)})]}),i.jsxs("div",{className:"summary-item",children:[i.jsx("span",{className:"summary-label",children:"Taxa de Cancelamento"}),i.jsxs("span",{className:"summary-value",children:[r+t.cancelled.count>0?(t.cancelled.count/(r+t.cancelled.count)*100).toFixed(1):0,"%"]})]}),i.jsxs("div",{className:"summary-item",children:[i.jsx("span",{className:"summary-label",children:"Taxa de Concluso"}),i.jsxs("span",{className:"summary-value",children:[r>0?(t.completed.count/r*100).toFixed(1):0,"%"]})]})]})]})]})},TF=({data:t,type:e})=>{const r=h=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(h),n=()=>({house:"Casa",gender:"Gnero",location:"Localidade",origin:"Origem da Venda"})[e],a=()=>({house:i.jsx(Nn,{size:24}),gender:i.jsx(Ur,{size:24}),location:i.jsx(RP,{size:24}),origin:i.jsx(fn,{size:24})})[e];if(t.length===0)return i.jsxs("div",{className:"demographic-report",children:[i.jsxs("h2",{children:["Anlise Demogrfica - ",n()]}),i.jsx("div",{className:"no-data",children:i.jsx("p",{children:"Nenhum dado encontrado para o perodo selecionado."})})]});const o=t.reduce((h,m)=>h+m.totalRevenue,0),c=t.reduce((h,m)=>h+m.numberOfSales,0);return i.jsxs("div",{className:"demographic-report",children:[i.jsxs("div",{className:"report-header",children:[i.jsxs("div",{children:[i.jsxs("h2",{children:[a()," Anlise Demogrfica - ",n()]}),i.jsxs("p",{className:"report-subtitle",children:["Vendas e receitas segmentadas por ",n().toLowerCase()]})]}),i.jsxs("div",{className:"totals-card",children:[i.jsxs("div",{className:"total-item",children:[i.jsx("span",{className:"total-label",children:"Total de Vendas"}),i.jsx("span",{className:"total-value",children:c})]}),i.jsxs("div",{className:"total-item",children:[i.jsx("span",{className:"total-label",children:"Receita Total"}),i.jsx("span",{className:"total-value",children:r(o)})]})]})]}),i.jsx("div",{className:"table-container",children:i.jsxs("table",{className:"demographic-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:n()}),i.jsx("th",{children:"N de Vendas"}),i.jsx("th",{children:"Receita Total"}),i.jsx("th",{children:"% do Total"}),i.jsx("th",{children:"Ticket Mdio"}),i.jsx("th",{children:"Participao"})]})}),i.jsx("tbody",{children:t.map((h,m)=>i.jsxs("tr",{children:[i.jsx("td",{children:i.jsx("strong",{children:h.value})}),i.jsx("td",{className:"text-center",children:h.numberOfSales}),i.jsx("td",{className:"text-right revenue",children:r(h.totalRevenue)}),i.jsxs("td",{className:"text-center percentage",children:[h.percentage.toFixed(1),"%"]}),i.jsx("td",{className:"text-right",children:r(h.averageTicket)}),i.jsx("td",{children:i.jsx("div",{className:"participation-bar",children:i.jsx("div",{className:"participation-fill",style:{width:`${h.percentage}%`}})})})]},m))})]})}),i.jsxs("div",{className:"highlights",children:[i.jsx("h3",{children:"Destaques"}),i.jsxs("div",{className:"highlights-grid",children:[t.length>0&&i.jsxs("div",{className:"highlight-card top-revenue",children:[i.jsx("div",{className:"highlight-icon",children:i.jsx(GS,{size:40})}),i.jsxs("div",{className:"highlight-content",children:[i.jsx("span",{className:"highlight-label",children:"Maior Receita"}),i.jsx("span",{className:"highlight-title",children:t[0].value}),i.jsx("span",{className:"highlight-value",children:r(t[0].totalRevenue)})]})]}),t.length>0&&i.jsxs("div",{className:"highlight-card top-volume",children:[i.jsx("div",{className:"highlight-icon",children:i.jsx(Os,{size:40})}),i.jsxs("div",{className:"highlight-content",children:[i.jsx("span",{className:"highlight-label",children:"Maior Volume"}),i.jsx("span",{className:"highlight-title",children:[...t].sort((h,m)=>m.numberOfSales-h.numberOfSales)[0].value}),i.jsxs("span",{className:"highlight-value",children:[[...t].sort((h,m)=>m.numberOfSales-h.numberOfSales)[0].numberOfSales," ","vendas"]})]})]}),t.length>0&&i.jsxs("div",{className:"highlight-card top-ticket",children:[i.jsx("div",{className:"highlight-icon",children:i.jsx(Pn,{size:40})}),i.jsxs("div",{className:"highlight-content",children:[i.jsx("span",{className:"highlight-label",children:"Maior Ticket Mdio"}),i.jsx("span",{className:"highlight-title",children:[...t].sort((h,m)=>m.averageTicket-h.averageTicket)[0].value}),i.jsx("span",{className:"highlight-value",children:r([...t].sort((h,m)=>m.averageTicket-h.averageTicket)[0].averageTicket)})]})]})]})]})]})},wF=({data:t})=>{const e=c=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(c),r=c=>`${c>0?"+":""}${c.toFixed(1)}%`,n=c=>c==="up"?i.jsx(pr,{size:16}):c==="down"?i.jsx(Xn,{size:16}):i.jsx(tx,{size:16}),a=c=>c==="up"?"trend-up":c==="down"?"trend-down":"trend-neutral",o=[{label:"Total de Vendas",key:"totalSales",format:c=>c.toString()},{label:"Receita Total",key:"totalRevenue",format:e},{label:"Receita Dirias",key:"dailyRates",format:e},{label:"Receita Concierge",key:"concierge",format:e},{label:"Comisses Fornecedores",key:"suppliersCommission",format:e},{label:"Ticket Mdio",key:"averageTicket",format:e},{label:"Noites Vendidas",key:"numberOfNights",format:c=>c.toString()}];return i.jsxs("div",{className:"comparative-report",children:[i.jsxs("h2",{children:[i.jsx(Os,{size:28,style:{verticalAlign:"middle",marginRight:"0.5rem"}}),"Relatrio Comparativo entre Perodos"]}),i.jsx("p",{className:"report-subtitle",children:"Anlise comparativa das mtricas entre dois perodos"}),i.jsxs("div",{className:"periods-header",children:[i.jsxs("div",{className:"period-card period1",children:[i.jsx("span",{className:"period-label",children:"Perodo 1"}),i.jsx("span",{className:"period-value",children:t.period1.label})]}),i.jsx("div",{className:"versus",children:"VS"}),i.jsxs("div",{className:"period-card period2",children:[i.jsx("span",{className:"period-label",children:"Perodo 2"}),i.jsx("span",{className:"period-value",children:t.period2.label})]})]}),i.jsx("div",{className:"table-container",children:i.jsxs("table",{className:"comparative-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:"Mtrica"}),i.jsx("th",{children:t.period1.label}),i.jsx("th",{children:t.period2.label}),i.jsx("th",{children:"Variao"}),i.jsx("th",{children:"Variao %"}),i.jsx("th",{children:"Tendncia"})]})}),i.jsx("tbody",{children:o.map(c=>{const h=t.comparison[c.key],m=t.period1.metrics[c.key],d=t.period2.metrics[c.key];return i.jsxs("tr",{children:[i.jsx("td",{children:i.jsx("strong",{children:c.label})}),i.jsx("td",{className:"value-cell",children:c.format(m)}),i.jsx("td",{className:"value-cell",children:c.format(d)}),i.jsx("td",{className:`change-cell ${a(h.trend)}`,children:c.key==="totalSales"||c.key==="numberOfNights"?h.absoluteChange>0?`+${h.absoluteChange}`:h.absoluteChange.toString():e(h.absoluteChange)}),i.jsx("td",{className:`percentage-cell ${a(h.trend)}`,children:r(h.percentageChange)}),i.jsx("td",{className:"trend-cell",children:i.jsxs("span",{className:`trend-badge ${a(h.trend)}`,children:[n(h.trend)," ",h.trend==="up"?"Crescimento":h.trend==="down"?"Queda":"Estvel"]})})]},c.key)})})]})}),i.jsxs("div",{className:"revenue-sources-comparison",children:[i.jsx("h3",{children:"Comparao das Trs Fontes de Receita"}),i.jsxs("div",{className:"sources-grid",children:[i.jsxs("div",{className:"source-item",children:[i.jsxs("div",{className:"source-header",children:[i.jsx("span",{className:"source-icon",children:i.jsx(Nn,{size:28})}),i.jsx("h4",{children:"Dirias"})]}),i.jsxs("div",{className:"source-values",children:[i.jsxs("div",{className:"source-period",children:[i.jsx("span",{className:"period-label",children:"Perodo 1"}),i.jsx("span",{className:"period-value",children:e(t.period1.metrics.dailyRates)})]}),i.jsxs("div",{className:"source-period",children:[i.jsx("span",{className:"period-label",children:"Perodo 2"}),i.jsx("span",{className:"period-value",children:e(t.period2.metrics.dailyRates)})]})]}),i.jsx("div",{className:`source-change ${a(t.comparison.dailyRates.trend)}`,children:r(t.comparison.dailyRates.percentageChange)})]}),i.jsxs("div",{className:"source-item",children:[i.jsxs("div",{className:"source-header",children:[i.jsx("span",{className:"source-icon",children:i.jsx(X0,{size:28})}),i.jsx("h4",{children:"Concierge"})]}),i.jsxs("div",{className:"source-values",children:[i.jsxs("div",{className:"source-period",children:[i.jsx("span",{className:"period-label",children:"Perodo 1"}),i.jsx("span",{className:"period-value",children:e(t.period1.metrics.concierge)})]}),i.jsxs("div",{className:"source-period",children:[i.jsx("span",{className:"period-label",children:"Perodo 2"}),i.jsx("span",{className:"period-value",children:e(t.period2.metrics.concierge)})]})]}),i.jsx("div",{className:`source-change ${a(t.comparison.concierge.trend)}`,children:r(t.comparison.concierge.percentageChange)})]}),i.jsxs("div",{className:"source-item",children:[i.jsxs("div",{className:"source-header",children:[i.jsx("span",{className:"source-icon",children:i.jsx(Ur,{size:28})}),i.jsx("h4",{children:"Comisses"})]}),i.jsxs("div",{className:"source-values",children:[i.jsxs("div",{className:"source-period",children:[i.jsx("span",{className:"period-label",children:"Perodo 1"}),i.jsx("span",{className:"period-value",children:e(t.period1.metrics.suppliersCommission)})]}),i.jsxs("div",{className:"source-period",children:[i.jsx("span",{className:"period-label",children:"Perodo 2"}),i.jsx("span",{className:"period-value",children:e(t.period2.metrics.suppliersCommission)})]})]}),i.jsx("div",{className:`source-change ${a(t.comparison.suppliersCommission.trend)}`,children:r(t.comparison.suppliersCommission.percentageChange)})]})]})]})]})},NF=({data:t})=>{const e=c=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(c),r=c=>`${c.toFixed(2)}%`,n=t.reduce((c,h)=>c+h.grossRevenue,0),a=t.reduce((c,h)=>c+h.taxAmount,0),o=t.reduce((c,h)=>c+h.netRevenue,0);return i.jsxs("div",{className:"tax-report",children:[i.jsxs("h2",{children:[i.jsx(Pn,{size:28,style:{verticalAlign:"middle",marginRight:"0.5rem"}}),"Relatrio de Impostos por Empresa"]}),i.jsx("p",{className:"report-subtitle",children:"Anlise de impostos pagos e receita lquida por empresa"}),i.jsx("div",{className:"companies-grid",children:t.map((c,h)=>i.jsxs("div",{className:"company-card",children:[i.jsxs("div",{className:"company-header",children:[i.jsx("h3",{children:c.companyName}),i.jsx("span",{className:"company-period",children:c.period})]}),i.jsxs("div",{className:"company-metrics",children:[i.jsxs("div",{className:"metric-row",children:[i.jsx("span",{className:"metric-label",children:"Receita Bruta"}),i.jsx("span",{className:"metric-value gross",children:e(c.grossRevenue)})]}),i.jsxs("div",{className:"metric-row",children:[i.jsx("span",{className:"metric-label",children:"Receita Tributvel"}),i.jsx("span",{className:"metric-value",children:e(c.taxableRevenue)})]}),i.jsxs("div",{className:"metric-row",children:[i.jsx("span",{className:"metric-label",children:"Alquota"}),i.jsx("span",{className:"metric-value tax-rate",children:r(c.taxRate)})]}),i.jsxs("div",{className:"metric-row highlight",children:[i.jsx("span",{className:"metric-label",children:"Valor do Imposto"}),i.jsx("span",{className:"metric-value tax",children:e(c.taxAmount)})]}),i.jsxs("div",{className:"metric-row highlight",children:[i.jsx("span",{className:"metric-label",children:"Receita Lquida"}),i.jsx("span",{className:"metric-value net",children:e(c.netRevenue)})]})]}),i.jsxs("div",{className:"tax-visualization",children:[i.jsxs("div",{className:"tax-bar",children:[i.jsx("div",{className:"tax-portion",style:{width:`${c.taxAmount/c.grossRevenue*100}%`},title:`Imposto: ${r(c.taxAmount/c.grossRevenue*100)}`}),i.jsx("div",{className:"net-portion",style:{width:`${c.netRevenue/c.grossRevenue*100}%`},title:`Lquido: ${r(c.netRevenue/c.grossRevenue*100)}`})]}),i.jsxs("div",{className:"tax-legend",children:[i.jsxs("span",{className:"legend-item",children:[i.jsx("span",{className:"legend-color tax-color"}),"Imposto"]}),i.jsxs("span",{className:"legend-item",children:[i.jsx("span",{className:"legend-color net-color"}),"Lquido"]})]})]})]},h))}),i.jsxs("div",{className:"tax-summary",children:[i.jsx("h3",{children:"Resumo Consolidado"}),i.jsxs("div",{className:"summary-grid",children:[i.jsxs("div",{className:"summary-card",children:[i.jsx("div",{className:"summary-icon",children:i.jsx(Pn,{size:32})}),i.jsxs("div",{className:"summary-content",children:[i.jsx("span",{className:"summary-label",children:"Receita Bruta Total"}),i.jsx("span",{className:"summary-value",children:e(n)})]})]}),i.jsxs("div",{className:"summary-card",children:[i.jsx("div",{className:"summary-icon",children:i.jsx(_i,{size:32})}),i.jsxs("div",{className:"summary-content",children:[i.jsx("span",{className:"summary-label",children:"Total de Impostos Pagos"}),i.jsx("span",{className:"summary-value tax",children:e(a)})]})]}),i.jsxs("div",{className:"summary-card",children:[i.jsx("div",{className:"summary-icon",children:i.jsx(Pn,{size:32})}),i.jsxs("div",{className:"summary-content",children:[i.jsx("span",{className:"summary-label",children:"Receita Lquida Total"}),i.jsx("span",{className:"summary-value net",children:e(o)})]})]}),i.jsxs("div",{className:"summary-card",children:[i.jsx("div",{className:"summary-icon",children:i.jsx(cu,{size:32})}),i.jsxs("div",{className:"summary-content",children:[i.jsx("span",{className:"summary-label",children:"Carga Tributria Mdia"}),i.jsx("span",{className:"summary-value",children:r(n>0?a/n*100:0)})]})]})]})]}),i.jsxs("div",{className:"tax-notes",children:[i.jsxs("h4",{children:[i.jsx(Ud,{size:20,style:{verticalAlign:"middle",marginRight:"0.5rem"}}),"Observaes"]}),i.jsxs("ul",{children:[i.jsx("li",{children:"Os valores de impostos so calculados com base na alquota configurada para cada empresa"}),i.jsx("li",{children:"A alquota padro  de 6% (Simples Nacional), mas pode ser ajustada no cdigo conforme necessrio"}),i.jsx("li",{children:"Valores consideram apenas vendas no canceladas no perodo"}),i.jsx("li",{children:"Para relatrios fiscais oficiais, consulte sempre um contador certificado"})]})]})]})},bF={exclusive:6,giogio:6,direta:6},SF={exclusive:"Exclusive Imveis",giogio:"Gio Gio Temporadas",direta:"Venda Direta"},ii=(t,e,r)=>!e&&!r?t:t.filter(n=>{const a=n.checkInDate;return!(e&&a<e||r&&a>r)}),ao=(t,e)=>!e||e==="all"?t:t.filter(r=>r.company===e),AF=(t,e)=>{const r=new Map;return t.forEach(n=>{let a;const o=n.checkInDate;switch(e){case"day":a=o.toISOString().split("T")[0];break;case"month":a=`${o.getFullYear()}-${String(o.getMonth()+1).padStart(2,"0")}`;break;case"quarter":{const c=Math.floor(o.getMonth()/3)+1;a=`${o.getFullYear()}-Q${c}`;break}case"year":a=o.getFullYear().toString();break;default:a=o.toISOString().split("T")[0]}r.has(a)||r.set(a,[]),r.get(a).push(n)}),r},CF=(t,e)=>{if(e==="day"){const[r,n,a]=t.split("-");return`${a}/${n}/${r}`}if(e==="month"){const[r,n]=t.split("-");return`${["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"][parseInt(n)-1]}/${r}`}return t},so={async getRevenueByHouse(t){try{let e=await Kr.getAll();e=ii(e,t?.startDate,t?.endDate),e=ao(e,t?.company),t?.houseId&&(e=e.filter(a=>a.houseId===t.houseId)),e=e.filter(a=>a.status!=="cancelled");const r=new Map;e.forEach(a=>{r.has(a.houseId)||r.set(a.houseId,[]),r.get(a.houseId).push(a)});const n=[];return r.forEach((a,o)=>{const c=a.reduce((E,w)=>E+w.netValue,0),h=a.reduce((E,w)=>E+w.conciergeValue,0),m=a.reduce((E,w)=>E+w.totalAdditionalSales,0),d=a.reduce((E,w)=>E+w.housekeeperValue+w.salesCommission,0),p=a.reduce((E,w)=>E+w.numberOfNights,0),x=c+h+m,y=x-d;n.push({houseId:o,houseName:a[0].houseName,houseAddress:a[0].houseAddress,dailyRatesRevenue:c,conciergeRevenue:h,suppliersCommission:m,grossRevenue:x,expenses:d,netRevenue:y,numberOfSales:a.length,numberOfNights:p})}),n.sort((a,o)=>o.netRevenue-a.netRevenue)}catch(e){throw console.error("Erro ao calcular receitas por casa:",e),new Error("Falha ao gerar relatrio de receitas por casa")}},async getCashFlow(t){try{let e=await Kr.getAll();e=ii(e,t?.startDate,t?.endDate),e=ao(e,t?.company),e=e.filter(h=>h.status!=="cancelled");const r=t?.groupBy||"month",n=AF(e,r),a=[];let o=0;return Array.from(n.keys()).sort().forEach(h=>{const m=n.get(h),d=m.reduce((T,b)=>T+b.totalRevenue,0),p=m.reduce((T,b)=>T+b.housekeeperValue+b.salesCommission,0),x=d-p;o+=x;const[y,E]=h.split("-"),w=new Date(parseInt(y),parseInt(E)-1,1);a.push({period:CF(h,r),date:w,cashIn:d,cashOut:p,balance:x,accumulatedBalance:o})}),a}catch(e){throw console.error("Erro ao calcular fluxo de caixa:",e),new Error("Falha ao gerar relatrio de fluxo de caixa")}},async getContractsReport(t){try{let e=await Kr.getAll();e=ii(e,t?.startDate,t?.endDate),e=ao(e,t?.company);const r=e.filter(h=>h.status==="confirmed"||h.status==="pending"),n=e.filter(h=>h.status==="completed"),a=e.filter(h=>h.status==="pending"),o=e.filter(h=>h.status==="cancelled"),c=h=>{const m=h.reduce((p,x)=>p+x.totalRevenue,0),d=h.length>0?m/h.length:0;return{count:h.length,totalRevenue:m,averageValue:d}};return{active:c(r),completed:c(n),pending:{count:a.length,totalRevenue:a.reduce((h,m)=>h+m.totalRevenue,0)},cancelled:{count:o.length,lostRevenue:o.reduce((h,m)=>h+m.totalRevenue,0)}}}catch(e){throw console.error("Erro ao gerar relatrio de contratos:",e),new Error("Falha ao gerar relatrio de contratos")}},async getRevenueBreakdown(t){try{let e=await Kr.getAll();e=ii(e,t?.startDate,t?.endDate),e=ao(e,t?.company),e=e.filter(c=>c.status!=="cancelled");const r=e.reduce((c,h)=>c+h.netValue,0),n=e.reduce((c,h)=>c+h.conciergeValue,0),a=e.reduce((c,h)=>c+h.totalAdditionalSales,0),o=r+n+a;return{dailyRates:{total:r,percentage:o>0?r/o*100:0},concierge:{total:n,percentage:o>0?n/o*100:0},suppliersCommission:{total:a,percentage:o>0?a/o*100:0},totalRevenue:o}}catch(e){throw console.error("Erro ao calcular breakdown de receitas:",e),new Error("Falha ao gerar relatrio de receitas")}},async getDemographicReport(t,e){try{let r=await Kr.getAll();r=ii(r,e?.startDate,e?.endDate),r=ao(r,e?.company),r=r.filter(c=>c.status!=="cancelled");const n=new Map;r.forEach(c=>{let h;switch(t){case"house":h=c.houseName;break;case"gender":h=c.clientGender||"No informado";break;case"location":h=c.houseAddress.split(" - ")[1]||"No informado";break;case"origin":h=c.saleOrigin;break;default:h="Outros"}n.has(h)||n.set(h,[]),n.get(h).push(c)});const a=r.reduce((c,h)=>c+h.totalRevenue,0),o=[];return n.forEach((c,h)=>{const m=c.reduce((d,p)=>d+p.totalRevenue,0);o.push({category:t,value:h,numberOfSales:c.length,totalRevenue:m,percentage:a>0?m/a*100:0,averageTicket:c.length>0?m/c.length:0})}),o.sort((c,h)=>h.totalRevenue-c.totalRevenue)}catch(r){throw console.error("Erro ao gerar relatrio demogrfico:",r),new Error("Falha ao gerar relatrio demogrfico")}},async getComparativeReport(t,e,r,n,a){try{const o=await Kr.getAll();let c=ii(o,t,e),h=ii(o,r,n);c=ao(c,a),h=ao(h,a),c=c.filter(y=>y.status!=="cancelled"),h=h.filter(y=>y.status!=="cancelled");const m=y=>{const E=y.reduce((w,T)=>w+T.totalRevenue,0);return{totalSales:y.length,totalRevenue:E,dailyRates:y.reduce((w,T)=>w+T.netValue,0),concierge:y.reduce((w,T)=>w+T.conciergeValue,0),suppliersCommission:y.reduce((w,T)=>w+T.totalAdditionalSales,0),averageTicket:y.length>0?E/y.length:0,numberOfNights:y.reduce((w,T)=>w+T.numberOfNights,0)}},d={label:`${t.toLocaleDateString("pt-BR")} - ${e.toLocaleDateString("pt-BR")}`,startDate:t,endDate:e,metrics:m(c)},p={label:`${r.toLocaleDateString("pt-BR")} - ${n.toLocaleDateString("pt-BR")}`,startDate:r,endDate:n,metrics:m(h)},x=(y,E)=>{const w=E-y,T=y!==0?w/y*100:0,b=w>0?"up":w<0?"down":"neutral";return{absoluteChange:w,percentageChange:T,trend:b}};return{period1:d,period2:p,comparison:{totalSales:x(d.metrics.totalSales,p.metrics.totalSales),totalRevenue:x(d.metrics.totalRevenue,p.metrics.totalRevenue),dailyRates:x(d.metrics.dailyRates,p.metrics.dailyRates),concierge:x(d.metrics.concierge,p.metrics.concierge),suppliersCommission:x(d.metrics.suppliersCommission,p.metrics.suppliersCommission),averageTicket:x(d.metrics.averageTicket,p.metrics.averageTicket),numberOfNights:x(d.metrics.numberOfNights,p.metrics.numberOfNights)}}}catch(o){throw console.error("Erro ao gerar relatrio comparativo:",o),new Error("Falha ao gerar relatrio comparativo")}},async getTaxReport(t){try{const e=await Kr.getAll();let r=ii(e,t?.startDate,t?.endDate);r=r.filter(o=>o.status!=="cancelled");const n=["exclusive","giogio","direta"],a=[];return n.forEach(o=>{const h=r.filter(x=>x.company===o).reduce((x,y)=>x+y.totalRevenue,0),m=bF[o],d=h*m/100,p=h-d;a.push({company:o,companyName:SF[o],period:t?.startDate&&t?.endDate?`${t.startDate.toLocaleDateString("pt-BR")} - ${t.endDate.toLocaleDateString("pt-BR")}`:"Todos os perodos",grossRevenue:h,taxableRevenue:h,taxRate:m,taxAmount:d,netRevenue:p})}),a}catch(e){throw console.error("Erro ao gerar relatrio de impostos:",e),new Error("Falha ao gerar relatrio de impostos")}},async getFinancialSummary(t){try{let e=await Kr.getAll();e=ii(e,t?.startDate,t?.endDate),e=ao(e,t?.company),e=e.filter(c=>c.status!=="cancelled");const r=e.reduce((c,h)=>c+h.totalRevenue,0),n=e.reduce((c,h)=>c+h.housekeeperValue+h.salesCommission,0),a=r-n,o=r>0?a/r*100:0;return{totalRevenue:r,totalExpenses:n,netProfit:a,profitMargin:o,numberOfSales:e.length,averageTicket:e.length>0?r/e.length:0,dailyRatesRevenue:e.reduce((c,h)=>c+h.netValue,0),conciergeRevenue:e.reduce((c,h)=>c+h.conciergeValue,0),suppliersCommissionRevenue:e.reduce((c,h)=>c+h.totalAdditionalSales,0)}}catch(e){throw console.error("Erro ao calcular resumo financeiro:",e),new Error("Falha ao gerar resumo financeiro")}},formatCurrency(t){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t)},formatPercentage(t){return`${t.toFixed(2)}%`}};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var c0={};c0.version="0.18.5";var YS=1252,jF=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],KS=function(t){jF.indexOf(t)!=-1&&(YS=t)};function RF(){KS(1252)}var _d=function(t){KS(t)};function DF(){_d(1200),RF()}var _m=function(e){return String.fromCharCode(e)},ow=function(e){return String.fromCharCode(e)},u0,go="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Ed(t){for(var e="",r=0,n=0,a=0,o=0,c=0,h=0,m=0,d=0;d<t.length;)r=t.charCodeAt(d++),o=r>>2,n=t.charCodeAt(d++),c=(r&3)<<4|n>>4,a=t.charCodeAt(d++),h=(n&15)<<2|a>>6,m=a&63,isNaN(n)?h=m=64:isNaN(a)&&(m=64),e+=go.charAt(o)+go.charAt(c)+go.charAt(h)+go.charAt(m);return e}function Ei(t){var e="",r=0,n=0,a=0,o=0,c=0,h=0,m=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var d=0;d<t.length;)o=go.indexOf(t.charAt(d++)),c=go.indexOf(t.charAt(d++)),r=o<<2|c>>4,e+=String.fromCharCode(r),h=go.indexOf(t.charAt(d++)),n=(c&15)<<4|h>>2,h!==64&&(e+=String.fromCharCode(n)),m=go.indexOf(t.charAt(d++)),a=(h&3)<<6|m,m!==64&&(e+=String.fromCharCode(a));return e}var It=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),Si=(function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,r){return r?new Buffer(e,r):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}})();function Ol(t){return It?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function lw(t){return It?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var ts=function(e){return It?Si(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)&255})};function Q0(t){if(typeof ArrayBuffer>"u")return ts(t);for(var e=new ArrayBuffer(t.length),r=new Uint8Array(e),n=0;n!=t.length;++n)r[n]=t.charCodeAt(n)&255;return e}function qd(t){if(Array.isArray(t))return t.map(function(n){return String.fromCharCode(n)}).join("");for(var e=[],r=0;r<t.length;++r)e[r]=String.fromCharCode(t[r]);return e.join("")}function IF(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}var un=It?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:Si(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,r=0;for(e=0;e<t.length;++e)r+=t[e].length;var n=new Uint8Array(r),a=0;for(e=0,r=0;e<t.length;r+=a,++e)if(a=t[e].length,t[e]instanceof Uint8Array)n.set(t[e],r);else{if(typeof t[e]=="string")throw"wtf";n.set(new Uint8Array(t[e]),r)}return n}return[].concat.apply([],t.map(function(o){return Array.isArray(o)?o:[].slice.call(o)}))};function kF(t){for(var e=[],r=0,n=t.length+250,a=Ol(t.length+255),o=0;o<t.length;++o){var c=t.charCodeAt(o);if(c<128)a[r++]=c;else if(c<2048)a[r++]=192|c>>6&31,a[r++]=128|c&63;else if(c>=55296&&c<57344){c=(c&1023)+64;var h=t.charCodeAt(++o)&1023;a[r++]=240|c>>8&7,a[r++]=128|c>>2&63,a[r++]=128|h>>6&15|(c&3)<<4,a[r++]=128|h&63}else a[r++]=224|c>>12&15,a[r++]=128|c>>6&63,a[r++]=128|c&63;r>n&&(e.push(a.slice(0,r)),r=0,a=Ol(65535),n=65530)}return e.push(a.slice(0,r)),un(e)}var rd=/\u0000/g,Em=/[\u0001-\u0006]/g;function Jc(t){for(var e="",r=t.length-1;r>=0;)e+=t.charAt(r--);return e}function ns(t,e){var r=""+t;return r.length>=e?r:mr("0",e-r.length)+r}function h1(t,e){var r=""+t;return r.length>=e?r:mr(" ",e-r.length)+r}function h0(t,e){var r=""+t;return r.length>=e?r:r+mr(" ",e-r.length)}function OF(t,e){var r=""+Math.round(t);return r.length>=e?r:mr("0",e-r.length)+r}function MF(t,e){var r=""+t;return r.length>=e?r:mr("0",e-r.length)+r}var cw=Math.pow(2,32);function Pc(t,e){if(t>cw||t<-cw)return OF(t,e);var r=Math.round(t);return MF(r,e)}function d0(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var uw=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],vv=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function PF(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var vr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},hw={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},FF={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function f0(t,e,r){for(var n=t<0?-1:1,a=t*n,o=0,c=1,h=0,m=1,d=0,p=0,x=Math.floor(a);d<e&&(x=Math.floor(a),h=x*c+o,p=x*d+m,!(a-x<5e-8));)a=1/(a-x),o=c,c=h,m=d,d=p;if(p>e&&(d>e?(p=m,h=o):(p=d,h=c)),!r)return[0,n*h,p];var y=Math.floor(n*h/p);return[y,n*h-y*p,p]}function Tm(t,e,r){if(t>2958465||t<0)return null;var n=t|0,a=Math.floor(86400*(t-n)),o=0,c=[],h={D:n,T:a,u:86400*(t-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(h.u)<1e-6&&(h.u=0),e&&e.date1904&&(n+=1462),h.u>.9999&&(h.u=0,++a==86400&&(h.T=a=0,++n,++h.D)),n===60)c=r?[1317,10,29]:[1900,2,29],o=3;else if(n===0)c=r?[1317,8,29]:[1900,1,0],o=6;else{n>60&&--n;var m=new Date(1900,0,1);m.setDate(m.getDate()+n-1),c=[m.getFullYear(),m.getMonth()+1,m.getDate()],o=m.getDay(),n<60&&(o=(o+6)%7),r&&(o=GF(m,c))}return h.y=c[0],h.m=c[1],h.d=c[2],h.S=a%60,a=Math.floor(a/60),h.M=a%60,a=Math.floor(a/60),h.H=a,h.q=o,h}var XS=new Date(1899,11,31,0,0,0),LF=XS.getTime(),VF=new Date(1900,2,1,0,0,0);function QS(t,e){var r=t.getTime();return e?r-=1461*24*60*60*1e3:t>=VF&&(r+=1440*60*1e3),(r-(LF+(t.getTimezoneOffset()-XS.getTimezoneOffset())*6e4))/(1440*60*1e3)}function d1(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function BF(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function UF(t){var e=t<0?12:11,r=d1(t.toFixed(12));return r.length<=e||(r=t.toPrecision(10),r.length<=e)?r:t.toExponential(5)}function zF(t){var e=d1(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function HF(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return e>=-4&&e<=-1?r=t.toPrecision(10+e):Math.abs(e)<=9?r=UF(t):e===10?r=t.toFixed(10).substr(0,12):r=zF(t),d1(BF(r.toUpperCase()))}function ax(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):HF(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return Io(14,QS(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function GF(t,e){e[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function qF(t,e,r,n){var a="",o=0,c=0,h=r.y,m,d=0;switch(t){case 98:h=r.y+543;case 121:switch(e.length){case 1:case 2:m=h%100,d=2;break;default:m=h%1e4,d=4;break}break;case 109:switch(e.length){case 1:case 2:m=r.m,d=e.length;break;case 3:return vv[r.m-1][1];case 5:return vv[r.m-1][0];default:return vv[r.m-1][2]}break;case 100:switch(e.length){case 1:case 2:m=r.d,d=e.length;break;case 3:return uw[r.q][0];default:return uw[r.q][1]}break;case 104:switch(e.length){case 1:case 2:m=1+(r.H+11)%12,d=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:m=r.H,d=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:m=r.M,d=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return r.u===0&&(e=="s"||e=="ss")?ns(r.S,e.length):(n>=2?c=n===3?1e3:100:c=n===1?10:1,o=Math.round(c*(r.S+r.u)),o>=60*c&&(o=0),e==="s"?o===0?"0":""+o/c:(a=ns(o,2+n),e==="ss"?a.substr(0,2):"."+a.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":m=r.D*24+r.H;break;case"[m]":case"[mm]":m=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":m=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+e}d=e.length===3?1:2;break;case 101:m=h,d=1;break}var p=d>0?ns(m,d):"";return p}function vo(t){var e=3;if(t.length<=e)return t;for(var r=t.length%e,n=t.substr(0,r);r!=t.length;r+=e)n+=(n.length>0?",":"")+t.substr(r,e);return n}var JS=/%/g;function $F(t,e,r){var n=e.replace(JS,""),a=e.length-n.length;return di(t,n,r*Math.pow(10,2*a))+mr("%",a)}function WF(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return di(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function ZS(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+ZS(t,-e);var a=t.indexOf(".");a===-1&&(a=t.indexOf("E"));var o=Math.floor(Math.log(e)*Math.LOG10E)%a;if(o<0&&(o+=a),r=(e/Math.pow(10,o)).toPrecision(n+1+(a+o)%a),r.indexOf("e")===-1){var c=Math.floor(Math.log(e)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(c-r.length+o):r+="E+"+(c-o);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(h,m,d,p){return m+d+p.substr(0,(a+o)%a)+"."+p.substr(o)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var eA=/# (\?+)( ?)\/( ?)(\d+)/;function YF(t,e,r){var n=parseInt(t[4],10),a=Math.round(e*n),o=Math.floor(a/n),c=a-o*n,h=n;return r+(o===0?"":""+o)+" "+(c===0?mr(" ",t[1].length+1+t[4].length):h1(c,t[1].length)+t[2]+"/"+t[3]+ns(h,t[4].length))}function KF(t,e,r){return r+(e===0?"":""+e)+mr(" ",t[1].length+2+t[4].length)}var tA=/^#*0*\.([0#]+)/,rA=/\).*[0#]/,nA=/\(###\) ###\\?-####/;function On(t){for(var e="",r,n=0;n!=t.length;++n)switch(r=t.charCodeAt(n)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(r)}return e}function dw(t,e){var r=Math.pow(10,e);return""+Math.round(t*r)/r}function fw(t,e){var r=t-Math.floor(t),n=Math.pow(10,e);return e<(""+Math.round(r*n)).length?0:Math.round(r*n)}function XF(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function QF(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function ka(t,e,r){if(t.charCodeAt(0)===40&&!e.match(rA)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?ka("n",n,r):"("+ka("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return WF(t,e,r);if(e.indexOf("%")!==-1)return $F(t,e,r);if(e.indexOf("E")!==-1)return ZS(e,r);if(e.charCodeAt(0)===36)return"$"+ka(t,e.substr(e.charAt(1)==" "?2:1),r);var a,o,c,h,m=Math.abs(r),d=r<0?"-":"";if(e.match(/^00+$/))return d+Pc(m,e.length);if(e.match(/^[#?]+$/))return a=Pc(r,0),a==="0"&&(a=""),a.length>e.length?a:On(e.substr(0,e.length-a.length))+a;if(o=e.match(eA))return YF(o,m,d);if(e.match(/^#+0+$/))return d+Pc(m,e.length-e.indexOf("0"));if(o=e.match(tA))return a=dw(r,o[1].length).replace(/^([^\.]+)$/,"$1."+On(o[1])).replace(/\.$/,"."+On(o[1])).replace(/\.(\d*)$/,function(w,T){return"."+T+mr("0",On(o[1]).length-T.length)}),e.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),o=e.match(/^(0*)\.(#*)$/))return d+dw(m,o[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,o[1].length?"0.":".");if(o=e.match(/^#{1,3},##0(\.?)$/))return d+vo(Pc(m,0));if(o=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+ka(t,e,-r):vo(""+(Math.floor(r)+XF(r,o[1].length)))+"."+ns(fw(r,o[1].length),o[1].length);if(o=e.match(/^#,#*,#0/))return ka(t,e.replace(/^#,#*,/,""),r);if(o=e.match(/^([0#]+)(\\?-([0#]+))+$/))return a=Jc(ka(t,e.replace(/[\\-]/g,""),r)),c=0,Jc(Jc(e.replace(/\\/g,"")).replace(/[0#]/g,function(w){return c<a.length?a.charAt(c++):w==="0"?"0":""}));if(e.match(nA))return a=ka(t,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var p="";if(o=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return c=Math.min(o[4].length,7),h=f0(m,Math.pow(10,c)-1,!1),a=""+d,p=di("n",o[1],h[1]),p.charAt(p.length-1)==" "&&(p=p.substr(0,p.length-1)+"0"),a+=p+o[2]+"/"+o[3],p=h0(h[2],c),p.length<o[4].length&&(p=On(o[4].substr(o[4].length-p.length))+p),a+=p,a;if(o=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return c=Math.min(Math.max(o[1].length,o[4].length),7),h=f0(m,Math.pow(10,c)-1,!0),d+(h[0]||(h[1]?"":"0"))+" "+(h[1]?h1(h[1],c)+o[2]+"/"+o[3]+h0(h[2],c):mr(" ",2*c+1+o[2].length+o[3].length));if(o=e.match(/^[#0?]+$/))return a=Pc(r,0),e.length<=a.length?a:On(e.substr(0,e.length-a.length))+a;if(o=e.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(o[2].length,10)).replace(/([^0])0+$/,"$1"),c=a.indexOf(".");var x=e.indexOf(".")-c,y=e.length-a.length-x;return On(e.substr(0,x)+a+e.substr(e.length-y))}if(o=e.match(/^00,000\.([#0]*0)$/))return c=fw(r,o[1].length),r<0?"-"+ka(t,e,-r):vo(QF(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(w){return"00,"+(w.length<3?ns(0,3-w.length):"")+w})+"."+ns(c,o[1].length);switch(e){case"###,##0.00":return ka(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var E=vo(Pc(m,0));return E!=="0"?d+E:"";case"###,###.00":return ka(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return ka(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function JF(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return di(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function ZF(t,e,r){var n=e.replace(JS,""),a=e.length-n.length;return di(t,n,r*Math.pow(10,2*a))+mr("%",a)}function aA(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+aA(t,-e);var a=t.indexOf(".");a===-1&&(a=t.indexOf("E"));var o=Math.floor(Math.log(e)*Math.LOG10E)%a;if(o<0&&(o+=a),r=(e/Math.pow(10,o)).toPrecision(n+1+(a+o)%a),!r.match(/[Ee]/)){var c=Math.floor(Math.log(e)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(c-r.length+o):r+="E+"+(c-o),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(h,m,d,p){return m+d+p.substr(0,(a+o)%a)+"."+p.substr(o)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function ws(t,e,r){if(t.charCodeAt(0)===40&&!e.match(rA)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?ws("n",n,r):"("+ws("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return JF(t,e,r);if(e.indexOf("%")!==-1)return ZF(t,e,r);if(e.indexOf("E")!==-1)return aA(e,r);if(e.charCodeAt(0)===36)return"$"+ws(t,e.substr(e.charAt(1)==" "?2:1),r);var a,o,c,h,m=Math.abs(r),d=r<0?"-":"";if(e.match(/^00+$/))return d+ns(m,e.length);if(e.match(/^[#?]+$/))return a=""+r,r===0&&(a=""),a.length>e.length?a:On(e.substr(0,e.length-a.length))+a;if(o=e.match(eA))return KF(o,m,d);if(e.match(/^#+0+$/))return d+ns(m,e.length-e.indexOf("0"));if(o=e.match(tA))return a=(""+r).replace(/^([^\.]+)$/,"$1."+On(o[1])).replace(/\.$/,"."+On(o[1])),a=a.replace(/\.(\d*)$/,function(w,T){return"."+T+mr("0",On(o[1]).length-T.length)}),e.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),o=e.match(/^(0*)\.(#*)$/))return d+(""+m).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,o[1].length?"0.":".");if(o=e.match(/^#{1,3},##0(\.?)$/))return d+vo(""+m);if(o=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+ws(t,e,-r):vo(""+r)+"."+mr("0",o[1].length);if(o=e.match(/^#,#*,#0/))return ws(t,e.replace(/^#,#*,/,""),r);if(o=e.match(/^([0#]+)(\\?-([0#]+))+$/))return a=Jc(ws(t,e.replace(/[\\-]/g,""),r)),c=0,Jc(Jc(e.replace(/\\/g,"")).replace(/[0#]/g,function(w){return c<a.length?a.charAt(c++):w==="0"?"0":""}));if(e.match(nA))return a=ws(t,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var p="";if(o=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return c=Math.min(o[4].length,7),h=f0(m,Math.pow(10,c)-1,!1),a=""+d,p=di("n",o[1],h[1]),p.charAt(p.length-1)==" "&&(p=p.substr(0,p.length-1)+"0"),a+=p+o[2]+"/"+o[3],p=h0(h[2],c),p.length<o[4].length&&(p=On(o[4].substr(o[4].length-p.length))+p),a+=p,a;if(o=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return c=Math.min(Math.max(o[1].length,o[4].length),7),h=f0(m,Math.pow(10,c)-1,!0),d+(h[0]||(h[1]?"":"0"))+" "+(h[1]?h1(h[1],c)+o[2]+"/"+o[3]+h0(h[2],c):mr(" ",2*c+1+o[2].length+o[3].length));if(o=e.match(/^[#0?]+$/))return a=""+r,e.length<=a.length?a:On(e.substr(0,e.length-a.length))+a;if(o=e.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(o[2].length,10)).replace(/([^0])0+$/,"$1"),c=a.indexOf(".");var x=e.indexOf(".")-c,y=e.length-a.length-x;return On(e.substr(0,x)+a+e.substr(e.length-y))}if(o=e.match(/^00,000\.([#0]*0)$/))return r<0?"-"+ws(t,e,-r):vo(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(w){return"00,"+(w.length<3?ns(0,3-w.length):"")+w})+"."+ns(0,o[1].length);switch(e){case"###,###":case"##,###":case"#,###":var E=vo(""+m);return E!=="0"?d+E:"";default:if(e.match(/\.[0#?]*$/))return ws(t,e.slice(0,e.lastIndexOf(".")),r)+On(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function di(t,e,r){return(r|0)===r?ws(t,e,r):ka(t,e,r)}function eL(t){for(var e=[],r=!1,n=0,a=0;n<t.length;++n)switch(t.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:e[e.length]=t.substr(a,n-a),a=n+1}if(e[e.length]=t.substr(a),r===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var sA=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function iA(t){for(var e=0,r="",n="";e<t.length;)switch(r=t.charAt(e)){case"G":d0(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(n=r;t.charAt(e++)!=="]"&&e<t.length;)n+=t.charAt(e);if(n.match(sA))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++e))>-1||r=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===r;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function tL(t,e,r,n){for(var a=[],o="",c=0,h="",m="t",d,p,x,y="H";c<t.length;)switch(h=t.charAt(c)){case"G":if(!d0(t,c))throw new Error("unrecognized character "+h+" in "+t);a[a.length]={t:"G",v:"General"},c+=7;break;case'"':for(o="";(x=t.charCodeAt(++c))!==34&&c<t.length;)o+=String.fromCharCode(x);a[a.length]={t:"t",v:o},++c;break;case"\\":var E=t.charAt(++c),w=E==="("||E===")"?E:"t";a[a.length]={t:w,v:E},++c;break;case"_":a[a.length]={t:"t",v:" "},c+=2;break;case"@":a[a.length]={t:"T",v:e},++c;break;case"B":case"b":if(t.charAt(c+1)==="1"||t.charAt(c+1)==="2"){if(d==null&&(d=Tm(e,r,t.charAt(c+1)==="2"),d==null))return"";a[a.length]={t:"X",v:t.substr(c,2)},m=h,c+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":h=h.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||d==null&&(d=Tm(e,r),d==null))return"";for(o=h;++c<t.length&&t.charAt(c).toLowerCase()===h;)o+=h;h==="m"&&m.toLowerCase()==="h"&&(h="M"),h==="h"&&(h=y),a[a.length]={t:h,v:o},m=h;break;case"A":case"a":case"":var T={t:h,v:h};if(d==null&&(d=Tm(e,r)),t.substr(c,3).toUpperCase()==="A/P"?(d!=null&&(T.v=d.H>=12?"P":"A"),T.t="T",y="h",c+=3):t.substr(c,5).toUpperCase()==="AM/PM"?(d!=null&&(T.v=d.H>=12?"PM":"AM"),T.t="T",c+=5,y="h"):t.substr(c,5).toUpperCase()==="/"?(d!=null&&(T.v=d.H>=12?"":""),T.t="T",c+=5,y="h"):(T.t="t",++c),d==null&&T.t==="T")return"";a[a.length]=T,m=h;break;case"[":for(o=h;t.charAt(c++)!=="]"&&c<t.length;)o+=t.charAt(c);if(o.slice(-1)!=="]")throw'unterminated "[" block: |'+o+"|";if(o.match(sA)){if(d==null&&(d=Tm(e,r),d==null))return"";a[a.length]={t:"Z",v:o.toLowerCase()},m=o.charAt(1)}else o.indexOf("$")>-1&&(o=(o.match(/\$([^-\[\]]*)/)||[])[1]||"$",iA(t)||(a[a.length]={t:"t",v:o}));break;case".":if(d!=null){for(o=h;++c<t.length&&(h=t.charAt(c))==="0";)o+=h;a[a.length]={t:"s",v:o};break}case"0":case"#":for(o=h;++c<t.length&&"0#?.,E+-%".indexOf(h=t.charAt(c))>-1;)o+=h;a[a.length]={t:"n",v:o};break;case"?":for(o=h;t.charAt(++c)===h;)o+=h;a[a.length]={t:h,v:o},m=h;break;case"*":++c,(t.charAt(c)==" "||t.charAt(c)=="*")&&++c;break;case"(":case")":a[a.length]={t:n===1?"t":h,v:h},++c;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(o=h;c<t.length&&"0123456789".indexOf(t.charAt(++c))>-1;)o+=t.charAt(c);a[a.length]={t:"D",v:o};break;case" ":a[a.length]={t:h,v:h},++c;break;case"$":a[a.length]={t:"t",v:"$"},++c;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(h)===-1)throw new Error("unrecognized character "+h+" in "+t);a[a.length]={t:"t",v:h},++c;break}var b=0,A=0,M;for(c=a.length-1,m="t";c>=0;--c)switch(a[c].t){case"h":case"H":a[c].t=y,m="h",b<1&&(b=1);break;case"s":(M=a[c].v.match(/\.0+$/))&&(A=Math.max(A,M[0].length-1)),b<3&&(b=3);case"d":case"y":case"M":case"e":m=a[c].t;break;case"m":m==="s"&&(a[c].t="M",b<2&&(b=2));break;case"X":break;case"Z":b<1&&a[c].v.match(/[Hh]/)&&(b=1),b<2&&a[c].v.match(/[Mm]/)&&(b=2),b<3&&a[c].v.match(/[Ss]/)&&(b=3)}switch(b){case 0:break;case 1:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M),d.M>=60&&(d.M=0,++d.H);break;case 2:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M);break}var V="",H;for(c=0;c<a.length;++c)switch(a[c].t){case"t":case"T":case" ":case"D":break;case"X":a[c].v="",a[c].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[c].v=qF(a[c].t.charCodeAt(0),a[c].v,d,A),a[c].t="t";break;case"n":case"?":for(H=c+1;a[H]!=null&&((h=a[H].t)==="?"||h==="D"||(h===" "||h==="t")&&a[H+1]!=null&&(a[H+1].t==="?"||a[H+1].t==="t"&&a[H+1].v==="/")||a[c].t==="("&&(h===" "||h==="n"||h===")")||h==="t"&&(a[H].v==="/"||a[H].v===" "&&a[H+1]!=null&&a[H+1].t=="?"));)a[c].v+=a[H].v,a[H]={v:"",t:";"},++H;V+=a[c].v,c=H-1;break;case"G":a[c].t="t",a[c].v=ax(e,r);break}var re="",q,j;if(V.length>0){V.charCodeAt(0)==40?(q=e<0&&V.charCodeAt(0)===45?-e:e,j=di("n",V,q)):(q=e<0&&n>1?-e:e,j=di("n",V,q),q<0&&a[0]&&a[0].t=="t"&&(j=j.substr(1),a[0].v="-"+a[0].v)),H=j.length-1;var D=a.length;for(c=0;c<a.length;++c)if(a[c]!=null&&a[c].t!="t"&&a[c].v.indexOf(".")>-1){D=c;break}var S=a.length;if(D===a.length&&j.indexOf("E")===-1){for(c=a.length-1;c>=0;--c)a[c]==null||"n?".indexOf(a[c].t)===-1||(H>=a[c].v.length-1?(H-=a[c].v.length,a[c].v=j.substr(H+1,a[c].v.length)):H<0?a[c].v="":(a[c].v=j.substr(0,H+1),H=-1),a[c].t="t",S=c);H>=0&&S<a.length&&(a[S].v=j.substr(0,H+1)+a[S].v)}else if(D!==a.length&&j.indexOf("E")===-1){for(H=j.indexOf(".")-1,c=D;c>=0;--c)if(!(a[c]==null||"n?".indexOf(a[c].t)===-1)){for(p=a[c].v.indexOf(".")>-1&&c===D?a[c].v.indexOf(".")-1:a[c].v.length-1,re=a[c].v.substr(p+1);p>=0;--p)H>=0&&(a[c].v.charAt(p)==="0"||a[c].v.charAt(p)==="#")&&(re=j.charAt(H--)+re);a[c].v=re,a[c].t="t",S=c}for(H>=0&&S<a.length&&(a[S].v=j.substr(0,H+1)+a[S].v),H=j.indexOf(".")+1,c=D;c<a.length;++c)if(!(a[c]==null||"n?(".indexOf(a[c].t)===-1&&c!==D)){for(p=a[c].v.indexOf(".")>-1&&c===D?a[c].v.indexOf(".")+1:0,re=a[c].v.substr(0,p);p<a[c].v.length;++p)H<j.length&&(re+=j.charAt(H++));a[c].v=re,a[c].t="t",S=c}}}for(c=0;c<a.length;++c)a[c]!=null&&"n?".indexOf(a[c].t)>-1&&(q=n>1&&e<0&&c>0&&a[c-1].v==="-"?-e:e,a[c].v=di(a[c].t,a[c].v,q),a[c].t="t");var P="";for(c=0;c!==a.length;++c)a[c]!=null&&(P+=a[c].v);return P}var mw=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function pw(t,e){if(e==null)return!1;var r=parseFloat(e[2]);switch(e[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function rL(t,e){var r=eL(t),n=r.length,a=r[n-1].indexOf("@");if(n<4&&a>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof e!="number")return[4,r.length===4||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var o=e>0?r[0]:e<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,o];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var c=r[0].match(mw),h=r[1].match(mw);return pw(e,c)?[n,r[0]]:pw(e,h)?[n,r[1]]:[n,r[c!=null&&h!=null?2:1]]}return[n,o]}function Io(t,e,r){r==null&&(r={});var n="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?n=r.dateNF:n=t;break;case"number":t==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:vr)[t],n==null&&(n=r.table&&r.table[hw[t]]||vr[hw[t]]),n==null&&(n=FF[t]||"General");break}if(d0(n,0))return ax(e,r);e instanceof Date&&(e=QS(e,r.date1904));var a=rL(n,e);if(d0(a[1]))return ax(e,r);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return tL(a[1],e,r,a[0])}function oA(t,e){if(typeof e!="number"){e=+e||-1;for(var r=0;r<392;++r){if(vr[r]==null){e<0&&(e=r);continue}if(vr[r]==t){e=r;break}}e<0&&(e=391)}return vr[e]=t,e}function J0(t){for(var e=0;e!=392;++e)t[e]!==void 0&&oA(t[e],e)}function Z0(){vr=PF()}var lA=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function nL(t){var e=typeof t=="number"?vr[t]:t;return e=e.replace(lA,"(\\d+)"),new RegExp("^"+e+"$")}function aL(t,e,r){var n=-1,a=-1,o=-1,c=-1,h=-1,m=-1;(e.match(lA)||[]).forEach(function(x,y){var E=parseInt(r[y+1],10);switch(x.toLowerCase().charAt(0)){case"y":n=E;break;case"d":o=E;break;case"h":c=E;break;case"s":m=E;break;case"m":c>=0?h=E:a=E;break}}),m>=0&&h==-1&&a>=0&&(h=a,a=-1);var d=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(o>=1?o:1)).slice(-2);d.length==7&&(d="0"+d),d.length==8&&(d="20"+d);var p=("00"+(c>=0?c:0)).slice(-2)+":"+("00"+(h>=0?h:0)).slice(-2)+":"+("00"+(m>=0?m:0)).slice(-2);return c==-1&&h==-1&&m==-1?d:n==-1&&a==-1&&o==-1?p:d+"T"+p}var sL=(function(){var t={};t.version="1.2.0";function e(){for(var j=0,D=new Array(256),S=0;S!=256;++S)j=S,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,D[S]=j;return typeof Int32Array<"u"?new Int32Array(D):D}var r=e();function n(j){var D=0,S=0,P=0,O=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(P=0;P!=256;++P)O[P]=j[P];for(P=0;P!=256;++P)for(S=j[P],D=256+P;D<4096;D+=256)S=O[D]=S>>>8^j[S&255];var C=[];for(P=1;P!=16;++P)C[P-1]=typeof Int32Array<"u"?O.subarray(P*256,P*256+256):O.slice(P*256,P*256+256);return C}var a=n(r),o=a[0],c=a[1],h=a[2],m=a[3],d=a[4],p=a[5],x=a[6],y=a[7],E=a[8],w=a[9],T=a[10],b=a[11],A=a[12],M=a[13],V=a[14];function H(j,D){for(var S=D^-1,P=0,O=j.length;P<O;)S=S>>>8^r[(S^j.charCodeAt(P++))&255];return~S}function re(j,D){for(var S=D^-1,P=j.length-15,O=0;O<P;)S=V[j[O++]^S&255]^M[j[O++]^S>>8&255]^A[j[O++]^S>>16&255]^b[j[O++]^S>>>24]^T[j[O++]]^w[j[O++]]^E[j[O++]]^y[j[O++]]^x[j[O++]]^p[j[O++]]^d[j[O++]]^m[j[O++]]^h[j[O++]]^c[j[O++]]^o[j[O++]]^r[j[O++]];for(P+=15;O<P;)S=S>>>8^r[(S^j[O++])&255];return~S}function q(j,D){for(var S=D^-1,P=0,O=j.length,C=0,k=0;P<O;)C=j.charCodeAt(P++),C<128?S=S>>>8^r[(S^C)&255]:C<2048?(S=S>>>8^r[(S^(192|C>>6&31))&255],S=S>>>8^r[(S^(128|C&63))&255]):C>=55296&&C<57344?(C=(C&1023)+64,k=j.charCodeAt(P++)&1023,S=S>>>8^r[(S^(240|C>>8&7))&255],S=S>>>8^r[(S^(128|C>>2&63))&255],S=S>>>8^r[(S^(128|k>>6&15|(C&3)<<4))&255],S=S>>>8^r[(S^(128|k&63))&255]):(S=S>>>8^r[(S^(224|C>>12&15))&255],S=S>>>8^r[(S^(128|C>>6&63))&255],S=S>>>8^r[(S^(128|C&63))&255]);return~S}return t.table=r,t.bstr=H,t.buf=re,t.str=q,t})(),Kt=(function(){var e={};e.version="1.2.1";function r(F,W){for(var z=F.split("/"),G=W.split("/"),K=0,X=0,ce=Math.min(z.length,G.length);K<ce;++K){if(X=z[K].length-G[K].length)return X;if(z[K]!=G[K])return z[K]<G[K]?-1:1}return z.length-G.length}function n(F){if(F.charAt(F.length-1)=="/")return F.slice(0,-1).indexOf("/")===-1?F:n(F.slice(0,-1));var W=F.lastIndexOf("/");return W===-1?F:F.slice(0,W+1)}function a(F){if(F.charAt(F.length-1)=="/")return a(F.slice(0,-1));var W=F.lastIndexOf("/");return W===-1?F:F.slice(W+1)}function o(F,W){typeof W=="string"&&(W=new Date(W));var z=W.getHours();z=z<<6|W.getMinutes(),z=z<<5|W.getSeconds()>>>1,F.write_shift(2,z);var G=W.getFullYear()-1980;G=G<<4|W.getMonth()+1,G=G<<5|W.getDate(),F.write_shift(2,G)}function c(F){var W=F.read_shift(2)&65535,z=F.read_shift(2)&65535,G=new Date,K=z&31;z>>>=5;var X=z&15;z>>>=4,G.setMilliseconds(0),G.setFullYear(z+1980),G.setMonth(X-1),G.setDate(K);var ce=W&31;W>>>=5;var xe=W&63;return W>>>=6,G.setHours(W),G.setMinutes(xe),G.setSeconds(ce<<1),G}function h(F){ma(F,0);for(var W={},z=0;F.l<=F.length-4;){var G=F.read_shift(2),K=F.read_shift(2),X=F.l+K,ce={};switch(G){case 21589:z=F.read_shift(1),z&1&&(ce.mtime=F.read_shift(4)),K>5&&(z&2&&(ce.atime=F.read_shift(4)),z&4&&(ce.ctime=F.read_shift(4))),ce.mtime&&(ce.mt=new Date(ce.mtime*1e3));break}F.l=X,W[G]=ce}return W}var m;function d(){return m||(m={})}function p(F,W){if(F[0]==80&&F[1]==75)return Ba(F,W);if((F[0]|32)==109&&(F[1]|32)==105)return Du(F,W);if(F.length<512)throw new Error("CFB file size "+F.length+" < 512");var z=3,G=512,K=0,X=0,ce=0,xe=0,ie=0,de=[],fe=F.slice(0,512);ma(fe,0);var Ae=x(fe);switch(z=Ae[0],z){case 3:G=512;break;case 4:G=4096;break;case 0:if(Ae[1]==0)return Ba(F,W);default:throw new Error("Major Version: Expected 3 or 4 saw "+z)}G!==512&&(fe=F.slice(0,G),ma(fe,28));var Ie=F.slice(0,G);y(fe,z);var Ge=fe.read_shift(4,"i");if(z===3&&Ge!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Ge);fe.l+=4,ce=fe.read_shift(4,"i"),fe.l+=4,fe.chk("00100000","Mini Stream Cutoff Size: "),xe=fe.read_shift(4,"i"),K=fe.read_shift(4,"i"),ie=fe.read_shift(4,"i"),X=fe.read_shift(4,"i");for(var je=-1,Ue=0;Ue<109&&(je=fe.read_shift(4,"i"),!(je<0));++Ue)de[Ue]=je;var ot=E(F,G);b(ie,X,ot,G,de);var jt=M(ot,ce,de,G);jt[ce].name="!Directory",K>0&&xe!==k&&(jt[xe].name="!MiniFAT"),jt[de[0]].name="!FAT",jt.fat_addrs=de,jt.ssz=G;var Rt={},Mt=[],na=[],Ta=[];V(ce,jt,ot,Mt,K,Rt,na,xe),w(na,Ta,Mt),Mt.shift();var Cn={FileIndex:na,FullPaths:Ta};return W&&W.raw&&(Cn.raw={header:Ie,sectors:ot}),Cn}function x(F){if(F[F.l]==80&&F[F.l+1]==75)return[0,0];F.chk(Ce,"Header Signature: "),F.l+=16;var W=F.read_shift(2,"u");return[F.read_shift(2,"u"),W]}function y(F,W){var z=9;switch(F.l+=2,z=F.read_shift(2)){case 9:if(W!=3)throw new Error("Sector Shift: Expected 9 saw "+z);break;case 12:if(W!=4)throw new Error("Sector Shift: Expected 12 saw "+z);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+z)}F.chk("0600","Mini Sector Shift: "),F.chk("000000000000","Reserved: ")}function E(F,W){for(var z=Math.ceil(F.length/W)-1,G=[],K=1;K<z;++K)G[K-1]=F.slice(K*W,(K+1)*W);return G[z-1]=F.slice(z*W),G}function w(F,W,z){for(var G=0,K=0,X=0,ce=0,xe=0,ie=z.length,de=[],fe=[];G<ie;++G)de[G]=fe[G]=G,W[G]=z[G];for(;xe<fe.length;++xe)G=fe[xe],K=F[G].L,X=F[G].R,ce=F[G].C,de[G]===G&&(K!==-1&&de[K]!==K&&(de[G]=de[K]),X!==-1&&de[X]!==X&&(de[G]=de[X])),ce!==-1&&(de[ce]=G),K!==-1&&G!=de[G]&&(de[K]=de[G],fe.lastIndexOf(K)<xe&&fe.push(K)),X!==-1&&G!=de[G]&&(de[X]=de[G],fe.lastIndexOf(X)<xe&&fe.push(X));for(G=1;G<ie;++G)de[G]===G&&(X!==-1&&de[X]!==X?de[G]=de[X]:K!==-1&&de[K]!==K&&(de[G]=de[K]));for(G=1;G<ie;++G)if(F[G].type!==0){if(xe=G,xe!=de[xe])do xe=de[xe],W[G]=W[xe]+"/"+W[G];while(xe!==0&&de[xe]!==-1&&xe!=de[xe]);de[G]=-1}for(W[0]+="/",G=1;G<ie;++G)F[G].type!==2&&(W[G]+="/")}function T(F,W,z){for(var G=F.start,K=F.size,X=[],ce=G;z&&K>0&&ce>=0;)X.push(W.slice(ce*C,ce*C+C)),K-=C,ce=_l(z,ce*4);return X.length===0?ye(0):un(X).slice(0,F.size)}function b(F,W,z,G,K){var X=k;if(F===k){if(W!==0)throw new Error("DIFAT chain shorter than expected")}else if(F!==-1){var ce=z[F],xe=(G>>>2)-1;if(!ce)return;for(var ie=0;ie<xe&&(X=_l(ce,ie*4))!==k;++ie)K.push(X);b(_l(ce,G-4),W-1,z,G,K)}}function A(F,W,z,G,K){var X=[],ce=[];K||(K=[]);var xe=G-1,ie=0,de=0;for(ie=W;ie>=0;){K[ie]=!0,X[X.length]=ie,ce.push(F[ie]);var fe=z[Math.floor(ie*4/G)];if(de=ie*4&xe,G<4+de)throw new Error("FAT boundary crossed: "+ie+" 4 "+G);if(!F[fe])break;ie=_l(F[fe],de)}return{nodes:X,data:ww([ce])}}function M(F,W,z,G){var K=F.length,X=[],ce=[],xe=[],ie=[],de=G-1,fe=0,Ae=0,Ie=0,Ge=0;for(fe=0;fe<K;++fe)if(xe=[],Ie=fe+W,Ie>=K&&(Ie-=K),!ce[Ie]){ie=[];var je=[];for(Ae=Ie;Ae>=0;){je[Ae]=!0,ce[Ae]=!0,xe[xe.length]=Ae,ie.push(F[Ae]);var Ue=z[Math.floor(Ae*4/G)];if(Ge=Ae*4&de,G<4+Ge)throw new Error("FAT boundary crossed: "+Ae+" 4 "+G);if(!F[Ue]||(Ae=_l(F[Ue],Ge),je[Ae]))break}X[Ie]={nodes:xe,data:ww([ie])}}return X}function V(F,W,z,G,K,X,ce,xe){for(var ie=0,de=G.length?2:0,fe=W[F].data,Ae=0,Ie=0,Ge;Ae<fe.length;Ae+=128){var je=fe.slice(Ae,Ae+128);ma(je,64),Ie=je.read_shift(2),Ge=v1(je,0,Ie-de),G.push(Ge);var Ue={name:Ge,type:je.read_shift(1),color:je.read_shift(1),L:je.read_shift(4,"i"),R:je.read_shift(4,"i"),C:je.read_shift(4,"i"),clsid:je.read_shift(16),state:je.read_shift(4,"i"),start:0,size:0},ot=je.read_shift(2)+je.read_shift(2)+je.read_shift(2)+je.read_shift(2);ot!==0&&(Ue.ct=H(je,je.l-8));var jt=je.read_shift(2)+je.read_shift(2)+je.read_shift(2)+je.read_shift(2);jt!==0&&(Ue.mt=H(je,je.l-8)),Ue.start=je.read_shift(4,"i"),Ue.size=je.read_shift(4,"i"),Ue.size<0&&Ue.start<0&&(Ue.size=Ue.type=0,Ue.start=k,Ue.name=""),Ue.type===5?(ie=Ue.start,K>0&&ie!==k&&(W[ie].name="!StreamData")):Ue.size>=4096?(Ue.storage="fat",W[Ue.start]===void 0&&(W[Ue.start]=A(z,Ue.start,W.fat_addrs,W.ssz)),W[Ue.start].name=Ue.name,Ue.content=W[Ue.start].data.slice(0,Ue.size)):(Ue.storage="minifat",Ue.size<0?Ue.size=0:ie!==k&&Ue.start!==k&&W[ie]&&(Ue.content=T(Ue,W[ie].data,(W[xe]||{}).data))),Ue.content&&ma(Ue.content,0),X[Ge]=Ue,ce.push(Ue)}}function H(F,W){return new Date((ga(F,W+4)/1e7*Math.pow(2,32)+ga(F,W)/1e7-11644473600)*1e3)}function re(F,W){return d(),p(m.readFileSync(F),W)}function q(F,W){var z=W&&W.type;switch(z||It&&Buffer.isBuffer(F)&&(z="buffer"),z||"base64"){case"file":return re(F,W);case"base64":return p(ts(Ei(F)),W);case"binary":return p(ts(F),W)}return p(F,W)}function j(F,W){var z=W||{},G=z.root||"Root Entry";if(F.FullPaths||(F.FullPaths=[]),F.FileIndex||(F.FileIndex=[]),F.FullPaths.length!==F.FileIndex.length)throw new Error("inconsistent CFB structure");F.FullPaths.length===0&&(F.FullPaths[0]=G+"/",F.FileIndex[0]={name:G,type:5}),z.CLSID&&(F.FileIndex[0].clsid=z.CLSID),D(F)}function D(F){var W="Sh33tJ5";if(!Kt.find(F,"/"+W)){var z=ye(4);z[0]=55,z[1]=z[3]=50,z[2]=54,F.FileIndex.push({name:W,type:2,content:z,size:4,L:69,R:69,C:69}),F.FullPaths.push(F.FullPaths[0]+W),S(F)}}function S(F,W){j(F);for(var z=!1,G=!1,K=F.FullPaths.length-1;K>=0;--K){var X=F.FileIndex[K];switch(X.type){case 0:G?z=!0:(F.FileIndex.pop(),F.FullPaths.pop());break;case 1:case 2:case 5:G=!0,isNaN(X.R*X.L*X.C)&&(z=!0),X.R>-1&&X.L>-1&&X.R==X.L&&(z=!0);break;default:z=!0;break}}if(!(!z&&!W)){var ce=new Date(1987,1,19),xe=0,ie=Object.create?Object.create(null):{},de=[];for(K=0;K<F.FullPaths.length;++K)ie[F.FullPaths[K]]=!0,F.FileIndex[K].type!==0&&de.push([F.FullPaths[K],F.FileIndex[K]]);for(K=0;K<de.length;++K){var fe=n(de[K][0]);G=ie[fe],G||(de.push([fe,{name:a(fe).replace("/",""),type:1,clsid:ge,ct:ce,mt:ce,content:null}]),ie[fe]=!0)}for(de.sort(function(Ge,je){return r(Ge[0],je[0])}),F.FullPaths=[],F.FileIndex=[],K=0;K<de.length;++K)F.FullPaths[K]=de[K][0],F.FileIndex[K]=de[K][1];for(K=0;K<de.length;++K){var Ae=F.FileIndex[K],Ie=F.FullPaths[K];if(Ae.name=a(Ie).replace("/",""),Ae.L=Ae.R=Ae.C=-(Ae.color=1),Ae.size=Ae.content?Ae.content.length:0,Ae.start=0,Ae.clsid=Ae.clsid||ge,K===0)Ae.C=de.length>1?1:-1,Ae.size=0,Ae.type=5;else if(Ie.slice(-1)=="/"){for(xe=K+1;xe<de.length&&n(F.FullPaths[xe])!=Ie;++xe);for(Ae.C=xe>=de.length?-1:xe,xe=K+1;xe<de.length&&n(F.FullPaths[xe])!=n(Ie);++xe);Ae.R=xe>=de.length?-1:xe,Ae.type=1}else n(F.FullPaths[K+1]||"")==n(Ie)&&(Ae.R=K+1),Ae.type=2}}}function P(F,W){var z=W||{};if(z.fileType=="mad")return Ea(F,z);switch(S(F),z.fileType){case"zip":return or(F,z)}var G=(function(Ge){for(var je=0,Ue=0,ot=0;ot<Ge.FileIndex.length;++ot){var jt=Ge.FileIndex[ot];if(jt.content){var Rt=jt.content.length;Rt>0&&(Rt<4096?je+=Rt+63>>6:Ue+=Rt+511>>9)}}for(var Mt=Ge.FullPaths.length+3>>2,na=je+7>>3,Ta=je+127>>7,Cn=na+Ue+Mt+Ta,Gn=Cn+127>>7,ps=Gn<=109?0:Math.ceil((Gn-109)/127);Cn+Gn+ps+127>>7>Gn;)ps=++Gn<=109?0:Math.ceil((Gn-109)/127);var aa=[1,ps,Gn,Ta,Mt,Ue,je,0];return Ge.FileIndex[0].size=je<<6,aa[7]=(Ge.FileIndex[0].start=aa[0]+aa[1]+aa[2]+aa[3]+aa[4]+aa[5])+(aa[6]+7>>3),aa})(F),K=ye(G[7]<<9),X=0,ce=0;{for(X=0;X<8;++X)K.write_shift(1,ze[X]);for(X=0;X<8;++X)K.write_shift(2,0);for(K.write_shift(2,62),K.write_shift(2,3),K.write_shift(2,65534),K.write_shift(2,9),K.write_shift(2,6),X=0;X<3;++X)K.write_shift(2,0);for(K.write_shift(4,0),K.write_shift(4,G[2]),K.write_shift(4,G[0]+G[1]+G[2]+G[3]-1),K.write_shift(4,0),K.write_shift(4,4096),K.write_shift(4,G[3]?G[0]+G[1]+G[2]-1:k),K.write_shift(4,G[3]),K.write_shift(-4,G[1]?G[0]-1:k),K.write_shift(4,G[1]),X=0;X<109;++X)K.write_shift(-4,X<G[2]?G[1]+X:-1)}if(G[1])for(ce=0;ce<G[1];++ce){for(;X<236+ce*127;++X)K.write_shift(-4,X<G[2]?G[1]+X:-1);K.write_shift(-4,ce===G[1]-1?k:ce+1)}var xe=function(Ge){for(ce+=Ge;X<ce-1;++X)K.write_shift(-4,X+1);Ge&&(++X,K.write_shift(-4,k))};for(ce=X=0,ce+=G[1];X<ce;++X)K.write_shift(-4,De.DIFSECT);for(ce+=G[2];X<ce;++X)K.write_shift(-4,De.FATSECT);xe(G[3]),xe(G[4]);for(var ie=0,de=0,fe=F.FileIndex[0];ie<F.FileIndex.length;++ie)fe=F.FileIndex[ie],fe.content&&(de=fe.content.length,!(de<4096)&&(fe.start=ce,xe(de+511>>9)));for(xe(G[6]+7>>3);K.l&511;)K.write_shift(-4,De.ENDOFCHAIN);for(ce=X=0,ie=0;ie<F.FileIndex.length;++ie)fe=F.FileIndex[ie],fe.content&&(de=fe.content.length,!(!de||de>=4096)&&(fe.start=ce,xe(de+63>>6)));for(;K.l&511;)K.write_shift(-4,De.ENDOFCHAIN);for(X=0;X<G[4]<<2;++X){var Ae=F.FullPaths[X];if(!Ae||Ae.length===0){for(ie=0;ie<17;++ie)K.write_shift(4,0);for(ie=0;ie<3;++ie)K.write_shift(4,-1);for(ie=0;ie<12;++ie)K.write_shift(4,0);continue}fe=F.FileIndex[X],X===0&&(fe.start=fe.size?fe.start-1:k);var Ie=X===0&&z.root||fe.name;if(de=2*(Ie.length+1),K.write_shift(64,Ie,"utf16le"),K.write_shift(2,de),K.write_shift(1,fe.type),K.write_shift(1,fe.color),K.write_shift(-4,fe.L),K.write_shift(-4,fe.R),K.write_shift(-4,fe.C),fe.clsid)K.write_shift(16,fe.clsid,"hex");else for(ie=0;ie<4;++ie)K.write_shift(4,0);K.write_shift(4,fe.state||0),K.write_shift(4,0),K.write_shift(4,0),K.write_shift(4,0),K.write_shift(4,0),K.write_shift(4,fe.start),K.write_shift(4,fe.size),K.write_shift(4,0)}for(X=1;X<F.FileIndex.length;++X)if(fe=F.FileIndex[X],fe.size>=4096)if(K.l=fe.start+1<<9,It&&Buffer.isBuffer(fe.content))fe.content.copy(K,K.l,0,fe.size),K.l+=fe.size+511&-512;else{for(ie=0;ie<fe.size;++ie)K.write_shift(1,fe.content[ie]);for(;ie&511;++ie)K.write_shift(1,0)}for(X=1;X<F.FileIndex.length;++X)if(fe=F.FileIndex[X],fe.size>0&&fe.size<4096)if(It&&Buffer.isBuffer(fe.content))fe.content.copy(K,K.l,0,fe.size),K.l+=fe.size+63&-64;else{for(ie=0;ie<fe.size;++ie)K.write_shift(1,fe.content[ie]);for(;ie&63;++ie)K.write_shift(1,0)}if(It)K.l=K.length;else for(;K.l<K.length;)K.write_shift(1,0);return K}function O(F,W){var z=F.FullPaths.map(function(ie){return ie.toUpperCase()}),G=z.map(function(ie){var de=ie.split("/");return de[de.length-(ie.slice(-1)=="/"?2:1)]}),K=!1;W.charCodeAt(0)===47?(K=!0,W=z[0].slice(0,-1)+W):K=W.indexOf("/")!==-1;var X=W.toUpperCase(),ce=K===!0?z.indexOf(X):G.indexOf(X);if(ce!==-1)return F.FileIndex[ce];var xe=!X.match(Em);for(X=X.replace(rd,""),xe&&(X=X.replace(Em,"!")),ce=0;ce<z.length;++ce)if((xe?z[ce].replace(Em,"!"):z[ce]).replace(rd,"")==X||(xe?G[ce].replace(Em,"!"):G[ce]).replace(rd,"")==X)return F.FileIndex[ce];return null}var C=64,k=-2,Ce="d0cf11e0a1b11ae1",ze=[208,207,17,224,161,177,26,225],ge="00000000000000000000000000000000",De={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:k,FREESECT:-1,HEADER_SIGNATURE:Ce,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:ge,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function Fe(F,W,z){d();var G=P(F,z);m.writeFileSync(W,G)}function Xe(F){for(var W=new Array(F.length),z=0;z<F.length;++z)W[z]=String.fromCharCode(F[z]);return W.join("")}function Z(F,W){var z=P(F,W);switch(W&&W.type||"buffer"){case"file":return d(),m.writeFileSync(W.filename,z),z;case"binary":return typeof z=="string"?z:Xe(z);case"base64":return Ed(typeof z=="string"?z:Xe(z));case"buffer":if(It)return Buffer.isBuffer(z)?z:Si(z);case"array":return typeof z=="string"?ts(z):z}return z}var _e;function Y(F){try{var W=F.InflateRaw,z=new W;if(z._processChunk(new Uint8Array([3,0]),z._finishFlushFlag),z.bytesRead)_e=F;else throw new Error("zlib does not expose bytesRead")}catch(G){console.error("cannot use native zlib: "+(G.message||G))}}function ee(F,W){if(!_e)return Vs(F,W);var z=_e.InflateRaw,G=new z,K=G._processChunk(F.slice(F.l),G._finishFlushFlag);return F.l+=G.bytesRead,K}function J(F){return _e?_e.deflateRawSync(F):Ql(F)}var te=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],he=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Le=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function ke(F){var W=(F<<1|F<<11)&139536|(F<<5|F<<15)&558144;return(W>>16|W>>8|W)&255}for(var He=typeof Uint8Array<"u",ae=He?new Uint8Array(256):[],Ve=0;Ve<256;++Ve)ae[Ve]=ke(Ve);function Ze(F,W){var z=ae[F&255];return W<=8?z>>>8-W:(z=z<<8|ae[F>>8&255],W<=16?z>>>16-W:(z=z<<8|ae[F>>16&255],z>>>24-W))}function Ht(F,W){var z=W&7,G=W>>>3;return(F[G]|(z<=6?0:F[G+1]<<8))>>>z&3}function gt(F,W){var z=W&7,G=W>>>3;return(F[G]|(z<=5?0:F[G+1]<<8))>>>z&7}function ta(F,W){var z=W&7,G=W>>>3;return(F[G]|(z<=4?0:F[G+1]<<8))>>>z&15}function Gt(F,W){var z=W&7,G=W>>>3;return(F[G]|(z<=3?0:F[G+1]<<8))>>>z&31}function Be(F,W){var z=W&7,G=W>>>3;return(F[G]|(z<=1?0:F[G+1]<<8))>>>z&127}function en(F,W,z){var G=W&7,K=W>>>3,X=(1<<z)-1,ce=F[K]>>>G;return z<8-G||(ce|=F[K+1]<<8-G,z<16-G)||(ce|=F[K+2]<<16-G,z<24-G)||(ce|=F[K+3]<<24-G),ce&X}function Ot(F,W,z){var G=W&7,K=W>>>3;return G<=5?F[K]|=(z&7)<<G:(F[K]|=z<<G&255,F[K+1]=(z&7)>>8-G),W+3}function Jt(F,W,z){var G=W&7,K=W>>>3;return z=(z&1)<<G,F[K]|=z,W+1}function vn(F,W,z){var G=W&7,K=W>>>3;return z<<=G,F[K]|=z&255,z>>>=8,F[K+1]=z,W+8}function Xl(F,W,z){var G=W&7,K=W>>>3;return z<<=G,F[K]|=z&255,z>>>=8,F[K+1]=z&255,F[K+2]=z>>>8,W+16}function Ls(F,W){var z=F.length,G=2*z>W?2*z:W+5,K=0;if(z>=W)return F;if(It){var X=lw(G);if(F.copy)F.copy(X);else for(;K<F.length;++K)X[K]=F[K];return X}else if(He){var ce=new Uint8Array(G);if(ce.set)ce.set(F);else for(;K<z;++K)ce[K]=F[K];return ce}return F.length=G,F}function Un(F){for(var W=new Array(F),z=0;z<F;++z)W[z]=0;return W}function ya(F,W,z){var G=1,K=0,X=0,ce=0,xe=0,ie=F.length,de=He?new Uint16Array(32):Un(32);for(X=0;X<32;++X)de[X]=0;for(X=ie;X<z;++X)F[X]=0;ie=F.length;var fe=He?new Uint16Array(ie):Un(ie);for(X=0;X<ie;++X)de[K=F[X]]++,G<K&&(G=K),fe[X]=0;for(de[0]=0,X=1;X<=G;++X)de[X+16]=xe=xe+de[X-1]<<1;for(X=0;X<ie;++X)xe=F[X],xe!=0&&(fe[X]=de[xe+16]++);var Ae=0;for(X=0;X<ie;++X)if(Ae=F[X],Ae!=0)for(xe=Ze(fe[X],G)>>G-Ae,ce=(1<<G+4-Ae)-1;ce>=0;--ce)W[xe|ce<<Ae]=Ae&15|X<<4;return G}var _a=He?new Uint16Array(512):Un(512),Nr=He?new Uint16Array(32):Un(32);if(!He){for(var br=0;br<512;++br)_a[br]=0;for(br=0;br<32;++br)Nr[br]=0}(function(){for(var F=[],W=0;W<32;W++)F.push(5);ya(F,Nr,32);var z=[];for(W=0;W<=143;W++)z.push(8);for(;W<=255;W++)z.push(9);for(;W<=279;W++)z.push(7);for(;W<=287;W++)z.push(8);ya(z,_a,288)})();var tn=(function(){for(var W=He?new Uint8Array(32768):[],z=0,G=0;z<Le.length-1;++z)for(;G<Le[z+1];++G)W[G]=z;for(;G<32768;++G)W[G]=29;var K=He?new Uint8Array(259):[];for(z=0,G=0;z<he.length-1;++z)for(;G<he[z+1];++G)K[G]=z;function X(xe,ie){for(var de=0;de<xe.length;){var fe=Math.min(65535,xe.length-de),Ae=de+fe==xe.length;for(ie.write_shift(1,+Ae),ie.write_shift(2,fe),ie.write_shift(2,~fe&65535);fe-- >0;)ie[ie.l++]=xe[de++]}return ie.l}function ce(xe,ie){for(var de=0,fe=0,Ae=He?new Uint16Array(32768):[];fe<xe.length;){var Ie=Math.min(65535,xe.length-fe);if(Ie<10){for(de=Ot(ie,de,+(fe+Ie==xe.length)),de&7&&(de+=8-(de&7)),ie.l=de/8|0,ie.write_shift(2,Ie),ie.write_shift(2,~Ie&65535);Ie-- >0;)ie[ie.l++]=xe[fe++];de=ie.l*8;continue}de=Ot(ie,de,+(fe+Ie==xe.length)+2);for(var Ge=0;Ie-- >0;){var je=xe[fe];Ge=(Ge<<5^je)&32767;var Ue=-1,ot=0;if((Ue=Ae[Ge])&&(Ue|=fe&-32768,Ue>fe&&(Ue-=32768),Ue<fe))for(;xe[Ue+ot]==xe[fe+ot]&&ot<250;)++ot;if(ot>2){je=K[ot],je<=22?de=vn(ie,de,ae[je+1]>>1)-1:(vn(ie,de,3),de+=5,vn(ie,de,ae[je-23]>>5),de+=3);var jt=je<8?0:je-4>>2;jt>0&&(Xl(ie,de,ot-he[je]),de+=jt),je=W[fe-Ue],de=vn(ie,de,ae[je]>>3),de-=3;var Rt=je<4?0:je-2>>1;Rt>0&&(Xl(ie,de,fe-Ue-Le[je]),de+=Rt);for(var Mt=0;Mt<ot;++Mt)Ae[Ge]=fe&32767,Ge=(Ge<<5^xe[fe])&32767,++fe;Ie-=ot-1}else je<=143?je=je+48:de=Jt(ie,de,1),de=vn(ie,de,ae[je]),Ae[Ge]=fe&32767,++fe}de=vn(ie,de,0)-1}return ie.l=(de+7)/8|0,ie.l}return function(ie,de){return ie.length<8?X(ie,de):ce(ie,de)}})();function Ql(F){var W=ye(50+Math.floor(F.length*1.1)),z=tn(F,W);return W.slice(0,z)}var Bo=He?new Uint16Array(32768):Un(32768),Uo=He?new Uint16Array(32768):Un(32768),ra=He?new Uint16Array(128):Un(128),Va=1,zn=1;function Hn(F,W){var z=Gt(F,W)+257;W+=5;var G=Gt(F,W)+1;W+=5;var K=ta(F,W)+4;W+=4;for(var X=0,ce=He?new Uint8Array(19):Un(19),xe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],ie=1,de=He?new Uint8Array(8):Un(8),fe=He?new Uint8Array(8):Un(8),Ae=ce.length,Ie=0;Ie<K;++Ie)ce[te[Ie]]=X=gt(F,W),ie<X&&(ie=X),de[X]++,W+=3;var Ge=0;for(de[0]=0,Ie=1;Ie<=ie;++Ie)fe[Ie]=Ge=Ge+de[Ie-1]<<1;for(Ie=0;Ie<Ae;++Ie)(Ge=ce[Ie])!=0&&(xe[Ie]=fe[Ge]++);var je=0;for(Ie=0;Ie<Ae;++Ie)if(je=ce[Ie],je!=0){Ge=ae[xe[Ie]]>>8-je;for(var Ue=(1<<7-je)-1;Ue>=0;--Ue)ra[Ge|Ue<<je]=je&7|Ie<<3}var ot=[];for(ie=1;ot.length<z+G;)switch(Ge=ra[Be(F,W)],W+=Ge&7,Ge>>>=3){case 16:for(X=3+Ht(F,W),W+=2,Ge=ot[ot.length-1];X-- >0;)ot.push(Ge);break;case 17:for(X=3+gt(F,W),W+=3;X-- >0;)ot.push(0);break;case 18:for(X=11+Be(F,W),W+=7;X-- >0;)ot.push(0);break;default:ot.push(Ge),ie<Ge&&(ie=Ge);break}var jt=ot.slice(0,z),Rt=ot.slice(z);for(Ie=z;Ie<286;++Ie)jt[Ie]=0;for(Ie=G;Ie<30;++Ie)Rt[Ie]=0;return Va=ya(jt,Bo,286),zn=ya(Rt,Uo,30),W}function ds(F,W){if(F[0]==3&&!(F[1]&3))return[Ol(W),2];for(var z=0,G=0,K=lw(W||1<<18),X=0,ce=K.length>>>0,xe=0,ie=0;(G&1)==0;){if(G=gt(F,z),z+=3,G>>>1)G>>1==1?(xe=9,ie=5):(z=Hn(F,z),xe=Va,ie=zn);else{z&7&&(z+=8-(z&7));var de=F[z>>>3]|F[(z>>>3)+1]<<8;if(z+=32,de>0)for(!W&&ce<X+de&&(K=Ls(K,X+de),ce=K.length);de-- >0;)K[X++]=F[z>>>3],z+=8;continue}for(;;){!W&&ce<X+32767&&(K=Ls(K,X+32767),ce=K.length);var fe=en(F,z,xe),Ae=G>>>1==1?_a[fe]:Bo[fe];if(z+=Ae&15,Ae>>>=4,(Ae>>>8&255)===0)K[X++]=Ae;else{if(Ae==256)break;Ae-=257;var Ie=Ae<8?0:Ae-4>>2;Ie>5&&(Ie=0);var Ge=X+he[Ae];Ie>0&&(Ge+=en(F,z,Ie),z+=Ie),fe=en(F,z,ie),Ae=G>>>1==1?Nr[fe]:Uo[fe],z+=Ae&15,Ae>>>=4;var je=Ae<4?0:Ae-2>>1,Ue=Le[Ae];for(je>0&&(Ue+=en(F,z,je),z+=je),!W&&ce<Ge&&(K=Ls(K,Ge+100),ce=K.length);X<Ge;)K[X]=K[X-Ue],++X}}}return W?[K,z+7>>>3]:[K.slice(0,X),z+7>>>3]}function Vs(F,W){var z=F.slice(F.l||0),G=ds(z,W);return F.l+=G[1],G[0]}function Ai(F,W){if(F)typeof console<"u"&&console.error(W);else throw new Error(W)}function Ba(F,W){var z=F;ma(z,0);var G=[],K=[],X={FileIndex:G,FullPaths:K};j(X,{root:W.root});for(var ce=z.length-4;(z[ce]!=80||z[ce+1]!=75||z[ce+2]!=5||z[ce+3]!=6)&&ce>=0;)--ce;z.l=ce+4,z.l+=4;var xe=z.read_shift(2);z.l+=6;var ie=z.read_shift(4);for(z.l=ie,ce=0;ce<xe;++ce){z.l+=20;var de=z.read_shift(4),fe=z.read_shift(4),Ae=z.read_shift(2),Ie=z.read_shift(2),Ge=z.read_shift(2);z.l+=8;var je=z.read_shift(4),Ue=h(z.slice(z.l+Ae,z.l+Ae+Ie));z.l+=Ae+Ie+Ge;var ot=z.l;z.l=je+4,Ci(z,de,fe,X,Ue),z.l=ot}return X}function Ci(F,W,z,G,K){F.l+=2;var X=F.read_shift(2),ce=F.read_shift(2),xe=c(F);if(X&8257)throw new Error("Unsupported ZIP encryption");for(var ie=F.read_shift(4),de=F.read_shift(4),fe=F.read_shift(4),Ae=F.read_shift(2),Ie=F.read_shift(2),Ge="",je=0;je<Ae;++je)Ge+=String.fromCharCode(F[F.l++]);if(Ie){var Ue=h(F.slice(F.l,F.l+Ie));(Ue[21589]||{}).mt&&(xe=Ue[21589].mt),((K||{})[21589]||{}).mt&&(xe=K[21589].mt)}F.l+=Ie;var ot=F.slice(F.l,F.l+de);switch(ce){case 8:ot=ee(F,fe);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+ce)}var jt=!1;X&8&&(ie=F.read_shift(4),ie==134695760&&(ie=F.read_shift(4),jt=!0),de=F.read_shift(4),fe=F.read_shift(4)),de!=W&&Ai(jt,"Bad compressed size: "+W+" != "+de),fe!=z&&Ai(jt,"Bad uncompressed size: "+z+" != "+fe),xr(G,Ge,ot,{unsafe:!0,mt:xe})}function or(F,W){var z=W||{},G=[],K=[],X=ye(1),ce=z.compression?8:0,xe=0,ie=0,de=0,fe=0,Ae=0,Ie=F.FullPaths[0],Ge=Ie,je=F.FileIndex[0],Ue=[],ot=0;for(ie=1;ie<F.FullPaths.length;++ie)if(Ge=F.FullPaths[ie].slice(Ie.length),je=F.FileIndex[ie],!(!je.size||!je.content||Ge=="Sh33tJ5")){var jt=fe,Rt=ye(Ge.length);for(de=0;de<Ge.length;++de)Rt.write_shift(1,Ge.charCodeAt(de)&127);Rt=Rt.slice(0,Rt.l),Ue[Ae]=sL.buf(je.content,0);var Mt=je.content;ce==8&&(Mt=J(Mt)),X=ye(30),X.write_shift(4,67324752),X.write_shift(2,20),X.write_shift(2,xe),X.write_shift(2,ce),je.mt?o(X,je.mt):X.write_shift(4,0),X.write_shift(-4,Ue[Ae]),X.write_shift(4,Mt.length),X.write_shift(4,je.content.length),X.write_shift(2,Rt.length),X.write_shift(2,0),fe+=X.length,G.push(X),fe+=Rt.length,G.push(Rt),fe+=Mt.length,G.push(Mt),X=ye(46),X.write_shift(4,33639248),X.write_shift(2,0),X.write_shift(2,20),X.write_shift(2,xe),X.write_shift(2,ce),X.write_shift(4,0),X.write_shift(-4,Ue[Ae]),X.write_shift(4,Mt.length),X.write_shift(4,je.content.length),X.write_shift(2,Rt.length),X.write_shift(2,0),X.write_shift(2,0),X.write_shift(2,0),X.write_shift(2,0),X.write_shift(4,0),X.write_shift(4,jt),ot+=X.l,K.push(X),ot+=Rt.length,K.push(Rt),++Ae}return X=ye(22),X.write_shift(4,101010256),X.write_shift(2,0),X.write_shift(2,0),X.write_shift(2,Ae),X.write_shift(2,Ae),X.write_shift(4,ot),X.write_shift(4,fe),X.write_shift(2,0),un([un(G),un(K),X])}var Bs={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function fs(F,W){if(F.ctype)return F.ctype;var z=F.name||"",G=z.match(/\.([^\.]+)$/);return G&&Bs[G[1]]||W&&(G=(z=W).match(/[\.\\]([^\.\\])+$/),G&&Bs[G[1]])?Bs[G[1]]:"application/octet-stream"}function ms(F){for(var W=Ed(F),z=[],G=0;G<W.length;G+=76)z.push(W.slice(G,G+76));return z.join(`\r
`)+`\r
`}function zo(F){var W=F.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(de){var fe=de.charCodeAt(0).toString(16).toUpperCase();return"="+(fe.length==1?"0"+fe:fe)});W=W.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),W.charAt(0)==`
`&&(W="=0D"+W.slice(1)),W=W.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var z=[],G=W.split(`\r
`),K=0;K<G.length;++K){var X=G[K];if(X.length==0){z.push("");continue}for(var ce=0;ce<X.length;){var xe=76,ie=X.slice(ce,ce+xe);ie.charAt(xe-1)=="="?xe--:ie.charAt(xe-2)=="="?xe-=2:ie.charAt(xe-3)=="="&&(xe-=3),ie=X.slice(ce,ce+xe),ce+=xe,ce<X.length&&(ie+="="),z.push(ie)}}return z.join(`\r
`)}function Ho(F){for(var W=[],z=0;z<F.length;++z){for(var G=F[z];z<=F.length&&G.charAt(G.length-1)=="=";)G=G.slice(0,G.length-1)+F[++z];W.push(G)}for(var K=0;K<W.length;++K)W[K]=W[K].replace(/[=][0-9A-Fa-f]{2}/g,function(X){return String.fromCharCode(parseInt(X.slice(1),16))});return ts(W.join(`\r
`))}function Ua(F,W,z){for(var G="",K="",X="",ce,xe=0;xe<10;++xe){var ie=W[xe];if(!ie||ie.match(/^\s*$/))break;var de=ie.match(/^(.*?):\s*([^\s].*)$/);if(de)switch(de[1].toLowerCase()){case"content-location":G=de[2].trim();break;case"content-type":X=de[2].trim();break;case"content-transfer-encoding":K=de[2].trim();break}}switch(++xe,K.toLowerCase()){case"base64":ce=ts(Ei(W.slice(xe).join("")));break;case"quoted-printable":ce=Ho(W.slice(xe));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+K)}var fe=xr(F,G.slice(z.length),ce,{unsafe:!0});X&&(fe.ctype=X)}function Du(F,W){if(Xe(F.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var z=W&&W.root||"",G=(It&&Buffer.isBuffer(F)?F.toString("binary"):Xe(F)).split(`\r
`),K=0,X="";for(K=0;K<G.length;++K)if(X=G[K],!!/^Content-Location:/i.test(X)&&(X=X.slice(X.indexOf("file")),z||(z=X.slice(0,X.lastIndexOf("/")+1)),X.slice(0,z.length)!=z))for(;z.length>0&&(z=z.slice(0,z.length-1),z=z.slice(0,z.lastIndexOf("/")+1),X.slice(0,z.length)!=z););var ce=(G[1]||"").match(/boundary="(.*?)"/);if(!ce)throw new Error("MAD cannot find boundary");var xe="--"+(ce[1]||""),ie=[],de=[],fe={FileIndex:ie,FullPaths:de};j(fe);var Ae,Ie=0;for(K=0;K<G.length;++K){var Ge=G[K];Ge!==xe&&Ge!==xe+"--"||(Ie++&&Ua(fe,G.slice(Ae,K),z),Ae=K)}return fe}function Ea(F,W){var z=W||{},G=z.boundary||"SheetJS";G="------="+G;for(var K=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+G.slice(2)+'"',"","",""],X=F.FullPaths[0],ce=X,xe=F.FileIndex[0],ie=1;ie<F.FullPaths.length;++ie)if(ce=F.FullPaths[ie].slice(X.length),xe=F.FileIndex[ie],!(!xe.size||!xe.content||ce=="Sh33tJ5")){ce=ce.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(ot){return"_x"+ot.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(ot){return"_u"+ot.charCodeAt(0).toString(16)+"_"});for(var de=xe.content,fe=It&&Buffer.isBuffer(de)?de.toString("binary"):Xe(de),Ae=0,Ie=Math.min(1024,fe.length),Ge=0,je=0;je<=Ie;++je)(Ge=fe.charCodeAt(je))>=32&&Ge<128&&++Ae;var Ue=Ae>=Ie*4/5;K.push(G),K.push("Content-Location: "+(z.root||"file:///C:/SheetJS/")+ce),K.push("Content-Transfer-Encoding: "+(Ue?"quoted-printable":"base64")),K.push("Content-Type: "+fs(xe,ce)),K.push(""),K.push(Ue?zo(fe):ms(fe))}return K.push(G+`--\r
`),K.join(`\r
`)}function lr(F){var W={};return j(W,F),W}function xr(F,W,z,G){var K=G&&G.unsafe;K||j(F);var X=!K&&Kt.find(F,W);if(!X){var ce=F.FullPaths[0];W.slice(0,ce.length)==ce?ce=W:(ce.slice(-1)!="/"&&(ce+="/"),ce=(ce+W).replace("//","/")),X={name:a(W),type:2},F.FileIndex.push(X),F.FullPaths.push(ce),K||Kt.utils.cfb_gc(F)}return X.content=z,X.size=z?z.length:0,G&&(G.CLSID&&(X.clsid=G.CLSID),G.mt&&(X.mt=G.mt),G.ct&&(X.ct=G.ct)),X}function za(F,W){j(F);var z=Kt.find(F,W);if(z){for(var G=0;G<F.FileIndex.length;++G)if(F.FileIndex[G]==z)return F.FileIndex.splice(G,1),F.FullPaths.splice(G,1),!0}return!1}function Us(F,W,z){j(F);var G=Kt.find(F,W);if(G){for(var K=0;K<F.FileIndex.length;++K)if(F.FileIndex[K]==G)return F.FileIndex[K].name=a(z),F.FullPaths[K]=z,!0}return!1}function zs(F){S(F,!0)}return e.find=O,e.read=q,e.parse=p,e.write=Z,e.writeFile=Fe,e.utils={cfb_new:lr,cfb_add:xr,cfb_del:za,cfb_mov:Us,cfb_gc:zs,ReadShift:ad,CheckField:SA,prep_blob:ma,bconcat:un,use_zlib:Y,_deflateRaw:Ql,_inflateRaw:Vs,consts:De},e})();function iL(t){return typeof t=="string"?Q0(t):Array.isArray(t)?IF(t):t}function $d(t,e,r){if(typeof Deno<"u"){if(r&&typeof e=="string")switch(r){case"utf8":e=new TextEncoder(r).encode(e);break;case"binary":e=Q0(e);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(t,e)}var n=r=="utf8"?wd(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,t);if(typeof Blob<"u"){var a=new Blob([iL(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,t);if(typeof saveAs<"u")return saveAs(a,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var o=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(o)},6e4),chrome.downloads.download({url:o,filename:t,saveAs:!0});var c=document.createElement("a");if(c.download!=null)return c.download=t,c.href=o,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(o)},6e4),o}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var h=File(t);return h.open("w"),h.encoding="binary",Array.isArray(e)&&(e=qd(e)),h.write(e),h.close(),e}catch(m){if(!m.message||!m.message.match(/onstruct/))throw m}throw new Error("cannot save file "+t)}function gn(t){for(var e=Object.keys(t),r=[],n=0;n<e.length;++n)Object.prototype.hasOwnProperty.call(t,e[n])&&r.push(e[n]);return r}function gw(t,e){for(var r=[],n=gn(t),a=0;a!==n.length;++a)r[t[n[a]][e]]==null&&(r[t[n[a]][e]]=n[a]);return r}function f1(t){for(var e=[],r=gn(t),n=0;n!==r.length;++n)e[t[r[n]]]=r[n];return e}function ep(t){for(var e=[],r=gn(t),n=0;n!==r.length;++n)e[t[r[n]]]=parseInt(r[n],10);return e}function oL(t){for(var e=[],r=gn(t),n=0;n!==r.length;++n)e[t[r[n]]]==null&&(e[t[r[n]]]=[]),e[t[r[n]]].push(r[n]);return e}var m0=new Date(1899,11,30,0,0,0);function Jn(t,e){var r=t.getTime(),n=m0.getTime()+(t.getTimezoneOffset()-m0.getTimezoneOffset())*6e4;return(r-n)/(1440*60*1e3)}var cA=new Date,lL=m0.getTime()+(cA.getTimezoneOffset()-m0.getTimezoneOffset())*6e4,vw=cA.getTimezoneOffset();function uA(t){var e=new Date;return e.setTime(t*24*60*60*1e3+lL),e.getTimezoneOffset()!==vw&&e.setTime(e.getTime()+(e.getTimezoneOffset()-vw)*6e4),e}var xw=new Date("2017-02-19T19:06:09.000Z"),hA=isNaN(xw.getFullYear())?new Date("2/19/17"):xw,cL=hA.getFullYear()==2017;function Fn(t,e){var r=new Date(t);if(cL)return e>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):e<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(hA.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return t.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var a=t.match(/\d+/g)||["2017","2","19","0","0","0"],o=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return t.indexOf("Z")>-1&&(o=new Date(o.getTime()-o.getTimezoneOffset()*60*1e3)),o}function tp(t,e){if(It&&Buffer.isBuffer(t))return t.toString("binary");if(typeof TextDecoder<"u")try{var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(o){return r[o]||o})}catch{}for(var n=[],a=0;a!=t.length;++a)n.push(String.fromCharCode(t[a]));return n.join("")}function Zn(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=Zn(t[r]));return e}function mr(t,e){for(var r="";r.length<e;)r+=t;return r}function fi(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var r=1,n=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(e=Number(n))||(n=n.replace(/[(](.*)[)]/,function(a,o){return r=-r,o}),!isNaN(e=Number(n)))?e/r:e}var uL=["january","february","march","april","may","june","july","august","september","october","november","december"];function Td(t){var e=new Date(t),r=new Date(NaN),n=e.getYear(),a=e.getMonth(),o=e.getDate();if(isNaN(o))return r;var c=t.toLowerCase();if(c.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(c=c.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),c.length>3&&uL.indexOf(c)==-1)return r}else if(c.match(/[a-z]/))return r;return n<0||n>8099?r:(a>0||o>1)&&n!=101?e:t.match(/[^-0-9:,\/\\]/)?r:e}function ft(t,e,r){if(t.FullPaths){if(typeof r=="string"){var n;return It?n=Si(r):n=kF(r),Kt.utils.cfb_add(t,e,n)}Kt.utils.cfb_add(t,e,r)}else t.file(e,r)}function m1(){return Kt.utils.cfb_new()}var Or=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,hL={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},p1=f1(hL),g1=/[&<>'"]/g,dL=/[\u0000-\u0008\u000b-\u001f]/g;function Ut(t){var e=t+"";return e.replace(g1,function(r){return p1[r]}).replace(dL,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function yw(t){return Ut(t).replace(/ /g,"_x0020_")}var dA=/[\u0000-\u001f]/g;function fL(t){var e=t+"";return e.replace(g1,function(r){return p1[r]}).replace(/\n/g,"<br/>").replace(dA,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function mL(t){var e=t+"";return e.replace(g1,function(r){return p1[r]}).replace(dA,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}function pL(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function gL(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function xv(t){for(var e="",r=0,n=0,a=0,o=0,c=0,h=0;r<t.length;){if(n=t.charCodeAt(r++),n<128){e+=String.fromCharCode(n);continue}if(a=t.charCodeAt(r++),n>191&&n<224){c=(n&31)<<6,c|=a&63,e+=String.fromCharCode(c);continue}if(o=t.charCodeAt(r++),n<240){e+=String.fromCharCode((n&15)<<12|(a&63)<<6|o&63);continue}c=t.charCodeAt(r++),h=((n&7)<<18|(a&63)<<12|(o&63)<<6|c&63)-65536,e+=String.fromCharCode(55296+(h>>>10&1023)),e+=String.fromCharCode(56320+(h&1023))}return e}function _w(t){var e=Ol(2*t.length),r,n,a=1,o=0,c=0,h;for(n=0;n<t.length;n+=a)a=1,(h=t.charCodeAt(n))<128?r=h:h<224?(r=(h&31)*64+(t.charCodeAt(n+1)&63),a=2):h<240?(r=(h&15)*4096+(t.charCodeAt(n+1)&63)*64+(t.charCodeAt(n+2)&63),a=3):(a=4,r=(h&7)*262144+(t.charCodeAt(n+1)&63)*4096+(t.charCodeAt(n+2)&63)*64+(t.charCodeAt(n+3)&63),r-=65536,c=55296+(r>>>10&1023),r=56320+(r&1023)),c!==0&&(e[o++]=c&255,e[o++]=c>>>8,c=0),e[o++]=r%256,e[o++]=r>>>8;return e.slice(0,o).toString("ucs2")}function Ew(t){return Si(t,"binary").toString("utf8")}var wm="foo bar baz",nd=It&&(Ew(wm)==xv(wm)&&Ew||_w(wm)==xv(wm)&&_w)||xv,wd=It?function(t){return Si(t,"utf8").toString("binary")}:function(t){for(var e=[],r=0,n=0,a=0;r<t.length;)switch(n=t.charCodeAt(r++),!0){case n<128:e.push(String.fromCharCode(n));break;case n<2048:e.push(String.fromCharCode(192+(n>>6))),e.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,a=t.charCodeAt(r++)-56320+(n<<10),e.push(String.fromCharCode(240+(a>>18&7))),e.push(String.fromCharCode(144+(a>>12&63))),e.push(String.fromCharCode(128+(a>>6&63))),e.push(String.fromCharCode(128+(a&63)));break;default:e.push(String.fromCharCode(224+(n>>12))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)))}return e.join("")},vL=(function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<t.length;++a)n=n.replace(t[a][0],t[a][1]);return n}})(),fA=/(^\s|\s$|\n)/;function hn(t,e){return"<"+t+(e.match(fA)?' xml:space="preserve"':"")+">"+e+"</"+t+">"}function Nd(t){return gn(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function Oe(t,e,r){return"<"+t+(r!=null?Nd(r):"")+(e!=null?(e.match(fA)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function sx(t,e){try{return t.toISOString().replace(/\.\d*/,"")}catch(r){if(e)throw r}return""}function xL(t,e){switch(typeof t){case"string":var r=Oe("vt:lpwstr",Ut(t));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return Oe((t|0)==t?"vt:i4":"vt:r8",Ut(String(t)));case"boolean":return Oe("vt:bool",t?"true":"false")}if(t instanceof Date)return Oe("vt:filetime",sx(t));throw new Error("Unable to serialize "+t)}var Xr={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Au=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],pa={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function yL(t,e){for(var r=1-2*(t[e+7]>>>7),n=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),a=t[e+6]&15,o=5;o>=0;--o)a=a*256+t[e+o];return n==2047?a==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,a+=Math.pow(2,52)),r*Math.pow(2,n-52)*a)}function _L(t,e,r){var n=(e<0||1/e==-1/0?1:0)<<7,a=0,o=0,c=n?-e:e;isFinite(c)?c==0?a=o=0:(a=Math.floor(Math.log(c)/Math.LN2),o=c*Math.pow(2,52-a),a<=-1023&&(!isFinite(o)||o<Math.pow(2,52))?a=-1022:(o-=Math.pow(2,52),a+=1023)):(a=2047,o=isNaN(e)?26985:0);for(var h=0;h<=5;++h,o/=256)t[r+h]=o&255;t[r+6]=(a&15)<<4|o&15,t[r+7]=a>>4|n}var Tw=function(t){for(var e=[],r=10240,n=0;n<t[0].length;++n)if(t[0][n])for(var a=0,o=t[0][n].length;a<o;a+=r)e.push.apply(e,t[0][n].slice(a,a+r));return e},ww=It?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:Si(e)})):Tw(t)}:Tw,Nw=function(t,e,r){for(var n=[],a=e;a<r;a+=2)n.push(String.fromCharCode($h(t,a)));return n.join("").replace(rd,"")},v1=It?function(t,e,r){return Buffer.isBuffer(t)?t.toString("utf16le",e,r).replace(rd,""):Nw(t,e,r)}:Nw,bw=function(t,e,r){for(var n=[],a=e;a<e+r;++a)n.push(("0"+t[a].toString(16)).slice(-2));return n.join("")},mA=It?function(t,e,r){return Buffer.isBuffer(t)?t.toString("hex",e,e+r):bw(t,e,r)}:bw,Sw=function(t,e,r){for(var n=[],a=e;a<r;a++)n.push(String.fromCharCode(Hc(t,a)));return n.join("")},Wd=It?function(e,r,n){return Buffer.isBuffer(e)?e.toString("utf8",r,n):Sw(e,r,n)}:Sw,pA=function(t,e){var r=ga(t,e);return r>0?Wd(t,e+4,e+4+r-1):""},gA=pA,vA=function(t,e){var r=ga(t,e);return r>0?Wd(t,e+4,e+4+r-1):""},xA=vA,yA=function(t,e){var r=2*ga(t,e);return r>0?Wd(t,e+4,e+4+r-1):""},_A=yA,EA=function(e,r){var n=ga(e,r);return n>0?v1(e,r+4,r+4+n):""},TA=EA,wA=function(t,e){var r=ga(t,e);return r>0?Wd(t,e+4,e+4+r):""},NA=wA,bA=function(t,e){return yL(t,e)},p0=bA,x1=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};It&&(gA=function(e,r){if(!Buffer.isBuffer(e))return pA(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},xA=function(e,r){if(!Buffer.isBuffer(e))return vA(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},_A=function(e,r){if(!Buffer.isBuffer(e))return yA(e,r);var n=2*e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n-1)},TA=function(e,r){if(!Buffer.isBuffer(e))return EA(e,r);var n=e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n)},NA=function(e,r){if(!Buffer.isBuffer(e))return wA(e,r);var n=e.readUInt32LE(r);return e.toString("utf8",r+4,r+4+n)},p0=function(e,r){return Buffer.isBuffer(e)?e.readDoubleLE(r):bA(e,r)},x1=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var Hc=function(t,e){return t[e]},$h=function(t,e){return t[e+1]*256+t[e]},EL=function(t,e){var r=t[e+1]*256+t[e];return r<32768?r:(65535-r+1)*-1},ga=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},_l=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},TL=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function ad(t,e){var r="",n,a,o=[],c,h,m,d;switch(e){case"dbcs":if(d=this.l,It&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(m=0;m<t;++m)r+=String.fromCharCode($h(this,d)),d+=2;t*=2;break;case"utf8":r=Wd(this,this.l,this.l+t);break;case"utf16le":t*=2,r=v1(this,this.l,this.l+t);break;case"wstr":return ad.call(this,t,"dbcs");case"lpstr-ansi":r=gA(this,this.l),t=4+ga(this,this.l);break;case"lpstr-cp":r=xA(this,this.l),t=4+ga(this,this.l);break;case"lpwstr":r=_A(this,this.l),t=4+2*ga(this,this.l);break;case"lpp4":t=4+ga(this,this.l),r=TA(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+ga(this,this.l),r=NA(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(c=Hc(this,this.l+t++))!==0;)o.push(_m(c));r=o.join("");break;case"_wstr":for(t=0,r="";(c=$h(this,this.l+t))!==0;)o.push(_m(c)),t+=2;t+=2,r=o.join("");break;case"dbcs-cont":for(r="",d=this.l,m=0;m<t;++m){if(this.lens&&this.lens.indexOf(d)!==-1)return c=Hc(this,d),this.l=d+1,h=ad.call(this,t-m,c?"dbcs-cont":"sbcs-cont"),o.join("")+h;o.push(_m($h(this,d))),d+=2}r=o.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",d=this.l,m=0;m!=t;++m){if(this.lens&&this.lens.indexOf(d)!==-1)return c=Hc(this,d),this.l=d+1,h=ad.call(this,t-m,c?"dbcs-cont":"sbcs-cont"),o.join("")+h;o.push(_m(Hc(this,d))),d+=1}r=o.join("");break;default:switch(t){case 1:return n=Hc(this,this.l),this.l++,n;case 2:return n=(e==="i"?EL:$h)(this,this.l),this.l+=2,n;case 4:case-4:return e==="i"||(this[this.l+3]&128)===0?(n=(t>0?_l:TL)(this,this.l),this.l+=4,n):(a=ga(this,this.l),this.l+=4,a);case 8:case-8:if(e==="f")return t==8?a=p0(this,this.l):a=p0([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;t=8;case 16:r=mA(this,this.l,t);break}}return this.l+=t,r}var wL=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24&255},NL=function(t,e,r){t[r]=e&255,t[r+1]=e>>8&255,t[r+2]=e>>16&255,t[r+3]=e>>24&255},bL=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255};function SL(t,e,r){var n=0,a=0;if(r==="dbcs"){for(a=0;a!=e.length;++a)bL(this,e.charCodeAt(a),this.l+2*a);n=2*e.length}else if(r==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=e.length;++a)this[this.l+a]=e.charCodeAt(a)&255;n=e.length}else if(r==="hex"){for(;a<t;++a)this[this.l++]=parseInt(e.slice(2*a,2*a+2),16)||0;return this}else if(r==="utf16le"){var o=Math.min(this.l+t,this.length);for(a=0;a<Math.min(e.length,t);++a){var c=e.charCodeAt(a);this[this.l++]=c&255,this[this.l++]=c>>8}for(;this.l<o;)this[this.l++]=0;return this}else switch(t){case 1:n=1,this[this.l]=e&255;break;case 2:n=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:n=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:n=4,wL(this,e,this.l);break;case 8:if(n=8,r==="f"){_L(this,e,this.l);break}case 16:break;case-4:n=4,NL(this,e,this.l);break}return this.l+=n,this}function SA(t,e){var r=mA(this,this.l,t.length>>1);if(r!==t)throw new Error(e+"Expected "+t+" saw "+r);this.l+=t.length>>1}function ma(t,e){t.l=e,t.read_shift=ad,t.chk=SA,t.write_shift=SL}function Ms(t,e){t.l+=e}function ye(t){var e=Ol(t);return ma(e,0),e}function Qn(){var t=[],e=It?256:2048,r=function(d){var p=ye(d);return ma(p,0),p},n=r(e),a=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&t.push(n),n=null)},o=function(d){return n&&d<n.length-n.l?n:(a(),n=r(Math.max(d+1,e)))},c=function(){return a(),un(t)},h=function(d){a(),n=d,n.l==null&&(n.l=n.length),o(e)};return{next:o,push:h,end:c,_bufs:t}}function Se(t,e,r,n){var a=+e,o;if(!isNaN(a)){n||(n=yB[a].p||(r||[]).length||0),o=1+(a>=128?1:0)+1,n>=128&&++o,n>=16384&&++o,n>=2097152&&++o;var c=t.next(o);a<=127?c.write_shift(1,a):(c.write_shift(1,(a&127)+128),c.write_shift(1,a>>7));for(var h=0;h!=4;++h)if(n>=128)c.write_shift(1,(n&127)+128),n>>=7;else{c.write_shift(1,n);break}n>0&&x1(r)&&t.push(r)}}function sd(t,e,r){var n=Zn(t);if(e.s?(n.cRel&&(n.c+=e.s.c),n.rRel&&(n.r+=e.s.r)):(n.cRel&&(n.c+=e.c),n.rRel&&(n.r+=e.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function Aw(t,e,r){var n=Zn(t);return n.s=sd(n.s,e.s,r),n.e=sd(n.e,e.s,r),n}function id(t,e){if(t.cRel&&t.c<0)for(t=Zn(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=Zn(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var r=zt(t);return!t.cRel&&t.cRel!=null&&(r=jL(r)),!t.rRel&&t.rRel!=null&&(r=AL(r)),r}function yv(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+bn(t.s.c)+":"+(t.e.cRel?"":"$")+bn(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+mn(t.s.r)+":"+(t.e.rRel?"":"$")+mn(t.e.r):id(t.s,e.biff)+":"+id(t.e,e.biff)}function y1(t){return parseInt(CL(t),10)-1}function mn(t){return""+(t+1)}function AL(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function CL(t){return t.replace(/\$(\d+)$/,"$1")}function _1(t){for(var e=RL(t),r=0,n=0;n!==e.length;++n)r=26*r+e.charCodeAt(n)-64;return r-1}function bn(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function jL(t){return t.replace(/^([A-Z])/,"$$$1")}function RL(t){return t.replace(/^\$([A-Z])/,"$1")}function DL(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Qr(t){for(var e=0,r=0,n=0;n<t.length;++n){var a=t.charCodeAt(n);a>=48&&a<=57?e=10*e+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:e-1}}function zt(t){for(var e=t.c+1,r="";e;e=(e-1)/26|0)r=String.fromCharCode((e-1)%26+65)+r;return r+(t.r+1)}function xa(t){var e=t.indexOf(":");return e==-1?{s:Qr(t),e:Qr(t)}:{s:Qr(t.slice(0,e)),e:Qr(t.slice(e+1))}}function Ir(t,e){return typeof e>"u"||typeof e=="number"?Ir(t.s,t.e):(typeof t!="string"&&(t=zt(t)),typeof e!="string"&&(e=zt(e)),t==e?t:t+":"+e)}function nr(t){var e={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,a=0,o=t.length;for(r=0;n<o&&!((a=t.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(e.s.c=--r,r=0;n<o&&!((a=t.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;if(e.s.r=--r,n===o||a!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++n,r=0;n!=o&&!((a=t.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(e.e.c=--r,r=0;n!=o&&!((a=t.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;return e.e.r=--r,e}function Cw(t,e){var r=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=Io(t.z,r?Jn(e):e)}catch{}try{return t.w=Io((t.XF||{}).numFmtId||(r?14:0),r?Jn(e):e)}catch{return""+e}}function Ti(t,e,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?Yd[t.v]||t.v:e==null?Cw(t,t.v):Cw(t,e))}function ql(t,e){var r=e&&e.sheet?e.sheet:"Sheet1",n={};return n[r]=t,{SheetNames:[r],Sheets:n}}function AA(t,e,r){var n=r||{},a=t?Array.isArray(t):n.dense,o=t||(a?[]:{}),c=0,h=0;if(o&&n.origin!=null){if(typeof n.origin=="number")c=n.origin;else{var m=typeof n.origin=="string"?Qr(n.origin):n.origin;c=m.r,h=m.c}o["!ref"]||(o["!ref"]="A1:A1")}var d={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(o["!ref"]){var p=nr(o["!ref"]);d.s.c=p.s.c,d.s.r=p.s.r,d.e.c=Math.max(d.e.c,p.e.c),d.e.r=Math.max(d.e.r,p.e.r),c==-1&&(d.e.r=c=p.e.r+1)}for(var x=0;x!=e.length;++x)if(e[x]){if(!Array.isArray(e[x]))throw new Error("aoa_to_sheet expects an array of arrays");for(var y=0;y!=e[x].length;++y)if(!(typeof e[x][y]>"u")){var E={v:e[x][y]},w=c+x,T=h+y;if(d.s.r>w&&(d.s.r=w),d.s.c>T&&(d.s.c=T),d.e.r<w&&(d.e.r=w),d.e.c<T&&(d.e.c=T),e[x][y]&&typeof e[x][y]=="object"&&!Array.isArray(e[x][y])&&!(e[x][y]instanceof Date))E=e[x][y];else if(Array.isArray(E.v)&&(E.f=e[x][y][1],E.v=E.v[0]),E.v===null)if(E.f)E.t="n";else if(n.nullError)E.t="e",E.v=0;else if(n.sheetStubs)E.t="z";else continue;else typeof E.v=="number"?E.t="n":typeof E.v=="boolean"?E.t="b":E.v instanceof Date?(E.z=n.dateNF||vr[14],n.cellDates?(E.t="d",E.w=Io(E.z,Jn(E.v))):(E.t="n",E.v=Jn(E.v),E.w=Io(E.z,E.v))):E.t="s";if(a)o[w]||(o[w]=[]),o[w][T]&&o[w][T].z&&(E.z=o[w][T].z),o[w][T]=E;else{var b=zt({c:T,r:w});o[b]&&o[b].z&&(E.z=o[b].z),o[b]=E}}}return d.s.c<1e7&&(o["!ref"]=Ir(d)),o}function Cu(t,e){return AA(null,t,e)}function IL(t){return t.read_shift(4,"i")}function ss(t,e){return e||(e=ye(4)),e.write_shift(4,t),e}function Sn(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function Jr(t,e){var r=!1;return e==null&&(r=!0,e=ye(4+2*t.length)),e.write_shift(4,t.length),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}function kL(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function OL(t,e){return e||(e=ye(4)),e.write_shift(2,0),e.write_shift(2,0),e}function E1(t,e){var r=t.l,n=t.read_shift(1),a=Sn(t),o=[],c={t:a,h:a};if((n&1)!==0){for(var h=t.read_shift(4),m=0;m!=h;++m)o.push(kL(t));c.r=o}else c.r=[{ich:0,ifnt:0}];return t.l=r+e,c}function ML(t,e){var r=!1;return e==null&&(r=!0,e=ye(15+4*t.t.length)),e.write_shift(1,0),Jr(t.t,e),r?e.slice(0,e.l):e}var PL=E1;function FL(t,e){var r=!1;return e==null&&(r=!0,e=ye(23+4*t.t.length)),e.write_shift(1,1),Jr(t.t,e),e.write_shift(4,1),OL({},e),r?e.slice(0,e.l):e}function La(t){var e=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:r}}function $l(t,e){return e==null&&(e=ye(8)),e.write_shift(-4,t.c),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}function Wl(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}function Yl(t,e){return e==null&&(e=ye(4)),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}var LL=Sn,CA=Jr;function T1(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}function g0(t,e){var r=!1;return e==null&&(r=!0,e=ye(127)),e.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}var VL=Sn,ix=T1,w1=g0;function jA(t){var e=t.slice(t.l,t.l+4),r=e[0]&1,n=e[0]&2;t.l+=4;var a=n===0?p0([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):_l(e,0)>>2;return r?a/100:a}function RA(t,e){e==null&&(e=ye(4));var r=0,n=0,a=t*100;if(t==(t|0)&&t>=-536870912&&t<1<<29?n=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(n=1,r=1),n)e.write_shift(-4,((r?a:t)<<2)+(r+2));else throw new Error("unsupported RkNumber "+t)}function DA(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}function BL(t,e){return e||(e=ye(16)),e.write_shift(4,t.s.r),e.write_shift(4,t.e.r),e.write_shift(4,t.s.c),e.write_shift(4,t.e.c),e}var Kl=DA,ju=BL;function Ru(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function Ml(t,e){return(e||ye(8)).write_shift(8,t,"f")}function UL(t){var e={},r=t.read_shift(1),n=r>>>1,a=t.read_shift(1),o=t.read_shift(2,"i"),c=t.read_shift(1),h=t.read_shift(1),m=t.read_shift(1);switch(t.l++,n){case 0:e.auto=1;break;case 1:e.index=a;var d=XL[a];d&&(e.rgb=Vw(d));break;case 2:e.rgb=Vw([c,h,m]);break;case 3:e.theme=a;break}return o!=0&&(e.tint=o>0?o/32767:o/32768),e}function v0(t,e){if(e||(e=ye(8)),!t||t.auto)return e.write_shift(4,0),e.write_shift(4,0),e;t.index!=null?(e.write_shift(1,2),e.write_shift(1,t.index)):t.theme!=null?(e.write_shift(1,6),e.write_shift(1,t.theme)):(e.write_shift(1,5),e.write_shift(1,0));var r=t.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),e.write_shift(2,r),!t.rgb||t.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var n=t.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),e.write_shift(1,parseInt(n.slice(0,2),16)),e.write_shift(1,parseInt(n.slice(2,4),16)),e.write_shift(1,parseInt(n.slice(4,6),16)),e.write_shift(1,255)}return e}function zL(t){var e=t.read_shift(1);t.l++;var r={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return r}function HL(t,e){e||(e=ye(2));var r=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return e.write_shift(1,r),e.write_shift(1,0),e}var IA=2,fa=3,Nm=11,x0=19,bm=64,GL=65,qL=71,$L=4108,WL=4126,on=80,jw={1:{n:"CodePage",t:IA},2:{n:"Category",t:on},3:{n:"PresentationFormat",t:on},4:{n:"ByteCount",t:fa},5:{n:"LineCount",t:fa},6:{n:"ParagraphCount",t:fa},7:{n:"SlideCount",t:fa},8:{n:"NoteCount",t:fa},9:{n:"HiddenCount",t:fa},10:{n:"MultimediaClipCount",t:fa},11:{n:"ScaleCrop",t:Nm},12:{n:"HeadingPairs",t:$L},13:{n:"TitlesOfParts",t:WL},14:{n:"Manager",t:on},15:{n:"Company",t:on},16:{n:"LinksUpToDate",t:Nm},17:{n:"CharacterCount",t:fa},19:{n:"SharedDoc",t:Nm},22:{n:"HyperlinksChanged",t:Nm},23:{n:"AppVersion",t:fa,p:"version"},24:{n:"DigSig",t:GL},26:{n:"ContentType",t:on},27:{n:"ContentStatus",t:on},28:{n:"Language",t:on},29:{n:"Version",t:on},255:{},2147483648:{n:"Locale",t:x0},2147483651:{n:"Behavior",t:x0},1919054434:{}},Rw={1:{n:"CodePage",t:IA},2:{n:"Title",t:on},3:{n:"Subject",t:on},4:{n:"Author",t:on},5:{n:"Keywords",t:on},6:{n:"Comments",t:on},7:{n:"Template",t:on},8:{n:"LastAuthor",t:on},9:{n:"RevNumber",t:on},10:{n:"EditTime",t:bm},11:{n:"LastPrinted",t:bm},12:{n:"CreatedDate",t:bm},13:{n:"ModifiedDate",t:bm},14:{n:"PageCount",t:fa},15:{n:"WordCount",t:fa},16:{n:"CharCount",t:fa},17:{n:"Thumbnail",t:qL},18:{n:"Application",t:on},19:{n:"DocSecurity",t:fa},255:{},2147483648:{n:"Locale",t:x0},2147483651:{n:"Behavior",t:x0},1919054434:{}};function YL(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var KL=YL([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),XL=Zn(KL),Yd={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},QL={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},Sm={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function kA(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function OA(t,e){var r=oL(QL),n=[],a;n[n.length]=Or,n[n.length]=Oe("Types",null,{xmlns:Xr.CT,"xmlns:xsd":Xr.xsd,"xmlns:xsi":Xr.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(m){return Oe("Default",null,{Extension:m[0],ContentType:m[1]})}));var o=function(m){t[m]&&t[m].length>0&&(a=t[m][0],n[n.length]=Oe("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:Sm[m][e.bookType]||Sm[m].xlsx}))},c=function(m){(t[m]||[]).forEach(function(d){n[n.length]=Oe("Override",null,{PartName:(d[0]=="/"?"":"/")+d,ContentType:Sm[m][e.bookType]||Sm[m].xlsx})})},h=function(m){(t[m]||[]).forEach(function(d){n[n.length]=Oe("Override",null,{PartName:(d[0]=="/"?"":"/")+d,ContentType:r[m][0]})})};return o("workbooks"),c("sheets"),c("charts"),h("themes"),["strs","styles"].forEach(o),["coreprops","extprops","custprops"].forEach(h),h("vba"),h("comments"),h("threadedcomments"),h("drawings"),c("metadata"),h("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var Ct={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function MA(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function Zc(t){var e=[Or,Oe("Relationships",null,{xmlns:Xr.RELS})];return gn(t["!id"]).forEach(function(r){e[e.length]=Oe("Relationship",null,t["!id"][r])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function Bt(t,e,r,n,a,o){if(a||(a={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),e<0)for(e=t["!idx"];t["!id"]["rId"+e];++e);if(t["!idx"]=e+1,a.Id="rId"+e,a.Type=n,a.Target=r,[Ct.HLINK,Ct.XPATH,Ct.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),t["!id"][a.Id])throw new Error("Cannot rewrite rId "+e);return t["!id"][a.Id]=a,t[("/"+a.Target).replace("//","/")]=a,e}function JL(t){var e=[Or];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<t.length;++r)e.push('  <manifest:file-entry manifest:full-path="'+t[r][0]+'" manifest:media-type="'+t[r][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function Dw(t,e,r){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function ZL(t,e){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function e8(t){var e=[Or];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=t.length;++r)e.push(Dw(t[r][0],t[r][1])),e.push(ZL("",t[r][0]));return e.push(Dw("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function PA(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+c0.version+"</meta:generator></office:meta></office:document-meta>"}var Al=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function _v(t,e,r,n,a){a[t]!=null||e==null||e===""||(a[t]=e,e=Ut(e),n[n.length]=r?Oe(t,e,r):hn(t,e))}function FA(t,e){var r=e||{},n=[Or,Oe("cp:coreProperties",null,{"xmlns:cp":Xr.CORE_PROPS,"xmlns:dc":Xr.dc,"xmlns:dcterms":Xr.dcterms,"xmlns:dcmitype":Xr.dcmitype,"xmlns:xsi":Xr.xsi})],a={};if(!t&&!r.Props)return n.join("");t&&(t.CreatedDate!=null&&_v("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:sx(t.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),t.ModifiedDate!=null&&_v("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:sx(t.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var o=0;o!=Al.length;++o){var c=Al[o],h=r.Props&&r.Props[c[1]]!=null?r.Props[c[1]]:t?t[c[1]]:null;h===!0?h="1":h===!1?h="0":typeof h=="number"&&(h=String(h)),h!=null&&_v(c[0],h,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var eu=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],LA=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function VA(t){var e=[],r=Oe;return t||(t={}),t.Application="SheetJS",e[e.length]=Or,e[e.length]=Oe("Properties",null,{xmlns:Xr.EXT_PROPS,"xmlns:vt":Xr.vt}),eu.forEach(function(n){if(t[n[1]]!==void 0){var a;switch(n[2]){case"string":a=Ut(String(t[n[1]]));break;case"bool":a=t[n[1]]?"true":"false";break}a!==void 0&&(e[e.length]=r(n[0],a))}}),e[e.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=r("TitlesOfParts",r("vt:vector",t.SheetNames.map(function(n){return"<vt:lpstr>"+Ut(n)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}function BA(t){var e=[Or,Oe("Properties",null,{xmlns:Xr.CUST_PROPS,"xmlns:vt":Xr.vt})];if(!t)return e.join("");var r=1;return gn(t).forEach(function(a){++r,e[e.length]=Oe("property",xL(t[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:Ut(a)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var Iw={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function t8(t,e){var r=[];return gn(Iw).map(function(n){for(var a=0;a<Al.length;++a)if(Al[a][1]==n)return Al[a];for(a=0;a<eu.length;++a)if(eu[a][1]==n)return eu[a];throw n}).forEach(function(n){if(t[n[1]]!=null){var a=e&&e.Props&&e.Props[n[1]]!=null?e.Props[n[1]]:t[n[1]];switch(n[2]){case"date":a=new Date(a).toISOString().replace(/\.\d*Z/,"Z");break}typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),r.push(hn(Iw[n[1]]||n[1],a))}}),Oe("DocumentProperties",r.join(""),{xmlns:pa.o})}function r8(t,e){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return t&&gn(t).forEach(function(o){if(Object.prototype.hasOwnProperty.call(t,o)){for(var c=0;c<Al.length;++c)if(o==Al[c][1])return;for(c=0;c<eu.length;++c)if(o==eu[c][1])return;for(c=0;c<r.length;++c)if(o==r[c])return;var h=t[o],m="string";typeof h=="number"?(m="float",h=String(h)):h===!0||h===!1?(m="boolean",h=h?"1":"0"):h=String(h),a.push(Oe(yw(o),h,{"dt:dt":m}))}}),e&&gn(e).forEach(function(o){if(Object.prototype.hasOwnProperty.call(e,o)&&!(t&&Object.prototype.hasOwnProperty.call(t,o))){var c=e[o],h="string";typeof c=="number"?(h="float",c=String(c)):c===!0||c===!1?(h="boolean",c=c?"1":"0"):c instanceof Date?(h="dateTime.tz",c=c.toISOString()):c=String(c),a.push(Oe(yw(o),c,{"dt:dt":h}))}}),"<"+n+' xmlns="'+pa.o+'">'+a.join("")+"</"+n+">"}function n8(t){var e=typeof t=="string"?new Date(Date.parse(t)):t,r=e.getTime()/1e3+11644473600,n=r%Math.pow(2,32),a=(r-n)/Math.pow(2,32);n*=1e7,a*=1e7;var o=n/Math.pow(2,32)|0;o>0&&(n=n%Math.pow(2,32),a+=o);var c=ye(8);return c.write_shift(4,n),c.write_shift(4,a),c}function kw(t,e){var r=ye(4),n=ye(4);switch(r.write_shift(4,t==80?31:t),t){case 3:n.write_shift(-4,e);break;case 5:n=ye(8),n.write_shift(8,e,"f");break;case 11:n.write_shift(4,e?1:0);break;case 64:n=n8(e);break;case 31:case 80:for(n=ye(4+2*(e.length+1)+(e.length%2?0:2)),n.write_shift(4,e.length+1),n.write_shift(0,e,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+e)}return un([r,n])}var UA=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function a8(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function Ow(t,e,r){var n=ye(8),a=[],o=[],c=8,h=0,m=ye(8),d=ye(8);if(m.write_shift(4,2),m.write_shift(4,1200),d.write_shift(4,1),o.push(m),a.push(d),c+=8+m.length,!e){d=ye(8),d.write_shift(4,0),a.unshift(d);var p=[ye(4)];for(p[0].write_shift(4,t.length),h=0;h<t.length;++h){var x=t[h][0];for(m=ye(8+2*(x.length+1)+(x.length%2?0:2)),m.write_shift(4,h+2),m.write_shift(4,x.length+1),m.write_shift(0,x,"dbcs");m.l!=m.length;)m.write_shift(1,0);p.push(m)}m=un(p),o.unshift(m),c+=8+m.length}for(h=0;h<t.length;++h)if(!(e&&!e[t[h][0]])&&!(UA.indexOf(t[h][0])>-1||LA.indexOf(t[h][0])>-1)&&t[h][1]!=null){var y=t[h][1],E=0;if(e){E=+e[t[h][0]];var w=r[E];if(w.p=="version"&&typeof y=="string"){var T=y.split(".");y=(+T[0]<<16)+(+T[1]||0)}m=kw(w.t,y)}else{var b=a8(y);b==-1&&(b=31,y=String(y)),m=kw(b,y)}o.push(m),d=ye(8),d.write_shift(4,e?E:2+h),a.push(d),c+=8+m.length}var A=8*(o.length+1);for(h=0;h<o.length;++h)a[h].write_shift(4,A),A+=o[h].length;return n.write_shift(4,c),n.write_shift(4,o.length),un([n].concat(a).concat(o))}function Mw(t,e,r,n,a,o){var c=ye(a?68:48),h=[c];c.write_shift(2,65534),c.write_shift(2,0),c.write_shift(4,842412599),c.write_shift(16,Kt.utils.consts.HEADER_CLSID,"hex"),c.write_shift(4,a?2:1),c.write_shift(16,e,"hex"),c.write_shift(4,a?68:48);var m=Ow(t,r,n);if(h.push(m),a){var d=Ow(a,null,null);c.write_shift(16,o,"hex"),c.write_shift(4,68+m.length),h.push(d)}return un(h)}function s8(t,e){e||(e=ye(t));for(var r=0;r<t;++r)e.write_shift(1,0);return e}function i8(t,e){return t.read_shift(e)===1}function Mn(t,e){return e||(e=ye(2)),e.write_shift(2,+!!t),e}function zA(t){return t.read_shift(2,"u")}function Oa(t,e){return e||(e=ye(2)),e.write_shift(2,t),e}function HA(t,e,r){return r||(r=ye(2)),r.write_shift(1,e=="e"?+t:+!!t),r.write_shift(1,e=="e"?1:0),r}function GA(t,e,r){var n=t.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var o=t.read_shift(1);o&&(a="dbcs-cont")}else r.biff==12&&(a="wstr");r.biff>=2&&r.biff<=5&&(a="cpstr");var c=n?t.read_shift(n,a):"";return c}function o8(t){var e=t.t||"",r=ye(3);r.write_shift(2,e.length),r.write_shift(1,1);var n=ye(2*e.length);n.write_shift(2*e.length,e,"utf16le");var a=[r,n];return un(a)}function l8(t,e,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(e,"cpstr");if(r.biff>=12)return t.read_shift(e,"dbcs-cont")}var a=t.read_shift(1);return a===0?n=t.read_shift(e,"sbcs-cont"):n=t.read_shift(e,"dbcs-cont"),n}function c8(t,e,r){var n=t.read_shift(r&&r.biff==2?1:2);return n===0?(t.l++,""):l8(t,n,r)}function u8(t,e,r){if(r.biff>5)return c8(t,e,r);var n=t.read_shift(1);return n===0?(t.l++,""):t.read_shift(n,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function qA(t,e,r){return r||(r=ye(3+2*t.length)),r.write_shift(2,t.length),r.write_shift(1,1),r.write_shift(31,t,"utf16le"),r}function Pw(t,e){e||(e=ye(6+t.length*2)),e.write_shift(4,1+t.length);for(var r=0;r<t.length;++r)e.write_shift(2,t.charCodeAt(r));return e.write_shift(2,0),e}function h8(t){var e=ye(512),r=0,n=t.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var a=n.indexOf("#"),o=a>-1?31:23;switch(n.charAt(0)){case"#":o=28;break;case".":o&=-3;break}e.write_shift(4,2),e.write_shift(4,o);var c=[8,6815827,6619237,4849780,83];for(r=0;r<c.length;++r)e.write_shift(4,c[r]);if(o==28)n=n.slice(1),Pw(n,e);else if(o&2){for(c="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<c.length;++r)e.write_shift(1,parseInt(c[r],16));var h=a>-1?n.slice(0,a):n;for(e.write_shift(4,2*(h.length+1)),r=0;r<h.length;++r)e.write_shift(2,h.charCodeAt(r));e.write_shift(2,0),o&8&&Pw(a>-1?n.slice(a+1):"",e)}else{for(c="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<c.length;++r)e.write_shift(1,parseInt(c[r],16));for(var m=0;n.slice(m*3,m*3+3)=="../"||n.slice(m*3,m*3+3)=="..\\";)++m;for(e.write_shift(2,m),e.write_shift(4,n.length-3*m+1),r=0;r<n.length-3*m;++r)e.write_shift(1,n.charCodeAt(r+3*m)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),r=0;r<6;++r)e.write_shift(4,0)}return e.slice(0,e.l)}function Pl(t,e,r,n){return n||(n=ye(6)),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(2,r||0),n}function d8(t,e,r){var n=r.biff>8?4:2,a=t.read_shift(n),o=t.read_shift(n,"i"),c=t.read_shift(n,"i");return[a,o,c]}function f8(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),a=t.read_shift(2);return{s:{c:n,r:e},e:{c:a,r}}}function $A(t,e){return e||(e=ye(8)),e.write_shift(2,t.s.r),e.write_shift(2,t.e.r),e.write_shift(2,t.s.c),e.write_shift(2,t.e.c),e}function N1(t,e,r){var n=1536,a=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var o=ye(a);return o.write_shift(2,n),o.write_shift(2,e),a>4&&o.write_shift(2,29282),a>6&&o.write_shift(2,1997),a>8&&(o.write_shift(2,49161),o.write_shift(2,1),o.write_shift(2,1798),o.write_shift(2,0)),o}function m8(t,e){var r=!e||e.biff==8,n=ye(r?112:54);for(n.write_shift(e.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function p8(t,e){var r=!e||e.biff>=8?2:1,n=ye(8+r*t.name.length);n.write_shift(4,t.pos),n.write_shift(1,t.hs||0),n.write_shift(1,t.dt),n.write_shift(1,t.name.length),e.biff>=8&&n.write_shift(1,1),n.write_shift(r*t.name.length,t.name,e.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function g8(t,e){var r=ye(8);r.write_shift(4,t.Count),r.write_shift(4,t.Unique);for(var n=[],a=0;a<t.length;++a)n[a]=o8(t[a]);var o=un([r].concat(n));return o.parts=[r.length].concat(n.map(function(c){return c.length})),o}function v8(){var t=ye(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function x8(t){var e=ye(18),r=1718;return t&&t.RTL&&(r|=64),e.write_shift(2,r),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function y8(t,e){var r=t.name||"Arial",n=e&&e.biff==5,a=n?15+r.length:16+2*r.length,o=ye(a);return o.write_shift(2,t.sz*20),o.write_shift(4,0),o.write_shift(2,400),o.write_shift(4,0),o.write_shift(2,0),o.write_shift(1,r.length),n||o.write_shift(1,1),o.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),o}function _8(t,e,r,n){var a=ye(10);return Pl(t,e,n,a),a.write_shift(4,r),a}function E8(t,e,r,n,a){var o=!a||a.biff==8,c=ye(8+ +o+(1+o)*r.length);return Pl(t,e,n,c),c.write_shift(2,r.length),o&&c.write_shift(1,1),c.write_shift((1+o)*r.length,r,o?"utf16le":"sbcs"),c}function T8(t,e,r,n){var a=r&&r.biff==5;n||(n=ye(a?3+e.length:5+2*e.length)),n.write_shift(2,t),n.write_shift(a?1:2,e.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*e.length,e,a?"sbcs":"utf16le");var o=n.length>n.l?n.slice(0,n.l):n;return o.l==null&&(o.l=o.length),o}function w8(t,e){var r=e.biff==8||!e.biff?4:2,n=ye(2*r+6);return n.write_shift(r,t.s.r),n.write_shift(r,t.e.r+1),n.write_shift(2,t.s.c),n.write_shift(2,t.e.c+1),n.write_shift(2,0),n}function Fw(t,e,r,n){var a=r&&r.biff==5;n||(n=ye(a?16:20)),n.write_shift(2,0),t.style?(n.write_shift(2,t.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,t.numFmtId||0),n.write_shift(2,e<<4));var o=0;return t.numFmtId>0&&a&&(o|=1024),n.write_shift(4,o),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function N8(t){var e=ye(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function b8(t,e,r,n,a,o){var c=ye(8);return Pl(t,e,n,c),HA(r,o,c),c}function S8(t,e,r,n){var a=ye(14);return Pl(t,e,n,a),Ml(r,a),a}function A8(t,e,r){if(r.biff<8)return C8(t,e,r);for(var n=[],a=t.l+e,o=t.read_shift(r.biff>8?4:2);o--!==0;)n.push(d8(t,r.biff>8?12:6,r));if(t.l!=a)throw new Error("Bad ExternSheet: "+t.l+" != "+a);return n}function C8(t,e,r){t[t.l+1]==3&&t[t.l]++;var n=GA(t,e,r);return n.charCodeAt(0)==3?n.slice(1):n}function j8(t){var e=ye(2+t.length*8);e.write_shift(2,t.length);for(var r=0;r<t.length;++r)$A(t[r],e);return e}function R8(t){var e=ye(24),r=Qr(t[0]);e.write_shift(2,r.r),e.write_shift(2,r.r),e.write_shift(2,r.c),e.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)e.write_shift(1,parseInt(n[a],16));return un([e,h8(t[1])])}function D8(t){var e=t[1].Tooltip,r=ye(10+2*(e.length+1));r.write_shift(2,2048);var n=Qr(t[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var a=0;a<e.length;++a)r.write_shift(2,e.charCodeAt(a));return r.write_shift(2,0),r}function I8(t){return t||(t=ye(4)),t.write_shift(2,1),t.write_shift(2,1),t}function k8(t,e,r){if(!r.cellStyles)return Ms(t,e);var n=r&&r.biff>=12?4:2,a=t.read_shift(n),o=t.read_shift(n),c=t.read_shift(n),h=t.read_shift(n),m=t.read_shift(2);n==2&&(t.l+=2);var d={s:a,e:o,w:c,ixfe:h,flags:m};return(r.biff>=5||!r.biff)&&(d.level=m>>8&7),d}function O8(t,e){var r=ye(12);r.write_shift(2,e),r.write_shift(2,e),r.write_shift(2,t.width*256),r.write_shift(2,0);var n=0;return t.hidden&&(n|=1),r.write_shift(1,n),n=t.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function M8(t){for(var e=ye(2*t),r=0;r<t;++r)e.write_shift(2,r+1);return e}function P8(t,e,r){var n=ye(15);return Xd(n,t,e),n.write_shift(8,r,"f"),n}function F8(t,e,r){var n=ye(9);return Xd(n,t,e),n.write_shift(2,r),n}var L8=(function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=f1({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(h,m){var d=[],p=Ol(1);switch(m.type){case"base64":p=ts(Ei(h));break;case"binary":p=ts(h);break;case"buffer":case"array":p=h;break}ma(p,0);var x=p.read_shift(1),y=!!(x&136),E=!1,w=!1;switch(x){case 2:break;case 3:break;case 48:E=!0,y=!0;break;case 49:E=!0,y=!0;break;case 131:break;case 139:break;case 140:w=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+x.toString(16))}var T=0,b=521;x==2&&(T=p.read_shift(2)),p.l+=3,x!=2&&(T=p.read_shift(4)),T>1048576&&(T=1e6),x!=2&&(b=p.read_shift(2));var A=p.read_shift(2),M=m.codepage||1252;x!=2&&(p.l+=16,p.read_shift(1),p[p.l]!==0&&(M=t[p[p.l]]),p.l+=1,p.l+=2),w&&(p.l+=36);for(var V=[],H={},re=Math.min(p.length,x==2?521:b-10-(E?264:0)),q=w?32:11;p.l<re&&p[p.l]!=13;)switch(H={},H.name=u0.utils.decode(M,p.slice(p.l,p.l+q)).replace(/[\u0000\r\n].*$/g,""),p.l+=q,H.type=String.fromCharCode(p.read_shift(1)),x!=2&&!w&&(H.offset=p.read_shift(4)),H.len=p.read_shift(1),x==2&&(H.offset=p.read_shift(2)),H.dec=p.read_shift(1),H.name.length&&V.push(H),x!=2&&(p.l+=w?13:14),H.type){case"B":(!E||H.len!=8)&&m.WTF&&console.log("Skipping "+H.name+":"+H.type);break;case"G":case"P":m.WTF&&console.log("Skipping "+H.name+":"+H.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+H.type)}if(p[p.l]!==13&&(p.l=b-1),p.read_shift(1)!==13)throw new Error("DBF Terminator not found "+p.l+" "+p[p.l]);p.l=b;var j=0,D=0;for(d[0]=[],D=0;D!=V.length;++D)d[0][D]=V[D].name;for(;T-- >0;){if(p[p.l]===42){p.l+=A;continue}for(++p.l,d[++j]=[],D=0,D=0;D!=V.length;++D){var S=p.slice(p.l,p.l+V[D].len);p.l+=V[D].len,ma(S,0);var P=u0.utils.decode(M,S);switch(V[D].type){case"C":P.trim().length&&(d[j][D]=P.replace(/\s+$/,""));break;case"D":P.length===8?d[j][D]=new Date(+P.slice(0,4),+P.slice(4,6)-1,+P.slice(6,8)):d[j][D]=P;break;case"F":d[j][D]=parseFloat(P.trim());break;case"+":case"I":d[j][D]=w?S.read_shift(-4,"i")^2147483648:S.read_shift(4,"i");break;case"L":switch(P.trim().toUpperCase()){case"Y":case"T":d[j][D]=!0;break;case"N":case"F":d[j][D]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+P+"|")}break;case"M":if(!y)throw new Error("DBF Unexpected MEMO for type "+x.toString(16));d[j][D]="##MEMO##"+(w?parseInt(P.trim(),10):S.read_shift(4));break;case"N":P=P.replace(/\u0000/g,"").trim(),P&&P!="."&&(d[j][D]=+P||0);break;case"@":d[j][D]=new Date(S.read_shift(-8,"f")-621356832e5);break;case"T":d[j][D]=new Date((S.read_shift(4)-2440588)*864e5+S.read_shift(4));break;case"Y":d[j][D]=S.read_shift(4,"i")/1e4+S.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":d[j][D]=-S.read_shift(-8,"f");break;case"B":if(E&&V[D].len==8){d[j][D]=S.read_shift(8,"f");break}case"G":case"P":S.l+=V[D].len;break;case"0":if(V[D].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+V[D].type)}}}if(x!=2&&p.l<p.length&&p[p.l++]!=26)throw new Error("DBF EOF Marker missing "+(p.l-1)+" of "+p.length+" "+p[p.l-1].toString(16));return m&&m.sheetRows&&(d=d.slice(0,m.sheetRows)),m.DBF=V,d}function n(h,m){var d=m||{};d.dateNF||(d.dateNF="yyyymmdd");var p=Cu(r(h,d),d);return p["!cols"]=d.DBF.map(function(x){return{wch:x.len,DBF:x}}),delete d.DBF,p}function a(h,m){try{return ql(n(h,m),m)}catch(d){if(m&&m.WTF)throw d}return{SheetNames:[],Sheets:{}}}var o={B:8,C:250,L:1,D:8,"?":0,"":0};function c(h,m){var d=m||{};if(+d.codepage>=0&&_d(+d.codepage),d.type=="string")throw new Error("Cannot write DBF to JS string");var p=Qn(),x=w0(h,{header:1,raw:!0,cellDates:!0}),y=x[0],E=x.slice(1),w=h["!cols"]||[],T=0,b=0,A=0,M=1;for(T=0;T<y.length;++T){if(((w[T]||{}).DBF||{}).name){y[T]=w[T].DBF.name,++A;continue}if(y[T]!=null){if(++A,typeof y[T]=="number"&&(y[T]=y[T].toString(10)),typeof y[T]!="string")throw new Error("DBF Invalid column name "+y[T]+" |"+typeof y[T]+"|");if(y.indexOf(y[T])!==T){for(b=0;b<1024;++b)if(y.indexOf(y[T]+"_"+b)==-1){y[T]+="_"+b;break}}}}var V=nr(h["!ref"]),H=[],re=[],q=[];for(T=0;T<=V.e.c-V.s.c;++T){var j="",D="",S=0,P=[];for(b=0;b<E.length;++b)E[b][T]!=null&&P.push(E[b][T]);if(P.length==0||y[T]==null){H[T]="?";continue}for(b=0;b<P.length;++b){switch(typeof P[b]){case"number":D="B";break;case"string":D="C";break;case"boolean":D="L";break;case"object":D=P[b]instanceof Date?"D":"C";break;default:D="C"}S=Math.max(S,String(P[b]).length),j=j&&j!=D?"C":D}S>250&&(S=250),D=((w[T]||{}).DBF||{}).type,D=="C"&&w[T].DBF.len>S&&(S=w[T].DBF.len),j=="B"&&D=="N"&&(j="N",q[T]=w[T].DBF.dec,S=w[T].DBF.len),re[T]=j=="C"||D=="N"?S:o[j]||0,M+=re[T],H[T]=j}var O=p.next(32);for(O.write_shift(4,318902576),O.write_shift(4,E.length),O.write_shift(2,296+32*A),O.write_shift(2,M),T=0;T<4;++T)O.write_shift(4,0);for(O.write_shift(4,0|(+e[YS]||3)<<8),T=0,b=0;T<y.length;++T)if(y[T]!=null){var C=p.next(32),k=(y[T].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);C.write_shift(1,k,"sbcs"),C.write_shift(1,H[T]=="?"?"C":H[T],"sbcs"),C.write_shift(4,b),C.write_shift(1,re[T]||o[H[T]]||0),C.write_shift(1,q[T]||0),C.write_shift(1,2),C.write_shift(4,0),C.write_shift(1,0),C.write_shift(4,0),C.write_shift(4,0),b+=re[T]||o[H[T]]||0}var Ce=p.next(264);for(Ce.write_shift(4,13),T=0;T<65;++T)Ce.write_shift(4,0);for(T=0;T<E.length;++T){var ze=p.next(M);for(ze.write_shift(1,0),b=0;b<y.length;++b)if(y[b]!=null)switch(H[b]){case"L":ze.write_shift(1,E[T][b]==null?63:E[T][b]?84:70);break;case"B":ze.write_shift(8,E[T][b]||0,"f");break;case"N":var ge="0";for(typeof E[T][b]=="number"&&(ge=E[T][b].toFixed(q[b]||0)),A=0;A<re[b]-ge.length;++A)ze.write_shift(1,32);ze.write_shift(1,ge,"sbcs");break;case"D":E[T][b]?(ze.write_shift(4,("0000"+E[T][b].getFullYear()).slice(-4),"sbcs"),ze.write_shift(2,("00"+(E[T][b].getMonth()+1)).slice(-2),"sbcs"),ze.write_shift(2,("00"+E[T][b].getDate()).slice(-2),"sbcs")):ze.write_shift(8,"00000000","sbcs");break;case"C":var De=String(E[T][b]!=null?E[T][b]:"").slice(0,re[b]);for(ze.write_shift(1,De,"sbcs"),A=0;A<re[b]-De.length;++A)ze.write_shift(1,32);break}}return p.next(1).write_shift(1,26),p.end()}return{to_workbook:a,to_sheet:n,from_sheet:c}})(),V8=(function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+gn(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(y,E){var w=t[E];return typeof w=="number"?ow(w):w},n=function(y,E,w){var T=E.charCodeAt(0)-32<<4|w.charCodeAt(0)-48;return T==59?y:ow(T)};t["|"]=254;function a(y,E){switch(E.type){case"base64":return o(Ei(y),E);case"binary":return o(y,E);case"buffer":return o(It&&Buffer.isBuffer(y)?y.toString("binary"):qd(y),E);case"array":return o(tp(y),E)}throw new Error("Unrecognized type "+E.type)}function o(y,E){var w=y.split(/[\n\r]+/),T=-1,b=-1,A=0,M=0,V=[],H=[],re=null,q={},j=[],D=[],S=[],P=0,O;for(+E.codepage>=0&&_d(+E.codepage);A!==w.length;++A){P=0;var C=w[A].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(e,r),k=C.replace(/;;/g,"\0").split(";").map(function(te){return te.replace(/\u0000/g,";")}),Ce=k[0],ze;if(C.length>0)switch(Ce){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":k[1].charAt(0)=="P"&&H.push(C.slice(3).replace(/;;/g,";"));break;case"C":var ge=!1,De=!1,Fe=!1,Xe=!1,Z=-1,_e=-1;for(M=1;M<k.length;++M)switch(k[M].charAt(0)){case"A":break;case"X":b=parseInt(k[M].slice(1))-1,De=!0;break;case"Y":for(T=parseInt(k[M].slice(1))-1,De||(b=0),O=V.length;O<=T;++O)V[O]=[];break;case"K":ze=k[M].slice(1),ze.charAt(0)==='"'?ze=ze.slice(1,ze.length-1):ze==="TRUE"?ze=!0:ze==="FALSE"?ze=!1:isNaN(fi(ze))?isNaN(Td(ze).getDate())||(ze=Fn(ze)):(ze=fi(ze),re!==null&&iA(re)&&(ze=uA(ze))),ge=!0;break;case"E":Xe=!0;var Y=F5(k[M].slice(1),{r:T,c:b});V[T][b]=[V[T][b],Y];break;case"S":Fe=!0,V[T][b]=[V[T][b],"S5S"];break;case"G":break;case"R":Z=parseInt(k[M].slice(1))-1;break;case"C":_e=parseInt(k[M].slice(1))-1;break;default:if(E&&E.WTF)throw new Error("SYLK bad record "+C)}if(ge&&(V[T][b]&&V[T][b].length==2?V[T][b][0]=ze:V[T][b]=ze,re=null),Fe){if(Xe)throw new Error("SYLK shared formula cannot have own formula");var ee=Z>-1&&V[Z][_e];if(!ee||!ee[1])throw new Error("SYLK shared formula cannot find base");V[T][b][1]=L5(ee[1],{r:T-Z,c:b-_e})}break;case"F":var J=0;for(M=1;M<k.length;++M)switch(k[M].charAt(0)){case"X":b=parseInt(k[M].slice(1))-1,++J;break;case"Y":for(T=parseInt(k[M].slice(1))-1,O=V.length;O<=T;++O)V[O]=[];break;case"M":P=parseInt(k[M].slice(1))/20;break;case"F":break;case"G":break;case"P":re=H[parseInt(k[M].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(S=k[M].slice(1).split(" "),O=parseInt(S[0],10);O<=parseInt(S[1],10);++O)P=parseInt(S[2],10),D[O-1]=P===0?{hidden:!0}:{wch:P},b1(D[O-1]);break;case"C":b=parseInt(k[M].slice(1))-1,D[b]||(D[b]={});break;case"R":T=parseInt(k[M].slice(1))-1,j[T]||(j[T]={}),P>0?(j[T].hpt=P,j[T].hpx=QA(P)):P===0&&(j[T].hidden=!0);break;default:if(E&&E.WTF)throw new Error("SYLK bad record "+C)}J<1&&(re=null);break;default:if(E&&E.WTF)throw new Error("SYLK bad record "+C)}}return j.length>0&&(q["!rows"]=j),D.length>0&&(q["!cols"]=D),E&&E.sheetRows&&(V=V.slice(0,E.sheetRows)),[V,q]}function c(y,E){var w=a(y,E),T=w[0],b=w[1],A=Cu(T,E);return gn(b).forEach(function(M){A[M]=b[M]}),A}function h(y,E){return ql(c(y,E),E)}function m(y,E,w,T){var b="C;Y"+(w+1)+";X"+(T+1)+";K";switch(y.t){case"n":b+=y.v||0,y.f&&!y.F&&(b+=";E"+A1(y.f,{r:w,c:T}));break;case"b":b+=y.v?"TRUE":"FALSE";break;case"e":b+=y.w||y.v;break;case"d":b+='"'+(y.w||y.v)+'"';break;case"s":b+='"'+y.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return b}function d(y,E){E.forEach(function(w,T){var b="F;W"+(T+1)+" "+(T+1)+" ";w.hidden?b+="0":(typeof w.width=="number"&&!w.wpx&&(w.wpx=y0(w.width)),typeof w.wpx=="number"&&!w.wch&&(w.wch=_0(w.wpx)),typeof w.wch=="number"&&(b+=Math.round(w.wch))),b.charAt(b.length-1)!=" "&&y.push(b)})}function p(y,E){E.forEach(function(w,T){var b="F;";w.hidden?b+="M0;":w.hpt?b+="M"+20*w.hpt+";":w.hpx&&(b+="M"+20*E0(w.hpx)+";"),b.length>2&&y.push(b+"R"+(T+1))})}function x(y,E){var w=["ID;PWXL;N;E"],T=[],b=nr(y["!ref"]),A,M=Array.isArray(y),V=`\r
`;w.push("P;PGeneral"),w.push("F;P0;DG0G8;M255"),y["!cols"]&&d(w,y["!cols"]),y["!rows"]&&p(w,y["!rows"]),w.push("B;Y"+(b.e.r-b.s.r+1)+";X"+(b.e.c-b.s.c+1)+";D"+[b.s.c,b.s.r,b.e.c,b.e.r].join(" "));for(var H=b.s.r;H<=b.e.r;++H)for(var re=b.s.c;re<=b.e.c;++re){var q=zt({r:H,c:re});A=M?(y[H]||[])[re]:y[q],!(!A||A.v==null&&(!A.f||A.F))&&T.push(m(A,y,H,re))}return w.join(V)+V+T.join(V)+V+"E"+V}return{to_workbook:h,to_sheet:c,from_sheet:x}})(),B8=(function(){function t(o,c){switch(c.type){case"base64":return e(Ei(o),c);case"binary":return e(o,c);case"buffer":return e(It&&Buffer.isBuffer(o)?o.toString("binary"):qd(o),c);case"array":return e(tp(o),c)}throw new Error("Unrecognized type "+c.type)}function e(o,c){for(var h=o.split(`
`),m=-1,d=-1,p=0,x=[];p!==h.length;++p){if(h[p].trim()==="BOT"){x[++m]=[],d=0;continue}if(!(m<0)){var y=h[p].trim().split(","),E=y[0],w=y[1];++p;for(var T=h[p]||"";(T.match(/["]/g)||[]).length&1&&p<h.length-1;)T+=`
`+h[++p];switch(T=T.trim(),+E){case-1:if(T==="BOT"){x[++m]=[],d=0;continue}else if(T!=="EOD")throw new Error("Unrecognized DIF special command "+T);break;case 0:T==="TRUE"?x[m][d]=!0:T==="FALSE"?x[m][d]=!1:isNaN(fi(w))?isNaN(Td(w).getDate())?x[m][d]=w:x[m][d]=Fn(w):x[m][d]=fi(w),++d;break;case 1:T=T.slice(1,T.length-1),T=T.replace(/""/g,'"'),T&&T.match(/^=".*"$/)&&(T=T.slice(2,-1)),x[m][d++]=T!==""?T:null;break}if(T==="EOD")break}}return c&&c.sheetRows&&(x=x.slice(0,c.sheetRows)),x}function r(o,c){return Cu(t(o,c),c)}function n(o,c){return ql(r(o,c),c)}var a=(function(){var o=function(m,d,p,x,y){m.push(d),m.push(p+","+x),m.push('"'+y.replace(/"/g,'""')+'"')},c=function(m,d,p,x){m.push(d+","+p),m.push(d==1?'"'+x.replace(/"/g,'""')+'"':x)};return function(m){var d=[],p=nr(m["!ref"]),x,y=Array.isArray(m);o(d,"TABLE",0,1,"sheetjs"),o(d,"VECTORS",0,p.e.r-p.s.r+1,""),o(d,"TUPLES",0,p.e.c-p.s.c+1,""),o(d,"DATA",0,0,"");for(var E=p.s.r;E<=p.e.r;++E){c(d,-1,0,"BOT");for(var w=p.s.c;w<=p.e.c;++w){var T=zt({r:E,c:w});if(x=y?(m[E]||[])[w]:m[T],!x){c(d,1,0,"");continue}switch(x.t){case"n":var b=x.w;!b&&x.v!=null&&(b=x.v),b==null?x.f&&!x.F?c(d,1,0,"="+x.f):c(d,1,0,""):c(d,0,b,"V");break;case"b":c(d,0,x.v?1:0,x.v?"TRUE":"FALSE");break;case"s":c(d,1,0,isNaN(x.v)?x.v:'="'+x.v+'"');break;case"d":x.w||(x.w=Io(x.z||vr[14],Jn(Fn(x.v)))),c(d,0,x.w,"V");break;default:c(d,1,0,"")}}}c(d,-1,0,"EOD");var A=`\r
`,M=d.join(A);return M}})();return{to_workbook:n,to_sheet:r,from_sheet:a}})(),WA=(function(){function t(x){return x.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(x){return x.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(x,y){for(var E=x.split(`
`),w=-1,T=-1,b=0,A=[];b!==E.length;++b){var M=E[b].trim().split(":");if(M[0]==="cell"){var V=Qr(M[1]);if(A.length<=V.r)for(w=A.length;w<=V.r;++w)A[w]||(A[w]=[]);switch(w=V.r,T=V.c,M[2]){case"t":A[w][T]=t(M[3]);break;case"v":A[w][T]=+M[3];break;case"vtf":var H=M[M.length-1];case"vtc":switch(M[3]){case"nl":A[w][T]=!!+M[4];break;default:A[w][T]=+M[4];break}M[2]=="vtf"&&(A[w][T]=[A[w][T],H])}}}return y&&y.sheetRows&&(A=A.slice(0,y.sheetRows)),A}function n(x,y){return Cu(r(x,y),y)}function a(x,y){return ql(n(x,y),y)}var o=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),c=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,h=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),m="--SocialCalcSpreadsheetControlSave--";function d(x){if(!x||!x["!ref"])return"";for(var y=[],E=[],w,T="",b=xa(x["!ref"]),A=Array.isArray(x),M=b.s.r;M<=b.e.r;++M)for(var V=b.s.c;V<=b.e.c;++V)if(T=zt({r:M,c:V}),w=A?(x[M]||[])[V]:x[T],!(!w||w.v==null||w.t==="z")){switch(E=["cell",T,"t"],w.t){case"s":case"str":E.push(e(w.v));break;case"n":w.f?(E[2]="vtf",E[3]="n",E[4]=w.v,E[5]=e(w.f)):(E[2]="v",E[3]=w.v);break;case"b":E[2]="vt"+(w.f?"f":"c"),E[3]="nl",E[4]=w.v?"1":"0",E[5]=e(w.f||(w.v?"TRUE":"FALSE"));break;case"d":var H=Jn(Fn(w.v));E[2]="vtc",E[3]="nd",E[4]=""+H,E[5]=w.w||Io(w.z||vr[14],H);break;case"e":continue}y.push(E.join(":"))}return y.push("sheet:c:"+(b.e.c-b.s.c+1)+":r:"+(b.e.r-b.s.r+1)+":tvf:1"),y.push("valueformat:1:text-wiki"),y.join(`
`)}function p(x){return[o,c,h,c,d(x),m].join(`
`)}return{to_workbook:a,to_sheet:n,from_sheet:p}})(),U8=(function(){function t(p,x,y,E,w){w.raw?x[y][E]=p:p===""||(p==="TRUE"?x[y][E]=!0:p==="FALSE"?x[y][E]=!1:isNaN(fi(p))?isNaN(Td(p).getDate())?x[y][E]=p:x[y][E]=Fn(p):x[y][E]=fi(p))}function e(p,x){var y=x||{},E=[];if(!p||p.length===0)return E;for(var w=p.split(/[\r\n]/),T=w.length-1;T>=0&&w[T].length===0;)--T;for(var b=10,A=0,M=0;M<=T;++M)A=w[M].indexOf(" "),A==-1?A=w[M].length:A++,b=Math.max(b,A);for(M=0;M<=T;++M){E[M]=[];var V=0;for(t(w[M].slice(0,b).trim(),E,M,V,y),V=1;V<=(w[M].length-b)/10+1;++V)t(w[M].slice(b+(V-1)*10,b+V*10).trim(),E,M,V,y)}return y.sheetRows&&(E=E.slice(0,y.sheetRows)),E}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function a(p){for(var x={},y=!1,E=0,w=0;E<p.length;++E)(w=p.charCodeAt(E))==34?y=!y:!y&&w in r&&(x[w]=(x[w]||0)+1);w=[];for(E in x)Object.prototype.hasOwnProperty.call(x,E)&&w.push([x[E],E]);if(!w.length){x=n;for(E in x)Object.prototype.hasOwnProperty.call(x,E)&&w.push([x[E],E])}return w.sort(function(T,b){return T[0]-b[0]||n[T[1]]-n[b[1]]}),r[w.pop()[1]]||44}function o(p,x){var y=x||{},E="",w=y.dense?[]:{},T={s:{c:0,r:0},e:{c:0,r:0}};p.slice(0,4)=="sep="?p.charCodeAt(5)==13&&p.charCodeAt(6)==10?(E=p.charAt(4),p=p.slice(7)):p.charCodeAt(5)==13||p.charCodeAt(5)==10?(E=p.charAt(4),p=p.slice(6)):E=a(p.slice(0,1024)):y&&y.FS?E=y.FS:E=a(p.slice(0,1024));var b=0,A=0,M=0,V=0,H=0,re=E.charCodeAt(0),q=!1,j=0,D=p.charCodeAt(0);p=p.replace(/\r\n/mg,`
`);var S=y.dateNF!=null?nL(y.dateNF):null;function P(){var O=p.slice(V,H),C={};if(O.charAt(0)=='"'&&O.charAt(O.length-1)=='"'&&(O=O.slice(1,-1).replace(/""/g,'"')),O.length===0)C.t="z";else if(y.raw)C.t="s",C.v=O;else if(O.trim().length===0)C.t="s",C.v=O;else if(O.charCodeAt(0)==61)O.charCodeAt(1)==34&&O.charCodeAt(O.length-1)==34?(C.t="s",C.v=O.slice(2,-1).replace(/""/g,'"')):V5(O)?(C.t="n",C.f=O.slice(1)):(C.t="s",C.v=O);else if(O=="TRUE")C.t="b",C.v=!0;else if(O=="FALSE")C.t="b",C.v=!1;else if(!isNaN(M=fi(O)))C.t="n",y.cellText!==!1&&(C.w=O),C.v=M;else if(!isNaN(Td(O).getDate())||S&&O.match(S)){C.z=y.dateNF||vr[14];var k=0;S&&O.match(S)&&(O=aL(O,y.dateNF,O.match(S)||[]),k=1),y.cellDates?(C.t="d",C.v=Fn(O,k)):(C.t="n",C.v=Jn(Fn(O,k))),y.cellText!==!1&&(C.w=Io(C.z,C.v instanceof Date?Jn(C.v):C.v)),y.cellNF||delete C.z}else C.t="s",C.v=O;if(C.t=="z"||(y.dense?(w[b]||(w[b]=[]),w[b][A]=C):w[zt({c:A,r:b})]=C),V=H+1,D=p.charCodeAt(V),T.e.c<A&&(T.e.c=A),T.e.r<b&&(T.e.r=b),j==re)++A;else if(A=0,++b,y.sheetRows&&y.sheetRows<=b)return!0}e:for(;H<p.length;++H)switch(j=p.charCodeAt(H)){case 34:D===34&&(q=!q);break;case re:case 10:case 13:if(!q&&P())break e;break}return H-V>0&&P(),w["!ref"]=Ir(T),w}function c(p,x){return!(x&&x.PRN)||x.FS||p.slice(0,4)=="sep="||p.indexOf("	")>=0||p.indexOf(",")>=0||p.indexOf(";")>=0?o(p,x):Cu(e(p,x),x)}function h(p,x){var y="",E=x.type=="string"?[0,0,0,0]:ZB(p,x);switch(x.type){case"base64":y=Ei(p);break;case"binary":y=p;break;case"buffer":x.codepage==65001?y=p.toString("utf8"):x.codepage&&typeof u0<"u"||(y=It&&Buffer.isBuffer(p)?p.toString("binary"):qd(p));break;case"array":y=tp(p);break;case"string":y=p;break;default:throw new Error("Unrecognized type "+x.type)}return E[0]==239&&E[1]==187&&E[2]==191?y=nd(y.slice(3)):x.type!="string"&&x.type!="buffer"&&x.codepage==65001?y=nd(y):x.type=="binary"&&typeof u0<"u",y.slice(0,19)=="socialcalc:version:"?WA.to_sheet(x.type=="string"?y:nd(y),x):c(y,x)}function m(p,x){return ql(h(p,x),x)}function d(p){for(var x=[],y=nr(p["!ref"]),E,w=Array.isArray(p),T=y.s.r;T<=y.e.r;++T){for(var b=[],A=y.s.c;A<=y.e.c;++A){var M=zt({r:T,c:A});if(E=w?(p[T]||[])[A]:p[M],!E||E.v==null){b.push("          ");continue}for(var V=(E.w||(Ti(E),E.w)||"").slice(0,10);V.length<10;)V+=" ";b.push(V+(A===0?" ":""))}x.push(b.join(""))}return x.join(`
`)}return{to_workbook:m,to_sheet:h,from_sheet:d}})(),Lw=(function(){function t(Y,ee,J){if(Y){ma(Y,Y.l||0);for(var te=J.Enum||Z;Y.l<Y.length;){var he=Y.read_shift(2),Le=te[he]||te[65535],ke=Y.read_shift(2),He=Y.l+ke,ae=Le.f&&Le.f(Y,ke,J);if(Y.l=He,ee(ae,Le,he))return}}}function e(Y,ee){switch(ee.type){case"base64":return r(ts(Ei(Y)),ee);case"binary":return r(ts(Y),ee);case"buffer":case"array":return r(Y,ee)}throw"Unsupported type "+ee.type}function r(Y,ee){if(!Y)return Y;var J=ee||{},te=J.dense?[]:{},he="Sheet1",Le="",ke=0,He={},ae=[],Ve=[],Ze={s:{r:0,c:0},e:{r:0,c:0}},Ht=J.sheetRows||0;if(Y[2]==0&&(Y[3]==8||Y[3]==9)&&Y.length>=16&&Y[14]==5&&Y[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(Y[2]==2)J.Enum=Z,t(Y,function(Be,en,Ot){switch(Ot){case 0:J.vers=Be,Be>=4096&&(J.qpro=!0);break;case 6:Ze=Be;break;case 204:Be&&(Le=Be);break;case 222:Le=Be;break;case 15:case 51:J.qpro||(Be[1].v=Be[1].v.slice(1));case 13:case 14:case 16:Ot==14&&(Be[2]&112)==112&&(Be[2]&15)>1&&(Be[2]&15)<15&&(Be[1].z=J.dateNF||vr[14],J.cellDates&&(Be[1].t="d",Be[1].v=uA(Be[1].v))),J.qpro&&Be[3]>ke&&(te["!ref"]=Ir(Ze),He[he]=te,ae.push(he),te=J.dense?[]:{},Ze={s:{r:0,c:0},e:{r:0,c:0}},ke=Be[3],he=Le||"Sheet"+(ke+1),Le="");var Jt=J.dense?(te[Be[0].r]||[])[Be[0].c]:te[zt(Be[0])];if(Jt){Jt.t=Be[1].t,Jt.v=Be[1].v,Be[1].z!=null&&(Jt.z=Be[1].z),Be[1].f!=null&&(Jt.f=Be[1].f);break}J.dense?(te[Be[0].r]||(te[Be[0].r]=[]),te[Be[0].r][Be[0].c]=Be[1]):te[zt(Be[0])]=Be[1];break}},J);else if(Y[2]==26||Y[2]==14)J.Enum=_e,Y[2]==14&&(J.qpro=!0,Y.l=0),t(Y,function(Be,en,Ot){switch(Ot){case 204:he=Be;break;case 22:Be[1].v=Be[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Be[3]>ke&&(te["!ref"]=Ir(Ze),He[he]=te,ae.push(he),te=J.dense?[]:{},Ze={s:{r:0,c:0},e:{r:0,c:0}},ke=Be[3],he="Sheet"+(ke+1)),Ht>0&&Be[0].r>=Ht)break;J.dense?(te[Be[0].r]||(te[Be[0].r]=[]),te[Be[0].r][Be[0].c]=Be[1]):te[zt(Be[0])]=Be[1],Ze.e.c<Be[0].c&&(Ze.e.c=Be[0].c),Ze.e.r<Be[0].r&&(Ze.e.r=Be[0].r);break;case 27:Be[14e3]&&(Ve[Be[14e3][0]]=Be[14e3][1]);break;case 1537:Ve[Be[0]]=Be[1],Be[0]==ke&&(he=Be[1]);break}},J);else throw new Error("Unrecognized LOTUS BOF "+Y[2]);if(te["!ref"]=Ir(Ze),He[Le||he]=te,ae.push(Le||he),!Ve.length)return{SheetNames:ae,Sheets:He};for(var gt={},ta=[],Gt=0;Gt<Ve.length;++Gt)He[ae[Gt]]?(ta.push(Ve[Gt]||ae[Gt]),gt[Ve[Gt]]=He[Ve[Gt]]||He[ae[Gt]]):(ta.push(Ve[Gt]),gt[Ve[Gt]]={"!ref":"A1"});return{SheetNames:ta,Sheets:gt}}function n(Y,ee){var J=ee||{};if(+J.codepage>=0&&_d(+J.codepage),J.type=="string")throw new Error("Cannot write WK1 to JS string");var te=Qn(),he=nr(Y["!ref"]),Le=Array.isArray(Y),ke=[];Me(te,0,o(1030)),Me(te,6,m(he));for(var He=Math.min(he.e.r,8191),ae=he.s.r;ae<=He;++ae)for(var Ve=mn(ae),Ze=he.s.c;Ze<=he.e.c;++Ze){ae===he.s.r&&(ke[Ze]=bn(Ze));var Ht=ke[Ze]+Ve,gt=Le?(Y[ae]||[])[Ze]:Y[Ht];if(!(!gt||gt.t=="z"))if(gt.t=="n")(gt.v|0)==gt.v&&gt.v>=-32768&&gt.v<=32767?Me(te,13,E(ae,Ze,gt.v)):Me(te,14,T(ae,Ze,gt.v));else{var ta=Ti(gt);Me(te,15,x(ae,Ze,ta.slice(0,239)))}}return Me(te,1),te.end()}function a(Y,ee){var J=ee||{};if(+J.codepage>=0&&_d(+J.codepage),J.type=="string")throw new Error("Cannot write WK3 to JS string");var te=Qn();Me(te,0,c(Y));for(var he=0,Le=0;he<Y.SheetNames.length;++he)(Y.Sheets[Y.SheetNames[he]]||{})["!ref"]&&Me(te,27,Xe(Y.SheetNames[he],Le++));var ke=0;for(he=0;he<Y.SheetNames.length;++he){var He=Y.Sheets[Y.SheetNames[he]];if(!(!He||!He["!ref"])){for(var ae=nr(He["!ref"]),Ve=Array.isArray(He),Ze=[],Ht=Math.min(ae.e.r,8191),gt=ae.s.r;gt<=Ht;++gt)for(var ta=mn(gt),Gt=ae.s.c;Gt<=ae.e.c;++Gt){gt===ae.s.r&&(Ze[Gt]=bn(Gt));var Be=Ze[Gt]+ta,en=Ve?(He[gt]||[])[Gt]:He[Be];if(!(!en||en.t=="z"))if(en.t=="n")Me(te,23,P(gt,Gt,ke,en.v));else{var Ot=Ti(en);Me(te,22,j(gt,Gt,ke,Ot.slice(0,239)))}}++ke}}return Me(te,1),te.end()}function o(Y){var ee=ye(2);return ee.write_shift(2,Y),ee}function c(Y){var ee=ye(26);ee.write_shift(2,4096),ee.write_shift(2,4),ee.write_shift(4,0);for(var J=0,te=0,he=0,Le=0;Le<Y.SheetNames.length;++Le){var ke=Y.SheetNames[Le],He=Y.Sheets[ke];if(!(!He||!He["!ref"])){++he;var ae=xa(He["!ref"]);J<ae.e.r&&(J=ae.e.r),te<ae.e.c&&(te=ae.e.c)}}return J>8191&&(J=8191),ee.write_shift(2,J),ee.write_shift(1,he),ee.write_shift(1,te),ee.write_shift(2,0),ee.write_shift(2,0),ee.write_shift(1,1),ee.write_shift(1,2),ee.write_shift(4,0),ee.write_shift(4,0),ee}function h(Y,ee,J){var te={s:{c:0,r:0},e:{c:0,r:0}};return ee==8&&J.qpro?(te.s.c=Y.read_shift(1),Y.l++,te.s.r=Y.read_shift(2),te.e.c=Y.read_shift(1),Y.l++,te.e.r=Y.read_shift(2),te):(te.s.c=Y.read_shift(2),te.s.r=Y.read_shift(2),ee==12&&J.qpro&&(Y.l+=2),te.e.c=Y.read_shift(2),te.e.r=Y.read_shift(2),ee==12&&J.qpro&&(Y.l+=2),te.s.c==65535&&(te.s.c=te.e.c=te.s.r=te.e.r=0),te)}function m(Y){var ee=ye(8);return ee.write_shift(2,Y.s.c),ee.write_shift(2,Y.s.r),ee.write_shift(2,Y.e.c),ee.write_shift(2,Y.e.r),ee}function d(Y,ee,J){var te=[{c:0,r:0},{t:"n",v:0},0,0];return J.qpro&&J.vers!=20768?(te[0].c=Y.read_shift(1),te[3]=Y.read_shift(1),te[0].r=Y.read_shift(2),Y.l+=2):(te[2]=Y.read_shift(1),te[0].c=Y.read_shift(2),te[0].r=Y.read_shift(2)),te}function p(Y,ee,J){var te=Y.l+ee,he=d(Y,ee,J);if(he[1].t="s",J.vers==20768){Y.l++;var Le=Y.read_shift(1);return he[1].v=Y.read_shift(Le,"utf8"),he}return J.qpro&&Y.l++,he[1].v=Y.read_shift(te-Y.l,"cstr"),he}function x(Y,ee,J){var te=ye(7+J.length);te.write_shift(1,255),te.write_shift(2,ee),te.write_shift(2,Y),te.write_shift(1,39);for(var he=0;he<te.length;++he){var Le=J.charCodeAt(he);te.write_shift(1,Le>=128?95:Le)}return te.write_shift(1,0),te}function y(Y,ee,J){var te=d(Y,ee,J);return te[1].v=Y.read_shift(2,"i"),te}function E(Y,ee,J){var te=ye(7);return te.write_shift(1,255),te.write_shift(2,ee),te.write_shift(2,Y),te.write_shift(2,J,"i"),te}function w(Y,ee,J){var te=d(Y,ee,J);return te[1].v=Y.read_shift(8,"f"),te}function T(Y,ee,J){var te=ye(13);return te.write_shift(1,255),te.write_shift(2,ee),te.write_shift(2,Y),te.write_shift(8,J,"f"),te}function b(Y,ee,J){var te=Y.l+ee,he=d(Y,ee,J);if(he[1].v=Y.read_shift(8,"f"),J.qpro)Y.l=te;else{var Le=Y.read_shift(2);H(Y.slice(Y.l,Y.l+Le),he),Y.l+=Le}return he}function A(Y,ee,J){var te=ee&32768;return ee&=-32769,ee=(te?Y:0)+(ee>=8192?ee-16384:ee),(te?"":"$")+(J?bn(ee):mn(ee))}var M={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},V=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function H(Y,ee){ma(Y,0);for(var J=[],te=0,he="",Le="",ke="",He="";Y.l<Y.length;){var ae=Y[Y.l++];switch(ae){case 0:J.push(Y.read_shift(8,"f"));break;case 1:Le=A(ee[0].c,Y.read_shift(2),!0),he=A(ee[0].r,Y.read_shift(2),!1),J.push(Le+he);break;case 2:{var Ve=A(ee[0].c,Y.read_shift(2),!0),Ze=A(ee[0].r,Y.read_shift(2),!1);Le=A(ee[0].c,Y.read_shift(2),!0),he=A(ee[0].r,Y.read_shift(2),!1),J.push(Ve+Ze+":"+Le+he)}break;case 3:if(Y.l<Y.length){console.error("WK1 premature formula end");return}break;case 4:J.push("("+J.pop()+")");break;case 5:J.push(Y.read_shift(2));break;case 6:{for(var Ht="";ae=Y[Y.l++];)Ht+=String.fromCharCode(ae);J.push('"'+Ht.replace(/"/g,'""')+'"')}break;case 8:J.push("-"+J.pop());break;case 23:J.push("+"+J.pop());break;case 22:J.push("NOT("+J.pop()+")");break;case 20:case 21:He=J.pop(),ke=J.pop(),J.push(["AND","OR"][ae-20]+"("+ke+","+He+")");break;default:if(ae<32&&V[ae])He=J.pop(),ke=J.pop(),J.push(ke+V[ae]+He);else if(M[ae]){if(te=M[ae][1],te==69&&(te=Y[Y.l++]),te>J.length){console.error("WK1 bad formula parse 0x"+ae.toString(16)+":|"+J.join("|")+"|");return}var gt=J.slice(-te);J.length-=te,J.push(M[ae][0]+"("+gt.join(",")+")")}else return ae<=7?console.error("WK1 invalid opcode "+ae.toString(16)):ae<=24?console.error("WK1 unsupported op "+ae.toString(16)):ae<=30?console.error("WK1 invalid opcode "+ae.toString(16)):ae<=115?console.error("WK1 unsupported function opcode "+ae.toString(16)):console.error("WK1 unrecognized opcode "+ae.toString(16))}}J.length==1?ee[1].f=""+J[0]:console.error("WK1 bad formula parse |"+J.join("|")+"|")}function re(Y){var ee=[{c:0,r:0},{t:"n",v:0},0];return ee[0].r=Y.read_shift(2),ee[3]=Y[Y.l++],ee[0].c=Y[Y.l++],ee}function q(Y,ee){var J=re(Y);return J[1].t="s",J[1].v=Y.read_shift(ee-4,"cstr"),J}function j(Y,ee,J,te){var he=ye(6+te.length);he.write_shift(2,Y),he.write_shift(1,J),he.write_shift(1,ee),he.write_shift(1,39);for(var Le=0;Le<te.length;++Le){var ke=te.charCodeAt(Le);he.write_shift(1,ke>=128?95:ke)}return he.write_shift(1,0),he}function D(Y,ee){var J=re(Y);J[1].v=Y.read_shift(2);var te=J[1].v>>1;if(J[1].v&1)switch(te&7){case 0:te=(te>>3)*5e3;break;case 1:te=(te>>3)*500;break;case 2:te=(te>>3)/20;break;case 3:te=(te>>3)/200;break;case 4:te=(te>>3)/2e3;break;case 5:te=(te>>3)/2e4;break;case 6:te=(te>>3)/16;break;case 7:te=(te>>3)/64;break}return J[1].v=te,J}function S(Y,ee){var J=re(Y),te=Y.read_shift(4),he=Y.read_shift(4),Le=Y.read_shift(2);if(Le==65535)return te===0&&he===3221225472?(J[1].t="e",J[1].v=15):te===0&&he===3489660928?(J[1].t="e",J[1].v=42):J[1].v=0,J;var ke=Le&32768;return Le=(Le&32767)-16446,J[1].v=(1-ke*2)*(he*Math.pow(2,Le+32)+te*Math.pow(2,Le)),J}function P(Y,ee,J,te){var he=ye(14);if(he.write_shift(2,Y),he.write_shift(1,J),he.write_shift(1,ee),te==0)return he.write_shift(4,0),he.write_shift(4,0),he.write_shift(2,65535),he;var Le=0,ke=0,He=0,ae=0;return te<0&&(Le=1,te=-te),ke=Math.log2(te)|0,te/=Math.pow(2,ke-31),ae=te>>>0,(ae&2147483648)==0&&(te/=2,++ke,ae=te>>>0),te-=ae,ae|=2147483648,ae>>>=0,te*=Math.pow(2,32),He=te>>>0,he.write_shift(4,He),he.write_shift(4,ae),ke+=16383+(Le?32768:0),he.write_shift(2,ke),he}function O(Y,ee){var J=S(Y);return Y.l+=ee-14,J}function C(Y,ee){var J=re(Y),te=Y.read_shift(4);return J[1].v=te>>6,J}function k(Y,ee){var J=re(Y),te=Y.read_shift(8,"f");return J[1].v=te,J}function Ce(Y,ee){var J=k(Y);return Y.l+=ee-10,J}function ze(Y,ee){return Y[Y.l+ee-1]==0?Y.read_shift(ee,"cstr"):""}function ge(Y,ee){var J=Y[Y.l++];J>ee-1&&(J=ee-1);for(var te="";te.length<J;)te+=String.fromCharCode(Y[Y.l++]);return te}function De(Y,ee,J){if(!(!J.qpro||ee<21)){var te=Y.read_shift(1);Y.l+=17,Y.l+=1,Y.l+=2;var he=Y.read_shift(ee-21,"cstr");return[te,he]}}function Fe(Y,ee){for(var J={},te=Y.l+ee;Y.l<te;){var he=Y.read_shift(2);if(he==14e3){for(J[he]=[0,""],J[he][0]=Y.read_shift(2);Y[Y.l];)J[he][1]+=String.fromCharCode(Y[Y.l]),Y.l++;Y.l++}}return J}function Xe(Y,ee){var J=ye(5+Y.length);J.write_shift(2,14e3),J.write_shift(2,ee);for(var te=0;te<Y.length;++te){var he=Y.charCodeAt(te);J[J.l++]=he>127?95:he}return J[J.l++]=0,J}var Z={0:{n:"BOF",f:zA},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:h},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:y},14:{n:"NUMBER",f:w},15:{n:"LABEL",f:p},16:{n:"FORMULA",f:b},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:p},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:ze},222:{n:"SHEETNAMELP",f:ge},65535:{n:""}},_e={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:q},23:{n:"NUMBER17",f:S},24:{n:"NUMBER18",f:D},25:{n:"FORMULA19",f:O},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:Fe},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:C},38:{n:"??"},39:{n:"NUMBER27",f:k},40:{n:"FORMULA28",f:Ce},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:ze},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:De},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:a,to_workbook:e}})(),z8=/^\s|\s$|[\t\n\r]/;function YA(t,e){if(!e.bookSST)return"";var r=[Or];r[r.length]=Oe("sst",null,{xmlns:Au[0],count:t.Count,uniqueCount:t.Unique});for(var n=0;n!=t.length;++n)if(t[n]!=null){var a=t[n],o="<si>";a.r?o+=a.r:(o+="<t",a.t||(a.t=""),a.t.match(z8)&&(o+=' xml:space="preserve"'),o+=">"+Ut(a.t)+"</t>"),o+="</si>",r[r.length]=o}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function H8(t){return[t.read_shift(4),t.read_shift(4)]}function G8(t,e){return e||(e=ye(8)),e.write_shift(4,t.Count),e.write_shift(4,t.Unique),e}var q8=ML;function $8(t){var e=Qn();Se(e,159,G8(t));for(var r=0;r<t.length;++r)Se(e,19,q8(t[r]));return Se(e,160),e.end()}function W8(t){for(var e=[],r=t.split(""),n=0;n<r.length;++n)e[n]=r[n].charCodeAt(0);return e}function KA(t){var e=0,r,n=W8(t),a=n.length+1,o,c,h,m,d;for(r=Ol(a),r[0]=n.length,o=1;o!=a;++o)r[o]=n[o-1];for(o=a-1;o>=0;--o)c=r[o],h=(e&16384)===0?0:1,m=e<<1&32767,d=h|m,e=d^c;return e^52811}var Y8=(function(){function t(a,o){switch(o.type){case"base64":return e(Ei(a),o);case"binary":return e(a,o);case"buffer":return e(It&&Buffer.isBuffer(a)?a.toString("binary"):qd(a),o);case"array":return e(tp(a),o)}throw new Error("Unrecognized type "+o.type)}function e(a,o){var c=o||{},h=c.dense?[]:{},m=a.match(/\\trowd.*?\\row\b/g);if(!m.length)throw new Error("RTF missing table");var d={s:{c:0,r:0},e:{c:0,r:m.length-1}};return m.forEach(function(p,x){Array.isArray(h)&&(h[x]=[]);for(var y=/\\\w+\b/g,E=0,w,T=-1;w=y.exec(p);){switch(w[0]){case"\\cell":var b=p.slice(E,y.lastIndex-w[0].length);if(b[0]==" "&&(b=b.slice(1)),++T,b.length){var A={v:b,t:"s"};Array.isArray(h)?h[x][T]=A:h[zt({r:x,c:T})]=A}break}E=y.lastIndex}T>d.e.c&&(d.e.c=T)}),h["!ref"]=Ir(d),h}function r(a,o){return ql(t(a,o),o)}function n(a){for(var o=["{\\rtf1\\ansi"],c=nr(a["!ref"]),h,m=Array.isArray(a),d=c.s.r;d<=c.e.r;++d){o.push("\\trowd\\trautofit1");for(var p=c.s.c;p<=c.e.c;++p)o.push("\\cellx"+(p+1));for(o.push("\\pard\\intbl"),p=c.s.c;p<=c.e.c;++p){var x=zt({r:d,c:p});h=m?(a[d]||[])[p]:a[x],!(!h||h.v==null&&(!h.f||h.F))&&(o.push(" "+(h.w||(Ti(h),h.w))),o.push("\\cell"))}o.push("\\pard\\intbl\\row")}return o.join("")+"}"}return{to_workbook:r,to_sheet:t,from_sheet:n}})();function Vw(t){for(var e=0,r=1;e!=3;++e)r=r*256+(t[e]>255?255:t[e]<0?0:t[e]);return r.toString(16).toUpperCase().slice(1)}var K8=6,mi=K8;function y0(t){return Math.floor((t+Math.round(128/mi)/256)*mi)}function _0(t){return Math.floor((t-5)/mi*100+.5)/100}function ox(t){return Math.round((t*mi+5)/mi*256)/256}function b1(t){t.width?(t.wpx=y0(t.width),t.wch=_0(t.wpx),t.MDW=mi):t.wpx?(t.wch=_0(t.wpx),t.width=ox(t.wch),t.MDW=mi):typeof t.wch=="number"&&(t.width=ox(t.wch),t.wpx=y0(t.width),t.MDW=mi),t.customWidth&&delete t.customWidth}var X8=96,XA=X8;function E0(t){return t*96/XA}function QA(t){return t*XA/96}function Q8(t){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)t[n]!=null&&(e[e.length]=Oe("numFmt",null,{numFmtId:n,formatCode:Ut(t[n])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=Oe("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function J8(t){var e=[];return e[e.length]=Oe("cellXfs",null),t.forEach(function(r){e[e.length]=Oe("xf",null,r)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=Oe("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function JA(t,e){var r=[Or,Oe("styleSheet",null,{xmlns:Au[0],"xmlns:vt":Xr.vt})],n;return t.SSF&&(n=Q8(t.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=J8(e.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function Z8(t,e){var r=t.read_shift(2),n=Sn(t);return[r,n]}function e5(t,e,r){r||(r=ye(6+4*e.length)),r.write_shift(2,t),Jr(e,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function t5(t,e,r){var n={};n.sz=t.read_shift(2)/20;var a=zL(t);a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1);var o=t.read_shift(2);switch(o===700&&(n.bold=1),t.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var c=t.read_shift(1);c!=0&&(n.underline=c);var h=t.read_shift(1);h>0&&(n.family=h);var m=t.read_shift(1);switch(m>0&&(n.charset=m),t.l++,n.color=UL(t),t.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=Sn(t),n}function r5(t,e){e||(e=ye(153)),e.write_shift(2,t.sz*20),HL(t,e),e.write_shift(2,t.bold?700:400);var r=0;t.vertAlign=="superscript"?r=1:t.vertAlign=="subscript"&&(r=2),e.write_shift(2,r),e.write_shift(1,t.underline||0),e.write_shift(1,t.family||0),e.write_shift(1,t.charset||0),e.write_shift(1,0),v0(t.color,e);var n=0;return n=2,e.write_shift(1,n),Jr(t.name,e),e.length>e.l?e.slice(0,e.l):e}var n5=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],Ev,a5=Ms;function Bw(t,e){e||(e=ye(84)),Ev||(Ev=f1(n5));var r=Ev[t.patternType];r==null&&(r=40),e.write_shift(4,r);var n=0;if(r!=40)for(v0({auto:1},e),v0({auto:1},e);n<12;++n)e.write_shift(4,0);else{for(;n<4;++n)e.write_shift(4,0);for(;n<12;++n)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function s5(t,e){var r=t.l+e,n=t.read_shift(2),a=t.read_shift(2);return t.l=r,{ixfe:n,numFmtId:a}}function ZA(t,e,r){r||(r=ye(16)),r.write_shift(2,e||0),r.write_shift(2,t.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function Lh(t,e){return e||(e=ye(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var i5=Ms;function o5(t,e){return e||(e=ye(51)),e.write_shift(1,0),Lh(null,e),Lh(null,e),Lh(null,e),Lh(null,e),Lh(null,e),e.length>e.l?e.slice(0,e.l):e}function l5(t,e){return e||(e=ye(52)),e.write_shift(4,t.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),g0(t.name||"",e),e.length>e.l?e.slice(0,e.l):e}function c5(t,e,r){var n=ye(2052);return n.write_shift(4,t),g0(e,n),g0(r,n),n.length>n.l?n.slice(0,n.l):n}function u5(t,e){if(e){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&++r}),r!=0&&(Se(t,615,ss(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&Se(t,44,e5(a,e[a]))}),Se(t,616))}}function h5(t){var e=1;Se(t,611,ss(e)),Se(t,43,r5({sz:12,color:{theme:1},name:"Calibri",family:2})),Se(t,612)}function d5(t){var e=2;Se(t,603,ss(e)),Se(t,45,Bw({patternType:"none"})),Se(t,45,Bw({patternType:"gray125"})),Se(t,604)}function f5(t){var e=1;Se(t,613,ss(e)),Se(t,46,o5()),Se(t,614)}function m5(t){var e=1;Se(t,626,ss(e)),Se(t,47,ZA({numFmtId:0},65535)),Se(t,627)}function p5(t,e){Se(t,617,ss(e.length)),e.forEach(function(r){Se(t,47,ZA(r,0))}),Se(t,618)}function g5(t){var e=1;Se(t,619,ss(e)),Se(t,48,l5({xfId:0,name:"Normal"})),Se(t,620)}function v5(t){var e=0;Se(t,505,ss(e)),Se(t,506)}function x5(t){var e=0;Se(t,508,c5(e,"TableStyleMedium9","PivotStyleMedium4")),Se(t,509)}function y5(t,e){var r=Qn();return Se(r,278),u5(r,t.SSF),h5(r),d5(r),f5(r),m5(r),p5(r,e.cellXfs),g5(r),v5(r),x5(r),Se(r,279),r.end()}function eC(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var r=[Or];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function _5(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:Sn(t)}}function E5(t){var e=ye(12+2*t.name.length);return e.write_shift(4,t.flags),e.write_shift(4,t.version),Jr(t.name,e),e.slice(0,e.l)}function T5(t){for(var e=[],r=t.read_shift(4);r-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function w5(t){var e=ye(4+8*t.length);e.write_shift(4,t.length);for(var r=0;r<t.length;++r)e.write_shift(4,t[r][0]),e.write_shift(4,t[r][1]);return e}function N5(t,e){var r=ye(8+2*e.length);return r.write_shift(4,t),Jr(e,r),r.slice(0,r.l)}function b5(t){return t.l+=4,t.read_shift(4)!=0}function S5(t,e){var r=ye(8);return r.write_shift(4,t),r.write_shift(4,1),r}function A5(){var t=Qn();return Se(t,332),Se(t,334,ss(1)),Se(t,335,E5({name:"XLDAPR",version:12e4,flags:3496657072})),Se(t,336),Se(t,339,N5(1,"XLDAPR")),Se(t,52),Se(t,35,ss(514)),Se(t,4096,ss(0)),Se(t,4097,Oa(1)),Se(t,36),Se(t,53),Se(t,340),Se(t,337,S5(1)),Se(t,51,w5([[1,0]])),Se(t,338),Se(t,333),t.end()}function tC(){var t=[Or];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function C5(t){var e={};e.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),e.r=zt(r);var n=t.read_shift(1);return n&2&&(e.l="1"),n&8&&(e.a="1"),e}var qc=1024;function rC(t,e){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),a=[Oe("xml",null,{"xmlns:v":pa.v,"xmlns:o":pa.o,"xmlns:x":pa.x,"xmlns:mv":pa.mv}).replace(/\/>/,">"),Oe("o:shapelayout",Oe("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),Oe("v:shapetype",[Oe("v:stroke",null,{joinstyle:"miter"}),Oe("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];qc<t*1e3;)qc+=1e3;return e.forEach(function(o){var c=Qr(o[0]),h={color2:"#BEFF82",type:"gradient"};h.type=="gradient"&&(h.angle="-180");var m=h.type=="gradient"?Oe("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,d=Oe("v:fill",m,h),p={on:"t",obscured:"t"};++qc,a=a.concat(["<v:shape"+Nd({id:"_x0000_s"+qc,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(o[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",d,Oe("v:shadow",null,p),Oe("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",hn("x:Anchor",[c.c+1,0,c.r+1,0,c.c+3,20,c.r+5,20].join(",")),hn("x:AutoFill","False"),hn("x:Row",String(c.r)),hn("x:Column",String(c.c)),o[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function nC(t){var e=[Or,Oe("comments",null,{xmlns:Au[0]})],r=[];return e.push("<authors>"),t.forEach(function(n){n[1].forEach(function(a){var o=Ut(a.a);r.indexOf(o)==-1&&(r.push(o),e.push("<author>"+o+"</author>")),a.T&&a.ID&&r.indexOf("tc="+a.ID)==-1&&(r.push("tc="+a.ID),e.push("<author>tc="+a.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),t.forEach(function(n){var a=0,o=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?a=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(m){m.a&&(a=r.indexOf(Ut(m.a))),o.push(m.t||"")}),e.push('<comment ref="'+n[0]+'" authorId="'+a+'"><text>'),o.length<=1)e.push(hn("t",Ut(o[0]||"")));else{for(var c=`Comment:
    `+o[0]+`
`,h=1;h<o.length;++h)c+=`Reply:
    `+o[h]+`
`;e.push(hn("t",Ut(c)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function j5(t,e,r){var n=[Or,Oe("ThreadedComments",null,{xmlns:Xr.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(a){var o="";(a[1]||[]).forEach(function(c,h){if(!c.T){delete c.ID;return}c.a&&e.indexOf(c.a)==-1&&e.push(c.a);var m={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};h==0?o=m.id:m.parentId=o,c.ID=m.id,c.a&&(m.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(c.a)).slice(-12)+"}"),n.push(Oe("threadedComment",hn("text",c.t||""),m))})}),n.push("</ThreadedComments>"),n.join("")}function R5(t){var e=[Or,Oe("personList",null,{xmlns:Xr.TCMNT,"xmlns:x":Au[0]}).replace(/[\/]>/,">")];return t.forEach(function(r,n){e.push(Oe("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),e.push("</personList>"),e.join("")}function D5(t){var e={};e.iauthor=t.read_shift(4);var r=Kl(t);return e.rfx=r.s,e.ref=zt(r.s),t.l+=16,e}function I5(t,e){return e==null&&(e=ye(36)),e.write_shift(4,t[1].iauthor),ju(t[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var k5=Sn;function O5(t){return Jr(t.slice(0,54))}function M5(t){var e=Qn(),r=[];return Se(e,628),Se(e,630),t.forEach(function(n){n[1].forEach(function(a){r.indexOf(a.a)>-1||(r.push(a.a.slice(0,54)),Se(e,632,O5(a.a)))})}),Se(e,631),Se(e,633),t.forEach(function(n){n[1].forEach(function(a){a.iauthor=r.indexOf(a.a);var o={s:Qr(n[0]),e:Qr(n[0])};Se(e,635,I5([o,a])),a.t&&a.t.length>0&&Se(e,637,FL(a)),Se(e,636),delete a.iauthor})}),Se(e,634),Se(e,629),e.end()}function P5(t,e){e.FullPaths.forEach(function(r,n){if(n!=0){var a=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&Kt.utils.cfb_add(t,a,e.FileIndex[n].content)}})}var aC=["xlsb","xlsm","xlam","biff8","xla"],F5=(function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function r(n,a,o,c){var h=!1,m=!1;o.length==0?m=!0:o.charAt(0)=="["&&(m=!0,o=o.slice(1,-1)),c.length==0?h=!0:c.charAt(0)=="["&&(h=!0,c=c.slice(1,-1));var d=o.length>0?parseInt(o,10)|0:0,p=c.length>0?parseInt(c,10)|0:0;return h?p+=e.c:--p,m?d+=e.r:--d,a+(h?"":"$")+bn(p)+(m?"":"$")+mn(d)}return function(a,o){return e=o,a.replace(t,r)}})(),S1=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,A1=(function(){return function(e,r){return e.replace(S1,function(n,a,o,c,h,m){var d=_1(c)-(o?0:r.c),p=y1(m)-(h?0:r.r),x=p==0?"":h?p+1:"["+p+"]",y=d==0?"":o?d+1:"["+d+"]";return a+"R"+x+"C"+y})}})();function L5(t,e){return t.replace(S1,function(r,n,a,o,c,h){return n+(a=="$"?a+o:bn(_1(o)+e.c))+(c=="$"?c+h:mn(y1(h)+e.r))})}function V5(t){return t.length!=1}function Cr(t){t.l+=1}function ko(t,e){var r=t.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function sC(t,e,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return iC(t);r.biff==12&&(n=4)}var a=t.read_shift(n),o=t.read_shift(n),c=ko(t),h=ko(t);return{s:{r:a,c:c[0],cRel:c[1],rRel:c[2]},e:{r:o,c:h[0],cRel:h[1],rRel:h[2]}}}function iC(t){var e=ko(t),r=ko(t),n=t.read_shift(1),a=t.read_shift(1);return{s:{r:e[0],c:n,cRel:e[1],rRel:e[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function B5(t,e,r){if(r.biff<8)return iC(t);var n=t.read_shift(r.biff==12?4:2),a=t.read_shift(r.biff==12?4:2),o=ko(t),c=ko(t);return{s:{r:n,c:o[0],cRel:o[1],rRel:o[2]},e:{r:a,c:c[0],cRel:c[1],rRel:c[2]}}}function oC(t,e,r){if(r&&r.biff>=2&&r.biff<=5)return U5(t);var n=t.read_shift(r&&r.biff==12?4:2),a=ko(t);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function U5(t){var e=ko(t),r=t.read_shift(1);return{r:e[0],c:r,cRel:e[1],rRel:e[2]}}function z5(t){var e=t.read_shift(2),r=t.read_shift(2);return{r:e,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function H5(t,e,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return G5(t);var a=t.read_shift(n>=12?4:2),o=t.read_shift(2),c=(o&16384)>>14,h=(o&32768)>>15;if(o&=16383,h==1)for(;a>524287;)a-=1048576;if(c==1)for(;o>8191;)o=o-16384;return{r:a,c:o,cRel:c,rRel:h}}function G5(t){var e=t.read_shift(2),r=t.read_shift(1),n=(e&32768)>>15,a=(e&16384)>>14;return e&=16383,n==1&&e>=8192&&(e=e-16384),a==1&&r>=128&&(r=r-256),{r:e,c:r,cRel:a,rRel:n}}function q5(t,e,r){var n=(t[t.l++]&96)>>5,a=sC(t,r.biff>=2&&r.biff<=5?6:8,r);return[n,a]}function $5(t,e,r){var n=(t[t.l++]&96)>>5,a=t.read_shift(2,"i"),o=8;if(r)switch(r.biff){case 5:t.l+=12,o=6;break;case 12:o=12;break}var c=sC(t,o,r);return[n,a,c]}function W5(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function Y5(t,e,r){var n=(t[t.l++]&96)>>5,a=t.read_shift(2),o=8;if(r)switch(r.biff){case 5:t.l+=12,o=6;break;case 12:o=12;break}return t.l+=o,[n,a]}function K5(t,e,r){var n=(t[t.l++]&96)>>5,a=B5(t,e-1,r);return[n,a]}function X5(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[n]}function Uw(t){var e=t[t.l+1]&1,r=1;return t.l+=4,[e,r]}function Q5(t,e,r){t.l+=2;for(var n=t.read_shift(r&&r.biff==2?1:2),a=[],o=0;o<=n;++o)a.push(t.read_shift(r&&r.biff==2?1:2));return a}function J5(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function Z5(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function e9(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function t9(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[n]}function lC(t){var e=t.read_shift(1),r=t.read_shift(1);return[e,r]}function r9(t){return t.read_shift(2),lC(t)}function n9(t){return t.read_shift(2),lC(t)}function a9(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=oC(t,0,r);return[n,a]}function s9(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=H5(t,0,r);return[n,a]}function i9(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var o=oC(t,0,r);return[n,a,o]}function o9(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=t.read_shift(r&&r.biff<=3?1:2);return[oV[a],hC[a],n]}function l9(t,e,r){var n=t[t.l++],a=t.read_shift(1),o=r&&r.biff<=3?[n==88?-1:0,t.read_shift(1)]:c9(t);return[a,(o[0]===0?hC:iV)[o[1]]]}function c9(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function u9(t,e,r){t.l+=r&&r.biff==2?3:4}function h9(t,e,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var n=t.read_shift(2),a=t.read_shift(r&&r.biff==2?1:2);return[n,a]}function d9(t){return t.l++,Yd[t.read_shift(1)]}function f9(t){return t.l++,t.read_shift(2)}function m9(t){return t.l++,t.read_shift(1)!==0}function p9(t){return t.l++,Ru(t)}function g9(t,e,r){return t.l++,GA(t,e-1,r)}function v9(t,e){var r=[t.read_shift(1)];if(e==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=i8(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:r[1]=Yd[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=Ru(t);break;case 2:r[1]=u8(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function x9(t,e,r){for(var n=t.read_shift(r.biff==12?4:2),a=[],o=0;o!=n;++o)a.push((r.biff==12?Kl:f8)(t));return a}function y9(t,e,r){var n=0,a=0;r.biff==12?(n=t.read_shift(4),a=t.read_shift(4)):(a=1+t.read_shift(1),n=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--a==0&&(a=256));for(var o=0,c=[];o!=n&&(c[o]=[]);++o)for(var h=0;h!=a;++h)c[o][h]=v9(t,r.biff);return c}function _9(t,e,r){var n=t.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,o=t.read_shift(a);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[n,0,o]}function E9(t,e,r){if(r.biff==5)return T9(t);var n=t.read_shift(1)>>>5&3,a=t.read_shift(2),o=t.read_shift(4);return[n,a,o]}function T9(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var n=t.read_shift(2);return t.l+=12,[e,r,n]}function w9(t,e,r){var n=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var a=t.read_shift(r&&r.biff==2?1:2);return[n,a]}function N9(t,e,r){var n=t.read_shift(1)>>>5&3,a=t.read_shift(r&&r.biff==2?1:2);return[n,a]}function b9(t,e,r){var n=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[n]}function S9(t,e,r){var n=(t[t.l++]&96)>>5,a=t.read_shift(2),o=4;if(r)switch(r.biff){case 5:o=15;break;case 12:o=6;break}return t.l+=o,[n,a]}var A9=Ms,C9=Ms,j9=Ms;function Kd(t,e,r){return t.l+=2,[z5(t)]}function C1(t){return t.l+=6,[]}var R9=Kd,D9=C1,I9=C1,k9=Kd;function cC(t){return t.l+=2,[zA(t),t.read_shift(2)&1]}var O9=Kd,M9=cC,P9=C1,F9=Kd,L9=Kd,V9=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function B9(t){t.l+=2;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),a=t.read_shift(2),o=t.read_shift(2),c=V9[r>>2&31];return{ixti:e,coltype:r&3,rt:c,idx:n,c:a,C:o}}function U9(t){return t.l+=2,[t.read_shift(4)]}function z9(t,e,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function H9(t,e,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function G9(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function q9(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function $9(t){return t.l+=4,[0,0]}var zw={1:{n:"PtgExp",f:h9},2:{n:"PtgTbl",f:j9},3:{n:"PtgAdd",f:Cr},4:{n:"PtgSub",f:Cr},5:{n:"PtgMul",f:Cr},6:{n:"PtgDiv",f:Cr},7:{n:"PtgPower",f:Cr},8:{n:"PtgConcat",f:Cr},9:{n:"PtgLt",f:Cr},10:{n:"PtgLe",f:Cr},11:{n:"PtgEq",f:Cr},12:{n:"PtgGe",f:Cr},13:{n:"PtgGt",f:Cr},14:{n:"PtgNe",f:Cr},15:{n:"PtgIsect",f:Cr},16:{n:"PtgUnion",f:Cr},17:{n:"PtgRange",f:Cr},18:{n:"PtgUplus",f:Cr},19:{n:"PtgUminus",f:Cr},20:{n:"PtgPercent",f:Cr},21:{n:"PtgParen",f:Cr},22:{n:"PtgMissArg",f:Cr},23:{n:"PtgStr",f:g9},26:{n:"PtgSheet",f:z9},27:{n:"PtgEndSheet",f:H9},28:{n:"PtgErr",f:d9},29:{n:"PtgBool",f:m9},30:{n:"PtgInt",f:f9},31:{n:"PtgNum",f:p9},32:{n:"PtgArray",f:X5},33:{n:"PtgFunc",f:o9},34:{n:"PtgFuncVar",f:l9},35:{n:"PtgName",f:_9},36:{n:"PtgRef",f:a9},37:{n:"PtgArea",f:q5},38:{n:"PtgMemArea",f:w9},39:{n:"PtgMemErr",f:A9},40:{n:"PtgMemNoMem",f:C9},41:{n:"PtgMemFunc",f:N9},42:{n:"PtgRefErr",f:b9},43:{n:"PtgAreaErr",f:W5},44:{n:"PtgRefN",f:s9},45:{n:"PtgAreaN",f:K5},46:{n:"PtgMemAreaN",f:G9},47:{n:"PtgMemNoMemN",f:q9},57:{n:"PtgNameX",f:E9},58:{n:"PtgRef3d",f:i9},59:{n:"PtgArea3d",f:$5},60:{n:"PtgRefErr3d",f:S9},61:{n:"PtgAreaErr3d",f:Y5},255:{}},W9={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Y9={1:{n:"PtgElfLel",f:cC},2:{n:"PtgElfRw",f:F9},3:{n:"PtgElfCol",f:R9},6:{n:"PtgElfRwV",f:L9},7:{n:"PtgElfColV",f:k9},10:{n:"PtgElfRadical",f:O9},11:{n:"PtgElfRadicalS",f:P9},13:{n:"PtgElfColS",f:D9},15:{n:"PtgElfColSV",f:I9},16:{n:"PtgElfRadicalLel",f:M9},25:{n:"PtgList",f:B9},29:{n:"PtgSxName",f:U9},255:{}},K9={0:{n:"PtgAttrNoop",f:$9},1:{n:"PtgAttrSemi",f:t9},2:{n:"PtgAttrIf",f:Z5},4:{n:"PtgAttrChoose",f:Q5},8:{n:"PtgAttrGoto",f:J5},16:{n:"PtgAttrSum",f:u9},32:{n:"PtgAttrBaxcel",f:Uw},33:{n:"PtgAttrBaxcel",f:Uw},64:{n:"PtgAttrSpace",f:r9},65:{n:"PtgAttrSpaceSemi",f:n9},128:{n:"PtgAttrIfError",f:e9},255:{}};function X9(t,e,r,n){if(n.biff<8)return Ms(t,e);for(var a=t.l+e,o=[],c=0;c!==r.length;++c)switch(r[c][0]){case"PtgArray":r[c][1]=y9(t,0,n),o.push(r[c][1]);break;case"PtgMemArea":r[c][2]=x9(t,r[c][1],n),o.push(r[c][2]);break;case"PtgExp":n&&n.biff==12&&(r[c][1][1]=t.read_shift(4),o.push(r[c][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[c][0]}return e=a-t.l,e!==0&&o.push(Ms(t,e)),o}function Q9(t,e,r){for(var n=t.l+e,a,o,c=[];n!=t.l;)e=n-t.l,o=t[t.l],a=zw[o]||zw[W9[o]],(o===24||o===25)&&(a=(o===24?Y9:K9)[t[t.l+1]]),!a||!a.f?Ms(t,e):c.push([a.n,a.f(t,e,r)]);return c}function J9(t){for(var e=[],r=0;r<t.length;++r){for(var n=t[r],a=[],o=0;o<n.length;++o){var c=n[o];if(c)switch(c[0]){case 2:a.push('"'+c[1].replace(/"/g,'""')+'"');break;default:a.push(c[1])}else a.push("")}e.push(a.join(","))}return e.join(";")}var Z9={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function eV(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function uC(t,e,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var n=t.XTI[e];if(r.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!n)return"SH33TJSERR1";var a="";if(r.biff>8)switch(t[n[0]][0]){case 357:return a=n[1]==-1?"#REF":t.SheetNames[n[1]],n[1]==n[2]?a:a+":"+t.SheetNames[n[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[n[0]][0];case 355:default:return"SH33TJSSRC"+t[n[0]][0]}switch(t[n[0]][0][0]){case 1025:return a=n[1]==-1?"#REF":t.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+t.SheetNames[n[2]];case 14849:return t[n[0]].slice(1).map(function(o){return o.Name}).join(";;");default:return t[n[0]][0][3]?(a=n[1]==-1?"#REF":t[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+t[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function Hw(t,e,r){var n=uC(t,e,r);return n=="#REF"?n:eV(n,r)}function uu(t,e,r,n,a){var o=a&&a.biff||8,c={s:{c:0,r:0}},h=[],m,d,p,x=0,y=0,E,w="";if(!t[0]||!t[0][0])return"";for(var T=-1,b="",A=0,M=t[0].length;A<M;++A){var V=t[0][A];switch(V[0]){case"PtgUminus":h.push("-"+h.pop());break;case"PtgUplus":h.push("+"+h.pop());break;case"PtgPercent":h.push(h.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(m=h.pop(),d=h.pop(),T>=0){switch(t[0][T][1][0]){case 0:b=mr(" ",t[0][T][1][1]);break;case 1:b=mr("\r",t[0][T][1][1]);break;default:if(b="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][T][1][0])}d=d+b,T=-1}h.push(d+Z9[V[0]]+m);break;case"PtgIsect":m=h.pop(),d=h.pop(),h.push(d+" "+m);break;case"PtgUnion":m=h.pop(),d=h.pop(),h.push(d+","+m);break;case"PtgRange":m=h.pop(),d=h.pop(),h.push(d+":"+m);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":p=sd(V[1][1],c,a),h.push(id(p,o));break;case"PtgRefN":p=r?sd(V[1][1],r,a):V[1][1],h.push(id(p,o));break;case"PtgRef3d":x=V[1][1],p=sd(V[1][2],c,a),w=Hw(n,x,a),h.push(w+"!"+id(p,o));break;case"PtgFunc":case"PtgFuncVar":var H=V[1][0],re=V[1][1];H||(H=0),H&=127;var q=H==0?[]:h.slice(-H);h.length-=H,re==="User"&&(re=q.shift()),h.push(re+"("+q.join(",")+")");break;case"PtgBool":h.push(V[1]?"TRUE":"FALSE");break;case"PtgInt":h.push(V[1]);break;case"PtgNum":h.push(String(V[1]));break;case"PtgStr":h.push('"'+V[1].replace(/"/g,'""')+'"');break;case"PtgErr":h.push(V[1]);break;case"PtgAreaN":E=Aw(V[1][1],r?{s:r}:c,a),h.push(yv(E,a));break;case"PtgArea":E=Aw(V[1][1],c,a),h.push(yv(E,a));break;case"PtgArea3d":x=V[1][1],E=V[1][2],w=Hw(n,x,a),h.push(w+"!"+yv(E,a));break;case"PtgAttrSum":h.push("SUM("+h.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":y=V[1][2];var j=(n.names||[])[y-1]||(n[0]||[])[y],D=j?j.Name:"SH33TJSNAME"+String(y);D&&D.slice(0,6)=="_xlfn."&&!a.xlfn&&(D=D.slice(6)),h.push(D);break;case"PtgNameX":var S=V[1][1];y=V[1][2];var P;if(a.biff<=5)S<0&&(S=-S),n[S]&&(P=n[S][y]);else{var O="";if(((n[S]||[])[0]||[])[0]==14849||(((n[S]||[])[0]||[])[0]==1025?n[S][y]&&n[S][y].itab>0&&(O=n.SheetNames[n[S][y].itab-1]+"!"):O=n.SheetNames[y-1]+"!"),n[S]&&n[S][y])O+=n[S][y].Name;else if(n[0]&&n[0][y])O+=n[0][y].Name;else{var C=(uC(n,S,a)||"").split(";;");C[y-1]?O=C[y-1]:O+="SH33TJSERRX"}h.push(O);break}P||(P={Name:"SH33TJSERRY"}),h.push(P.Name);break;case"PtgParen":var k="(",Ce=")";if(T>=0){switch(b="",t[0][T][1][0]){case 2:k=mr(" ",t[0][T][1][1])+k;break;case 3:k=mr("\r",t[0][T][1][1])+k;break;case 4:Ce=mr(" ",t[0][T][1][1])+Ce;break;case 5:Ce=mr("\r",t[0][T][1][1])+Ce;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][T][1][0])}T=-1}h.push(k+h.pop()+Ce);break;case"PtgRefErr":h.push("#REF!");break;case"PtgRefErr3d":h.push("#REF!");break;case"PtgExp":p={c:V[1][1],r:V[1][0]};var ze={c:r.c,r:r.r};if(n.sharedf[zt(p)]){var ge=n.sharedf[zt(p)];h.push(uu(ge,c,ze,n,a))}else{var De=!1;for(m=0;m!=n.arrayf.length;++m)if(d=n.arrayf[m],!(p.c<d[0].s.c||p.c>d[0].e.c)&&!(p.r<d[0].s.r||p.r>d[0].e.r)){h.push(uu(d[1],c,ze,n,a)),De=!0;break}De||h.push(V[1])}break;case"PtgArray":h.push("{"+J9(V[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":T=A;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":h.push("");break;case"PtgAreaErr":h.push("#REF!");break;case"PtgAreaErr3d":h.push("#REF!");break;case"PtgList":h.push("Table"+V[1].idx+"[#"+V[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(V));default:throw new Error("Unrecognized Formula Token: "+String(V))}var Fe=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&T>=0&&Fe.indexOf(t[0][A][0])==-1){V=t[0][T];var Xe=!0;switch(V[1][0]){case 4:Xe=!1;case 0:b=mr(" ",V[1][1]);break;case 5:Xe=!1;case 1:b=mr("\r",V[1][1]);break;default:if(b="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+V[1][0])}h.push((Xe?b:"")+h.pop()+(Xe?"":b)),T=-1}}if(h.length>1&&a.WTF)throw new Error("bad formula stack");return h[0]}function tV(t){if(t==null){var e=ye(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof t=="number")return Ml(t);return Ml(0)}function rV(t,e,r,n,a){var o=Pl(e,r,a),c=tV(t.v),h=ye(6),m=33;h.write_shift(2,m),h.write_shift(4,0);for(var d=ye(t.bf.length),p=0;p<t.bf.length;++p)d[p]=t.bf[p];var x=un([o,c,h,d]);return x}function rp(t,e,r){var n=t.read_shift(4),a=Q9(t,n,r),o=t.read_shift(4),c=o>0?X9(t,o,a,r):null;return[a,c]}var nV=rp,np=rp,aV=rp,sV=rp,iV={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},hC={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},oV={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function lV(t){var e="of:="+t.replace(S1,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function cV(t){return t.replace(/\./,"!")}var od=typeof Map<"u";function j1(t,e,r){var n=0,a=t.length;if(r){if(od?r.has(e):Object.prototype.hasOwnProperty.call(r,e)){for(var o=od?r.get(e):r[e];n<o.length;++n)if(t[o[n]].t===e)return t.Count++,o[n]}}else for(;n<a;++n)if(t[n].t===e)return t.Count++,n;return t[a]={t:e},t.Count++,t.Unique++,r&&(od?(r.has(e)||r.set(e,[]),r.get(e).push(a)):(Object.prototype.hasOwnProperty.call(r,e)||(r[e]=[]),r[e].push(a))),a}function ap(t,e){var r={min:t+1,max:t+1},n=-1;return e.MDW&&(mi=e.MDW),e.width!=null?r.customWidth=1:e.wpx!=null?n=_0(e.wpx):e.wch!=null&&(n=e.wch),n>-1?(r.width=ox(n),r.customWidth=1):e.width!=null&&(r.width=e.width),e.hidden&&(r.hidden=!0),e.level!=null&&(r.outlineLevel=r.level=e.level),r}function dC(t,e){if(t){var r=[.7,.7,.75,.75,.3,.3];t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function Vo(t,e,r){var n=r.revssf[e.z!=null?e.z:"General"],a=60,o=t.length;if(n==null&&r.ssf){for(;a<392;++a)if(r.ssf[a]==null){oA(e.z,a),r.ssf[a]=e.z,r.revssf[e.z]=n=a;break}}for(a=0;a!=o;++a)if(t[a].numFmtId===n)return a;return t[o]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},o}function uV(t,e,r){if(t&&t["!ref"]){var n=nr(t["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+t["!ref"])}}function hV(t){if(t.length===0)return"";for(var e='<mergeCells count="'+t.length+'">',r=0;r!=t.length;++r)e+='<mergeCell ref="'+Ir(t[r])+'"/>';return e+"</mergeCells>"}function dV(t,e,r,n,a){var o=!1,c={},h=null;if(n.bookType!=="xlsx"&&e.vbaraw){var m=e.SheetNames[r];try{e.Workbook&&(m=e.Workbook.Sheets[r].CodeName||m)}catch{}o=!0,c.codeName=wd(Ut(m))}if(t&&t["!outline"]){var d={summaryBelow:1,summaryRight:1};t["!outline"].above&&(d.summaryBelow=0),t["!outline"].left&&(d.summaryRight=0),h=(h||"")+Oe("outlinePr",null,d)}!o&&!h||(a[a.length]=Oe("sheetPr",h,c))}var fV=["objects","scenarios","selectLockedCells","selectUnlockedCells"],mV=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function pV(t){var e={sheet:1};return fV.forEach(function(r){t[r]!=null&&t[r]&&(e[r]="1")}),mV.forEach(function(r){t[r]!=null&&!t[r]&&(e[r]="0")}),t.password&&(e.password=KA(t.password).toString(16).toUpperCase()),Oe("sheetProtection",null,e)}function gV(t){return dC(t),Oe("pageMargins",null,t)}function vV(t,e){for(var r=["<cols>"],n,a=0;a!=e.length;++a)(n=e[a])&&(r[r.length]=Oe("col",null,ap(a,n)));return r[r.length]="</cols>",r.join("")}function xV(t,e,r,n){var a=typeof t.ref=="string"?t.ref:Ir(t.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var o=r.Workbook.Names,c=xa(a);c.s.r==c.e.r&&(c.e.r=xa(e["!ref"]).e.r,a=Ir(c));for(var h=0;h<o.length;++h){var m=o[h];if(m.Name=="_xlnm._FilterDatabase"&&m.Sheet==n){m.Ref="'"+r.SheetNames[n]+"'!"+a;break}}return h==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),Oe("autoFilter",null,{ref:a})}function yV(t,e,r,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Oe("sheetViews",Oe("sheetView",null,a),{})}function _V(t,e,r,n){if(t.c&&r["!comments"].push([e,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var a="",o=t.t,c=t.v;if(t.t!=="z")switch(t.t){case"b":a=t.v?"1":"0";break;case"n":a=""+t.v;break;case"e":a=Yd[t.v];break;case"d":n&&n.cellDates?a=Fn(t.v,-1).toISOString():(t=Zn(t),t.t="n",a=""+(t.v=Jn(Fn(t.v)))),typeof t.z>"u"&&(t.z=vr[14]);break;default:a=t.v;break}var h=hn("v",Ut(a)),m={r:e},d=Vo(n.cellXfs,t,n);switch(d!==0&&(m.s=d),t.t){case"n":break;case"d":m.t="d";break;case"b":m.t="b";break;case"e":m.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){h=hn("v",""+j1(n.Strings,t.v,n.revStrings)),m.t="s";break}m.t="str";break}if(t.t!=o&&(t.t=o,t.v=c),typeof t.f=="string"&&t.f){var p=t.F&&t.F.slice(0,e.length)==e?{t:"array",ref:t.F}:null;h=Oe("f",Ut(t.f),p)+(t.v!=null?h:"")}return t.l&&r["!links"].push([e,t.l]),t.D&&(m.cm=1),Oe("c",h,m)}function EV(t,e,r,n){var a=[],o=[],c=nr(t["!ref"]),h="",m,d="",p=[],x=0,y=0,E=t["!rows"],w=Array.isArray(t),T={r:d},b,A=-1;for(y=c.s.c;y<=c.e.c;++y)p[y]=bn(y);for(x=c.s.r;x<=c.e.r;++x){for(o=[],d=mn(x),y=c.s.c;y<=c.e.c;++y){m=p[y]+d;var M=w?(t[x]||[])[y]:t[m];M!==void 0&&(h=_V(M,m,t,e))!=null&&o.push(h)}(o.length>0||E&&E[x])&&(T={r:d},E&&E[x]&&(b=E[x],b.hidden&&(T.hidden=1),A=-1,b.hpx?A=E0(b.hpx):b.hpt&&(A=b.hpt),A>-1&&(T.ht=A,T.customHeight=1),b.level&&(T.outlineLevel=b.level)),a[a.length]=Oe("row",o.join(""),T))}if(E)for(;x<E.length;++x)E&&E[x]&&(T={r:x+1},b=E[x],b.hidden&&(T.hidden=1),A=-1,b.hpx?A=E0(b.hpx):b.hpt&&(A=b.hpt),A>-1&&(T.ht=A,T.customHeight=1),b.level&&(T.outlineLevel=b.level),a[a.length]=Oe("row","",T));return a.join("")}function fC(t,e,r,n){var a=[Or,Oe("worksheet",null,{xmlns:Au[0],"xmlns:r":Xr.r})],o=r.SheetNames[t],c=0,h="",m=r.Sheets[o];m==null&&(m={});var d=m["!ref"]||"A1",p=nr(d);if(p.e.c>16383||p.e.r>1048575){if(e.WTF)throw new Error("Range "+d+" exceeds format limit A1:XFD1048576");p.e.c=Math.min(p.e.c,16383),p.e.r=Math.min(p.e.c,1048575),d=Ir(p)}n||(n={}),m["!comments"]=[];var x=[];dV(m,r,t,e,a),a[a.length]=Oe("dimension",null,{ref:d}),a[a.length]=yV(m,e,t,r),e.sheetFormat&&(a[a.length]=Oe("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),m["!cols"]!=null&&m["!cols"].length>0&&(a[a.length]=vV(m,m["!cols"])),a[c=a.length]="<sheetData/>",m["!links"]=[],m["!ref"]!=null&&(h=EV(m,e),h.length>0&&(a[a.length]=h)),a.length>c+1&&(a[a.length]="</sheetData>",a[c]=a[c].replace("/>",">")),m["!protect"]&&(a[a.length]=pV(m["!protect"])),m["!autofilter"]!=null&&(a[a.length]=xV(m["!autofilter"],m,r,t)),m["!merges"]!=null&&m["!merges"].length>0&&(a[a.length]=hV(m["!merges"]));var y=-1,E,w=-1;return m["!links"].length>0&&(a[a.length]="<hyperlinks>",m["!links"].forEach(function(T){T[1].Target&&(E={ref:T[0]},T[1].Target.charAt(0)!="#"&&(w=Bt(n,-1,Ut(T[1].Target).replace(/#.*$/,""),Ct.HLINK),E["r:id"]="rId"+w),(y=T[1].Target.indexOf("#"))>-1&&(E.location=Ut(T[1].Target.slice(y+1))),T[1].Tooltip&&(E.tooltip=Ut(T[1].Tooltip)),a[a.length]=Oe("hyperlink",null,E))}),a[a.length]="</hyperlinks>"),delete m["!links"],m["!margins"]!=null&&(a[a.length]=gV(m["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(a[a.length]=hn("ignoredErrors",Oe("ignoredError",null,{numberStoredAsText:1,sqref:d}))),x.length>0&&(w=Bt(n,-1,"../drawings/drawing"+(t+1)+".xml",Ct.DRAW),a[a.length]=Oe("drawing",null,{"r:id":"rId"+w}),m["!drawing"]=x),m["!comments"].length>0&&(w=Bt(n,-1,"../drawings/vmlDrawing"+(t+1)+".vml",Ct.VML),a[a.length]=Oe("legacyDrawing",null,{"r:id":"rId"+w}),m["!legacy"]=w),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function TV(t,e){var r={},n=t.l+e;r.r=t.read_shift(4),t.l+=4;var a=t.read_shift(2);t.l+=1;var o=t.read_shift(1);return t.l=n,o&7&&(r.level=o&7),o&16&&(r.hidden=!0),o&32&&(r.hpt=a/20),r}function wV(t,e,r){var n=ye(145),a=(r["!rows"]||[])[t]||{};n.write_shift(4,t),n.write_shift(4,0);var o=320;a.hpx?o=E0(a.hpx)*20:a.hpt&&(o=a.hpt*20),n.write_shift(2,o),n.write_shift(1,0);var c=0;a.level&&(c|=a.level),a.hidden&&(c|=16),(a.hpx||a.hpt)&&(c|=32),n.write_shift(1,c),n.write_shift(1,0);var h=0,m=n.l;n.l+=4;for(var d={r:t,c:0},p=0;p<16;++p)if(!(e.s.c>p+1<<10||e.e.c<p<<10)){for(var x=-1,y=-1,E=p<<10;E<p+1<<10;++E){d.c=E;var w=Array.isArray(r)?(r[d.r]||[])[d.c]:r[zt(d)];w&&(x<0&&(x=E),y=E)}x<0||(++h,n.write_shift(4,x),n.write_shift(4,y))}var T=n.l;return n.l=m,n.write_shift(4,h),n.l=T,n.length>n.l?n.slice(0,n.l):n}function NV(t,e,r,n){var a=wV(n,r,e);(a.length>17||(e["!rows"]||[])[n])&&Se(t,0,a)}var bV=Kl,SV=ju;function AV(){}function CV(t,e){var r={},n=t[t.l];return++t.l,r.above=!(n&64),r.left=!(n&128),t.l+=18,r.name=LL(t),r}function jV(t,e,r){r==null&&(r=ye(84+4*t.length));var n=192;e&&(e.above&&(n&=-65),e.left&&(n&=-129)),r.write_shift(1,n);for(var a=1;a<3;++a)r.write_shift(1,0);return v0({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),CA(t,r),r.slice(0,r.l)}function RV(t){var e=La(t);return[e]}function DV(t,e,r){return r==null&&(r=ye(8)),$l(e,r)}function IV(t){var e=Wl(t);return[e]}function kV(t,e,r){return r==null&&(r=ye(4)),Yl(e,r)}function OV(t){var e=La(t),r=t.read_shift(1);return[e,r,"b"]}function MV(t,e,r){return r==null&&(r=ye(9)),$l(e,r),r.write_shift(1,t.v?1:0),r}function PV(t){var e=Wl(t),r=t.read_shift(1);return[e,r,"b"]}function FV(t,e,r){return r==null&&(r=ye(5)),Yl(e,r),r.write_shift(1,t.v?1:0),r}function LV(t){var e=La(t),r=t.read_shift(1);return[e,r,"e"]}function VV(t,e,r){return r==null&&(r=ye(9)),$l(e,r),r.write_shift(1,t.v),r}function BV(t){var e=Wl(t),r=t.read_shift(1);return[e,r,"e"]}function UV(t,e,r){return r==null&&(r=ye(8)),Yl(e,r),r.write_shift(1,t.v),r.write_shift(2,0),r.write_shift(1,0),r}function zV(t){var e=La(t),r=t.read_shift(4);return[e,r,"s"]}function HV(t,e,r){return r==null&&(r=ye(12)),$l(e,r),r.write_shift(4,e.v),r}function GV(t){var e=Wl(t),r=t.read_shift(4);return[e,r,"s"]}function qV(t,e,r){return r==null&&(r=ye(8)),Yl(e,r),r.write_shift(4,e.v),r}function $V(t){var e=La(t),r=Ru(t);return[e,r,"n"]}function WV(t,e,r){return r==null&&(r=ye(16)),$l(e,r),Ml(t.v,r),r}function YV(t){var e=Wl(t),r=Ru(t);return[e,r,"n"]}function KV(t,e,r){return r==null&&(r=ye(12)),Yl(e,r),Ml(t.v,r),r}function XV(t){var e=La(t),r=jA(t);return[e,r,"n"]}function QV(t,e,r){return r==null&&(r=ye(12)),$l(e,r),RA(t.v,r),r}function JV(t){var e=Wl(t),r=jA(t);return[e,r,"n"]}function ZV(t,e,r){return r==null&&(r=ye(8)),Yl(e,r),RA(t.v,r),r}function e7(t){var e=La(t),r=E1(t);return[e,r,"is"]}function t7(t){var e=La(t),r=Sn(t);return[e,r,"str"]}function r7(t,e,r){return r==null&&(r=ye(12+4*t.v.length)),$l(e,r),Jr(t.v,r),r.length>r.l?r.slice(0,r.l):r}function n7(t){var e=Wl(t),r=Sn(t);return[e,r,"str"]}function a7(t,e,r){return r==null&&(r=ye(8+4*t.v.length)),Yl(e,r),Jr(t.v,r),r.length>r.l?r.slice(0,r.l):r}function s7(t,e,r){var n=t.l+e,a=La(t);a.r=r["!row"];var o=t.read_shift(1),c=[a,o,"b"];if(r.cellFormula){t.l+=2;var h=np(t,n-t.l,r);c[3]=uu(h,null,a,r.supbooks,r)}else t.l=n;return c}function i7(t,e,r){var n=t.l+e,a=La(t);a.r=r["!row"];var o=t.read_shift(1),c=[a,o,"e"];if(r.cellFormula){t.l+=2;var h=np(t,n-t.l,r);c[3]=uu(h,null,a,r.supbooks,r)}else t.l=n;return c}function o7(t,e,r){var n=t.l+e,a=La(t);a.r=r["!row"];var o=Ru(t),c=[a,o,"n"];if(r.cellFormula){t.l+=2;var h=np(t,n-t.l,r);c[3]=uu(h,null,a,r.supbooks,r)}else t.l=n;return c}function l7(t,e,r){var n=t.l+e,a=La(t);a.r=r["!row"];var o=Sn(t),c=[a,o,"str"];if(r.cellFormula){t.l+=2;var h=np(t,n-t.l,r);c[3]=uu(h,null,a,r.supbooks,r)}else t.l=n;return c}var c7=Kl,u7=ju;function h7(t,e){return e==null&&(e=ye(4)),e.write_shift(4,t),e}function d7(t,e){var r=t.l+e,n=Kl(t),a=T1(t),o=Sn(t),c=Sn(t),h=Sn(t);t.l=r;var m={rfx:n,relId:a,loc:o,display:h};return c&&(m.Tooltip=c),m}function f7(t,e){var r=ye(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));ju({s:Qr(t[0]),e:Qr(t[0])},r),w1("rId"+e,r);var n=t[1].Target.indexOf("#"),a=n==-1?"":t[1].Target.slice(n+1);return Jr(a||"",r),Jr(t[1].Tooltip||"",r),Jr("",r),r.slice(0,r.l)}function m7(){}function p7(t,e,r){var n=t.l+e,a=DA(t),o=t.read_shift(1),c=[a];if(c[2]=o,r.cellFormula){var h=nV(t,n-t.l,r);c[1]=h}else t.l=n;return c}function g7(t,e,r){var n=t.l+e,a=Kl(t),o=[a];if(r.cellFormula){var c=sV(t,n-t.l,r);o[1]=c,t.l=n}else t.l=n;return o}function v7(t,e,r){r==null&&(r=ye(18));var n=ap(t,e);r.write_shift(-4,t),r.write_shift(-4,t),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var a=0;return e.hidden&&(a|=1),typeof n.width=="number"&&(a|=2),e.level&&(a|=e.level<<8),r.write_shift(2,a),r}var mC=["left","right","top","bottom","header","footer"];function x7(t){var e={};return mC.forEach(function(r){e[r]=Ru(t)}),e}function y7(t,e){return e==null&&(e=ye(48)),dC(t),mC.forEach(function(r){Ml(t[r],e)}),e}function _7(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function E7(t,e,r){r==null&&(r=ye(30));var n=924;return(((e||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function T7(t){var e=ye(24);return e.write_shift(4,4),e.write_shift(4,1),ju(t,e),e}function w7(t,e){return e==null&&(e=ye(66)),e.write_shift(2,t.password?KA(t.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?e.write_shift(4,t[r[0]]!=null&&!t[r[0]]?1:0):e.write_shift(4,t[r[0]]!=null&&t[r[0]]?0:1)}),e}function N7(){}function b7(){}function S7(t,e,r,n,a,o,c){if(e.v===void 0)return!1;var h="";switch(e.t){case"b":h=e.v?"1":"0";break;case"d":e=Zn(e),e.z=e.z||vr[14],e.v=Jn(Fn(e.v)),e.t="n";break;case"n":case"e":h=""+e.v;break;default:h=e.v;break}var m={r,c:n};switch(m.s=Vo(a.cellXfs,e,a),e.l&&o["!links"].push([zt(m),e.l]),e.c&&o["!comments"].push([zt(m),e.c]),e.t){case"s":case"str":return a.bookSST?(h=j1(a.Strings,e.v,a.revStrings),m.t="s",m.v=h,c?Se(t,18,qV(e,m)):Se(t,7,HV(e,m))):(m.t="str",c?Se(t,17,a7(e,m)):Se(t,6,r7(e,m))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?c?Se(t,13,ZV(e,m)):Se(t,2,QV(e,m)):c?Se(t,16,KV(e,m)):Se(t,5,WV(e,m)),!0;case"b":return m.t="b",c?Se(t,15,FV(e,m)):Se(t,4,MV(e,m)),!0;case"e":return m.t="e",c?Se(t,14,UV(e,m)):Se(t,3,VV(e,m)),!0}return c?Se(t,12,kV(e,m)):Se(t,1,DV(e,m)),!0}function A7(t,e,r,n){var a=nr(e["!ref"]||"A1"),o,c="",h=[];Se(t,145);var m=Array.isArray(e),d=a.e.r;e["!rows"]&&(d=Math.max(a.e.r,e["!rows"].length-1));for(var p=a.s.r;p<=d;++p){c=mn(p),NV(t,e,a,p);var x=!1;if(p<=a.e.r)for(var y=a.s.c;y<=a.e.c;++y){p===a.s.r&&(h[y]=bn(y)),o=h[y]+c;var E=m?(e[p]||[])[y]:e[o];if(!E){x=!1;continue}x=S7(t,E,p,y,n,e,x)}}Se(t,146)}function C7(t,e){!e||!e["!merges"]||(Se(t,177,h7(e["!merges"].length)),e["!merges"].forEach(function(r){Se(t,176,u7(r))}),Se(t,178))}function j7(t,e){!e||!e["!cols"]||(Se(t,390),e["!cols"].forEach(function(r,n){r&&Se(t,60,v7(n,r))}),Se(t,391))}function R7(t,e){!e||!e["!ref"]||(Se(t,648),Se(t,649,T7(nr(e["!ref"]))),Se(t,650))}function D7(t,e,r){e["!links"].forEach(function(n){if(n[1].Target){var a=Bt(r,-1,n[1].Target.replace(/#.*$/,""),Ct.HLINK);Se(t,494,f7(n,a))}}),delete e["!links"]}function I7(t,e,r,n){if(e["!comments"].length>0){var a=Bt(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",Ct.VML);Se(t,551,w1("rId"+a)),e["!legacy"]=a}}function k7(t,e,r,n){if(e["!autofilter"]){var a=e["!autofilter"],o=typeof a.ref=="string"?a.ref:Ir(a.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var c=r.Workbook.Names,h=xa(o);h.s.r==h.e.r&&(h.e.r=xa(e["!ref"]).e.r,o=Ir(h));for(var m=0;m<c.length;++m){var d=c[m];if(d.Name=="_xlnm._FilterDatabase"&&d.Sheet==n){d.Ref="'"+r.SheetNames[n]+"'!"+o;break}}m==c.length&&c.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+o}),Se(t,161,ju(nr(o))),Se(t,162)}}function O7(t,e,r){Se(t,133),Se(t,137,E7(e,r)),Se(t,138),Se(t,134)}function M7(t,e){e["!protect"]&&Se(t,535,w7(e["!protect"]))}function P7(t,e,r,n){var a=Qn(),o=r.SheetNames[t],c=r.Sheets[o]||{},h=o;try{r&&r.Workbook&&(h=r.Workbook.Sheets[t].CodeName||h)}catch{}var m=nr(c["!ref"]||"A1");if(m.e.c>16383||m.e.r>1048575){if(e.WTF)throw new Error("Range "+(c["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");m.e.c=Math.min(m.e.c,16383),m.e.r=Math.min(m.e.c,1048575)}return c["!links"]=[],c["!comments"]=[],Se(a,129),(r.vbaraw||c["!outline"])&&Se(a,147,jV(h,c["!outline"])),Se(a,148,SV(m)),O7(a,c,r.Workbook),j7(a,c),A7(a,c,t,e),M7(a,c),k7(a,c,r,t),C7(a,c),D7(a,c,n),c["!margins"]&&Se(a,476,y7(c["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&R7(a,c),I7(a,c,t,n),Se(a,130),a.end()}function F7(t,e){t.l+=10;var r=Sn(t);return{name:r}}var L7=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function V7(t){return!t.Workbook||!t.Workbook.WBProps?"false":gL(t.Workbook.WBProps.date1904)?"true":"false"}var B7="][*?/\\".split("");function pC(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return B7.forEach(function(n){if(t.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function U7(t,e,r){t.forEach(function(n,a){pC(n);for(var o=0;o<a;++o)if(n==t[o])throw new Error("Duplicate Sheet Name: "+n);if(r){var c=e&&e[a]&&e[a].CodeName||n;if(c.charCodeAt(0)==95&&c.length>22)throw new Error("Bad Code Name: Worksheet"+c)}})}function z7(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var e=t.Workbook&&t.Workbook.Sheets||[];U7(t.SheetNames,e,!!t.vbaraw);for(var r=0;r<t.SheetNames.length;++r)uV(t.Sheets[t.SheetNames[r]],t.SheetNames[r],r)}function gC(t){var e=[Or];e[e.length]=Oe("workbook",null,{xmlns:Au[0],"xmlns:r":Xr.r});var r=t.Workbook&&(t.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(L7.forEach(function(h){t.Workbook.WBProps[h[0]]!=null&&t.Workbook.WBProps[h[0]]!=h[1]&&(n[h[0]]=t.Workbook.WBProps[h[0]])}),t.Workbook.WBProps.CodeName&&(n.codeName=t.Workbook.WBProps.CodeName,delete n.CodeName)),e[e.length]=Oe("workbookPr",null,n);var a=t.Workbook&&t.Workbook.Sheets||[],o=0;if(a&&a[0]&&a[0].Hidden){for(e[e.length]="<bookViews>",o=0;o!=t.SheetNames.length&&!(!a[o]||!a[o].Hidden);++o);o==t.SheetNames.length&&(o=0),e[e.length]='<workbookView firstSheet="'+o+'" activeTab="'+o+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",o=0;o!=t.SheetNames.length;++o){var c={name:Ut(t.SheetNames[o].slice(0,31))};if(c.sheetId=""+(o+1),c["r:id"]="rId"+(o+1),a[o])switch(a[o].Hidden){case 1:c.state="hidden";break;case 2:c.state="veryHidden";break}e[e.length]=Oe("sheet",null,c)}return e[e.length]="</sheets>",r&&(e[e.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(h){var m={name:h.Name};h.Comment&&(m.comment=h.Comment),h.Sheet!=null&&(m.localSheetId=""+h.Sheet),h.Hidden&&(m.hidden="1"),h.Ref&&(e[e.length]=Oe("definedName",Ut(h.Ref),m))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function H7(t,e){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=ix(t),r.name=Sn(t),r}function G7(t,e){return e||(e=ye(127)),e.write_shift(4,t.Hidden),e.write_shift(4,t.iTabID),w1(t.strRelID,e),Jr(t.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function q7(t,e){var r={},n=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var a=e>8?Sn(t):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function $7(t,e){e||(e=ye(72));var r=0;return t&&t.filterPrivacy&&(r|=8),e.write_shift(4,r),e.write_shift(4,0),CA(t&&t.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function W7(t,e,r){var n=t.l+e;t.l+=4,t.l+=1;var a=t.read_shift(4),o=VL(t),c=aV(t,0,r),h=T1(t);t.l=n;var m={Name:o,Ptg:c};return a<268435455&&(m.Sheet=a),h&&(m.Comment=h),m}function Y7(t,e){Se(t,143);for(var r=0;r!=e.SheetNames.length;++r){var n=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[r]&&e.Workbook.Sheets[r].Hidden||0,a={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:e.SheetNames[r]};Se(t,156,G7(a))}Se(t,144)}function K7(t,e){e||(e=ye(127));for(var r=0;r!=4;++r)e.write_shift(4,0);return Jr("SheetJS",e),Jr(c0.version,e),Jr(c0.version,e),Jr("7262",e),e.length>e.l?e.slice(0,e.l):e}function X7(t,e){e||(e=ye(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,t),e.write_shift(4,t);var r=120;return e.write_shift(1,r),e.length>e.l?e.slice(0,e.l):e}function Q7(t,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var r=e.Workbook.Sheets,n=0,a=-1,o=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&a==-1?a=n:r[n].Hidden==1&&o==-1&&(o=n);o>a||(Se(t,135),Se(t,158,X7(a)),Se(t,136))}}function J7(t,e){var r=Qn();return Se(r,131),Se(r,128,K7()),Se(r,153,$7(t.Workbook&&t.Workbook.WBProps||null)),Q7(r,t),Y7(r,t),Se(r,132),r.end()}function Z7(t,e,r){return(e.slice(-4)===".bin"?J7:gC)(t)}function eB(t,e,r,n,a){return(e.slice(-4)===".bin"?P7:fC)(t,r,n,a)}function tB(t,e,r){return(e.slice(-4)===".bin"?y5:JA)(t,r)}function rB(t,e,r){return(e.slice(-4)===".bin"?$8:YA)(t,r)}function nB(t,e,r){return(e.slice(-4)===".bin"?M5:nC)(t)}function aB(t){return(t.slice(-4)===".bin"?A5:tC)()}function sB(t,e){var r=[];return t.Props&&r.push(t8(t.Props,e)),t.Custprops&&r.push(r8(t.Props,t.Custprops)),r.join("")}function iB(){return""}function oB(t,e){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(n,a){var o=[];o.push(Oe("NumberFormat",null,{"ss:Format":Ut(vr[n.numFmtId])}));var c={"ss:ID":"s"+(21+a)};r.push(Oe("Style",o.join(""),c))}),Oe("Styles",r.join(""))}function vC(t){return Oe("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+A1(t.Ref,{r:0,c:0})})}function lB(t){if(!((t||{}).Workbook||{}).Names)return"";for(var e=t.Workbook.Names,r=[],n=0;n<e.length;++n){var a=e[n];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||r.push(vC(a)))}return Oe("Names",r.join(""))}function cB(t,e,r,n){if(!t||!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,o=[],c=0;c<a.length;++c){var h=a[c];h.Sheet==r&&(h.Name.match(/^_xlfn\./)||o.push(vC(h)))}return o.join("")}function uB(t,e,r,n){if(!t)return"";var a=[];if(t["!margins"]&&(a.push("<PageSetup>"),t["!margins"].header&&a.push(Oe("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&a.push(Oe("Footer",null,{"x:Margin":t["!margins"].footer})),a.push(Oe("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)a.push(Oe("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var o=0;o<r&&!(n.Workbook.Sheets[o]&&!n.Workbook.Sheets[o].Hidden);++o);o==r&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),t["!protect"]&&(a.push(hn("ProtectContents","True")),t["!protect"].objects&&a.push(hn("ProtectObjects","True")),t["!protect"].scenarios&&a.push(hn("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?a.push(hn("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&a.push(hn("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(c){t["!protect"][c[0]]&&a.push("<"+c[1]+"/>")})),a.length==0?"":Oe("WorksheetOptions",a.join(""),{xmlns:pa.x})}function hB(t){return t.map(function(e){var r=pL(e.t||""),n=Oe("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Oe("Comment",n,{"ss:Author":e.a})}).join("")}function dB(t,e,r,n,a,o,c){if(!t||t.v==null&&t.f==null)return"";var h={};if(t.f&&(h["ss:Formula"]="="+Ut(A1(t.f,c))),t.F&&t.F.slice(0,e.length)==e){var m=Qr(t.F.slice(e.length+1));h["ss:ArrayRange"]="RC:R"+(m.r==c.r?"":"["+(m.r-c.r)+"]")+"C"+(m.c==c.c?"":"["+(m.c-c.c)+"]")}if(t.l&&t.l.Target&&(h["ss:HRef"]=Ut(t.l.Target),t.l.Tooltip&&(h["x:HRefScreenTip"]=Ut(t.l.Tooltip))),r["!merges"])for(var d=r["!merges"],p=0;p!=d.length;++p)d[p].s.c!=c.c||d[p].s.r!=c.r||(d[p].e.c>d[p].s.c&&(h["ss:MergeAcross"]=d[p].e.c-d[p].s.c),d[p].e.r>d[p].s.r&&(h["ss:MergeDown"]=d[p].e.r-d[p].s.r));var x="",y="";switch(t.t){case"z":if(!n.sheetStubs)return"";break;case"n":x="Number",y=String(t.v);break;case"b":x="Boolean",y=t.v?"1":"0";break;case"e":x="Error",y=Yd[t.v];break;case"d":x="DateTime",y=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||vr[14]);break;case"s":x="String",y=mL(t.v||"");break}var E=Vo(n.cellXfs,t,n);h["ss:StyleID"]="s"+(21+E),h["ss:Index"]=c.c+1;var w=t.v!=null?y:"",T=t.t=="z"?"":'<Data ss:Type="'+x+'">'+w+"</Data>";return(t.c||[]).length>0&&(T+=hB(t.c)),Oe("Cell",T,h)}function fB(t,e){var r='<Row ss:Index="'+(t+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=QA(e.hpt)),e.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(r+=' ss:Hidden="1"')),r+">"}function mB(t,e,r,n){if(!t["!ref"])return"";var a=nr(t["!ref"]),o=t["!merges"]||[],c=0,h=[];t["!cols"]&&t["!cols"].forEach(function(b,A){b1(b);var M=!!b.width,V=ap(A,b),H={"ss:Index":A+1};M&&(H["ss:Width"]=y0(V.width)),b.hidden&&(H["ss:Hidden"]="1"),h.push(Oe("Column",null,H))});for(var m=Array.isArray(t),d=a.s.r;d<=a.e.r;++d){for(var p=[fB(d,(t["!rows"]||[])[d])],x=a.s.c;x<=a.e.c;++x){var y=!1;for(c=0;c!=o.length;++c)if(!(o[c].s.c>x)&&!(o[c].s.r>d)&&!(o[c].e.c<x)&&!(o[c].e.r<d)){(o[c].s.c!=x||o[c].s.r!=d)&&(y=!0);break}if(!y){var E={r:d,c:x},w=zt(E),T=m?(t[d]||[])[x]:t[w];p.push(dB(T,w,t,e,r,n,E))}}p.push("</Row>"),p.length>2&&h.push(p.join(""))}return h.join("")}function pB(t,e,r){var n=[],a=r.SheetNames[t],o=r.Sheets[a],c=o?cB(o,e,t,r):"";return c.length>0&&n.push("<Names>"+c+"</Names>"),c=o?mB(o,e,t,r):"",c.length>0&&n.push("<Table>"+c+"</Table>"),n.push(uB(o,e,t,r)),n.join("")}function gB(t,e){e||(e={}),t.SSF||(t.SSF=Zn(vr)),t.SSF&&(Z0(),J0(t.SSF),e.revssf=ep(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF,e.cellXfs=[],Vo(e.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(sB(t,e)),r.push(iB()),r.push(""),r.push("");for(var n=0;n<t.SheetNames.length;++n)r.push(Oe("Worksheet",pB(n,e,t),{"ss:Name":Ut(t.SheetNames[n])}));return r[2]=oB(t,e),r[3]=lB(t),Or+Oe("Workbook",r.join(""),{xmlns:pa.ss,"xmlns:o":pa.o,"xmlns:x":pa.x,"xmlns:ss":pa.ss,"xmlns:dt":pa.dt,"xmlns:html":pa.html})}var Tv={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function vB(t,e){var r=[],n=[],a=[],o=0,c,h=gw(jw,"n"),m=gw(Rw,"n");if(t.Props)for(c=gn(t.Props),o=0;o<c.length;++o)(Object.prototype.hasOwnProperty.call(h,c[o])?r:Object.prototype.hasOwnProperty.call(m,c[o])?n:a).push([c[o],t.Props[c[o]]]);if(t.Custprops)for(c=gn(t.Custprops),o=0;o<c.length;++o)Object.prototype.hasOwnProperty.call(t.Props||{},c[o])||(Object.prototype.hasOwnProperty.call(h,c[o])?r:Object.prototype.hasOwnProperty.call(m,c[o])?n:a).push([c[o],t.Custprops[c[o]]]);var d=[];for(o=0;o<a.length;++o)UA.indexOf(a[o][0])>-1||LA.indexOf(a[o][0])>-1||a[o][1]!=null&&d.push(a[o]);n.length&&Kt.utils.cfb_add(e,"/SummaryInformation",Mw(n,Tv.SI,m,Rw)),(r.length||d.length)&&Kt.utils.cfb_add(e,"/DocumentSummaryInformation",Mw(r,Tv.DSI,h,jw,d.length?d:null,Tv.UDI))}function xB(t,e){var r=e||{},n=Kt.utils.cfb_new({root:"R"}),a="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":a="/Workbook",r.biff=8;break;case"biff5":a="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return Kt.utils.cfb_add(n,a,xC(t,r)),r.biff==8&&(t.Props||t.Custprops)&&vB(t,n),r.biff==8&&t.vbaraw&&P5(n,Kt.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),n}var yB={0:{f:TV},1:{f:RV},2:{f:XV},3:{f:LV},4:{f:OV},5:{f:$V},6:{f:t7},7:{f:zV},8:{f:l7},9:{f:o7},10:{f:s7},11:{f:i7},12:{f:IV},13:{f:JV},14:{f:BV},15:{f:PV},16:{f:YV},17:{f:n7},18:{f:GV},19:{f:E1},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:W7},40:{},42:{},43:{f:t5},44:{f:Z8},45:{f:a5},46:{f:i5},47:{f:s5},48:{},49:{f:IL},50:{},51:{f:T5},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:k8},62:{f:e7},63:{f:C5},64:{f:N7},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Ms,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:_7},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:CV},148:{f:bV,p:16},151:{f:m7},152:{},153:{f:q7},154:{},155:{},156:{f:H7},157:{},158:{},159:{T:1,f:H8},160:{T:-1},161:{T:1,f:Kl},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:c7},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:_5},336:{T:-1},337:{f:b5,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:ix},357:{},358:{},359:{},360:{T:1},361:{},362:{f:A8},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:p7},427:{f:g7},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:x7},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:AV},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:d7},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:ix},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:k5},633:{T:1},634:{T:-1},635:{T:1,f:D5},636:{T:-1},637:{f:PL},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:F7},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:b7},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function Me(t,e,r,n){var a=e;if(!isNaN(a)){var o=n||(r||[]).length||0,c=t.next(4);c.write_shift(2,a),c.write_shift(2,o),o>0&&x1(r)&&t.push(r)}}function _B(t,e,r,n){var a=(r||[]).length||0;if(a<=8224)return Me(t,e,r,a);var o=e;if(!isNaN(o)){for(var c=r.parts||[],h=0,m=0,d=0;d+(c[h]||8224)<=8224;)d+=c[h]||8224,h++;var p=t.next(4);for(p.write_shift(2,o),p.write_shift(2,d),t.push(r.slice(m,m+d)),m+=d;m<a;){for(p=t.next(4),p.write_shift(2,60),d=0;d+(c[h]||8224)<=8224;)d+=c[h]||8224,h++;p.write_shift(2,d),t.push(r.slice(m,m+d)),m+=d}}}function Xd(t,e,r){return t||(t=ye(7)),t.write_shift(2,e),t.write_shift(2,r),t.write_shift(2,0),t.write_shift(1,0),t}function EB(t,e,r,n){var a=ye(9);return Xd(a,t,e),HA(r,n||"b",a),a}function TB(t,e,r){var n=ye(8+2*r.length);return Xd(n,t,e),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function wB(t,e,r,n){if(e.v!=null)switch(e.t){case"d":case"n":var a=e.t=="d"?Jn(Fn(e.v)):e.v;a==(a|0)&&a>=0&&a<65536?Me(t,2,F8(r,n,a)):Me(t,3,P8(r,n,a));return;case"b":case"e":Me(t,5,EB(r,n,e.v,e.t));return;case"s":case"str":Me(t,4,TB(r,n,(e.v||"").slice(0,255)));return}Me(t,1,Xd(null,r,n))}function NB(t,e,r,n){var a=Array.isArray(e),o=nr(e["!ref"]||"A1"),c,h="",m=[];if(o.e.c>255||o.e.r>16383){if(n.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");o.e.c=Math.min(o.e.c,255),o.e.r=Math.min(o.e.c,16383),c=Ir(o)}for(var d=o.s.r;d<=o.e.r;++d){h=mn(d);for(var p=o.s.c;p<=o.e.c;++p){d===o.s.r&&(m[p]=bn(p)),c=m[p]+h;var x=a?(e[d]||[])[p]:e[c];x&&wB(t,x,d,p)}}}function bB(t,e){for(var r=e||{},n=Qn(),a=0,o=0;o<t.SheetNames.length;++o)t.SheetNames[o]==r.sheet&&(a=o);if(a==0&&r.sheet&&t.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return Me(n,r.biff==4?1033:r.biff==3?521:9,N1(t,16,r)),NB(n,t.Sheets[t.SheetNames[a]],a,r),Me(n,10),n.end()}function SB(t,e,r){Me(t,49,y8({sz:12,name:"Arial"},r))}function AB(t,e,r){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&Me(t,1054,T8(a,e[a],r))})}function CB(t,e){var r=ye(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),Me(t,2151,r),r=ye(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),$A(nr(e["!ref"]||"A1"),r),r.write_shift(4,4),Me(t,2152,r)}function jB(t,e){for(var r=0;r<16;++r)Me(t,224,Fw({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(n){Me(t,224,Fw(n,0,e))})}function RB(t,e){for(var r=0;r<e["!links"].length;++r){var n=e["!links"][r];Me(t,440,R8(n)),n[1].Tooltip&&Me(t,2048,D8(n))}delete e["!links"]}function DB(t,e){if(e){var r=0;e.forEach(function(n,a){++r<=256&&n&&Me(t,125,O8(ap(a,n),a))})}}function IB(t,e,r,n,a){var o=16+Vo(a.cellXfs,e,a);if(e.v==null&&!e.bf){Me(t,513,Pl(r,n,o));return}if(e.bf)Me(t,6,rV(e,r,n,a,o));else switch(e.t){case"d":case"n":var c=e.t=="d"?Jn(Fn(e.v)):e.v;Me(t,515,S8(r,n,c,o));break;case"b":case"e":Me(t,517,b8(r,n,e.v,o,a,e.t));break;case"s":case"str":if(a.bookSST){var h=j1(a.Strings,e.v,a.revStrings);Me(t,253,_8(r,n,h,o))}else Me(t,516,E8(r,n,(e.v||"").slice(0,255),o,a));break;default:Me(t,513,Pl(r,n,o))}}function kB(t,e,r){var n=Qn(),a=r.SheetNames[t],o=r.Sheets[a]||{},c=(r||{}).Workbook||{},h=(c.Sheets||[])[t]||{},m=Array.isArray(o),d=e.biff==8,p,x="",y=[],E=nr(o["!ref"]||"A1"),w=d?65536:16384;if(E.e.c>255||E.e.r>=w){if(e.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:IV16384");E.e.c=Math.min(E.e.c,255),E.e.r=Math.min(E.e.c,w-1)}Me(n,2057,N1(r,16,e)),Me(n,13,Oa(1)),Me(n,12,Oa(100)),Me(n,15,Mn(!0)),Me(n,17,Mn(!1)),Me(n,16,Ml(.001)),Me(n,95,Mn(!0)),Me(n,42,Mn(!1)),Me(n,43,Mn(!1)),Me(n,130,Oa(1)),Me(n,128,N8()),Me(n,131,Mn(!1)),Me(n,132,Mn(!1)),d&&DB(n,o["!cols"]),Me(n,512,w8(E,e)),d&&(o["!links"]=[]);for(var T=E.s.r;T<=E.e.r;++T){x=mn(T);for(var b=E.s.c;b<=E.e.c;++b){T===E.s.r&&(y[b]=bn(b)),p=y[b]+x;var A=m?(o[T]||[])[b]:o[p];A&&(IB(n,A,T,b,e),d&&A.l&&o["!links"].push([p,A.l]))}}var M=h.CodeName||h.name||a;return d&&Me(n,574,x8((c.Views||[])[0])),d&&(o["!merges"]||[]).length&&Me(n,229,j8(o["!merges"])),d&&RB(n,o),Me(n,442,qA(M)),d&&CB(n,o),Me(n,10),n.end()}function OB(t,e,r){var n=Qn(),a=(t||{}).Workbook||{},o=a.Sheets||[],c=a.WBProps||{},h=r.biff==8,m=r.biff==5;if(Me(n,2057,N1(t,5,r)),r.bookType=="xla"&&Me(n,135),Me(n,225,h?Oa(1200):null),Me(n,193,s8(2)),m&&Me(n,191),m&&Me(n,192),Me(n,226),Me(n,92,m8("SheetJS",r)),Me(n,66,Oa(h?1200:1252)),h&&Me(n,353,Oa(0)),h&&Me(n,448),Me(n,317,M8(t.SheetNames.length)),h&&t.vbaraw&&Me(n,211),h&&t.vbaraw){var d=c.CodeName||"ThisWorkbook";Me(n,442,qA(d))}Me(n,156,Oa(17)),Me(n,25,Mn(!1)),Me(n,18,Mn(!1)),Me(n,19,Oa(0)),h&&Me(n,431,Mn(!1)),h&&Me(n,444,Oa(0)),Me(n,61,v8()),Me(n,64,Mn(!1)),Me(n,141,Oa(0)),Me(n,34,Mn(V7(t)=="true")),Me(n,14,Mn(!0)),h&&Me(n,439,Mn(!1)),Me(n,218,Oa(0)),SB(n,t,r),AB(n,t.SSF,r),jB(n,r),h&&Me(n,352,Mn(!1));var p=n.end(),x=Qn();h&&Me(x,140,I8()),h&&r.Strings&&_B(x,252,g8(r.Strings)),Me(x,10);var y=x.end(),E=Qn(),w=0,T=0;for(T=0;T<t.SheetNames.length;++T)w+=(h?12:11)+(h?2:1)*t.SheetNames[T].length;var b=p.length+w+y.length;for(T=0;T<t.SheetNames.length;++T){var A=o[T]||{};Me(E,133,p8({pos:b,hs:A.Hidden||0,dt:0,name:t.SheetNames[T]},r)),b+=e[T].length}var M=E.end();if(w!=M.length)throw new Error("BS8 "+w+" != "+M.length);var V=[];return p.length&&V.push(p),M.length&&V.push(M),y.length&&V.push(y),un(V)}function MB(t,e){var r=e||{},n=[];t&&!t.SSF&&(t.SSF=Zn(vr)),t&&t.SSF&&(Z0(),J0(t.SSF),r.revssf=ep(t.SSF),r.revssf[t.SSF[65535]]=0,r.ssf=t.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,R1(r),r.cellXfs=[],Vo(r.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var a=0;a<t.SheetNames.length;++a)n[n.length]=kB(a,r,t);return n.unshift(OB(t,n,r)),un(n)}function xC(t,e){for(var r=0;r<=t.SheetNames.length;++r){var n=t.Sheets[t.SheetNames[r]];if(!(!n||!n["!ref"])){var a=xa(n["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var o=e||{};switch(o.biff||2){case 8:case 5:return MB(t,e);case 4:case 3:case 2:return bB(t,e)}throw new Error("invalid type "+o.bookType+" for BIFF")}function PB(t,e,r,n){for(var a=t["!merges"]||[],o=[],c=e.s.c;c<=e.e.c;++c){for(var h=0,m=0,d=0;d<a.length;++d)if(!(a[d].s.r>r||a[d].s.c>c)&&!(a[d].e.r<r||a[d].e.c<c)){if(a[d].s.r<r||a[d].s.c<c){h=-1;break}h=a[d].e.r-a[d].s.r+1,m=a[d].e.c-a[d].s.c+1;break}if(!(h<0)){var p=zt({r,c}),x=n.dense?(t[r]||[])[c]:t[p],y=x&&x.v!=null&&(x.h||fL(x.w||(Ti(x),x.w)||""))||"",E={};h>1&&(E.rowspan=h),m>1&&(E.colspan=m),n.editable?y='<span contenteditable="true">'+y+"</span>":x&&(E["data-t"]=x&&x.t||"z",x.v!=null&&(E["data-v"]=x.v),x.z!=null&&(E["data-z"]=x.z),x.l&&(x.l.Target||"#").charAt(0)!="#"&&(y='<a href="'+x.l.Target+'">'+y+"</a>")),E.id=(n.id||"sjs")+"-"+p,o.push(Oe("td",y,E))}}var w="<tr>";return w+o.join("")+"</tr>"}var FB='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',LB="</body></html>";function VB(t,e,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function yC(t,e){var r=e||{},n=r.header!=null?r.header:FB,a=r.footer!=null?r.footer:LB,o=[n],c=xa(t["!ref"]);r.dense=Array.isArray(t),o.push(VB(t,c,r));for(var h=c.s.r;h<=c.e.r;++h)o.push(PB(t,c,h,r));return o.push("</table>"+a),o.join("")}function _C(t,e,r){var n=r||{},a=0,o=0;if(n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var c=typeof n.origin=="string"?Qr(n.origin):n.origin;a=c.r,o=c.c}var h=e.getElementsByTagName("tr"),m=Math.min(n.sheetRows||1e7,h.length),d={s:{r:0,c:0},e:{r:a,c:o}};if(t["!ref"]){var p=xa(t["!ref"]);d.s.r=Math.min(d.s.r,p.s.r),d.s.c=Math.min(d.s.c,p.s.c),d.e.r=Math.max(d.e.r,p.e.r),d.e.c=Math.max(d.e.c,p.e.c),a==-1&&(d.e.r=a=p.e.r+1)}var x=[],y=0,E=t["!rows"]||(t["!rows"]=[]),w=0,T=0,b=0,A=0,M=0,V=0;for(t["!cols"]||(t["!cols"]=[]);w<h.length&&T<m;++w){var H=h[w];if(Gw(H)){if(n.display)continue;E[T]={hidden:!0}}var re=H.children;for(b=A=0;b<re.length;++b){var q=re[b];if(!(n.display&&Gw(q))){var j=q.hasAttribute("data-v")?q.getAttribute("data-v"):q.hasAttribute("v")?q.getAttribute("v"):vL(q.innerHTML),D=q.getAttribute("data-z")||q.getAttribute("z");for(y=0;y<x.length;++y){var S=x[y];S.s.c==A+o&&S.s.r<T+a&&T+a<=S.e.r&&(A=S.e.c+1-o,y=-1)}V=+q.getAttribute("colspan")||1,((M=+q.getAttribute("rowspan")||1)>1||V>1)&&x.push({s:{r:T+a,c:A+o},e:{r:T+a+(M||1)-1,c:A+o+(V||1)-1}});var P={t:"s",v:j},O=q.getAttribute("data-t")||q.getAttribute("t")||"";j!=null&&(j.length==0?P.t=O||"z":n.raw||j.trim().length==0||O=="s"||(j==="TRUE"?P={t:"b",v:!0}:j==="FALSE"?P={t:"b",v:!1}:isNaN(fi(j))?isNaN(Td(j).getDate())||(P={t:"d",v:Fn(j)},n.cellDates||(P={t:"n",v:Jn(P.v)}),P.z=n.dateNF||vr[14]):P={t:"n",v:fi(j)})),P.z===void 0&&D!=null&&(P.z=D);var C="",k=q.getElementsByTagName("A");if(k&&k.length)for(var Ce=0;Ce<k.length&&!(k[Ce].hasAttribute("href")&&(C=k[Ce].getAttribute("href"),C.charAt(0)!="#"));++Ce);C&&C.charAt(0)!="#"&&(P.l={Target:C}),n.dense?(t[T+a]||(t[T+a]=[]),t[T+a][A+o]=P):t[zt({c:A+o,r:T+a})]=P,d.e.c<A+o&&(d.e.c=A+o),A+=V}}++T}return x.length&&(t["!merges"]=(t["!merges"]||[]).concat(x)),d.e.r=Math.max(d.e.r,T-1+a),t["!ref"]=Ir(d),T>=m&&(t["!fullref"]=Ir((d.e.r=h.length-w+T-1+a,d))),t}function EC(t,e){var r=e||{},n=r.dense?[]:{};return _C(n,t,e)}function BB(t,e){return ql(EC(t,e),e)}function Gw(t){var e="",r=UB(t);return r&&(e=r(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function UB(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var zB=(function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+Nd({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return Or+e}})(),qw=(function(){var t=function(o){return Ut(o).replace(/  +/g,function(c){return'<text:s text:c="'+c.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(o,c,h){var m=[];m.push('      <table:table table:name="'+Ut(c.SheetNames[h])+`" table:style-name="ta1">
`);var d=0,p=0,x=xa(o["!ref"]||"A1"),y=o["!merges"]||[],E=0,w=Array.isArray(o);if(o["!cols"])for(p=0;p<=x.e.c;++p)m.push("        <table:table-column"+(o["!cols"][p]?' table:style-name="co'+o["!cols"][p].ods+'"':"")+`></table:table-column>
`);var T="",b=o["!rows"]||[];for(d=0;d<x.s.r;++d)T=b[d]?' table:style-name="ro'+b[d].ods+'"':"",m.push("        <table:table-row"+T+`></table:table-row>
`);for(;d<=x.e.r;++d){for(T=b[d]?' table:style-name="ro'+b[d].ods+'"':"",m.push("        <table:table-row"+T+`>
`),p=0;p<x.s.c;++p)m.push(e);for(;p<=x.e.c;++p){var A=!1,M={},V="";for(E=0;E!=y.length;++E)if(!(y[E].s.c>p)&&!(y[E].s.r>d)&&!(y[E].e.c<p)&&!(y[E].e.r<d)){(y[E].s.c!=p||y[E].s.r!=d)&&(A=!0),M["table:number-columns-spanned"]=y[E].e.c-y[E].s.c+1,M["table:number-rows-spanned"]=y[E].e.r-y[E].s.r+1;break}if(A){m.push(r);continue}var H=zt({r:d,c:p}),re=w?(o[d]||[])[p]:o[H];if(re&&re.f&&(M["table:formula"]=Ut(lV(re.f)),re.F&&re.F.slice(0,H.length)==H)){var q=xa(re.F);M["table:number-matrix-columns-spanned"]=q.e.c-q.s.c+1,M["table:number-matrix-rows-spanned"]=q.e.r-q.s.r+1}if(!re){m.push(e);continue}switch(re.t){case"b":V=re.v?"TRUE":"FALSE",M["office:value-type"]="boolean",M["office:boolean-value"]=re.v?"true":"false";break;case"n":V=re.w||String(re.v||0),M["office:value-type"]="float",M["office:value"]=re.v||0;break;case"s":case"str":V=re.v==null?"":re.v,M["office:value-type"]="string";break;case"d":V=re.w||Fn(re.v).toISOString(),M["office:value-type"]="date",M["office:date-value"]=Fn(re.v).toISOString(),M["table:style-name"]="ce1";break;default:m.push(e);continue}var j=t(V);if(re.l&&re.l.Target){var D=re.l.Target;D=D.charAt(0)=="#"?"#"+cV(D.slice(1)):D,D.charAt(0)!="#"&&!D.match(/^\w+:/)&&(D="../"+D),j=Oe("text:a",j,{"xlink:href":D.replace(/&/g,"&amp;")})}m.push("          "+Oe("table:table-cell",Oe("text:p",j,{}),M)+`
`)}m.push(`        </table:table-row>
`)}return m.push(`      </table:table>
`),m.join("")},a=function(o,c){o.push(` <office:automatic-styles>
`),o.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),o.push(`   <number:month number:style="long"/>
`),o.push(`   <number:text>/</number:text>
`),o.push(`   <number:day number:style="long"/>
`),o.push(`   <number:text>/</number:text>
`),o.push(`   <number:year/>
`),o.push(`  </number:date-style>
`);var h=0;c.SheetNames.map(function(d){return c.Sheets[d]}).forEach(function(d){if(d&&d["!cols"]){for(var p=0;p<d["!cols"].length;++p)if(d["!cols"][p]){var x=d["!cols"][p];if(x.width==null&&x.wpx==null&&x.wch==null)continue;b1(x),x.ods=h;var y=d["!cols"][p].wpx+"px";o.push('  <style:style style:name="co'+h+`" style:family="table-column">
`),o.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+y+`"/>
`),o.push(`  </style:style>
`),++h}}});var m=0;c.SheetNames.map(function(d){return c.Sheets[d]}).forEach(function(d){if(d&&d["!rows"]){for(var p=0;p<d["!rows"].length;++p)if(d["!rows"][p]){d["!rows"][p].ods=m;var x=d["!rows"][p].hpx+"px";o.push('  <style:style style:name="ro'+m+`" style:family="table-row">
`),o.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+x+`"/>
`),o.push(`  </style:style>
`),++m}}}),o.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),o.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),o.push(`  </style:style>
`),o.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),o.push(` </office:automatic-styles>
`)};return function(c,h){var m=[Or],d=Nd({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),p=Nd({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});h.bookType=="fods"?(m.push("<office:document"+d+p+`>
`),m.push(PA().replace(/office:document-meta/g,"office:meta"))):m.push("<office:document-content"+d+`>
`),a(m,c),m.push(`  <office:body>
`),m.push(`    <office:spreadsheet>
`);for(var x=0;x!=c.SheetNames.length;++x)m.push(n(c.Sheets[c.SheetNames[x]],c,x));return m.push(`    </office:spreadsheet>
`),m.push(`  </office:body>
`),h.bookType=="fods"?m.push("</office:document>"):m.push("</office:document-content>"),m.join("")}})();function TC(t,e){if(e.bookType=="fods")return qw(t,e);var r=m1(),n="",a=[],o=[];return n="mimetype",ft(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",ft(r,n,qw(t,e)),a.push([n,"text/xml"]),o.push([n,"ContentFile"]),n="styles.xml",ft(r,n,zB(t,e)),a.push([n,"text/xml"]),o.push([n,"StylesFile"]),n="meta.xml",ft(r,n,Or+PA()),a.push([n,"text/xml"]),o.push([n,"MetadataFile"]),n="manifest.rdf",ft(r,n,e8(o)),a.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",ft(r,n,JL(a)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function T0(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function HB(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):ts(wd(t))}function GB(t,e){e:for(var r=0;r<=t.length-e.length;++r){for(var n=0;n<e.length;++n)if(t[r+n]!=e[n])continue e;return!0}return!1}function Oo(t){var e=t.reduce(function(a,o){return a+o.length},0),r=new Uint8Array(e),n=0;return t.forEach(function(a){r.set(a,n),n+=a.length}),r}function qB(t,e,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,a=r/Math.pow(10,n-6176);t[e+15]|=n>>7,t[e+14]|=(n&127)<<1;for(var o=0;a>=1;++o,a/=256)t[e+o]=a&255;t[e+15]|=r>=0?0:128}function bd(t,e){var r=e?e[0]:0,n=t[r]&127;e:if(t[r++]>=128&&(n|=(t[r]&127)<<7,t[r++]<128||(n|=(t[r]&127)<<14,t[r++]<128)||(n|=(t[r]&127)<<21,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return e&&(e[0]=r),n}function Vt(t){var e=new Uint8Array(7);e[0]=t&127;var r=1;e:if(t>127){if(e[r-1]|=128,e[r]=t>>7&127,++r,t<=16383||(e[r-1]|=128,e[r]=t>>14&127,++r,t<=2097151)||(e[r-1]|=128,e[r]=t>>21&127,++r,t<=268435455)||(e[r-1]|=128,e[r]=t/256>>>21&127,++r,t<=34359738367)||(e[r-1]|=128,e[r]=t/65536>>>21&127,++r,t<=4398046511103))break e;e[r-1]|=128,e[r]=t/16777216>>>21&127,++r}return e.slice(0,r)}function tu(t){var e=0,r=t[e]&127;e:if(t[e++]>=128){if(r|=(t[e]&127)<<7,t[e++]<128||(r|=(t[e]&127)<<14,t[e++]<128)||(r|=(t[e]&127)<<21,t[e++]<128))break e;r|=(t[e]&127)<<28}return r}function Lr(t){for(var e=[],r=[0];r[0]<t.length;){var n=r[0],a=bd(t,r),o=a&7;a=Math.floor(a/8);var c=0,h;if(a==0)break;switch(o){case 0:{for(var m=r[0];t[r[0]++]>=128;);h=t.slice(m,r[0])}break;case 5:c=4,h=t.slice(r[0],r[0]+c),r[0]+=c;break;case 1:c=8,h=t.slice(r[0],r[0]+c),r[0]+=c;break;case 2:c=bd(t,r),h=t.slice(r[0],r[0]+c),r[0]+=c;break;case 3:case 4:default:throw new Error("PB Type ".concat(o," for Field ").concat(a," at offset ").concat(n))}var d={data:h,type:o};e[a]==null?e[a]=[d]:e[a].push(d)}return e}function sn(t){var e=[];return t.forEach(function(r,n){r.forEach(function(a){a.data&&(e.push(Vt(n*8+a.type)),a.type==2&&e.push(Vt(a.data.length)),e.push(a.data))})}),Oo(e)}function Za(t){for(var e,r=[],n=[0];n[0]<t.length;){var a=bd(t,n),o=Lr(t.slice(n[0],n[0]+a));n[0]+=a;var c={id:tu(o[1][0].data),messages:[]};o[2].forEach(function(h){var m=Lr(h.data),d=tu(m[3][0].data);c.messages.push({meta:m,data:t.slice(n[0],n[0]+d)}),n[0]+=d}),(e=o[3])!=null&&e[0]&&(c.merge=tu(o[3][0].data)>>>0>0),r.push(c)}return r}function Fc(t){var e=[];return t.forEach(function(r){var n=[];n[1]=[{data:Vt(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:Vt(+!!r.merge),type:0}]);var a=[];r.messages.forEach(function(c){a.push(c.data),c.meta[3]=[{type:0,data:Vt(c.data.length)}],n[2].push({data:sn(c.meta),type:2})});var o=sn(n);e.push(Vt(o.length)),e.push(o),a.forEach(function(c){return e.push(c)})}),Oo(e)}function $B(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],n=bd(e,r),a=[];r[0]<e.length;){var o=e[r[0]]&3;if(o==0){var c=e[r[0]++]>>2;if(c<60)++c;else{var h=c-59;c=e[r[0]],h>1&&(c|=e[r[0]+1]<<8),h>2&&(c|=e[r[0]+2]<<16),h>3&&(c|=e[r[0]+3]<<24),c>>>=0,c++,r[0]+=h}a.push(e.slice(r[0],r[0]+c)),r[0]+=c;continue}else{var m=0,d=0;if(o==1?(d=(e[r[0]]>>2&7)+4,m=(e[r[0]++]&224)<<3,m|=e[r[0]++]):(d=(e[r[0]++]>>2)+1,o==2?(m=e[r[0]]|e[r[0]+1]<<8,r[0]+=2):(m=(e[r[0]]|e[r[0]+1]<<8|e[r[0]+2]<<16|e[r[0]+3]<<24)>>>0,r[0]+=4)),a=[Oo(a)],m==0)throw new Error("Invalid offset 0");if(m>a[0].length)throw new Error("Invalid offset beyond length");if(d>=m)for(a.push(a[0].slice(-m)),d-=m;d>=a[a.length-1].length;)a.push(a[a.length-1]),d-=a[a.length-1].length;a.push(a[0].slice(-m,-m+d))}}var p=Oo(a);if(p.length!=n)throw new Error("Unexpected length: ".concat(p.length," != ").concat(n));return p}function es(t){for(var e=[],r=0;r<t.length;){var n=t[r++],a=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,e.push($B(n,t.slice(r,r+a))),r+=a}if(r!==t.length)throw new Error("data is not a valid framed stream!");return Oo(e)}function Lc(t){for(var e=[],r=0;r<t.length;){var n=Math.min(t.length-r,268435455),a=new Uint8Array(4);e.push(a);var o=Vt(n),c=o.length;e.push(o),n<=60?(c++,e.push(new Uint8Array([n-1<<2]))):n<=256?(c+=2,e.push(new Uint8Array([240,n-1&255]))):n<=65536?(c+=3,e.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(c+=4,e.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(c+=5,e.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),e.push(t.slice(r,r+n)),c+=n,a[0]=0,a[1]=c&255,a[2]=c>>8&255,a[3]=c>>16&255,r+=n}return Oo(e)}function wv(t,e){var r=new Uint8Array(32),n=T0(r),a=12,o=0;switch(r[0]=5,t.t){case"n":r[1]=2,qB(r,a,t.v),o|=1,a+=16;break;case"b":r[1]=6,n.setFloat64(a,t.v?1:0,!0),o|=2,a+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[1]=3,n.setUint32(a,e.indexOf(t.v),!0),o|=8,a+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(8,o,!0),r.slice(0,a)}function Nv(t,e){var r=new Uint8Array(32),n=T0(r),a=12,o=0;switch(r[0]=3,t.t){case"n":r[2]=2,n.setFloat64(a,t.v,!0),o|=32,a+=8;break;case"b":r[2]=6,n.setFloat64(a,t.v?1:0,!0),o|=32,a+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[2]=3,n.setUint32(a,e.indexOf(t.v),!0),o|=16,a+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(4,o,!0),r.slice(0,a)}function io(t){var e=Lr(t);return bd(e[1][0].data)}function WB(t,e,r){var n,a,o,c;if(!((n=t[6])!=null&&n[0])||!((a=t[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var h=((c=(o=t[8])==null?void 0:o[0])==null?void 0:c.data)&&tu(t[8][0].data)>0||!1;if(h)throw"Math only works with normal offsets";for(var m=0,d=T0(t[7][0].data),p=0,x=[],y=T0(t[4][0].data),E=0,w=[],T=0;T<e.length;++T){if(e[T]==null){d.setUint16(T*2,65535,!0),y.setUint16(T*2,65535);continue}d.setUint16(T*2,p,!0),y.setUint16(T*2,E,!0);var b,A;switch(typeof e[T]){case"string":b=wv({t:"s",v:e[T]},r),A=Nv({t:"s",v:e[T]},r);break;case"number":b=wv({t:"n",v:e[T]},r),A=Nv({t:"n",v:e[T]},r);break;case"boolean":b=wv({t:"b",v:e[T]},r),A=Nv({t:"b",v:e[T]},r);break;default:throw new Error("Unsupported value "+e[T])}x.push(b),p+=b.length,w.push(A),E+=A.length,++m}for(t[2][0].data=Vt(m);T<t[7][0].data.length/2;++T)d.setUint16(T*2,65535,!0),y.setUint16(T*2,65535,!0);return t[6][0].data=Oo(x),t[3][0].data=Oo(w),m}function YB(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=xa(r["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(Ir(n)));var o=w0(r,{range:n,header:1}),c=["~Sh33tJ5~"];o.forEach(function(ee){return ee.forEach(function(J){typeof J=="string"&&c.push(J)})});var h={},m=[],d=Kt.read(e.numbers,{type:"base64"});d.FileIndex.map(function(ee,J){return[ee,d.FullPaths[J]]}).forEach(function(ee){var J=ee[0],te=ee[1];if(J.type==2&&J.name.match(/\.iwa/)){var he=J.content,Le=es(he),ke=Za(Le);ke.forEach(function(He){m.push(He.id),h[He.id]={deps:[],location:te,type:tu(He.messages[0].meta[1][0].data)}})}}),m.sort(function(ee,J){return ee-J});var p=m.filter(function(ee){return ee>1}).map(function(ee){return[ee,Vt(ee)]});d.FileIndex.map(function(ee,J){return[ee,d.FullPaths[J]]}).forEach(function(ee){var J=ee[0];if(ee[1],!!J.name.match(/\.iwa/)){var te=Za(es(J.content));te.forEach(function(he){he.messages.forEach(function(Le){p.forEach(function(ke){he.messages.some(function(He){return tu(He.meta[1][0].data)!=11006&&GB(He.data,ke[1])})&&h[ke[0]].deps.push(he.id)})})})}});for(var x=Kt.find(d,h[1].location),y=Za(es(x.content)),E,w=0;w<y.length;++w){var T=y[w];T.id==1&&(E=T)}var b=io(Lr(E.messages[0].data)[1][0].data);for(x=Kt.find(d,h[b].location),y=Za(es(x.content)),w=0;w<y.length;++w)T=y[w],T.id==b&&(E=T);for(b=io(Lr(E.messages[0].data)[2][0].data),x=Kt.find(d,h[b].location),y=Za(es(x.content)),w=0;w<y.length;++w)T=y[w],T.id==b&&(E=T);for(b=io(Lr(E.messages[0].data)[2][0].data),x=Kt.find(d,h[b].location),y=Za(es(x.content)),w=0;w<y.length;++w)T=y[w],T.id==b&&(E=T);var A=Lr(E.messages[0].data);{A[6][0].data=Vt(n.e.r+1),A[7][0].data=Vt(n.e.c+1);var M=io(A[46][0].data),V=Kt.find(d,h[M].location),H=Za(es(V.content));{for(var re=0;re<H.length&&H[re].id!=M;++re);if(H[re].id!=M)throw"Bad ColumnRowUIDMapArchive";var q=Lr(H[re].messages[0].data);q[1]=[],q[2]=[],q[3]=[];for(var j=0;j<=n.e.c;++j){var D=[];D[1]=D[2]=[{type:0,data:Vt(j+420690)}],q[1].push({type:2,data:sn(D)}),q[2].push({type:0,data:Vt(j)}),q[3].push({type:0,data:Vt(j)})}q[4]=[],q[5]=[],q[6]=[];for(var S=0;S<=n.e.r;++S)D=[],D[1]=D[2]=[{type:0,data:Vt(S+726270)}],q[4].push({type:2,data:sn(D)}),q[5].push({type:0,data:Vt(S)}),q[6].push({type:0,data:Vt(S)});H[re].messages[0].data=sn(q)}V.content=Lc(Fc(H)),V.size=V.content.length,delete A[46];var P=Lr(A[4][0].data);{P[7][0].data=Vt(n.e.r+1);var O=Lr(P[1][0].data),C=io(O[2][0].data);V=Kt.find(d,h[C].location),H=Za(es(V.content));{if(H[0].id!=C)throw"Bad HeaderStorageBucket";var k=Lr(H[0].messages[0].data);for(S=0;S<o.length;++S){var Ce=Lr(k[2][0].data);Ce[1][0].data=Vt(S),Ce[4][0].data=Vt(o[S].length),k[2][S]={type:k[2][0].type,data:sn(Ce)}}H[0].messages[0].data=sn(k)}V.content=Lc(Fc(H)),V.size=V.content.length;var ze=io(P[2][0].data);V=Kt.find(d,h[ze].location),H=Za(es(V.content));{if(H[0].id!=ze)throw"Bad HeaderStorageBucket";for(k=Lr(H[0].messages[0].data),j=0;j<=n.e.c;++j)Ce=Lr(k[2][0].data),Ce[1][0].data=Vt(j),Ce[4][0].data=Vt(n.e.r+1),k[2][j]={type:k[2][0].type,data:sn(Ce)};H[0].messages[0].data=sn(k)}V.content=Lc(Fc(H)),V.size=V.content.length;var ge=io(P[4][0].data);(function(){for(var ee=Kt.find(d,h[ge].location),J=Za(es(ee.content)),te,he=0;he<J.length;++he){var Le=J[he];Le.id==ge&&(te=Le)}var ke=Lr(te.messages[0].data);{ke[3]=[];var He=[];c.forEach(function(Ze,Ht){He[1]=[{type:0,data:Vt(Ht)}],He[2]=[{type:0,data:Vt(1)}],He[3]=[{type:2,data:HB(Ze)}],ke[3].push({type:2,data:sn(He)})})}te.messages[0].data=sn(ke);var ae=Fc(J),Ve=Lc(ae);ee.content=Ve,ee.size=ee.content.length})();var De=Lr(P[3][0].data);{var Fe=De[1][0];delete De[2];var Xe=Lr(Fe.data);{var Z=io(Xe[2][0].data);(function(){for(var ee=Kt.find(d,h[Z].location),J=Za(es(ee.content)),te,he=0;he<J.length;++he){var Le=J[he];Le.id==Z&&(te=Le)}var ke=Lr(te.messages[0].data);{delete ke[6],delete De[7];var He=new Uint8Array(ke[5][0].data);ke[5]=[];for(var ae=0,Ve=0;Ve<=n.e.r;++Ve){var Ze=Lr(He);ae+=WB(Ze,o[Ve],c),Ze[1][0].data=Vt(Ve),ke[5].push({data:sn(Ze),type:2})}ke[1]=[{type:0,data:Vt(n.e.c+1)}],ke[2]=[{type:0,data:Vt(n.e.r+1)}],ke[3]=[{type:0,data:Vt(ae)}],ke[4]=[{type:0,data:Vt(n.e.r+1)}]}te.messages[0].data=sn(ke);var Ht=Fc(J),gt=Lc(Ht);ee.content=gt,ee.size=ee.content.length})()}Fe.data=sn(Xe)}P[3][0].data=sn(De)}A[4][0].data=sn(P)}E.messages[0].data=sn(A);var _e=Fc(y),Y=Lc(_e);return x.content=Y,x.size=x.content.length,d}function KB(t){return function(r){for(var n=0;n!=t.length;++n){var a=t[n];r[a[0]]===void 0&&(r[a[0]]=a[1]),a[2]==="n"&&(r[a[0]]=Number(r[a[0]]))}}}function R1(t){KB([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function XB(t,e){return e.bookType=="ods"?TC(t,e):e.bookType=="numbers"?YB(t,e):e.bookType=="xlsb"?QB(t,e):JB(t,e)}function QB(t,e){qc=1024,t&&!t.SSF&&(t.SSF=Zn(vr)),t&&t.SSF&&(Z0(),J0(t.SSF),e.revssf=ep(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,od?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r=e.bookType=="xlsb"?"bin":"xml",n=aC.indexOf(e.bookType)>-1,a=kA();R1(e=e||{});var o=m1(),c="",h=0;if(e.cellXfs=[],Vo(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),c="docProps/core.xml",ft(o,c,FA(t.Props,e)),a.coreprops.push(c),Bt(e.rels,2,c,Ct.CORE_PROPS),c="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var m=[],d=0;d<t.SheetNames.length;++d)(t.Workbook.Sheets[d]||{}).Hidden!=2&&m.push(t.SheetNames[d]);t.Props.SheetNames=m}for(t.Props.Worksheets=t.Props.SheetNames.length,ft(o,c,VA(t.Props)),a.extprops.push(c),Bt(e.rels,3,c,Ct.EXT_PROPS),t.Custprops!==t.Props&&gn(t.Custprops||{}).length>0&&(c="docProps/custom.xml",ft(o,c,BA(t.Custprops)),a.custprops.push(c),Bt(e.rels,4,c,Ct.CUST_PROPS)),h=1;h<=t.SheetNames.length;++h){var p={"!id":{}},x=t.Sheets[t.SheetNames[h-1]],y=(x||{})["!type"]||"sheet";switch(y){case"chart":default:c="xl/worksheets/sheet"+h+"."+r,ft(o,c,eB(h-1,c,e,t,p)),a.sheets.push(c),Bt(e.wbrels,-1,"worksheets/sheet"+h+"."+r,Ct.WS[0])}if(x){var E=x["!comments"],w=!1,T="";E&&E.length>0&&(T="xl/comments"+h+"."+r,ft(o,T,nB(E,T)),a.comments.push(T),Bt(p,-1,"../comments"+h+"."+r,Ct.CMNT),w=!0),x["!legacy"]&&w&&ft(o,"xl/drawings/vmlDrawing"+h+".vml",rC(h,x["!comments"])),delete x["!comments"],delete x["!legacy"]}p["!id"].rId1&&ft(o,MA(c),Zc(p))}return e.Strings!=null&&e.Strings.length>0&&(c="xl/sharedStrings."+r,ft(o,c,rB(e.Strings,c,e)),a.strs.push(c),Bt(e.wbrels,-1,"sharedStrings."+r,Ct.SST)),c="xl/workbook."+r,ft(o,c,Z7(t,c)),a.workbooks.push(c),Bt(e.rels,1,c,Ct.WB),c="xl/theme/theme1.xml",ft(o,c,eC(t.Themes,e)),a.themes.push(c),Bt(e.wbrels,-1,"theme/theme1.xml",Ct.THEME),c="xl/styles."+r,ft(o,c,tB(t,c,e)),a.styles.push(c),Bt(e.wbrels,-1,"styles."+r,Ct.STY),t.vbaraw&&n&&(c="xl/vbaProject.bin",ft(o,c,t.vbaraw),a.vba.push(c),Bt(e.wbrels,-1,"vbaProject.bin",Ct.VBA)),c="xl/metadata."+r,ft(o,c,aB(c)),a.metadata.push(c),Bt(e.wbrels,-1,"metadata."+r,Ct.XLMETA),ft(o,"[Content_Types].xml",OA(a,e)),ft(o,"_rels/.rels",Zc(e.rels)),ft(o,"xl/_rels/workbook."+r+".rels",Zc(e.wbrels)),delete e.revssf,delete e.ssf,o}function JB(t,e){qc=1024,t&&!t.SSF&&(t.SSF=Zn(vr)),t&&t.SSF&&(Z0(),J0(t.SSF),e.revssf=ep(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,od?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r="xml",n=aC.indexOf(e.bookType)>-1,a=kA();R1(e=e||{});var o=m1(),c="",h=0;if(e.cellXfs=[],Vo(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),c="docProps/core.xml",ft(o,c,FA(t.Props,e)),a.coreprops.push(c),Bt(e.rels,2,c,Ct.CORE_PROPS),c="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var m=[],d=0;d<t.SheetNames.length;++d)(t.Workbook.Sheets[d]||{}).Hidden!=2&&m.push(t.SheetNames[d]);t.Props.SheetNames=m}t.Props.Worksheets=t.Props.SheetNames.length,ft(o,c,VA(t.Props)),a.extprops.push(c),Bt(e.rels,3,c,Ct.EXT_PROPS),t.Custprops!==t.Props&&gn(t.Custprops||{}).length>0&&(c="docProps/custom.xml",ft(o,c,BA(t.Custprops)),a.custprops.push(c),Bt(e.rels,4,c,Ct.CUST_PROPS));var p=["SheetJ5"];for(e.tcid=0,h=1;h<=t.SheetNames.length;++h){var x={"!id":{}},y=t.Sheets[t.SheetNames[h-1]],E=(y||{})["!type"]||"sheet";switch(E){case"chart":default:c="xl/worksheets/sheet"+h+"."+r,ft(o,c,fC(h-1,e,t,x)),a.sheets.push(c),Bt(e.wbrels,-1,"worksheets/sheet"+h+"."+r,Ct.WS[0])}if(y){var w=y["!comments"],T=!1,b="";if(w&&w.length>0){var A=!1;w.forEach(function(M){M[1].forEach(function(V){V.T==!0&&(A=!0)})}),A&&(b="xl/threadedComments/threadedComment"+h+"."+r,ft(o,b,j5(w,p,e)),a.threadedcomments.push(b),Bt(x,-1,"../threadedComments/threadedComment"+h+"."+r,Ct.TCMNT)),b="xl/comments"+h+"."+r,ft(o,b,nC(w)),a.comments.push(b),Bt(x,-1,"../comments"+h+"."+r,Ct.CMNT),T=!0}y["!legacy"]&&T&&ft(o,"xl/drawings/vmlDrawing"+h+".vml",rC(h,y["!comments"])),delete y["!comments"],delete y["!legacy"]}x["!id"].rId1&&ft(o,MA(c),Zc(x))}return e.Strings!=null&&e.Strings.length>0&&(c="xl/sharedStrings."+r,ft(o,c,YA(e.Strings,e)),a.strs.push(c),Bt(e.wbrels,-1,"sharedStrings."+r,Ct.SST)),c="xl/workbook."+r,ft(o,c,gC(t)),a.workbooks.push(c),Bt(e.rels,1,c,Ct.WB),c="xl/theme/theme1.xml",ft(o,c,eC(t.Themes,e)),a.themes.push(c),Bt(e.wbrels,-1,"theme/theme1.xml",Ct.THEME),c="xl/styles."+r,ft(o,c,JA(t,e)),a.styles.push(c),Bt(e.wbrels,-1,"styles."+r,Ct.STY),t.vbaraw&&n&&(c="xl/vbaProject.bin",ft(o,c,t.vbaraw),a.vba.push(c),Bt(e.wbrels,-1,"vbaProject.bin",Ct.VBA)),c="xl/metadata."+r,ft(o,c,tC()),a.metadata.push(c),Bt(e.wbrels,-1,"metadata."+r,Ct.XLMETA),p.length>1&&(c="xl/persons/person.xml",ft(o,c,R5(p)),a.people.push(c),Bt(e.wbrels,-1,"persons/person.xml",Ct.PEOPLE)),ft(o,"[Content_Types].xml",OA(a,e)),ft(o,"_rels/.rels",Zc(e.rels)),ft(o,"xl/_rels/workbook."+r+".rels",Zc(e.wbrels)),delete e.revssf,delete e.ssf,o}function ZB(t,e){var r="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=Ei(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function wC(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return $d(e.file,Kt.write(t,{type:It?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return Kt.write(t,e)}function eU(t,e){var r=Zn(e||{}),n=XB(t,r);return tU(n,r)}function tU(t,e){var r={},n=It?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(r.compression="DEFLATE"),e.password)r.type=n;else switch(e.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+e.type)}var a=t.FullPaths?Kt.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!e.compression}):t.generate(r);if(typeof Deno<"u"&&typeof a=="string"){if(e.type=="binary"||e.type=="base64")return a;a=new Uint8Array(Q0(a))}return e.password&&typeof encrypt_agile<"u"?wC(encrypt_agile(a,e.password),e):e.type==="file"?$d(e.file,a):e.type=="string"?nd(a):a}function rU(t,e){var r=e||{},n=xB(t,r);return wC(n,r)}function Ns(t,e,r){r||(r="");var n=r+t;switch(e.type){case"base64":return Ed(wd(n));case"binary":return wd(n);case"string":return t;case"file":return $d(e.file,n,"utf8");case"buffer":return It?Si(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):Ns(n,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function nU(t,e){switch(e.type){case"base64":return Ed(t);case"binary":return t;case"string":return t;case"file":return $d(e.file,t,"binary");case"buffer":return It?Si(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function Am(t,e){switch(e.type){case"string":case"base64":case"binary":for(var r="",n=0;n<t.length;++n)r+=String.fromCharCode(t[n]);return e.type=="base64"?Ed(r):e.type=="string"?nd(r):r;case"file":return $d(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function NC(t,e){DF(),z7(t);var r=Zn(e||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=NC(t,r);return r.type="array",Q0(n)}var a=0;if(r.sheet&&(typeof r.sheet=="number"?a=r.sheet:a=t.SheetNames.indexOf(r.sheet),!t.SheetNames[a]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return Ns(gB(t,r),r);case"slk":case"sylk":return Ns(V8.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"htm":case"html":return Ns(yC(t.Sheets[t.SheetNames[a]],r),r);case"txt":return nU(bC(t.Sheets[t.SheetNames[a]],r),r);case"csv":return Ns(D1(t.Sheets[t.SheetNames[a]],r),r,"\uFEFF");case"dif":return Ns(B8.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"dbf":return Am(L8.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"prn":return Ns(U8.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"rtf":return Ns(Y8.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"eth":return Ns(WA.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"fods":return Ns(TC(t,r),r);case"wk1":return Am(Lw.sheet_to_wk1(t.Sheets[t.SheetNames[a]],r),r);case"wk3":return Am(Lw.book_to_wk3(t,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),Am(xC(t,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),rU(t,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return eU(t,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function aU(t){if(!t.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(t.bookType=r.slice(1)),t.bookType=e[t.bookType]||t.bookType}}function oo(t,e,r){var n={};return n.type="file",n.file=e,aU(n),NC(t,n)}function sU(t,e,r,n,a,o,c,h){var m=mn(r),d=h.defval,p=h.raw||!Object.prototype.hasOwnProperty.call(h,"raw"),x=!0,y=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(y,"__rowNum__",{value:r,enumerable:!1})}catch{y.__rowNum__=r}else y.__rowNum__=r;if(!c||t[r])for(var E=e.s.c;E<=e.e.c;++E){var w=c?t[r][E]:t[n[E]+m];if(w===void 0||w.t===void 0){if(d===void 0)continue;o[E]!=null&&(y[o[E]]=d);continue}var T=w.v;switch(w.t){case"z":if(T==null)break;continue;case"e":T=T==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+w.t)}if(o[E]!=null){if(T==null)if(w.t=="e"&&T===null)y[o[E]]=null;else if(d!==void 0)y[o[E]]=d;else if(p&&T===null)y[o[E]]=null;else continue;else y[o[E]]=p&&(w.t!=="n"||w.t==="n"&&h.rawNumbers!==!1)?T:Ti(w,T,h);T!=null&&(x=!1)}}return{row:y,isempty:x}}function w0(t,e){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},n=0,a=1,o=[],c=0,h="",m={s:{r:0,c:0},e:{r:0,c:0}},d=e||{},p=d.range!=null?d.range:t["!ref"];switch(d.header===1?n=1:d.header==="A"?n=2:Array.isArray(d.header)?n=3:d.header==null&&(n=0),typeof p){case"string":m=nr(p);break;case"number":m=nr(t["!ref"]),m.s.r=p;break;default:m=p}n>0&&(a=0);var x=mn(m.s.r),y=[],E=[],w=0,T=0,b=Array.isArray(t),A=m.s.r,M=0,V={};b&&!t[A]&&(t[A]=[]);var H=d.skipHidden&&t["!cols"]||[],re=d.skipHidden&&t["!rows"]||[];for(M=m.s.c;M<=m.e.c;++M)if(!(H[M]||{}).hidden)switch(y[M]=bn(M),r=b?t[A][M]:t[y[M]+x],n){case 1:o[M]=M-m.s.c;break;case 2:o[M]=y[M];break;case 3:o[M]=d.header[M-m.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),h=c=Ti(r,null,d),T=V[c]||0,!T)V[c]=1;else{do h=c+"_"+T++;while(V[h]);V[c]=T,V[h]=1}o[M]=h}for(A=m.s.r+a;A<=m.e.r;++A)if(!(re[A]||{}).hidden){var q=sU(t,m,A,y,n,o,b,d);(q.isempty===!1||(n===1?d.blankrows!==!1:d.blankrows))&&(E[w++]=q.row)}return E.length=w,E}var $w=/"/g;function iU(t,e,r,n,a,o,c,h){for(var m=!0,d=[],p="",x=mn(r),y=e.s.c;y<=e.e.c;++y)if(n[y]){var E=h.dense?(t[r]||[])[y]:t[n[y]+x];if(E==null)p="";else if(E.v!=null){m=!1,p=""+(h.rawNumbers&&E.t=="n"?E.v:Ti(E,null,h));for(var w=0,T=0;w!==p.length;++w)if((T=p.charCodeAt(w))===a||T===o||T===34||h.forceQuotes){p='"'+p.replace($w,'""')+'"';break}p=="ID"&&(p='"ID"')}else E.f!=null&&!E.F?(m=!1,p="="+E.f,p.indexOf(",")>=0&&(p='"'+p.replace($w,'""')+'"')):p="";d.push(p)}return h.blankrows===!1&&m?null:d.join(c)}function D1(t,e){var r=[],n=e??{};if(t==null||t["!ref"]==null)return"";var a=nr(t["!ref"]),o=n.FS!==void 0?n.FS:",",c=o.charCodeAt(0),h=n.RS!==void 0?n.RS:`
`,m=h.charCodeAt(0),d=new RegExp((o=="|"?"\\|":o)+"+$"),p="",x=[];n.dense=Array.isArray(t);for(var y=n.skipHidden&&t["!cols"]||[],E=n.skipHidden&&t["!rows"]||[],w=a.s.c;w<=a.e.c;++w)(y[w]||{}).hidden||(x[w]=bn(w));for(var T=0,b=a.s.r;b<=a.e.r;++b)(E[b]||{}).hidden||(p=iU(t,a,b,x,c,m,o,n),p!=null&&(n.strip&&(p=p.replace(d,"")),(p||n.blankrows!==!1)&&r.push((T++?h:"")+p)));return delete n.dense,r.join("")}function bC(t,e){e||(e={}),e.FS="	",e.RS=`
`;var r=D1(t,e);return r}function oU(t){var e="",r,n="";if(t==null||t["!ref"]==null)return[];var a=nr(t["!ref"]),o="",c=[],h,m=[],d=Array.isArray(t);for(h=a.s.c;h<=a.e.c;++h)c[h]=bn(h);for(var p=a.s.r;p<=a.e.r;++p)for(o=mn(p),h=a.s.c;h<=a.e.c;++h)if(e=c[h]+o,r=d?(t[p]||[])[h]:t[e],n="",r!==void 0){if(r.F!=null){if(e=r.F,!r.f)continue;n=r.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}m[m.length]=e+"="+n}return m}function SC(t,e,r){var n=r||{},a=+!n.skipHeader,o=t||{},c=0,h=0;if(o&&n.origin!=null)if(typeof n.origin=="number")c=n.origin;else{var m=typeof n.origin=="string"?Qr(n.origin):n.origin;c=m.r,h=m.c}var d,p={s:{c:0,r:0},e:{c:h,r:c+e.length-1+a}};if(o["!ref"]){var x=nr(o["!ref"]);p.e.c=Math.max(p.e.c,x.e.c),p.e.r=Math.max(p.e.r,x.e.r),c==-1&&(c=x.e.r+1,p.e.r=c+e.length-1+a)}else c==-1&&(c=0,p.e.r=e.length-1+a);var y=n.header||[],E=0;e.forEach(function(T,b){gn(T).forEach(function(A){(E=y.indexOf(A))==-1&&(y[E=y.length]=A);var M=T[A],V="z",H="",re=zt({c:h+E,r:c+b+a});d=Sd(o,re),M&&typeof M=="object"&&!(M instanceof Date)?o[re]=M:(typeof M=="number"?V="n":typeof M=="boolean"?V="b":typeof M=="string"?V="s":M instanceof Date?(V="d",n.cellDates||(V="n",M=Jn(M)),H=n.dateNF||vr[14]):M===null&&n.nullError&&(V="e",M=0),d?(d.t=V,d.v=M,delete d.w,delete d.R,H&&(d.z=H)):o[re]=d={t:V,v:M},H&&(d.z=H))})}),p.e.c=Math.max(p.e.c,h+y.length-1);var w=mn(c);if(a)for(E=0;E<y.length;++E)o[bn(E+h)+w]={t:"s",v:y[E]};return o["!ref"]=Ir(p),o}function lU(t,e){return SC(null,t,e)}function Sd(t,e,r){if(typeof e=="string"){if(Array.isArray(t)){var n=Qr(e);return t[n.r]||(t[n.r]=[]),t[n.r][n.c]||(t[n.r][n.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?Sd(t,zt(e)):Sd(t,zt({r:e,c:r||0}))}function cU(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var r=t.SheetNames.indexOf(e);if(r>-1)return r;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function uU(){return{SheetNames:[],Sheets:{}}}function hU(t,e,r,n){var a=1;if(!r)for(;a<=65535&&t.SheetNames.indexOf(r="Sheet"+a)!=-1;++a,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&t.SheetNames.indexOf(r)>=0){var o=r.match(/(^.*?)(\d+)$/);a=o&&+o[2]||0;var c=o&&o[1]||r;for(++a;a<=65535&&t.SheetNames.indexOf(r=c+a)!=-1;++a);}if(pC(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=e,r}function dU(t,e,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var n=cU(t,e);switch(t.Workbook.Sheets[n]||(t.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[n].Hidden=r}function fU(t,e){return t.z=e,t}function AC(t,e,r){return e?(t.l={Target:e},r&&(t.l.Tooltip=r)):delete t.l,t}function mU(t,e,r){return AC(t,"#"+e,r)}function pU(t,e,r){t.c||(t.c=[]),t.c.push({t:e,a:r||"SheetJS"})}function gU(t,e,r,n){for(var a=typeof e!="string"?e:nr(e),o=typeof e=="string"?e:Ir(e),c=a.s.r;c<=a.e.r;++c)for(var h=a.s.c;h<=a.e.c;++h){var m=Sd(t,c,h);m.t="n",m.F=o,delete m.v,c==a.s.r&&h==a.s.c&&(m.f=r,n&&(m.D=!0))}return t}var At={encode_col:bn,encode_row:mn,encode_cell:zt,encode_range:Ir,decode_col:_1,decode_row:y1,split_cell:DL,decode_cell:Qr,decode_range:xa,format_cell:Ti,sheet_add_aoa:AA,sheet_add_json:SC,sheet_add_dom:_C,aoa_to_sheet:Cu,json_to_sheet:lU,table_to_sheet:EC,table_to_book:BB,sheet_to_csv:D1,sheet_to_txt:bC,sheet_to_json:w0,sheet_to_html:yC,sheet_to_formulae:oU,sheet_to_row_object_array:w0,sheet_get_cell:Sd,book_new:uU,book_append_sheet:hU,book_set_sheet_visibility:dU,cell_set_number_format:fU,cell_set_hyperlink:AC,cell_set_internal_link:mU,cell_add_comment:pU,sheet_set_array_formula:gU,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const Ye=t=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t),Ia=t=>`${t.toFixed(2)}%`,lo={exportRevenueByHouse(t,e="receitas-por-casa.xlsx"){const r=At.json_to_sheet(t.map(a=>({Casa:a.houseName,Endereo:a.houseAddress,Vendas:a.numberOfSales,Noites:a.numberOfNights,Dirias:Ye(a.dailyRatesRevenue),Concierge:Ye(a.conciergeRevenue),"Comisses Fornecedores":Ye(a.suppliersCommission),"Receita Bruta":Ye(a.grossRevenue),Despesas:Ye(a.expenses),"Receita Lquida":Ye(a.netRevenue)}))),n=At.book_new();At.book_append_sheet(n,r,"Receitas por Casa"),oo(n,e)},exportCashFlow(t,e="fluxo-de-caixa.xlsx"){const r=At.json_to_sheet(t.map(a=>({Perodo:a.period,Entradas:Ye(a.cashIn),Sadas:Ye(a.cashOut),"Saldo do Perodo":Ye(a.balance),"Saldo Acumulado":Ye(a.accumulatedBalance)}))),n=At.book_new();At.book_append_sheet(n,r,"Fluxo de Caixa"),oo(n,e)},exportContractsReport(t,e="relatorio-contratos.xlsx"){const r=[{Status:"Ativos",Quantidade:t.active.count,"Receita Total":Ye(t.active.totalRevenue),"Ticket Mdio":Ye(t.active.averageValue)},{Status:"Concludos",Quantidade:t.completed.count,"Receita Total":Ye(t.completed.totalRevenue),"Ticket Mdio":Ye(t.completed.averageValue)},{Status:"Pendentes",Quantidade:t.pending.count,"Receita Total":Ye(t.pending.totalRevenue),"Ticket Mdio":"-"},{Status:"Cancelados",Quantidade:t.cancelled.count,"Receita Perdida":Ye(t.cancelled.lostRevenue),"Ticket Mdio":"-"}],n=At.json_to_sheet(r),a=At.book_new();At.book_append_sheet(a,n,"Contratos"),oo(a,e)},exportDemographicReport(t,e,r){const n={house:"Casa",gender:"Gnero",location:"Localidade",origin:"Origem"},a=At.json_to_sheet(t.map(c=>({[n[c.category]||"Categoria"]:c.value,"Nmero de Vendas":c.numberOfSales,"Receita Total":Ye(c.totalRevenue),Percentual:Ia(c.percentage),"Ticket Mdio":Ye(c.averageTicket)}))),o=At.book_new();At.book_append_sheet(o,a,`Por ${n[e]||"Categoria"}`),oo(o,r||`vendas-por-${e}.xlsx`)},exportComparativeReport(t,e="relatorio-comparativo.xlsx"){const r=[{Mtrica:"Total de Vendas",[t.period1.label]:t.period1.metrics.totalSales,[t.period2.label]:t.period2.metrics.totalSales,Variao:t.comparison.totalSales.absoluteChange,"Variao %":Ia(t.comparison.totalSales.percentageChange)},{Mtrica:"Receita Total",[t.period1.label]:Ye(t.period1.metrics.totalRevenue),[t.period2.label]:Ye(t.period2.metrics.totalRevenue),Variao:Ye(t.comparison.totalRevenue.absoluteChange),"Variao %":Ia(t.comparison.totalRevenue.percentageChange)},{Mtrica:"Dirias",[t.period1.label]:Ye(t.period1.metrics.dailyRates),[t.period2.label]:Ye(t.period2.metrics.dailyRates),Variao:Ye(t.comparison.dailyRates.absoluteChange),"Variao %":Ia(t.comparison.dailyRates.percentageChange)},{Mtrica:"Concierge",[t.period1.label]:Ye(t.period1.metrics.concierge),[t.period2.label]:Ye(t.period2.metrics.concierge),Variao:Ye(t.comparison.concierge.absoluteChange),"Variao %":Ia(t.comparison.concierge.percentageChange)},{Mtrica:"Comisses Fornecedores",[t.period1.label]:Ye(t.period1.metrics.suppliersCommission),[t.period2.label]:Ye(t.period2.metrics.suppliersCommission),Variao:Ye(t.comparison.suppliersCommission.absoluteChange),"Variao %":Ia(t.comparison.suppliersCommission.percentageChange)},{Mtrica:"Ticket Mdio",[t.period1.label]:Ye(t.period1.metrics.averageTicket),[t.period2.label]:Ye(t.period2.metrics.averageTicket),Variao:Ye(t.comparison.averageTicket.absoluteChange),"Variao %":Ia(t.comparison.averageTicket.percentageChange)},{Mtrica:"Noites Vendidas",[t.period1.label]:t.period1.metrics.numberOfNights,[t.period2.label]:t.period2.metrics.numberOfNights,Variao:t.comparison.numberOfNights.absoluteChange,"Variao %":Ia(t.comparison.numberOfNights.percentageChange)}],n=At.json_to_sheet(r),a=At.book_new();At.book_append_sheet(a,n,"Comparativo"),oo(a,e)},exportTaxReport(t,e="impostos.xlsx"){const r=At.json_to_sheet(t.map(a=>({Empresa:a.companyName,Perodo:a.period,"Receita Bruta":Ye(a.grossRevenue),"Receita Tributvel":Ye(a.taxableRevenue),Alquota:Ia(a.taxRate),"Valor do Imposto":Ye(a.taxAmount),"Receita Lquida":Ye(a.netRevenue)}))),n=At.book_new();At.book_append_sheet(n,r,"Impostos"),oo(n,e)},exportFinancialSummary(t,e="resumo-financeiro.xlsx"){const r=[{Mtrica:"Receita Total",Valor:Ye(t.totalRevenue)},{Mtrica:"Despesas Totais",Valor:Ye(t.totalExpenses)},{Mtrica:"Lucro Lquido",Valor:Ye(t.netProfit)},{Mtrica:"Margem de Lucro",Valor:Ia(t.profitMargin)},{Mtrica:"Nmero de Vendas",Valor:t.numberOfSales.toString()},{Mtrica:"Ticket Mdio",Valor:Ye(t.averageTicket)},{Mtrica:"Receita Dirias",Valor:Ye(t.dailyRatesRevenue)},{Mtrica:"Receita Concierge",Valor:Ye(t.conciergeRevenue)},{Mtrica:"Comisses Fornecedores",Valor:Ye(t.suppliersCommissionRevenue)}],n=At.json_to_sheet(r),a=At.book_new();At.book_append_sheet(a,n,"Resumo"),oo(a,e)},exportCompleteReport(t,e,r,n,a,o="relatorio-completo.xlsx"){const c=At.book_new(),h=At.json_to_sheet([{Mtrica:"Receita Total",Valor:Ye(a.totalRevenue)},{Mtrica:"Despesas Totais",Valor:Ye(a.totalExpenses)},{Mtrica:"Lucro Lquido",Valor:Ye(a.netProfit)},{Mtrica:"Margem de Lucro",Valor:Ia(a.profitMargin)},{Mtrica:"Nmero de Vendas",Valor:a.numberOfSales.toString()},{Mtrica:"Ticket Mdio",Valor:Ye(a.averageTicket)}]);At.book_append_sheet(c,h,"Resumo");const m=At.json_to_sheet(t.map(y=>({Casa:y.houseName,Dirias:Ye(y.dailyRatesRevenue),Concierge:Ye(y.conciergeRevenue),Comisses:Ye(y.suppliersCommission),"Receita Bruta":Ye(y.grossRevenue),Despesas:Ye(y.expenses),"Receita Lquida":Ye(y.netRevenue)})));At.book_append_sheet(c,m,"Receitas por Casa");const d=At.json_to_sheet(e.map(y=>({Perodo:y.period,Entradas:Ye(y.cashIn),Sadas:Ye(y.cashOut),Saldo:Ye(y.balance)})));At.book_append_sheet(c,d,"Fluxo de Caixa");const p=At.json_to_sheet([{Status:"Ativos",Quantidade:r.active.count,Receita:Ye(r.active.totalRevenue)},{Status:"Concludos",Quantidade:r.completed.count,Receita:Ye(r.completed.totalRevenue)},{Status:"Cancelados",Quantidade:r.cancelled.count,Receita:Ye(r.cancelled.lostRevenue)}]);At.book_append_sheet(c,p,"Contratos");const x=At.json_to_sheet(n.map(y=>({Empresa:y.companyName,"Receita Bruta":Ye(y.grossRevenue),Alquota:Ia(y.taxRate),"Valor Imposto":Ye(y.taxAmount),"Receita Lquida":Ye(y.netRevenue)})));At.book_append_sheet(c,x,"Impostos"),oo(c,o)}},vU=()=>{const[t,e]=B.useState(!1),[r,n]=B.useState(null),[a,o]=B.useState({startDate:"",endDate:"",company:"all",houseId:"",reportType:"summary",groupBy:"month",demographicType:"house"}),[c,h]=B.useState(null),[m,d]=B.useState([]),[p,x]=B.useState([]),[y,E]=B.useState(null),[w,T]=B.useState([]),[b,A]=B.useState(null),[M,V]=B.useState([]),{showError:H,showWarning:re,showSuccess:q}=Bn();B.useEffect(()=>{j()},[a]);const j=async()=>{e(!0),n(null);try{const P={startDate:a.startDate?new Date(a.startDate):void 0,endDate:a.endDate?new Date(a.endDate):void 0,company:a.company,houseId:a.houseId||void 0,groupBy:a.groupBy};switch(a.reportType){case"summary":{const O=await so.getFinancialSummary(P);h(O);break}case"revenue-by-house":{const O=await so.getRevenueByHouse(P);d(O);break}case"cash-flow":{const O=await so.getCashFlow(P);x(O);break}case"contracts":{const O=await so.getContractsReport(P);E(O);break}case"breakdown":{const O=await so.getFinancialSummary(P);h(O);break}case"demographic":{const O=await so.getDemographicReport(a.demographicType,P);T(O);break}case"comparative":{if(a.startDate&&a.endDate){const O=new Date(a.startDate),C=new Date(a.endDate),k=C.getTime()-O.getTime(),Ce=new Date(O.getTime()-1),ze=new Date(Ce.getTime()-k),ge=await so.getComparativeReport(ze,Ce,O,C,a.company);A(ge)}else{const O="Por favor, selecione um perodo (data incio e fim) para o relatrio comparativo.";n(O),re("Perodo necessrio",O)}break}case"tax":{const O=await so.getTaxReport(P);V(O);break}default:break}}catch(P){console.error("Erro ao carregar dados financeiros:",P);const O=P instanceof Error?P.message:"Erro ao carregar dados financeiros";n(O),H("Erro financeiro",O)}finally{e(!1)}},D=async P=>{try{switch(n(null),P){case"summary":c&&(lo.exportFinancialSummary(c),q("Exportao concluda","Resumo financeiro exportado."));break;case"revenue-by-house":m.length>0&&(lo.exportRevenueByHouse(m),q("Exportao concluda","Relatrio de receita por casa exportado."));break;case"cash-flow":p.length>0&&(lo.exportCashFlow(p),q("Exportao concluda","Relatrio de fluxo de caixa exportado."));break;case"contracts":y&&(lo.exportContractsReport(y),q("Exportao concluda","Relatrio de contratos exportado."));break;case"breakdown":c&&(lo.exportFinancialSummary(c),q("Exportao concluda","Resumo financeiro exportado."));break;case"demographic":w.length>0&&(lo.exportDemographicReport(w,a.demographicType),q("Exportao concluda","Relatrio demogrfico exportado."));break;case"comparative":b&&(lo.exportComparativeReport(b),q("Exportao concluda","Relatrio comparativo exportado."));break;case"tax":M.length>0&&(lo.exportTaxReport(M),q("Exportao concluda","Relatrio fiscal exportado."));break;default:break}}catch(O){console.error("Erro ao exportar relatrio:",O);const C=O instanceof Error?O.message:"Erro ao exportar relatrio para Excel";n(C),H("Erro na exportao",C)}},S=()=>{if(t)return i.jsx(kr,{});if(r)return i.jsx("div",{className:"no-data error-state",children:r});switch(a.reportType){case"summary":case"breakdown":return c?i.jsx(xF,{data:c}):i.jsx("div",{className:"no-data",children:"Nenhum dado disponvel"});case"revenue-by-house":return i.jsx(yF,{data:m});case"cash-flow":return i.jsx(_F,{data:p});case"contracts":return y?i.jsx(EF,{data:y}):i.jsx("div",{className:"no-data",children:"Nenhum dado disponvel"});case"demographic":return i.jsx(TF,{data:w,type:a.demographicType});case"comparative":return b?i.jsx(wF,{data:b}):i.jsx("div",{className:"no-data",children:"Selecione um perodo para visualizar o relatrio comparativo"});case"tax":return i.jsx(NF,{data:M});default:return i.jsx("div",{className:"no-data",children:"Selecione um tipo de relatrio"})}};return i.jsxs("div",{className:"financial-management",children:[i.jsx("div",{className:"financial-header-modern",children:i.jsx("div",{className:"financial-header-content",children:i.jsxs("div",{className:"financial-header-left",children:[i.jsx("div",{className:"financial-header-icon",children:i.jsx(Pn,{})}),i.jsxs("div",{className:"financial-header-text",children:[i.jsx("h1",{className:"financial-header-title",children:"Financeiro e Relatrios"}),i.jsx("p",{className:"financial-header-subtitle",children:"Anlise completa de receitas, despesas e relatrios gerenciais"})]})]})})}),i.jsx(vF,{onFilterChange:o,onExport:D}),i.jsx("div",{className:"financial-content",children:S()})]})},xU=({filters:t,onFiltersChange:e,onClearFilters:r,loading:n=!1})=>{const[a,o]=B.useState([]),[c,h]=B.useState(t);B.useEffect(()=>{(async()=>{try{const T=await as.getAll();o(T.filter(b=>b.status==="available"))}catch(T){console.error("Erro ao carregar casas:",T)}})()},[]),B.useEffect(()=>{h(t)},[t]);const m=(w,T)=>{const b={...c,[w]:T};h(b),e(b)},d=()=>{const w={period:"month",company:"all",houseId:void 0,viewMode:"consolidated",comparisonMode:"previous-month",startDate:void 0,endDate:void 0};h(w),e(w),r()},p=()=>{const w=new Date,T=w.getFullYear(),b=w.getMonth();return[{value:"month",label:"Mensal",description:`Mes atual (${w.toLocaleDateString("pt-BR",{month:"long",year:"numeric"})})`},{value:"quarter",label:"Trimestral",description:`Trimestre atual (Q${Math.floor(b/3)+1}/${T}s)`},{value:"year",label:"Anual",description:`Ano atual (${T})`}]},x=()=>[{value:"all",label:"Todas as empresas",icon:i.jsx(VT,{})},{value:"exclusive",label:"Exclusive Homes",icon:i.jsx(GS,{})},{value:"giogio",label:"Giogio",icon:i.jsx(Nn,{})},{value:"direta",label:"Venda Direta",icon:i.jsx(us,{})}],y=()=>[{value:"consolidated",label:"Consolidado",description:"Soma geral de todas as casas",icon:i.jsx(VT,{size:20})},{value:"individual",label:"Individual",description:"Anlise detalhada de uma casa especfica",icon:i.jsx(Nn,{size:20})}],E=()=>[{value:"previous-month",label:"Ms Anterior",description:"Comparar com o ms anterior"},{value:"previous-year",label:"Ano Anterior",description:"Comparar com o mesmo perodo do ano anterior"}];return i.jsxs("div",{className:"dashboard-filters",children:[i.jsxs("div",{className:"filters-header",children:[i.jsxs("div",{className:"filters-title",children:[i.jsx(Hd,{size:24}),i.jsx("h3",{children:"Filtros do Dashboard"})]}),i.jsx("div",{className:"filters-actions",children:i.jsxs("button",{className:"btn-clear-filters",onClick:d,disabled:n,title:"Limpar Filtros",children:[i.jsx(Do,{size:16}),"Limpar Filtros"]})})]}),i.jsxs("div",{className:"filters-grid",children:[i.jsxs("div",{className:"filter-group",children:[i.jsxs("label",{className:"filter-label",children:[i.jsx(dn,{size:16}),"Perodo"]}),i.jsx("select",{value:c.period,onChange:w=>m("period",w.target.value),className:"filter-select",disabled:n,children:p().map(w=>i.jsx("option",{value:w.value,children:w.label},w.value))}),i.jsx("small",{className:"filter-description",children:p().find(w=>w.value===c.period)?.description})]}),i.jsxs("div",{className:"filter-group",children:[i.jsxs("label",{className:"filter-label",children:[i.jsx(NP,{size:16}),"Empresa"]}),i.jsx("select",{value:c.company,onChange:w=>m("company",w.target.value),className:"filter-select",disabled:n,children:x().map(w=>i.jsx("option",{value:w.value,children:w.label},w.value))})]}),c.viewMode==="individual"&&i.jsxs("div",{className:"filter-group",children:[i.jsxs("label",{className:"filter-label",children:[i.jsx(Nn,{size:16}),"Casa especfica"]}),i.jsxs("select",{value:c.houseId||"",onChange:w=>m("houseId",w.target.value||void 0),className:"filter-select",disabled:n,children:[i.jsx("option",{value:"",children:"Selecione uma casa"}),a.map(w=>i.jsx("option",{value:w.id,children:w.houseName},w.id))]}),!c.houseId&&i.jsx("small",{className:"filter-warning",children:"Selecione uma casa para visualizar os dados especficos"})]}),i.jsxs("div",{className:"filter-group",children:[i.jsxs("label",{className:"filter-label",children:[i.jsx(us,{size:18}),"Tipo de visualizao"]}),i.jsx("div",{className:"view-mode-buttons",children:y().map(w=>i.jsxs("button",{className:`view-mode-btn ${c.viewMode===w.value?"active":""}`,onClick:()=>m("viewMode",w.value),disabled:n,title:w.description,children:[w.icon,i.jsx("span",{children:w.label})]},w.value))})]}),i.jsxs("div",{className:"filter-group",children:[i.jsxs("label",{className:"filter-label",children:[i.jsx(Do,{size:18}),"Comparao"]}),i.jsx("select",{value:c.comparisonMode,onChange:w=>m("comparisonMode",w.target.value),className:"filter-select",disabled:n,children:E().map(w=>i.jsx("option",{value:w.value,children:w.label},w.value))}),i.jsx("small",{className:"filter-description",children:E().find(w=>w.value===c.comparisonMode)?.description})]})]}),i.jsxs("div",{className:"active-filters-summary",children:[i.jsx("h4",{children:"Filtros Ativos:"}),i.jsxs("div",{className:"active-filters-tags",children:[i.jsxs("span",{className:"filter-tag",children:["Perodo:"," ",p().find(w=>w.value===c.period)?.label]}),i.jsxs("span",{className:"filter-tag",children:["Empresa:"," ",x().find(w=>w.value===c.company)?.label]}),i.jsxs("span",{className:"filter-tag",children:["Tipo de visualizao:"," ",y().find(w=>w.value===c.viewMode)?.label]}),c.houseId&&i.jsxs("span",{className:"filter-tag",children:["Casa:"," ",a.find(w=>w.id===c.houseId)?.houseName]}),i.jsxs("span",{className:"filter-tag",children:["Comparao:"," ",E().find(w=>w.value===c.comparisonMode)?.label]})]})]}),n&&i.jsxs("div",{className:"filters-loading",children:[i.jsx("div",{className:"loading-spinner"}),i.jsx("span",{children:"Carregando filtros..."})]})]})},yU=({data:t,loading:e=!1})=>{const r=c=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(c),n=c=>`${c>0?"+":""}${c.toFixed(1)}%`,a=c=>c>0?i.jsx(pr,{size:16,className:"trend-up"}):c<0?i.jsx(Xn,{size:16,className:"trend-down"}):i.jsx(IP,{size:16,className:"trend-neutral"}),o=c=>c>0?"trend-up":c<0?"trend-down":"trend-neutral";return e?i.jsxs("div",{className:"top-indicator",children:[i.jsx("h2",{children:"Indicadores Principais"}),i.jsx("div",{className:"indicators-grid",children:[...Array(5)].map((c,h)=>i.jsx("div",{className:"indicator-card loading",children:i.jsxs("div",{className:"card-skeleton",children:[i.jsx("div",{className:"skeleton-icon"}),i.jsxs("div",{className:"skeleton-content",children:[i.jsx("div",{className:"skeleton-title"}),i.jsx("div",{className:"skeleton-value"}),i.jsx("div",{className:"skeleton-variation"})]})]})},h))})]}):i.jsxs("div",{className:"top-indicator",children:[i.jsx("h2",{children:"Indicadores Principais"}),i.jsx("p",{className:"indicators-subtitle",children:"Mtricas-chave com comparao ao perodo anterior"}),i.jsxs("div",{className:"indicators-grid",children:[i.jsxs("div",{className:"indicator-card contracts-active",children:[i.jsxs("div",{className:"card-header",children:[i.jsx("div",{className:"card-icon",children:i.jsx(Vn,{size:24})}),i.jsxs("div",{className:"card-trend",children:[a(t.activeContracts.variation),i.jsx("span",{className:`trend-value ${o(t.activeContracts.variation)}`,children:n(t.activeContracts.variation)})]})]}),"x",i.jsxs("div",{className:"card-content",children:[i.jsx("h3",{children:"Contratos Ativos"}),i.jsxs("p",{className:"card-value",children:[" ",t.activeContracts.count]}),i.jsx("p",{className:"card-description",children:"Contratos confirmado e pendente no momento"})]})]}),i.jsxs("div",{className:"indicator-card future-reservations",children:[i.jsxs("div",{className:"card-header",children:[i.jsx("div",{className:"card-icon",children:i.jsx(dn,{size:32})}),i.jsx("div",{className:"card-trend",children:i.jsxs("span",{className:"trend-value neutral",children:[t.futureReservations.count," reservas"]})})]}),i.jsxs("div",{className:"card-content",children:[i.jsx("h3",{children:"Reservas Futuras"}),i.jsx("p",{className:"card-value",children:t.futureReservations.count}),i.jsx("p",{className:"card-description",children:"Prximas reservas agendadas"})]}),t.futureReservations.reservations.length>0&&i.jsxs("div",{className:"card-details",children:[i.jsx("h4",{children:"Prximas Reservas:"}),i.jsxs("div",{className:"reservations-list",children:[t.futureReservations.reservations.slice(0,3).map(c=>i.jsxs("div",{className:"reservation-item",children:[i.jsxs("div",{className:"reservation-info",children:[i.jsx("strong",{children:c.clientName}),i.jsx("span",{children:c.houseName})]}),i.jsxs("div",{className:"reservation-dates",children:[i.jsxs("span",{children:[c.checkInDate.toLocaleDateString("pt-BR")," ","-"," ",c.checkOutDate.toLocaleDateString("pt-BR")]}),i.jsx("span",{className:"reservation-value",children:r(c.contractValue)})]})]},c.id)),t.futureReservations.reservations.length>3&&i.jsxs("div",{className:"more-reservations",children:["+",t.futureReservations.reservations.length-3," mais reservas"]})]})]})]}),i.jsxs("div",{className:"indicator-card daily-rates-month",children:[i.jsxs("div",{className:"card-header",children:[i.jsx("div",{className:"card-icon",children:i.jsx(Pn,{size:32})}),i.jsxs("div",{className:"card-trend",children:[a(t.totalDailyRates.month.variation),i.jsx("span",{className:`trend-value ${o(t.totalDailyRates.month.variation)}`,children:n(t.totalDailyRates.month.variation)})]})]}),i.jsxs("div",{className:"card-content",children:[i.jsx("h3",{children:"Dirias Fechadas (Ms)"}),i.jsx("p",{className:"card-value",children:r(t.totalDailyRates.month.value)}),i.jsx("p",{className:"card-description",children:"Receita de dirias no ms atual"})]})]}),i.jsxs("div",{className:"indicator-card daily-rates-year",children:[i.jsxs("div",{className:"card-header",children:[i.jsx("div",{className:"card-icon",children:i.jsx(Pn,{size:32})}),i.jsxs("div",{className:"card-trend",children:[a(t.totalDailyRates.year.variation),i.jsx("span",{className:`trend-value ${o(t.totalDailyRates.year.variation)}`,children:n(t.totalDailyRates.year.variation)})]})]}),i.jsxs("div",{className:"card-content",children:[i.jsx("h3",{children:"Dirias Fechadas (Ano)"}),i.jsx("p",{className:"card-value",children:r(t.totalDailyRates.year.value)}),i.jsx("p",{className:"card-description",children:"Receita de dirias no ano atual"})]})]}),i.jsxs("div",{className:"indicator-card contracts-month",children:[i.jsxs("div",{className:"card-header",children:[i.jsx("div",{className:"card-icon",children:i.jsx(_i,{size:32})}),i.jsxs("div",{className:"card-trend",children:[a(t.totalContracts.month.variation),i.jsx("span",{className:`trend-value ${o(t.totalContracts.month.variation)}`,children:n(t.totalContracts.month.variation)})]})]}),i.jsxs("div",{className:"card-content",children:[i.jsx("h3",{children:"Contratos Fechados (Ms)"}),i.jsx("p",{className:"card-value",children:t.totalContracts.month.count}),i.jsx("p",{className:"card-description",children:"Contratos concludos no ms atual"})]})]}),i.jsxs("div",{className:"indicator-card contracts-year",children:[i.jsxs("div",{className:"card-header",children:[i.jsx("div",{className:"card-icon",children:i.jsx(_i,{size:32})}),i.jsxs("div",{className:"card-trend",children:[a(t.totalContracts.year.variation),i.jsx("span",{className:`trend-value ${o(t.totalContracts.year.variation)}`,children:n(t.totalContracts.year.variation)})]})]}),i.jsxs("div",{className:"card-content",children:[i.jsx("h3",{children:"Contratos Fechados (Ano)"}),i.jsx("p",{className:"card-value",children:t.totalContracts.year.count}),i.jsx("p",{className:"card-description",children:"Contratos concludos no ano atual"})]})]}),i.jsxs("div",{className:"indicator-card average-ticket",children:[i.jsxs("div",{className:"card-header",children:[i.jsx("div",{className:"card-icon",children:i.jsx(Pn,{size:32})}),i.jsx("div",{className:"card-trend",children:i.jsx("span",{className:"trend-value neutral",children:"Ticket mdio"})})]}),i.jsxs("div",{className:"card-content",children:[i.jsx("h3",{children:"Ticket Mdio"}),i.jsx("p",{className:"card-value",children:r(t.averageTicket.total)}),i.jsx("p",{className:"card-description",children:"Valor mdio por contrato"})]}),i.jsx("div",{className:"card-details",children:i.jsxs("div",{className:"ticket-breakdown",children:[i.jsxs("div",{className:"breakdown-item",children:[i.jsx("span",{children:"Por Casa:"}),i.jsx("span",{children:r(t.averageTicket.byHouse)})]}),i.jsxs("div",{className:"breakdown-item",children:[i.jsx("span",{children:"Por Fornecedor:"}),i.jsx("span",{children:r(t.averageTicket.bySupplier)})]}),i.jsxs("div",{className:"breakdown-item",children:[i.jsx("span",{children:"Por Concierge:"}),i.jsx("span",{children:r(t.averageTicket.byConcierge)})]})]})})]})]})]})},_U=({data:t,loading:e=!1})=>{const[r,n]=B.useState("sales"),a=m=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(m),o=m=>`${m.toFixed(1)}%`,c=m=>m>0?i.jsx(pr,{size:16,className:"trend-up"}):m<0?i.jsx(Xn,{size:16,className:"trend-down"}):null,h=m=>m>0?"trend-up":m<0?"trend-down":"trend-neutral";return e?i.jsxs("div",{className:"financial-block",children:[i.jsxs("div",{className:"block-header",children:[i.jsxs("h2",{children:[i.jsx(Os,{size:24,style:{marginRight:"8px",verticalAlign:"middle"}}),"Bloco Financeiro Consolidado"]}),i.jsxs("div",{className:"chart-selector loading",children:[i.jsx("div",{className:"skeleton-button"}),i.jsx("div",{className:"skeleton-button"}),i.jsx("div",{className:"skeleton-button"})]})]}),i.jsx("div",{className:"financial-cards",children:[...Array(6)].map((m,d)=>i.jsx("div",{className:"financial-card loading",children:i.jsxs("div",{className:"card-skeleton",children:[i.jsx("div",{className:"skeleton-icon"}),i.jsxs("div",{className:"skeleton-content",children:[i.jsx("div",{className:"skeleton-title"}),i.jsx("div",{className:"skeleton-value"})]})]})},d))}),i.jsx("div",{className:"chart-container loading",children:i.jsx("div",{className:"skeleton-chart"})})]}):i.jsxs("div",{className:"financial-block",children:[i.jsxs("div",{className:"block-header",children:[i.jsxs("h2",{children:[i.jsx(Os,{size:24,style:{marginRight:"8px",verticalAlign:"middle"}}),"Bloco Financeiro Consolidado"]}),i.jsx("p",{className:"block-subtitle",children:"Anlise completa de receitas, despesas e margem de contribuio"}),i.jsxs("div",{className:"chart-selector",children:[i.jsxs("button",{className:`chart-btn ${r==="sales"?"active":""}`,onClick:()=>n("sales"),children:[i.jsx(Zh,{size:16}),"Total de Vendas"]}),i.jsxs("button",{className:`chart-btn ${r==="commissions"?"active":""}`,onClick:()=>n("commissions"),children:[i.jsx(cu,{size:16}),"Comisses"]}),i.jsxs("button",{className:`chart-btn ${r==="margin"?"active":""}`,onClick:()=>n("margin"),children:[i.jsx(Nn,{size:16}),"Margem por Casa"]})]})]}),i.jsxs("div",{className:"financial-cards",children:[i.jsxs("div",{className:"financial-card total-sales",children:[i.jsxs("div",{className:"card-header",children:[i.jsx("div",{className:"card-icon",children:i.jsx(Pn,{size:24})}),i.jsxs("div",{className:"card-trend",children:[c(t.totalSales.variation),i.jsx("span",{className:`trend-value ${h(t.totalSales.variation)}`,children:o(t.totalSales.variation)})]})]}),i.jsxs("div",{className:"card-content",children:[i.jsx("h3",{children:"Total de Vendas"}),i.jsx("p",{className:"card-value",children:a(t.totalSales.current)}),i.jsx("p",{className:"card-description",children:"Receita total no perodo"})]})]}),i.jsxs("div",{className:"financial-card total-commissions",children:[i.jsxs("div",{className:"card-header",children:[i.jsx("div",{className:"card-icon",children:i.jsx(pr,{size:24})}),i.jsxs("div",{className:"card-trend",children:[c(t.totalCommissions.variation),i.jsx("span",{className:`trend-value ${h(t.totalCommissions.variation)}`,children:o(t.totalCommissions.variation)})]})]}),i.jsxs("div",{className:"card-content",children:[i.jsx("h3",{children:"Total de Comisses"}),i.jsx("p",{className:"card-value",children:a(t.totalCommissions.current)}),i.jsx("p",{className:"card-description",children:"Comisses pagas no perodo"})]})]}),i.jsxs("div",{className:"financial-card supplier-commissions",children:[i.jsx("div",{className:"card-header",children:i.jsx("div",{className:"card-icon",children:i.jsx(_i,{size:24})})}),i.jsxs("div",{className:"card-content",children:[i.jsx("h3",{children:"Comisses Fornecedores"}),i.jsx("p",{className:"card-value",children:a(t.supplierCommissions.current)}),i.jsx("p",{className:"card-description",children:"Comisses pagas a fornecedores"})]})]}),i.jsxs("div",{className:"financial-card total-concierge",children:[i.jsx("div",{className:"card-header",children:i.jsx("div",{className:"card-icon",children:i.jsx(Ur,{size:24})})}),i.jsxs("div",{className:"card-content",children:[i.jsx("h3",{children:"Total Concierge"}),i.jsx("p",{className:"card-value",children:a(t.concierge.current)}),i.jsx("p",{className:"card-description",children:"Receita de servios de concierge"})]})]}),i.jsxs("div",{className:"financial-card housekeeper-payments",children:[i.jsx("div",{className:"card-header",children:i.jsx("div",{className:"card-icon",children:i.jsx(Nn,{size:24})})}),i.jsxs("div",{className:"card-content",children:[i.jsx("h3",{children:"Pagamentos Governantas"}),i.jsx("p",{className:"card-value",children:a(t.housekeeperPayments.current)}),i.jsx("p",{className:"card-description",children:"Pagamentos realizados a governantas"})]})]}),i.jsxs("div",{className:"financial-card contribution-margin",children:[i.jsxs("div",{className:"card-header",children:[i.jsx("div",{className:"card-icon",children:i.jsx(Zh,{size:24})}),i.jsxs("div",{className:"card-trend",children:[c(t.contributionMargin.total.variation),i.jsx("span",{className:`trend-value ${h(t.contributionMargin.total.variation)}`,children:o(t.contributionMargin.total.variation)})]})]}),i.jsxs("div",{className:"card-content",children:[i.jsx("h3",{children:"Margem de Contribuio"}),i.jsx("p",{className:"card-value",children:a(t.contributionMargin.total.current)}),i.jsx("p",{className:"card-description",children:"Receita - Despesas diretas"})]})]})]}),i.jsxs("div",{className:"chart-container",children:[r==="sales"&&i.jsxs("div",{className:"chart-section",children:[i.jsxs("div",{className:"chart-header",children:[i.jsxs("h3",{children:[i.jsx(Zh,{size:20}),"Evoluo de Vendas - Ms a Ms"]}),i.jsx("div",{className:"chart-info",children:i.jsx("span",{children:"Perodo: ltimos 12 meses"})})]}),i.jsx("div",{className:"chart-content",children:i.jsx("div",{className:"simple-chart",children:i.jsx("div",{className:"chart-bars",children:t.totalSales.chartData.map((m,d)=>i.jsxs("div",{className:"chart-bar-container",children:[i.jsxs("div",{className:"chart-bar-wrapper",children:[i.jsx("div",{className:"chart-bar",style:{height:`${m.value/Math.max(...t.totalSales.chartData.map(p=>p.value))*100}%`,backgroundColor:`hsl(${200+d*20}, 70%, 50%)`}}),i.jsx("div",{className:"bar-value",children:a(m.value)})]}),i.jsx("div",{className:"bar-label",children:m.label?new Date(m.label).toLocaleDateString("pt-BR",{month:"short",year:"2-digit"}):""})]},d))})})})]}),r==="commissions"&&i.jsxs("div",{className:"chart-section",children:[i.jsxs("div",{className:"chart-header",children:[i.jsxs("h3",{children:[i.jsx(cu,{size:20}),"Evoluo de Comisses - Ms a Ms"]}),i.jsx("div",{className:"chart-info",children:i.jsx("span",{children:"Perodo: ltimos 12 meses"})})]}),i.jsx("div",{className:"chart-content",children:i.jsx("div",{className:"simple-chart",children:i.jsx("div",{className:"chart-bars",children:t.totalCommissions.chartData.map((m,d)=>i.jsxs("div",{className:"chart-bar-container",children:[i.jsxs("div",{className:"chart-bar-wrapper",children:[i.jsx("div",{className:"chart-bar",style:{height:`${m.value/Math.max(...t.totalCommissions.chartData.map(p=>p.value))*100}%`,backgroundColor:`hsl(${120+d*15}, 70%, 50%)`}}),i.jsx("div",{className:"bar-value",children:a(m.value)})]}),i.jsx("div",{className:"bar-label",children:m.label?new Date(m.label).toLocaleDateString("pt-BR",{month:"short",year:"2-digit"}):""})]},d))})})})]}),r==="margin"&&i.jsxs("div",{className:"chart-section",children:[i.jsxs("div",{className:"chart-header",children:[i.jsxs("h3",{children:[i.jsx(Nn,{size:20}),"Margem de Contribuio por Casa"]}),i.jsx("div",{className:"chart-info",children:i.jsx("span",{children:"Comparativo entre casas"})})]}),i.jsx("div",{className:"chart-content",children:i.jsx("div",{className:"margin-chart",children:t.contributionMargin.byHouse.map((m,d)=>i.jsxs("div",{className:"margin-house",children:[i.jsxs("div",{className:"house-header",children:[i.jsx("h4",{children:m.houseName}),i.jsx("span",{className:"house-value",children:a(m.margin)})]}),i.jsx("div",{className:"house-bar",children:i.jsx("div",{className:"house-progress",style:{width:`${m.margin/Math.max(...t.contributionMargin.byHouse.map(p=>p.margin))*100}%`,backgroundColor:`hsl(${280+d*40}, 70%, 50%)`}})}),i.jsxs("div",{className:"house-details",children:[i.jsxs("div",{className:"detail-item",children:[i.jsx("span",{children:"Receita:"}),i.jsx("span",{children:a(m.totalRevenue)})]}),i.jsxs("div",{className:"detail-item",children:[i.jsx("span",{children:"Despesas:"}),i.jsx("span",{children:a(m.totalCosts)})]}),i.jsxs("div",{className:"detail-item",children:[i.jsx("span",{children:"Margem:"}),i.jsx("span",{className:"margin-percentage",children:o(m.marginPercentage)})]})]})]},d))})})]})]})]})},EU=({data:t,loading:e=!1})=>{const[r,n]=B.useState("media"),a=d=>`${d.toFixed(1)}%`,o=d=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(d),c=d=>{switch(d){case"instagram":return i.jsx(CP,{size:20});case"facebook":return i.jsx(bP,{size:20});case"google":return i.jsx(rx,{size:20});case"indicacao":return i.jsx(nx,{size:20});case"whatsapp":return i.jsx(nx,{size:20});case"site":return i.jsx(rx,{size:20});case"outros":return i.jsx(fn,{size:20});default:return i.jsx(fn,{size:20})}},h=d=>{switch(d){case"instagram":return"linear-gradient(135deg, #833ab4, #fd1d1d, #fcb045)";case"facebook":return"linear-gradient(135deg, #1877f2, #42a5f5)";case"google":return"linear-gradient(135deg, #3b82f6, #1d4ed8)";case"indicacao":return"linear-gradient(135deg, #10b981, #059669)";case"whatsapp":return"linear-gradient(135deg, #25d366, #128c7e)";case"site":return"linear-gradient(135deg, #8b5cf6, #7c3aed)";case"outros":return"linear-gradient(135deg, #f59e0b, #d97706)";default:return"linear-gradient(135deg, #6b7280, #4b5563)"}},m=d=>d==="male"?i.jsx(ed,{size:20}):i.jsx(PP,{size:20});return e?i.jsxs("div",{className:"commercial-intelligence",children:[i.jsxs("div",{className:"block-header",children:[i.jsxs("h2",{children:[i.jsx(zT,{size:24,style:{marginRight:"8px",verticalAlign:"middle"}}),"Bloco de Inteligncia Comercial"]}),i.jsxs("div",{className:"view-selector loading",children:[i.jsx("div",{className:"skeleton-button"}),i.jsx("div",{className:"skeleton-button"}),i.jsx("div",{className:"skeleton-button"})]})]}),i.jsxs("div",{className:"intelligence-content",children:[i.jsx("div",{className:"intelligence-cards loading",children:[...Array(3)].map((d,p)=>i.jsx("div",{className:"intelligence-card loading",children:i.jsxs("div",{className:"card-skeleton",children:[i.jsx("div",{className:"skeleton-icon"}),i.jsxs("div",{className:"skeleton-content",children:[i.jsx("div",{className:"skeleton-title"}),i.jsx("div",{className:"skeleton-value"})]})]})},p))}),i.jsx("div",{className:"chart-container loading",children:i.jsx("div",{className:"skeleton-chart"})})]})]}):i.jsxs("div",{className:"commercial-intelligence",children:[i.jsxs("div",{className:"block-header",children:[i.jsxs("h2",{children:[i.jsx(zT,{size:24,style:{marginRight:"8px",verticalAlign:"middle"}}),"Bloco de Inteligncia Comercial"]}),i.jsx("p",{className:"block-subtitle",children:"Anlise de vendas por origem, perfil demogrfico e ocupao"}),i.jsxs("div",{className:"view-selector",children:[i.jsxs("button",{className:`view-btn ${r==="media"?"active":""}`,onClick:()=>n("media"),children:[i.jsx(cu,{size:16}),"Vendas por Mdia"]}),i.jsxs("button",{className:`view-btn ${r==="gender"?"active":""}`,onClick:()=>n("gender"),children:[i.jsx(Ur,{size:16}),"Vendas por Gnero"]}),i.jsxs("button",{className:`view-btn ${r==="occupancy"?"active":""}`,onClick:()=>n("occupancy"),children:[i.jsx(pr,{size:16}),"Taxa de Ocupao"]})]})]}),i.jsxs("div",{className:"intelligence-content",children:[i.jsxs("div",{className:"intelligence-cards",children:[i.jsxs("div",{className:"intelligence-card media-card",children:[i.jsxs("div",{className:"card-header",children:[i.jsx("div",{className:"card-icon",children:i.jsx(fn,{size:24})}),i.jsxs("div",{className:"card-info",children:[i.jsx("h3",{children:"Vendas por Mdia"}),i.jsx("p",{className:"card-subtitle",children:"Origem das vendas"})]})]}),i.jsx("div",{className:"card-content",children:i.jsx("div",{className:"top-media",children:t.salesByMedia.slice(0,2).map((d,p)=>i.jsxs("div",{className:"media-item",children:[i.jsxs("div",{className:"media-info",children:[i.jsx("div",{className:"media-icon",style:{background:h(d.source)},children:c(d.source)}),i.jsxs("div",{className:"media-details",children:[i.jsx("span",{className:"media-name",children:d.sourceLabel}),i.jsx("span",{className:"media-percentage",children:a(d.percentage)})]})]}),i.jsx("div",{className:"media-bar",children:i.jsx("div",{className:"media-progress",style:{width:`${d.percentage}%`,background:h(d.source)}})})]},p))})})]}),i.jsxs("div",{className:"intelligence-card gender-card",children:[i.jsxs("div",{className:"card-header",children:[i.jsx("div",{className:"card-icon",children:i.jsx(Ur,{size:24})}),i.jsxs("div",{className:"card-info",children:[i.jsx("h3",{children:"Vendas por Gnero"}),i.jsx("p",{className:"card-subtitle",children:"Perfil demogrfico"})]})]}),i.jsx("div",{className:"card-content",children:i.jsx("div",{className:"gender-stats",children:t.salesByGender.map((d,p)=>i.jsxs("div",{className:"gender-item",children:[i.jsx("div",{className:"gender-icon",children:m(d.gender)}),i.jsxs("div",{className:"gender-details",children:[i.jsx("span",{className:"gender-name",children:d.gender==="male"?"Masculino":"Feminino"}),i.jsx("span",{className:"gender-percentage",children:a(d.percentage)})]}),i.jsx("div",{className:"gender-value",children:o(d.revenue)})]},p))})})]}),i.jsxs("div",{className:"intelligence-card occupancy-card",children:[i.jsxs("div",{className:"card-header",children:[i.jsx("div",{className:"card-icon",children:i.jsx(pr,{size:24})}),i.jsxs("div",{className:"card-info",children:[i.jsx("h3",{children:"Taxa de Ocupao"}),i.jsx("p",{className:"card-subtitle",children:"Eficincia operacional"})]})]}),i.jsx("div",{className:"card-content",children:i.jsxs("div",{className:"occupancy-stats",children:[i.jsxs("div",{className:"occupancy-average",children:[i.jsx("span",{className:"average-label",children:"Mdia Geral:"}),i.jsx("span",{className:"average-value",children:a(t.occupancyRate.reduce((d,p)=>d+p.rate,0)/t.occupancyRate.length)})]}),i.jsxs("div",{className:"occupancy-trend",children:[i.jsx("span",{className:"trend-label",children:"Tendncia:"}),i.jsxs("span",{className:"trend-value positive",children:[i.jsx(o1,{size:14}),"+5.2%"]})]})]})})]})]}),i.jsxs("div",{className:"chart-container",children:[r==="media"&&i.jsxs("div",{className:"chart-section",children:[i.jsxs("div",{className:"chart-header",children:[i.jsxs("h3",{children:[i.jsx(cu,{size:20}),"Distribuio de Vendas por Mdia"]}),i.jsx("div",{className:"chart-info",children:i.jsx("span",{children:"Baseado no total de vendas do perodo"})})]}),i.jsx("div",{className:"chart-content",children:i.jsxs("div",{className:"media-chart",children:[i.jsx("div",{className:"chart-legend",children:t.salesByMedia.map((d,p)=>i.jsxs("div",{className:"legend-item",children:[i.jsx("div",{className:"legend-color",style:{background:h(d.source)}}),i.jsxs("div",{className:"legend-info",children:[i.jsx("span",{className:"legend-name",children:d.sourceLabel}),i.jsxs("span",{className:"legend-stats",children:[a(d.percentage)," "," ",o(d.revenue)]})]})]},p))}),i.jsx("div",{className:"chart-visual",children:i.jsx("div",{className:"pie-chart",children:t.salesByMedia.map((d,p)=>{const x=t.salesByMedia.slice(0,p).reduce((E,w)=>E+w.percentage*3.6,0),y=x+d.percentage*3.6;return i.jsx("div",{className:"pie-segment",style:{background:`conic-gradient(${h(d.source)} ${x}deg ${y}deg)`}},p)})})})]})})]}),r==="gender"&&i.jsxs("div",{className:"chart-section",children:[i.jsxs("div",{className:"chart-header",children:[i.jsxs("h3",{children:[i.jsx(Zh,{size:20}),"Vendas por Gnero - Comparativo"]}),i.jsx("div",{className:"chart-info",children:i.jsx("span",{children:"Anlise demogrfica dos clientes"})})]}),i.jsx("div",{className:"chart-content",children:i.jsx("div",{className:"gender-chart",children:i.jsx("div",{className:"gender-bars",children:t.salesByGender.map((d,p)=>i.jsxs("div",{className:"gender-bar-container",children:[i.jsxs("div",{className:"gender-bar-wrapper",children:[i.jsx("div",{className:"gender-bar",style:{height:`${d.percentage}%`,background:d.gender==="male"?"linear-gradient(135deg, #3b82f6, #1d4ed8)":"linear-gradient(135deg, #ec4899, #be185d)"}}),i.jsx("div",{className:"bar-value",children:a(d.percentage)})]}),i.jsx("div",{className:"bar-label",children:d.gender==="male"?"Masculino":"Feminino"}),i.jsx("div",{className:"bar-total",children:o(d.revenue)})]},p))})})})]}),r==="occupancy"&&i.jsxs("div",{className:"chart-section",children:[i.jsxs("div",{className:"chart-header",children:[i.jsxs("h3",{children:[i.jsx(dn,{size:20}),"Taxa de Ocupao por Ms"]}),i.jsx("div",{className:"chart-info",children:i.jsx("span",{children:"Eficincia de ocupao das casas"})})]}),i.jsx("div",{className:"chart-content",children:i.jsx("div",{className:"occupancy-chart",children:i.jsx("div",{className:"occupancy-bars",children:t.occupancyRate.map((d,p)=>i.jsxs("div",{className:"occupancy-bar-container",children:[i.jsxs("div",{className:"occupancy-bar-wrapper",children:[i.jsx("div",{className:"occupancy-bar",style:{height:`${d.rate}%`,background:d.rate>=80?"linear-gradient(135deg, #10b981, #059669)":d.rate>=60?"linear-gradient(135deg, #f59e0b, #d97706)":"linear-gradient(135deg, #ef4444, #dc2626)"}}),i.jsx("div",{className:"bar-value",children:a(d.rate)})]}),i.jsx("div",{className:"bar-label",children:d.month}),i.jsxs("div",{className:"bar-details",children:[i.jsxs("span",{children:[d.occupiedDays," dias ocupados"]}),i.jsxs("span",{children:[d.totalDays," dias totais"]})]})]},p))})})})]})]})]})]})},TU=(t,e)=>e===0?t>0?100:0:(t-e)/e*100,wU=(t,e)=>{const r=e.getTime()-t.getTime(),n=new Date(t.getTime()-1);return{start:new Date(n.getTime()-r),end:n}},NU=(t,e)=>{const r=new Map;return t.forEach(n=>{let a;const o=n.checkInDate;switch(e){case"day":a=o.toISOString().split("T")[0];break;case"month":a=`${o.getFullYear()}-${String(o.getMonth()+1).padStart(2,"0")}`;break;case"quarter":{const c=Math.floor(o.getMonth()/3)+1;a=`${o.getFullYear()}-Q${c}`;break}case"year":a=o.getFullYear().toString();break;default:a=o.toISOString().split("T")[0]}r.has(a)||r.set(a,[]),r.get(a).push(n)}),r},bv={async getTopIndicators(t){try{const e=await Kr.getAll();let r=this.filterSalesByPeriod(e,t);t.company!=="all"&&(r=r.filter(H=>H.company===t.company)),t.houseId&&(r=r.filter(H=>H.houseId===t.houseId));const n=t.startDate?new Date(t.startDate):new Date,a=t.endDate?new Date(t.endDate):new Date,o=wU(n,a),c=this.filterSalesByPeriod(e,{...t,startDate:o.start.toISOString(),endDate:o.end.toISOString()}),h=r.filter(H=>H.status==="confirmed"||H.status==="pending").length,m=c.filter(H=>H.status==="confirmed"||H.status==="pending").length,d=r.filter(H=>H.checkInDate>new Date&&H.status!=="cancelled").map(H=>({id:H.id,clientName:H.clientName,houseName:H.houseName,checkInDate:H.checkInDate,checkOutDate:H.checkOutDate,numberOfNights:H.numberOfNights,contractValue:H.contractValue})).sort((H,re)=>H.checkInDate.getTime()-re.checkInDate.getTime()),p=new Date().getMonth(),x=new Date().getFullYear(),y=r.filter(H=>H.checkInDate.getMonth()===p&&H.checkInDate.getFullYear()===x),E=r.filter(H=>H.checkInDate.getFullYear()===x),w=y.reduce((H,re)=>H+re.netValue,0),T=E.reduce((H,re)=>H+re.netValue,0),b=y.filter(H=>H.status==="completed").length,A=E.filter(H=>H.status==="completed").length,M=r.reduce((H,re)=>H+re.totalRevenue,0),V=r.length>0?M/r.length:0;return{activeContracts:{count:h,variation:TU(h,m)},futureReservations:{count:d.length,reservations:d.slice(0,10)},totalDailyRates:{month:{value:w,variation:0},year:{value:T,variation:0}},totalContracts:{month:{count:b,variation:0},year:{count:A,variation:0}},averageTicket:{byHouse:V,bySupplier:0,byConcierge:0,total:V}}}catch(e){throw console.error("Erro ao buscar indicadores de topo:",e),new Error("Falha ao carregar indicadores de topo")}},async getFinancialData(t){try{const e=await Kr.getAll();let r=this.filterSalesByPeriod(e,t);t.company!=="all"&&(r=r.filter(x=>x.company===t.company)),t.houseId&&(r=r.filter(x=>x.houseId===t.houseId));const n=r.reduce((x,y)=>x+y.totalRevenue,0),a=r.reduce((x,y)=>x+y.salesCommission+y.totalAdditionalSales,0),o=r.reduce((x,y)=>x+y.totalAdditionalSales,0),c=r.reduce((x,y)=>x+y.conciergeValue,0),h=r.reduce((x,y)=>x+y.housekeeperValue,0),m=await this.calculateContributionMarginByHouse(r),d=this.generateChartData(r,"totalRevenue"),p=this.generateChartData(r,"salesCommission");return{totalSales:{current:n,previous:0,variation:0,chartData:d},totalCommissions:{current:a,previous:0,variation:0,chartData:p},supplierCommissions:{current:o,previous:0,variation:0},concierge:{current:c,previous:0,variation:0},housekeeperPayments:{current:h,previous:0,variation:0},contributionMargin:{byHouse:m,total:{current:m.reduce((x,y)=>x+y.margin,0),previous:0,variation:0}}}}catch(e){throw console.error("Erro ao buscar dados financeiros:",e),new Error("Falha ao carregar dados financeiros")}},async getCommercialIntelligence(t){try{const e=await Kr.getAll();let r=this.filterSalesByPeriod(e,t);t.company!=="all"&&(r=r.filter(c=>c.company===t.company)),t.houseId&&(r=r.filter(c=>c.houseId===t.houseId));const n=this.analyzeSalesByMedia(r),a=this.analyzeSalesByGender(r),o=await this.calculateOccupancyRate();return{salesByMedia:n,salesByGender:a,occupancyRate:o}}catch(e){throw console.error("Erro ao buscar inteligncia comercial:",e),new Error("Falha ao carregar inteligncia comercial")}},filterSalesByPeriod(t,e){return!e.startDate&&!e.endDate?t:t.filter(r=>{const n=r.checkInDate,a=e.startDate?new Date(e.startDate):null,o=e.endDate?new Date(e.endDate):null;return!(a&&n<a||o&&n>o)})},async calculateContributionMarginByHouse(t){const e=new Map;t.forEach(n=>{e.has(n.houseId)||e.set(n.houseId,[]),e.get(n.houseId).push(n)});const r=[];for(const[n,a]of e){const o=a.reduce((d,p)=>d+p.totalRevenue,0),c=a.reduce((d,p)=>d+p.salesCommission+p.housekeeperValue+p.totalAdditionalSales,0),h=o-c,m=o>0?h/o*100:0;r.push({houseId:n,houseName:a[0].houseName,totalRevenue:o,totalCosts:c,margin:h,marginPercentage:m})}return r.sort((n,a)=>a.margin-n.margin)},generateChartData(t,e){const r=NU(t,"month"),n=[];return r.forEach((a,o)=>{const c=a.reduce((h,m)=>{const d=m[e];return h+(d||0)},0);n.push({period:o,value:c,label:this.formatPeriodLabel(o,"month")})}),n.sort((a,o)=>a.period.localeCompare(o.period))},analyzeSalesByMedia(t){const e=new Map,r=t.length;t.forEach(o=>{const c=o.saleOrigin;e.has(c)||e.set(c,{count:0,revenue:0});const h=e.get(c);h.count++,h.revenue+=o.totalRevenue});const n=[],a={instagram:"Instagram",facebook:"Facebook",google:"Google",indicacao:"Indicao",whatsapp:"WhatsApp",site:"Site",outros:"Outros"};return e.forEach((o,c)=>{n.push({source:c,sourceLabel:a[c]||c,count:o.count,percentage:r>0?o.count/r*100:0,revenue:o.revenue})}),n.sort((o,c)=>c.count-o.count)},analyzeSalesByGender(t){const e=new Map,r=t.length;t.forEach(o=>{const c=o.clientGender||"not_informed";e.has(c)||e.set(c,{count:0,revenue:0});const h=e.get(c);h.count++,h.revenue+=o.totalRevenue});const n=[],a={male:"Masculino",female:"Feminino",other:"Outro",not_informed:"No informado"};return e.forEach((o,c)=>{n.push({gender:c,genderLabel:a[c]||c,count:o.count,percentage:r>0?o.count/r*100:0,revenue:o.revenue})}),n.sort((o,c)=>c.count-o.count)},async calculateOccupancyRate(){return["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"].map((e,r)=>({month:e,monthNumber:r+1,year:new Date().getFullYear(),totalDays:30,occupiedDays:Math.floor(Math.random()*30),rate:Math.floor(Math.random()*100),revenue:Math.floor(Math.random()*5e4)}))},formatPeriodLabel(t,e){if(e==="month"){const[r,n]=t.split("-");return`${["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"][parseInt(n)-1]}/${r}`}return t},async getQuickStats(t){const e=await Kr.getAll(),r=this.filterSalesByPeriod(e,t),n=r.reduce((p,x)=>p+x.totalRevenue,0),a=r.length,o=a>0?n/a:0,c=new Map;r.forEach(p=>{const x=c.get(p.houseId)||0;c.set(p.houseId,x+p.totalRevenue)});const h=Array.from(c.entries()).sort((p,x)=>x[1]-p[1])[0],m=new Map;r.forEach(p=>{const x=m.get(p.saleOrigin)||0;m.set(p.saleOrigin,x+1)});const d=Array.from(m.entries()).sort((p,x)=>x[1]-p[1])[0];return{totalRevenue:n,totalContracts:a,averageTicket:o,occupancyRate:0,topPerformingHouse:h?h[0]:"",topMediaSource:d?d[0]:""}}},bU=()=>{const{user:t}=Nu(),[e,r]=B.useState(!0),[n,a]=B.useState({period:"month",company:"all",houseId:void 0,viewMode:"consolidated",comparisonMode:"previous-month",startDate:void 0,endDate:void 0}),[o,c]=B.useState(null),[h,m]=B.useState(null),[d,p]=B.useState(null),x=async()=>{try{r(!0);const[b,A,M]=await Promise.all([bv.getTopIndicators(n),bv.getFinancialData(n),bv.getCommercialIntelligence(n)]);c(b),m(A),p(M)}catch(b){console.error("Erro ao carregar dados do dashboard:",b)}finally{r(!1)}};B.useEffect(()=>{x()},[n]);const y=b=>{a(b)},E=b=>{a(b)},w=async b=>{try{console.log(`Exportando dados em formato ${b}`,{filters:n,topIndicators:o,financialData:h,commercialData:d})}catch(A){console.error("Erro ao exportar dados:",A)}},T=()=>{x()};return i.jsxs("div",{className:"dashboard-management",children:[i.jsx("div",{className:"consolidation-dashboard-header",children:i.jsxs("div",{className:"consolidation-dashboard-header-content",children:[i.jsxs("div",{className:"consolidation-dashboard-header-left",children:[i.jsx("div",{className:"consolidation-dashboard-header-icon",children:i.jsx(Os,{})}),i.jsxs("div",{className:"consolidation-dashboard-header-text",children:[i.jsx("h1",{className:"consolidation-dashboard-header-title",children:"Dashboard Consolidado"}),i.jsx("p",{className:"consolidation-dashboard-header-subtitle",children:"Viso geral completa do negcio com anlises em tempo real"})]})]}),i.jsxs("div",{className:"consolidation-dashboard-header-actions",children:[i.jsxs("div",{className:"consolidation-dashboard-header-badge",children:[i.jsx(dn,{className:"consolidation-dashboard-header-badge-icon"}),i.jsxs("span",{children:["Viso ",n.viewMode==="consolidated"?"Consolidada":"Individual"]})]}),i.jsxs("button",{className:"action-btn refresh-btn",onClick:T,disabled:e,children:[i.jsx(Do,{size:16,className:e?"spinning":""}),"Atualizar"]}),i.jsxs("div",{className:"export-dropdown",children:[i.jsxs("button",{className:"action-btn export-btn",children:[i.jsx(l1,{size:16}),"Exportar"]}),i.jsxs("div",{className:"dropdown-menu",children:[i.jsx("button",{onClick:()=>w("excel"),children:"Exportar para Excel"}),i.jsx("button",{onClick:()=>w("pdf"),children:"Exportar para PDF"})]})]}),i.jsxs("button",{className:"action-btn settings-btn",children:[i.jsx(Tl,{size:16}),"Configuraes"]})]})]})}),i.jsx("div",{className:"dashboard-filters",children:i.jsx(xU,{filters:n,onFiltersChange:y,onClearFilters:()=>E({period:"month",company:"all",houseId:void 0,viewMode:"consolidated",comparisonMode:"previous-month",startDate:void 0,endDate:void 0}),loading:e})}),i.jsx("div",{className:"dashboard-content",children:e?i.jsxs("div",{className:"dashboard-loading",children:[i.jsx("div",{className:"loading-spinner"}),i.jsx("p",{children:"Carregando dados do dashboard..."})]}):i.jsxs(i.Fragment,{children:[o&&i.jsx("div",{className:"dashboard-section",children:i.jsx(yU,{data:o,loading:!1})}),h&&i.jsx("div",{className:"dashboard-section",children:i.jsx(_U,{data:h,loading:!1})}),d&&i.jsx("div",{className:"dashboard-section",children:i.jsx(EU,{data:d,loading:!1})})]})}),i.jsx("div",{className:"dashboard-footer",children:i.jsxs("div",{className:"footer-content",children:[i.jsxs("div",{className:"footer-info",children:[i.jsxs("span",{className:"last-update",children:["ltima atualizao: ",new Date().toLocaleString("pt-BR")]}),i.jsxs("span",{className:"user-info",children:["Logado como: ",t?.email||"Usurio"]})]}),i.jsxs("div",{className:"footer-stats",children:[i.jsxs("span",{className:"stat-item",children:[i.jsx("strong",{children:"Perodo:"})," ",n.period==="month"?"Mensal":n.period==="year"?"Anual":"Trimestral"]}),i.jsxs("span",{className:"stat-item",children:[i.jsx("strong",{children:"Empresa:"})," ",n.company==="all"?"Todas":n.company]}),i.jsxs("span",{className:"stat-item",children:[i.jsx("strong",{children:"Visualizao:"})," ",n.viewMode==="consolidated"?"Consolidada":"Individual"]})]})]})})]})},SU=({filters:t,onFiltersChange:e,onClearFilters:r,loading:n=!1})=>{const[a,o]=B.useState([]),[c,h]=B.useState(!0),m=[{value:"pending",label:"Pendente",icon:i.jsx(zd,{size:16})},{value:"in_progress",label:"Em Andamento",icon:i.jsx($S,{size:16})},{value:"completed",label:"Completo",icon:i.jsx(Vn,{size:16})},{value:"cancelled",label:"Cancelado",icon:i.jsx(u1,{size:16})}],d=[{value:"low",label:"Baixa",color:"#10b981",icon:i.jsx(Tl,{size:14})},{value:"medium",label:"Mdia",color:"#f59e0b",icon:i.jsx(Tl,{size:14})},{value:"high",label:"Alta",color:"#ef4444",icon:i.jsx(Tl,{size:14})},{value:"urgent",label:"Urgente",color:"#dc2626",icon:i.jsx(Tl,{size:14})}],p=[{value:"menu_sent",label:"Cardpio Enviado"},{value:"menu_received",label:"Cardpio Recebido"},{value:"shopping_list",label:"Lista de Compras"},{value:"client_approval",label:"Aprovao do Cliente"},{value:"supplier_sent",label:"Enviado para Fornecedores"},{value:"payment_sent",label:"Notas para Pagamento"},{value:"invoices_received",label:"Notas Recebidas"},{value:"receipts_sent",label:"Comprovante Enviado"}];B.useEffect(()=>{(async()=>{try{h(!0);const V=(await as.getAll()).filter(H=>H.status==="available"||H.status==="occupied");o(V)}catch(M){console.error("Erro ao carregar casas:",M)}finally{h(!1)}})()},[]);const x=(A,M)=>{e({...t,[A]:M})},y=(A,M)=>{e({...t,dateRange:{...t.dateRange,[A]:M}})},E=()=>{r()},w=A=>A.toISOString().split("T")[0],T=A=>new Date(A+"T00:00:00"),b=()=>t.houseId||t.status||t.priority||t.step||t.showOnlyActive||t.showOnlyOverdue;return i.jsxs("div",{className:"process-filter",children:[i.jsxs("div",{className:"filter-header",children:[i.jsxs("div",{className:"filter-title",children:[i.jsx(Hd,{size:20}),i.jsx("h3",{children:"Filtros"})]}),b()&&i.jsxs("button",{className:"clear-filters-btn",onClick:E,disabled:n,title:"Limpar todos os filtros",children:[i.jsx(co,{size:16}),"Limpar"]})]}),i.jsxs("div",{className:"filter-content",children:[i.jsxs("div",{className:"filter-group",children:[i.jsxs("label",{className:"filter-label",children:[i.jsx(dn,{size:16}),"Perodo"]}),i.jsxs("div",{className:"date-inputs",children:[i.jsxs("div",{className:"date-input",children:[i.jsx("label",{children:"Data Inicio"}),i.jsx("input",{type:"date",value:w(t.dateRange.start),onChange:A=>y("start",T(A.target.value)),disabled:n})]}),i.jsxs("div",{className:"date-input",children:[i.jsx("label",{children:"Data Fim"}),i.jsx("input",{type:"date",value:w(t.dateRange.end),onChange:A=>y("end",T(A.target.value)),disabled:n})]})]})]}),i.jsxs("div",{className:"filter-group",children:[i.jsxs("label",{className:"filter-label",children:[i.jsx(Nn,{size:16}),"Casa"]}),i.jsxs("select",{value:t.houseId||"",onChange:A=>e({...t,houseId:A.target.value}),disabled:n,className:"filter-select",children:[i.jsx("option",{value:"",children:"Todas as Casas"}),a.map(A=>i.jsx("option",{value:A.id,children:A.houseName},A.id))]}),c&&i.jsxs("div",{className:"loading-indicator",children:[i.jsx(Do,{className:"spinning",size:16}),"Carregando casas..."]})]}),i.jsxs("div",{className:"filter-group",children:[i.jsx("label",{className:"filter-label",children:"Status"}),i.jsx("div",{className:"filter-options",children:m.map(A=>i.jsxs("button",{className:`filter-option ${t.status===A.value?"active":""}`,disabled:n,onClick:()=>x("status",t.status===A.value?void 0:A.value),title:A.label,children:[i.jsx("span",{className:"option-icon",children:A.icon}),i.jsx("span",{className:"option-label",children:A.label})]},A.value))})]}),i.jsxs("div",{className:"filter-group",children:[i.jsx("label",{className:"filter-label",children:"Prioridade"}),i.jsx("div",{className:"filter-options",children:d.map(A=>i.jsxs("button",{className:`filter-option priority-${t.priority===A.value?"active":""}`,disabled:n,onClick:()=>x("priority",t.priority===A.value?void 0:A.value),title:A.label,children:[i.jsx("span",{className:"option-icon",style:{color:A.color},children:A.icon}),i.jsx("span",{className:"option-label",children:A.label})]},A.value))})]}),i.jsxs("div",{className:"filter-group",children:[i.jsx("label",{className:"filter-label",children:"Etapa"}),i.jsxs("select",{value:t.step||"",disabled:n,className:"filter-select",onChange:A=>x("step",A.target.value||void 0),children:[i.jsx("option",{value:"",children:"Todas as Etapas"}),p.map(A=>i.jsx("option",{value:A.value,children:A.label},A.value))]})]}),i.jsxs("div",{className:"filter-group",children:[i.jsx("label",{className:"filter-label",children:"Opes"}),i.jsxs("div",{className:"filter-checkboxes",children:[i.jsxs("label",{className:"checkbox-option",children:[i.jsx("input",{type:"checkbox",checked:t.showOnlyActive,onChange:A=>x("showOnlyActive",A.target.checked),disabled:n}),i.jsx("span",{className:"checkbox-label",children:"Mostrar apenas processos ativos"})]}),i.jsxs("label",{className:"checkbox-option",children:[i.jsx("input",{type:"checkbox",checked:t.showOnlyOverdue,onChange:A=>x("showOnlyOverdue",A.target.checked),disabled:n}),i.jsx("span",{className:"checkbox-label",children:"Apenas processos atrasados"})]})]})]})]}),b()&&i.jsxs("div",{className:"active-filters",children:[i.jsx("h4",{children:"Filtros Ativos:"}),i.jsxs("div",{className:"active-filters-tags",children:[t.houseId&&i.jsxs("span",{className:"filter-tag",children:["Casa:"," ",a.find(A=>A.id===t.houseId)?.houseName||"N/A",i.jsx("button",{onClick:()=>x("houseId",void 0),children:i.jsx(co,{size:12})})]}),t.priority&&i.jsxs("span",{className:"filter-tag",children:["Prioridade:"," ",d.find(A=>A.value===t.priority)?.label,i.jsx("button",{onClick:()=>x("priority",void 0),children:i.jsx(co,{size:12})})]}),t.step&&i.jsxs("span",{className:"filter-tag",children:["Etapa:"," ",p.find(A=>A.value===t.step)?.label,i.jsx("button",{onClick:()=>x("step",void 0),children:i.jsx(co,{size:12})})]}),t.showOnlyActive&&i.jsxs("span",{className:"filter-tag",children:["Apenas ativos",i.jsx("button",{onClick:()=>x("showOnlyActive",!1),children:i.jsx(co,{size:12})})]}),t.showOnlyOverdue&&i.jsxs("span",{className:"filter-tag",children:["Apenas atrasados",i.jsx("button",{onClick:()=>x("showOnlyOverdue",!1),children:i.jsx(co,{size:12})})]})]})]})]})},AU=({metrics:t,loading:e=!1})=>{const r=(m,d)=>d===0?m>0?100:0:(m-d)/d*100,n=m=>{if(m<24)return`${Math.round(m)}h`;const d=Math.floor(m/24),p=Math.round(m%24);return p>0?`${d}d ${p}h`:`${d}d`},a=m=>`${Math.round(m)}%`,o=m=>m>0?i.jsx(pr,{size:16,className:"trend-up"}):m<0?i.jsx(Xn,{size:16,className:"trend-down"}):null,c=(m,d=!0)=>m>0?d?"#10b981":"#ef4444":m<0?d?"#ef4444":"#10b981":"#6b7280";if(e||!t)return i.jsx("div",{className:"top-indicators",children:i.jsx("div",{className:"indicators-grid",children:Array.from({length:6}).map((m,d)=>i.jsxs("div",{className:"indicator-card loading",children:[i.jsxs("div",{className:"card-header",children:[i.jsx("div",{className:"skeleton-icon"}),i.jsx("div",{className:"skeleton-title"})]}),i.jsxs("div",{className:"card-content",children:[i.jsx("div",{className:"skeleton-value"}),i.jsx("div",{className:"skeleton-subtitle"}),i.jsx("div",{className:"skeleton-variation"})]})]},d))})});const h=[{id:"total-reservations",title:"Total de Reservas",value:t.totalReservations,previousValue:t.lastMonth.newReservations,icon:i.jsx(dn,{size:24}),color:"blue",isGoodIncrease:!0,subtitle:"Este ms"},{id:"active-processes",title:"Processos Ativos",value:t.activeConciergeProcesses,previousValue:null,icon:i.jsx($S,{size:24}),color:"orange",isGoodIncrease:!1,subtitle:"Em andamento"},{id:"completed-processes",title:"Processos Concludos",value:t.completedProcesses,previousValue:t.lastMonth.completedProcesses,icon:i.jsx(Vn,{size:24}),color:"green",isGoodIncrease:!0,subtitle:"Este ms"},{id:"overdue-processes",title:"Processos Atrasados",value:t.overdueProcesses,previousValue:null,icon:i.jsx(yd,{size:24}),color:"red",isGoodIncrease:!1,subtitle:"Precisam ateno"},{id:"average-time",title:"Tempo Mdio",value:n(t.averageProcessTime),previousValue:t.lastMonth.averageTime,icon:i.jsx(zd,{size:24}),color:"purple",isGoodIncrease:!1,subtitle:"Por processo"},{id:"completion-rate",title:"Taxa de Concluso",value:a(t.completionRate),previousValue:null,icon:i.jsx(Os,{size:24}),color:"teal",isGoodIncrease:!0,subtitle:"Geral"}];return i.jsxs("div",{className:"top-indicators",children:[i.jsxs("div",{className:"indicators-header",children:[i.jsxs("h2",{children:[i.jsx(Os,{size:24}),"Indicadores Principais"]}),i.jsx("p",{children:" Viso geral dos processos e performance"})]}),i.jsx("div",{className:"indicators-grid",children:h.map(m=>{const d=m.previousValue!==null?r(m.value,m.previousValue):null;return i.jsxs("div",{className:`indicator-card ${m.color}`,children:[i.jsxs("div",{className:"card-header",children:[i.jsx("div",{className:"card-icon",children:m.icon}),i.jsxs("div",{className:"card-title",children:[i.jsx("h3",{children:m.title}),i.jsx("span",{className:"card-subtitle",children:m.subtitle})]})]}),i.jsxs("div",{className:"card-content",children:[i.jsx("div",{className:"card-value",children:typeof m.value=="number"?m.value.toLocaleString():m.value}),d!==null&&i.jsxs("div",{className:"card-variation",children:[i.jsxs("span",{className:"variation-value",style:{color:c(d,m.isGoodIncrease)},children:[d>0?"+":"",Math.round(d),"%"]}),i.jsx("span",{className:"variation-icon",children:o(d)}),i.jsx("span",{className:"variation-label",children:"vs mes anterior"})]})]}),m.id==="overdue-process"&&t.overdueProcesses>0&&i.jsx("div",{className:"critical-badge",children:"Ateno necessria"}),m.id==="completion-rate"&&t.completionRate>=90&&i.jsx("div",{className:"excellent-badge",children:"Excelente performance"})]},m.id)})}),i.jsx("div",{className:"executive-summary",children:i.jsxs("div",{className:"summary-card",children:[i.jsx("h3",{children:"Resumo Executivo"}),i.jsxs("div",{className:"summary-content",children:[i.jsxs("div",{className:"summary-item",children:[i.jsx("span",{className:"summary-label",children:"Status geral:"}),i.jsx("span",{className:`summary-value ${t.overdueProcesses===0&&t.completionRate>=80?"status-good":t.overdueProcesses>5||t.completionRate<60?"status-critical":"status-warning"}`,children:t.overdueProcesses===0&&t.completionRate>=80?"Excelente":t.overdueProcesses>5||t.completionRate<60?"Crtico":"Ateno"})]}),i.jsxs("div",{className:"summary-item",children:[i.jsx("span",{className:"summary-label",children:"Processos em andamento:"}),i.jsx("span",{className:"summary-value",children:t.activeConciergeProcesses})]}),i.jsxs("div",{className:"summary-item",children:[i.jsx("span",{className:"summary-label",children:"Eficicncia:"}),i.jsx("span",{className:"summary-value",children:a(t.completionRate)})]})]})]})})]})},CC=["menu_sent","menu_received","shopping_list","client_approval","supplier_sent","payment_sent","invoices_received","receipts_sent"],jC={menu_sent:"Cardpio Enviado",menu_received:"Cardpio Recebido",shopping_list:"Lista de Compras",client_approval:"Aprovao do Cliente",supplier_sent:"Enviado para Fornecedores",payment_sent:"Notas para Pagamento",invoices_received:"Notas Recebidas",receipts_sent:"Comprovante Enviado"},Wr=t=>t instanceof Date?t:t.toDate(),Ps=t=>nt.fromDate(t),CU=async t=>{try{const e=gr(ct,"sales"),r=Tt(e,bt("checkIn",">=",Ps(t.dateRange.start)),bt("checkIn","<=",Ps(t.dateRange.end)),Ni("checkIn","asc")),n=await Ln(r),a=[];return n.forEach(o=>{const c=o.data();if(t.houseId&&c.houseId!==t.houseId||t.status&&c.status!==t.status)return;const h={id:o.id,clientName:c.clientName||"",clientEmail:c.clientEmail||"",clientPhone:c.clientPhone||"",houseId:c.houseId||"",houseName:c.houseName||"",checkIn:Wr(c.checkIn),checkOut:Wr(c.checkOut),totalDays:c.totalDays||0,totalValue:c.totalValue||0,conciergeRequired:c.conciergeRequired||!1,conciergeProcessId:c.conciergeProcessId||void 0,status:c.status||"pending",createdAt:Wr(c.createdAt),updatedAt:Wr(c.updatedAt)};a.push(h)}),a}catch(e){throw console.error("Erro ao buscar reservas futuras:",e),new Error("Falha ao carregar reservas futuras")}},jU=async t=>{try{const e=gr(ct,"conciergeProcesses");let r=Tt(e,bt("createdAt",">=",Ps(t.dateRange.start)),bt("createdAt","<=",Ps(t.dateRange.end)),Ni("createdAt","desc"));t.houseId&&(r=Tt(r,bt("houseId","==",t.houseId))),t.status&&(r=Tt(r,bt("status","==",t.status))),t.priority&&(r=Tt(r,bt("priority","==",t.priority))),t.step&&(r=Tt(r,bt("currentStep","==",t.step)));const n=await Ln(r),a=[];return n.forEach(o=>{const c=o.data(),h={id:o.id,reservationId:c.reservationId||"",clientName:c.clientName||"",houseName:c.houseName||"",checkIn:Wr(c.checkIn),checkOut:Wr(c.checkOut),currentStep:c.currentStep||"menu_sent",status:c.status||"pending",priority:c.priority||"medium",createdAt:Wr(c.createdAt),updatedAt:Wr(c.updatedAt),steps:{menuSent:{completed:c.steps?.menuSent?.completed||!1,completedAt:c.steps?.menuSent?.completedAt?Wr(c.steps.menuSent.completedAt):void 0,notes:c.steps?.menuSent?.notes||void 0},menuReceived:{completed:c.steps?.menuReceived?.completed||!1,completedAt:c.steps?.menuReceived?.completedAt?Wr(c.steps.menuReceived.completedAt):void 0,notes:c.steps?.menuReceived?.notes||void 0},shoppingList:{completed:c.steps?.shoppingList?.completed||!1,completedAt:c.steps?.shoppingList?.completedAt?Wr(c.steps.shoppingList.completedAt):void 0,notes:c.steps?.shoppingList?.notes||void 0,listItems:c.steps?.shoppingList?.listItems||void 0},clientApproval:{completed:c.steps?.clientApproval?.completed||!1,completedAt:c.steps?.clientApproval?.completedAt?Wr(c.steps.clientApproval.completedAt):void 0,notes:c.steps?.clientApproval?.notes||void 0,approved:c.steps?.clientApproval?.approved||void 0},supplierSent:{completed:c.steps?.supplierSent?.completed||!1,completedAt:c.steps?.supplierSent?.completedAt?Wr(c.steps.supplierSent.completedAt):void 0,notes:c.steps?.supplierSent?.notes||void 0,suppliers:c.steps?.supplierSent?.suppliers||void 0},paymentSent:{completed:c.steps?.paymentSent?.completed||!1,completedAt:c.steps?.paymentSent?.completedAt?Wr(c.steps.paymentSent.completedAt):void 0,notes:c.steps?.paymentSent?.notes||void 0,amount:c.steps?.paymentSent?.amount||void 0},invoicesReceived:{completed:c.steps?.invoicesReceived?.completed||!1,completedAt:c.steps?.invoicesReceived?.completedAt?Wr(c.steps.invoicesReceived.completedAt):void 0,notes:c.steps?.invoicesReceived?.notes||void 0,invoiceCount:c.steps?.invoicesReceived?.invoiceCount||void 0},receiptsSent:{completed:c.steps?.receiptsSent?.completed||!1,completedAt:c.steps?.receiptsSent?.completedAt?Wr(c.steps.receiptsSent.completedAt):void 0,notes:c.steps?.receiptsSent?.notes||void 0}},metrics:{totalDuration:c.metrics?.totalDuration||0,averageStepTime:c.metrics?.averageStepTime||0,overdueSteps:c.metrics?.overdueSteps||0,completedSteps:c.metrics?.completedSteps||0,totalSteps:CC.length}};a.push(h)}),a}catch(e){throw console.error("Erro ao buscar processos de concierge:",e),new Error("Falha ao carregar processos de concierge")}},RU=async t=>{try{const e=gr(ct,"notifications"),r=Tt(e,bt("createdAt",">=",Ps(t.dateRange.start)),bt("createdAt","<=",Ps(t.dateRange.end)),Ni("createdAt","desc")),n=await Ln(r),a=[];return n.forEach(o=>{const c=o.data(),h={id:o.id,type:c.type||"process_update",title:c.title||"",message:c.message||"",priority:c.priority||"medium",relatedId:c.relatedId||"",relatedType:c.relatedType||"concierge_process",isRead:c.isRead||!1,isActive:c.isActive||!0,createdAt:Wr(c.createdAt),scheduledFor:c.scheduledFor?Wr(c.scheduledFor):void 0,actionRequired:c.actionRequired||!1,actionUrl:c.actionUrl||void 0,metadata:c.metadata||void 0};a.push(h)}),a}catch(e){throw console.error("Erro ao buscar notificaes:",e),new Error("Falha ao carregar notificaes")}},DU=(t,e)=>{const r=new Date,n=new Date(r.getFullYear(),r.getMonth(),1),a=new Date(r.getFullYear(),r.getMonth()-1,1),o=t.length,c=e.filter(q=>q.status==="in_progress").length,h=e.filter(q=>q.status==="completed").length,m=e.filter(q=>q.metrics.overdueSteps>0).length,d=e.filter(q=>q.status==="completed"&&q.metrics.totalDuration>0),p=d.length>0?d.reduce((q,j)=>q+j.metrics.totalDuration,0)/d.length:0,x=e.length>0?h/e.length*100:0,y=t.filter(q=>q.createdAt>=n),w=e.filter(q=>q.createdAt>=n).filter(q=>q.status==="completed"),T=w.length>0?w.reduce((q,j)=>q+j.metrics.totalDuration,0)/w.length:0,b=t.filter(q=>q.createdAt>=a&&q.createdAt<n),M=e.filter(q=>q.createdAt>=a&&q.createdAt<n).filter(q=>q.status==="completed"),V=M.length>0?M.reduce((q,j)=>q+j.metrics.totalDuration,0)/M.length:0,H=new Map;e.forEach(q=>{H.has(q.houseName)||H.set(q.houseName,{houseName:q.houseName,processes:[]}),H.get(q.houseName).processes.push(q)});const re=Array.from(H.values()).map(q=>{const j=q.processes.length,D=q.processes.filter(O=>O.status==="completed").length,S=D>0?q.processes.filter(O=>O.status==="completed").reduce((O,C)=>O+C.metrics.totalDuration,0)/D:0,P=j>0?D/j*100:0;return{houseId:q.processes[0]?.houseName||"",houseName:q.houseName,totalProcesses:j,completedProcesses:D,averageTime:S,completionRate:P}});return{totalReservations:o,activeConciergeProcesses:c,completedProcesses:h,overdueProcesses:m,averageProcessTime:p,completionRate:x,thisMonth:{newReservations:y.length,completedProcesses:w.length,averageTime:T},lastMonth:{newReservations:b.length,completedProcesses:M.length,averageTime:V},byHouse:re}},IU=(t,e)=>{const r=[],n=new Date;n.setDate(n.getDate()-30);for(let h=0;h<30;h++){const m=new Date(n);m.setDate(m.getDate()+h);const d=m.toISOString().split("T")[0],p=e.filter(x=>new Date(x.createdAt).toISOString().split("T")[0]===d);r.push({date:d,completed:p.filter(x=>x.status==="completed").length,pending:p.filter(x=>x.status==="pending").length,overdue:p.filter(x=>x.metrics.overdueSteps>0).length})}const a=CC.map(h=>{const m=e.filter(y=>y.currentStep===h),d=e.filter(y=>{const E=y.steps[h];return E&&E.completed}),p=d.length>0?d.reduce((y,E)=>y+E.metrics.averageStepTime,0)/d.length:0,x=m.length>0?d.length/m.length*100:0;return{step:h,stepLabel:jC[h],averageTime:p,completionRate:x,totalProcesses:m.length}}),o=new Map;e.forEach(h=>{o.has(h.houseName)||o.set(h.houseName,[]),o.get(h.houseName).push(h)});const c=Array.from(o.entries()).map(([h,m])=>{const d=m.length,p=m.filter(E=>E.status==="completed").length,x=p>0?m.filter(E=>E.status==="completed").reduce((E,w)=>E+w.metrics.totalDuration,0)/p:0,y=d>0?p/d*100:0;return{houseId:h,houseName:h,totalProcesses:d,completedProcesses:p,completionRate:y,averageTime:x}});return{processCompletion:r,stepPerformance:a,housePerformance:c}},kU=async(t,e,r,n,a,o="medium",c,h)=>{try{const m=gr(ct,"notifications"),d={type:t,title:e,message:r,priority:o,relatedId:n,relatedType:a,isRead:!1,isActive:!0,createdAt:Ps(new Date),scheduledFor:c?Ps(c):null,actionRequired:o==="high"||o==="urgent",actionUrl:void 0,metadata:h||null};await Hl(m,d)}catch(m){throw console.error("Erro ao criar notificao:",m),new Error("Falha ao criar notificao")}},OU=async(t,e,r)=>{try{const n=sr(ct,"conciergeProcesses",t),a={currentStep:e,updatedAt:Ps(new Date),[`steps.${e}.completed`]:!0,[`steps.${e}.completedAt`]:Ps(new Date),...r&&{[`steps.${e}.notes`]:r}};await zl(n,a),await kU("process_update","Processo Atualizado",`Etapa "${jC[e]}" foi concluda`,t,"concierge_process","medium")}catch(n){throw console.error("Erro ao avanar etapa do processo:",n),new Error("Falha ao atualizar processo")}},MU=({processes:t,loading:e=!1,onRefresh:r})=>{const[n,a]=B.useState(null),[o,c]=B.useState(null),[h,m]=B.useState(""),[d,p]=B.useState(!1),x={menu_sent:"Cardpio Enviado",menu_received:"Cardpio Recebido",shopping_list:"Lista de Compras",client_approval:"Aprovao do Cliente",supplier_sent:"Fornecedor Enviado",payment_sent:"Pagamento Enviado",invoices_received:"Faturas Recebidas",receipts_sent:"Recibos Enviados"},y=["menu_sent","menu_received","shopping_list","client_approval","supplier_sent","payment_sent","invoices_received","receipts_sent"],E={menu_sent:"menuSent",menu_received:"menuReceived",shopping_list:"shoppingList",client_approval:"clientApproval",supplier_sent:"supplierSent",payment_sent:"paymentSent",invoices_received:"invoicesReceived",receipts_sent:"receiptsSent"},w=S=>({low:"#10b981",medium:"#f59e0b",high:"#ef4444",urgent:"#dc2626"})[S],T=S=>({low:"Baixa",medium:"Mdia",high:"Alta",urgent:"Urgente"})[S],b=S=>new Date(S).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}),A=S=>{const P=new Date,C=new Date(S).getTime()-P.getTime();return Math.ceil(C/(1e3*60*60*24))},M=S=>{const P=y.indexOf(S);return P===-1||P===y.length-1?null:y[P+1]},V=(S,P)=>{const O=M(P);O&&(c({processId:S,step:O,stepLabel:x[O]}),m(""))},H=async()=>{if(o)try{p(!0),await OU(o.processId,o.step,h||void 0),c(null),m(""),r()}catch(S){console.error("Erro ao avanar etapa:",S)}finally{p(!1)}},re=()=>{c(null),m("")},q=S=>{a(n===S?null:S)},j=S=>{const P=y.filter(C=>S.steps[E[C]].completed).length,O=P/y.length*100;return i.jsxs("div",{className:"step-progress",children:[i.jsx("div",{className:"progress-bar",children:i.jsx("div",{className:"progress-fill",style:{width:`${O}%`}})}),i.jsxs("span",{className:"progress-text",children:[P," de ",y.length," etapas"]})]})},D=S=>i.jsx("div",{className:"process-steps",children:y.map((P,O)=>{const C=S.steps[E[P]],k=S.currentStep===P,Ce=C.completed,ze=O>0&&y[O-1]===S.currentStep;return i.jsxs("div",{className:`step-item ${Ce?"completed":""} ${k?"current":""} ${ze?"next":""}`,children:[i.jsx("div",{className:"step-icon",children:Ce?i.jsx(Vn,{size:20}):k?i.jsx(zd,{size:20}):i.jsx("div",{className:"step-number",children:O+1})}),i.jsxs("div",{className:"step-info",children:[i.jsx("h4",{children:x[P]}),C.completedAt&&i.jsx("span",{className:"step-date",children:b(C.completedAt)}),C.notes&&i.jsx("p",{className:"step-notes",children:C.notes})]}),O<y.length-1&&i.jsx(qS,{className:"step-arrow",size:16})]},P)})});return e?i.jsxs("div",{className:"process-block",children:[i.jsx("div",{className:"block-header",children:i.jsx("div",{className:"skeleton-title"})}),i.jsx("div",{className:"processes-list",children:Array.from({length:3}).map((S,P)=>i.jsx("div",{className:"process-card loading",children:i.jsx("div",{className:"skeleton-content"})},P))})]}):t.length===0?i.jsxs("div",{className:"process-block",children:[i.jsx("div",{className:"block-header",children:i.jsxs("h2",{children:[i.jsx(BT,{size:20}),"Processos de Concierge"]})}),i.jsxs("div",{className:"empty-state",children:[i.jsx(Vn,{size:60}),i.jsx("h3",{children:"Nenhum processo encontrado"}),i.jsx("p",{children:"No h processos de concierge para os filtros selecionados."})]})]}):i.jsxs("div",{className:"process-block",children:[i.jsxs("div",{className:"block-header",children:[i.jsxs("h2",{children:[i.jsx(BT,{size:24}),"Processos de Concierge"]}),i.jsxs("span",{className:"process-count",children:[t.length," ",t.length>1?"processos":"processo"]})]}),i.jsx("div",{className:"processes-list",children:t.map(S=>{const P=n===S.id,O=A(S.checkIn),C=O<=3,k=M(S.currentStep);return i.jsxs("div",{className:`process-card ${S.status} ${C?"urgent":""}`,children:[i.jsxs("div",{className:"card-header",onClick:()=>q(S.id),children:[i.jsxs("div",{className:"card-main-info",children:[i.jsxs("div",{className:"client-info",children:[i.jsx(ed,{size:18}),i.jsx("h3",{children:S.clientName})]}),i.jsxs("div",{className:"house-info",children:[i.jsx(Nn,{size:18}),i.jsx("span",{children:S.houseName})]})]}),i.jsxs("div",{className:"card-meta",children:[i.jsx("div",{className:"priority-badge",style:{backgroundColor:w(S.priority),color:"white"},children:T(S.priority)}),i.jsxs("div",{className:"checkin-info",children:[i.jsx(dn,{size:14}),i.jsx("span",{children:b(S.checkIn)}),C&&i.jsxs("span",{className:"urgent-badge",children:[i.jsx(yd,{size:14}),O," dias"]})]})]})]}),i.jsxs("div",{className:"card-progress",children:[j(S),i.jsx("div",{className:"current-step-badge",children:x[S.currentStep]})]}),i.jsxs("div",{className:"card-actions",children:[k&&S.status==="in_progress"&&i.jsxs("button",{className:"advance-btn",onClick:()=>V(S.id,S.currentStep),children:[i.jsx(tx,{size:16}),"Avanar para ",x[k]]}),i.jsxs("button",{className:"details-btn",onClick:()=>q(S.id),children:[i.jsx(Gl,{size:16}),P?"Ocultar":"Ver"," Detalhes"]})]}),P&&i.jsxs("div",{className:"card-details",children:[i.jsxs("div",{className:"details-header",children:[i.jsx("h4",{children:"Etapas do Processo"}),i.jsxs("div",{className:"process-metrics",children:[i.jsxs("div",{className:"metric",children:[i.jsx("span",{className:"metric-label",children:"Tempo Total: "}),i.jsxs("span",{className:"metric-value",children:[Math.round(S.metrics.totalDuration),"h"]})]}),i.jsxs("div",{className:"metric",children:[i.jsxs("span",{className:"metric-label",children:["Etapas Concluidas:"," "]}),i.jsxs("span",{className:"metric-value",children:[S.metrics.completedSteps,"/",S.metrics.totalSteps]})]}),S.metrics.overdueSteps>0&&i.jsxs("div",{className:"metric warning",children:[i.jsx(yd,{size:14}),i.jsxs("span",{className:"metric-value",children:[S.metrics.overdueSteps," atrasadas"]})]})]})]}),D(S)]})]},S.id)})}),o&&i.jsx("div",{className:"modal-overlay-process",onClick:re,children:i.jsxs("div",{className:"modal-content-process",onClick:S=>S.stopPropagation(),children:[i.jsxs("div",{className:"modal-header-process",children:[i.jsx("h3",{children:"Avanar Etapa"}),i.jsx("button",{className:"close-btn-process",onClick:re,children:i.jsx(co,{size:20})})]}),i.jsxs("div",{className:"modal-body-process",children:[i.jsx("p",{children:"Confirma o avano para a etapa: "}),i.jsxs("div",{className:"step-highlight",children:[i.jsx(tx,{size:20}),i.jsx("strong",{children:o.stepLabel})]}),i.jsxs("div",{className:"notes-input",children:[i.jsx("label",{children:" Observaes (Opcional):"}),i.jsx("textarea",{value:h,onChange:S=>m(S.target.value),placeholder:"Adicione observaes sobre esta etapa...",rows:4,disabled:d})]})]}),i.jsxs("div",{className:"modal-footer-process",children:[i.jsx("button",{className:"cancel-btn",onClick:re,disabled:d,children:"Cancelar"}),i.jsx("button",{className:"confirm-btn",onClick:H,disabled:d,children:d?"Avanando...":"Confirmar"})]})]})})]})},PU=()=>{const[t,e]=B.useState({dateRange:{start:new Date(new Date().setDate(1)),end:new Date(new Date().setMonth(new Date().getMonth()+1,0))},showOnlyActive:!1,showOnlyOverdue:!1}),[r,n]=B.useState(null),[a,o]=B.useState(!0),[c,h]=B.useState(null),[m,d]=B.useState(!1),p=B.useCallback(async()=>{try{h(null);const[E,w,T]=await Promise.all([CU(t),jU(t),RU(t)]),b=DU(E,w),A=IU(E,w);n({reservations:E,conciergeProcesses:w,notifications:T,metrics:b,charts:A})}catch(E){console.error("Erro ao buscar dados do dashboard:",E),h("Erro ao carregar dados do dashboard. Por favor, tente novamente.")}finally{o(!1),d(!1)}},[t]);B.useEffect(()=>{o(!0),p()},[p]);const x=E=>{e(E)},y=()=>{d(!0),p()};return i.jsxs("div",{className:"dashboard-management",children:[i.jsx("div",{className:"process-dashboard-header",children:i.jsxs("div",{className:"process-dashboard-header-content",children:[i.jsxs("div",{className:"process-dashboard-header-left",children:[i.jsx("div",{className:"process-dashboard-header-icon",children:i.jsx(o1,{})}),i.jsxs("div",{className:"process-dashboard-header-text",children:[i.jsx("h1",{className:"process-dashboard-header-title",children:"Dashboard de Processos"}),i.jsx("p",{className:"process-dashboard-header-subtitle",children:"Acompanhe reservas futuras e processos de concierge em tempo real"})]})]}),i.jsxs("div",{className:"process-dashboard-header-actions",children:[i.jsxs("div",{className:"process-dashboard-header-badge",children:[i.jsx(dn,{className:"process-dashboard-header-badge-icon"}),i.jsx("span",{children:"Perodo atual"})]}),i.jsxs("button",{className:"process-dashboard-refresh-btn",onClick:y,disabled:m,children:[i.jsx(Do,{size:18,className:m?"spinning":""}),m?"Atualizando...":"Atualizar"]})]})]})}),i.jsx(SU,{filters:t,onFiltersChange:x,onClearFilters:()=>e({dateRange:{start:new Date(new Date().setDate(1)),end:new Date(new Date().setMonth(new Date().getMonth()+1,0))},showOnlyActive:!1,showOnlyOverdue:!1})}),c&&i.jsxs("div",{className:"error-banner",children:[i.jsx(Ud,{size:20}),i.jsx("span",{children:c}),i.jsx("button",{onClick:y,children:"Tentar novamente"})]}),i.jsxs("div",{className:"dashboard-content",children:[i.jsx(AU,{metrics:r?.metrics,loading:a}),i.jsx(MU,{processes:r?.conciergeProcesses||[],loading:a,onRefresh:y}),i.jsxs("div",{className:"reservations-block",children:[i.jsxs("div",{className:"block-header",children:[i.jsx("h2",{children:"Prximas Reservas"}),i.jsxs("span",{className:"reservation-count",children:[r?.reservations.length||0," reserva(s)"]})]}),a?i.jsx("div",{className:"reservations-list",children:Array.from({length:3}).map((E,w)=>i.jsx("div",{className:"reservation-card loading",children:i.jsx("div",{className:"skeleton-content"})},w))}):r&&r.reservations.length>0?i.jsx("div",{className:"reservations-list",children:r.reservations.map(E=>{const w=new Date(E.checkIn),T=new Date(E.checkOut),b=Math.ceil((w.getTime()-new Date().getTime())/(1e3*60*60*24)),A=b<=10;return i.jsxs("div",{className:`reservation-card ${A?"urgent":""}`,children:[i.jsxs("div",{className:"reservation-info",children:[i.jsxs("div",{className:"client-details",children:[i.jsx("h3",{children:E.clientName}),i.jsx("p",{className:"house-name",children:E.houseName})]}),i.jsxs("div",{className:"date-details",children:[i.jsxs("div",{className:"date-row",children:[i.jsx("span",{className:"date-label",children:"Check-in:"}),i.jsx("span",{className:"date-value",children:w.toLocaleDateString("pt-BR")})]}),i.jsxs("div",{className:"date-row",children:[i.jsx("span",{className:"date-label",children:"Check-out:"}),i.jsx("span",{className:"date-value",children:T.toLocaleDateString("pt-BR")})]})]}),i.jsxs("div",{className:"reservation-meta",children:[i.jsxs("span",{className:"total-days",children:[E.totalDays," diria(s)"]}),A&&i.jsxs("span",{className:"urgent-badge",children:[b," dia(s) restante(s)"]}),E.conciergeRequired&&i.jsx("span",{className:"concierge-badge",children:"Concierge necessrio"})]})]}),i.jsx("div",{className:"reservation-status",children:i.jsx("span",{className:`status-badge ${E.status}`,children:E.status==="confirmed"?"Confirmado":E.status==="pending"?"Pendente":"Cancelado"})})]},E.id)})}):i.jsx("div",{className:"empty-state",children:i.jsx("p",{children:"Nenhuma reserva futura encontrada para os filtros selecionados."})})]}),r&&r.notifications.length>0&&i.jsxs("div",{className:"notifications-block",children:[i.jsxs("div",{className:"block-header",children:[i.jsx("h2",{children:"Notificaes"}),i.jsxs("span",{className:"notification-count",children:[r.notifications.filter(E=>!E.isRead).length," ","no lida(s)"]})]}),i.jsx("div",{className:"notifications-list",children:r.notifications.slice(0,5).map(E=>i.jsxs("div",{className:`notification-card ${E.isRead?"read":"unread"} ${E.priority}`,children:[i.jsxs("div",{className:"notification-content",children:[i.jsx("h4",{children:E.title}),i.jsx("p",{children:E.message}),i.jsx("span",{className:"notification-date",children:new Date(E.createdAt).toLocaleString("pt-BR")})]}),!E.isRead&&i.jsx("div",{className:"unread-indicator"})]},E.id))})]})]})]})},FU=[{value:"rental_sales",label:"Vendas de Locaes"},{value:"contracts_quantity",label:"Quantidade de Contratos"},{value:"supplier_commission",label:"Comisso de Fornecedores"},{value:"concierge",label:"Concierge"},{value:"house_sales",label:"Vendas de Casas"}],LU=[{value:"monthly",label:"Mensal"},{value:"quarterly",label:"Trimestral"},{value:"annual",label:"Anual"}],VU=[{value:1,label:"Janeiro"},{value:2,label:"Fevereiro"},{value:3,label:"Maro"},{value:4,label:"Abril"},{value:5,label:"Maio"},{value:6,label:"Junho"},{value:7,label:"Julho"},{value:8,label:"Agosto"},{value:9,label:"Setembro"},{value:10,label:"Outubro"},{value:11,label:"Novembro"},{value:12,label:"Dezembro"}],BU=[{value:{start:1,end:3},label:"Q1 (Jan-Mar)"},{value:{start:4,end:6},label:"Q2 (Abr-Jun)"},{value:{start:7,end:9},label:"Q3 (Jul-Set)"},{value:{start:10,end:12},label:"Q4 (Out-Dez)"}],UU=({filters:t,onFiltersChange:e,onRefresh:r,loading:n})=>{const a=x=>{e({...t,year:x})},o=x=>{const y={period:x};x==="annual"?(y.startMonth=void 0,y.endMonth=void 0):x==="monthly"?(y.startMonth=new Date().getMonth()+1,y.endMonth=void 0):x==="quarterly"&&(y.startMonth=1,y.endMonth=3),e({...t,...y})},c=x=>{e({...t,startMonth:x,endMonth:void 0})},h=(x,y)=>{e({...t,startMonth:x,endMonth:y})},m=x=>{const y=t.categories||[],w=y.includes(x)?y.filter(T=>T!==x):[...y,x];e({...t,categories:w})},d=new Date().getFullYear(),p=[d-3,d-2,d-1,d,d+1,d+2,d+3];return i.jsxs("div",{className:"goals-filters",children:[i.jsxs("div",{className:"filters-header",children:[i.jsxs("div",{className:"filters-title",children:[i.jsx(Hd,{className:"title-icon"}),i.jsx("h3",{children:"Filtros"})]}),i.jsxs("button",{className:"refresh-button",onClick:r,disabled:n,title:"Atualizar dados",children:[i.jsx(Do,{className:n?"spinning":""}),n?"Atualizando...":"Atualizar"]})]}),i.jsxs("div",{className:"filters-content",children:[i.jsxs("div",{className:"filter-group",children:[i.jsxs("label",{className:"filter-label",children:[i.jsx(dn,{className:"label-icon"}),"Ano"]}),i.jsx("div",{className:"year-buttons",children:p.map(x=>i.jsx("button",{className:`year-btn ${t.year===x?"active":""}`,onClick:()=>a(x),children:x},x))})]}),i.jsxs("div",{className:"filter-group",children:[i.jsx("label",{className:"filter-label",children:"Perodo"}),i.jsx("div",{className:"period-buttons",children:LU.map(x=>i.jsx("button",{className:`period-btn ${t.period===x.value?"active":""}`,onClick:()=>o(x.value),children:x.label},x.value))})]}),t.period==="monthly"&&i.jsxs("div",{className:"filter-group",children:[i.jsx("label",{className:"filter-label",children:"Ms"}),i.jsx("select",{className:"month-select",value:t.startMonth||new Date().getMonth()+1,onChange:x=>c(Number(x.target.value)),children:VU.map(x=>i.jsx("option",{value:x.value,children:x.label},x.value))})]}),t.period==="quarterly"&&i.jsxs("div",{className:"filter-group",children:[i.jsx("label",{className:"filter-label",children:"Trimestre"}),i.jsx("div",{className:"quarter-buttons",children:BU.map(x=>i.jsx("button",{className:`quarter-btn ${t.startMonth===x.value.start&&t.endMonth===x.value.end?"active":""}`,onClick:()=>h(x.value.start,x.value.end),children:x.label},x.value.start))})]}),i.jsxs("div",{className:"filter-group",children:[i.jsx("label",{className:"filter-label",children:"Categoria a exibir"}),i.jsx("div",{className:"category-checkboxes",children:FU.map(x=>i.jsxs("label",{className:"category-checkbox",children:[i.jsx("input",{type:"checkbox",checked:t.categories.includes(x.value),onChange:()=>m(x.value)}),i.jsx("span",{className:"checkbox-label",children:x.label})]},x.value))})]})]})]})},zU=({data:t,isLoading:e=!1})=>{const r=d=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(d),n=d=>`${d.toFixed(1)}%`,a=d=>d>=100?"#10b981":d>=75?"#3b82f6":d>=50?"#f59e0b":d>=25?"#f97316":"#ef4444",o=d=>d>=100?{label:"Meta atingida",icon:fn,color:"#10b981"}:d>=75?{label:"Excelente progresso",icon:pr,color:"#3b82f6"}:d>=50?{label:"Progresso moderado",icon:o1,color:"#f59e0b"}:{label:"Ateno Necessria",icon:yd,color:"#ef4444"};if(e)return i.jsx("div",{className:"sales-thermometer",children:i.jsxs("div",{className:"thermometer-skeleton",children:[i.jsx("div",{className:"skeleton-header"}),i.jsx("div",{className:"skeleton-thermometer"}),i.jsx("div",{className:"skeleton-stats"})]})});const c=a(t.percentage),h=o(t.percentage),m=h.icon;return i.jsxs("div",{className:"sales-thermometer",children:[i.jsxs("div",{className:"thermometer-header",children:[i.jsxs("div",{className:"header-title",children:[i.jsx(Pn,{className:"title-icon"}),i.jsxs("h3",{children:["Termmetro de Vendas ",t.year]})]}),i.jsxs("div",{className:"status-badge",style:{backgroundColor:h.color},children:[i.jsx(m,{className:"status-icon"}),i.jsx("span",{children:h.label})]})]}),i.jsxs("div",{className:"thermometer-content",children:[i.jsxs("div",{className:"thermometer-visual",children:[i.jsxs("div",{className:"thermometer-container",children:[i.jsx("div",{className:"thermometer-bulb",style:{borderColor:c},children:i.jsx("div",{className:"thermometer-mercury",style:{backgroundColor:c}})}),i.jsxs("div",{className:"thermometer-tube",children:[i.jsxs("div",{className:"temperature-markers",children:[i.jsxs("div",{className:"marker",children:[i.jsx("span",{className:"marker-label",children:"100%"}),i.jsx("div",{className:"marker-line"})]}),i.jsxs("div",{className:"marker",children:[i.jsx("span",{className:"marker-label",children:"75%"}),i.jsx("div",{className:"marker-line"})]}),i.jsxs("div",{className:"marker",children:[i.jsx("span",{className:"marker-label",children:"50%"}),i.jsx("div",{className:"marker-line"})]}),i.jsxs("div",{className:"marker",children:[i.jsx("span",{className:"marker-label",children:"25%"}),i.jsx("div",{className:"marker-line"})]}),i.jsxs("div",{className:"marker",children:[i.jsx("span",{className:"marker-label",children:"0%"}),i.jsx("div",{className:"marker-line"})]})]}),i.jsx("div",{className:"thermometer-fill-container",children:i.jsx("div",{className:"thermometer-fill",style:{height:`${Math.min(t.percentage,100)}%`,backgroundColor:c},children:i.jsx("div",{className:"fill-shimmer"})})})]})]}),i.jsxs("div",{className:"percentage-display",style:{color:c},children:[i.jsx("span",{className:"percentage-value",children:n(t.percentage)}),i.jsx("span",{className:"percentage-label",children:"Atingido"})]})]}),i.jsxs("div",{className:"thermometer-stats",children:[i.jsxs("div",{className:"stat-card achieved",children:[i.jsxs("div",{className:"stat-header",children:[i.jsx(pr,{className:"stat-icon"}),i.jsx("span",{className:"stat-label",children:"Vendas Realizadas"})]}),i.jsx("div",{className:"stat-value",children:r(t.totalAchieved)}),i.jsxs("div",{className:"stat-detail",children:["Faltam"," ",i.jsx("strong",{children:r(t.totalGoal-t.totalAchieved)})," ","para atingir a meta"]})]}),i.jsxs("div",{className:"stat-card target",children:[i.jsxs("div",{className:"stat-header",children:[i.jsx(fn,{className:"stat-icon"}),i.jsx("span",{className:"stat-label",children:"Meta Anual"})]}),i.jsx("div",{className:"stat-value",children:r(t.totalGoal)}),i.jsx("div",{className:"stat-detail",children:t.percentage>=100?i.jsxs("span",{className:"success-text",children:[i.jsx(fn,{style:{marginRight:"4px"}}),"Meta superada em"," ",r(t.totalAchieved-t.totalGoal),"!"]}):i.jsxs("span",{children:["Meta restante:"," ",i.jsx("strong",{children:r(t.totalGoal-t.totalAchieved)})]})})]})]})]}),i.jsxs("div",{className:"progress-bar-container",children:[i.jsx("div",{className:"progress-bar",children:i.jsx("div",{className:"progress-fill",style:{width:`${Math.min(t.percentage,100)}%`,backgroundColor:c},children:i.jsx("span",{className:"progress-text",children:n(t.percentage)})})}),i.jsxs("div",{className:"progress-labels",children:[i.jsx("span",{children:"R$ 0"}),i.jsx("span",{children:r(t.totalGoal)})]})]})]})},xl={rental_sales:{label:"Vendas de Locaes",goalKey:"rentalSalesGoal",achievedKey:"rentalSalesAchieved",color:"#3b82f6"},contracts_quantity:{label:"Quantidade de Contratos",goalKey:"contractsGoal",achievedKey:"contractsAchieved",color:"#10b981"},supplier_commission:{label:"Comisso Fornecedores",goalKey:"supplierCommissionGoal",achievedKey:"supplierCommissionAchieved",color:"#f59e0b"},concierge:{label:"Concierge",goalKey:"conciergeGoal",achievedKey:"conciergeAchieved",color:"#8b5cf6"},house_sales:{label:"Vendas de Casas",goalKey:"houseSalesGoal",achievedKey:"houseSalesAchieved",color:"#ec4899"}},HU=({data:t,isLoading:e=!1})=>{const[r,n]=B.useState("rental_sales"),a=(p,x)=>x==="contracts_quantity"?p.toString():new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:0,maximumFractionDigits:0}).format(p),o=()=>{const p=xl[r],x=t.reduce((T,b)=>T+b[p.goalKey],0),y=t.reduce((T,b)=>T+b[p.achievedKey],0),E=x>0?y/x*100:0,w=y-x;return{totalGoal:x,totalAchieved:y,percentage:E,difference:w,status:E>=100?"exceeded":E>=75?"on_track":"below_target"}},c=()=>{const p=xl[r];return Math.max(...t.map(x=>Math.max(x[p.goalKey],x[p.achievedKey])))},h=p=>{const x=c();return x>0?p/x*100:0};if(e)return i.jsx("div",{className:"monthly-goals-chart",children:i.jsxs("div",{className:"chart-skeleton",children:[i.jsx("div",{className:"skeleton-header"}),i.jsx("div",{className:"skeleton-filters"}),i.jsx("div",{className:"skeleton-chart"}),i.jsx("div",{className:"skeleton-stats"})]})});const m=xl[r],d=o();return i.jsxs("div",{className:"monthly-goals-chart",children:[i.jsxs("div",{className:"chart-header",children:[i.jsxs("div",{className:"header-title",children:[i.jsx(Os,{className:"title-icon"}),i.jsx("h3",{children:"Evoluo Mensal de Metas"})]}),i.jsxs("div",{className:"header-stats",children:[i.jsxs("div",{className:"stat-badge",children:[i.jsx(fn,{className:"stat-icon"}),i.jsxs("span",{children:["Meta: ",a(d.totalGoal,r)]})]}),i.jsxs("div",{className:`stat-badge ${d.status}`,children:[d.percentage>=100?i.jsx(pr,{className:"stat-icon"}):i.jsx(Xn,{className:"stat-icon"}),i.jsxs("span",{children:[d.percentage.toFixed(1),"% Atingido"]})]})]})]}),i.jsx("div",{className:"category-filters",children:Object.keys(xl).map(p=>i.jsxs("button",{className:`category-btn ${r===p?"active":""}`,onClick:()=>n(p),style:{borderColor:r===p?xl[p].color:void 0},children:[i.jsx("span",{className:"category-color",style:{backgroundColor:xl[p].color}}),xl[p].label]},p))}),i.jsxs("div",{className:"chart-legend",children:[i.jsxs("div",{className:"legend-item",children:[i.jsx("div",{className:"legend-box goal"}),i.jsx("span",{children:"Meta"})]}),i.jsxs("div",{className:"legend-item",children:[i.jsx("div",{className:"legend-box achieved",style:{backgroundColor:m.color}}),i.jsx("span",{children:"Realizado"})]})]}),i.jsx("div",{className:"chart-container",children:i.jsx("div",{className:"chart-bars",children:t.map(p=>{const x=p[m.goalKey],y=p[m.achievedKey],E=x>0?y/x*100:0,w=E>=100;return i.jsxs("div",{className:"bar-group",children:[i.jsxs("div",{className:"bars",children:[i.jsx("div",{className:"bar-container",children:i.jsx("div",{className:"bar goal-bar",style:{height:`${h(x)}%`},title:`Meta: ${a(x,r)}`,children:i.jsx("span",{className:"bar-value",children:a(x,r)})})}),i.jsx("div",{className:"bar-container",children:i.jsxs("div",{className:`bar achieved-bar ${w?"exceeded":""}`,style:{height:`${h(y)}%`,backgroundColor:m.color},title:`Realizado: ${a(y,r)}`,children:[i.jsx("span",{className:"bar-value",children:a(y,r)}),w&&i.jsx("div",{className:"exceeded-badge",children:i.jsx(pr,{})})]})})]}),i.jsxs("div",{className:`month-percentage ${w?"exceeded":""}`,children:[E.toFixed(0),"%"]}),i.jsxs("div",{className:"month-label",children:[i.jsx(dn,{className:"month-icon"}),i.jsx("span",{children:p.month})]})]},p.month)})})}),i.jsxs("div",{className:"chart-summary",children:[i.jsxs("div",{className:"summary-card",children:[i.jsx("div",{className:"summary-label",children:"Total Meta"}),i.jsx("div",{className:"summary-value",children:a(d.totalGoal,r)})]}),i.jsxs("div",{className:"summary-card",children:[i.jsx("div",{className:"summary-label",children:"Total Realizado"}),i.jsx("div",{className:"summary-value achieved",children:a(d.totalAchieved,r)})]}),i.jsxs("div",{className:"summary-card",children:[i.jsx("div",{className:"summary-label",children:"Diferena"}),i.jsxs("div",{className:`summary-value ${d.difference>=0?"positive":"negative"}`,children:[d.difference>=0?"+":"",a(Math.abs(d.difference),r)]})]}),i.jsxs("div",{className:"summary-card",children:[i.jsx("div",{className:"summary-label",children:"Percentual Atingido"}),i.jsxs("div",{className:`summary-value ${d.status}`,children:[d.percentage.toFixed(1),"%"]})]})]})]})},GU={rental_sales:{label:"Vendas de Locaes",icon:Pn,color:"#3b82f6",bgColor:"#dbeafe"},contracts_quantity:{label:"Quantidade de Contratos",icon:_i,color:"#10b981",bgColor:"#d1fae5"},supplier_commission:{label:"Comisso Fornecedores",icon:Ur,color:"#f59e0b",bgColor:"#fef3c7"},concierge:{label:"Concierge",icon:X0,color:"#8b5cf6",bgColor:"#ede9fe"},house_sales:{label:"Vendas de Casas",icon:Nn,color:"#ec4899",bgColor:"#fce7f3"}},qU=({data:t,isLoading:e=!1})=>{const r=(a,o)=>o.toLowerCase().includes("contratos")||o.toLowerCase().includes("contracts")?a.toString():new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:0,maximumFractionDigits:0}).format(a),n=a=>a>=100?{label:"Meta Atingida",icon:Vn,color:"#10b981",bgColor:"#d1fae5"}:a>=75?{label:"No Caminho",icon:pr,color:"#3b82f6",bgColor:"#dbeafe"}:a>=50?{label:"Ateno",icon:yd,color:"#f59e0b",bgColor:"#fef3c7"}:{label:"Abaixo da Meta",icon:u1,color:"#ef4444",bgColor:"#fee2e2"};return e?i.jsxs("div",{className:"category-breakdown",children:[i.jsx("div",{className:"breakdown-header",children:i.jsx("h3",{children:"Desempenho por Categoria"})}),i.jsx("div",{className:"breakdown-grid",children:[1,2,3,4,5].map(a=>i.jsx("div",{className:"category-card skeleton",children:i.jsx("div",{className:"skeleton-content"})},a))})]}):i.jsxs("div",{className:"category-breakdown",children:[i.jsxs("div",{className:"breakdown-header",children:[i.jsx(fn,{className:"header-icon"}),i.jsx("h3",{children:"Desempenho por Categoria"})]}),i.jsx("div",{className:"breakdown-grid",children:t.map(a=>{const o=a.category.toLowerCase().replace(/\s+/g,"_"),c=GU[o]||{label:a.category,icon:fn,color:"#6b7280",bgColor:"#f3f4f6"},h=n(a.percentage),m=c.icon,d=h.icon,p=a.achieved-a.goal,x=p>=0;return i.jsxs("div",{className:"category-card",children:[i.jsxs("div",{className:"card-header",children:[i.jsx("div",{className:"category-icon-wrapper",style:{backgroundColor:c.bgColor},children:i.jsx(m,{className:"category-icon",style:{color:c.color}})}),i.jsxs("div",{className:"category-info",children:[i.jsx("h4",{className:"category-title",children:c.label}),i.jsxs("div",{className:"status-badge",style:{backgroundColor:h.bgColor,color:h.color},children:[i.jsx(d,{className:"status-icon"}),i.jsx("span",{children:h.label})]})]})]}),i.jsxs("div",{className:"progress-section",children:[i.jsx("div",{className:"progress-bar-container",children:i.jsx("div",{className:"progress-bar-bg",children:i.jsx("div",{className:"progress-bar-fill",style:{width:`${Math.min(a.percentage,100)}%`,backgroundColor:c.color},children:i.jsx("div",{className:"progress-shimmer"})})})}),i.jsxs("div",{className:"progress-percentage",style:{color:c.color},children:[a.percentage.toFixed(1),"%"]})]}),i.jsxs("div",{className:"values-section",children:[i.jsxs("div",{className:"value-item",children:[i.jsxs("div",{className:"value-label",children:[i.jsx(fn,{className:"value-icon"}),"Meta"]}),i.jsx("div",{className:"value-amount",children:r(a.goal,a.category)})]}),i.jsxs("div",{className:"value-item achieved",children:[i.jsxs("div",{className:"value-label",children:[i.jsx(Vn,{className:"value-icon"}),"Realizado"]}),i.jsx("div",{className:"value-amount",style:{color:c.color},children:r(a.achieved,a.category)})]})]}),i.jsx("div",{className:"difference-section",children:i.jsxs("div",{className:`difference ${x?"positive":"negative"}`,children:[x?i.jsx(pr,{className:"diff-icon"}):i.jsx(Xn,{className:"diff-icon"}),i.jsxs("span",{className:"diff-label",children:[x?"Superado em":"Faltam",":"]}),i.jsx("span",{className:"diff-value",children:r(Math.abs(p),a.category)})]})}),i.jsxs("div",{className:"mini-chart",children:[i.jsx("div",{className:"chart-label",children:"Tendncia"}),i.jsx("div",{className:"chart-bars",children:[20,35,45,60,75,85,a.percentage].map((y,E)=>i.jsx("div",{className:"chart-bar-wrapper",children:i.jsx("div",{className:"chart-bar",style:{height:`${Math.min(y,100)}%`,backgroundColor:E===6?c.color:`${c.color}80`,opacity:E===6?1:.5}})},E))})]})]},a.category)})})]})},$U=["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],WU=["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],YU={rental_sales:"Vendas de Locaes",contracts_quantity:"Quantidade de Contratos",supplier_commission:"Comisso Fornecedores",concierge:"Concierge",house_sales:"Vendas de Casas"},Ww=t=>nt.fromDate(t),RC=(t,e)=>{if(e===0)return"on_track";const r=t/e*100;return r>=100?"exceeded":r>=70?"on_track":"below_target"},DC=async t=>{try{const e=gr(ct,"annualGoals"),r=Tt(e,bt("year","==",t)),n=await Ln(r);if(n.empty)return null;const a=n.docs[0];return{id:a.id,...a.data()}}catch(e){throw console.error("Erro ao buscar meta anual:",e),new Error("Falha ao buscar meta anual")}},KU=async t=>{try{const e=gr(ct,"monthlyGoals"),r=Tt(e,bt("year","==",t));return(await Ln(r)).docs.map(a=>({id:a.id,...a.data()}))}catch(e){throw console.error("Erro ao buscar metas mensais:",e),new Error("Falha ao buscar metas mensais")}},IC=async(t,e)=>{try{const r=gr(ct,"sales"),n=new Date(t,e-1,1),a=new Date(t,e,0,23,59,59),o=Tt(r,bt("checkInDate",">=",Ww(n)),bt("checkInDate","<=",Ww(a))),c=await Ln(o);let h=0,m=0,d=0,p=0,x=0,y=0;return c.docs.forEach(E=>{const w=E.data(),T=w.contractValue||0;h+=T,w.status!=="cancelled"&&(m+=1);const b=w.conciergeValue||0;p+=b;const A=w.totalAdditionalSales||0;x+=A;const M=w.employeeCommission||0,V=w.salesCommission||0;d+=M+V;const H=w.totalRevenue||0;y+=H}),{year:t,month:e,rentalSalesAchieved:h,contractsQuantityAchieved:m,supplierCommissionAchieved:d,conciergeAchieved:p,houseSalesAchieved:x,totalRevenue:y}}catch(r){throw console.error("Erro ao calcular realizados mensais:",r),new Error("Falha ao calcular realizados")}},Ss=(t,e,r,n)=>{const a=e>0?r/e*100:0,o=r-e,c=RC(r,e),h={category:t,categoryLabel:YU[t],goal:e,achieved:r,percentage:a,status:c,difference:o};return t==="house_sales"&&n&&n>0&&(h.revenuePercentage=r/n*100),h},XU=async t=>{try{const e=await DC(t);if(!e)return{year:t,totalGoal:0,totalAchieved:0,percentage:0,status:"below_target",categories:[]};let r=0;const n=[],a=[];for(let w=1;w<=12;w++){const T=await IC(t,w);a.push(T)}const o=a.reduce((w,T)=>w+T.rentalSalesAchieved,0),c=a.reduce((w,T)=>w+T.contractsQuantityAchieved,0),h=a.reduce((w,T)=>w+T.supplierCommissionAchieved,0),m=a.reduce((w,T)=>w+T.conciergeAchieved,0),d=a.reduce((w,T)=>w+T.houseSalesAchieved,0),p=a.reduce((w,T)=>w+T.totalRevenue,0);n.push(Ss("rental_sales",e.rentalSalesGoal,o)),n.push(Ss("contracts_quantity",e.contractsQuantityGoal,c)),n.push(Ss("supplier_commission",e.supplierCommissionGoal,h)),n.push(Ss("concierge",e.conciergeGoal,m)),n.push(Ss("house_sales",e.houseSalesGoal,d,p));const x=e.rentalSalesGoal+e.contractsQuantityGoal+e.supplierCommissionGoal+e.conciergeGoal+e.houseSalesGoal;r=o+c+h+m+d;const y=x>0?r/x*100:0,E=RC(r,x);return{year:t,totalGoal:x,totalAchieved:r,percentage:y,status:E,categories:n}}catch(e){return console.error("Erro ao gerar termmetro anual:",e),{year:t,totalGoal:0,totalAchieved:0,percentage:0,status:"below_target",categories:[]}}},QU=async(t,e)=>{try{const r=await KU(t),n=await DC(t),a=[];for(const o of e){const c=r.find(x=>x.month===o),h=await IC(t,o),m=c?{rentalSales:c.rentalSalesGoal,contractsQuantity:c.contractsQuantityGoal,supplierCommission:c.supplierCommissionGoal,concierge:c.conciergeGoal,houseSales:c.houseSalesGoal}:{rentalSales:n?n.rentalSalesGoal/12:0,contractsQuantity:n?n.contractsQuantityGoal/12:0,supplierCommission:n?n.supplierCommissionGoal/12:0,concierge:n?n.conciergeGoal/12:0,houseSales:n?n.houseSalesGoal/12:0},d={rentalSales:h.rentalSalesAchieved,contractsQuantity:h.contractsQuantityAchieved,supplierCommission:h.supplierCommissionAchieved,concierge:h.conciergeAchieved,houseSales:h.houseSalesAchieved},p=[Ss("rental_sales",m.rentalSales,d.rentalSales),Ss("contracts_quantity",m.contractsQuantity,d.contractsQuantity),Ss("supplier_commission",m.supplierCommission,d.supplierCommission),Ss("concierge",m.concierge,d.concierge),Ss("house_sales",m.houseSales,d.houseSales,h.totalRevenue)];a.push({year:t,month:o,monthLabel:$U[o-1],goals:m,achieved:d,comparisons:p,totalRevenue:h.totalRevenue})}return a}catch(r){return console.error("Erro ao gerar dados mensais:",r),[]}},JU=(t,e)=>{const r=t.map(o=>({month:WU[o.month-1],rentalSalesGoal:o.goals.rentalSales,rentalSalesAchieved:o.achieved.rentalSales,contractsGoal:o.goals.contractsQuantity,contractsAchieved:o.achieved.contractsQuantity,supplierCommissionGoal:o.goals.supplierCommission,supplierCommissionAchieved:o.achieved.supplierCommission,conciergeGoal:o.goals.concierge,conciergeAchieved:o.achieved.concierge,houseSalesGoal:o.goals.houseSales,houseSalesAchieved:o.achieved.houseSales})),n=e.categories.map(o=>({category:o.categoryLabel,goal:o.goal,achieved:o.achieved,percentage:o.percentage})),a={percentage:e.percentage,achieved:e.totalAchieved,goal:e.totalGoal,remaining:e.totalGoal-e.totalAchieved};return{monthlyTrend:r,categoryComparison:n,thermometerData:a}},ZU=async t=>{try{const{year:e,period:r,startMonth:n,endMonth:a}=t;let o=[];if(r==="annual")o=[1,2,3,4,5,6,7,8,9,10,11,12];else if(r==="quarterly"&&n&&a)for(let d=n;d<=a;d++)o.push(d);else r==="monthly"&&n&&(o=[n]);const c=await XU(e),h=await QU(e,o),m=JU(h,c);return{annualThermometer:c,monthlyData:h,chartsData:m,filters:t,lastUpdate:new Date}}catch(e){console.error("Erro ao obter dados do dashboard:",e);const r=new Date().getFullYear();return{annualThermometer:{year:t?.year||r,totalGoal:0,totalAchieved:0,percentage:0,status:"below_target",categories:[]},monthlyData:[],chartsData:{monthlyTrend:[],categoryComparison:[],thermometerData:{percentage:0,achieved:0,goal:0,remaining:0}},filters:t,lastUpdate:new Date}}},ez=()=>{const t=new Date().getFullYear(),[e,r]=B.useState({year:t,period:"annual",categories:["rental_sales","contracts_quantity","supplier_commission","concierge","house_sales"]}),[n,a]=B.useState(null),[o,c]=B.useState(!1),[h,m]=B.useState(null),d=B.useCallback(async()=>{try{c(!0),m(null);const T=await ZU(e);a(T)}catch(T){console.error("Erro ao carregar dados do dashboard:",T),m("Erro ao carregar dados do dashboard. Por favor, tente novamente.")}finally{c(!1)}},[e]);B.useEffect(()=>{d()},[d]);const p=T=>{r(T)},x=()=>{d()},y=()=>{if(!n?.chartsData.monthlyTrend)return[];let T=[...n.chartsData.monthlyTrend];return e.period==="monthly"&&e.startMonth?T=T.filter(b=>E(b.month)===e.startMonth):e.period==="quarterly"&&e.startMonth&&e.endMonth&&(T=T.filter(b=>{const A=E(b.month);return A>=e.startMonth&&A<=e.endMonth})),T},E=T=>({janeiro:1,fevereiro:2,maro:3,abril:4,maio:5,junho:6,julho:7,agosto:8,setembro:9,outubro:10,novembro:11,dezembro:12})[T.toLowerCase()]||1,w=()=>n?.chartsData.categoryComparison?n.chartsData.categoryComparison.filter(T=>{const b=T.category.toLowerCase().replace(/\s+/g,"_");return e.categories.includes(b)}):[];return i.jsxs("div",{className:"goals-dashboard-container",children:[i.jsx("div",{className:"goals-dashboard-header",children:i.jsxs("div",{className:"goals-dashboard-header-content",children:[i.jsxs("div",{className:"goals-dashboard-header-left",children:[i.jsx("div",{className:"goals-dashboard-header-icon",children:i.jsx(fn,{})}),i.jsxs("div",{className:"goals-dashboard-header-text",children:[i.jsx("h1",{className:"goals-dashboard-header-title",children:"Dashboard de Metas"}),i.jsx("p",{className:"goals-dashboard-header-subtitle",children:"Acompanhe o desempenho das metas e objetivos da empresa"})]})]}),i.jsxs("div",{className:"goals-dashboard-header-badge",children:[i.jsx(dn,{className:"goals-dashboard-header-badge-icon"}),i.jsxs("span",{children:["Ano ",e.year]})]})]})}),i.jsx(UU,{filters:e,onFiltersChange:p,onRefresh:x,loading:o}),h&&i.jsxs("div",{className:"goals-dashboard-error",children:[i.jsx(Ud,{className:"goals-dashboard-error-icon"}),i.jsx("span",{children:h})]}),!h&&i.jsxs("div",{className:"goals-dashboard-content",children:[i.jsx("section",{className:"goals-dashboard-section",children:i.jsx(zU,{data:n?.annualThermometer||{year:e.year,totalGoal:0,totalAchieved:0,percentage:0,status:"below_target",categories:[]},isLoading:o})}),i.jsx("section",{className:"goals-dashboard-section",children:i.jsx(HU,{data:y(),isLoading:o})}),i.jsx("section",{className:"goals-dashboard-section",children:i.jsx(qU,{data:w(),isLoading:o})})]}),!o&&!h&&n&&n.annualThermometer.totalGoal===0&&i.jsxs("div",{className:"goals-dashboard-empty",children:[i.jsx(fn,{className:"goals-dashboard-empty-icon"}),i.jsx("h3",{className:"goals-dashboard-empty-title",children:"Nenhuma Meta Cadastrada"}),i.jsxs("p",{className:"goals-dashboard-empty-text",children:["Para visualizar o Dashboard de Metas,  necessrio cadastrar as metas anuais do ano ",e.year,". Configure as metas de vendas, contratos, comisses e concierge para acompanhar o desempenho da empresa."]})]})]})},tz=({filters:t,onFiltersChange:e,onClearFilters:r,loading:n=!1})=>{const[a,o]=B.useState(t);B.useEffect(()=>{o(t)},[t]);const c=(d,p)=>{const x={...a,[d]:p};o(x),e(x)},h=()=>{const d={period:"month",startDate:void 0,endDate:void 0};o(d),e(d),r()},m=()=>{const d=new Date,p=d.getFullYear();return[{value:"month",label:"Mensal",description:`Ms atual (${d.toLocaleDateString("pt-BR",{month:"long",year:"numeric"})})`},{value:"year",label:"Anual",description:`Ano atual (${p})`},{value:"custom",label:"Personalizado",description:"Selecione um perodo especfico"}]};return i.jsxs("div",{className:"statistics-filters",children:[i.jsxs("div",{className:"filters-header",children:[i.jsxs("div",{className:"filters-title",children:[i.jsx(Hd,{size:24}),i.jsx("h3",{children:"Filtros de Estatsticas"})]}),i.jsx("div",{className:"filters-actions",children:i.jsxs("button",{className:"btn-clear-filters",onClick:h,disabled:n,title:"Limpar Filtros",children:[i.jsx(Do,{size:16}),"Limpar Filtros"]})})]}),i.jsxs("div",{className:"filters-grid",children:[i.jsxs("div",{className:"filter-group",children:[i.jsxs("label",{className:"filter-label",children:[i.jsx(dn,{size:16}),"Perodo"]}),i.jsx("select",{value:a.period,onChange:d=>c("period",d.target.value),className:"filter-select",disabled:n,children:m().map(d=>i.jsx("option",{value:d.value,children:d.label},d.value))}),i.jsx("small",{className:"filter-description",children:m().find(d=>d.value===a.period)?.description})]}),a.period==="custom"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"filter-group",children:[i.jsxs("label",{className:"filter-label",children:[i.jsx(dn,{size:16}),"Data Inicial"]}),i.jsx("input",{type:"date",value:a.startDate||"",onChange:d=>c("startDate",d.target.value||void 0),className:"filter-input",disabled:n})]}),i.jsxs("div",{className:"filter-group",children:[i.jsxs("label",{className:"filter-label",children:[i.jsx(dn,{size:16}),"Data Final"]}),i.jsx("input",{type:"date",value:a.endDate||"",onChange:d=>c("endDate",d.target.value||void 0),className:"filter-input",disabled:n})]})]})]}),i.jsxs("div",{className:"active-filters-summary",children:[i.jsx("h4",{children:"Filtros Ativos:"}),i.jsxs("div",{className:"active-filters-tags",children:[i.jsxs("span",{className:"filter-tag",children:["Perodo:"," ",m().find(d=>d.value===a.period)?.label]}),a.startDate&&i.jsxs("span",{className:"filter-tag",children:["De: ",new Date(a.startDate).toLocaleDateString("pt-BR")]}),a.endDate&&i.jsxs("span",{className:"filter-tag",children:["At: ",new Date(a.endDate).toLocaleDateString("pt-BR")]})]})]}),n&&i.jsxs("div",{className:"filters-loading",children:[i.jsx("div",{className:"loading-spinner"}),i.jsx("span",{children:"Carregando filtros..."})]})]})},rz=({data:t,loading:e=!1})=>{if(e)return i.jsx("div",{className:"jetpack-stats-block",children:i.jsx("div",{className:"loading-spinner"})});const r=m=>m>=1e6?`${(m/1e6).toFixed(1)}M`:m>=1e3?`${(m/1e3).toFixed(1)}K`:m.toString(),n=m=>{const d=m>=0;return{value:`${d?"+":""}${m.toFixed(1)}%`,isPositive:d}},a=n(t.views.variation),o=n(t.visitors.variation),c=n(t.likes.variation),h=n(t.comments.variation);return i.jsxs("div",{className:"jetpack-stats-block",children:[i.jsxs("div",{className:"stats-block-header",children:[i.jsx("div",{className:"stats-block-header-icon",children:i.jsx(rx,{})}),i.jsxs("div",{className:"stats-block-header-text",children:[i.jsx("h2",{className:"stats-block-title",children:"Jetpack Stats - Estatsticas do Site"}),i.jsx("p",{className:"stats-block-subtitle",children:"Anlise de trfego e engajamento do site"})]})]}),i.jsxs("div",{className:"jetpack-stats-grid",children:[i.jsxs("div",{className:"stat-card",children:[i.jsxs("div",{className:"stat-card-header",children:[i.jsx("div",{className:"stat-icon views-icon",children:i.jsx(us,{})}),i.jsxs("div",{className:"stat-variation",children:[a.isPositive?i.jsx(pr,{className:"trend-up"}):i.jsx(Xn,{className:"trend-down"}),i.jsx("span",{className:a.isPositive?"positive":"negative",children:a.value})]})]}),i.jsx("div",{className:"stat-value",children:r(t.views.current)}),i.jsx("div",{className:"stat-label",children:"Visualizaes"}),i.jsxs("div",{className:"stat-previous",children:["Anterior: ",r(t.views.previous)]})]}),i.jsxs("div",{className:"stat-card",children:[i.jsxs("div",{className:"stat-card-header",children:[i.jsx("div",{className:"stat-icon visitors-icon",children:i.jsx(Ur,{})}),i.jsxs("div",{className:"stat-variation",children:[o.isPositive?i.jsx(pr,{className:"trend-up"}):i.jsx(Xn,{className:"trend-down"}),i.jsx("span",{className:o.isPositive?"positive":"negative",children:o.value})]})]}),i.jsx("div",{className:"stat-value",children:r(t.visitors.current)}),i.jsx("div",{className:"stat-label",children:"Visitantes nicos"}),i.jsxs("div",{className:"stat-previous",children:["Anterior: ",r(t.visitors.previous)]})]}),i.jsxs("div",{className:"stat-card",children:[i.jsxs("div",{className:"stat-card-header",children:[i.jsx("div",{className:"stat-icon likes-icon",children:i.jsx(AP,{})}),i.jsxs("div",{className:"stat-variation",children:[c.isPositive?i.jsx(pr,{className:"trend-up"}):i.jsx(Xn,{className:"trend-down"}),i.jsx("span",{className:c.isPositive?"positive":"negative",children:c.value})]})]}),i.jsx("div",{className:"stat-value",children:r(t.likes.current)}),i.jsx("div",{className:"stat-label",children:"Curtidas"}),i.jsxs("div",{className:"stat-previous",children:["Anterior: ",r(t.likes.previous)]})]}),i.jsxs("div",{className:"stat-card",children:[i.jsxs("div",{className:"stat-card-header",children:[i.jsx("div",{className:"stat-icon comments-icon",children:i.jsx(nx,{})}),i.jsxs("div",{className:"stat-variation",children:[h.isPositive?i.jsx(pr,{className:"trend-up"}):i.jsx(Xn,{className:"trend-down"}),i.jsx("span",{className:h.isPositive?"positive":"negative",children:h.value})]})]}),i.jsx("div",{className:"stat-value",children:r(t.comments.current)}),i.jsx("div",{className:"stat-label",children:"Comentrios"}),i.jsxs("div",{className:"stat-previous",children:["Anterior: ",r(t.comments.previous)]})]})]}),i.jsxs("div",{className:"stats-section",children:[i.jsx("h3",{className:"stats-section-title",children:"Pginas Mais Visitadas"}),i.jsx("div",{className:"top-list",children:t.topPages.map((m,d)=>i.jsxs("div",{className:"top-list-item",children:[i.jsx("div",{className:"top-list-rank",children:d+1}),i.jsxs("div",{className:"top-list-content",children:[i.jsx("div",{className:"top-list-name",children:m.page}),i.jsx("div",{className:"top-list-url",children:m.url})]}),i.jsx("div",{className:"top-list-value",children:r(m.views)})]},d))})]}),i.jsxs("div",{className:"stats-section",children:[i.jsx("h3",{className:"stats-section-title",children:"Principais Fontes de Trfego"}),i.jsx("div",{className:"top-list",children:t.topReferrers.map((m,d)=>i.jsxs("div",{className:"top-list-item",children:[i.jsx("div",{className:"top-list-rank",children:d+1}),i.jsx("div",{className:"top-list-content",children:i.jsx("div",{className:"top-list-name",children:m.referrer})}),i.jsx("div",{className:"top-list-value",children:r(m.views)})]},d))})]})]})},nz=({data:t,loading:e=!1})=>{if(e)return i.jsx("div",{className:"instagram-stats-block",children:i.jsx("div",{className:"loading-spinner"})});const r=h=>h>=1e6?`${(h/1e6).toFixed(1)}M`:h>=1e3?`${(h/1e3).toFixed(1)}K`:h.toString(),n=h=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(h),a=h=>{const m=h>=0;return{value:`${m?"+":""}${h.toFixed(1)}%`,isPositive:m}},o=a(t.views.variation),c=a(t.followers.variation);return i.jsxs("div",{className:"instagram-stats-block",children:[i.jsxs("div",{className:"stats-block-header",children:[i.jsx("div",{className:"stats-block-header-icon instagram-icon",children:i.jsx(Os,{})}),i.jsxs("div",{className:"stats-block-header-text",children:[i.jsx("h2",{className:"stats-block-title",children:"Instagram - Estatsticas e Trfego Pago"}),i.jsx("p",{className:"stats-block-subtitle",children:"Anlise de performance e investimento em trfego pago"})]})]}),i.jsxs("div",{className:"stats-section",children:[i.jsx("h3",{className:"stats-section-title",children:"Visualizaes"}),i.jsxs("div",{className:"stat-card-large",children:[i.jsxs("div",{className:"stat-card-large-header",children:[i.jsx("div",{className:"stat-icon-large views-icon",children:i.jsx(us,{})}),i.jsxs("div",{className:"stat-card-large-info",children:[i.jsx("div",{className:"stat-value-large",children:r(t.views.current)}),i.jsx("div",{className:"stat-label-large",children:"Visualizaes no Ms"}),i.jsxs("div",{className:"stat-variation-large",children:[o.isPositive?i.jsx(pr,{className:"trend-up"}):i.jsx(Xn,{className:"trend-down"}),i.jsxs("span",{className:o.isPositive?"positive":"negative",children:[o.value," vs. ms anterior"]})]})]})]}),i.jsx("div",{className:"stat-card-large-details",children:i.jsxs("div",{className:"stat-detail-item",children:[i.jsx("span",{className:"stat-detail-label",children:"Visualizaes de No Seguidores"}),i.jsxs("span",{className:"stat-detail-value",children:[r(t.views.nonFollowersViews)," (",t.views.nonFollowersPercentage.toFixed(1),"%)"]})]})})]})]}),i.jsxs("div",{className:"stats-section",children:[i.jsx("h3",{className:"stats-section-title",children:"Seguidores"}),i.jsxs("div",{className:"stat-card-large",children:[i.jsxs("div",{className:"stat-card-large-header",children:[i.jsx("div",{className:"stat-icon-large followers-icon",children:i.jsx(Ur,{})}),i.jsxs("div",{className:"stat-card-large-info",children:[i.jsx("div",{className:"stat-value-large",children:r(t.followers.current)}),i.jsx("div",{className:"stat-label-large",children:"Total de Seguidores"}),i.jsxs("div",{className:"stat-variation-large",children:[c.isPositive?i.jsx(pr,{className:"trend-up"}):i.jsx(Xn,{className:"trend-down"}),i.jsxs("span",{className:c.isPositive?"positive":"negative",children:[c.value," vs. ms anterior"]})]})]})]}),i.jsx("div",{className:"stat-card-large-details",children:i.jsxs("div",{className:"stat-detail-item",children:[i.jsx("span",{className:"stat-detail-label",children:"Seguidores Conquistados no Ms"}),i.jsxs("span",{className:"stat-detail-value positive",children:["+",r(t.followers.gainedThisMonth)]})]})})]})]}),i.jsxs("div",{className:"stats-section",children:[i.jsx("h3",{className:"stats-section-title",children:"Trfego Pago - Investimento e ROI"}),i.jsxs("div",{className:"paid-traffic-grid",children:[i.jsx("div",{className:"paid-traffic-card main-card",children:i.jsxs("div",{className:"paid-traffic-card-header",children:[i.jsx("div",{className:"paid-traffic-icon",children:i.jsx(Pn,{})}),i.jsxs("div",{children:[i.jsx("div",{className:"paid-traffic-label",children:"Total Investido no Ms"}),i.jsx("div",{className:"paid-traffic-value",children:n(t.paidTraffic.totalInvested)})]})]})}),i.jsx("div",{className:"paid-traffic-card",children:i.jsxs("div",{className:"paid-traffic-card-header",children:[i.jsx("div",{className:"paid-traffic-icon small",children:i.jsx(us,{})}),i.jsxs("div",{children:[i.jsx("div",{className:"paid-traffic-label",children:"Visualizaes do Trfego Pago"}),i.jsx("div",{className:"paid-traffic-value",children:r(t.paidTraffic.viewsFromPaid)}),i.jsxs("div",{className:"paid-traffic-cost",children:["Custo por visualizao: ",n(t.paidTraffic.costPerView)]})]})]})}),i.jsx("div",{className:"paid-traffic-card",children:i.jsxs("div",{className:"paid-traffic-card-header",children:[i.jsx("div",{className:"paid-traffic-icon small",children:i.jsx(Ur,{})}),i.jsxs("div",{children:[i.jsx("div",{className:"paid-traffic-label",children:"Seguidores do Trfego Pago"}),i.jsx("div",{className:"paid-traffic-value",children:r(t.paidTraffic.followersFromPaid)}),i.jsxs("div",{className:"paid-traffic-cost",children:["Custo por seguidor: ",n(t.paidTraffic.costPerFollower)]})]})]})}),i.jsx("div",{className:"paid-traffic-card",children:i.jsxs("div",{className:"paid-traffic-card-header",children:[i.jsx("div",{className:"paid-traffic-icon small",children:i.jsx(fn,{})}),i.jsxs("div",{children:[i.jsx("div",{className:"paid-traffic-label",children:"Contratos Fechados pelo Instagram"}),i.jsx("div",{className:"paid-traffic-value",children:t.paidTraffic.contractsFromInstagram}),i.jsxs("div",{className:"paid-traffic-cost",children:["Custo por contrato: ",n(t.paidTraffic.costPerContract)]})]})]})})]}),i.jsxs("div",{className:"roi-card",children:[i.jsxs("div",{className:"roi-header",children:[i.jsx("div",{className:"roi-label",children:"ROI (Retorno sobre Investimento)"}),i.jsxs("div",{className:`roi-value ${t.paidTraffic.roi>=0?"positive":"negative"}`,children:[t.paidTraffic.roi>=0?"+":"",t.paidTraffic.roi.toFixed(2),"%"]})]}),i.jsx("div",{className:"roi-description",children:t.paidTraffic.roi>=0?"O investimento est gerando retorno positivo":"O investimento est abaixo do esperado"})]})]}),i.jsxs("div",{className:"stats-section",children:[i.jsx("h3",{className:"stats-section-title",children:"Engajamento"}),i.jsxs("div",{className:"engagement-grid",children:[i.jsxs("div",{className:"engagement-card",children:[i.jsx("div",{className:"engagement-label",children:"Taxa de Engajamento"}),i.jsxs("div",{className:"engagement-value",children:[t.engagement.engagementRate.toFixed(2),"%"]})]}),i.jsxs("div",{className:"engagement-card",children:[i.jsx("div",{className:"engagement-label",children:"Curtidas"}),i.jsx("div",{className:"engagement-value",children:r(t.engagement.likes)})]}),i.jsxs("div",{className:"engagement-card",children:[i.jsx("div",{className:"engagement-label",children:"Comentrios"}),i.jsx("div",{className:"engagement-value",children:r(t.engagement.comments)})]}),i.jsxs("div",{className:"engagement-card",children:[i.jsx("div",{className:"engagement-label",children:"Salvos"}),i.jsx("div",{className:"engagement-value",children:r(t.engagement.saves)})]}),i.jsxs("div",{className:"engagement-card",children:[i.jsx("div",{className:"engagement-label",children:"Compartilhamentos"}),i.jsx("div",{className:"engagement-value",children:r(t.engagement.shares)})]})]})]}),i.jsxs("div",{className:"stats-section",children:[i.jsx("h3",{className:"stats-section-title",children:"Posts com Melhor Performance"}),i.jsx("div",{className:"top-posts-list",children:t.topPosts.map((h,m)=>i.jsxs("div",{className:"top-post-item",children:[i.jsx("div",{className:"top-post-rank",children:m+1}),i.jsxs("div",{className:"top-post-content",children:[i.jsx("div",{className:"top-post-caption",children:h.caption}),i.jsxs("div",{className:"top-post-metrics",children:[i.jsxs("span",{children:[r(h.views)," visualizaes"]}),i.jsxs("span",{children:[r(h.likes)," curtidas"]}),i.jsxs("span",{children:[r(h.comments)," comentrios"]}),i.jsxs("span",{className:"engagement-rate",children:[h.engagementRate.toFixed(1),"% engajamento"]})]})]})]},h.id))})]})]})},Cm=(t,e)=>e===0?t>0?100:0:(t-e)/e*100,Vh=(t,e,r=30)=>{const n=[],a=new Date,o=t==="year"?12:r;for(let c=o-1;c>=0;c--){let h;t==="year"?h=new Date(a.getFullYear(),a.getMonth()-c,1):(h=new Date(a),h.setDate(h.getDate()-c));const m=e/o+(Math.random()*e*.2-e*.1);n.push({period:h.toISOString().split("T")[0],value:Math.max(0,Math.floor(m)),label:t==="year"?h.toLocaleDateString("pt-BR",{month:"short",year:"numeric"}):h.toLocaleDateString("pt-BR",{day:"2-digit",month:"short"})})}return n},Yw={async getJetpackStats(t){await new Promise(d=>setTimeout(d,500));const e=t.period==="month",r=e?15e3:18e4,n=e?8e3:95e3,a=r+Math.floor(Math.random()*r*.2),o=r-Math.floor(Math.random()*r*.1),c=n+Math.floor(Math.random()*n*.2),h=n-Math.floor(Math.random()*n*.1),m=e?30:12;return{views:{current:a,previous:o,variation:Cm(a,o),chartData:Vh(t.period,a,m)},visitors:{current:c,previous:h,variation:Cm(c,h),chartData:Vh(t.period,c,m)},likes:{current:Math.floor(a*.05),previous:Math.floor(o*.04),variation:12.5},comments:{current:Math.floor(a*.01),previous:Math.floor(o*.008),variation:15},topPages:[{page:"Pgina Inicial",views:4500,url:"/"},{page:"Sobre Ns",views:3200,url:"/sobre"},{page:"Casas",views:2800,url:"/casas"},{page:"Contato",views:2100,url:"/contato"},{page:"Blog",views:1800,url:"/blog"}],topReferrers:[{referrer:"Google",views:6200},{referrer:"Instagram",views:3800},{referrer:"Facebook",views:2100},{referrer:"Direto",views:1500},{referrer:"Outros",views:1400}]}},async getInstagramStats(t){await new Promise(re=>setTimeout(re,500));const e=t.period==="month",r=e?25e3:3e5,n=e?5e3:4800,a=35+Math.random()*10,o=r+Math.floor(Math.random()*r*.2),c=r-Math.floor(Math.random()*r*.1),h=Math.floor(o*(a/100)),m=n+Math.floor(Math.random()*200),d=n-Math.floor(Math.random()*100),p=m-d,x=e?30:12,y=e?2500+Math.random()*500:3e4+Math.random()*5e3,E=Math.floor(y*8),w=Math.floor(y*.8),T=Math.floor(y/150),b=E>0?y/E:0,A=w>0?y/w:0,M=T>0?y/T:0,V=T*2500,H=V>0?(V-y)/y*100:0;return{views:{current:o,previous:c,variation:Cm(o,c),nonFollowersPercentage:Number(a.toFixed(2)),nonFollowersViews:h,chartData:Vh(t.period,o,x)},followers:{current:m,previous:d,variation:Cm(m,d),gainedThisMonth:p,chartData:Vh(t.period,m,x)},engagement:{likes:Math.floor(o*.08),comments:Math.floor(o*.015),saves:Math.floor(o*.02),shares:Math.floor(o*.005),engagementRate:3.5+Math.random()*1.5},paidTraffic:{totalInvested:Math.floor(y),viewsFromPaid:E,followersFromPaid:w,contractsFromInstagram:T,costPerView:Number(b.toFixed(2)),costPerFollower:Number(A.toFixed(2)),costPerContract:Number(M.toFixed(2)),roi:Number(H.toFixed(2)),chartData:Vh(t.period,y,x)},topPosts:[{id:"1",caption:"Casa de praia com vista incrvel...",views:5200,likes:450,comments:85,engagementRate:10.3},{id:"2",caption:"Novo lanamento disponvel!",views:4800,likes:420,comments:72,engagementRate:10.2},{id:"3",caption:"Dicas de decorao...",views:4100,likes:380,comments:65,engagementRate:10.9},{id:"4",caption:"Depoimento de cliente satisfeito",views:3900,likes:350,comments:58,engagementRate:10.5},{id:"5",caption:"Tour virtual disponvel",views:3600,likes:320,comments:52,engagementRate:10.3}]}}},az=()=>{const{user:t}=Nu(),[e,r]=B.useState(!0),[n,a]=B.useState({period:"month",startDate:void 0,endDate:void 0}),[o,c]=B.useState(null),[h,m]=B.useState(null),d=async()=>{try{r(!0);const[w,T]=await Promise.all([Yw.getJetpackStats(n),Yw.getInstagramStats(n)]);c(w),m(T)}catch(w){console.error("Erro ao carregar dados do dashboard:",w)}finally{r(!1)}};B.useEffect(()=>{d()},[n]);const p=w=>{a(w)},x=w=>{a(w)},y=async w=>{try{console.log(`Exportando dados em formato ${w}`,{filters:n,jetpackStats:o,instagramStats:h})}catch(T){console.error("Erro ao exportar dados:",T)}},E=()=>{d()};return i.jsxs("div",{className:"dashboard-statistics",children:[i.jsx("div",{className:"statistics-dashboard-header",children:i.jsxs("div",{className:"statistics-dashboard-header-content",children:[i.jsxs("div",{className:"statistics-dashboard-header-left",children:[i.jsx("div",{className:"statistics-dashboard-header-icon",children:i.jsx(Os,{})}),i.jsxs("div",{className:"statistics-dashboard-header-text",children:[i.jsx("h1",{className:"statistics-dashboard-header-title",children:"Sprint Dashboard - Estatsticas"}),i.jsx("p",{className:"statistics-dashboard-header-subtitle",children:"Integrao com Jetpack Stats e Instagram - Anlise de performance e trfego pago"})]})]}),i.jsxs("div",{className:"statistics-dashboard-header-actions",children:[i.jsxs("div",{className:"statistics-dashboard-header-badge",children:[i.jsx(dn,{className:"statistics-dashboard-header-badge-icon"}),i.jsxs("span",{children:["Perodo:"," ",n.period==="month"?"Mensal":n.period==="year"?"Anual":"Personalizado"]})]}),i.jsxs("button",{className:"action-btn refresh-btn",onClick:E,disabled:e,children:[i.jsx(Do,{size:16,className:e?"spinning":""}),"Atualizar"]}),i.jsxs("div",{className:"export-dropdown",children:[i.jsxs("button",{className:"action-btn export-btn",children:[i.jsx(l1,{size:16}),"Exportar"]}),i.jsxs("div",{className:"dropdown-menu",children:[i.jsx("button",{onClick:()=>y("excel"),children:"Exportar para Excel"}),i.jsx("button",{onClick:()=>y("pdf"),children:"Exportar para PDF"})]})]}),i.jsxs("button",{className:"action-btn settings-btn",children:[i.jsx(Tl,{size:16}),"Configuraes"]})]})]})}),i.jsx("div",{className:"dashboard-filters-wrapper",children:i.jsx(tz,{filters:n,onFiltersChange:p,onClearFilters:()=>x({period:"month",startDate:void 0,endDate:void 0}),loading:e})}),i.jsx("div",{className:"dashboard-content",children:e?i.jsxs("div",{className:"dashboard-loading",children:[i.jsx("div",{className:"loading-spinner"}),i.jsx("p",{children:"Carregando dados do dashboard..."})]}):i.jsxs(i.Fragment,{children:[o&&i.jsx("div",{className:"dashboard-section",children:i.jsx(rz,{data:o,loading:!1})}),h&&i.jsx("div",{className:"dashboard-section",children:i.jsx(nz,{data:h,loading:!1})})]})}),i.jsx("div",{className:"dashboard-footer",children:i.jsxs("div",{className:"footer-content",children:[i.jsxs("div",{className:"footer-info",children:[i.jsxs("span",{className:"last-update",children:["ltima atualizao: ",new Date().toLocaleString("pt-BR")]}),i.jsxs("span",{className:"user-info",children:["Logado como: ",t?.email||"Usurio"]})]}),i.jsxs("div",{className:"footer-stats",children:[i.jsxs("span",{className:"stat-item",children:[i.jsx("strong",{children:"Perodo:"})," ",n.period==="month"?"Mensal":n.period==="year"?"Anual":"Personalizado"]}),i.jsxs("span",{className:"stat-item",children:[i.jsx("strong",{children:"Fonte:"})," Jetpack Stats + Instagram API (Mock)"]})]})]})})]})},sz=()=>i.jsx(zM,{children:i.jsxs(yM,{children:[i.jsx(kn,{path:Vr.home,element:i.jsx(PT,{})}),i.jsx(kn,{path:Vr.login,element:i.jsx(PT,{})}),i.jsx(kn,{path:Vr.register,element:i.jsx(fP,{})}),i.jsx(kn,{path:Vr.clients,element:i.jsx(Qa,{children:i.jsx(Ja,{children:i.jsx(qP,{})})})}),i.jsx(kn,{path:Vr.owners,element:i.jsx(Qa,{children:i.jsx(Ja,{children:i.jsx(XP,{})})})}),i.jsx(kn,{path:Vr.suppliers,element:i.jsx(Qa,{children:i.jsx(Ja,{children:i.jsx(tF,{})})})}),i.jsx(kn,{path:Vr.employees,element:i.jsx(Qa,{children:i.jsx(Ja,{children:i.jsx(iF,{})})})}),i.jsx(kn,{path:Vr.houses,element:i.jsx(Qa,{children:i.jsx(Ja,{children:i.jsx(hF,{})})})}),i.jsx(kn,{path:Vr.sales,element:i.jsx(Qa,{children:i.jsx(Ja,{children:i.jsx(gF,{})})})}),i.jsx(kn,{path:Vr.financial,element:i.jsx(Qa,{children:i.jsx(Ja,{children:i.jsx(vU,{})})})}),i.jsx(kn,{path:Vr.dashboardConsolidacao,element:i.jsx(Qa,{children:i.jsx(Ja,{children:i.jsx(bU,{})})})}),i.jsx(kn,{path:Vr.dashboardProcessos,element:i.jsx(Qa,{children:i.jsx(Ja,{children:i.jsx(PU,{})})})}),i.jsx(kn,{path:Vr.dashboardGoals,element:i.jsx(Qa,{children:i.jsx(Ja,{children:i.jsx(ez,{})})})}),i.jsx(kn,{path:Vr.dashboardEstatisticas,element:i.jsx(Qa,{children:i.jsx(Ja,{children:i.jsx(az,{})})})})]})});function iz(t){return Ke({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(t)}function oz(t){return Ke({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(t)}function Kw(t){return Ke({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"},child:[]}]})(t)}function Xw(t){return Ke({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"},child:[]}]})(t)}const lz=({id:t,type:e,title:r,message:n,duration:a=3e3,onClose:o})=>{B.useEffect(()=>{const h=setTimeout(()=>{o(t)},a);return()=>clearTimeout(h)});const c=()=>{switch(e){case"success":return i.jsx(iz,{className:"toast-icon success"});case"error":return i.jsx(Xw,{className:"toast-icon error"});case"warning":return i.jsx(oz,{className:"toast-icon warning"});case"info":return i.jsx(Kw,{className:"toast-icon info"});default:return i.jsx(Kw,{className:"toast-icon info"})}};return i.jsx("div",{className:`toast ${e}`,children:i.jsxs("div",{className:"toast-content",children:[c(),i.jsxs("div",{className:"toast-text",children:[i.jsx("h3",{className:"toast-title",children:r}),i.jsx("p",{className:"toast-message",children:n})]}),i.jsx("button",{className:"toast-close",onClick:()=>o(t),"aria-label":"Close toast",children:i.jsx(Xw,{className:"toast-close-icon"})})]})})},cz=({children:t})=>{const[e,r]=B.useState([]),n=B.useCallback(p=>{const x=Math.random().toString(36).substr(2,9),y={...p,id:x};r(E=>[...E,y])},[]),a=B.useCallback(p=>{r(x=>x.filter(y=>y.id!==p))},[]),o=B.useCallback((p,x,y=5e3)=>{n({type:"success",title:p,message:x,duration:y})},[n]),c=B.useCallback((p,x,y=7e3)=>{n({type:"error",title:p,message:x,duration:y})},[n]),h=B.useCallback((p,x,y=6e3)=>{n({type:"warning",title:p,message:x,duration:y})},[n]),m=B.useCallback((p,x,y=5e3)=>{n({type:"info",title:p,message:x,duration:y})},[n]),d={toasts:e,showToast:n,hideToast:a,showSuccess:o,showError:c,showWarning:h,showInfo:m};return i.jsxs(US.Provider,{value:d,children:[t,i.jsx("div",{className:"toast-container",children:e.map(p=>i.jsx(lz,{...p,onClose:a},p.id))})]})};function uz(){return i.jsx(cz,{children:i.jsx(C6,{children:i.jsx(sz,{})})})}gR.createRoot(document.getElementById("root")).render(i.jsx(B.StrictMode,{children:i.jsx(uz,{})}));
